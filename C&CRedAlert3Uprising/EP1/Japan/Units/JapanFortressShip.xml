<?xml version="1.0" encoding="us-ascii"?>
<AssetDeclaration xmlns="uri:ea.com:eala:asset" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xai="uri:ea.com:eala:asset:instance" xmlns:xi="http://www.w3.org/2001/XInclude">
	<Tags></Tags>
	<Includes>
		<!-- Referenced Files-->
		<Include type="all" source="DATA:GlobalData/GlobalDefines.xml" />
		<Include type="instance" source="DATA:GlobalData/Armor.xml" />		

		<!-- Base Object -->
		<Include type="instance" source="DATA:BaseObjects/BaseVehicle.xml" />
		
		<!--Art Includes-->
		<Include type="all" source="ART:JUFortressShip_SKN.w3x" />
    <Include type="all" source="ART:JUFortressShip_IDLA.w3x" />
    <Include type="all" source="ART:JUFortressShip_BLD.w3x" />
    <Include type="all" source="ART:JUFortressShip_BLD2.w3x" />
    <Include type="all" source="ART:JUFortressShipHead_SKN.w3x" />
    <Include type="all" source="ART:JUFortressShipHead_IDLA.w3x" />
    <Include type="all" source="ART:JUFortressShipHead_FP.w3x" />
	<Include type="all" source="ART:JUFortressShip_TRANS.w3x" />
    <Include type="all" source="ART:FXJapanPearlLaser02.xml" />
    <Include type="all" source="ART:FXJapanPearlLaser01.xml" />
    <Include type="all" source="ART:JUFortressShip_D.xml" />

  </Includes>
	
	<GameObject
		id="JapanFortressShip"
		inheritFrom="BaseVehicle" 
		SelectPortrait="Portrait_JapanGigaFortressShip"
		SelectPortraitTransformed="Portrait_JapanGigaFortressHead"
		ButtonImage="Button_JapanGigaFortressShip"
		ButtonImageTransformed="Button_JapanGigaFortressHead"
		Side="Japan"
		EditorSorting="UNIT"
		SubGroupPriority="235"
		TransportSlotCount="100"
		BuildTime="20"
		CommandSet="JapanFortressShipCommandSet"
		KindOf="SELECTABLE CAN_ATTACK CAN_CAST_REFLECTIONS SCORE VEHICLE CAN_NOT_BUILD_ON_LAND CAN_BUILD_ON_DEEP_WATER UNIT_BUILT_LIKE_STRUCTURE TRANSFORMER"
		RadarPriority="UNIT"
		PlacementViewAngle="315d"
		Description="Desc:JapanFortressShip"
		DescriptionTransformed="Desc:JapanFortressShip_Air"
		TypeDescription="Type:JapanFortressShip"
		TypeDescriptionTransformed="Type:JapanFortressShip_Air"
		EditorName="JapanFortressShip"
		UnitIntro="Japan_GigaFortress_UnitIntro"
		HealthBoxHeightOffset="50">
		<DisplayName
			xai:joinAction="Replace" xmlns:xai="uri:ea.com:eala:asset:instance">Name:JapanFortressShip</DisplayName>
		<DisplayNameTransformed
			xai:joinAction="Replace" xmlns:xai="uri:ea.com:eala:asset:instance">Name:JapanFortressShip_Air</DisplayNameTransformed>
		<GameDependency>
			<NeededUpgrade>Upgrade_JapanNavalYardTech3</NeededUpgrade>
			<RequiredObject>JapanTechStructure</RequiredObject>
		</GameDependency>		
		<ObjectResourceInfo>
			<BuildCost Account="=$ACCOUNT_ORE" Amount="6300"/>
		</ObjectResourceInfo>
		<ArmorSet
			Armor="JapanFortressShipArmor"
			DamageFX="VehicleDamageFX" />
		<LocomotorSet
			Locomotor="JapanFortressShipWaterLocomotor"
			Condition="NORMAL"
			Speed="40.0" />		
		<LocomotorSet
			Locomotor="JapanFortressShipAirborneLocomotor"
			Condition="SUPERSONIC"
			Speed="30.0" />
		<SkirmishAIInformation
			UnitBuilderStandardCombatUnit="true"
			ConquerMetricsOverrideDPS="300"
			ConquerMetricsOverrideDamageType="EXPLOSIVE"
			ConquerMetricsOverrideAntiMask="ANTI_WATER ANTI_GROUND ANTI_STRUCTURE ANTI_AIRBORNE_VEHICLE ANTI_AIRBORNE_INFANTRY"
			CanFireUpCliffs="true"/>
		<Draws>
			<ScriptedModelDraw
				id="ModuleTag_Draw"
				OkToChangeModelColor="true"
				InitialRecoilSpeed="0.5"
				MaxRecoilDistance="6.0"
				RecoilDamping="5.0"
				RecoilSettleSpeed="3.0"
				ExtraPublicBone="FX_Weapon_GunA_01 FX_Weapon_GunA_02 FX_Weapon_GunB_01 FX_Weapon_GunB_02 FX_Weapon_GunC_01 FX_Weapon_GunC_02 FX_Weapon_GunD_01 FX_Weapon_GunD_02 FX_WeaponLaser Turret_GunA Turret_Pitch_GunA Turret_GunB Turret_Pitch_GunB Turret_GunC Turret_Pitch_GunC Turret_GunD Turret_Pitch_GunD FX_Weapon_RocketA FX_Weapon_RocketB FX_Weapon_RocketC FX_Weapon_RocketD PointDefenseDroneAttach">
				<ModelConditionState
					ParseCondStateType="PARSE_DEFAULT"
					RetainSubObjects="true">
					<Model
						Name="JUFortressShip_SKN" />
					
					<WeaponFireFXBone
						WeaponSlotID="1"
						WeaponSlotType="PRIMARY_WEAPON"
						BoneName="FX_Weapon_GunA_" />
					<WeaponLaunchBone
						WeaponSlotID="1"
						WeaponSlotType="PRIMARY_WEAPON"
						BoneName="FX_Weapon_GunA_" />
					<Turret
						TurretNameKey="Turret_GunA"
						TurretPitch="Turret_Pitch_GunA"
						TurretID="1" />
						
					<WeaponFireFXBone
						WeaponSlotID="2"
						WeaponSlotType="PRIMARY_WEAPON"
						BoneName="FX_Weapon_GunB_" />
					<WeaponLaunchBone
						WeaponSlotID="2"
						WeaponSlotType="PRIMARY_WEAPON"
						BoneName="FX_Weapon_GunB_" />
					<Turret
						TurretNameKey="Turret_GunB"
						TurretPitch="Turret_Pitch_GunB"
						TurretID="2" />
						
					<WeaponFireFXBone
						WeaponSlotID="3"
						WeaponSlotType="PRIMARY_WEAPON"
						BoneName="FX_Weapon_GunC_" />
					<WeaponLaunchBone
						WeaponSlotID="3"
						WeaponSlotType="PRIMARY_WEAPON"
						BoneName="FX_Weapon_GunC_" />
					<Turret
						TurretNameKey="Turret_GunC"
						TurretPitch="Turret_Pitch_GunC"
						TurretID="3" />
						
					<WeaponFireFXBone
						WeaponSlotID="4"
						WeaponSlotType="PRIMARY_WEAPON"
						BoneName="FX_Weapon_GunD_" />
					<WeaponLaunchBone
						WeaponSlotID="4"
						WeaponSlotType="PRIMARY_WEAPON"
						BoneName="FX_Weapon_GunD_" />
					<Turret
						TurretNameKey="Turret_GunD"
						TurretPitch="Turret_Pitch_GunD"
						TurretID="4" />	

					<WeaponFireFXBone
						WeaponSlotID="5"
						WeaponSlotType="PRIMARY_WEAPON"
						BoneName="FX_Weapon_RocketA" />
					<WeaponLaunchBone
						WeaponSlotID="5"
						WeaponSlotType="PRIMARY_WEAPON"
						BoneName="FX_Weapon_RocketA" />	

					<WeaponFireFXBone
						WeaponSlotID="6"
						WeaponSlotType="PRIMARY_WEAPON"
						BoneName="FX_Weapon_RocketB" />
					<WeaponLaunchBone
						WeaponSlotID="6"
						WeaponSlotType="PRIMARY_WEAPON"
						BoneName="FX_Weapon_RocketB" />	

					<WeaponFireFXBone
						WeaponSlotID="7"
						WeaponSlotType="PRIMARY_WEAPON"
						BoneName="FX_Weapon_RocketC" />
					<WeaponLaunchBone
						WeaponSlotID="7"
						WeaponSlotType="PRIMARY_WEAPON"
						BoneName="FX_Weapon_RocketC" />	

					<WeaponFireFXBone
						WeaponSlotID="8"
						WeaponSlotType="PRIMARY_WEAPON"
						BoneName="FX_Weapon_RocketD" />
					<WeaponLaunchBone
						WeaponSlotID="8"
						WeaponSlotType="PRIMARY_WEAPON"
						BoneName="FX_Weapon_RocketD" />	

					<WeaponFireFXBone
						WeaponSlotID="8"
						WeaponSlotType="SECONDARY_WEAPON"
						BoneName="FX_WeaponLaser" />
					<WeaponLaunchBone
						WeaponSlotID="8"
						WeaponSlotType="SECONDARY_WEAPON"
						BoneName="FX_WeaponLaser" />

					<WeaponFireFXBone
						WeaponSlotID="9"
						WeaponSlotType="SECONDARY_WEAPON"
						BoneName="FX_WeaponLaser" />
					<WeaponLaunchBone
						WeaponSlotID="9"
						WeaponSlotType="SECONDARY_WEAPON"
						BoneName="FX_WeaponLaser" />
					<Turret
						TurretNameKey="Turret"
						TurretPitch="Turret_Pitch"
						TurretID="9" />
				</ModelConditionState>

        <ModelConditionState
					ParseCondStateType="PARSE_NORMAL"
					ConditionsYes="STRUCTURE_UNPACKING">
          <Model
						Name="JUFortressShip_SKN" />
          <Material ShaderName="BasicW3DHolographic.fx" TechniqueName="Default">
            <Constants>
              <Float Name="ColorAmbient">
                <Value>0.000000</Value>
                <Value>0.000000</Value>
                <Value>0.000000</Value>
              </Float>
              <Float Name="ColorDiffuse">
                <Value>0.000000</Value>
                <Value>0.000000</Value>
                <Value>0.000000</Value>
              </Float>
              <Float Name="ColorSpecular">
                <Value>0.000000</Value>
                <Value>0.000000</Value>
                <Value>0.000000</Value>
              </Float>
              <Float Name="Shininess">
                <Value>0.000000</Value>
              </Float>
              <Float Name="ColorEmissive">
                <Value>1.000000</Value>
                <Value>1.000000</Value>
                <Value>1.000000</Value>
              </Float>
              <Texture Name="Texture_0">
                <Value>FXJapanBuildMask</Value>
              </Texture>
              <Bool Name="DepthWriteEnable">
                <Value>false</Value>
              </Bool>
              <Bool Name="AlphaTestEnable">
                <Value>false</Value>
              </Bool>
              <Bool Name="CullingEnable">
                <Value>true</Value>
              </Bool>
              <Int Name="BlendMode">
                <Value>1</Value>
              </Int>
            </Constants>
          </Material>
        </ModelConditionState>
        
        <ModelConditionState
          ParseCondStateType="PARSE_NORMAL"
          ConditionsYes="FORMATION_PREVIEW USER_1">
          <Model
            Name="JUFortressShipHead_FP" />
        </ModelConditionState>

        <ModelConditionState
          ParseCondStateType="PARSE_NORMAL"
          ConditionsYes="USER_1 USER_3 REALLYDAMAGED">
          <Model
						Name="JUFortressShip_TRANS" />
					<ParticleSysBone
            BoneName="FX_Ship_Fire01"
            FXParticleSystemTemplate="JapanVehicleDamagedSparks"
            FollowBone="true"/>
					<ParticleSysBone
						BoneName="FX_Ship_Fire01"
						FXParticleSystemTemplate="JapanVehicleDamagedSmoke"
						FollowBone="true"/>
					<ParticleSysBone
						BoneName="FX_Ship_Fire01"
						FXParticleSystemTemplate="JapanVehicleDamagedFire"
						FollowBone="true"/>
					<ParticleSysBone
            BoneName="FX_Ship_Fire02"
            FXParticleSystemTemplate="JapanVehicleDamagedSparks"
            FollowBone="true"/>
					<ParticleSysBone
						BoneName="FX_Ship_Fire02"
						FXParticleSystemTemplate="JapanVehicleDamagedSmoke"
						FollowBone="true"/>
					<ParticleSysBone
						BoneName="FX_Ship_Fire02"
						FXParticleSystemTemplate="JapanVehicleDamagedFire"
						FollowBone="true"/>
					<ParticleSysBone
            BoneName="FX_Ship_Fire03"
            FXParticleSystemTemplate="JapanVehicleDamagedSparks"
            FollowBone="true"/>
					<ParticleSysBone
						BoneName="FX_Ship_Fire03"
						FXParticleSystemTemplate="JapanVehicleDamagedSmoke"
						FollowBone="true"/>
					<ParticleSysBone
						BoneName="FX_Ship_Fire03"
						FXParticleSystemTemplate="JapanVehicleDamagedFire"
						FollowBone="true"/>
					<ParticleSysBone
            BoneName="FX_Ship_Fire04"
            FXParticleSystemTemplate="JapanVehicleDamagedSparks"
            FollowBone="true"/>
					<ParticleSysBone
						BoneName="FX_Ship_Fire04"
						FXParticleSystemTemplate="JapanVehicleDamagedSmoke"
						FollowBone="true"/>
					<ParticleSysBone
						BoneName="FX_Ship_Fire04"
						FXParticleSystemTemplate="JapanVehicleDamagedFire"
						FollowBone="true"/>



					<ParticleSysBone
            BoneName="FX_Head_Fire01"
            FXParticleSystemTemplate="JapanVehicleDamagedSparks"
            FollowBone="true"/>
					<ParticleSysBone
						BoneName="FX_Head_Fire01"
						FXParticleSystemTemplate="JapanVehicleDamagedSmoke"
						FollowBone="true"/>
					<ParticleSysBone
						BoneName="FX_Head_Fire01"
						FXParticleSystemTemplate="JapanVehicleDamagedFire"
						FollowBone="true"/>
					<ParticleSysBone
            BoneName="FX_Head_Fire02"
            FXParticleSystemTemplate="JapanVehicleDamagedSparks"
            FollowBone="true"/>
					<ParticleSysBone
						BoneName="FX_Head_Fire02"
						FXParticleSystemTemplate="JapanVehicleDamagedSmoke"
						FollowBone="true"/>
					<ParticleSysBone
						BoneName="FX_Head_Fire02"
						FXParticleSystemTemplate="JapanVehicleDamagedFire"
						FollowBone="true"/>
					<ParticleSysBone
            BoneName="FX_Head_Fire03"
            FXParticleSystemTemplate="JapanVehicleDamagedSparks"
            FollowBone="true"/>
					<ParticleSysBone
						BoneName="FX_Head_Fire03"
						FXParticleSystemTemplate="JapanVehicleDamagedSmoke"
						FollowBone="true"/>
					<ParticleSysBone
						BoneName="FX_Head_Fire03"
						FXParticleSystemTemplate="JapanVehicleDamagedFire"
						FollowBone="true"/>
					<ParticleSysBone
            BoneName="FX_Head_Fire04"
            FXParticleSystemTemplate="JapanVehicleDamagedSparks"
            FollowBone="true"/>
					<ParticleSysBone
						BoneName="FX_Head_Fire04"
						FXParticleSystemTemplate="JapanVehicleDamagedSmoke"
						FollowBone="true"/>
					<ParticleSysBone
						BoneName="FX_Head_Fire04"
						FXParticleSystemTemplate="JapanVehicleDamagedFire"
						FollowBone="true"/>
          <Texture
						Original="JUFortressShip"
						New="JUFortressShip_D" />
        </ModelConditionState>
        <ModelConditionState
					ParseCondStateType="PARSE_NORMAL"
					ConditionsYes="USER_3 REALLYDAMAGED">
          <Model
						Name="JUFortressShip_TRANS" />
					<ParticleSysBone
            BoneName="FX_Ship_Fire01"
            FXParticleSystemTemplate="JapanVehicleDamagedSparks"
            FollowBone="true"/>
					<ParticleSysBone
						BoneName="FX_Ship_Fire01"
						FXParticleSystemTemplate="JapanVehicleDamagedSmoke"
						FollowBone="true"/>
					<ParticleSysBone
						BoneName="FX_Ship_Fire01"
						FXParticleSystemTemplate="JapanVehicleDamagedFire"
						FollowBone="true"/>
					<ParticleSysBone
            BoneName="FX_Ship_Fire02"
            FXParticleSystemTemplate="JapanVehicleDamagedSparks"
            FollowBone="true"/>
					<ParticleSysBone
						BoneName="FX_Ship_Fire02"
						FXParticleSystemTemplate="JapanVehicleDamagedSmoke"
						FollowBone="true"/>
					<ParticleSysBone
						BoneName="FX_Ship_Fire02"
						FXParticleSystemTemplate="JapanVehicleDamagedFire"
						FollowBone="true"/>
					<ParticleSysBone
            BoneName="FX_Ship_Fire03"
            FXParticleSystemTemplate="JapanVehicleDamagedSparks"
            FollowBone="true"/>
					<ParticleSysBone
						BoneName="FX_Ship_Fire03"
						FXParticleSystemTemplate="JapanVehicleDamagedSmoke"
						FollowBone="true"/>
					<ParticleSysBone
						BoneName="FX_Ship_Fire03"
						FXParticleSystemTemplate="JapanVehicleDamagedFire"
						FollowBone="true"/>
					<ParticleSysBone
            BoneName="FX_Ship_Fire04"
            FXParticleSystemTemplate="JapanVehicleDamagedSparks"
            FollowBone="true"/>
					<ParticleSysBone
						BoneName="FX_Ship_Fire04"
						FXParticleSystemTemplate="JapanVehicleDamagedSmoke"
						FollowBone="true"/>
					<ParticleSysBone
						BoneName="FX_Ship_Fire04"
						FXParticleSystemTemplate="JapanVehicleDamagedFire"
						FollowBone="true"/>


					<ParticleSysBone
            BoneName="FX_Head_Fire01"
            FXParticleSystemTemplate="JapanVehicleDamagedSparks"
            FollowBone="true"/>
					<ParticleSysBone
						BoneName="FX_Head_Fire01"
						FXParticleSystemTemplate="JapanVehicleDamagedSmoke"
						FollowBone="true"/>
					<ParticleSysBone
						BoneName="FX_Head_Fire01"
						FXParticleSystemTemplate="JapanVehicleDamagedFire"
						FollowBone="true"/>
					<ParticleSysBone
            BoneName="FX_Head_Fire02"
            FXParticleSystemTemplate="JapanVehicleDamagedSparks"
            FollowBone="true"/>
					<ParticleSysBone
						BoneName="FX_Head_Fire02"
						FXParticleSystemTemplate="JapanVehicleDamagedSmoke"
						FollowBone="true"/>
					<ParticleSysBone
						BoneName="FX_Head_Fire02"
						FXParticleSystemTemplate="JapanVehicleDamagedFire"
						FollowBone="true"/>
					<ParticleSysBone
            BoneName="FX_Head_Fire03"
            FXParticleSystemTemplate="JapanVehicleDamagedSparks"
            FollowBone="true"/>
					<ParticleSysBone
						BoneName="FX_Head_Fire03"
						FXParticleSystemTemplate="JapanVehicleDamagedSmoke"
						FollowBone="true"/>
					<ParticleSysBone
						BoneName="FX_Head_Fire03"
						FXParticleSystemTemplate="JapanVehicleDamagedFire"
						FollowBone="true"/>
					<ParticleSysBone
            BoneName="FX_Head_Fire04"
            FXParticleSystemTemplate="JapanVehicleDamagedSparks"
            FollowBone="true"/>
					<ParticleSysBone
						BoneName="FX_Head_Fire04"
						FXParticleSystemTemplate="JapanVehicleDamagedSmoke"
						FollowBone="true"/>
					<ParticleSysBone
						BoneName="FX_Head_Fire04"
						FXParticleSystemTemplate="JapanVehicleDamagedFire"
						FollowBone="true"/>
          <Texture
						Original="JUFortressShip"
						New="JUFortressShip_D" />
        </ModelConditionState>
        <ModelConditionState
					ParseCondStateType="PARSE_NORMAL"
					ConditionsYes="USER_1 REALLYDAMAGED">
          <Model
						Name="JUFortressShipHead_SKN" />
					<ParticleSysBone
            BoneName="FX_Head_Fire01"
            FXParticleSystemTemplate="JapanVehicleDamagedSparks"
            FollowBone="true"/>
					<ParticleSysBone
						BoneName="FX_Head_Fire01"
						FXParticleSystemTemplate="JapanVehicleDamagedSmoke"
						FollowBone="true"/>
					<ParticleSysBone
						BoneName="FX_Head_Fire01"
						FXParticleSystemTemplate="JapanVehicleDamagedFire"
						FollowBone="true"/>
					<ParticleSysBone
            BoneName="FX_Head_Fire02"
            FXParticleSystemTemplate="JapanVehicleDamagedSparks"
            FollowBone="true"/>
					<ParticleSysBone
						BoneName="FX_Head_Fire02"
						FXParticleSystemTemplate="JapanVehicleDamagedSmoke"
						FollowBone="true"/>
					<ParticleSysBone
						BoneName="FX_Head_Fire02"
						FXParticleSystemTemplate="JapanVehicleDamagedFire"
						FollowBone="true"/>
					<ParticleSysBone
            BoneName="FX_Head_Fire03"
            FXParticleSystemTemplate="JapanVehicleDamagedSparks"
            FollowBone="true"/>
					<ParticleSysBone
						BoneName="FX_Head_Fire03"
						FXParticleSystemTemplate="JapanVehicleDamagedSmoke"
						FollowBone="true"/>
					<ParticleSysBone
						BoneName="FX_Head_Fire03"
						FXParticleSystemTemplate="JapanVehicleDamagedFire"
						FollowBone="true"/>
					<ParticleSysBone
            BoneName="FX_Head_Fire04"
            FXParticleSystemTemplate="JapanVehicleDamagedSparks"
            FollowBone="true"/>
					<ParticleSysBone
						BoneName="FX_Head_Fire04"
						FXParticleSystemTemplate="JapanVehicleDamagedSmoke"
						FollowBone="true"/>
					<ParticleSysBone
						BoneName="FX_Head_Fire04"
						FXParticleSystemTemplate="JapanVehicleDamagedFire"
						FollowBone="true"/>
          <Texture
						Original="JUFortressShip"
						New="JUFortressShip_D" />          
        </ModelConditionState>

        <ModelConditionState
					ParseCondStateType="PARSE_NORMAL"
					ConditionsYes="REALLYDAMAGED">
          <Model
						Name="JUFortressShip_SKN" />
					<ParticleSysBone
            BoneName="FX_Ship_Fire01"
            FXParticleSystemTemplate="JapanVehicleDamagedSparks"
            FollowBone="true"/>
					<ParticleSysBone
						BoneName="FX_Ship_Fire01"
						FXParticleSystemTemplate="JapanVehicleDamagedSmoke"
						FollowBone="true"/>
					<ParticleSysBone
						BoneName="FX_Ship_Fire01"
						FXParticleSystemTemplate="JapanVehicleDamagedFire"
						FollowBone="true"/>
					<ParticleSysBone
            BoneName="FX_Ship_Fire02"
            FXParticleSystemTemplate="JapanVehicleDamagedSparks"
            FollowBone="true"/>
					<ParticleSysBone
						BoneName="FX_Ship_Fire02"
						FXParticleSystemTemplate="JapanVehicleDamagedSmoke"
						FollowBone="true"/>
					<ParticleSysBone
						BoneName="FX_Ship_Fire02"
						FXParticleSystemTemplate="JapanVehicleDamagedFire"
						FollowBone="true"/>
					<ParticleSysBone
            BoneName="FX_Ship_Fire03"
            FXParticleSystemTemplate="JapanVehicleDamagedSparks"
            FollowBone="true"/>
					<ParticleSysBone
						BoneName="FX_Ship_Fire03"
						FXParticleSystemTemplate="JapanVehicleDamagedSmoke"
						FollowBone="true"/>
					<ParticleSysBone
						BoneName="FX_Ship_Fire03"
						FXParticleSystemTemplate="JapanVehicleDamagedFire"
						FollowBone="true"/>
					<ParticleSysBone
            BoneName="FX_Ship_Fire04"
            FXParticleSystemTemplate="JapanVehicleDamagedSparks"
            FollowBone="true"/>
					<ParticleSysBone
						BoneName="FX_Ship_Fire04"
						FXParticleSystemTemplate="JapanVehicleDamagedSmoke"
						FollowBone="true"/>
					<ParticleSysBone
						BoneName="FX_Ship_Fire04"
						FXParticleSystemTemplate="JapanVehicleDamagedFire"
						FollowBone="true"/>
          <Texture
						Original="JUFortressShip"
						New="JUFortressShip_D" />
        </ModelConditionState>

        <ModelConditionState
          ParseCondStateType="PARSE_NORMAL"
          ConditionsYes="USER_1 USER_3 DAMAGED">
					<Model
						Name="JUFortressShip_TRANS" />
					<ParticleSysBone
            BoneName="FX_Ship_Fire01"
            FXParticleSystemTemplate="JapanVehicleDamagedSparks"
            FollowBone="true"/>
					<ParticleSysBone
						BoneName="FX_Ship_Fire01"
						FXParticleSystemTemplate="JapanVehicleDamagedSmoke"
						FollowBone="true"/>
					<ParticleSysBone
						BoneName="FX_Ship_Fire01"
						FXParticleSystemTemplate="JapanVehicleDamagedFire"
						FollowBone="true"/>
					<ParticleSysBone
            BoneName="FX_Ship_Fire02"
            FXParticleSystemTemplate="JapanVehicleDamagedSparks"
            FollowBone="true"/>
					<ParticleSysBone
						BoneName="FX_Ship_Fire02"
						FXParticleSystemTemplate="JapanVehicleDamagedSmoke"
						FollowBone="true"/>
					<ParticleSysBone
						BoneName="FX_Ship_Fire02"
						FXParticleSystemTemplate="JapanVehicleDamagedFire"
						FollowBone="true"/>
					<ParticleSysBone
            BoneName="FX_Ship_Fire03"
            FXParticleSystemTemplate="JapanVehicleDamagedSparks"
            FollowBone="true"/>
					<ParticleSysBone
						BoneName="FX_Ship_Fire03"
						FXParticleSystemTemplate="JapanVehicleDamagedSmoke"
						FollowBone="true"/>
					<ParticleSysBone
						BoneName="FX_Ship_Fire03"
						FXParticleSystemTemplate="JapanVehicleDamagedFire"
						FollowBone="true"/>
					<ParticleSysBone
            BoneName="FX_Ship_Fire04"
            FXParticleSystemTemplate="JapanVehicleDamagedSparks"
            FollowBone="true"/>
					<ParticleSysBone
						BoneName="FX_Ship_Fire04"
						FXParticleSystemTemplate="JapanVehicleDamagedSmoke"
						FollowBone="true"/>
					<ParticleSysBone
						BoneName="FX_Ship_Fire04"
						FXParticleSystemTemplate="JapanVehicleDamagedFire"
						FollowBone="true"/>


					<ParticleSysBone
            BoneName="FX_Head_Fire01"
            FXParticleSystemTemplate="JapanVehicleDamagedSparks"
            FollowBone="true"/>
					<ParticleSysBone
						BoneName="FX_Head_Fire01"
						FXParticleSystemTemplate="JapanVehicleDamagedSmoke"
						FollowBone="true"/>
					<ParticleSysBone
						BoneName="FX_Head_Fire01"
						FXParticleSystemTemplate="JapanVehicleDamagedFire"
						FollowBone="true"/>
					<ParticleSysBone
            BoneName="FX_Head_Fire02"
            FXParticleSystemTemplate="JapanVehicleDamagedSparks"
            FollowBone="true"/>
					<ParticleSysBone
						BoneName="FX_Head_Fire02"
						FXParticleSystemTemplate="JapanVehicleDamagedSmoke"
						FollowBone="true"/>
					<ParticleSysBone
						BoneName="FX_Head_Fire02"
						FXParticleSystemTemplate="JapanVehicleDamagedFire"
						FollowBone="true"/>
					<ParticleSysBone
            BoneName="FX_Head_Fire03"
            FXParticleSystemTemplate="JapanVehicleDamagedSparks"
            FollowBone="true"/>
					<ParticleSysBone
						BoneName="FX_Head_Fire03"
						FXParticleSystemTemplate="JapanVehicleDamagedSmoke"
						FollowBone="true"/>
					<ParticleSysBone
						BoneName="FX_Head_Fire03"
						FXParticleSystemTemplate="JapanVehicleDamagedFire"
						FollowBone="true"/>
					<ParticleSysBone
            BoneName="FX_Head_Fire04"
            FXParticleSystemTemplate="JapanVehicleDamagedSparks"
            FollowBone="true"/>
					<ParticleSysBone
						BoneName="FX_Head_Fire04"
						FXParticleSystemTemplate="JapanVehicleDamagedSmoke"
						FollowBone="true"/>
					<ParticleSysBone
						BoneName="FX_Head_Fire04"
						FXParticleSystemTemplate="JapanVehicleDamagedFire"
						FollowBone="true"/>
				</ModelConditionState>
				<ModelConditionState
					ParseCondStateType="PARSE_NORMAL"
					ConditionsYes="USER_3 DAMAGED">
					<Model
						Name="JUFortressShip_TRANS" />
					<ParticleSysBone
            BoneName="FX_Ship_Fire01"
            FXParticleSystemTemplate="JapanVehicleDamagedSparks"
            FollowBone="true"/>
					<ParticleSysBone
						BoneName="FX_Ship_Fire01"
						FXParticleSystemTemplate="JapanVehicleDamagedSmoke"
						FollowBone="true"/>
					<ParticleSysBone
						BoneName="FX_Ship_Fire01"
						FXParticleSystemTemplate="JapanVehicleDamagedFire"
						FollowBone="true"/>
					<ParticleSysBone
            BoneName="FX_Ship_Fire02"
            FXParticleSystemTemplate="JapanVehicleDamagedSparks"
            FollowBone="true"/>
					<ParticleSysBone
						BoneName="FX_Ship_Fire02"
						FXParticleSystemTemplate="JapanVehicleDamagedSmoke"
						FollowBone="true"/>
					<ParticleSysBone
						BoneName="FX_Ship_Fire02"
						FXParticleSystemTemplate="JapanVehicleDamagedFire"
						FollowBone="true"/>
					<ParticleSysBone
            BoneName="FX_Ship_Fire03"
            FXParticleSystemTemplate="JapanVehicleDamagedSparks"
            FollowBone="true"/>
					<ParticleSysBone
						BoneName="FX_Ship_Fire03"
						FXParticleSystemTemplate="JapanVehicleDamagedSmoke"
						FollowBone="true"/>
					<ParticleSysBone
						BoneName="FX_Ship_Fire03"
						FXParticleSystemTemplate="JapanVehicleDamagedFire"
						FollowBone="true"/>
					<ParticleSysBone
            BoneName="FX_Ship_Fire04"
            FXParticleSystemTemplate="JapanVehicleDamagedSparks"
            FollowBone="true"/>
					<ParticleSysBone
						BoneName="FX_Ship_Fire04"
						FXParticleSystemTemplate="JapanVehicleDamagedSmoke"
						FollowBone="true"/>
					<ParticleSysBone
						BoneName="FX_Ship_Fire04"
						FXParticleSystemTemplate="JapanVehicleDamagedFire"
						FollowBone="true"/>



					<ParticleSysBone
            BoneName="FX_Head_Fire01"
            FXParticleSystemTemplate="JapanVehicleDamagedSparks"
            FollowBone="true"/>
					<ParticleSysBone
						BoneName="FX_Head_Fire01"
						FXParticleSystemTemplate="JapanVehicleDamagedSmoke"
						FollowBone="true"/>
					<ParticleSysBone
						BoneName="FX_Head_Fire01"
						FXParticleSystemTemplate="JapanVehicleDamagedFire"
						FollowBone="true"/>
					<ParticleSysBone
            BoneName="FX_Head_Fire02"
            FXParticleSystemTemplate="JapanVehicleDamagedSparks"
            FollowBone="true"/>
					<ParticleSysBone
						BoneName="FX_Head_Fire02"
						FXParticleSystemTemplate="JapanVehicleDamagedSmoke"
						FollowBone="true"/>
					<ParticleSysBone
						BoneName="FX_Head_Fire02"
						FXParticleSystemTemplate="JapanVehicleDamagedFire"
						FollowBone="true"/>
					<ParticleSysBone
            BoneName="FX_Head_Fire03"
            FXParticleSystemTemplate="JapanVehicleDamagedSparks"
            FollowBone="true"/>
					<ParticleSysBone
						BoneName="FX_Head_Fire03"
						FXParticleSystemTemplate="JapanVehicleDamagedSmoke"
						FollowBone="true"/>
					<ParticleSysBone
						BoneName="FX_Head_Fire03"
						FXParticleSystemTemplate="JapanVehicleDamagedFire"
						FollowBone="true"/>
					<ParticleSysBone
            BoneName="FX_Head_Fire04"
            FXParticleSystemTemplate="JapanVehicleDamagedSparks"
            FollowBone="true"/>
					<ParticleSysBone
						BoneName="FX_Head_Fire04"
						FXParticleSystemTemplate="JapanVehicleDamagedSmoke"
						FollowBone="true"/>
					<ParticleSysBone
						BoneName="FX_Head_Fire04"
						FXParticleSystemTemplate="JapanVehicleDamagedFire"
						FollowBone="true"/>
				</ModelConditionState>
				<ModelConditionState
					ParseCondStateType="PARSE_NORMAL"
					ConditionsYes="USER_1 DAMAGED">
					<Model
						Name="JUFortressShipHead_SKN" />
					<ParticleSysBone
            BoneName="FX_Head_Fire01"
            FXParticleSystemTemplate="JapanVehicleDamagedSparks"
            FollowBone="true"/>
					<ParticleSysBone
						BoneName="FX_Head_Fire01"
						FXParticleSystemTemplate="JapanVehicleDamagedSmoke"
						FollowBone="true"/>
					<ParticleSysBone
						BoneName="FX_Head_Fire01"
						FXParticleSystemTemplate="JapanVehicleDamagedFire"
						FollowBone="true"/>
					<ParticleSysBone
            BoneName="FX_Head_Fire02"
            FXParticleSystemTemplate="JapanVehicleDamagedSparks"
            FollowBone="true"/>
					<ParticleSysBone
						BoneName="FX_Head_Fire02"
						FXParticleSystemTemplate="JapanVehicleDamagedSmoke"
						FollowBone="true"/>
					<ParticleSysBone
						BoneName="FX_Head_Fire02"
						FXParticleSystemTemplate="JapanVehicleDamagedFire"
						FollowBone="true"/>
					<ParticleSysBone
            BoneName="FX_Head_Fire03"
            FXParticleSystemTemplate="JapanVehicleDamagedSparks"
            FollowBone="true"/>
					<ParticleSysBone
						BoneName="FX_Head_Fire03"
						FXParticleSystemTemplate="JapanVehicleDamagedSmoke"
						FollowBone="true"/>
					<ParticleSysBone
						BoneName="FX_Head_Fire03"
						FXParticleSystemTemplate="JapanVehicleDamagedFire"
						FollowBone="true"/>
					<ParticleSysBone
            BoneName="FX_Head_Fire04"
            FXParticleSystemTemplate="JapanVehicleDamagedSparks"
            FollowBone="true"/>
					<ParticleSysBone
						BoneName="FX_Head_Fire04"
						FXParticleSystemTemplate="JapanVehicleDamagedSmoke"
						FollowBone="true"/>
					<ParticleSysBone
						BoneName="FX_Head_Fire04"
						FXParticleSystemTemplate="JapanVehicleDamagedFire"
						FollowBone="true"/>
				</ModelConditionState>

				<ModelConditionState
					ParseCondStateType="PARSE_NORMAL"
					ConditionsYes="DAMAGED">
					<Model
						Name="JUFortressShip_SKN" />
					<ParticleSysBone
            BoneName="FX_Ship_Fire01"
            FXParticleSystemTemplate="JapanVehicleDamagedSparks"
            FollowBone="true"/>
					<ParticleSysBone
						BoneName="FX_Ship_Fire01"
						FXParticleSystemTemplate="JapanVehicleDamagedSmoke"
						FollowBone="true"/>
					<ParticleSysBone
						BoneName="FX_Ship_Fire01"
						FXParticleSystemTemplate="JapanVehicleDamagedFire"
						FollowBone="true"/>
					<ParticleSysBone
            BoneName="FX_Ship_Fire02"
            FXParticleSystemTemplate="JapanVehicleDamagedSparks"
            FollowBone="true"/>
					<ParticleSysBone
						BoneName="FX_Ship_Fire02"
						FXParticleSystemTemplate="JapanVehicleDamagedSmoke"
						FollowBone="true"/>
					<ParticleSysBone
						BoneName="FX_Ship_Fire02"
						FXParticleSystemTemplate="JapanVehicleDamagedFire"
						FollowBone="true"/>
					<ParticleSysBone
            BoneName="FX_Ship_Fire03"
            FXParticleSystemTemplate="JapanVehicleDamagedSparks"
            FollowBone="true"/>
					<ParticleSysBone
						BoneName="FX_Ship_Fire03"
						FXParticleSystemTemplate="JapanVehicleDamagedSmoke"
						FollowBone="true"/>
					<ParticleSysBone
						BoneName="FX_Ship_Fire03"
						FXParticleSystemTemplate="JapanVehicleDamagedFire"
						FollowBone="true"/>
					<ParticleSysBone
            BoneName="FX_Ship_Fire04"
            FXParticleSystemTemplate="JapanVehicleDamagedSparks"
            FollowBone="true"/>
					<ParticleSysBone
						BoneName="FX_Ship_Fire04"
						FXParticleSystemTemplate="JapanVehicleDamagedSmoke"
						FollowBone="true"/>
					<ParticleSysBone
						BoneName="FX_Ship_Fire04"
						FXParticleSystemTemplate="JapanVehicleDamagedFire"
						FollowBone="true"/>
				</ModelConditionState>
        
				<ModelConditionState
					ParseCondStateType="PARSE_NORMAL"
					ConditionsYes="USER_1 USER_3">
					<Model
						Name="JUFortressShip_TRANS" />
				</ModelConditionState>				
				<ModelConditionState
					ParseCondStateType="PARSE_NORMAL"
					ConditionsYes="USER_3">
					<Model
						Name="JUFortressShip_TRANS" />
				</ModelConditionState>				
				<ModelConditionState
					ParseCondStateType="PARSE_NORMAL"
					ConditionsYes="USER_1">
					<Model
						Name="JUFortressShipHead_SKN" />
				</ModelConditionState>
				
				<AnimationState
					ParseCondStateType="PARSE_DEFAULT"
					StateName="STATE_onWater">
					<Animation
						AnimationName="JUFortressShip_IDLA"
						AnimationMode="LOOP"/>
			        <Script>
			            CurDrawableHideSubObjectPermanently("FX_JetGlow01")
			            CurDrawableHideSubObjectPermanently("FX_JetGlow02")
			            CurDrawableHideSubObjectPermanently("FX_JetGlow03")
			        </Script>
					<ParticleSysBone
						BoneName="None"
						FXParticleSystemTemplate="JapanFortressWake"/>													
				</AnimationState>
        <AnimationState
					ParseCondStateType="PARSE_NORMAL"
					ConditionsYes="STRUCTURE_UNPACKING">
          <Animation
						AnimationName="JUFortressShip_BLD2"
						AnimationMode="MATCH_UNPACKING"
						AnimationBlendTime="0" />
          <Script>
            CurDrawableHideSubObjectPermanently("FX_JetGlow01")
            CurDrawableHideSubObjectPermanently("FX_JetGlow02")
            CurDrawableHideSubObjectPermanently("FX_JetGlow03")
          </Script>
        </AnimationState>
      
<!-- changing from ground to air -->
				<AnimationState
					ParseCondStateType="PARSE_NORMAL"
					ConditionsYes="USER_1 USER_3">
					<Animation
						AnimationName="JUFortressShip_TRANS"
						AnimationMode="ONCE"
						AnimationAbsoluteTime="=$JAPAN_FORTRESS_UNPACK_TIME"/>
          <Script>
            CurDrawableShowSubObjectPermanently("FX_JetGlow01")
            CurDrawableShowSubObjectPermanently("FX_JetGlow02")
            CurDrawableHideSubObjectPermanently("FX_JetGlow03")
          </Script>
          <ParticleSysBone
						BoneName="Bone_JFS_Pod1"
						FXParticleSystemTemplate="JapanFortressTrans_Water"
						FollowBone="true" />
          <ParticleSysBone
						BoneName="Bone_JFS_Pod2"
						FXParticleSystemTemplate="JapanFortressTrans_Water"
						FollowBone="true" />
          <ParticleSysBone
						BoneName="Bone_JFS_Pod3"
						FXParticleSystemTemplate="JapanFortressTrans_Water"
						FollowBone="true" />
          <ParticleSysBone
						BoneName="Bone_JFS_Pod4"
						FXParticleSystemTemplate="JapanFortressTrans_Water"
						FollowBone="true" />
          <ParticleSysBone
						BoneName="Bone_JFS_Pod5"
						FXParticleSystemTemplate="JapanFortressTrans_Water"
						FollowBone="true" />

          <ParticleSysBone
						BoneName="FX_JetGlow01"
						FXParticleSystemTemplate="JapanFortressTrans_Water04"
						FollowBone="false" />
          <ParticleSysBone
						BoneName="FX_JetGlow02"
						FXParticleSystemTemplate="JapanFortressTrans_Water04"
						FollowBone="false" />
          
				</AnimationState>
<!-- changing from air to ground -->
				<AnimationState
					ParseCondStateType="PARSE_NORMAL"
					ConditionsYes="USER_3"
					Flags="START_FRAME_LAST"
   				StateName="STATE_AirToGround">
          <Animation
						AnimationName="JUFortressShip_TRANS"
						AnimationMode="ONCE_BACKWARDS"
						AnimationAbsoluteTime="=$JAPAN_FORTRESS_UNPACK_TIME"/>
          <ParticleSysBone
						BoneName="Bone_JFS_Pod1"
						FXParticleSystemTemplate="JapanFortressTrans_Water03"
						FollowBone="true" />
          <ParticleSysBone
						BoneName="Bone_JFS_Pod2"
						FXParticleSystemTemplate="JapanFortressTrans_Water03"
						FollowBone="true" />
          <ParticleSysBone
						BoneName="Bone_JFS_Pod3"
						FXParticleSystemTemplate="JapanFortressTrans_Water03"
						FollowBone="true" />
          <ParticleSysBone
						BoneName="Bone_JFS_Pod4"
						FXParticleSystemTemplate="JapanFortressTrans_Water03"
						FollowBone="true" />
          <ParticleSysBone
						BoneName="Bone_JFS_Pod5"
						FXParticleSystemTemplate="JapanFortressTrans_Water03"
						FollowBone="true" />

          <ParticleSysBone
						BoneName="Bone_JFS_Pod1"
						FXParticleSystemTemplate="JapanFortressTrans_Water02"
						FollowBone="true" />
          <ParticleSysBone
						BoneName="Bone_JFS_Pod2"
						FXParticleSystemTemplate="JapanFortressTrans_Water02"
						FollowBone="true" />
          <ParticleSysBone
						BoneName="Bone_JFS_Pod3"
						FXParticleSystemTemplate="JapanFortressTrans_Water02"
						FollowBone="true" />
          <ParticleSysBone
						BoneName="Bone_JFS_Pod4"
						FXParticleSystemTemplate="JapanFortressTrans_Water02"
						FollowBone="true" />
          <ParticleSysBone
						BoneName="Bone_JFS_Pod5"
						FXParticleSystemTemplate="JapanFortressTrans_Water02"
						FollowBone="true" />

          <ParticleSysBone
						BoneName="Bone_JFS_Pod1"
						FXParticleSystemTemplate="JapanFortressTrans_Wake"
						FollowBone="true" />
          <ParticleSysBone
						BoneName="Bone_JFS_Pod2"
						FXParticleSystemTemplate="JapanFortressTrans_Wake"
						FollowBone="true" />
          <ParticleSysBone
						BoneName="Bone_JFS_Pod3"
						FXParticleSystemTemplate="JapanFortressTrans_Wake"
						FollowBone="true" />
          <ParticleSysBone
						BoneName="Bone_JFS_Pod4"
						FXParticleSystemTemplate="JapanFortressTrans_Wake"
						FollowBone="true" />
          <ParticleSysBone
						BoneName="Bone_JFS_Pod5"
						FXParticleSystemTemplate="JapanFortressTrans_Wake"
						FollowBone="true" />
          <Script>
            CurDrawableShowSubObjectPermanently("FX_JetGlow01")
            CurDrawableShowSubObjectPermanently("FX_JetGlow02")
            CurDrawableHideSubObjectPermanently("FX_JetGlow03")
          </Script>
				</AnimationState>
        <AnimationState
					ParseCondStateType="PARSE_NORMAL"
					ConditionsYes="USER_1 MOVING"
					StateName="STATE_inAir">
          <Animation
           AnimationName="JUFortressShipHead_IDLA"
           AnimationMode="LOOP"/>
          <Script>
            CurDrawableShowSubObjectPermanently("FX_JetGlow01")
            CurDrawableShowSubObjectPermanently("FX_JetGlow02")
            CurDrawableShowSubObjectPermanently("FX_JetGlow03")
          </Script>
        </AnimationState>
        
        <AnimationState
					ParseCondStateType="PARSE_NORMAL"
					ConditionsYes="USER_1"
					StateName="STATE_inAir">
          <Animation
           AnimationName="JUFortressShipHead_IDLA"
           AnimationMode="LOOP"/>          
          <Script>
            CurDrawableShowSubObjectPermanently("FX_JetGlow01")
            CurDrawableShowSubObjectPermanently("FX_JetGlow02")
            CurDrawableHideSubObjectPermanently("FX_JetGlow03")
          </Script>
				</AnimationState>
        
        <AnimationState
					ParseCondStateType="PARSE_NORMAL"
          ConditionsYes="MOVING"
					StateName="STATE_onWater">
          <Animation
						AnimationName="JUFortressShip_IDLA"
            AnimationMode="LOOP"/>
          <Script>
            CurDrawableHideSubObjectPermanently("FX_JetGlow01")
            CurDrawableHideSubObjectPermanently("FX_JetGlow02")
            CurDrawableHideSubObjectPermanently("FX_JetGlow03")
          </Script>
          <ParticleSysBone
						BoneName="None"
						FXParticleSystemTemplate="JapanFortressWake"/>
          <ParticleSysBone
						BoneName="None"
						FXParticleSystemTemplate="JapanFortressWaterMist"/>
        </AnimationState>
      </ScriptedModelDraw>

<!-- DRAW BUILD UP -->

      <ScriptedModelDraw
				id="ModuleTag_Draw_Buildup"
				OkToChangeModelColor="true">
        <ModelConditionState
					ParseCondStateType="PARSE_DEFAULT">
          <Model
						Name="" />
        </ModelConditionState>
        <ModelConditionState
					ParseCondStateType="PARSE_NORMAL"
					ConditionsYes="STRUCTURE_UNPACKING">
          <Model
						Name="JUFortressShip_SKN" />
          <Material ShaderName="BuildingsJapanBuildup.fx" TechniqueName="Default">
            <Constants>
              <Texture Name="DiffuseTexture">
                <Value>JUFortressShip</Value>
              </Texture>
              <Texture Name="NormalMap">
                <Value>JUFortressShip_NRM</Value>
              </Texture>
              <Texture Name="SpecMap">
                <Value>JUFortressShip_SPM</Value>
              </Texture>
              <Float Name="EnvMult">
                <Value>1.000000</Value>
              </Float>
              <Bool Name="AlphaTestEnable">
                <Value>true</Value>
              </Bool>
            </Constants>
          </Material>
        </ModelConditionState>
        <AnimationState
					ParseCondStateType="PARSE_DEFAULT">
        </AnimationState>
        <AnimationState
					ParseCondStateType="PARSE_NORMAL"
					ConditionsYes="STRUCTURE_UNPACKING">
          <Animation
						AnimationName="JUFortressShip_BLD"
						AnimationMode="MATCH_UNPACKING"
						AnimationBlendTime="0" />
          <Script>
            CurDrawableHideSubObjectPermanently("FX_JetGlow01")
            CurDrawableHideSubObjectPermanently("FX_JetGlow02")
            CurDrawableHideSubObjectPermanently("FX_JetGlow03")
          </Script>
        </AnimationState>
      </ScriptedModelDraw>

<!-- draw for Egg unpacking -->
      <ScriptedModelDraw
      id="ModuleTag_Draw_Egg"
      OkToChangeModelColor="true"
      StaticModelLODMode="true">
        <ModelConditionState
					ParseCondStateType="PARSE_DEFAULT">
          <Model
						Name="" />
        </ModelConditionState>
        <ModelConditionState
					ParseCondStateType="PARSE_NORMAL"
					ConditionsYes="STRUCTURE_UNPACKING">
          <Model
						Name="JUEgg_Unpack" />
        </ModelConditionState>
        <AnimationState
					ParseCondStateType="PARSE_DEFAULT">
        </AnimationState>
        <AnimationState
					ParseCondStateType="PARSE_NORMAL"
					ConditionsYes="STRUCTURE_UNPACKING">
          <Animation
						AnimationName="JUEgg_Unpack"
						AnimationMode="MATCH_UNPACKING" />
        </AnimationState>
      </ScriptedModelDraw>
      
			<!-- The Flying Laser Weapon -->
			<LaserDraw
				id="ModuleTag_LaserDraw"
				Texture1_UTile="1"
				Texture1_VTile="1"
				Texture1_UScrollRate="0"
				Texture1_VScrollRate="1"
				Texture1_NumFrames="1"
				Texture1_FrameRate="30"
				Texture2_UTile="0.01"
				Texture2_VTile="1"
				Texture2_UScrollRate="0.8"
				Texture2_VScrollRate="0"
				Texture2_NumFrames="1"
				Texture2_FrameRate="30"
        FadeInTime="0.0s"
				FadeOutTime="0.0s"
				LaserWidth="30"
				LaserStateID="101">
				<FXShader
					ShaderName="Laser.fx"
					TechniqueIndex="0">
					<Constants>
						<Texture
							Name="Texture1">
							<Value>FXLaserStandard</Value>
						</Texture>
						<Texture
							Name="Texture2">
							<Value>FXJapanPearlLaser02</Value>
						</Texture>
						<Float Name="ColorEmissive">
							<Value>2.500000</Value>
							<Value>2.500000</Value>
							<Value>4.000000</Value>
						</Float>
					</Constants>
				</FXShader>
				<ObjectStatusValidation
					RequiredStatus="TRANSFORMATION_TOGGLE_STATE"
					ForbiddenStatus="WEAPON_UPGRADED_01"/>
			</LaserDraw>
			
			<LaserDraw
			id="ModuleTag_LaserDrawVeteran"
			Texture1_UTile="1"
			Texture1_VTile="1"
			Texture1_UScrollRate="0"
			Texture1_VScrollRate="1"
			Texture1_NumFrames="1"
			Texture1_FrameRate="30"
			Texture2_UTile="0.01"
			Texture2_VTile="1"
			Texture2_UScrollRate="0.8"
			Texture2_VScrollRate="0"
			Texture2_NumFrames="1"
			Texture2_FrameRate="30"
			FadeInTime="0.0s"
			FadeOutTime="0.0s"
			LaserWidth="30"
			LaserStateID="102">
				<FXShader
					ShaderName="Laser.fx"
					TechniqueIndex="0">
					<Constants>
						<Texture
							Name="Texture1">
							<Value>FXLaserStandard</Value>
						</Texture>
						<Texture
							Name="Texture2">
							<Value>FXJapanPearlLaser02</Value>
						</Texture>
						<Float Name="ColorEmissive">
							<Value>7.500000</Value>
							<Value>1.500000</Value>
							<Value>4.000000</Value>
						</Float>
					</Constants>
				</FXShader>
				<ObjectStatusValidation
					RequiredStatus="TRANSFORMATION_TOGGLE_STATE WEAPON_UPGRADED_01" />
			</LaserDraw>
			
		</Draws>
		<Behaviors>
			<WeaponSetUpdate
				id="ModuleTag_WeaponSetUpdate">
				<WeaponSlotTurret
					ID="1"
					ForceRotateObjectToMaintainFiringArc="false">
					<Weapon
						Ordering="PRIMARY_WEAPON"
						Template="JapanFortressShipCannonWeapon"
						ForbiddenObjectStatus="TRANSFORMATION_TOGGLE_STATE"/>
					<TurretSettings
						MaxDeflectionClockwise="90d"
						MaxDeflectionAntiClockwise="90d"
						TurretTurnRate="360"
						MinIdleScanTime="1.0s"
						MaxIdleScanTime="5.0s"
						MinIdleScanAngle="0.0"
						MaxIdleScanAngle="90.0"
						AllowsPitch="true"
						MinimumPitch="0d"
						PitchHeight="90%"
						TurretPitchRate="20"
						NaturalTurretAngle="45d"
						RecenterWhenOutOfTurnRange="false">
						<TurretAITargetChooserData
							CanPickDynamicTargets="true"
							CanAcquireDynamicIfAssignedOutOfRange="true"
							IdleScanDelay="=$MEDIUM_IDLE_SCAN_DELAY"/>
					</TurretSettings>
				</WeaponSlotTurret>
				<WeaponSlotTurret
					ID="2"
					ForceRotateObjectToMaintainFiringArc="false">
					<Weapon
						Ordering="PRIMARY_WEAPON"
						Template="JapanFortressShipCannonWeapon"
						ForbiddenObjectStatus="TRANSFORMATION_TOGGLE_STATE"/>
					<TurretSettings
						MaxDeflectionClockwise="90d"
						MaxDeflectionAntiClockwise="90d"
						TurretTurnRate="360"
						MinIdleScanTime="1.0s"
						MaxIdleScanTime="5.0s"
						MinIdleScanAngle="0.0"
						MaxIdleScanAngle="90.0"
						AllowsPitch="true"
						MinimumPitch="0d"
						PitchHeight="90%"
						TurretPitchRate="20"
						NaturalTurretAngle="135d"
						RecenterWhenOutOfTurnRange="false">						
						<TurretAITargetChooserData
							CanPickDynamicTargets="true"
							CanAcquireDynamicIfAssignedOutOfRange="true"
							IdleScanDelay="=$MEDIUM_IDLE_SCAN_DELAY"/>
					</TurretSettings>
				</WeaponSlotTurret>
				<WeaponSlotTurret
					ID="3"
					ForceRotateObjectToMaintainFiringArc="false">
					<Weapon
						Ordering="PRIMARY_WEAPON"
						Template="JapanFortressShipCannonWeapon"
						ForbiddenObjectStatus="TRANSFORMATION_TOGGLE_STATE"/>
					<TurretSettings
						MaxDeflectionClockwise="90d"
						MaxDeflectionAntiClockwise="90d"
						TurretTurnRate="360"
						MinIdleScanTime="1.0s"
						MaxIdleScanTime="5.0s"
						MinIdleScanAngle="0.0"
						MaxIdleScanAngle="90.0"
						AllowsPitch="true"
						MinimumPitch="0d"
						PitchHeight="90%"
						TurretPitchRate="20"
						NaturalTurretAngle="225d"
						RecenterWhenOutOfTurnRange="false">
						<TurretAITargetChooserData
							CanPickDynamicTargets="true"
							CanAcquireDynamicIfAssignedOutOfRange="true"
							IdleScanDelay="=$MEDIUM_IDLE_SCAN_DELAY"/>
					</TurretSettings>
				</WeaponSlotTurret>
				<WeaponSlotTurret
					ID="4"
					ForceRotateObjectToMaintainFiringArc="false">
					<Weapon
						Ordering="PRIMARY_WEAPON"
						Template="JapanFortressShipCannonWeapon"
						ForbiddenObjectStatus="TRANSFORMATION_TOGGLE_STATE"/>
					<TurretSettings
						MaxDeflectionClockwise="90d"
						MaxDeflectionAntiClockwise="90d"
						TurretTurnRate="360"
						MinIdleScanTime="1.0s"
						MaxIdleScanTime="5.0s"
						MinIdleScanAngle="0.0"
						MaxIdleScanAngle="90.0"
						AllowsPitch="true"
						MinimumPitch="0d"
						PitchHeight="90%"
						TurretPitchRate="20"
						NaturalTurretAngle="315d"
						RecenterWhenOutOfTurnRange="false">
						<TurretAITargetChooserData
							CanPickDynamicTargets="true"
							CanAcquireDynamicIfAssignedOutOfRange="true"
							IdleScanDelay="=$MEDIUM_IDLE_SCAN_DELAY"/>
					</TurretSettings>
				</WeaponSlotTurret>
				<WeaponSlotTurret
					ID="5"
					AllowInterleavedFiring="false"
					InterleavedStyle="INTERLEAVE_FIRST_AVAILABLE"
					WeaponChoiceCriteria="PREFER_MOST_DAMAGE"
					ForceRotateObjectToMaintainFiringArc="false">
					<Weapon
						Ordering="PRIMARY_WEAPON"
						Template="JapanFortressShipMissilePods"
						ForbiddenObjectStatus="TRANSFORMATION_TOGGLE_STATE ADVANCED_MISSILE_PACKS"/>
					<Weapon
						Ordering="SECONDARY_WEAPON"
						Template="JapanFortressShipMissilePods_Aircraft"
						ForbiddenObjectStatus="TRANSFORMATION_TOGGLE_STATE ADVANCED_MISSILE_PACKS"/>
					<Weapon
						Ordering="PRIMARY_WEAPON"
						Template="JapanFortressShipMissilePods_JapanAdvancedMissilePack"
						ObjectStatus="ADVANCED_MISSILE_PACKS"
						ForbiddenObjectStatus="TRANSFORMATION_TOGGLE_STATE"/>
					<Weapon
						Ordering="SECONDARY_WEAPON"
						Template="JapanFortressShipMissilePods_Aircraft_JapanAdvancedMissilePack"
						ObjectStatus="ADVANCED_MISSILE_PACKS"
						ForbiddenObjectStatus="TRANSFORMATION_TOGGLE_STATE"/>
					<TurretSettings
						MaxDeflectionClockwise="90d"
						MaxDeflectionAntiClockwise="90d"
						TurretTurnRate="360"
						MinIdleScanTime="1.0s"
						MaxIdleScanTime="5.0s"
						MinIdleScanAngle="0.0"
						MaxIdleScanAngle="90.0"
						AllowsPitch="true"
						MinimumPitch="0d"
						PitchHeight="50%"
						TurretPitchRate="360"
						NaturalTurretAngle="45d"
						RecenterWhenOutOfTurnRange="false">
						<TurretAITargetChooserData
							CanPickDynamicTargets="true"
							CanAcquireDynamicIfAssignedOutOfRange="true"
							IdleScanDelay="=$FAST_IDLE_SCAN_DELAY">
							<ObjectVisionRange
					            id="ObjectVisionRange_Aircraft"
					            Range="100">
                                <Filter
                                    Rule="ANY"
                                    Include="INFANTRY VEHICLE AIRCRAFT"
                                    StatusBitFlags="AIRBORNE_TARGET"/>
                            </ObjectVisionRange>							
						</TurretAITargetChooserData>
					</TurretSettings>
				</WeaponSlotTurret>	
				<WeaponSlotTurret
					ID="6"
					AllowInterleavedFiring="false"
					InterleavedStyle="INTERLEAVE_FIRST_AVAILABLE"
					WeaponChoiceCriteria="PREFER_MOST_DAMAGE"
					ForceRotateObjectToMaintainFiringArc="false">
					<Weapon
						Ordering="PRIMARY_WEAPON"
						Template="JapanFortressShipMissilePods"
						ForbiddenObjectStatus="TRANSFORMATION_TOGGLE_STATE ADVANCED_MISSILE_PACKS"/>
					<Weapon
						Ordering="SECONDARY_WEAPON"
						Template="JapanFortressShipMissilePods_Aircraft"
						ForbiddenObjectStatus="TRANSFORMATION_TOGGLE_STATE ADVANCED_MISSILE_PACKS"/>
					<Weapon
						Ordering="PRIMARY_WEAPON"
						Template="JapanFortressShipMissilePods_JapanAdvancedMissilePack"
						ObjectStatus="ADVANCED_MISSILE_PACKS"
						ForbiddenObjectStatus="TRANSFORMATION_TOGGLE_STATE"/>
					<Weapon
						Ordering="SECONDARY_WEAPON"
						Template="JapanFortressShipMissilePods_Aircraft_JapanAdvancedMissilePack"
						ObjectStatus="ADVANCED_MISSILE_PACKS"
						ForbiddenObjectStatus="TRANSFORMATION_TOGGLE_STATE"/>
					<TurretSettings
						MaxDeflectionClockwise="90d"
						MaxDeflectionAntiClockwise="90d"
						TurretTurnRate="360"
						MinIdleScanTime="1.0s"
						MaxIdleScanTime="5.0s"
						MinIdleScanAngle="0.0"
						MaxIdleScanAngle="90.0"
						AllowsPitch="true"
						MinimumPitch="0d"
						PitchHeight="50%"
						TurretPitchRate="360"
						NaturalTurretAngle="135d"
						RecenterWhenOutOfTurnRange="false">
						<TurretAITargetChooserData
							CanPickDynamicTargets="true"
							CanAcquireDynamicIfAssignedOutOfRange="true"
							IdleScanDelay="=$FAST_IDLE_SCAN_DELAY">
							<ObjectVisionRange
					            id="ObjectVisionRange_Aircraft"
					            Range="100">
                                <Filter
                                    Rule="ANY"
                                    Include="INFANTRY VEHICLE AIRCRAFT"
                                    StatusBitFlags="AIRBORNE_TARGET"/>
                            </ObjectVisionRange>							
						</TurretAITargetChooserData>
					</TurretSettings>
				</WeaponSlotTurret>	
				<WeaponSlotTurret
					ID="7"
					AllowInterleavedFiring="false"
					InterleavedStyle="INTERLEAVE_FIRST_AVAILABLE"
					WeaponChoiceCriteria="PREFER_MOST_DAMAGE"
					ForceRotateObjectToMaintainFiringArc="false">
					<Weapon
						Ordering="PRIMARY_WEAPON"
						Template="JapanFortressShipMissilePods"
						ForbiddenObjectStatus="TRANSFORMATION_TOGGLE_STATE ADVANCED_MISSILE_PACKS"/>
					<Weapon
						Ordering="SECONDARY_WEAPON"
						Template="JapanFortressShipMissilePods_Aircraft"
						ForbiddenObjectStatus="TRANSFORMATION_TOGGLE_STATE ADVANCED_MISSILE_PACKS"/>
					<Weapon
						Ordering="PRIMARY_WEAPON"
						Template="JapanFortressShipMissilePods_JapanAdvancedMissilePack"
						ObjectStatus="ADVANCED_MISSILE_PACKS"
						ForbiddenObjectStatus="TRANSFORMATION_TOGGLE_STATE"/>
					<Weapon
						Ordering="SECONDARY_WEAPON"
						Template="JapanFortressShipMissilePods_Aircraft_JapanAdvancedMissilePack"
						ObjectStatus="ADVANCED_MISSILE_PACKS"
						ForbiddenObjectStatus="TRANSFORMATION_TOGGLE_STATE"/>
					<TurretSettings
						MaxDeflectionClockwise="90d"
						MaxDeflectionAntiClockwise="90d"
						TurretTurnRate="360"
						MinIdleScanTime="1.0s"
						MaxIdleScanTime="5.0s"
						MinIdleScanAngle="0.0"
						MaxIdleScanAngle="90.0"
						AllowsPitch="true"
						MinimumPitch="0d"
						PitchHeight="50%"
						TurretPitchRate="360"
						NaturalTurretAngle="225d"
						RecenterWhenOutOfTurnRange="false">
						<TurretAITargetChooserData
							CanPickDynamicTargets="true"
							CanAcquireDynamicIfAssignedOutOfRange="true"
							IdleScanDelay="=$FAST_IDLE_SCAN_DELAY">
							<ObjectVisionRange
					            id="ObjectVisionRange_Aircraft"
					            Range="100">
                                <Filter
                                    Rule="ANY"
                                    Include="INFANTRY VEHICLE AIRCRAFT"
                                    StatusBitFlags="AIRBORNE_TARGET"/>
                            </ObjectVisionRange>							
						</TurretAITargetChooserData>
					</TurretSettings>
				</WeaponSlotTurret>	
				<WeaponSlotTurret
					ID="8"
					AllowInterleavedFiring="false"
					InterleavedStyle="INTERLEAVE_FIRST_AVAILABLE"
					WeaponChoiceCriteria="PREFER_MOST_DAMAGE"
					ForceRotateObjectToMaintainFiringArc="false">
					<Weapon
						Ordering="PRIMARY_WEAPON"
						Template="JapanFortressShipMissilePods"
						ForbiddenObjectStatus="TRANSFORMATION_TOGGLE_STATE ADVANCED_MISSILE_PACKS"/>
					<Weapon
						Ordering="SECONDARY_WEAPON"
						Template="JapanFortressShipMissilePods_Aircraft"
						ForbiddenObjectStatus="TRANSFORMATION_TOGGLE_STATE ADVANCED_MISSILE_PACKS"/>
					<Weapon
						Ordering="PRIMARY_WEAPON"
						Template="JapanFortressShipMissilePods_JapanAdvancedMissilePack"
						ObjectStatus="ADVANCED_MISSILE_PACKS"
						ForbiddenObjectStatus="TRANSFORMATION_TOGGLE_STATE"/>
					<Weapon
						Ordering="SECONDARY_WEAPON"
						Template="JapanFortressShipMissilePods_Aircraft_JapanAdvancedMissilePack"
						ObjectStatus="ADVANCED_MISSILE_PACKS"
						ForbiddenObjectStatus="TRANSFORMATION_TOGGLE_STATE"/>
					<TurretSettings
						MaxDeflectionClockwise="90d"
						MaxDeflectionAntiClockwise="90d"
						TurretTurnRate="360"
						MinIdleScanTime="1.0s"
						MaxIdleScanTime="5.0s"
						MinIdleScanAngle="0.0"
						MaxIdleScanAngle="90.0"
						AllowsPitch="true"
						MinimumPitch="0d"
						PitchHeight="50%"
						TurretPitchRate="360"
						NaturalTurretAngle="315d"
						RecenterWhenOutOfTurnRange="false">
						<TurretAITargetChooserData
							CanPickDynamicTargets="true"
							CanAcquireDynamicIfAssignedOutOfRange="true"
							IdleScanDelay="=$FAST_IDLE_SCAN_DELAY">
							<ObjectVisionRange
					            id="ObjectVisionRange_Aircraft"
					            Range="100">
                                <Filter
                                    Rule="ANY"
                                    Include="INFANTRY VEHICLE AIRCRAFT"
                                    StatusBitFlags="AIRBORNE_TARGET"/>
                            </ObjectVisionRange>
                          </TurretAITargetChooserData>
					</TurretSettings>
				</WeaponSlotTurret>
				<WeaponSlotTurret
					ID="9">
					<Weapon
						Ordering="PRIMARY_WEAPON"
						Template="JapanFortressShipAirborneSeigeCannonWeapon"
						ObjectStatus="TRANSFORMATION_TOGGLE_STATE"
						ForbiddenObjectStatus="WEAPON_UPGRADED_01" />
					<Weapon
						Ordering="PRIMARY_WEAPON"
						Template="JapanFortressShipAirborneSeigeCannonWeaponVeteran"
						ObjectStatus="TRANSFORMATION_TOGGLE_STATE WEAPON_UPGRADED_01" />
					<TurretSettings
						MaxDeflectionClockwise="30d"
						MaxDeflectionAntiClockwise="30d"
						TurretTurnRate="20"
						MinIdleScanTime="0.0s"
						MaxIdleScanTime="0.0s"
						MinIdleScanAngle="0.0"
						MaxIdleScanAngle="0.0"
						AllowsPitch="true"
						MinimumPitch="-20d"
						PitchHeight="70%"
						TurretPitchRate="20"
						NaturalTurretAngle="0d"
						RecenterWhenOutOfTurnRange="true">
						<TurretAITargetChooserData
							CanPickDynamicTargets="true"
							CanAcquireDynamicIfAssignedOutOfRange="false"
							CanPickTargetsOutOfTurretAngle="true"
							IdleScanDelay="=$SLOW_IDLE_SCAN_DELAY">
						</TurretAITargetChooserData>
					</TurretSettings>
				</WeaponSlotTurret>
			</WeaponSetUpdate>
			<Physics
				id="ModuleTag_Physics" />

			<AutoHealBehavior
				id="Upgrade_PassiveHeal"
				InitiallyActive="true"
				HealOnlyIfNotInCombat="false"
				HealOnlyIfNotUnderAttack="false"
				StartHealingDelay="1s"
				HealingAmount="2"
				HealingDelay=".5s">
			</AutoHealBehavior>		

			<SpecialPower
				id="ModuleTag_TransformModeSpecialPower"
				SpecialPowerTemplate="SpecialPower_JapanFortressShipTransformMode"
				UpdateModuleStartsAttack="true"/>

			<ToggleStatusSpecialAbilityUpdate
				id="ModuleTag_ToggleDesolatorWeaponMode"
				SpecialPowerTemplate="SpecialPower_JapanFortressShipTransformMode"
				Options="RECONSTITUTE_STORED_COMMAND"
				TriggerAttributeModifier="AttributeModifier_JapanFortressShipTransformation"
				AttributeModifierDuration="=$JAPAN_FORTRESS_UNPACK_TIME">
				<ToggleState
					LocomotorSet="NORMAL"
					EnterStateSound="JAP_Gigafortress_AirToWater_Player">
					<SkirmishAiInfo
						ToggleHint="TOGGLE_DEFAULT"
						Location="Water"
						NeverUseWhenClear="true">
						<StateWeapon
							Weapon="JapanFortressShipMissilePods_Aircraft" />
					</SkirmishAiInfo>
					<ActiveGeometry>ship_geom</ActiveGeometry>
				</ToggleState>

				<ToggleState
					ObjectStatus="TRANSFORMATION_TOGGLE_STATE"
					LocomotorSet="SUPERSONIC"
					ModelConditions="USER_1"
					EnterStateSound="JAP_Gigafortress_WaterToAir_Player"
          AttributeModifier="AttributeMod_GigaFortressVision_Head">
					<SkirmishAiInfo
						ToggleHint="TOGGLE_TRANSFORM"
						Location="Water">
						<StateWeapon
							Weapon="JapanFortressShipCannonWeapon" />
					</SkirmishAiInfo>
					<ActiveGeometry>air_geom</ActiveGeometry>
				</ToggleState>

			</ToggleStatusSpecialAbilityUpdate>

			<!-- The Death OCLs -->
			<CreateObjectDie
				id="ModuleTag_ShipCreateObjectDie"
				CreationList="OCL_SeaDeathOCL">
				<DieMuxData
					DeathTypes="ALL"
					ExemptStatus="TRANSFORMATION_TOGGLE_STATE"/>
			</CreateObjectDie>

			<CreateObjectDie
				id="ModuleTag_AirCreateObjectDie"
				CreationList="OCL_AirDeathOCL">
				<DieMuxData
					DeathTypes="ALL"
					RequiredStatus="TRANSFORMATION_TOGGLE_STATE"
          ExemptStatus="OVER_WATER"/>
			</CreateObjectDie>

      <CreateObjectDie
				id="ModuleTag_AirCreateObject_OverWater_Die"
				CreationList="OCL_AirDeath_OverWater_OCL">
        <DieMuxData
					DeathTypes="ALL"
					RequiredStatus="TRANSFORMATION_TOGGLE_STATE OVER_WATER"/>
			</CreateObjectDie>


			<!-- -->
			
			<DestroyDie
				id="ModuleTag_Die">
				<DieMuxData
					DeathTypes="ALL" />
			</DestroyDie>
			<FXListBehavior
				id="ModuleTag_FXList">
				<DieMuxData
					DeathTypes="ALL" />
				<Event
					Index="onDeath"
					FX="FX_LargeBuildingDieExplosionRumble" />
				<Event Index="onDeath" FX="FX_Audio_Gigafortress_Die" />
			</FXListBehavior>

			<UnitUnpackUpdate
				id="ModuleTag_GenericUnpackUpdate"
				UnpackCompleteSound="JAP_GigaFortress_VoiceCreate" 
				UnpackTime="20s" />

			<SweepingLaserState
				id="ModuleTag_SweepingLaserState"
				Radius="200"
				LaserId="101" 
				OriginBoneName="CYLINDER01"
				SweepFXList=""
				VeteranSweepFXList=""
				SweepWeapon="JapanFortressShipAirborneSeigeCannonWeapon_SweepingWeapon"
				SweepingLaserOptions="SWEEP_VERTICAL">
        <LaserEndParticleSystem>JapanPearlLaserHit</LaserEndParticleSystem>
        </SweepingLaserState>

			<SweepingLaserState
				id="ModuleTag_SweepingLaserStateVeteran" 
				Radius="200"
				LaserId="102"
				OriginBoneName="CYLINDER01"
				SweepFXList=""
				VeteranSweepFXList=""
				SweepWeapon="JapanFortressShipAirborneSeigeCannonWeapon_SweepingWeapon_Veteran"
				SweepingLaserOptions="SWEEP_VERTICAL">
				<LaserEndParticleSystem>JapanPearlLaserHitVet</LaserEndParticleSystem>
			</SweepingLaserState>

			<!-- This include gives this unit the Advanced Missiple Packs upgrade. -->
			<xi:include
				href="DATA:Includes/JapanAdvancedMissilePacksUpgrade.xml" />

			<AttributeModifierUpgrade
				id="ModuleTag_JapanNavalPower"
				AttributeModifier="AttributeModifer_JapanNavalPower_JapanFortressShip">
				<TriggeredBy>Upgrade_JapanNavalPower</TriggeredBy>
			</AttributeModifierUpgrade>
			
			<!-- Enhanced Kamikaze Player Power -->
			<xi:include
				href="DATA:Includes/JapanEnhancedKamikazeUpgradeStatus.xml" />
			<xi:include
				href="DATA:Includes/JapanEnhancedKamikazeUpgradeDeathWeapon.xml" />
			<!-- -->
			
			<StatusBitsUpgrade
				id="ModuleTag_VeterancyUpgrade"
				StatusToSet="WEAPON_UPGRADED_01">
				<TriggeredBy>Upgrade_Veterancy_HEROIC</TriggeredBy>
			</StatusBitsUpgrade>

		</Behaviors>
		<AI>
			<AIUpdate
				id="ModuleTag_AI"
				AutoAcquireEnemiesWhenIdle="YES"
				StateMachine="UnitAIStateMachine">
				<UnitAITargetChooserData
					CanPickDynamicTargets="false"
					CanChaseAttack="false"/>
			</AIUpdate>
		</AI>
		<Body>
			<ActiveBody
				id="ModuleTag_Body"
				MaxHealth="5000.0"/>
		</Body>
		<ClientBehaviors>
			<ModelConditionAudioLoopClientBehavior id="ModuleTag_ShrunkenVoice">
				<ModelConditionSound Sound="JAP_Gigafortress_VoiceShrunken" RequiredFlags="SHRINK_EFFECT" />
			</ModelConditionAudioLoopClientBehavior>
 			<ModelConditionAudioLoopClientBehavior id="ModuleTag_IdleAndMoveLoops">
 				<ModelConditionSound Sound="JAP_EmperorsPearl_MoveLoopWaterMS" RequiredFlags="OVER_WATER MOVING" ExcludedFlags="DYING USER_1 STRUCTURE_UNPACKING"/>
 				<ModelConditionSound Sound="JAP_EmperorsPearl_MoveLoopMS" RequiredFlags="USER_1 MOVING" ExcludedFlags="DYING STRUCTURE_UNPACKING"/>
 				<ModelConditionSound Sound="JAP_EmperorsPearl_AmbientLoopWater" RequiredFlags="OVER_WATER" ExcludedFlags="MOVING DYING USER_1 STRUCTURE_UNPACKING"/>
 				<ModelConditionSound Sound="JAP_EmperorsPearl_AmbientLoop" RequiredFlags="USER_1" ExcludedFlags="MOVING DYING STRUCTURE_UNPACKING"/>
 				<ModelConditionSound Sound="JAP_EmperorsPearl_TransformAnimation_Loop" RequiredFlags="USER_3" ExcludedFlags="DYING STRUCTURE_UNPACKING"/>
				<ModelConditionSound Sound="JAP_Nanocore_DeployStructureWaterMS" RequiredFlags="STRUCTURE_UNPACKING OVER_WATER"/>
			</ModelConditionAudioLoopClientBehavior>
			<ModelConditionSoundSelectorClientBehavior id="ModuleTag_VoiceAir">
				<Override RequiredFlags="USER_1">
					<AudioArrayVoice>
						<AudioEntry Sound="JAP_GigaFortress_VoiceMoveAir" AudioType="voiceMove" />
						<AudioEntry Sound="JAP_GigaFortress_VoiceSelectAirMS" AudioType="voiceSelect" />
					</AudioArrayVoice>
				</Override>
				<Override RequiredFlags="STRUCTURE_UNPACKING">
					<AudioArrayVoice>
						<AudioEntry Sound="JAP_Nanocore_GigafortressUnpackingSelectMS" AudioType="voiceSelect" />
					</AudioArrayVoice>
				</Override>
			</ModelConditionSoundSelectorClientBehavior>
      <AnimationSoundClientBehavior id="ModuleTag_ASCB">
     <!-- Ground to Air ONCE -->
            <Sound Sound="JAP_EmperorsPearl_Water" RequiredMC="USER_1" Animation="JUFortressShip_TRANS" Frame="3" />
            <Sound Sound="JAP_EmperorsPearl_TransformAnimation_1" RequiredMC="USER_1" Animation="JUFortressShip_TRANS" Frame="1" />
            <Sound Sound="JAP_EmperorsPearl_TransformAnimation_2" RequiredMC="USER_1" Animation="JUFortressShip_TRANS" Frame="58" />
            <Sound Sound="JAP_EmperorsPearl_TransformAnimation_3" RequiredMC="USER_1" Animation="JUFortressShip_TRANS" Frame="51" />
            <Sound Sound="JAP_EmperorsPearl_TransformAnimation_4" RequiredMC="USER_1" Animation="JUFortressShip_TRANS" Frame="77" /> 
            <Sound Sound="JAP_EmperorsPearl_TransformAnimation_5" RequiredMC="USER_1" Animation="JUFortressShip_TRANS" Frame="89" />
            <Sound Sound="JAP_EmperorsPearl_TransformAnimation_6" RequiredMC="USER_1" Animation="JUFortressShip_TRANS" Frame="97" />   
     <!-- Air to Ground ONCE_BACKWARDS -->
            <Sound Sound="JAP_EmperorsPearl_TransformAnimation_1" RequiredMC="USER_3" Animation="JUFortressShip_TRANS" Frame="106" />
            <Sound Sound="JAP_EmperorsPearl_TransformAnimation_2" RequiredMC="USER_3" Animation="JUFortressShip_TRANS" Frame="55" />
            <Sound Sound="JAP_EmperorsPearl_TransformAnimation_3" RequiredMC="USER_3" Animation="JUFortressShip_TRANS" Frame="77" />
            <Sound Sound="JAP_EmperorsPearl_TransformAnimation_4" RequiredMC="USER_3" Animation="JUFortressShip_TRANS" Frame="60" /> 
            <Sound Sound="JAP_EmperorsPearl_TransformAnimation_5" RequiredMC="USER_3" Animation="JUFortressShip_TRANS" Frame="42" />
            <Sound Sound="JAP_EmperorsPearl_TransformAnimation_6" RequiredMC="USER_3" Animation="JUFortressShip_TRANS" Frame="3" />   
            <Sound Sound="JAP_EmperorsPearl_Water" RequiredMC="USER_3" Animation="JUFortressShip_TRANS" Frame="3" />       
            <Sound Sound="JAP_EmperorsPearl_TransformToWater_ImpactSplash" RequiredMC="USER_3" Animation="JUFortressShip_TRANS" Frame="3" />                 
      </AnimationSoundClientBehavior>
		</ClientBehaviors>
		<AudioArrayVoice>
			<AudioEntry Sound="JAP_GigaFortress_VoiceAttack" AudioType="voiceAttack" />
			<!-- NOTE: No "voiceCreated" here, because we're doing the creation Voice in the UnitUnpack Module, 
				 since this thing doesn't emerge directly from a production facility
				 <AudioEntry Sound="JAP_GigaFortress_VoiceCreate" AudioType="voiceCreated" /> -->
			<AudioEntry Sound="JAP_GigaFortress_VoiceMove" AudioType="voiceMove" />
			<AudioEntry Sound="JAP_GigaFortress_VoiceMoveAttack" AudioType="voiceAttackAfterMoving" />
			<AudioEntry Sound="JAP_GigaFortress_VoiceRetreat" AudioType="voiceRetreatToCastle" />
			<AudioEntry Sound="JAP_GigaFortress_VoiceSelectMS" AudioType="voiceSelect" />
			<AudioEntry Sound="JAP_GigaFortress_VoiceSelectBattle" AudioType="voiceSelectBattle" />
			<AudioEntry Sound="JAP_GigaFortress_VoiceSelectUnderFire" AudioType="voiceSelectUnderFire" />
		</AudioArrayVoice>
		<AudioArraySound>
			<AudioEntry Sound="JAP_EmperorsPearl_MoveLoop" AudioType="soundMoveLoop" />
			<AudioEntry Sound="JAP_Nanocore_DeployLoop" AudioType="soundUnderConstruction" />
		</AudioArraySound>

	
		<Geometry>
			<PlacementShape
				Type= "CYLINDER"
				MajorRadius = "60.0"
				Height = "5.0" />
<!--      
      <Shape
				Type="CYLINDER"
				Name="ship_geom" 
				MajorRadius="44.0"
				Height="45.0"
				ContactPointGeneration="INFANTRY" >
        <Offset
            x = "0.0"
            y = "0.0"
            z = "0.0" />
      </Shape>
-->      
      <Shape
           Type= "BOX"
           Name="ship_geom" 
           MajorRadius = "60.3056"
           MinorRadius = "13.8887"
           Height = "12.0481"
           ContactPointGeneration = "VEHICLE" >
        <Offset
            x = "10.2223"
            y = "-0.00152206"
            z = "0.0" />
      </Shape>
      <Shape 
           Type= "BOX"
           Name="ship_geom" 
           MajorRadius = "43.1455"
           MinorRadius = "13.8887"
           Height = "12.0481"
           ContactPointGeneration = "VEHICLE" >
        <Offset
            x = "-14.1879"
            y = "28.7887"
            z = "0.0" />
      </Shape>
      <Shape 
           Type= "BOX"
           Name="ship_geom" 
           MajorRadius = "43.1455"
           MinorRadius = "13.8887"
           Height = "12.0481"
           ContactPointGeneration = "VEHICLE" >
        <Offset
            x = "-14.1879"
            y = "-28.4923"
            z = "0.0" />
      </Shape>
      <Shape 
           Type= "BOX"
           Name="ship_geom" 
           MajorRadius = "17.4886"
           MinorRadius = "13.8887"
           Height = "12.0481"
           ContactPointGeneration = "VEHICLE" >
        <Offset
            x = "15.9177"
            y = "-51.07"
            z = "0.0" />
      </Shape>
      <Shape 
           Type= "BOX"
           Name="ship_geom" 
           MajorRadius = "17.4886"
           MinorRadius = "13.8887"
           Height = "12.0481"
           ContactPointGeneration = "VEHICLE" >
        <Offset
            x = "15.9177"
            y = "52.0274"
            z = "0.0" />
      </Shape>
      <Shape 
           Type= "BOX"
           Name="ship_geom" 
           MajorRadius = "21.107"
           MinorRadius = "20.5553"
           Height = "34.096"
           ContactPointGeneration = "VEHICLE" >
        <Offset
            x = "-1.46658"
            y = "-0.00152206"
            z = "0.0" />
      </Shape>
      <Shape 
           Type= "BOX"
           Name="ship_geom" 
           MajorRadius = "6.33209"
           MinorRadius = "9.86656"
           Height = "57.6223"
           ContactPointGeneration = "VEHICLE" >
        <Offset
            x = "-1.46658"
            y = "-0.00152206"
            z = "0.0" />
      </Shape>
      
      <Shape
				Type="CYLINDER"
				Name="air_geom"
				MajorRadius="44.0"
				Height="75.0"
				ContactPointGeneration="INFANTRY" >
        <Offset
          x = "-12.0763"
          y = "0.0"
          z = "5.0" />
      </Shape>
		</Geometry>
		<VisionInfo
			VisionRange="425"
			ShroudClearingRange="500" />
		<CrusherInfo
			id="id_CrusherInfo"
			CrusherLevel="20"
			CrushableLevel="41"			
			UseDirectionCheck="false"
			DefaultCrushKillDelay="0.3s">
			<ExtraCrushLevels
				CrusherLevel="40"
				CrushableLevel="40"
				ModelConditionMatch="USER_3" />
		</CrusherInfo>
	</GameObject>


	<!-- Object Specific buttons, armor, locomotor, and weapons here-->
	<ArmorTemplate
		id="JapanFortressShipArmor"
		SideDamageScalar="100"
		RearDamageScalar="100">
		<Armor
			Damage="MELEE"
			Percent="0" />
		<Armor
			Damage="SNIPER"
			Percent="0" />
		<Armor
			Damage="GUN"
			Percent="100" />		
		<Armor
			Damage="AUTO_CANNON"
			Percent="65" />
		<Armor
			Damage="IMPACT"
			Percent="75" />
		<Armor
			Damage="FLAK"
			Percent="100" />	
		<Armor
			Damage="ROCKET"
			Percent="100" />
		<Armor
			Damage="CANNON"
			Percent="150" />
		<Armor
			Damage="PRISM"
			Percent="150" />
		<Armor
			Damage="TESLA"
			Percent="100" />
		<Armor
			Damage="EXPLOSIVE"
			Percent="100" />
		<Armor
			Damage="CONCUSSIVE"
			Percent="75" />
		<Armor
			Damage="RADIATION"
			Percent="5" />
	</ArmorTemplate>

	<LocomotorTemplate
		id="JapanFortressShipWaterLocomotor"
		Surfaces="DEEP_WATER"
		TurnTimeSeconds="3.0s"
		TurnTimeDamagedSeconds="4.0s"
		MaxSpeedDamaged="75%"
		AccelerationSeconds="0.5s"
		BrakingSeconds="0.5s"
		SlowTurnRadius="0.0"
		FastTurnRadius="40.0"
		MinTurnSpeed="0%"
		PreferredHeight="0.1"
		BehaviorZ="SURFACE_RELATIVE_HEIGHT"
		Appearance="SHIP"
		ActiveModelConditions="OVER_WATER"
		ActiveObjectStatus="WATER_LOCOMOTOR_ACTIVE OVER_WATER"
		ClampOrientationToPathTangent="true"
		ReorientIfTurnTooSharp="true"
		TurnThresholdHS="90d"
		PitchStiffness="0.2"
		RollStiffness="0.01"
		PitchDamping="0.2"
		RollDamping="0.05"

		TakeOffAndLandingSpeed="3.5"
		TakeOffAndLandingSlowDownDelta="0.0"
		EasingTakeOffAndLanding="true"
		EasingPercentage="30%"
			
		ElevatorCorrectionDegree="0.02"
		ElevatorCorrectionRate="0.04"
		AeleronCorrectionDegree="0.05"
		AeleronCorrectionRate="0.03"
	/>

	<LocomotorTemplate
		id="JapanFortressShipAirborneLocomotor"
		Surfaces="AIR"
		TurnTimeSeconds="8.0s"
		TurnTimeDamagedSeconds="10.0s"
		FastTurnRadius="30.0"
		SlowTurnRadius="0.0"
		AccelerationSeconds="1.5s"
		Lift="10%"
		LiftDamaged="10%"
		BrakingSeconds="1.5s"
		MinTurnSpeed="0%"
		PreferredHeight="130"
		PreferredHeightDamping="2.0"
		AllowMotiveForceWhileAirborne="true"
		BehaviorZ="SURFACE_RELATIVE_HEIGHT"
		Appearance="HOVER"
		
		PitchByZVelCoef="1.0"
		PitchStiffness="1.0"
		RollStiffness="0.1"
		PitchDamping="0.9"
		RollDamping="0.5"
		Apply2DFrictionWhenAirborne="true"
		AirborneTargetingHeight="2"
		LocomotorWorksWhenDead="true"

		TakeOffAndLandingSpeed="5.0"
		TakeOffAndLandingSlowDownDelta="25.0"
		TakeOffAndLandingSlowDownTime="3.0s"

		EasingTakeOffAndLanding="true"
		EasingPercentage="50%"

		RudderCorrectionDegree="0.169"
		RudderCorrectionRate="0.027"
		ElevatorCorrectionDegree="0.103"
		ElevatorCorrectionRate="0.016"
		/>

	<!-- Death Object Creations Lists -->
	<ObjectCreationList
		id="OCL_SeaDeathOCL">
		<CreateObject
			Options="IGNORE_ALL_OBJECTS"
			Disposition="LIKE_EXISTING INHERIT_VELOCITY">
			<CreateObject>JapanFortressShip_Collapse</CreateObject>
		</CreateObject>
	</ObjectCreationList>

	<ObjectCreationList
		id="OCL_AirDeathOCL">
		<CreateObject
			Options="IGNORE_ALL_OBJECTS"
			Disposition="LIKE_EXISTING INHERIT_VELOCITY"
			Count="1"
			VelocityScale="0.5"
 			MinForceMagnitude="0.01"
			MaxForceMagnitude="0.10">
			<CreateObject>JapanFortressShipAirborne_Dying</CreateObject>
		</CreateObject>
	</ObjectCreationList>

  <ObjectCreationList
		id="OCL_AirDeath_OverWater_OCL">
    <CreateObject
			Options="IGNORE_ALL_OBJECTS"
			Disposition="LIKE_EXISTING INHERIT_VELOCITY"
			Count="1"
			VelocityScale="0.5"
 			MinForceMagnitude="0.01"
			MaxForceMagnitude="0.10">
      <CreateObject>JapanFortressShipAirborne_OverWater_Dying</CreateObject>
    </CreateObject>
  </ObjectCreationList>
  
	<!-- -->
	
	<ObjectCreationList
		id="OCL_JapanFortressShipAirborneSeigeCannonWeaponNode">
		<CreateObject
			Options="IGNORE_ALL_OBJECTS INHERIT_ATTRIBUTES_FROM_SOURCE COPY_CREATORS_UPGRADES CREATE_AT_TARGET"
			Disposition="LIKE_EXISTING"
			Count="1"
			StatusToCopyFromParent="FORCE_ATTACKING">
			<CreateObject>JapanFortressShipSeigeCannonNode</CreateObject>
		</CreateObject>
	</ObjectCreationList>

	<!-- The Node that handles the Flying modes beam damage -->
	<GameObject
		id="JapanFortressShipSeigeCannonNode"
		Side="Japan"
		EditorSorting="SYSTEM"
		TransportSlotCount="0"
		IsTrainable="false"
		KindOf="UNATTACKABLE NOT_AUTOACQUIRABLE NO_COLLIDE INERT SKIRMISH_AI_ATTEMPT_TO_DODGE PASS_EXPERIENCE_TO_PRODUCER"
		EditorName="JapanFortressShipSeigeCannonNode">
		<DisplayName>JapanFortressShipSeigeCannonNode</DisplayName>
		<ArmorSet
			Armor="NoArmor" />
		<SkirmishAIInformation
			DodgeSafetyDistance="50.0">
			<DodgeWithUnits Rule="ALL"
			  StatusBitFlagsExclude="AIRBORNE_TARGET">
			</DodgeWithUnits>
		</SkirmishAIInformation>
		<Draws>
			<ScriptedModelDraw
				id="ModuleTag_Draw">
				<ModelConditionState
					ParseCondStateType="PARSE_DEFAULT">
					<Model Name="" />
				</ModelConditionState>
			</ScriptedModelDraw>
		</Draws>
		<Behaviors>

			<LifetimeUpdate
				id="ModuleTag_LifetimeUpdate"
				MinLifetime="0.75s"
				MaxLifetime="0.75s" />

			<FireWeaponWhenDead
				id="ModuleTag_JapanFortressShipSeigeCannonNodeDeathWeapon"
				DeathWeapon="JapanFortressShipAirborneSeigeCannonWeapon_NodeExplosion"
				InitiallyActive="true">
				<DieMuxData
					DeathTypes="ALL" />
			</FireWeaponWhenDead>

			<DestroyDie
				id="ModuleTag_Die">
				<DieMuxData
					DeathTypes="ALL" />
			</DestroyDie>
        <FXListBehavior
          id="ModuleTag_FXLists">
          <DieMuxData
            DeathTypes="ALL" />
          <Event
            Index="onDeath"
            FX="FX_JapanPearlLaserHit" />
        </FXListBehavior>

		</Behaviors>
		<Body>
			<PropBody
				id="ModuleTag_Body"/>
		</Body>
		<Geometry
			IsSmall="true">
			<Shape
				Type="SPHERE"
				MajorRadius="1.0">
			</Shape>
		</Geometry>
		<ShadowInfo
			Type="NONE" />
		<CrusherInfo
			id="id_CrusherInfo"
			CrushableLevel="0" />
	</GameObject>

	<ObjectCreationList
		id="OCL_JapanFortressShipAirborneSeigeCannonWeaponNode_Veteran">
		<CreateObject
			Options="IGNORE_ALL_OBJECTS INHERIT_ATTRIBUTES_FROM_SOURCE COPY_CREATORS_UPGRADES CREATE_AT_TARGET"
			Disposition="LIKE_EXISTING"
			Count="1"
			StatusToCopyFromParent="FORCE_ATTACKING">
			<CreateObject>JapanFortressShipSeigeCannonNode_Veteran</CreateObject>
		</CreateObject>
	</ObjectCreationList>
	
	<GameObject
		id="JapanFortressShipSeigeCannonNode_Veteran"
		inheritFrom="JapanFortressShipSeigeCannonNode">
		<Behaviors>
			<FXListBehavior
				id="ModuleTag_FXLists"
				xai:joinAction="Replace">
				<DieMuxData
					DeathTypes="ALL" />
				<Event
					Index="onDeath"
					FX="FX_JapanPearlLaserHitVET" />
			</FXListBehavior>
		</Behaviors>
	</GameObject>
	
</AssetDeclaration>
