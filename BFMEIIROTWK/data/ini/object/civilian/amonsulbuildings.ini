
;---------------------------------------------------------------------------------------------------------------
;
;	Amon Sul Objects
;
;---------------------------------------------------------------------------------------------------------------


Object AmonSulKeep

	SelectPortrait = HPAmonSulCitadel
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
		
		ExtraPublicBone	= Arrow01
		ExtraPublicBone	= Arrow02
		ExtraPublicBone	= Arrow03
		ExtraPublicBone	= Arrow04
		ExtraPublicBone	= Arrow05
		ExtraPublicBone	= Arrow06
		ExtraPublicBone	= Arrow07
		ExtraPublicBone	= Arrow08


    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
	StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD

    DefaultModelConditionState
	Model = CBAmonSulKeep
	WeaponLaunchBone = PRIMARY Arrow	
    
    End
   
	IdleAnimationState
		StateName = STATE_None
	End	


        ModelConditionState   = AWAITING_CONSTRUCTION
		Model               = CBAmonSulKeep
	End
		
	ModelConditionState	=	ACTIVELY_BEING_CONSTRUCTED
		Model		=	CBAmonSulKeep
	End;
	    
//-----damaged building

    ModelConditionState  = DAMAGED
      Model         = CBASKEEPD1
		ParticleSysBone FireSmall01 FireBuildingLarge
		ParticleSysBone FireSmall02 FireBuildingMedium
		ParticleSysBone FireSmall03 FireBuildingMedium
		ParticleSysBone FireSmall04 FireBuildingSmall
		ParticleSysBone FireSmall05 SmokeBuildingLarge
    End
    AnimationState = DAMAGED
		EnteringStateFX	= FX_BuildingDamaged
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = CBASKEEPD2
		ParticleSysBone FireSmall01 FireBuildingLarge
		ParticleSysBone FireSmall02 FireBuildingLarge
		ParticleSysBone FireSmall03 FireBuildingMedium
		ParticleSysBone FireSmall04 SmokeBuildingLarge
		ParticleSysBone FireSmall05 SmokeBuildingLarge
    End
    AnimationState = REALLYDAMAGED
      	Animation				=	RubbleAnimation
			AnimationName		=	CBASKEEPD2_skl.CBASKEEPD2_AN
			AnimationMode		=	ONCE
  		End
		EnteringStateFX	= FX_BuildingReallyDamaged
    End

    ModelConditionState  = RUBBLE
      Model         = CBASKEEPD3
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End
    
    AnimationState = RUBBLE
      	Animation				=	RubbleAnimation
			AnimationName		=	CBASKEEPD3_skl.CBASKEEPD3_BLD
			AnimationMode		=	ONCE
  		End
	  EnteringStateFX	= FX_BuildingReallyDamagedWithSound	;FX_BuildingReallyDamaged
	End

;    ModelConditionState  = POST_RUBBLE
;      Model         = CBASKEEP_Ruin
;		ParticleSysBone NONE SmokeBuildingMediumRubble
;    End

;    ModelConditionState  = POST_COLLAPSE
;      Model         = CBASKEEP_Ruin
;		ParticleSysBone NONE SmokeBuildingMediumRubble
;    End  
 		
  End

	Draw = W3DScriptedModelDraw ModuleTag_DrawDoor
		OkToChangeModelColor  = Yes
		UseStandardModelNames = Yes
		StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD

		DefaultModelConditionState
			Model = CBAmnKD_CLS
		End

		; Idle, closed
		IdleAnimationState 
			Animation			= IDLE 
				AnimationName		= CBAmnKD_SKL.CBAmnKD_CLS
				AnimationMode		= LOOP
			End
			Flags = START_FRAME_FIRST
		End
		
		ModelConditionState = DAMAGED
			Model = CBAmnKD_CLS
			Texture = AmonSulCentralTower_D.tga AmonSul_D1.tga
		End
		
		ModelConditionState = REALLYDAMAGED
			Model = CBAmnKD_CLS
			Texture = AmonSulCentralTower_D.tga AmonSul_D1.tga
		End
		
		ModelConditionState = RUBBLE
			Model = CBAmnKD_CLS
		End

		; Build
		AnimationState				= ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
		End

		; Animating from closed to open
		AnimationState				= DOOR_1_OPENING
			Animation			= CBAmnKD_OPA
				AnimationName		= CBAmnKD_SKL.CBAmnKD_OPAN
				AnimationMode		= ONCE	
				AnimationBlendTime	= 0
			End
		End 
		
		; Open 
		AnimationState				= DOOR_1_WAITING_OPEN
			Animation			= CBAmnKD_OP
				AnimationName		= CBAmnKD_SKL.CBAmnKD_OP
				AnimationMode		= LOOP	
				AnimationBlendTime	= 0
			End
		Flags = START_FRAME_FIRST
		End   

		; Animating from open to closed
		AnimationState				= DOOR_1_CLOSING
			Animation			= CBAmnKD_CLA
				AnimationName		= CBAmnKD_SKL.CBAmnKD_CLSAN
				AnimationMode		= ONCE
				AnimationBlendTime	= 0
			End
		End   


;		ModelConditionState			= POST_RUBBLE
;			Model = None
;		End
;
;		ModelConditionState			= POST_COLLAPSE
;			Model = None
;		End
	End


  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:AmonSulStronghold
  Side                = Arnor
  EditorSorting       = STRUCTURE
  Browser = REGION WEATHERTOP  STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 7500
  BuildTime           = 45.0           ; in seconds
  VisionRange         = VISION_BASE_DEFENSE
  ShroudClearingRange = SHROUD_CLEAR_BASE_DEFENSE	


	WeaponSet
		Weapon				= PRIMARY AmonSulArrowTowerBow
		AutoChooseSources	= PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End 

	ArmorSet
		Conditions		= None
		Armor			= CitadelFortressArmor
	End

  CommandSet          = EmptyCommandSet
 
  ; *** AUDIO Parameters ***

  	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged	= BuildingHeavyDamageStone
	VoiceSelect = MenFortressSelect
 
	UnitSpecificSounds
		UnderConstruction		= BuildingConstructionLoop  ; Built first time
		UnderRepairFromDamage	= NoSound					; Repaired No animation on the building, so don't bother playing sound
		UnderRepairFromRubble	= BuildingConstructionLoop	; Repaired from completely destroyed (not used???)
	End

	; *** ENGINEERING Parameters ***

	RadarPriority       = STRUCTURE
	KindOf              = VITAL_FOR_BASE_SURVIVAL PRELOAD SELECTABLE STRUCTURE IMMOBILE SCORE CASTLE_KEEP MP_COUNT_FOR_VICTORY DONT_HIDE_IF_FOGGED CAN_ATTACK FS_FACTORY AUTO_RALLYPOINT DOZER_FACTORY NEVER_CULL_FOR_MP COMMANDCENTER 

	Behavior = QueueProductionExitUpdate ModuleTag_QueuePEU
		UnitCreatePoint			= X:0.0 Y:-75.0 Z:0.0
		NaturalRallyPoint		= X:0.0 Y:-150.0 Z:0.0	//NaturalRallyPointX must always match GeometryMajorRadius! 
    		ExitDelay		= STANDARD_HORDE_EXIT_DELAY
    		PlacementViewAngle	= -90
	End  
	//-----------------------------------------------

	//Commandset upgrades based on faction.  This is so the building will produce the proper units when necessary
	Behavior = CommandSetUpgrade ModuleTag_CommandSetMen
		TriggeredBy	= Upgrade_MenFaction
		CommandSet	= MenMonumentFortressRebuildCommandSet
	End
	Behavior = CommandSetUpgrade ModuleTag_CommandSetElven
		TriggeredBy	= Upgrade_ElfFaction
		CommandSet	= ElvenMonumentFortressRebuildCommandSet
	End
	Behavior = CommandSetUpgrade ModuleTag_CommandSetDwarven
		TriggeredBy	= Upgrade_DwarfFaction
		CommandSet	= DwarvenMonumentFortressRebuildCommandSet
	End
	Behavior = CommandSetUpgrade ModuleTag_CommandSetMordor
		TriggeredBy	= Upgrade_MordorFaction
		CommandSet	= MordorMonumentFortressRebuildCommandSet
	End
	Behavior = CommandSetUpgrade ModuleTag_CommandSetIsengard
		TriggeredBy	= Upgrade_IsengardFaction
		CommandSet	= IsengardMonumentFortressRebuildCommandSet
	End
	Behavior = CommandSetUpgrade ModuleTag_CommandSetWild
		TriggeredBy	= Upgrade_WildFaction
		CommandSet	= WildMonumentFortressRebuildCommandSet
	End
	Behavior = CommandSetUpgrade ModuleTag_CommandSetAngmar
		TriggeredBy	= Upgrade_AngmarFaction
		CommandSet	= AngmarMonumentFortressRebuildCommandSet
	End
	Behavior = CommandSetUpgrade ModuleTag_CommandSetArnor
		TriggeredBy	= Upgrade_ArnorFaction
		CommandSet	= ArnorMonumentFortressCommandSet
	End
	//End Commandset upgrades

	Behavior = AutoDepositUpdate AutoDepositModuleTag
		DepositTiming       	= GENERIC_KEEP_MONEY_TIME
		DepositAmount       	= GENERIC_KEEP_MONEY_AMOUNT 
		InitialCaptureBonus 	= 0  // no initial bonus
	End

	Behavior = TerrainResourceBehavior ModuleTag_NewMoneyDeadSpot
		Radius			= GENERIC_KEEP_MONEY_RANGE	// How far we try to claim ground
		MaxIncome		= 0							// If we were to get all we wanted, how much we would earn.  Linear slope to 0 at 0% claim
		IncomeInterval	= 999999					// How often (in msec) we give that much money
		HighPriority	= Yes						// A high priority claim gets to pretend it was there first.
	End
	
	Behavior = CitadelSlaughterHordeContain ModuleTag_SlaughterMe
		PassengerFilter					= GENERIC_FACTION_SLAUGHTERABLE
		ObjectStatusOfContained			= UNSELECTABLE ENCLOSED
		CashBackPercent					= 200%		
		ContainMax						= 99						;// give it a huge capacity, just in case player sends his whole army in at once
		AllowEnemiesInside				= No
		AllowAlliesInside				= No
 		AllowNeutralInside				= No
 		AllowOwnPlayerInsideOverride	= Yes
		EnterSound						= MordorSlaughterhouseEnterSound
		EntryOffset						= X:0.0 Y:-100.0 Z:0.0
		EntryPosition					= X:0.0 Y:-50.0 Z:0.0		// entry position needs to be offset from the root transform, otherwise fortress obscures point.

		ExitOffset						= X:-150.0 Y:0.0 Z:0.0
		StatusForRingEntry				= HOLDING_THE_RING
		UpgradeForRingEntry				= Upgrade_RingHero Upgrade_FortressRingHero
		ObjectToDestroyForRingEntry		= NONE +TheDroppedRing
		FXForRingEntry					= FX_OneRingFlare
	End
	
	Behavior = ModelConditionUpgrade ModuleTag_ForHigherFX
		TriggeredBy			= Upgrade_RingHero Upgrade_FortressRingHero
		RequiresAllTriggers	= Yes
		AddConditionFlags	= BUILD_VARIATION_TWO
	End	
	
	#include "..\FortressRingFunc.inc"

	Behavior = KeepObjectDie ModuleTag_IWantRubble
	End

	Behavior = GettingBuiltBehavior GetBuiltBehaviorTag
		SelfBuildingLoop		= BuildingConstructionLoop		; Only played if we DON'T spawn a worker
		SelfRepairFromDamageLoop	= NoSound				; This doesn't cause an animation, so don't bother playing a sound
		SelfRepairFromRubbleLoop	= BuildingConstructionLoop
		SpawnTimer			= -1.0					; Negative means no 'autoheal'
		RebuildTimeSeconds		= 180
	End



	Body						= StructureBody ModuleTag_Body ;ActiveBody ModuleTag_05 ;
		MaxHealth				= 8000.0
		MaxHealthDamaged		= 4000.0
		MaxHealthReallyDamaged  = 2000.0
	End

	
	Behavior = AIUpdateInterface ModuleTag_SoWeCanUseWeapon
 		AutoAcquireEnemiesWhenIdle	= Yes
 		MoodAttackCheckRate			= 250
 	End

	Behavior = ProductionUpdate ModuleTag_06
  		NumDoorAnimations            = 1
		DoorOpeningTime              = 3000  ;//in mSeconds how long you want doors to be in open state
		DoorWaitOpenTime             = 3000  ;//in mSeconds time the door stays open, so units can exit
		DoorCloseTime                = 3000  ;//in mSeconds how long you want doors to be in open state	
	End

; Note--Mike added this Statemt for Point of Creation and Exit for the AmunSul Keep
  	
;	Behavior                  = StructureCollapseUpdate ModuleTag_08
;		MinCollapseDelay        = 000
;		MaxCollapseDelay        = 000
;		CollapseDamping         = .5
;		MaxShudder              = 0.6
;		MinBurstDelay           = 250
;		MaxBurstDelay           = 800
;		BigBurstFrequency       = 4
;		FXList                  = INITIAL   FX_StructureMediumCollapse
;		FXList                  = ALMOST_FINAL  FX_StructureAlmostCollapse
;		DestroyObjectWhenDone	= Yes
;		CollapseHeight			= 155
;	End
  
;	AttackContactPoint = X:-24 Y:-24 Z:92

  	Geometry              = CYLINDER
  	GeometryMajorRadius   = 120.0
  	GeometryHeight        = 200.0
  	GeometryIsSmall       = No
  	Shadow                = SHADOW_VOLUME

	Shadow                = SHADOW_VOLUME

End

;---------------------------------------------
Object AmonSulGate

	SelectPortrait = HPAmonSul_Gate

  ; *** ART Parameters ***
	Draw = W3DScriptedModelDraw ModuleTag_Draw
		OkToChangeModelColor  	= Yes
		UseStandardModelNames 	= Yes
		StaticModelLODMode	= yes ;// Will append M or L to the skin name depending on GameLOD

		DefaultModelConditionState
			Model = CBASGTE ;CBAmonSulGate
		End
		
		IdleAnimationState
 			StateName = STATE_None
		End	

//--------- damage states for the gate

		ModelConditionState   = DAMAGED
			Model               = CBASGTED1
		End
		AnimationState = DAMAGED
			EnteringStateFX	= FX_WallDamaged
		End	    
		
		ModelConditionState   = REALLYDAMAGED
			Model               = CBASGTED2
		End

    			AnimationState = REALLYDAMAGED
      			Animation				=	RubbleAnimation
				AnimationName		=	CBASGTED2_skl.CBASGTED2_AN
				AnimationMode		=	ONCE
 			End
			EnteringStateFX	= FX_BuildingReallyDamaged
   		End
		
		ModelConditionState  = COLLAPSING
			Model         = CBASGTED3
		End

		AnimationState = COLLAPSING
   	   		Animation			= RubbleAnimation
				AnimationName		= CBASGTED3_skl.CBASGTED3_AN
				AnimationMode		= ONCE
  			End
			EnteringStateFX			= FX_StructureMediumCollapse
		End
		
		ModelConditionState  = RUBBLE
			Model         = CBASGTED3
		End

		AnimationState = RUBBLE
   	   		Animation			= RubbleAnimation
				AnimationName		= CBASGTED3_skl.CBASGTED3_AN
				AnimationMode		= ONCE
  			End
			EnteringStateFX			= FX_StructureMediumCollapse
		End
		
		ModelConditionState  = POST_RUBBLE
			Model         = NONE
			ParticleSysBone NONE SmokeBuildingMediumRubble
		End
		AnimationState = POST_RUBBLE
		End

		ModelConditionState  = POST_COLLAPSE
		Model         = None
			ParticleSysBone NONE SmokeBuildingMediumRubble
		End
		AnimationState = POST_COLLAPSE
		End 

;		ModelConditionState = ACTIVELY_BEING_CONSTRUCTED
;			Model	= None
;		End
	End

	Draw = W3DScriptedModelDraw ModuleTag_DrawDoor
		OkToChangeModelColor  	= Yes
		UseStandardModelNames 	= Yes
		StaticModelLODMode	= yes ;// Will append M or L to the skin name depending on GameLOD

		DefaultModelConditionState
			Model = CBAmnGN_CLS ;CBAmonSulGate
		End
		
		IdleAnimationState
 			StateName = STATE_None
		End	
//--------- damage states for the door

		ModelConditionState   = DAMAGED
			Model               = CBAmnGN_CLS
			Texture				= AmonSulCentralTower_D.tga AmonSul_D1.tga
		End
;		AnimationState = DAMAGED
;			EnteringStateFX	= FX_WallDamaged
;		End	    
		
		ModelConditionState   = REALLYDAMAGED
			Model               = CBAmnGN_CLS
			Texture				= AmonSulCentralTower_D.tga AmonSul_D1.tga
		End

;    			AnimationState = REALLYDAMAGED
;      			Animation				=	RubbleAnimation
;				AnimationName		=	CBASGTED2_skl.CBASGTED2_AN
;				AnimationMode		=	ONCE
; 			End
;			EnteringStateFX	= FX_BuildingReallyDamaged
;   		End
		
		ModelConditionState  = COLLAPSING
			Model         = None
		End
;		AnimationState = COLLAPSING
;      		Animation				=	RubbleAnimation
;				AnimationName		=	 CBASGTED3_skl.CBASGTED3_AN
;				AnimationMode		=	ONCE
;  			End
;			EnteringStateFX			= FX_StructureMediumCollapse
;		End

		ModelConditionState  = RUBBLE
			Model         = None  
		End  
		
		ModelConditionState  = POST_RUBBLE
			Model         = NONE
			ParticleSysBone NONE SmokeBuildingMediumRubble
		End
		AnimationState = POST_RUBBLE
		End

		ModelConditionState  = POST_COLLAPSE
		Model         = None
			ParticleSysBone NONE SmokeBuildingMediumRubble
		End
		AnimationState = POST_COLLAPSE
		End 


		ModelConditionState = ACTIVELY_BEING_CONSTRUCTED
			Model	= None
		End
	//------ Door Animations

		AnimationState = DOOR_1_OPENING 
			Flags = START_FRAME_LAST
			StateName = Door_Open
			Animation				=	Death
				AnimationName		=	CBAmnGN_OPSKL.CBAmnGN_CLS 
				AnimationMode		=	ONCE
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Door_Close" then CurDrawableSetTransitionAnimState("TRANS_Closed_To_Open") end
			EndScript
		End
		TransitionState = TRANS_Closed_To_Open
			Animation = Open 
				AnimationName	=	CBAmnGN_OPSKL.CBAmnGN_OPAN  
				AnimationMode	=	ONCE 
			End
		End
    
		AnimationState = DOOR_1_CLOSING 
			Flags = START_FRAME_LAST
			StateName = Door_Close
			Animation				=	Death
				AnimationName		=	CBAmnGN_OPSKL.CBAmnGN_OP 
				AnimationMode		=	ONCE
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Door_Open" then CurDrawableSetTransitionAnimState("TRANS_Open_To_Closed") end
			EndScript
		End
		TransitionState = TRANS_Open_To_Closed
			Animation = Open 
				AnimationName	=	CBAmnGN_OPSKL.CBAmnGN_CLSAN 
				AnimationMode	=	ONCE 
			End
		End
	End

 
	; ***DESIGN parameters ***
	DisplayName         = OBJECT:CarnDumMainGate
	Side                = Civilian
  	EditorSorting       = STRUCTURE
  	Browser = REGION WEATHERTOP  STRUCTURE
	ThreatLevel			= 1.0	
	 
	BuildCost           = MONUMENT_FORTRESS_GATE_BUILDCOST
	BuildTime           = DWARVEN_WALLGATE_SMALL_BUILDTIME
	VisionRange         = DWARVEN_WALLGATE_SMALL_VISION_RANGE
	ShroudClearingRange = DWARVEN_WALLGATE_SMALL_SHROUD_CLEAR


	; *** AUDIO Parameters ***
	#include "..\Includes\StandardBuildingEvaEvents.inc"
	SoundOnDamaged		= BuildingLightDamageStone
	SoundOnReallyDamaged	= BuildingHeavyDamageStone
	VoiceSelectUnderConstruction	= BuildingEvilVoiceSelectUnderConstruction

	UnitSpecificSounds
		UnderConstruction		= BuildingConstructionLoop  ; Built first time
		; UnderRepairFromDamage	= NoSound					; Repaired No animation on the building, so don't bother playing sound
		UnderRepairFromRubble	= BuildingConstructionLoop	; Repaired from completely destroyed (not used???)
	End

	ClientBehavior = ModelConditionAudioLoopClientBehavior ModuleTag_PlayCollapseSound
		ModelCondition = REQUIRED:RUBBLE Sound:BuildingSink
	End

	CampnessValue = CAMPNESS_WALL

	; *** ENGINEERING Parameters ***
	RadarPriority       = STRUCTURE
	KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE WALL_GATE MADE_OF_STONE BLOCKING_GATE IGNORE_FOR_VICTORY DONT_HIDE_IF_FOGGED NEVER_CULL_FOR_MP;SCORE
	;KeepSelectableWhenDead = Yes
	
	CommandSet			= CastleGateCommandSet_NoSell
 
    ArmorSet
		Conditions        = None
		Armor             = CitadelFortressArmor
		DamageFX          = None
	End
 
	Body                = StructureBody ModuleTag_05
		MaxHealth         = 3000
		MaxHealthDamaged        = 2000
		MaxHealthReallyDamaged	= 1000
	End
	 
	Behavior = AIUpdateInterface ModuleTag_AIForSequentialScriptsToWork
		; required for sequential scripts to work on this object
	End

;	Behavior            = GettingBuiltBehavior GetBuiltBehaviorTag
;		SelfBuildingLoop			= BuildingConstructionLoop		; Only played if we DON'T spawn a worker
;		SelfRepairFromDamageLoop	= NoSound						; This doesn't cause an animation, so don't bother playing a sound
;		SelfRepairFromRubbleLoop	= BuildingConstructionLoop
;		SpawnTimer					= -1.0							; Negative means no 'autoheal'
;		RebuildTimeSeconds			= 40
;	End
;
;	Behavior = KeepObjectDie ModuleTag_IWantRubble
;	End					 

	Behavior = GateOpenAndCloseBehavior ModuleTag_GATE
		ResetTimeInMilliseconds			= 4000				;important! this must be longer than the gates animation, ir it will twitch
		OpenByDefault					= No
		PercentOpenForPathing			= 50
		SoundOpeningGateLoop			= GateOpenStart
		SoundClosingGateLoop			= GateCloseStart
		SoundFinishedOpeningGate		= GateOpenEnd
		SoundFinishedClosingGate		= GateCloseEnd
		TimeBeforePlayingOpenSound		= 3000
		TimeBeforePlayingClosedSound	= 3000
	End

	Behavior                  = StructureCollapseUpdate ModuleTag_Collapse
		MinCollapseDelay        = 000
		MaxCollapseDelay        = 000
		CollapseDamping         = .5
		MaxShudder              = 0.6
		MinBurstDelay           = 250
		MaxBurstDelay           = 800
		BigBurstFrequency       = 4
		FXList                  = INITIAL   FX_StructureMediumCollapse
		FXList                  = ALMOST_FINAL  FX_StructureAlmostCollapse
		DestroyObjectWhenDone	= Yes
		CollapseHeight		= 126
	End

	Behavior = FakePathfindPortalBehaviour ModuleTag_FAKEPATHFIND
		AllowEnemies			= No
		AllowNonSkirmishAIUnits	= No
	End
	
	Behavior = AIGateUpdate ModuleTage_AIGateUpdate
		TriggerWidthX = 450.0
		TriggerWidthY = 225.0
	End

	GeometryIsSmall		  = No

	; right pillar
	Geometry              = CYLINDER
	GeometryMajorRadius   = 15.0  
	GeometryHeight        = 100
	GeometryOffset        = X:0 Y:60 Z:0
	
	; left pillar
	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 15.0  
	GeometryHeight        = 100
	GeometryOffset        = X:0 Y:-60 Z:0

	; Main
	AdditionalGeometry    = BOX
	GeometryName		= "Closed"
	GeometryMajorRadius   = 16.0  
	GeometryMinorRadius   = 115.0  
	GeometryHeight        = 50
	
	; Left open
	AdditionalGeometry    = BOX
	GeometryName		 = "OpenLeft"
	GeometryMajorRadius   = 16.0 
	GeometryMinorRadius   = 40
	GeometryHeight        = 40
	GeometryOffset        = X:0 Y:-75  Z:0
	
	; Right open
	AdditionalGeometry    = BOX
	GeometryName		  = "OpenRight"
	GeometryMajorRadius   = 16.0
	GeometryMinorRadius   = 40  
	GeometryHeight        = 40
	GeometryOffset        = X:0 Y:75 Z:0

	
	Shadow                = SHADOW_VOLUME
	BuildCompletion     = PLACED_BY_PLAYER
End


ChildObject  FornostMainGate 	AmonSulGate
	Scale	= 1.3
	GeometryIsSmall		  = No

	; right pillar
	Geometry              = CYLINDER
	GeometryMajorRadius   = 19.5 
	GeometryHeight        = 130
	GeometryOffset        = X:0 Y:78 Z:0
	
	; left pillar
	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 19.5  
	GeometryHeight        = 130
	GeometryOffset        = X:0 Y:-78 Z:0

	; Main
	AdditionalGeometry    = BOX
	GeometryName		= "Closed"
	GeometryMajorRadius   = 20.8
	GeometryMinorRadius   = 149.5
	GeometryHeight        = 65
	
	; Left open
	AdditionalGeometry    = BOX
	GeometryName		 = "OpenLeft"
	GeometryMajorRadius   = 19.5 
	GeometryMinorRadius   = 52
	GeometryHeight        = 52
	GeometryOffset        = X:0 Y:-97.5  Z:0
	
	; Right open
	AdditionalGeometry    = BOX
	GeometryName		  = "OpenRight"
	GeometryMajorRadius   = 19.5 
	GeometryMinorRadius   = 52
	GeometryHeight        = 52
	GeometryOffset        = X:0 Y:97.5 Z:0

	
	Shadow                = SHADOW_VOLUME
	BuildCompletion     = PLACED_BY_PLAYER

End
;------------------------------------------------------------------------------
Object AmonSulWall

	SelectPortrait = HPAmonSulWallPortrait


   ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
	StaticModelLODMode		= yes ;// Will append M or L to the skin name depending on GameLOD

     DefaultModelConditionState
      	Model = CBAmonSulWall
     End

 	IdleAnimationState
	StateName = STATE_None
	End	
     
     //--damaged building
     	  
     		ModelConditionState  = DAMAGED
     			Model         = CBASWallD1
     		End
     		
     		AnimationState = DAMAGED
     			EnteringStateFX	= FX_WallDamaged
     		End	    
     		
     		ModelConditionState  = REALLYDAMAGED
     			Model         = CBASWallD2
     		End
     	    
     	    	AnimationState = REALLYDAMAGED
           		Animation				=	RubbleAnimation
     				AnimationName		=	 CBASWallD2_SKL.CBASWallD2_AN
     				AnimationMode		=	ONCE
       			End
     		    EnteringStateFX	= FX_WallDamaged
     		End
      
		ModelConditionState  = COLLAPSING
			Model         = CBASWallD3
		End
		AnimationState = COLLAPSING
      			Animation				=	CollapsingAnimation
				AnimationName		=	 CBASWallD3_skl.CBASWallD3_AN
				AnimationMode		=	ONCE
  			End
			EnteringStateFX			= FX_StructureMediumCollapse
		End

		ModelConditionState  = RUBBLE
			Model         = None  
		End  
		
		ModelConditionState  = POST_RUBBLE
			Model         = NONE
			ParticleSysBone NONE SmokeBuildingMediumRubble
		End
		AnimationState = POST_RUBBLE
		End

		ModelConditionState  = POST_COLLAPSE
		Model         = None
			ParticleSysBone NONE SmokeBuildingMediumRubble
		End
		AnimationState = POST_COLLAPSE
		End 

		ModelConditionState = ACTIVELY_BEING_CONSTRUCTED
			Model	= None
		End
End

    ; ***DESIGN parameters ***
  DisplayName      = OBJECT:AmonSulWall
	Side                = Civilian
  	EditorSorting       = STRUCTURE
  	Browser = REGION WEATHERTOP  STRUCTURE
ArmorSet
	Conditions        = None
	Armor             = CitadelFortressArmor
	DamageFX          = GateDamageFX
End

CommandSet          = EmptyCommandSet

  ; *** ENGINEERING Parameters ***  
  KindOf = PRELOAD STRUCTURE SELECTABLE IMMOBILE WALL_SEGMENT MADE_OF_STONE DONT_HIDE_IF_FOGGED NEVER_CULL_FOR_MP
  Shadow          = SHADOW_VOLUME

	// These should always appear together on wall segments
	Behavior = KeepObjectDie ModuleTag_IWantRubble 
		DeathTypes			= ALL -SUICIDED
	End
	Behavior            = SlowDeathBehavior ModuleTag_SlowDeath
		DeathTypes			= NONE +SUICIDED
		DestructionDelay = 5000
	End												

	Body                = StructureBody ModuleTag_05
		MaxHealth         = 3000
		MaxHealthDamaged        = 2000
		MaxHealthReallyDamaged	= 1000
	End




  Geometry              = BOX
  GeometryMajorRadius   = 21
  GeometryMinorRadius   = 16
  GeometryHeight        = 50
  GeometryIsSmall       = No

End

;------------------------------------------------------------------------------
Object AmonSulWall45

	SelectPortrait = HPAmonSul_Hub
	
   ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
	StaticModelLODMode		= yes ;// Will append M or L to the skin name depending on GameLOD

     DefaultModelConditionState
      	Model = CBAmonSul45
     End
     
	IdleAnimationState
	StateName = STATE_None
	End	
     
     //--damaged building
     	  
     		ModelConditionState  = DAMAGED
     			Model         = AmSull45_D1
     		End
     		
     		AnimationState = DAMAGED
     			EnteringStateFX	= FX_WallDamaged
     		End	    
     		
     		ModelConditionState  = REALLYDAMAGED
     			Model         = AmSull45_D2
     		End
     	    
     	    	AnimationState = REALLYDAMAGED
           		Animation				=	RubbleAnimation
     				AnimationName		=	 AmSull45_D2SKL.AmSull45_D2AN
     				AnimationMode		=	ONCE
       			End
     		    EnteringStateFX	= FX_WallDamaged
     		End
      
		ModelConditionState  = COLLAPSING
			Model         = AmSull45_D3
		End
		AnimationState = COLLAPSING
      			Animation				=	CollapsingAnimation
				AnimationName		=	 AmSull45_D3SKL.AmSull45_D3AN
				AnimationMode		=	ONCE
  			End
			EnteringStateFX			= FX_StructureMediumCollapse
		End

		ModelConditionState  = RUBBLE
			Model         = None  
		End  
		
		ModelConditionState  = POST_RUBBLE
			Model         = NONE
			ParticleSysBone NONE SmokeBuildingMediumRubble
		End
		AnimationState = POST_RUBBLE
		End

		ModelConditionState  = POST_COLLAPSE
		Model         = None
			ParticleSysBone NONE SmokeBuildingMediumRubble
		End
		AnimationState = POST_COLLAPSE
		End 

		ModelConditionState = ACTIVELY_BEING_CONSTRUCTED
			Model	= None
		End
End

    ; ***DESIGN parameters ***
  DisplayName      = OBJECT:AmonSulWall
	Side                = Civilian
  	EditorSorting       = STRUCTURE
  	Browser = REGION WEATHERTOP  STRUCTURE


ArmorSet
	Conditions        = None
	Armor             = CitadelFortressArmor
	DamageFX          = GateDamageFX
End


CommandSet          = EmptyCommandSet

  ; *** ENGINEERING Parameters ***  
  KindOf = PRELOAD STRUCTURE SELECTABLE IMMOBILE WALL_SEGMENT MADE_OF_STONE DONT_HIDE_IF_FOGGED NEVER_CULL_FOR_MP
  Shadow          = SHADOW_VOLUME

	Body                = StructureBody ModuleTag_05
		MaxHealth         = 3000
		MaxHealthDamaged        = 2000
		MaxHealthReallyDamaged	= 1000
	End


	// These should always appear together on wall segments
	Behavior = KeepObjectDie ModuleTag_IWantRubble 
		DeathTypes			= ALL -SUICIDED
	End
	Behavior            = SlowDeathBehavior ModuleTag_SlowDeath
		DeathTypes			= NONE +SUICIDED
		DestructionDelay = 5000
	End												

	; right pillar
	Geometry              = CYLINDER
	GeometryMajorRadius   = 20.0  
	GeometryHeight        = 75
	GeometryOffset        = X:0 Y:0 Z:0


	AdditionalGeometry    = BOX
  	GeometryMajorRadius   = 24
  	GeometryMinorRadius   = 16
  	GeometryHeight        = 50
 	GeometryOffset        = X:-24 Y:0 Z:0


	AdditionalGeometry    = CYLINDER
  	GeometryMajorRadius   = 23
  	GeometryHeight        = 50
 	GeometryOffset        = X:21 Y:21 Z:0


 	GeometryIsSmall       = No

End


;------------------------------------------------------------------------------
Object AmonSulTower

	SelectPortrait = HPAmonSulTowerPortrait

   ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
		ExtraPublicBone 		= Arrow01
		ExtraPublicBone 		= Arrow02
		ExtraPublicBone 		= Arrow03
		ExtraPublicBone 		= Arrow04
		ExtraPublicBone 		= Arrow05
		ExtraPublicBone 		= Arrow06
	StaticModelLODMode		= yes ;// Will append M or L to the skin name depending on GameLOD

     DefaultModelConditionState
      	Model = CBAmonSulTwrTl
 	WeaponLaunchBone	= PRIMARY Arrow
;     	ParticleSysBone = Fire01 GPUFirePatch Followbone:YES
     End
     
;     IdleAnimationState
;     		StateName = STATE_None
;     End	

     
	//--damaged building
	  
		ModelConditionState  = DAMAGED
			Model         = CBAmnST_D1  
		End
		AnimationState = DAMAGED
			EnteringStateFX	= FX_WallDamaged
		End	    
		
		ModelConditionState  = REALLYDAMAGED
			Model         = CBAmnST_D2
		End
	    
	    AnimationState = REALLYDAMAGED
      		Animation				=	RubbleAnimation
				AnimationName		=	 CBAmnST_D2SKL.CBAmnST_D2AN
				AnimationMode		=	ONCE
  			End
		    EnteringStateFX	= FX_BuildingReallyDamaged
		End
		
		ModelConditionState  = COLLAPSING
			Model         = CBAmnST_D3
		End
		AnimationState = COLLAPSING
      		Animation				=	RubbleAnimation
				AnimationName		=	 CBAmnST_D3SKL.CBAmnST_D3AN
				AnimationMode		=	ONCE
  			End
			EnteringStateFX			= FX_StructureMediumCollapse
		End

     		ModelConditionState  = RUBBLE
     			Model         = None	
     		End  
     		
     		AnimationState = RUBBLE
     		End

		ModelConditionState  = POST_RUBBLE
			Model         = NONE
			ParticleSysBone NONE SmokeBuildingMediumRubble
		End
		AnimationState = POST_RUBBLE
		End

		ModelConditionState  = POST_COLLAPSE
		Model         = None
			ParticleSysBone NONE SmokeBuildingMediumRubble
		End
		AnimationState = POST_COLLAPSE
		End 

		ModelConditionState = ACTIVELY_BEING_CONSTRUCTED
			Model	= None
		End
End

    ; ***DESIGN parameters ***
  DisplayName      = OBJECT:AmonSulTower
	Side                = Civilian
  	EditorSorting       = STRUCTURE
  	Browser = REGION WEATHERTOP  STRUCTURE
  	VisionRange         = VISION_BASE_DEFENSE
  	ShroudClearingRange = SHROUD_CLEAR_BASE_DEFENSE	

	WeaponSet
		Weapon				= PRIMARY AmonSulArrowTowerBow
		AutoChooseSources	= PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End 

	ArmorSet
		Conditions        = None
		Armor             = CitadelFortressArmor
		DamageFX          = None
	End


CommandSet          = EmptyCommandSet

  ; *** ENGINEERING Parameters ***  
  KindOf = STRUCTURE IMMOBILE SELECTABLE CAN_ATTACK CAN_SHOOT_OVER_WALLS NEVER_CULL_FOR_MP DONT_HIDE_IF_FOGGED IGNORE_FOR_VICTORY 
  
	Body                = StructureBody ModuleTag_05
		MaxHealth         = 3000
		MaxHealthDamaged        = 2000
		MaxHealthReallyDamaged	= 1000
	End

	// These should always appear together on wall segments
	Behavior = KeepObjectDie ModuleTag_IWantRubble 
		DeathTypes			= ALL -SUICIDED
	End
	Behavior            = SlowDeathBehavior ModuleTag_SlowDeath
		DeathTypes			= NONE +SUICIDED
		DestructionDelay = 5000
	End												

	
	Behavior = AIUpdateInterface ModuleTag_SoWeCanUseWeapon
 		AutoAcquireEnemiesWhenIdle	= Yes
 		MoodAttackCheckRate			= 250
 	End

  Geometry              = CYLINDER
  GeometryMajorRadius   = 24.0
  GeometryHeight        = 175.0
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME


End

;------------------------------------------------------------------------------
Object AmonSulTower2

	SelectPortrait = HPAmonSulTowerPortrait

   ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
		ExtraPublicBone 		= Arrow01
		ExtraPublicBone 		= Arrow02
		ExtraPublicBone 		= Arrow03
		ExtraPublicBone 		= Arrow04
		ExtraPublicBone 		= Arrow05
		ExtraPublicBone 		= Arrow06
	StaticModelLODMode		= yes ;// Will append M or L to the skin name depending on GameLOD

     DefaultModelConditionState     
     	Model = CBAmonSulTwrSh
 	WeaponLaunchBone	= PRIMARY Arrow
;      	ParticleSysBone = Fire01 GPUFirePatch Followbone:YES
	 End
 
 		
 ;		IdleAnimationState
 ;  			StateName = STATE_None
;		End	
//--damaged building
	  
		ModelConditionState  = DAMAGED
			Model         = CBASTSD1  
		End
		AnimationState = DAMAGED
			EnteringStateFX	= FX_WallDamaged
		End	    
		
		ModelConditionState  = REALLYDAMAGED
			Model         = CBASTSD2
		End
	    
	    AnimationState = REALLYDAMAGED
      		Animation				=	RubbleAnimation
				AnimationName		=	 CBASTSD2_skl.CBASTSD2_AN
				AnimationMode		=	ONCE
  			End
		    EnteringStateFX	= FX_BuildingReallyDamaged
		End
		
		ModelConditionState  = COLLAPSING
			Model         = CBASTSD3
		End
		AnimationState = COLLAPSING
      		Animation				=	RubbleAnimation
				AnimationName		=	 CBASTSD3_skl.CBASTSD3_AN
				AnimationMode		=	ONCE
  			End
			EnteringStateFX			= FX_StructureMediumCollapse
		End

		ModelConditionState  = RUBBLE
			Model         = None  
		End  
		
		ModelConditionState  = POST_RUBBLE
			Model         = NONE
			ParticleSysBone NONE SmokeBuildingMediumRubble
		End
		AnimationState = POST_RUBBLE
		End

		ModelConditionState  = POST_COLLAPSE
		Model         = None
			ParticleSysBone NONE SmokeBuildingMediumRubble
		End
		AnimationState = POST_COLLAPSE
		End 

		ModelConditionState = ACTIVELY_BEING_CONSTRUCTED
			Model	= None
		End
End


    ; ***DESIGN parameters ***
  DisplayName      = OBJECT:AmonSulTower
	Side                = Civilian
  	EditorSorting       = STRUCTURE
  	Browser = REGION WEATHERTOP  STRUCTURE
  	VisionRange         = VISION_BASE_DEFENSE
  	ShroudClearingRange = SHROUD_CLEAR_BASE_DEFENSE	

	ArmorSet
		Conditions        = None
		Armor             = CitadelFortressArmor
		DamageFX          = None
	End
	
	WeaponSet
		Weapon				= PRIMARY AmonSulArrowTowerBow
		AutoChooseSources	= PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End 


CommandSet          = EmptyCommandSet

  ; *** ENGINEERING Parameters ***  
  KindOf = STRUCTURE IMMOBILE SELECTABLE CAN_ATTACK CAN_SHOOT_OVER_WALLS NEVER_CULL_FOR_MP DONT_HIDE_IF_FOGGED IGNORE_FOR_VICTORY
  

	Body                = StructureBody ModuleTag_05
		MaxHealth         = 3000
		MaxHealthDamaged        = 2000
		MaxHealthReallyDamaged	= 1000
	End

	Behavior = AIUpdateInterface ModuleTag_SoWeCanUseWeapon
 		AutoAcquireEnemiesWhenIdle	= Yes
 		MoodAttackCheckRate			= 250
 	End

	// These should always appear together on wall segments
	Behavior = KeepObjectDie ModuleTag_IWantRubble 
		DeathTypes			= ALL -SUICIDED
	End
	Behavior            = SlowDeathBehavior ModuleTag_SlowDeath
		DeathTypes			= NONE +SUICIDED
		DestructionDelay = 5000
	End												


  	Geometry              = CYLINDER
  	GeometryMajorRadius   = 24.0
  	GeometryHeight        = 100.0

	AdditionalGeometry              = BOX
  	GeometryMajorRadius   = 60
  	GeometryMinorRadius   = 16
  	GeometryHeight        = 50



  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME

End

;------------------------------------------------------------------------------------------------
Object AmonSulMallornTree

	SelectPortrait = BPEMallornTree

  Draw = W3DScriptedModelDraw ModuleTag_Draw
		OkToChangeModelColor  = Yes
		StaticModelLODMode = yes
		UseStandardModelNames = Yes
		

		DefaultModelConditionState
			Model = EBMalTree
;			ParticleSysBone     =  FireFlyBone FireFlies02 FollowBone:Yes
		End

	
    IdleAnimationState
	End
	
    

      ;--damaged building
      
		ModelConditionState     = DAMAGED
			Model               = EBMalTree_D1
		End  
		AnimationState =	DAMAGED
			EnteringStateFX	= FX_StatueDamaged
			ParticleSysBone = NONE MalTreeleaves
			ParticleSysBone = NONE Maltreedust
		End
		
		
		ModelConditionState     = REALLYDAMAGED
			Model               = EBMalTree_D2
		End  
    	AnimationState =	REALLYDAMAGED
    		Animation	= RubbleAnimation
				AnimationName		=	EBMalTree_D2SK.EBMalTree_D2AN
				AnimationMode		=	ONCE	
	  		End
			EnteringStateFX	= FX_StatueDamaged
		End
		
			
		ModelConditionState  = RUBBLE
			Model         =  EBMalTree_D3
			ParticleSysBone SmokeLarge01 SmokeBuildingLarge
		End
		AnimationState = RUBBLE
			Animation	= RubbleAnimation
				AnimationName		=	EBMalTree_D3SK.EBMalTree_D3AN
				AnimationMode		=	ONCE	
	  		End
	  		EnteringStateFX	= FX_StructureMediumCollapse
		End

		ModelConditionState  = POST_RUBBLE
			Model         = None
			ParticleSysBone NONE SmokeBuildingMediumRubble
		End
		ModelConditionState  = POST_COLLAPSE
			Model         = None
			ParticleSysBone NONE SmokeBuildingMediumRubble
		End
		
	    ModelConditionState = SNOW
			Model = EBMalTree
			Texture = EBMalTree.tga EBMalTree_Snow.tga
        End
  End
  

  Draw = W3DFloorDraw ModuleTag_DrawFloor    
		StaticModelLODMode = Yes		; THIS NEEDS TO BE COMMENTED OUT WHEN ENGINEERING ENABLES LOD'S IN THE FLOOR DRAW
     ModelName = EBMalTree_Bib
     WeatherTexture		= SNOWY EBMalTree_Bib_snow.tga
  		HideIfModelConditions	=	AWAITING_CONSTRUCTION
  		HideIfModelConditions	=	PARTIALLY_CONSTRUCTED
  End



  PlacementViewAngle  = 45
 
  ; ***DESIGN parameters ***
  DisplayName			= OBJECT:ElvenMallornTree
  Side                = Civilian
  EditorSorting       = STRUCTURE
  Browser = REGION WEATHERTOP  STRUCTURE
  ThreatLevel			= 1.0
 
  VisionRange         	= VISION_BASE_DEFENSE
  ShroudClearingRange 	= SHROUD_CLEAR_BASE_DEFENSE
  BountyValue         = ELVEN_MALLORN_TREE_BOUNTY_VALUE
  
  CommandSet = SellableCommandSet
  
  ArmorSet
    Conditions        = None
    Armor             = ResourceArmor
    ;DamageFX         = StructureDamageFXNoShake
  End
  
	WeaponSet
		Conditions	= NONE
		Weapon		= PRIMARY ElvenFloodgateWeapon
	End 
  

; For Testing Purposes


	; *** AUDIO Parameters ***
	SoundOnDamaged		= BuildingLightDamageWood
	SoundOnReallyDamaged	= BuildingHeavyDamageWood

	VoiceSelectUnderConstruction	= BuildingGoodVoiceSelectUnderConstruction
	VoiceFullyCreated		= EVA:GenericBuildingComplete-Builder-Elf

	UnitSpecificSounds
		UnderConstruction	= BuildingConstructionLoop  	; Built first time
		; UnderRepairFromDamage	= NoSound			; Repaired No animation on the building, so don't bother playing sound
		UnderRepairFromRubble	= BuildingConstructionLoop	; Repaired from completely destroyed (not used???)
	End

	EvaEventDamagedOwner		= UnderAttackResource

	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		MaxUpdateRangeCap = 800
		AnimationSound = Sound:StatueHeroicBuildStoneExplode	Animation:RPHeroStat_A.RPHeroStat_A		Frames:620
		AnimationSound = Sound:StatueHeroicBuildStoneDebris1	Animation:RPHeroStat_A.RPHeroStat_A		Frames:635
		AnimationSound = Sound:StatueHeroicBuildStoneDebris2	Animation:RPHeroStat_A.RPHeroStat_A		Frames:650
	End

 	CampnessValue = CAMPNESS_RESOURCE_BUILDING

  ; *** ENGINEERING Parameters ***

	RadarPriority       = STRUCTURE
	KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE MADE_OF_STONE CAN_ATTACK IGNORE_FOR_VICTORY  
 

	Body                		= StructureBody ModuleTag_05
	  MaxHealth         		= ELVEN_MALLORN_TREE_HEALTH
	  MaxHealthDamaged        	= ELVEN_MALLORN_TREE_HEALTH_DAMAGED
	  MaxHealthReallyDamaged  	= ELVEN_MALLORN_TREE_HEALTH_REALLY_DAMAGED
	End

	Flammability   ; should be after the 'Body' statement
		Fuel          =   ELVEN_MALLORNTREE_FIRE_FUEL      
		MaxBurnRate   =   ELVEN_MALLORNTREE_FIRE_MAX_BURN_RATE
		Decay         =   ELVEN_MALLORNTREE_FIRE_DECAY
		Resistance    =   ELVEN_MALLORNTREE_FIRE_RESISTANCE
    End
	
	Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
		DestructionDelay  = 5000
	End

	Behavior = AIUpdateInterface ModuleTag_SoWeCanUseWeapon
		AutoAcquireEnemiesWhenIdle	= Yes
		MoodAttackCheckRate		= 250
	End
	
	Behavior            = GettingBuiltBehavior GetBuiltBehaviorTag
		WorkerName	= ElvenWorkerNoSelect
		SpawnTimer	= DEFAULT_STRUCTURE_HEALDELAY
	End
	
	Behavior = ProductionUpdate ProductionUpdateModuleTag
		; GiveNoXP                       = Yes  ;disable granting xp when producing units.
	End


 
	Behavior                  = StructureCollapseUpdate ModuleTag_Collapse
		MinCollapseDelay        = 000
		MaxCollapseDelay        = 000
		CollapseDamping         = .5
		MaxShudder              = 0.6
		MinBurstDelay           = 250
		MaxBurstDelay           = 800
		BigBurstFrequency       = 4
		FXList                  = INITIAL   FX_StructureMediumCollapse
		FXList                  = ALMOST_FINAL  FX_StructureAlmostCollapse
		DestroyObjectWhenDone	= Yes
		CollapseHeight		= 126
	End
 
	Behavior = SubObjectsUpgrade ModuleTag_HideAll
		TriggeredBy		= Upgrade_StructureLevel1
		HideSubObjects		= V1 V1a V2 V2a
	End

	
	

	Behavior = BuildingBehavior ModuleTag_Building
		NightWindowName	= N_WINDOW N_GLOW
		;GlowWindowName	=
		;FireWindowName	=
		;FireName		=
	End 
 
	;CommandSet = SellableCommandSet

	Geometry              = CYLINDER
	GeometryMajorRadius   = 40
	GeometryMinorRadius   = 40  
	GeometryHeight        = 76F
	GeometryOffset		= X:0 Y:0 Z:0 
	GeometryIsSmall       = No
	Shadow                = SHADOW_VOLUME
	BuildCompletion     	= PLACED_BY_PLAYER
  
  	GeometryContactPoint	= X:-33		Y:10		Z:0		Repair
	GeometryContactPoint	= X:30		Y:10		Z:0		Repair
End
;------------------------------------------------------------------------------------------
ChildObject  AmonSulSunFlareMallorn AmonSulMallornTree

  DisplayName			= OBJECT:MallornSunFlare

END

;------------------------------------------------------------------------------------------
ChildObject  AmonSulCloudBreakMallorn AmonSulMallornTree

  DisplayName			= OBJECT:MallornCloudBreak

END

;------------------------------------------------------------------------------------------
ChildObject  AmonSulRebuildMallorn AmonSulMallornTree

  DisplayName			= OBJECT:MallornRebuild

END

;------------------------------------------------------------------------------------------
ChildObject  AmonSulSummonMallorn AmonSulMallornTree

  DisplayName			= OBJECT:MallornSummon

END

;------------------------------------------------------------------------------------------
ChildObject  AmonSulElvenWoodMallorn AmonSulMallornTree

  DisplayName			= OBJECT:MallornElvenWood

END




