;------------------------------------------------------------------------------ 
;Helms Deep Gate
Object HelmsDeepGate

	SelectPortrait = BPCHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes

    DefaultModelConditionState
      Model = RBHDIGateTemp		
    End
    
	IdleAnimationState
		Animation = IDLE
			AnimationName			=	RBHDIGateTemp.RBHDIGateTemp
			AnimationMode			=	ONCE	
			AnimationBlendTime		= 0
		End		
	End	
	    
        ;--damaged building
    ModelConditionState  = DESTROYED_FRONT
      Model         = RBHDIGateTemp  
;		ParticleSysBone FireSmall01 FireBuildingSmall
    End
    AnimationState = DESTROYED_FRONT
;      BeginScript
;        CurDrawableHideSubObject("GBBARRACKSDP1")
;      EndScript
    End
    
    ModelConditionState  = DESTROYED_RIGHT
      Model         = RBHDIGateTemp  
;		ParticleSysBone FireSmall01 FireBuildingSmall
    End

    AnimationState = DESTROYED_RIGHT
;      BeginScript
;        CurDrawableHideSubObject("GBBARRACKSDP2")
;      EndScript
    End
    

    ModelConditionState  = DESTROYED_BACK
      Model         = RBHDIGateTemp  
;		ParticleSysBone FireSmall01 FireBuildingSmall
    End

    AnimationState = DESTROYED_BACK
;      BeginScript
;        CurDrawableHideSubObject("GBBARRACKSDP3")
;      EndScript
    End

	ModelConditionState  = DESTROYED_LEFT
      Model         = RBHDIGateTemp  
;		ParticleSysBone FireSmall01 FireBuildingSmall
    End
    
    AnimationState = DESTROYED_LEFT
;      BeginScript
;        CurDrawableHideSubObject("GBBARRACKSDP4")
;      EndScript
    End
    
    
    ModelConditionState  = DAMAGED
      Model         = RBHDIGateTemp  
;		ParticleSysBone FireSmall01 FireBuildingSmall
    End
    AnimationState = DAMAGED
	EnteringStateFX	= FX_BuildingDamaged
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = RBHDIGateTemp  
;		ParticleSysBone FireSmall01 FireBuildingSmall
    End
    AnimationState = REALLYDAMAGED
	EnteringStateFX	= FX_BuildingReallyDamaged
    End

    ModelConditionState  = RUBBLE
      Model         = RBHDIGateTemp  
 ;     ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End
    
    AnimationState = RUBBLE
      BeginScript
 ;       CurDrawableHideSubObject("GBBARRACKSDP1")
 ;       CurDrawableHideSubObject("GBBARRACKSDP2")
 ;       CurDrawableHideSubObject("GBBARRACKSDP3")
 ;       CurDrawableHideSubObject("GBBARRACKSDP4")
      EndScript
    End

    ModelConditionState  = POST_RUBBLE
		Model         = None
		ParticleSysBone NONE SmokeBuildingMediumRubble
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
		ParticleSysBone NONE SmokeBuildingMediumRubble
    End

    
End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:RBHelmsDeepGateDoorBig
  Side                = Obsolete
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 500
  BuildTime           = 15.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160


;  CommandSet          = GondorBarracksCommandSet

 
  ; *** AUDIO Parameters ***

	SoundOnDamaged		= BuildingLightDamageStone
	SoundOnReallyDamaged	= BuildingHeavyDamageStone

	;  VoiceSelect         = GondorBarracksSelect
	 
	;  UnitSpecificSounds
	;  UnderConstruction     = UnderConstructionLoop
	;  End
 

	; *** ENGINEERING Parameters ***

  RadarPriority       = NOT_ON_RADAR
	KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE IGNORE_FOR_VICTORY NEVER_CULL_FOR_MP DONT_HIDE_IF_FOGGED


	Body						= ActiveBody ModuleTag_05
		MaxHealth				= 1000.0
		MaxHealthDamaged		= 700.0
		MaxHealthReallyDamaged  = 300.0
	End

	ArmorSet
		Conditions        = None
		Armor             = DefaultWallArmor
		DamageFX          = GateDamageFX
	End

	Behavior = ProductionUpdate ModuleTag_06
		; nothing
	End
  
	Behavior                  = StructureCollapseUpdate ModuleTag_08
		MinCollapseDelay        = 000
		MaxCollapseDelay        = 000
		CollapseDamping         = .5
		MaxShudder              = 0.6
		MinBurstDelay           = 250
		MaxBurstDelay           = 800
		BigBurstFrequency       = 4
		FXList                  = INITIAL   FX_StructureMediumCollapse
		FXList                  = ALMOST_FINAL  FX_StructureAlmostCollapse
		DestroyObjectWhenDone	= Yes
		CollapseHeight			= 155
	End
	
	Behavior = FakePathfindPortalBehaviour ModuleTag_FAKEPATHFIND
		AllowEnemies			= No
		AllowNonSkirmishAIUnits	= No
	End
	
	Behavior = AIGateUpdate ModuleTage_AIGateUpdate
		TriggerWidthX = 450.0
		TriggerWidthY = 225.0
	End
  
	AttackContactPoint = X:-24 Y:-24 Z:92

	Geometry              = BOX
	GeometryMajorRadius   = 80.0
	GeometryMinorRadius   = 16.0
	GeometryHeight        = 60
;  GeometryOffset		= X:0 Y:-28 Z:0
	GeometryIsSmall       = No
	  
	Shadow                = SHADOW_VOLUME
End

;------------------------------------------------------------------------------
;Helms Deep Arcade
Object HelmsDeepArcade

	SelectPortrait = BPCHelmsDeepArcade
 
	; *** ART Parameters ***
	;  SelectPortrait         = SNReactor_L
	;  ButtonImage            = SNReactor
	;day

	Draw = W3DScriptedModelDraw ModuleTag_Draw
	  
		ExtraPublicBone = ARROW_01
		ExtraPublicBone = ARROW_02
		ExtraPublicBone = ARROW_03
		ExtraPublicBone = ARROW_04
		ExtraPublicBone = ARROW_05
		ExtraPublicBone = ARROW_06
		ExtraPublicBone = ARROW_07
		ExtraPublicBone = ARROW_08
		ExtraPublicBone = ARROW_09
		ExtraPublicBone = ARROW_10
		ExtraPublicBone = ARROW_11
		ExtraPublicBone = ARROW_12
		ExtraPublicBone = OBJECT05
  
		OkToChangeModelColor  = Yes
		UseStandardModelNames = Yes
		DefaultModelConditionState
		Model = RBHDArcade
		End
	    
		;--damaged building
	  
		ModelConditionState  = DAMAGED
		Model         = RBHDArcade_D2  
		End
		AnimationState = DAMAGED
				Animation			=	DamagedAnimation
				AnimationName		=	 RBHDArcade_D2.RBHDArcade_D2
				AnimationMode		=	ONCE
   			End
			EnteringStateFX	= FX_BuildingDamaged
		End	    
		
		ModelConditionState  = REALLYDAMAGED
			Model         = RBHDArcade_D3
		End
		AnimationState = REALLYDAMAGED
       			Animation				=	ReallyDamagedAnimation
				AnimationName		=	 RBHDArcade_D3.RBHDArcade_D3
				AnimationMode		=	ONCE
   			End
			EnteringStateFX	= FX_BuildingReallyDamaged
		End
    
		ModelConditionState  = RUBBLE
			Model         = RBHDArcade_D4  
			ParticleSysBone OBJECT05 FireBuildingLarge
			ParticleSysBone OBJECT05 SmokeBuildingLarge
		End
		AnimationState = RUBBLE
       		Animation				=	RubbleAnimation
				AnimationName		=	 RBHDArcade_D4.RBHDArcade_D4
				AnimationMode		=	ONCE
   			End
			EnteringStateFX = FX_MinWallATransitionReallyDamaged
		End
			    
	        
	End
	  
	PlacementViewAngle  = 0
 
	; ***DESIGN parameters ***
	DisplayName         = OBJECT:HelmsDeepArcade
	Side                = Obsolete
	EditorSorting       = STRUCTURE
	Browser = REGION Helms_Deep STRUCTURE
	ThreatLevel = 10.0
	 
	BuildCost           = 500
	BuildTime           = 120.0           ; in seconds
	VisionRange         = 160.0          ; Shroud clearing distance
	ShroudClearingRange = 160

	ArmorSet
		Conditions        = None
		Armor             = StructureArmor
		DamageFX          = None
	End

	CommandSet			= HelmsDeepArcadeCommandSet


	; *** AUDIO Parameters ***

	#include "..\Includes\StandardBuildingEvaEvents.inc"

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone
	VoiceSelect = MenFortressSelect

	CampnessValue = CAMPNESS_ALWAYS_CAMP  ; This is always a camp for the owner

	;  VoiceSelect         = NuclearReactorSelect
	 
	;  UnitSpecificSounds
	;  UnderConstruction     = UnderConstructionLoop
	;  End

 
	; *** ENGINEERING Parameters ***
	
	RadarPriority       = STRUCTURE
	KindOf              = VITAL_FOR_BASE_SURVIVAL PRELOAD SELECTABLE STRUCTURE IMMOBILE SCORE CASTLE_KEEP MP_COUNT_FOR_VICTORY CAN_ATTACK FS_FACTORY AUTO_RALLYPOINT DOZER_FACTORY NEVER_CULL_FOR_MP COMMANDCENTER

	Behavior = GettingBuiltBehavior ModuleTag_GBB
		WorkerName	= GondorWorkerNoSelect
		SpawnTimer  = 120
		RebuildWhenDead = Yes
	End

	Body                  = ActiveBody ModuleTag_B_03
		MaxHealth       = 6000.0
		MaxHealthDamaged = 3500
		MaxHealthReallyDamaged = 2000
	End
  
  	//-----------------------------------------------
	//Used for hero revival and initial construction     
	Behavior = ProductionUpdate ProductionUpdateModuleTag
		// nothing, but is required if we have any Object-level Upgrades!
	End
	Behavior = QueueProductionExitUpdate ModuleTag_QueuePEU
		UnitCreatePoint		= X:0.0 Y:0.0 Z:0.0
		NaturalRallyPoint	= X:0.0 Y:-50.0 Z:0.0	//NaturalRallyPointX must always match GeometryMajorRadius! 
		ExitDelay			= 300					//Handles delays between units if multiple produced at a time. 
	End  
	//-----------------------------------------------

	//Commandset upgrades based on faction.  This is so the building will produce the proper units when necessary
	Behavior = CommandSetUpgrade ModuleTag_CommandSetDwarven
		TriggeredBy	= Upgrade_DwarfFaction
		CommandSet	= DwarvenMonumentFortressCommandSet
	End
	Behavior = CommandSetUpgrade ModuleTag_CommandSetMen
		TriggeredBy	= Upgrade_MenFaction
		CommandSet	= MenMonumentFortressCommandSet
	End
	Behavior = CommandSetUpgrade ModuleTag_CommandSetElven
		TriggeredBy	= Upgrade_ElfFaction
		CommandSet	= ElvenMonumentFortressCommandSet
	End
	Behavior = CommandSetUpgrade ModuleTag_CommandSetIsengard
		TriggeredBy	= Upgrade_IsengardFaction
		CommandSet	= IsengardMonumentFortressCommandSet
	End
	Behavior = CommandSetUpgrade ModuleTag_CommandSetMordor
		TriggeredBy	= Upgrade_MordorFaction
		CommandSet	= MordorMonumentFortressCommandSet
	End
	Behavior = CommandSetUpgrade ModuleTag_CommandSetWild
		TriggeredBy	= Upgrade_WildFaction
		CommandSet	= WildMonumentFortressCommandSet
	End
	Behavior = CommandSetUpgrade ModuleTag_CommandSetAngmar
		TriggeredBy	= Upgrade_AngmarFaction
		CommandSet	= AngmarMonumentFortressCommandSet
	End
	Behavior = CommandSetUpgrade ModuleTag_CommandSetArnor
		TriggeredBy	= Upgrade_ArnorFaction
		CommandSet	= ArnorMonumentFortressCommandSet
	End
	//End Commandset upgrades

	Behavior = AutoDepositUpdate AutoDepositModuleTag
		DepositTiming       	= GENERIC_KEEP_MONEY_TIME
		DepositAmount       	= 100 
		InitialCaptureBonus 	= 0  // no initial bonus
	End

	Behavior = CitadelSlaughterHordeContain ModuleTag_SlaughterMe
		PassengerFilter					= GENERIC_FACTION_SLAUGHTERABLE
		ObjectStatusOfContained			= UNSELECTABLE
		CashBackPercent					= 20%		
		ContainMax						= 99	;// give it a huge capacity, just in case player sends his whole army in at once
		AllowEnemiesInside				= No
		AllowNeutralInside				= No
		EnterSound						= MordorSlaughterhouseEnterSound
		EntryOffset						= X:0.0   Y:-50.0 Z:0.0
		EntryPosition					= X:0.0   Y:0.0 Z:0.0		// entry position needs to be offset from the root transform, otherwise fortress obscures point.
		ExitOffset						= X:0.0   Y:-50.0 Z:0.0

		StatusForRingEntry				= HOLDING_THE_RING
		UpgradeForRingEntry				= Upgrade_RingHero Upgrade_FortressRingHero
		ObjectToDestroyForRingEntry		= NONE +TheDroppedRing
		FXForRingEntry					= FX_OneRingFlare
	End

	#include "..\FortressRingFunc.inc"

	Geometry              = BOX
	GeometryMajorRadius   = 105.0
	GeometryMinorRadius   = 37.5
	GeometryHeight        = 100.0
	GeometryOffset		  = X:0 Y:30 Z:0
	GeometryIsSmall       = No
	Shadow                = SHADOW_VOLUME
End

;------------------------------------------------------------------------------
;Helms Deep Arcade
Object WOR_HelmsDeepArcade

	SelectPortrait = BPCHelmsDeepArcade
 
	; *** ART Parameters ***
	;  SelectPortrait         = SNReactor_L
	;  ButtonImage            = SNReactor
	;day

	Draw = W3DScriptedModelDraw ModuleTag_Draw
	  
		ExtraPublicBone = ARROW_01
		ExtraPublicBone = ARROW_02
		ExtraPublicBone = ARROW_03
		ExtraPublicBone = ARROW_04
		ExtraPublicBone = ARROW_05
		ExtraPublicBone = ARROW_06
		ExtraPublicBone = ARROW_07
		ExtraPublicBone = ARROW_08
		ExtraPublicBone = ARROW_09
		ExtraPublicBone = ARROW_10
		ExtraPublicBone = ARROW_11
		ExtraPublicBone = ARROW_12
		ExtraPublicBone = OBJECT05
  
		OkToChangeModelColor  = Yes
		UseStandardModelNames = Yes
		DefaultModelConditionState
		Model = RBHDArcade
		End
		
		 ;-------------build up
        
        ModelConditionState   = AWAITING_CONSTRUCTION
			Model               = RBHDArcade_A
		End
		AnimationState        = AWAITING_CONSTRUCTION
			Animation
				AnimationName	=RBHDArcade_A.RBHDArcade_A
				AnimationMode	= MANUAL
			End
			Flags				= START_FRAME_FIRST
		End
		
		ModelConditionState		=	ACTIVELY_BEING_CONSTRUCTED
			Model				=	RBHDArcade_A
		End;
		AnimationState        = ACTIVELY_BEING_CONSTRUCTED
			Animation
				AnimationName     = RBHDArcade_A.RBHDArcade_A
				AnimationMode     = MANUAL
			End
			Flags				= START_FRAME_FIRST
			StateName			= BeingConstructed
		End
	    
		;--damaged building
	  
		ModelConditionState  = DAMAGED
		Model         = RBHDArcade_D2  
		End
		AnimationState = DAMAGED
				Animation			=	DamagedAnimation
				AnimationName		=	 RBHDArcade_D2.RBHDArcade_D2
				AnimationMode		=	ONCE
   			End
			EnteringStateFX	= FX_BuildingDamaged
		End	    
		
		ModelConditionState  = REALLYDAMAGED
			Model         = RBHDArcade_D3
		End
		AnimationState = REALLYDAMAGED
       			Animation				=	ReallyDamagedAnimation
				AnimationName		=	 RBHDArcade_D3.RBHDArcade_D3
				AnimationMode		=	ONCE
   			End
			EnteringStateFX	= FX_BuildingReallyDamaged
		End
    
		ModelConditionState  = RUBBLE
			Model         = RBHDArcade_D4  
			ParticleSysBone OBJECT05 FireBuildingLarge
			ParticleSysBone OBJECT05 SmokeBuildingLarge
		End
		AnimationState = RUBBLE
       		Animation				=	RubbleAnimation
				AnimationName		=	 RBHDArcade_D4.RBHDArcade_D4
				AnimationMode		=	ONCE
   			End
			EnteringStateFX = FX_MinWallATransitionReallyDamaged
		End
			    
	        
	End
	  
	PlacementViewAngle  = 0
 
 
; ***DESIGN parameters ***
	DisplayName		= OBJECT:HelmsDeepArcade
	Side			= WOR
	EditorSorting		= STRUCTURE
	Browser 		= REGION Helms_Deep STRUCTURE
	ThreatLevel		= 1.0
	BuildCost		= 5000
	BuildTime		= 120.0		; in seconds
	VisionRange		= 400		; 160.0
	ShroudClearingRange	= 800		; 160

	ArmorSet
		Conditions	= None
		Armor		= StructureArmor
		DamageFX	= None
	End

	CommandSet		= HelmsDeepArcadeRebuildCommandSet


; *** AUDIO Parameters ***
	#include "..\Includes\StandardBuildingEvaEvents.inc"

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone
	VoiceSelect = MenFortressSelect

	CampnessValue = CAMPNESS_ALWAYS_CAMP  ; This is always a camp for the owner

	;  VoiceSelect         = NuclearReactorSelect
	 
	;  UnitSpecificSounds
	;  UnderConstruction     = UnderConstructionLoop
	;  End

 
; *** ENGINEERING Parameters ***
	KindOf			= VITAL_FOR_BASE_SURVIVAL PRELOAD SELECTABLE STRUCTURE IMMOBILE SCORE CASTLE_KEEP MP_COUNT_FOR_VICTORY CAN_ATTACK FS_FACTORY AUTO_RALLYPOINT DOZER_FACTORY NEVER_CULL_FOR_MP COMMANDCENTER DONT_HIDE_IF_FOGGED
	RadarPriority		= STRUCTURE
	KeepSelectableWhenDead	= Yes

	//Commandset upgrades based on faction.  This is so the building will produce the proper units when necessary
	Behavior = CommandSetUpgrade ModuleTag_CommandSetMen
		TriggeredBy	= Upgrade_MenFaction
		CommandSet	= MenMonumentFortressRebuildCommandSet
	End
	Behavior = CommandSetUpgrade ModuleTag_CommandSetElven
		TriggeredBy	= Upgrade_ElfFaction
		CommandSet	= ElvenMonumentFortressRebuildCommandSet
	End
	Behavior = CommandSetUpgrade ModuleTag_CommandSetDwarven
		TriggeredBy	= Upgrade_DwarfFaction
		CommandSet	= DwarvenMonumentFortressRebuildCommandSet
	End
	Behavior = CommandSetUpgrade ModuleTag_CommandSetMordor
		TriggeredBy	= Upgrade_MordorFaction
		CommandSet	= MordorMonumentFortressRebuildCommandSet
	End
	Behavior = CommandSetUpgrade ModuleTag_CommandSetIsengard
		TriggeredBy	= Upgrade_IsengardFaction
		CommandSet	= IsengardMonumentFortressRebuildCommandSet
	End
	Behavior = CommandSetUpgrade ModuleTag_CommandSetWild
		TriggeredBy	= Upgrade_WildFaction
		CommandSet	= WildMonumentFortressRebuildCommandSet
	End
	Behavior = CommandSetUpgrade ModuleTag_CommandSetAngmar
		TriggeredBy	= Upgrade_AngmarFaction
		CommandSet	= AngmarMonumentFortressCommandSet
	End
	Behavior = CommandSetUpgrade ModuleTag_CommandSetArnor
		TriggeredBy	= Upgrade_ArnorFaction
		CommandSet	= ArnorMonumentFortressCommandSet
	End
	//End Commandset upgrades

  	//-----------------------------------------------
	//Used for hero revival and initial construction     
	Behavior = ProductionUpdate ProductionUpdateModuleTag
		// nothing, but is required if we have any Object-level Upgrades!
	End
	
	Behavior = QueueProductionExitUpdate ModuleTag_QueuePEU
		UnitCreatePoint			= X:0.0 Y:0.0 Z:0.0
		NaturalRallyPoint		= X:0.0 Y:-50.0 Z:0.0			; NaturalRallyPointX must always match GeometryMajorRadius!
		ExitDelay			= 300					; Handles delays between units if multiple produced at a time.
		AllowAirborneCreation		= Yes
	End  
	//-----------------------------------------------

	Behavior = GettingBuiltBehavior GetBuiltBehaviorTag
		SelfBuildingLoop		= BuildingConstructionLoop		; Only played if we DON'T spawn a worker
		SelfRepairFromDamageLoop	= NoSound				; This doesn't cause an animation, so don't bother playing a sound
		SelfRepairFromRubbleLoop	= BuildingConstructionLoop
		SpawnTimer			= -1.0					; Negative means no 'autoheal'
		RebuildTimeSeconds		= 120
	End

	Body = ActiveBody ModuleTag_B_03
		MaxHealth			= MONUMENT_FORTRESS_HEALTH
		MaxHealthDamaged		= MONUMENT_FORTRESS_HEALTH_DAMAGED
		MaxHealthReallyDamaged		= MONUMENT_FORTRESS_HEALT_REALLY_DAMAGED
	End
  
	; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
	; never truly destroyed, even when reduced to zero health. Also note that garrisonable
	; buildings automatically stick around because GarrisonContain has it's own DieModule
	Behavior = KeepObjectDie ModuleTag_IWantRubble
	End

	Behavior = AutoDepositUpdate AutoDepositModuleTag
		DepositTiming       		= GENERIC_KEEP_MONEY_TIME
		DepositAmount       		= GENERIC_KEEP_MONEY_AMOUNT
		InitialCaptureBonus 		= 0	// no initial bonus
	End

	Behavior = TerrainResourceBehavior ModuleTag_NewMoneyDeadSpot
		Radius				= GENERIC_KEEP_MONEY_RANGE		; How far we try to claim ground
		MaxIncome			= 0					; If we were to get all we wanted, how much we would earn.  Linear slope to 0 at 0% claim
		IncomeInterval			= 999999				; How often (in msec) we give that much money
		HighPriority			= Yes					; A high priority claim gets to pretend it was there first.
	End

	Behavior = CitadelSlaughterHordeContain ModuleTag_SlaughterMe
		PassengerFilter			= GENERIC_FACTION_SLAUGHTERABLE
		ObjectStatusOfContained		= UNSELECTABLE
		CashBackPercent			= 20%		
		ContainMax			= 99					; give it a huge capacity, just in case player sends his whole army in at once
		AllowEnemiesInside		= No
		AllowNeutralInside		= No
		EnterSound			= MordorSlaughterhouseEnterSound
		EntryOffset			= X:0.0   Y:-50.0 Z:0.0
		EntryPosition			= X:0.0   Y:0.0 Z:0.0			; entry position needs to be offset from the root transform, otherwise fortress obscures point.
		ExitOffset			= X:0.0   Y:-50.0 Z:0.0

		StatusForRingEntry		= HOLDING_THE_RING
		UpgradeForRingEntry		= Upgrade_RingHero Upgrade_FortressRingHero
		ObjectToDestroyForRingEntry	= NONE +TheDroppedRing
		FXForRingEntry			= FX_OneRingFlare
	End
	
	#include "..\FortressRingFunc.inc"

	Geometry		= BOX
	GeometryMajorRadius	= 105.0
	GeometryMinorRadius	= 37.5
	GeometryHeight		= 100.0
	GeometryOffset		= X:0 Y:30 Z:0
	GeometryIsSmall		= No
	Shadow			= SHADOW_VOLUME
End


;------------------------------------------------------------------------------
;Helms Deep Culvert
Object HelmsDeepCulvert

SelectPortrait = BPCHelmsDeep
 
	; *** ART Parameters ***
	;  SelectPortrait         = SNReactor_L
	;  ButtonImage            = SNReactor
	;day

	;----------------------------------------------------------------------------------------------
	Draw = W3DScriptedModelDraw ModuleTag_Draw
		OkToChangeModelColor  = Yes
		UseStandardModelNames = Yes
		ExtraPublicBone = SIEGELADDER
       
		WallBoundsMesh = P1
		RampMesh1 = P2
		RampMesh2 = P3        
		
		DefaultModelConditionState
			Model = RBHDDWCulv
		End
		
		;--damaged building  
		ModelConditionState  = DAMAGED
		Model         = RBHDDWCulv_D1  
		End
	    
	    
		AnimationState = DAMAGED
		EnteringStateFX	= FX_BuildingDamaged
		End

		ModelConditionState  = REALLYDAMAGED
			Model         = RBHDDWCulv_D2
		End
		AnimationState = REALLYDAMAGED
       				Animation		=	ReallyDamagedanimation
				AnimationName		=	RBHDDWCulv_D2.RBHDDWCulv_D2
				AnimationMode		=	ONCE
				AnimationSpeedFactorRange = 0.5 0.5
			End
			EnteringStateFX = FX_MinWallATransitionReallyDamaged
		End

		ModelConditionState  = RUBBLE
		Model         = RBHDDWCulv_D3
		End
	    
		AnimationState = RUBBLE
			Animation				=	Death
				AnimationName		=	RBHDDWCulv_D3.RBHDDWCulv_D3
				AnimationMode		=	ONCE
				AnimationSpeedFactorRange = 0.5 0.5
			End
			EnteringStateFX = FX_MinWallATransitionRubble
		End      

		ModelConditionState  = POST_RUBBLE
			Model         = None
		End

		ModelConditionState  = POST_COLLAPSE
			Model         = None
		End
	End

	;----------------------------------------------------------------------------------------------
	Draw = W3DScriptedModelDraw Draw_PosternGate
		ExtraPublicBone = Post01
		ExtraPublicBone = Post02
		ExtraPublicBone = Post03
		ExtraPublicBone = Post04

		DefaultModelConditionState
			Model			= RBHDDWCulvPst
		End

		IdleAnimationState
			BeginScript
				CurDrawableHideModule("Draw_PosternGate")
			EndScript
		End

		AnimationState = RUBBLE
			BeginScript
				CurDrawableHideModule("Draw_PosternGate")
			EndScript
		End

		AnimationState = UPGRADE_POSTERN_GATE
			BeginScript
				CurDrawableShowModule("Draw_PosternGate")
			EndScript
			Animation
				AnimationName = RBHDDWCulvPst.RBHDDWCulvPst
				AnimationMode = ONCE
			End
			EnteringStateFX = FX_BuildingContructDustCulvert
		End
	End
  
	PlacementViewAngle  = 0
	 
	; ***DESIGN parameters ***
	DisplayName	= OBJECT:HelmsDeepCulvert
	Side			= Obsolete
	EditorSorting	= STRUCTURE
	Browser		= REGION Helms_Deep STRUCTURE
	ThreatLevel	= 1.0
	 
	BuildCost           = 1
	BuildTime           = 5.0           ; in seconds
	VisionRange         = 160.0          ; Shroud clearing distance
	ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone

;  VoiceSelect         = NuclearReactorSelect
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 

	; *** ENGINEERING Parameters ***

	RadarPriority	= NOT_ON_RADAR
	KindOf			= STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR NOT_AUTOACQUIRABLE SELECTABLE IGNORE_FOR_VICTORY NEVER_CULL_FOR_MP DONT_HIDE_IF_FOGGED
 	CommandSet		= PosternGateCommandSet

	; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
	; never truly destroyed, even when reduced to zero health. Also note that garrisonable
	; buildings automatically stick around because GarrisonContain has it's own DieModule
	Behavior = KeepObjectDie ModuleTag_IWantRubble
	End

	Behavior = SiegeDockingBehavior ModuleTag_SiegeDocking
	End
	
	Behavior = DynamicPortalBehaviour PosternGatePortal
		TriggeredBy				= Upgrade_PosternGate
		ConflictsWith			= Upgrade_OpenGarrison Upgrade_TrebuchetTurret
		CustomAnimAndDuration	= AnimState:UPGRADE_POSTERN_GATE AnimTime:0
		
		ObjectFilter	= POSTERNGATE_ALLOWABLE_OBJECTFILTER
		BonePrefix		= Post
		NumberOfBones	= 4
		WayPoint		= Index:0	Type:Walk	; 0
		WayPoint		= Index:1	Type:Walk	; 1
		WayPoint		= Index:2	Type:Walk	; 2
		WayPoint		= Index:3	Type:Walk	; 3
		WayPoint		= Index:2	Type:Walk	; 4
		WayPoint		= Index:1	Type:Walk	; 5
		Link			= From:0 Via:4 Via:5 To:3
		Link			= From:3 Via:1 Via:2 To:0
	End
	
	Behavior = ProductionUpdate ProductionUpdateModuleTag
		; nothing, but is required if we have any Object-level Upgrades!
	End

	Body                  = ActiveBody ModuleTag_B_03
		MaxHealth       = 6000.0
		MaxHealthDamaged = 3000
		MaxHealthReallyDamaged = 1000
	    
		GrabObject = EntThrownBuildingRock
		GrabFX = FX_WallGrab
		GrabDamage = 490
		GrabOffset = X:16 Y:0    
	End

	ArmorSet
		Conditions        = None
		Armor             = HelmsDeepWalls
		DamageFX          = None
	End

;	Behavior            = DestroyDie ModuleTag_07
;		;nothing
;	End
 
; 	Behavior = FireWeaponWhenDeadBehavior FireDeadTag1
;		DeathTypes		= ALL
;		StartsActive	= Yes
;		DeathWeapon		= WallDeath
;	End	
 
  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= HelmsDeepWallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

	GeometryContactPoint = X:80 Y:0 Z:60 Menu ;<-- where to draw the radial menu

	Geometry              = BOX
	GeometryMajorRadius   = 222.0
	GeometryMinorRadius   = 46.0
	GeometryHeight        = 62.0
	GeometryOffset		  = X:0 Y:12 Z:0	
	GeometryIsSmall       = No
	Shadow                = SHADOW_VOLUME
	
	;HelmsDeepCulvert Grab points for rock-wielding ents
	GeometryContactPoint = X:180  Y:65  Z:0 Grab
	GeometryContactPoint = X:180  Y:-40 Z:0 Grab
	GeometryContactPoint = X:180  Y:-30 Z:10 
	GeometryContactPoint = X:120  Y:-30 Z:60 
	GeometryContactPoint = X:60   Y:-30 Z:10 
	GeometryContactPoint = X:0    Y:-30 Z:60
	GeometryContactPoint = X:-60   Y:-30 Z:10
	GeometryContactPoint = X:-120  Y:-30 Z:60
	GeometryContactPoint = X:-180  Y:-30 Z:10 
	GeometryContactPoint = X:-180 Y:-40 Z:0 Grab
	GeometryContactPoint = X:-180 Y:60  Z:0 Grab
End



;------------------------------------------------------------------------------
;Helms Deep Section Ai
Object HelmsDeepSectionAi

SelectPortrait = BPCHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
	ExtraPublicBone = SIEGELADDER

    DefaultModelConditionState
      Model = RBHDDWSecA
    End

;--damaged building
  
    ModelConditionState  = DAMAGED
      Model         = RBHDDWSecA_D1  
    End
    
    
    AnimationState = DAMAGED
      EnteringStateFX = FX_MinWallATransitionDamaged
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = RBHDDWSecA_D2
    End
    AnimationState = REALLYDAMAGED
	       	Animation		=	ReallyDamagedanimation
		AnimationName		=	RBHDDWSecA_D2.RBHDDWSecA_D2
		AnimationMode		=	ONCE
            	AnimationSpeedFactorRange = 0.5 0.5
   	End
    End

    ModelConditionState  = RUBBLE
      Model         = RBHDDWSecA_D3
    End
    
    AnimationState = RUBBLE
		Animation				=	Death
			AnimationName		=	RBHDDWSecA_D3.RBHDDWSecA_D3
			AnimationMode		=	ONCE
            AnimationSpeedFactorRange = 0.5 0.5
		End
        EnteringStateFX = FX_MinWallATransitionRubble
    End      

    ModelConditionState  = POST_RUBBLE
		Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
    End
    
    WallBoundsMesh = P1
        
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepSectionAi
  Side                = Obsolete
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone

;  VoiceSelect         = NuclearReactorSelect
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 

  ; *** ENGINEERING Parameters ***

  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR NOT_AUTOACQUIRABLE IGNORE_FOR_VICTORY NEVER_CULL_FOR_MP DONT_HIDE_IF_FOGGED;SELECTABLE;@1
 
	Behavior = SiegeDockingBehavior ModuleTag_SiegeDocking
	End

  Body                  = ActiveBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0    
  End
  
  ArmorSet
    Conditions        = None
    Armor             = HelmsDeepWalls
    DamageFX          = None
  End

	; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
	; never truly destroyed, even when reduced to zero health. Also note that garrisonable
	; buildings automatically stick around because GarrisonContain has it's own DieModule
	Behavior = KeepObjectDie ModuleTag_IWantRubble
	End

;  Behavior            = DestroyDie ModuleTag_07
;    ;nothing
;  End
 
  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= HelmsDeepWallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

; 	Behavior = FireWeaponWhenDeadBehavior FireDeadTag1
;		DeathTypes		= ALL
;		StartsActive	= Yes
;		DeathWeapon		= WallDeath
;	End	

	Geometry              = BOX
	GeometryMajorRadius   = 115.0
	GeometryMinorRadius   = 50.0
	GeometryHeight        = 60.0
	GeometryOffset		  = X:0 Y:15.0 Z:0
	
	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 60.0
	GeometryOffset		  = X:64 Y:20.0 Z:0
	
	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 60.0
	GeometryOffset		  = X:-64 Y:20.0 Z:0
	
	
	GeometryIsSmall       = No
	Shadow                = SHADOW_VOLUME
  
  	GeometryContactPoint = X:-90  Y:70  Z:0 Grab
	GeometryContactPoint = X:-90  Y:-40 Z:0 Grab
	GeometryContactPoint = X:-90  Y:-30 Z:10 
	GeometryContactPoint = X:-60  Y:-30 Z:60 
	GeometryContactPoint = X:-30   Y:-30 Z:10 
	GeometryContactPoint = X:0    Y:-30 Z:60
	GeometryContactPoint = X:30   Y:-30 Z:10
	GeometryContactPoint = X:60  Y:-30 Z:60
	GeometryContactPoint = X:90  Y:-30 Z:10 
	GeometryContactPoint = X:90 Y:-40 Z:0 Grab
	GeometryContactPoint = X:90 Y:70  Z:0 Grab
End


;------------------------------------------------------------------------------
;Helms Deep Section B
Object HelmsDeepSectionB

SelectPortrait = BPCHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
	ExtraPublicBone = SIEGELADDER

    DefaultModelConditionState
      Model = RBHDDWSecB
    End
    
    ;--damaged building
  
    ModelConditionState  = DAMAGED
      Model         = RBHDDWSecB_D1  
    End
    
    
    AnimationState = DAMAGED
      EnteringStateFX = FX_MinWallATransitionDamaged
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = RBHDDWSecB_D2
    End
    AnimationState = REALLYDAMAGED
       		Animation		=	ReallyDamagedanimation
		AnimationName		=	RBHDDWSecB_D2.RBHDDWSecB_D2
		AnimationMode		=	ONCE
        	AnimationSpeedFactorRange = 0.5 0.5
   	End
        EnteringStateFX = FX_MinWallATransitionReallyDamaged
    End

    ModelConditionState  = RUBBLE
      Model         = RBHDDWSecB_D3
    End
    
    AnimationState = RUBBLE
		Animation				=	Death
			AnimationName		=	RBHDDWSecB_D3.RBHDDWSecB_D3
			AnimationMode		=	ONCE
            AnimationSpeedFactorRange = 0.5 0.5
		End
        EnteringStateFX = FX_MinWallATransitionRubble
    End      

    ModelConditionState  = POST_RUBBLE
		Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
    End
            
    WallBoundsMesh = P1
    
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepSectionB
  Side                = Obsolete
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone

;  VoiceSelect         = NuclearReactorSelect
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 

  ; *** ENGINEERING Parameters ***

  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR NOT_AUTOACQUIRABLE IGNORE_FOR_VICTORY NEVER_CULL_FOR_MP DONT_HIDE_IF_FOGGED;SELECTABLE;@1 
 
	Behavior = SiegeDockingBehavior ModuleTag_SiegeDocking
	End

  Body                  = ActiveBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0    
  End

  ArmorSet
    Conditions        = None
    Armor             = HelmsDeepWalls
    DamageFX          = None
  End

	; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
	; never truly destroyed, even when reduced to zero health. Also note that garrisonable
	; buildings automatically stick around because GarrisonContain has it's own DieModule
	Behavior = KeepObjectDie ModuleTag_IWantRubble
	End

;  Behavior            = DestroyDie ModuleTag_07
;    ;nothing
;  End
 
  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= HelmsDeepWallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

	Geometry              = BOX
	GeometryMajorRadius   = 115.0
	GeometryMinorRadius   = 60.0
	GeometryHeight        = 70.0
	GeometryOffset		= X:0 Y:18.0 Z:0
	
	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 60.0
	GeometryOffset		  = X:0 Y:35.0 Z:0

	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 60.0
	GeometryOffset		  = X:75.0 Y:35.0 Z:0

	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 60.0
	GeometryOffset		  = X:-79.0 Y:32.0 Z:0	
	
	GeometryIsSmall       = No
	Shadow                = SHADOW_VOLUME
  
	GeometryContactPoint = X:75  Y:80  Z:0 Grab
	GeometryContactPoint = X:85  Y:-50  Z:0 Grab
	GeometryContactPoint = X:85  Y:-35  Z:10
	GeometryContactPoint = X:55  Y:-35  Z:60
	GeometryContactPoint = X:25  Y:-35  Z:10
	GeometryContactPoint = X:0     Y:-20  Z:60
	GeometryContactPoint = X:-25 Y:-20  Z:10
	GeometryContactPoint = X:-55 Y:-20  Z:60
	GeometryContactPoint = X:-75 Y:-20  Z:10
	GeometryContactPoint = X:-75   Y:-25  Z:0 Grab
	GeometryContactPoint = X:-75  Y:80  Z:0 Grab
End


;------------------------------------------------------------------------------
;Helms Deep Section C
Object HelmsDeepSectionC

SelectPortrait = BPCHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes

    DefaultModelConditionState
      Model = RBHDDWSecC
    End
    
    ;--damaged building
  
    ModelConditionState  = DAMAGED
      Model         = RBHDDWSecC_D1  
    End
    
    
    AnimationState = DAMAGED
      EnteringStateFX = FX_MinWallATransitionDamaged
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = RBHDDWSecC_D2
    End
    AnimationState = REALLYDAMAGED
       		Animation				=	ReallyDamagedanimation
		AnimationName		=	 RBHDDWSecC_D2.RBHDDWSecC_D2
		AnimationMode		=	ONCE
                AnimationSpeedFactorRange = 0.5 0.5
   	End
        EnteringStateFX = FX_MinWallATransitionReallyDamaged
    End

    ModelConditionState  = RUBBLE
      Model         = RBHDDWSecC_D3
    End
    
    AnimationState = RUBBLE
		Animation				=	Death
			AnimationName		=	RBHDDWSecC_D3.RBHDDWSecC_D3
			AnimationMode		=	ONCE
            AnimationSpeedFactorRange = 0.5 0.5
		End
        EnteringStateFX = FX_MinWallATransitionRubble
    End      

    ModelConditionState  = POST_RUBBLE
		Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
    End
          
    WallBoundsMesh = P2
    RampMesh1 = P1
    
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepSectionC
  Side                = Obsolete
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone

;  VoiceSelect         = NuclearReactorSelect
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 

  ; *** ENGINEERING Parameters ***

  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR NOT_AUTOACQUIRABLE IGNORED_IN_GUI IGNORE_FOR_VICTORY NEVER_CULL_FOR_MP DONT_HIDE_IF_FOGGED;SELECTABLE;@1
 
  ; Immortal because they can't be destroyed, only damaged.  
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0    
  End

  ArmorSet
    Conditions        = None
    Armor             = HelmsDeepWalls
    DamageFX          = None
  End

	; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
	; never truly destroyed, even when reduced to zero health. Also note that garrisonable
	; buildings automatically stick around because GarrisonContain has it's own DieModule
	Behavior = KeepObjectDie ModuleTag_IWantRubble
	End

;  Behavior            = DestroyDie ModuleTag_07
;    ;nothing
;  End
 
  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= HelmsDeepWallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

; 	Behavior = FireWeaponWhenDeadBehavior FireDeadTag1
;		DeathTypes		= ALL
;		StartsActive	= Yes
;		DeathWeapon		= WallDeath
;	End	

	Geometry              = BOX
	GeometryMajorRadius   = 110.0
	GeometryMinorRadius   = 50.0
	GeometryHeight        = 75.0
	GeometryOffset		= X:26 Y:11.0 Z:0

	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 70.0
	GeometryOffset		  = X:-50.0 Y:15.0 Z:0

	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 60.0
	GeometryOffset		  = X:50.0 Y:15.0 Z:0
			
	GeometryIsSmall       = No
	GeometryFrontAngle    = 90.0
	Shadow                = SHADOW_VOLUME
  
	GeometryContactPoint = X:30   Y:67  Z:0 Grab
	GeometryContactPoint = X:90  Y:-47 Z:0 Grab
	GeometryContactPoint = X:90  Y:-38 Z:10 
	GeometryContactPoint = X:20   Y:-38 Z:70
	GeometryContactPoint = X:0  Y:-38 Z:10
	GeometryContactPoint = X:-25 Y:-38 Z:70
	GeometryContactPoint = X:-50  Y:-38 Z:10
	GeometryContactPoint = X:-50  Y:-47 Z:0 Grab
	GeometryContactPoint = X:-50  Y:67  Z:0 Grab
End

;------------------------------------------------------------------------------
;Helms Deep  dw StairsA1
Object HelmsDeepdwStairsA1

SelectPortrait = BPCHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDDWSt1
    End
    
    ModelConditionState  = DAMAGED
      Model         = RBHDDWSt1_D1  
    End
    
    ModelConditionState  = REALLYDAMAGED
      Model         = RBHDDWSt1_D1  
    End
	
    ModelConditionState  = RUBBLE
      Model         = RBHDDWSt1_D4  
    End
    
    ModelConditionState  = POST_RUBBLE
		Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
    End
    
    WallBoundsMesh = P2
    RampMesh1 = P1
    
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepdwStairsA1
  Side                = Obsolete
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone

;  VoiceSelect         = NuclearReactorSelect
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 

  ; *** ENGINEERING Parameters ***

  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE IGNORED_IN_GUI IGNORE_FOR_VICTORY NEVER_CULL_FOR_MP DONT_HIDE_IF_FOGGED;SELECTABLE;@1
 
  ; Immortal because they can't be destroyed, only damaged.  
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0    
  End

  ArmorSet
    Conditions        = None
    Armor             = HelmsDeepWalls
    DamageFX          = None
  End

	; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
	; never truly destroyed, even when reduced to zero health. Also note that garrisonable
	; buildings automatically stick around because GarrisonContain has it's own DieModule
	Behavior = KeepObjectDie ModuleTag_IWantRubble
	End

;  Behavior            = DestroyDie ModuleTag_07
;    ;nothing
;  End
 
  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= HelmsDeepWallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

	Geometry              = BOX
	GeometryMajorRadius   = 85.0
	GeometryMinorRadius   = 50.0
	GeometryHeight        = 50.0
	GeometryOffset		= X:0 Y:0 Z:0
	GeometryIsSmall       = No
	Shadow                = SHADOW_VOLUME
	
	
	GeometryContactPoint = X:-15 Y:55  Z:0 Grab
	GeometryContactPoint = X:-15 Y:45  Z:0 
	GeometryContactPoint = X:-15 Y:45  Z:50 
	GeometryContactPoint = X:35 Y:-45  Z:50 
	GeometryContactPoint = X:85 Y:45  Z:50 
	GeometryContactPoint = X:85 Y:45  Z:0 
	GeometryContactPoint = X:85  Y:55  Z:0 Grab
	
End


;------------------------------------------------------------------------------
;Helms Deep  dw StairsA2
Object HelmsDeepdwStairsA2

SelectPortrait = BPCHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDDWSt2
    End
    
    ModelConditionState  = DAMAGED
      Model         = RBHDDWSt2_D1  
    End
    
    ModelConditionState  = REALLYDAMAGED
      Model         = RBHDDWSt2_D1  
    End
	
    ModelConditionState  = RUBBLE
      Model         = RBHDDWSt2_D4  
    End
    
    ModelConditionState  = POST_RUBBLE
		Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
    End
            
    WallBoundsMesh = P2
    RampMesh1 = P1
    
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepdwStairsA2
  Side                = Obsolete
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone

;  VoiceSelect         = NuclearReactorSelect
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End

 
  ; *** ENGINEERING Parameters ***

  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE  IGNORED_IN_GUI IGNORE_FOR_VICTORY NEVER_CULL_FOR_MP DONT_HIDE_IF_FOGGED;SELECTABLE;@1
 
  ; Immortal because they can't be destroyed, only damaged.  
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0    
  End

  ArmorSet
    Conditions        = None
    Armor             = HelmsDeepWalls
    DamageFX          = None
  End

	; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
	; never truly destroyed, even when reduced to zero health. Also note that garrisonable
	; buildings automatically stick around because GarrisonContain has it's own DieModule
	Behavior = KeepObjectDie ModuleTag_IWantRubble
	End

;  Behavior            = DestroyDie ModuleTag_07
;    ;nothing
;  End
 
  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= HelmsDeepWallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

	Geometry              = BOX
	GeometryMajorRadius   = 85.0
	GeometryMinorRadius   = 50.0
	GeometryHeight        = 50.0
	GeometryOffset		= X:0 Y:0 Z:0
	GeometryIsSmall       = No
	Shadow                = SHADOW_VOLUME
  
	GeometryContactPoint = X:-80 Y:55  Z:0 Grab
	GeometryContactPoint = X:-80 Y:45  Z:0 
	GeometryContactPoint = X:-80 Y:45  Z:50 
	GeometryContactPoint = X:-10 Y:-45  Z:50 
	GeometryContactPoint = X:65 Y:45  Z:50 
	GeometryContactPoint = X:65 Y:45  Z:0 
	GeometryContactPoint = X:65  Y:55  Z:0 Grab
End


;------------------------------------------------------------------------------
;Helms Deep Causeway
Object HelmsDeepCauseway

SelectPortrait = BPCHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDGatCy
    End
    
    ModelConditionState  = DAMAGED
      Model         = RBHDGatCy_D1  
    End
    
    ModelConditionState  = REALLYDAMAGED
      Model         = RBHDGatCy_D1  
    End
	
    ModelConditionState  = RUBBLE
      Model         = RBHDGatCy_D1  
    End
    
    ModelConditionState  = POST_RUBBLE
		Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
    End
                    
    RampMesh1 = P1
    
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepCauseway
  Side                = Obsolete
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone

;  VoiceSelect         = NuclearReactorSelect
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End

 
  ; *** ENGINEERING Parameters ***

  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR NOT_AUTOACQUIRABLE IGNORED_IN_GUI IGNORE_FOR_VICTORY NEVER_CULL_FOR_MP DONT_HIDE_IF_FOGGED;SELECTABLE;@1
 
  ; Immortal because they can't be destroyed, only damaged. 
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0    
  End

  ArmorSet
    Conditions        = None
    Armor             = InvulnerableArmor   ;HelmsDeepWalls
    DamageFX          = None
  End

  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End
 
; 	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
;		StartsActive	= Yes ;If no, requires upgrade to turn on.
;		BonusName		= WallBonus
;		RefreshDelay	= 2000
;		;Range			= 120		; Range is overridden to affect people on us since we are a wall
;		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
;	End	

  Geometry              = BOX
  GeometryMajorRadius   = 75.0
  GeometryMinorRadius   = 275.0
  GeometryHeight        = 25.0
  GeometryOffset		= X:17.0 Y:0 Z:0
  GeometryIsSmall       = No  
  
  Shadow                = SHADOW_VOLUME
End


;------------------------------------------------------------------------------
;Helms Deep Gatehouse
Object HelmsDeepGatehouseLeft

SelectPortrait = BPCHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day


	;----------------------------------------------------------------------------------------------
	Draw = W3DScriptedModelDraw ModuleTag_Draw
		OkToChangeModelColor  = Yes
		UseStandardModelNames = Yes
		
		DefaultModelConditionState
			Model = RBHDGatHsL
		End

		ModelConditionState  = DAMAGED
			Model         = RBHDGatHsL_D1  
		End

		ModelConditionState  = REALLYDAMAGED
			Model         = RBHDGatHsL_D1  
		End

		ModelConditionState  = RUBBLE
			Model         = RBHDGatHsL_D1  
		End

		ModelConditionState  = POST_RUBBLE
			Model         = None
		End

		ModelConditionState  = POST_COLLAPSE
			Model         = None
		End
                            
		WallBoundsMesh = P1
		RampMesh1 = P2
		RaisedWallMesh = P3
    End

	;----------------------------------------------------------------------------------------------
	Draw = W3DScriptedModelDraw Draw_PosternGate
		ExtraPublicBone = Post01
		ExtraPublicBone = Post02
		ExtraPublicBone = Post03
		ExtraPublicBone = Post04

		DefaultModelConditionState
			Model			= RBHDGatHsLPst
		End

		IdleAnimationState
			BeginScript
				CurDrawableHideModule("Draw_PosternGate")
			EndScript
		End

		AnimationState = UPGRADE_POSTERN_GATE
			BeginScript
				CurDrawableShowModule("Draw_PosternGate")
			EndScript
			Animation
				AnimationName = RBHDGatHsLPst.RBHDGatHsLPst
				AnimationMode = ONCE
			End
			EnteringStateFX = FX_BuildingContructDustCulvert
		End
	End
  
	PlacementViewAngle  = 0
 
	; ***DESIGN parameters ***
	DisplayName         = OBJECT:HelmsDeepGatehouseLeft
	Side                = Obsolete
	EditorSorting       = STRUCTURE
	Browser = REGION Helms_Deep STRUCTURE
	ThreatLevel = 1.0
 
	BuildCost           = 1
	BuildTime           = 5.0           ; in seconds
	VisionRange         = 160.0          ; Shroud clearing distance
	ShroudClearingRange = 160



; For Testing Purposes


  ; *** AUDIO Parameters ***

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone

;	VoiceSelect         = NuclearReactorSelect
 	
;	UnitSpecificSounds
;	UnderConstruction     = UnderConstructionLoop
;	End
 

	; *** ENGINEERING Parameters ***

	RadarPriority       = NOT_ON_RADAR
	KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR NOT_AUTOACQUIRABLE SELECTABLE IGNORED_IN_GUI IGNORE_FOR_VICTORY NEVER_CULL_FOR_MP DONT_HIDE_IF_FOGGED
	CommandSet			= PosternGateCommandSetMk2
	
	Behavior = DynamicPortalBehaviour PosternGatePortal
		TriggeredBy				= Upgrade_PosternGate
		ConflictsWith			= Upgrade_OpenGarrison Upgrade_TrebuchetTurret
		CustomAnimAndDuration	= AnimState:UPGRADE_POSTERN_GATE AnimTime:0
		
		ObjectFilter	= POSTERNGATE_ALLOWABLE_OBJECTFILTER
		BonePrefix		= Post
		NumberOfBones	= 4
		WayPoint		= Index:0	Type:Walk	; 0
		WayPoint		= Index:1	Type:Walk	; 1
		WayPoint		= Index:2	Type:Walk	; 2
		WayPoint		= Index:3	Type:Walk	; 3
		WayPoint		= Index:2	Type:Walk	; 4
		WayPoint		= Index:1	Type:Walk	; 5
		Link			= From:0 Via:4 Via:5 To:3
		Link			= From:3 Via:1 Via:2 To:0
	End
	
	Behavior = ProductionUpdate ProductionUpdateModuleTag
		; nothing, but is required if we have any Object-level Upgrades!
	End


  ; Immortal because they can't be destroyed, only damaged.  
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0    
  End

	ArmorSet
		Conditions        = None
		Armor             = HelmsDeepWalls
		DamageFX          = None
	End

  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= HelmsDeepWallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	


 ;GeometryContactPoint = X:40 Y:40 Z:10 
 ;GeometryContactPoint = X:0 Y:-20 Z:60 


  Geometry              = BOX
  GeometryMajorRadius   = 74.0
  GeometryMinorRadius   = 95.0
  GeometryHeight        = 140.0

	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 130.0
	GeometryOffset		  = X:-45.0 Y:0.0 Z:0	
	
	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 130.0
	GeometryOffset		  = X:45.0 Y:0.0 Z:0	  

	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 85.0
	GeometryOffset		  = X:-12.0 Y:-25.0 Z:0	

	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 85.0
	GeometryOffset		  = X:60.0 Y:40.0 Z:0	

	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 120.0
	GeometryOffset		  = X:-20.0 Y:40.0 Z:0		
  
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  
  GeometryContactPoint = X:-20  Y:-75 Z:0 Grab
  GeometryContactPoint = X:0    Y:40  Z:120
  GeometryContactPoint = X:55   Y:-35 Z:0 Grab
  ;GeometryContactPoint = X:60   Y:25  Z:85 Grab
  GeometryContactPoint = X:65 Y:60  Z:60 Menu ;<-- where to draw the radial menu
End


;------------------------------------------------------------------------------
;Helms Deep Gatehouse
Object HelmsDeepGatehouseRight

SelectPortrait = BPCHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDGatHsR
    End
    
    
    ModelConditionState  = DAMAGED
      Model         = RBHDGatHsR_D1  
    End
    
    ModelConditionState  = REALLYDAMAGED
      Model         = RBHDGatHsR_D1  
    End
	
    ModelConditionState  = RUBBLE
      Model         = RBHDGatHsR_D1   
    End
    
    ModelConditionState  = POST_RUBBLE
		Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
    End
                                    
    WallBoundsMesh = P1
    RampMesh1 = P2
    RaisedWallMesh = P3
    
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepGatehouseRight
  Side                = Obsolete
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone

;  VoiceSelect         = NuclearReactorSelect
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 

  ; *** ENGINEERING Parameters ***

  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE IGNORED_IN_GUI IGNORE_FOR_VICTORY NEVER_CULL_FOR_MP DONT_HIDE_IF_FOGGED ;SELECTABLE;@1
 
  ; Immortal because they can't be destroyed, only damaged.  
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0    
  End

  ArmorSet
    Conditions        = None
    Armor             = HelmsDeepWalls
    DamageFX          = None
  End

  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= HelmsDeepWallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

  Geometry              = BOX
  GeometryMajorRadius   = 74.0
  GeometryMinorRadius   = 95.0
  GeometryHeight        = 140.0


	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 85.0
	GeometryOffset		  = X:12.0 Y:-25.0 Z:0	

	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 85.0
	GeometryOffset		  = X:-60.0 Y:40.0 Z:0	

	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 120.0
	GeometryOffset		  = X:20.0 Y:40.0 Z:0	

  
  GeometryIsSmall       = No
  GeometryFrontAngle    = -90.0
  Shadow                = SHADOW_VOLUME
  
  GeometryContactPoint = X:20  Y:-75 Z:0 Grab
  GeometryContactPoint = X:0  Y:40 Z:120
  GeometryContactPoint = X:-55  Y:-35 Z:0 Grab
  ;GeometryContactPoint = X:-60  Y:25 Z:92 Grab
End

;------------------------------------------------------------------------------
;Helms Deep Gatehouse
Object HelmsDeepGatehouseCenter

SelectPortrait = BPCHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day
  	
	;----------------------------------------------------------------------------------------------
	Draw = W3DScriptedModelDraw ModuleTag_Draw
		OkToChangeModelColor  = Yes
		UseStandardModelNames = Yes

		; Fade Parameters - fade disabled for now
		; AlphaCameraFadeOuterRadius = 350
		; AlphaCameraFadeInnerRadius = 250
  		; AlphaCameraAtInnerRadius = 20%

		
		DefaultModelConditionState
			Model = RBHDGatHs
		End

		ModelConditionState  = DAMAGED
			Model         = RBHDGatHs_D1  
		End

		ModelConditionState  = REALLYDAMAGED
			Model         = RBHDGatHs_D1  
		End

		ModelConditionState  = RUBBLE
			Model         = RBHDGatHs_D1  
		End

		ModelConditionState  = POST_RUBBLE
			Model         = None
		End

		ModelConditionState  = POST_COLLAPSE
			Model         = None
		End
                            
;		WallBoundsMesh = P1
;		RampMesh1 = P2
		RaisedWallMesh = P1
    End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepGatehouseRight
  Side                = Obsolete
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE

  ; *** AUDIO Parameters ***

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone

;	VoiceSelect         = NuclearReactorSelect
 	
;	UnitSpecificSounds
;	UnderConstruction     = UnderConstructionLoop
;	End
 

	; *** ENGINEERING Parameters ***

	RadarPriority       = NOT_ON_RADAR
	KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR NOT_AUTOACQUIRABLE IGNORED_IN_GUI IGNORE_FOR_VICTORY NEVER_CULL_FOR_MP DONT_HIDE_IF_FOGGED;SELECTABLE;@1

	

  ; Immortal because they can't be destroyed, only damaged.  
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0    
  End

	ArmorSet
		Conditions        = None
		Armor             = HelmsDeepWalls
		DamageFX          = None
	End

  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= HelmsDeepWallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

	Geometry              = BOX
	GeometryMajorRadius   = 85.0
	GeometryMinorRadius   = 57.5
	GeometryHeight        = 30.0
	GeometryOffset		= X:0 Y:0 Z:110
	    
	AdditionalGeometry    = BOX
	GeometryMajorRadius   = 20.0
	GeometryMinorRadius   = 60.0
	GeometryHeight        = 125.0
	GeometryOffset		= X:70 Y:0 Z:0

	AdditionalGeometry    = BOX
	GeometryMajorRadius   = 20.0
	GeometryMinorRadius   = 60.0
	GeometryHeight        = 125.0
	GeometryOffset		  = X:-70 Y:0 Z:0

	GeometryFrontAngle    = -90.0  
	GeometryIsSmall       = No
	Shadow                = SHADOW_VOLUME
  
	GeometryContactPoint = X:70  Y:-65 Z:0 Grab
	GeometryContactPoint = X:70  Y:-6 Z:0
	GeometryContactPoint = X:70  Y:-60 Z:0 
	GeometryContactPoint = X:70  Y:-60  Z:125
	GeometryContactPoint = X:-70  Y:-60  Z:125
	GeometryContactPoint = X:-70 Y:-60 Z:0
	GeometryContactPoint = X:-70 Y:-65 Z:0 Grab
	GeometryContactPoint = X:-70 Y:65 Z:0 Grab
	GeometryContactPoint = X:-70 Y:60 Z:0
	GeometryContactPoint = X:-70 Y:60  Z:125
	GeometryContactPoint = X:70  Y:60  Z:125
	GeometryContactPoint = X:70  Y:60 Z:0
	GeometryContactPoint = X:70  Y:65 Z:0 Grab
End


;------------------------------------------------------------------------------
;Helms Deep Gate Wall
Object HelmsDeepGate1

SelectPortrait = BPCHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDIGate1
    End
        
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepGate1
  Side                = Obsolete
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone

;  VoiceSelect         = NuclearReactorSelect
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 

  ; *** ENGINEERING Parameters ***

  RadarPriority       = NOT_ON_RADAR
  KindOf              = PRELOAD STRUCTURE IMMOBILE SCORE IGNORE_FOR_VICTORY NEVER_CULL_FOR_MP DONT_HIDE_IF_FOGGED;SELECTABLE;@1 
 
  ; Immortal because they can't be destroyed, only damaged.  
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 5000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0    
  End


  ArmorSet
    Conditions        = None
    Armor             = HelmsDeepWalls
    DamageFX          = None
  End

  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End
 
  Geometry              = BOX
  GeometryMajorRadius   = 50.0
  GeometryMinorRadius   = 35.0
  GeometryHeight        = 60.0
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
End


;------------------------------------------------------------------------------
;Helms Deep Gate Wall
Object HelmsDeepGate2
 
 SelectPortrait = BPCHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDIGate2
    End
        
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepGate2
  Side                = Obsolete
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


  ; *** AUDIO Parameters ***

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone

;  VoiceSelect         = NuclearReactorSelect
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 

  ; *** ENGINEERING Parameters ***

  RadarPriority       = NOT_ON_RADAR
  KindOf              = PRELOAD STRUCTURE IMMOBILE SCORE IGNORE_FOR_VICTORY NEVER_CULL_FOR_MP DONT_HIDE_IF_FOGGED;SELECTABLE;@1 
 
  Body                = StructureBody ModuleTag_05
    MaxHealth         = 1500.0
  End

  ArmorSet
    Conditions        = None
    Armor             = HelmsDeepWalls
    DamageFX          = None
  End

  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End
 
  Geometry              = BOX
  GeometryMajorRadius   = 50.0
  GeometryMinorRadius   = 35.0
  GeometryHeight        = 60.0
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
End


;------------------------------------------------------------------------------
;Helms Deep Gate Pavement01
Object HelmsDeepPavement01

SelectPortrait = BPCHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = HDki_Pavement01
    End
        
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepPavement01
  Side                = Obsolete
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***
;  VoiceSelect         = NuclearReactorSelect
;  SoundOnDamaged        = BuildingDamagedStateLight
;  SoundOnReallyDamaged  = BuildingDestroy
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 
  ; *** ENGINEERING Parameters ***
  RadarPriority       = NOT_ON_RADAR
  KindOf              = PRELOAD STRUCTURE IMMOBILE SCORE IGNORE_FOR_VICTORY NEVER_CULL_FOR_MP DONT_HIDE_IF_FOGGED;SELECTABLE;@1 
 
  Body                = StructureBody ModuleTag_05
    MaxHealth         = 1500.0
  End

  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End
 
  Geometry              = BOX
  GeometryMajorRadius   = 50.0
  GeometryMinorRadius   = 35.0
  GeometryHeight        = 60.0
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
End



;------------------------------------------------------------------------------
;Helms Deep Gate Pavement02
Object HelmsDeepPavement02

SelectPortrait = BPCHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDIPave2
    End
        
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepPavement02
  Side                = Obsolete
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***
;  VoiceSelect         = NuclearReactorSelect
;  SoundOnDamaged        = BuildingDamagedStateLight
;  SoundOnReallyDamaged  = BuildingDestroy
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 
  ; *** ENGINEERING Parameters ***
  RadarPriority       = NOT_ON_RADAR
  KindOf              = PRELOAD STRUCTURE IMMOBILE SCORE IGNORE_FOR_VICTORY NEVER_CULL_FOR_MP DONT_HIDE_IF_FOGGED ;SELECTABLE;@1 
 
  Body                = StructureBody ModuleTag_05
    MaxHealth         = 1500.0
  End

  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End
 
  Geometry              = BOX
  GeometryMajorRadius   = 50.0
  GeometryMinorRadius   = 35.0
  GeometryHeight        = 60.0
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
End


;------------------------------------------------------------------------------
;Helms Deep Gate Rampart02
Object HelmsDeepRampart02

SelectPortrait = BPCHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDIRamp2
    End
    
    ModelConditionState  = DAMAGED
      Model         = RBHDIRamp2_D1  
    End
    
    ModelConditionState  = REALLYDAMAGED
      Model         = RBHDIRamp2_D1  
    End
	
    ModelConditionState  = RUBBLE
      Model         = RBHDIRamp2_D1  
    End
    
    ModelConditionState  = POST_RUBBLE
		Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
    End
    
    WallBoundsMesh = P3
    RampMesh1 = P2
    RampMesh2 = P1
    
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepRampart02
  Side                = Obsolete
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone

;  VoiceSelect         = NuclearReactorSelect
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 

  ; *** ENGINEERING Parameters ***

  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR NOT_AUTOACQUIRABLE IGNORED_IN_GUI IGNORE_FOR_VICTORY NEVER_CULL_FOR_MP DONT_HIDE_IF_FOGGED;SELECTABLE;@1
 
  ; Immortal because they can't be destroyed, only damaged.  
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0    
  End


  ArmorSet
    Conditions        = None
    Armor             = HelmsDeepWalls
    DamageFX          = None
  End

  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= HelmsDeepWallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

  Geometry              = BOX
  GeometryMajorRadius   = 42.0
  GeometryMinorRadius   = 65.0
  GeometryHeight        = 150.0
  GeometryIsSmall       = No
  GeometryFrontAngle    = -90.0
  Shadow                = SHADOW_VOLUME
  
  ; just grab from the center, the only we can get at this thing is if an ent is on top of it
  ;GeometryContactPoint = X:42  Y:55  Z:150 Grab
  ;GeometryContactPoint = X:42  Y:-55 Z:150 Grab
  ;GeometryContactPoint = X:-42 Y:-55 Z:150 Grab
  ;GeometryContactPoint = X:-42 Y:55  Z:150 Grab
End


;------------------------------------------------------------------------------
;Helms Deep Gate Rampart03
Object HelmsDeepRampart03

SelectPortrait = BPCHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDIRamp3
    End
    
    ModelConditionState  = DAMAGED
      Model         = RBHDIRamp3_D1  
    End
    
    ModelConditionState  = REALLYDAMAGED
      Model         = RBHDIRamp3_D1  
    End
	
    ModelConditionState  = RUBBLE
      Model         = RBHDIRamp3_D1  
    End
    
    ModelConditionState  = POST_RUBBLE
		Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
    End
    
    WallBoundsMesh = P2
    RampMesh1 = P1
    
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepRampart03
  Side                = Obsolete
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone

;  VoiceSelect         = NuclearReactorSelect
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 

  ; *** ENGINEERING Parameters ***

  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR NOT_AUTOACQUIRABLE IGNORED_IN_GUI IGNORE_FOR_VICTORY NEVER_CULL_FOR_MP DONT_HIDE_IF_FOGGED ;SELECTABLE;@1
 
  ; Immortal because they can't be destroyed, only damaged.  
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0    
  End

  ArmorSet
    Conditions        = None
    Armor             = HelmsDeepWalls
    DamageFX          = None
  End

  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= HelmsDeepWallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

	Geometry              = BOX
	GeometryMajorRadius   = 50.0
	GeometryMinorRadius   = 60.0
	GeometryHeight        = 170.0
	GeometryOffset		= X:0 Y:0 Z:0
	
	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 170.0
	GeometryOffset		  = X:0 Y:0 Z:0
		
	GeometryIsSmall       = No
	Shadow                = SHADOW_VOLUME

	; have no idea how this lines up with other pieces 
	; most likely it's only going to get grabbed from if the unit is on top of it (I hope)
	GeometryContactPoint = X:40 Y:-55 Z:0 Grab
	GeometryContactPoint = X:40 Y:-50 Z:150
	GeometryContactPoint = X:0 Y:0 Z:160 Grab
End


;------------------------------------------------------------------------------
;Helms Deep Gate Rampart04
Object HelmsDeepRampart04

SelectPortrait = BPCHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDIRamp4
    End
    
    ModelConditionState  = DAMAGED
      Model         = RBHDIRamp4_D1  
    End
    
    ModelConditionState  = REALLYDAMAGED
      Model         = RBHDIRamp4_D1  
    End
	
    ModelConditionState  = RUBBLE
      Model         = RBHDIRamp4_D1  
    End
    
    ModelConditionState  = POST_RUBBLE
		Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
    End
    
;   RaisedWallMesh = P2
;   RampMesh1 = P1
    
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepRampart04
  Side                = Obsolete
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160

  ; Immortal because they can't be destroyed, only damaged.  
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0    
  End


; For Testing Purposes


  ; *** AUDIO Parameters ***

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone

;  VoiceSelect         = NuclearReactorSelect
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 

  ; *** ENGINEERING Parameters ***

  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE CHUNK_VENDOR WALK_ON_TOP_OF_WALL NOT_AUTOACQUIRABLE IGNORED_IN_GUI IGNORE_FOR_VICTORY NEVER_CULL_FOR_MP DONT_HIDE_IF_FOGGED ;SELECTABLE;@1
 

  ArmorSet
    Conditions        = None
    Armor             = HelmsDeepWalls
    DamageFX          = None
  End

  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= HelmsDeepWallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

  Geometry              = BOX
  GeometryMajorRadius   = 120.0
  GeometryMinorRadius   = 50.0
  GeometryHeight        = 30.0
  GeometryOffset		= X:-33 Y:0 Z:165
  GeometryIsSmall       = No

  AdditionalGeometry    = BOX
  GeometryMajorRadius   = 25.0
  GeometryMinorRadius   = 50.0
  GeometryHeight        = 100.0
  GeometryOffset		= X:60 Y:0 Z:95
  GeometryIsSmall       = No
  
  AdditionalGeometry    = BOX
  GeometryMajorRadius   = 50.0
  GeometryMinorRadius   = 50.0
  GeometryHeight        = 100.0
  GeometryOffset		= X:-100 Y:0 Z:95
  GeometryIsSmall       = No
    
  
  Shadow                = SHADOW_VOLUME
End


;------------------------------------------------------------------------------
;Helms Deep Gate Rampart05
Object HelmsDeepRampart05

SelectPortrait = BPCHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDIRamp5
    End
    
    ModelConditionState  = DAMAGED
      Model         = RBHDIRamp5_D1  
    End
    
    ModelConditionState  = REALLYDAMAGED
      Model         = RBHDIRamp5_D1  
    End
	
    ModelConditionState  = RUBBLE
      Model         = RBHDIRamp5_D1  
    End
    
    ModelConditionState  = POST_RUBBLE
		Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
    End
    
    WallBoundsMesh = P2
    RampMesh1 = P1
    RampMesh2 = P3
    RaisedWallMesh = P2_OLD
    
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepRampart05
  Side                = Obsolete
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone

;  VoiceSelect         = NuclearReactorSelect
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 

  ; *** ENGINEERING Parameters ***

  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR NOT_AUTOACQUIRABLE IGNORED_IN_GUI IGNORE_FOR_VICTORY NEVER_CULL_FOR_MP DONT_HIDE_IF_FOGGED;SELECTABLE;@1
 
  ; Immortal because they can't be destroyed, only damaged.  
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0    
  End

  ArmorSet
    Conditions        = None
    Armor             = HelmsDeepWalls
    DamageFX          = None
  End

  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= HelmsDeepWallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

  Geometry				= BOX
  GeometryMajorRadius   = 120.0
  GeometryMinorRadius   = 70.0 
  GeometryHeight        = 30.0
  GeometryOffset		= X:0 Y:0 Z:160  
  
  AdditionalGeometry    = BOX
  GeometryMajorRadius   = 120.0
  GeometryMinorRadius   = 70.0 
  GeometryHeight        = 108.0
;  GeometryOffset		= X:0 Y:0 Z:0  
      
  AdditionalGeometry    = BOX
  GeometryMajorRadius   = 120.0
  GeometryMinorRadius   = 70.0 
  GeometryHeight        = 30.0
  GeometryOffset		= X:0 Y:0 Z:160  
  
  AdditionalGeometry    = BOX
  GeometryMajorRadius   = 37.5
  GeometryMinorRadius   = 70.0 
  GeometryHeight        = 190.0
  GeometryOffset		= X:-80 Y:0 Z:0  
  
  AdditionalGeometry    = BOX
  GeometryMajorRadius   = 37.5
  GeometryMinorRadius   = 70.0 
  GeometryHeight        = 190.0
  GeometryOffset		= X:80 Y:0 Z:0  

	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 190.0
	GeometryOffset		  = X:90 Y:0 Z:0

	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 190.0
	GeometryOffset		  = X:0 Y:0 Z:0

	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 190.0
	GeometryOffset		  = X:-90 Y:0 Z:0
	  
  GeometryFrontAngle    = -110.0  
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  
  GeometryContactPoint = X:-105  Y:-55 Z:0 Grab
  GeometryContactPoint = X:-40  Y:-20 Z:185 
  GeometryContactPoint = X:0  Y:-20 Z:110 Grab
  GeometryContactPoint = X:40  Y:-20 Z:185 
  GeometryContactPoint = X:105  Y:-55 Z:0 Grab
  
End



;------------------------------------------------------------------------------
;Helms Deep Gate Rampart05
Object HelmsDeepRampart05a

SelectPortrait = BPCHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDIRamp5a
    End
    
    
    RampMesh1 = P01
    
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepRampart05a
  Side                = Obsolete
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes

  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL NOT_AUTOACQUIRABLE NO_COLLIDE IGNORED_IN_GUI IGNORE_FOR_VICTORY NEVER_CULL_FOR_MP DONT_HIDE_IF_FOGGED ;SELECTABLE;@1
 
  ; Immortal because they can't be destroyed, only damaged.  
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
  End


  Geometry              = BOX
  GeometryMajorRadius   = 10.0
  GeometryMinorRadius   = 10.0
  GeometryHeight        = 10.0
  GeometryIsSmall       = No
  Shadow                = NONE
End


;------------------------------------------------------------------------------
;Helms Deep Gate Rampart05 Invisible
Object HelmsDeepRampartInvisible

SelectPortrait = BPCHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDIRampInv
    End
    
    ModelConditionState  = DAMAGED
      Model         = RBHDIRampInv  
    End
    
    ModelConditionState  = REALLYDAMAGED
      Model         = RBHDIRampInv  
    End
	
    ModelConditionState  = RUBBLE
      Model         = RBHDIRampInv  
    End
    
    ModelConditionState  = POST_RUBBLE
		Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
    End
    
    RampMesh1 = P01
    
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepRampart05Invisible
  Side                = Obsolete
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***
;  VoiceSelect         = NuclearReactorSelect
;  SoundOnDamaged        = BuildingDamagedStateLight
;  SoundOnReallyDamaged  = BuildingDestroy
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 
  ; *** ENGINEERING Parameters ***
  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR NOT_AUTOACQUIRABLE IGNORE_FOR_VICTORY NEVER_CULL_FOR_MP ;SELECTABLE;@1
 
  ; Immortal because they can't be destroyed, only damaged.  
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
;    GrabObject = EntThrownBuildingRock
;	GrabFX = FX_WallGrab
;	GrabDamage = 490
;	GrabOffset = X:16 Y:0    
  End

;  ArmorSet
;    Conditions        = None
;    Armor             = HelmsDeepWalls
;    DamageFX          = None
;  End

  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= HelmsDeepWallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

;  Geometry              = BOX
;  GeometryMajorRadius   = 162.0
;  GeometryMinorRadius   = 64.0
;  GeometryHeight        = 190.0
;  GeometryIsSmall       = No
;  Shadow                = SHADOW_VOLUME
End



;------------------------------------------------------------------------------
;Helms Deep Gate di Section A3
Object HelmsDeepkiSectionA3

SelectPortrait = BPCHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes

    WallBoundsMesh = P1
    RampMesh1 = P2 this is not in any way suitable for a ramp at this time.  
    
    DefaultModelConditionState
      Model = RBHDISecA3
    End
    
    ModelConditionState  = DAMAGED
      Model         = RBHDISecA3_D1  
    End
    
    ModelConditionState  = REALLYDAMAGED
      Model         = RBHDISecA3_D1  
    End
	
    ModelConditionState  = RUBBLE
      Model         = RBHDISecA3_D1  
    End
    
    ModelConditionState  = POST_RUBBLE
		Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
    End
    

  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepdiSectionA3
  Side                = Obsolete
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***
;  VoiceSelect         = NuclearReactorSelect
;  SoundOnDamaged        = BuildingDamagedStateLight
;  SoundOnReallyDamaged  = BuildingDestroy
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 
  ; *** ENGINEERING Parameters ***
  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR NOT_AUTOACQUIRABLE IGNORED_IN_GUI IGNORE_FOR_VICTORY NEVER_CULL_FOR_MP DONT_HIDE_IF_FOGGED;SELECTABLE;@1
 
  ; Immortal because they can't be destroyed, only damaged.  
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0    
  End

  ArmorSet
    Conditions        = None
    Armor             = HelmsDeepWalls
    DamageFX          = None
  End

  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= HelmsDeepWallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

	Geometry              = BOX
	GeometryMajorRadius   = 141.0
	GeometryMinorRadius   = 54.0
	GeometryHeight        = 150.0
	
	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 150.0
	GeometryOffset		  = X:90 Y:0 Z:0

	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 150.0
	GeometryOffset		  = X:0 Y:0 Z:0
			
	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 150.0
	GeometryOffset		  = X:-90 Y:0 Z:0
	
	GeometryIsSmall       = No
	GeometryFrontAngle    = -130.0  
	Shadow                = SHADOW_VOLUME
	
	GeometryContactPoint = X:-105  Y:-45 Z:0   Grab
	GeometryContactPoint = X:0     Y:-15 Z:148 Grab
	GeometryContactPoint = X:105   Y:-45 Z:0   Grab
End


;------------------------------------------------------------------------------
;Helms Deep Gate di Section A5
Object HelmsDeepkiSectionA5

SelectPortrait = BPCHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDISecA5
    End
    
    ModelConditionState  = DAMAGED
      Model         = RBHDISecA5_D1  
    End
    
    ModelConditionState  = REALLYDAMAGED
      Model         = RBHDISecA5_D1  
    End
	
    ModelConditionState  = RUBBLE
      Model         = RBHDISecA5_D1  
    End
    
    ModelConditionState  = POST_RUBBLE
		Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
    End
    
    WallBoundsMesh = P1
   ; RampMesh1 = P2
    
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepdiSectionA5
  Side                = Obsolete
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***
;  VoiceSelect         = NuclearReactorSelect
;  SoundOnDamaged        = BuildingDamagedStateLight
;  SoundOnReallyDamaged  = BuildingDestroy
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 
  ; *** ENGINEERING Parameters ***
  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL NOT_AUTOACQUIRABLE IGNORED_IN_GUI IGNORE_FOR_VICTORY NEVER_CULL_FOR_MP DONT_HIDE_IF_FOGGED ;SELECTABLE;@1
 
  ; Immortal because they can't be destroyed, only damaged.  
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0    
  End

  ArmorSet
    Conditions        = None
    Armor             = HelmsDeepWalls
    DamageFX          = None
  End

 	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= HelmsDeepWallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

  Geometry              = BOX
  GeometryMajorRadius   = 80.0
  GeometryMinorRadius   = 55.0
  GeometryHeight        = 150.0
   GeometryOffset		= X:65 Y:0 Z:0

	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 150.0
	GeometryOffset		  = X:100 Y:0 Z:0   

	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 150.0
	GeometryOffset		  = X:30 Y:0 Z:0
   
  GeometryIsSmall       = No
  GeometryFrontAngle    = -90.0  
  Shadow                = SHADOW_VOLUME
  End

;------------------------------------------------------------------------------
;Helms Deep Gate di Section A6
Object HelmsDeepdiSectionA6

SelectPortrait = BPCHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDISecA6
    End
    
    ModelConditionState  = DAMAGED
      Model         = RBHDISecA6_D1  
    End
    
    ModelConditionState  = REALLYDAMAGED
      Model         = RBHDISecA6_D1  
    End
	
    ModelConditionState  = RUBBLE
      Model         = RBHDISecA6_D1  
    End
    
    ModelConditionState  = POST_RUBBLE
		Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
    End
    
    WallBoundsMesh = P1
  ;  RampMesh1 = P2
    
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepdiSectionA6
  Side                = Obsolete
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***
;  VoiceSelect         = NuclearReactorSelect
;  SoundOnDamaged        = BuildingDamagedStateLight
;  SoundOnReallyDamaged  = BuildingDestroy
 
 
  ; *** ENGINEERING Parameters ***
  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL NOT_AUTOACQUIRABLE IGNORED_IN_GUI IGNORE_FOR_VICTORY NEVER_CULL_FOR_MP DONT_HIDE_IF_FOGGED;SELECTABLE;@1 
 
  ; Immortal because they can't be destroyed, only damaged.  
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0    
  End

  ArmorSet
    Conditions        = None
    Armor             = HelmsDeepWalls
    DamageFX          = None
  End

  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= HelmsDeepWallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

  Geometry              = BOX
  GeometryMajorRadius   = 80.0
  GeometryMinorRadius   = 55.0
  GeometryHeight        = 150.0
   GeometryOffset		= X:-68 Y:0 Z:0

	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 150.0
	GeometryOffset		  = X:-100 Y:0 Z:0   

	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 150.0
	GeometryOffset		  = X:-30 Y:0 Z:0
	   
  GeometryIsSmall       = No
  GeometryFrontAngle    = -90.0  
  Shadow                = SHADOW_VOLUME
 End

;------------------------------------------------------------------------------
;Helms Deep Gate di Section A7
Object HelmsDeepdiSectionA7

SelectPortrait = BPCHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDISecA7
    End
    
    ModelConditionState  = DAMAGED
      Model         = RBHDISecA7_D1  
    End
    
    ModelConditionState  = REALLYDAMAGED
      Model         = RBHDISecA7_D1  
    End
	
    ModelConditionState  = RUBBLE
      Model         = RBHDISecA7_D1  
    End
    
    ModelConditionState  = POST_RUBBLE
		Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
    End
    
    WallBoundsMesh = P1
  ;  RampMesh1 = P2
    
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepdiSectionA7
  Side                = Obsolete
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160


; For Testing Purposes


; *** AUDIO Parameters ***
;  VoiceSelect         = NuclearReactorSelect
;  SoundOnDamaged        = BuildingDamagedStateLight
;  SoundOnReallyDamaged  = BuildingDestroy
 
 
  ; *** ENGINEERING Parameters ***
  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL NOT_AUTOACQUIRABLE IGNORED_IN_GUI IGNORE_FOR_VICTORY NEVER_CULL_FOR_MP DONT_HIDE_IF_FOGGED;SELECTABLE;@1 
 
  ; Immortal because they can't be destroyed, only damaged.  
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0    
  End

  ArmorSet
    Conditions        = None
    Armor             = HelmsDeepWalls
    DamageFX          = None
  End

  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= HelmsDeepWallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

  Geometry              = BOX
  GeometryMajorRadius   = 80.0
  GeometryMinorRadius   = 55.0
  GeometryHeight        = 150.0
   GeometryOffset		= X:68 Y:0 Z:0

	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 150.0
	GeometryOffset		  = X:100 Y:0 Z:0   

	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 150.0
	GeometryOffset		  = X:30 Y:0 Z:0
	   
   
  GeometryIsSmall       = No
  GeometryFrontAngle    = -90.0
 Shadow                = SHADOW_VOLUME
 End


;------------------------------------------------------------------------------
;Helms Deep Gate di Section A8
Object HelmsDeepdiSectionA8

SelectPortrait = BPCHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDISecA8
    End
    
    ModelConditionState  = DAMAGED
      Model         = RBHDISecA8_D1  
    End
    
    ModelConditionState  = REALLYDAMAGED
      Model         = RBHDISecA8_D1  
    End
	
    ModelConditionState  = RUBBLE
      Model         = RBHDISecA8_D1  
    End
    
    ModelConditionState  = POST_RUBBLE
		Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
    End
    
    WallBoundsMesh = P1
  ;  RampMesh1 = P2
    
  End
  
  PlacementViewAngle  = 0
 
 ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepdiSectionA8
  Side                = Obsolete
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***
;  VoiceSelect         = NuclearReactorSelect
;  SoundOnDamaged        = BuildingDamagedStateLight
;  SoundOnReallyDamaged  = BuildingDestroy
 
 
  ; *** ENGINEERING Parameters ***
  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL NOT_AUTOACQUIRABLE IGNORED_IN_GUI IGNORE_FOR_VICTORY NEVER_CULL_FOR_MP DONT_HIDE_IF_FOGGED;SELECTABLE;@1
 
  ; Immortal because they can't be destroyed, only damaged.  
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0    
  End

  ArmorSet
    Conditions        = None
    Armor             = HelmsDeepWalls
    DamageFX          = None
  End

  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= HelmsDeepWallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

  Geometry              = BOX
  GeometryMajorRadius   = 80.0
  GeometryMinorRadius   = 55.0
  GeometryHeight        = 150.0
  GeometryOffset		= X:-68 Y:0 Z:0
  
	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 150.0
	GeometryOffset		  = X:-100 Y:0 Z:0   

	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 150.0
	GeometryOffset		  = X:-30 Y:0 Z:0
	  
  GeometryIsSmall       = No
  GeometryFrontAngle    = -90.0
  Shadow                = SHADOW_VOLUME
  End
   


;------------------------------------------------------------------------------
;Helms Deep Gate di Section A4
Object HelmsDeepkiSectionA4

SelectPortrait = BPCHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDISecA4
    End
    
    ModelConditionState  = DAMAGED
      Model         = RBHDISecA4_D1  
    End
    
    ModelConditionState  = REALLYDAMAGED
      Model         = RBHDISecA4_D1  
    End
	
    ModelConditionState  = RUBBLE
      Model         = RBHDISecA4_D1  
    End
    
    ModelConditionState  = POST_RUBBLE
		Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
    End
            
    WallBoundsMesh = P1
    
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepdiSectionA4
  Side                = Obsolete
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***
;  VoiceSelect         = NuclearReactorSelect
;  SoundOnDamaged        = BuildingDamagedStateLight
;  SoundOnReallyDamaged  = BuildingDestroy
 
 
	; *** ENGINEERING Parameters ***
	RadarPriority       = NOT_ON_RADAR
	KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR NOT_AUTOACQUIRABLE IGNORE_FOR_VICTORY NEVER_CULL_FOR_MP DONT_HIDE_IF_FOGGED ;SELECTABLE;@1

	; Immortal because they can't be destroyed, only damaged.  
	Body                  = ImmortalBody ModuleTag_B_03
	MaxHealth       = 6000.0
	MaxHealthDamaged = 3000
	MaxHealthReallyDamaged = 1000

	GrabObject = EntThrownBuildingRock
		GrabFX = FX_WallGrab
		GrabDamage = 490
		GrabOffset = X:16 Y:0    
	End

	ArmorSet
		Conditions        = None
		Armor             = HelmsDeepWalls
		DamageFX          = None
	End

	Behavior            = DestroyDie ModuleTag_07
	;nothing
	End
 
  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= WallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

	Geometry              = BOX
	GeometryMajorRadius   = 136.0
	GeometryMinorRadius   = 57.0
	GeometryHeight        = 150.0
	
	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 150.0
	GeometryOffset		  = X:90 Y:0 Z:0

	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 150.0
	GeometryOffset		  = X:0 Y:0 Z:0
			
	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 150.0
	GeometryOffset		  = X:-90 Y:0 Z:0
	
	GeometryIsSmall       = No
	Shadow                = SHADOW_VOLUME
	
	GeometryContactPoint = X:-105 Y:-45 Z:0 Grab
	GeometryContactPoint = X:0    Y:0   Z:145 Grab
	GeometryContactPoint = X:105  Y:-45 Z:0 Grab
End


;------------------------------------------------------------------------------
;Helms Deep Gate di Section B
Object HelmsDeepkiSectionB

SelectPortrait = BPCHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDISecB
    End
        
	ModelConditionState  = DAMAGED
      Model         = RBHDISecB_D1  
    End
    
    ModelConditionState  = REALLYDAMAGED
      Model         = RBHDISecB_D1  
    End
	
    ModelConditionState  = RUBBLE
      Model         = RBHDISecB_D1  
    End
    
    ModelConditionState  = POST_RUBBLE
		Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
    End
                    
    WallBoundsMesh = P1
    
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepdiSectionB
  Side                = Obsolete
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***
;  VoiceSelect         = NuclearReactorSelect
;  SoundOnDamaged        = BuildingDamagedStateLight
;  SoundOnReallyDamaged  = BuildingDestroy
 
 
  ; *** ENGINEERING Parameters ***
  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR NOT_AUTOACQUIRABLE IGNORED_IN_GUI IGNORE_FOR_VICTORY NEVER_CULL_FOR_MP DONT_HIDE_IF_FOGGED ;SELECTABLE;@1
 
  ; Immortal because they can't be destroyed, only damaged.  
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0    
  End

  ArmorSet
    Conditions        = None
    Armor             = HelmsDeepWalls
    DamageFX          = None
  End

  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End
 
  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= HelmsDeepWallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

	Geometry              = BOX
	GeometryMajorRadius   = 80.0
	GeometryMinorRadius   = 60.0
	GeometryHeight        = 150.0
	GeometryOffset		= X:20 Y:-14 Z:0
	GeometryIsSmall       = No
	Shadow                = SHADOW_VOLUME
	
	GeometryContactPoint = X:-60 Y:-58 Z:0 Grab
	GeometryContactPoint = X:15   Y:-5   Z:145 Grab
	GeometryContactPoint = X:90  Y:-58 Z:0 Grab
End




;------------------------------------------------------------------------------
;Helms Deep Gate di Stair1
Object HelmsDeepdiStair1

SelectPortrait = BPCHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDIStair1
    End
    
    ModelConditionState  = DAMAGED
      Model         = RBHDIStair1_D1  
    End
    
    ModelConditionState  = REALLYDAMAGED
      Model         = RBHDIStair1_D1  
    End
	
    ModelConditionState  = RUBBLE
      Model         = RBHDIStair1_D1  
    End
    
    ModelConditionState  = POST_RUBBLE
		Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
    End
                            
    WallBoundsMesh = P3
    RampMesh2 = P2
    RampMesh1 = P1
        
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepdiStair1
  Side                = Obsolete
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***
;  VoiceSelect         = NuclearReactorSelect
;  SoundOnDamaged        = BuildingDamagedStateLight
;  SoundOnReallyDamaged  = BuildingDestroy
 
 
  ; *** ENGINEERING Parameters ***
  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR NOT_AUTOACQUIRABLE IGNORED_IN_GUI IGNORE_FOR_VICTORY NEVER_CULL_FOR_MP DONT_HIDE_IF_FOGGED ;SELECTABLE;@1
 
  ; Immortal because they can't be destroyed, only damaged.  
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0    
  End

  ArmorSet
    Conditions        = None
    Armor             = InvulnerableArmor   ;HelmsDeepWalls
    DamageFX          = None
  End

  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End
 
  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= WallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

	Geometry              = BOX
	GeometryMajorRadius   = 114.0
	GeometryMinorRadius   = 117.0
	GeometryHeight        = 115.0
	GeometryIsSmall       = No
	Shadow                = SHADOW_VOLUME
 
   AdditionalGeometry = Cylinder
   GeometryMajorRadius = 75
   GeometryMinorRadius = 75
   GeometryHeight      = 82
   GeometryOffset      = X:-22.024 Y:-127.849 Z:0
   
   AdditionalGeometry = Cylinder
   GeometryMajorRadius = 75
   GeometryMinorRadius = 75
   GeometryHeight      = 57
   GeometryOffset      = X:22.284 Y:-245 Z:0
   
   AdditionalGeometry = Cylinder
   GeometryMajorRadius = 70
   GeometryMinorRadius = 70
   GeometryHeight      = 36.5
   GeometryOffset      = X:84.753 Y:-330 Z:0
   
   AdditionalGeometry = Cylinder
   GeometryMajorRadius = 70
   GeometryMinorRadius = 70
   GeometryHeight      = 18.3
   GeometryOffset      = X:154.86 Y:-391 Z:0
   
   ;HelmsDeepdiStair1 grab points for rock-wielding ents
   GeometryContactPoint = X:-105   Y:80  Z:0 Grab
   GeometryContactPoint = X:-90   Y:0  Z:95
   GeometryContactPoint = X:-90   Y:-80 Z:0 Grab
   GeometryContactPoint = X:-70   Y:-120 Z:75
   GeometryContactPoint = X:-65  Y:-180  Z:0 Grab
   GeometryContactPoint = X:-50   Y:-230  Z:45
   GeometryContactPoint = X:-40   Y:-280  Z:0 Grab
End



;------------------------------------------------------------------------------
;Helms Deep Gate di Stair2
Object HelmsDeepdiStair2

SelectPortrait = BPCHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDIStair2
    End
                                    
    WallBoundsMesh = P2
    RampMesh1 = P3
    RampMesh2 = P1
     
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepdiStair1
  Side                = Obsolete
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***
;  VoiceSelect         = NuclearReactorSelect
;  SoundOnDamaged        = BuildingDamagedStateLight
;  SoundOnReallyDamaged  = BuildingDestroy
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 
  ; *** ENGINEERING Parameters ***
  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR NOT_AUTOACQUIRABLE IGNORED_IN_GUI IGNORE_FOR_VICTORY NEVER_CULL_FOR_MP DONT_HIDE_IF_FOGGED ;SELECTABLE;@1
 
  ; Immortal because they can't be destroyed, only damaged.  
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0    
  End

  ArmorSet
    Conditions        = None
    Armor             = HelmsDeepWalls
    DamageFX          = None
  End

  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End
 
  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= WallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

  Geometry              = BOX
  GeometryMajorRadius   = 142.0
  GeometryMinorRadius   = 161.0
  GeometryHeight        = 80.0
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
End


;------------------------------------------------------------------------------
;Helms Deep Gate di Step1
Object HelmsDeepdiStep1

SelectPortrait = BPCHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDIStep1
    End
    
    ModelConditionState  = DAMAGED
      Model         = RBHDIStep1_D1  
    End
    
    ModelConditionState  = REALLYDAMAGED
      Model         = RBHDIStep1_D1  
    End
	
    ModelConditionState  = RUBBLE
      Model         = RBHDIStep1_D1  
    End
    
    ModelConditionState  = POST_RUBBLE
		Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
    End
    
    RampMesh1 = P1
    
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepdiStep1
  Side                = Obsolete
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***
;  VoiceSelect         = NuclearReactorSelect
;  SoundOnDamaged        = BuildingDamagedStateLight
;  SoundOnReallyDamaged  = BuildingDestroy
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 
  ; *** ENGINEERING Parameters ***
  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR NOT_AUTOACQUIRABLE IGNORED_IN_GUI IGNORE_FOR_VICTORY NEVER_CULL_FOR_MP DONT_HIDE_IF_FOGGED ;SELECTABLE;@1
 
  ; Immortal because they can't be destroyed, only damaged.  
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0    
  End

  ArmorSet
    Conditions        = None
    Armor             = InvulnerableArmor
    DamageFX          = None
  End

  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End
 
  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= WallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

  Geometry              = BOX
  GeometryMajorRadius   = 90.0
  GeometryMinorRadius   = 20.0
  GeometryHeight        = 22.0
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
End


;------------------------------------------------------------------------------
;Helms Deep Gate di Step2
Object HelmsDeepdiStep2

SelectPortrait = BPCHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDIStep2
    End
        
	ModelConditionState  = DAMAGED
      Model         = RBHDIStep2_D1  
    End
    
    ModelConditionState  = REALLYDAMAGED
      Model         = RBHDIStep2_D1  
    End
	
    ModelConditionState  = RUBBLE
      Model         = RBHDIStep2_D1  
    End
    
    ModelConditionState  = POST_RUBBLE
		Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
    End
            
    RampMesh1 = P1
    
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepdiStep2
  Side                = Obsolete
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***
;  VoiceSelect         = NuclearReactorSelect
;  SoundOnDamaged        = BuildingDamagedStateLight
;  SoundOnReallyDamaged  = BuildingDestroy
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 
  ; *** ENGINEERING Parameters ***
  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR NOT_AUTOACQUIRABLE IGNORED_IN_GUI IGNORE_FOR_VICTORY NEVER_CULL_FOR_MP DONT_HIDE_IF_FOGGED;SELECTABLE;@1 
 
  ; Immortal because they can't be destroyed, only damaged.  
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0    
  End

  ArmorSet
    Conditions        = None
    Armor             = InvulnerableArmor
    DamageFX          = None
  End

  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End
 
  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= WallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

  Geometry              = BOX
  GeometryMajorRadius   = 50.0
  GeometryMinorRadius   = 50.0
  GeometryHeight        = 20.0
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
End

;------------------------------------------------------------------------------
;Helms Deep Gate di Wall1
Object HelmsDeepdiWall1

SelectPortrait = BPCHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDIWall1
    End
    
    ModelConditionState  = DAMAGED
      Model         = RBHDIWall1_D1  
    End
    
    ModelConditionState  = REALLYDAMAGED
      Model         = RBHDIWall1_D1  
    End
	
    ModelConditionState  = RUBBLE
      Model         = RBHDIWall1_D1  
    End
    
    ModelConditionState  = POST_RUBBLE
		Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
    End
        
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepdiWall
  Side                = Obsolete
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***
;  VoiceSelect         = NuclearReactorSelect
;  SoundOnDamaged        = BuildingDamagedStateLight
;  SoundOnReallyDamaged  = BuildingDestroy
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 
  ; *** ENGINEERING Parameters ***
  RadarPriority       = NOT_ON_RADAR
  KindOf              = PRELOAD STRUCTURE IMMOBILE SCORE NOT_AUTOACQUIRABLE IGNORED_IN_GUI IGNORE_FOR_VICTORY NEVER_CULL_FOR_MP DONT_HIDE_IF_FOGGED;SELECTABLE;@1 
 
  ; Immortal because they can't be destroyed, only damaged.  
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
  End

  ArmorSet
    Conditions        = None
    Armor             = InvulnerableArmor
    DamageFX          = None
  End

  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End
 
  Geometry              = BOX
  GeometryMajorRadius   = 9
  GeometryMinorRadius   = 30
  GeometryHeight        = 39
  GeometryOffset		= X:-50 Y:36 Z:0
    
  AdditionalGeometry    = BOX
  GeometryMajorRadius   = 10
  GeometryMinorRadius   = 28
  GeometryHeight        = 39
  GeometryOffset		= X:-31 Y:-5 Z:0
    
  AdditionalGeometry    = BOX
  GeometryMajorRadius   = 17
  GeometryMinorRadius   = 21
  GeometryHeight        = 39
  GeometryOffset		= X:-4 Y:-46 Z:0
    
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
End


;------------------------------------------------------------------------------
;Helms Deep Gate di Wall2
Object HelmsDeepdiWall2

SelectPortrait = BPCHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDIWall2
    End
    
    ModelConditionState  = DAMAGED
      Model         = RBHDIWall2_D1  
    End
    
    ModelConditionState  = REALLYDAMAGED
      Model         = RBHDIWall2_D1  
    End
	
    ModelConditionState  = RUBBLE
      Model         = RBHDIWall2_D1  
    End
    
    ModelConditionState  = POST_RUBBLE
		Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
    End
        
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepdiWall
  Side                = Obsolete
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***
;  VoiceSelect         = NuclearReactorSelect
;  SoundOnDamaged        = BuildingDamagedStateLight
;  SoundOnReallyDamaged  = BuildingDestroy
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 
  ; *** ENGINEERING Parameters ***
  RadarPriority       = NOT_ON_RADAR
  KindOf              = PRELOAD STRUCTURE IMMOBILE SCORE NOT_AUTOACQUIRABLE IGNORED_IN_GUI IGNORE_FOR_VICTORY NEVER_CULL_FOR_MP DONT_HIDE_IF_FOGGED;SELECTABLE;@1 
 
  ; Immortal because they can't be destroyed, only damaged.  
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
  End

  ArmorSet
    Conditions        = None
    Armor             = InvulnerableArmor
    DamageFX          = None
  End

  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End
 
  Geometry              = BOX
  GeometryMajorRadius   = 17.0
  GeometryMinorRadius   = 27.5
  GeometryHeight        = 40.0
  GeometryOffset		= X:88 Y:-14 Z:0
    
  AdditionalGeometry    = BOX
  GeometryMajorRadius   = 50
  GeometryMinorRadius   = 5.4
  GeometryHeight        = 41
  GeometryOffset		= X:55 Y:5.5 Z:0
    
  AdditionalGeometry    = BOX
  GeometryMajorRadius   = 8.0
  GeometryMinorRadius   = 22.0
  GeometryHeight        = 40.0
  GeometryOffset		= X:14 Y:21 Z:0
    
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
End

;------------------------------------------------------------------------------
;Helms Deep Gate do Bridge1
Object HelmsDeepdoBridge1

SelectPortrait = BPCHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDOBrid1
    End
    
    ModelConditionState  = DAMAGED
      Model         = RBHDOBrid1_D1  
    End
    
    ModelConditionState  = REALLYDAMAGED
      Model         = RBHDOBrid1_D1  
    End
	
    ModelConditionState  = RUBBLE
      Model         = RBHDOBrid1_D1  
    End
    
    ModelConditionState  = POST_RUBBLE
		Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
    End
    
    WallBoundsMesh = P1
    RampMesh1 = P2
;    RampMesh2 = P3
       
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepdoBridge1
  Side                = Obsolete
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***
;  VoiceSelect         = NuclearReactorSelect
;  SoundOnDamaged        = BuildingDamagedStateLight
;  SoundOnReallyDamaged  = BuildingDestroy
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 
  ; *** ENGINEERING Parameters ***
  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR NOT_AUTOACQUIRABLE IGNORED_IN_GUI IGNORE_FOR_VICTORY NEVER_CULL_FOR_MP DONT_HIDE_IF_FOGGED ;SELECTABLE;@1  
 

  Body                = StructureBody ModuleTag_05
    MaxHealth         = 1500.0
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0
  End

  ArmorSet
    Conditions        = None
    Armor             = InvulnerableArmor  ;HelmsDeepWalls
    DamageFX          = None
  End

  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End
 
  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= HelmsDeepWallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

	Geometry              = BOX
	GeometryMajorRadius   = 50.0
	GeometryMinorRadius   = 150.0
	GeometryHeight        = 90.0
	GeometryOffset		= X:0 Y:0 Z:0

	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 80.0
	GeometryOffset		  = X:0 Y:90 Z:0	

	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 60.0
	GeometryOffset		  = X:0 Y:0 Z:0	

	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 45.0
	GeometryOffset		  = X:0 Y:-90 Z:0	
		
	GeometryIsSmall       = No
	Shadow                = SHADOW_VOLUME
	
	; bridge is oriented so longways is along the Y w/ default camera
	GeometryContactPoint = X:-55 Y:-140  Z:0 Grab 
	GeometryContactPoint = X:-50 Y:-140  Z:0     
	GeometryContactPoint = X:-50 Y:0     Z:65
	GeometryContactPoint = X:-50 Y:140   Z:0
	GeometryContactPoint = X:-55 Y:140   Z:0 Grab 
	GeometryContactPoint = X:-50 Y:140   Z:65
	GeometryContactPoint = X:50  Y:140   Z:65
	GeometryContactPoint = X:55  Y:140   Z:0 Grab
	GeometryContactPoint = X:50  Y:140   Z:0
	GeometryContactPoint = X:50  Y:0      Z:65
	GeometryContactPoint = X:50  Y:-140   Z:0
	GeometryContactPoint = X:55  Y:-140   Z:0 Grab
	
End


;------------------------------------------------------------------------------
;Helms Deep Gate do SectionA2
Object HelmsDeepdoSectionA2

SelectPortrait = BPCHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDOSecA2
    End
    
    ModelConditionState  = DAMAGED
      Model         = RBHDOSecA2_D1  
    End
    
    ModelConditionState  = REALLYDAMAGED
      Model         = RBHDOSecA2_D1  
    End
	
    ModelConditionState  = RUBBLE
      Model         = RBHDOSecA2_D1  
    End
    
    ModelConditionState  = POST_RUBBLE
		Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
    End
    
    WallBoundsMesh = P1
       
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepdoSectionA2
  Side                = Obsolete
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***
;  VoiceSelect         = NuclearReactorSelect
;  SoundOnDamaged        = BuildingDamagedStateLight
;  SoundOnReallyDamaged  = BuildingDestroy
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 
  ; *** ENGINEERING Parameters ***
  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR NOT_AUTOACQUIRABLE IGNORED_IN_GUI IGNORE_FOR_VICTORY NEVER_CULL_FOR_MP DONT_HIDE_IF_FOGGED;SELECTABLE;@1  
 
  ; Immortal because they can't be destroyed, only damaged.  
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0    
  End

  ArmorSet
    Conditions        = None
    Armor             = HelmsDeepWalls
    DamageFX          = None
  End

  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End
 
  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= HelmsDeepWallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

	Geometry              = BOX
	GeometryMajorRadius   = 130.0
	GeometryMinorRadius   = 55.0
	GeometryHeight        = 90.0
	GeometryOffset		= X:0 Y:14 Z:0

	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 80.0
	GeometryOffset		  = X:-80.0 Y:15.0 Z:0	

	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 80.0
	GeometryOffset		  = X:0.0 Y:15.0 Z:0	

	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 80.0
	GeometryOffset		  = X:80.0 Y:15.0 Z:0	
		
	GeometryIsSmall       = No
	GeometryFrontAngle    = -90.0
	Shadow                = SHADOW_VOLUME
	
	GeometryContactPoint = X:-110  Y:-47 Z:0 Grab
	GeometryContactPoint = X:0  Y:0 Z:85 Grab
	GeometryContactPoint = X:110  Y:-47 Z:0 Grab
End


;------------------------------------------------------------------------------
;Helms Deep Gate do SectionA5
Object HelmsDeepdoSectionA5

SelectPortrait = BPCHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDOSecA5
    End
    
    ModelConditionState  = DAMAGED
      Model         = RBHDOSecA5_D1  
    End
    
    ModelConditionState  = REALLYDAMAGED
      Model         = RBHDOSecA5_D1  
    End
	
    ModelConditionState  = RUBBLE
      Model         = RBHDOSecA5_D1  
    End
    
    ModelConditionState  = POST_RUBBLE
		Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
    End
     
    WallBoundsMesh = P1
      
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepdoSectionA5
  Side                = Obsolete
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***
;  VoiceSelect         = NuclearReactorSelect
;  SoundOnDamaged        = BuildingDamagedStateLight
;  SoundOnReallyDamaged  = BuildingDestroy
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 
  ; *** ENGINEERING Parameters ***
  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR NOT_AUTOACQUIRABLE IGNORE_FOR_VICTORY NEVER_CULL_FOR_MP DONT_HIDE_IF_FOGGED;SELECTABLE;@1 
 
  ; Immortal because they can't be destroyed, only damaged.  
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0    
  End

  ArmorSet
    Conditions        = None
    Armor             = HelmsDeepWalls
    DamageFX          = None
  End

  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End
 
   	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= WallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

 Geometry              = BOX
  GeometryMajorRadius   = 57.0
  GeometryMinorRadius   = 125.0
  GeometryHeight        = 90.0

	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 80.0
	GeometryOffset		  = X:10.0 Y:-80.0 Z:0	  

	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 80.0
	GeometryOffset		  = X:10.0 Y:0.0 Z:0	  

	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 80.0
	GeometryOffset		  = X:10.0 Y:80.0 Z:0	
	  
  GeometryIsSmall       = No
  GeometryFrontAngle    = 180.0
  Shadow                = SHADOW_VOLUME
  
  GeometryContactPoint = X:-45 Y:-100 Z:0 Grab
  GeometryContactPoint = X:0  Y:0 Z:75 Grab
  GeometryContactPoint = X:-45  Y:100 Z:0 Grab
End

;------------------------------------------------------------------------------
;Helms Deep Gate do SectionB1
Object HelmsDeepdoSectionB1

SelectPortrait = BPCHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDOSecB1
    End
    
    ModelConditionState  = DAMAGED
      Model         = RBHDOSecB1_D1  
    End
    
    ModelConditionState  = REALLYDAMAGED
      Model         = RBHDOSecB1_D1  
    End
	
    ModelConditionState  = RUBBLE
      Model         = RBHDOSecB1_D1  
    End
    
    ModelConditionState  = POST_RUBBLE
		Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
    End
             
    WallBoundsMesh = P1
      
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepdoSectionB1
  Side                = Obsolete
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***
;  VoiceSelect         = NuclearReactorSelect
;  SoundOnDamaged        = BuildingDamagedStateLight
;  SoundOnReallyDamaged  = BuildingDestroy
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 
  ; *** ENGINEERING Parameters ***
  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR NOT_AUTOACQUIRABLE IGNORED_IN_GUI IGNORE_FOR_VICTORY NEVER_CULL_FOR_MP DONT_HIDE_IF_FOGGED ;SELECTABLE;@1 
 
  ; Immortal because they can't be destroyed, only damaged.  
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0    
  End

  ArmorSet
    Conditions        = None
    Armor             = HelmsDeepWalls
    DamageFX          = None
  End

  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End
 
  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= HelmsDeepWallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

  Geometry              = BOX
  GeometryMajorRadius   = 130.0
  GeometryMinorRadius   = 85.0
  GeometryHeight        = 90.0
  GeometryOffset		= X:0 Y:-10 Z:0

	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 80.0
	GeometryOffset		  = X:-80.0 Y:15.0 Z:0	
	  
	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 80.0
	GeometryOffset		  = X:0.0 Y:15.0 Z:0	  

	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 80.0
	GeometryOffset		  = X:80.0 Y:15.0 Z:0	  

	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 80.0
	GeometryOffset		  = X:40.0 Y:-60.0 Z:0	  
  
  GeometryIsSmall       = No
  GeometryFrontAngle    = -90.0
  Shadow                = SHADOW_VOLUME
  
  GeometryContactPoint = X:-100  Y:-20 Z:0 Grab
  GeometryContactPoint = X:-20  Y:0 Z:75 Grab
  GeometryContactPoint = X:30  Y:-93 Z:0 Grab
  GeometryContactPoint = X:120  Y:-30 Z:0 Grab
End


;------------------------------------------------------------------------------
;Helms Deep Gate do SectionD
Object HelmsDeepdoSectionD

SelectPortrait = BPCHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDOSecD
    End
    
    ModelConditionState  = DAMAGED
      Model         = RBHDOSecD_D1  
    End
    
    ModelConditionState  = REALLYDAMAGED
      Model         = RBHDOSecD_D1  
    End
	
    ModelConditionState  = RUBBLE
      Model         = RBHDOSecD_D1  
    End
    
    ModelConditionState  = POST_RUBBLE
		Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
    End
                     
    WallBoundsMesh = P2
    RampMesh1 = P1
      
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepdoSectionD
  Side                = Obsolete
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***
;  VoiceSelect         = NuclearReactorSelect
;  SoundOnDamaged        = BuildingDamagedStateLight
;  SoundOnReallyDamaged  = BuildingDestroy
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 
  ; *** ENGINEERING Parameters ***
  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR NOT_AUTOACQUIRABLE IGNORED_IN_GUI IGNORE_FOR_VICTORY NEVER_CULL_FOR_MP DONT_HIDE_IF_FOGGED ;SELECTABLE;@1  
 
  ; Immortal because they can't be destroyed, only damaged.  
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0    
  End

  ArmorSet
    Conditions        = None
    Armor             = HelmsDeepWalls
    DamageFX          = None
  End

  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End
 
  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= HelmsDeepWallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

  Geometry              = BOX
  GeometryMajorRadius   = 92.0
  GeometryMinorRadius   = 107.0
  GeometryHeight        = 90.0

	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 80.0
	GeometryOffset		  = X:65.0 Y:-130.0 Z:0	
	
	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 80.0
	GeometryOffset		  = X:65.0 Y:-50.0 Z:0	
	
	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 80.0
	GeometryOffset		  = X:65.0 Y:35.0 Z:0	
	
	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 80.0
	GeometryOffset		  = X:65.0 Y:120.0 Z:0	  
	
	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 80.0
	GeometryOffset		  = X:-15.0 Y:60.0 Z:0	
	
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  
  ;HelmsDeepdoSectionD Grab points for rock wielding ents
  GeometryContactPoint = X:-75 Y:30   Z:0 Grab  
  GeometryContactPoint = X:-65 Y:30   Z:70
  GeometryContactPoint = X:15  Y:30   Z:70
  GeometryContactPoint = X:21  Y:-120 Z:0 Grab
  
  
End


;------------------------------------------------------------------------------
;Helms Deep Gate do StairsA1
Object HelmsDeepdoStairsA1

SelectPortrait = BPCHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDOStA1
    End
    
    ModelConditionState  = DAMAGED
      Model         = RBHDOStA1_D1  
    End
    
    ModelConditionState  = REALLYDAMAGED
      Model         = RBHDOStA1_D1  
    End
	
    ModelConditionState  = RUBBLE
      Model         = RBHDOStA1_D1  
    End
    
    ModelConditionState  = POST_RUBBLE
		Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
    End
                             
    WallBoundsMesh = P2
    RampMesh1 = P1
    RampMesh2 = P3
      
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepdoStairsA1
  Side                = Obsolete
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***
;  VoiceSelect         = NuclearReactorSelect
;  SoundOnDamaged        = BuildingDamagedStateLight
;  SoundOnReallyDamaged  = BuildingDestroy
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 
  ; *** ENGINEERING Parameters ***
  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR NOT_AUTOACQUIRABLE IGNORED_IN_GUI IGNORE_FOR_VICTORY NEVER_CULL_FOR_MP DONT_HIDE_IF_FOGGED ;SELECTABLE;@1 
 
  ; Immortal because they can't be destroyed, only damaged.  
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0    
  End

  ArmorSet
    Conditions        = None
    Armor             = HelmsDeepWalls
    DamageFX          = None
  End

  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End
 
  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= HelmsDeepWallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

	Geometry              = BOX
	GeometryMajorRadius   = 70.0
	GeometryMinorRadius   = 50.0
	GeometryHeight        = 25.0
	GeometryOffset		= X:-10 Y:0 Z:0
	GeometryIsSmall       = No
	Shadow                = SHADOW_VOLUME
	
	GeometryContactPoint = X:-10 Y:55  Z:0 Grab
	GeometryContactPoint = X:-10 Y:48  Z:0 
	GeometryContactPoint = X:-10 Y:48  Z:25 
	GeometryContactPoint = X:25 Y:-48  Z:25 
	GeometryContactPoint = X:65 Y:48  Z:25 
	GeometryContactPoint = X:65 Y:58  Z:0 
	GeometryContactPoint = X:65  Y:55  Z:0 Grab
End


;------------------------------------------------------------------------------
;Helms Deep Gate do StairsA4
Object HelmsDeepdoStairsA4

SelectPortrait = BPCHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDOStA4
    End
    
    ModelConditionState  = DAMAGED
      Model         = RBHDOStA4_D1  
    End
    
    ModelConditionState  = REALLYDAMAGED
      Model         = RBHDOStA4_D1  
    End
	
    ModelConditionState  = RUBBLE
      Model         = RBHDOStA4_D1  
    End
    
    ModelConditionState  = POST_RUBBLE
		Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
    End
                                     
    WallBoundsMesh = P2
    RampMesh1 = P1
    RampMesh2 = P3
    
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepdoStairsA4
  Side                = Obsolete
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***
;  VoiceSelect         = NuclearReactorSelect
;  SoundOnDamaged        = BuildingDamagedStateLight
;  SoundOnReallyDamaged  = BuildingDestroy
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 
  ; *** ENGINEERING Parameters ***
  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR NOT_AUTOACQUIRABLE IGNORED_IN_GUI IGNORE_FOR_VICTORY NEVER_CULL_FOR_MP DONT_HIDE_IF_FOGGED ;SELECTABLE;@1 
 
  ; Immortal because they can't be destroyed, only damaged.  
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0    
  End

  ArmorSet
    Conditions        = None
    Armor             = HelmsDeepWalls
    DamageFX          = None
  End

  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End
 
  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= WallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

	Geometry              = BOX
	GeometryMajorRadius   = 80.0
	GeometryMinorRadius   = 50.0
	GeometryHeight        = 45.0
	GeometryOffset		= X:0 Y:0 Z:0
	GeometryIsSmall       = No
	Shadow                = SHADOW_VOLUME
	
	GeometryContactPoint = X:-15 Y:55  Z:0 Grab
	GeometryContactPoint = X:-15 Y:48  Z:0 
	GeometryContactPoint = X:-15 Y:48  Z:43 
	GeometryContactPoint = X:30 Y:-48  Z:43 
	GeometryContactPoint = X:80 Y:48  Z:43 
	GeometryContactPoint = X:80 Y:48  Z:0 
	GeometryContactPoint = X:80  Y:55  Z:0 Grab
End

;------------------------------------------------------------------------------
;Helms Deep Gate do StairsA5
Object HelmsDeepdoStairsA5

SelectPortrait = BPCHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDOStA5
    End
                                             
    WallBoundsMesh = P2
    RampMesh1 = P1
    RampMesh2 = P3
    
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepdoStairsA5
  Side                = Obsolete
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***
;  VoiceSelect         = NuclearReactorSelect
;  SoundOnDamaged        = BuildingDamagedStateLight
;  SoundOnReallyDamaged  = BuildingDestroy
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 
  ; *** ENGINEERING Parameters ***
  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR NOT_AUTOACQUIRABLE IGNORED_IN_GUI IGNORE_FOR_VICTORY NEVER_CULL_FOR_MP DONT_HIDE_IF_FOGGED;SELECTABLE;@1  
 
  ; Immortal because they can't be destroyed, only damaged.  
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0    
  End

  ArmorSet
    Conditions        = None
    Armor             = HelmsDeepWalls
    DamageFX          = None
  End

  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End
 
  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= HelmsDeepWallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

	Geometry              = BOX
	GeometryMajorRadius   = 80.0
	GeometryMinorRadius   = 50.0
	GeometryHeight        = 45.0
	GeometryOffset		= X:0 Y:0 Z:0
	GeometryIsSmall       = No
	Shadow                = SHADOW_VOLUME
	
	GeometryContactPoint = X:-15 Y:50  Z:0 Grab
	GeometryContactPoint = X:-15 Y:43  Z:0 
	GeometryContactPoint = X:-15 Y:43  Z:48 
	GeometryContactPoint = X:30 Y:-43  Z:48 
	GeometryContactPoint = X:75 Y:43  Z:48 
	GeometryContactPoint = X:75 Y:43  Z:0 
	GeometryContactPoint = X:75  Y:50  Z:0 Grab
End

;------------------------------------------------------------------------------
;Helms Deep Gate Tower
Object HelmsDeepTower

SelectPortrait = BPCHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDTower
    End
    
    ModelConditionState  = DAMAGED
      Model         = RBHDTower_D1  
    End
    
    ModelConditionState  = REALLYDAMAGED
      Model         = RBHDTower_D1  
    End
	
    ModelConditionState  = RUBBLE
      Model         = RBHDTower_D1  
    End
    
    ModelConditionState  = POST_RUBBLE
		Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
    End
        
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepTower
  Side                = Obsolete
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


  ; *** AUDIO Parameters ***

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone

;  VoiceSelect         = NuclearReactorSelect
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 

  ; *** ENGINEERING Parameters ***

  RadarPriority       = NOT_ON_RADAR
  KindOf              = PRELOAD STRUCTURE IMMOBILE SCORE NOT_AUTOACQUIRABLE IGNORED_IN_GUI IGNORE_FOR_VICTORY NEVER_CULL_FOR_MP DONT_HIDE_IF_FOGGED;SELECTABLE;@1 
 
  ; Immortal because they can't be destroyed, only damaged.  
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 10000.0
    MaxHealthDamaged = 5000
    MaxHealthReallyDamaged = 2500
  End

  ArmorSet
    Conditions        = None
    Armor             = HelmsDeepWalls
    DamageFX          = None
  End

  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End
 
  Geometry              = CYLINDER
  GeometryMajorRadius   = 68.0
  GeometryMinorRadius   = 68.0
  GeometryHeight        = 420.0

	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 420.0
	GeometryOffset		  = X:40.0 Y:-40.0 Z:0	
	
	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 420.0
	GeometryOffset		  = X:40.0 Y:40.0 Z:0	

	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 420.0
	GeometryOffset		  = X:-40.0 Y:40.0 Z:0	

	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 420.0
	GeometryOffset		  = X:-40.0 Y:-40.0 Z:0	

	
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
End



;------------------------------------------------------------------------------------------
Object RBHelmsDeepGateDoorBig

SelectPortrait = BPCHelmsDeep

  ; *** ART Parameters ***

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes

    DefaultModelConditionState  
      Model = RBHDGatDr
    End

	ModelConditionState = ACTIVELY_BEING_CONSTRUCTED
		Model	= None
	End

    ModelConditionState  = RUBBLE DOOR_1_OPENING
      Model         = RBHDGatDr_D4  
    End
	AnimationState = RUBBLE DOOR_1_OPENING
		Animation = Open 
			AnimationName	=	RBHDGatDr_D4.RBHDGatDr_D4
			AnimationMode	=	ONCE 
		End
    End
       
      ModelConditionState  = RUBBLE
      Model         = RBHDGatDr_D3  
    End
 	AnimationState = RUBBLE 
		Animation = Open 
			AnimationName	=	RBHDGatDr_D3.RBHDGatDr_D3
			AnimationMode	=	ONCE 
		End
    End
    
	AnimationState = DOOR_1_OPENING
		StateName = STATE_Open   
		Animation = Open 
			AnimationName	=	RBHDGatDr.RBHDGatDr
			AnimationMode	=	ONCE 
			AnimationBlendTime = 0
		End
		Flags = START_FRAME_LAST
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "STATE_Closed" then CurDrawableSetTransitionAnimState("TRANS_Closed_To_Open") end
		EndScript
    End
    TransitionState = TRANS_Closed_To_Open
		Animation = Open 
			AnimationName	=	RBHDGatDr.RBHDGatDr
			AnimationMode	=	ONCE 
		End
    End
        
	AnimationState = DOOR_1_CLOSING 
		StateName = STATE_Closed 
		Animation = Close 
			AnimationName	=	RBHDGatDr.RBHDGatDr
			AnimationMode	=	ONCE_BACKWARDS 
			AnimationBlendTime = 0
		End
		Flags = START_FRAME_FIRST
		BeginScript
			
			Prev = CurDrawablePrevAnimationState()
			if Prev == "STATE_Open" then CurDrawableSetTransitionAnimState("TRANS_Open_To_Closed") end
		EndScript
    End
    TransitionState = TRANS_Open_To_Closed
		Animation = Open 
			AnimationName	=	RBHDGatDr.RBHDGatDr
			AnimationMode	=	ONCE_BACKWARDS 
		End
		Flags = START_FRAME_LAST
    End

  End


  ; *** AUDIO Parameters ***

	VoiceSelect		= GateSelect

	SoundOnDamaged		= BuildingLightDamageStone
	SoundOnReallyDamaged	= BuildingHeavyDamageStone


  ; ***DESIGN parameters ***
  DisplayName		= OBJECT:RBHelmsDeepGateDoorBig
  Side				= Obsolete
  EditorSorting		= STRUCTURE
  ThreatLevel		= 1.0
  BuildCost			= MONUMENT_FORTRESS_GATE_BUILDCOST

  VisionRange         = 1600.0          ; Shroud clearing distance

  ArmorSet
    Conditions        = None
    Armor             = DefaultWallArmor
    DamageFX          = GateDamageFX
  End

	CommandSet = CastleGateCommandSet_NoSell


	; *** ENGINEERING Parameters ***  
	KindOf                = STRUCTURE IMMOBILE SELECTABLE BLOCKING_GATE WALL_GATE IGNORE_FOR_VICTORY NEVER_CULL_FOR_MP
	RadarPriority = NOT_ON_RADAR
	KeepSelectableWhenDead	= Yes

	Body                  = ActiveBody ModuleTag_02
		MaxHealth       = 4000.0
	End

	Behavior = AIUpdateInterface ModuleTag_AIForSequentialScriptsToWork
		; required for sequential scripts to work on this object
	End

	Behavior            = GettingBuiltBehavior GetBuiltBehaviorTag
		SelfBuildingLoop			= BuildingConstructionLoop		; Only played if we DON'T spawn a worker
		SelfRepairFromDamageLoop	= NoSound						; This doesn't cause an animation, so don't bother playing a sound
		SelfRepairFromRubbleLoop	= BuildingConstructionLoop
		SpawnTimer					= -1.0							; Negative means no 'autoheal'
		RebuildTimeSeconds			= 40
	End

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
  Behavior = KeepObjectDie ModuleTag_IWantRubble
  End

	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		MaxUpdateRangeCap = 800
		AnimationSound = Sound: MinisTirithGateDie Animation:GBMgatedoorSKL.GBMgatedoorA3 Frames: 1 
	End

	Behavior = TransitionDamageFX ModleTag_hideBustedDoors
		PristineShowSubObject		HDG_GATER HDG_GATEL
		PristineHideSubObject		HDG_GATER_D1 HDG_GATER_D2 HDG_GATEL_D1 HDG_GATEL_D2
		DamagedShowSubObject		HDG_GATER_D1 HDG_GATEL_D1
		DamagedHideSubObject		HDG_GATER_D2 HDG_GATEL_D2 HDG_GATER HDG_GATEL
		ReallyDamagedShowSubObject	HDG_GATER_D2 HDG_GATEL_D2
		ReallyDamagedHideSubObject  HDG_GATER_D1  HDG_GATEL_D1 HDG_GATER HDG_GATEL
        DamagedFXList1 = Loc: X:0 Y:0 Z:0			FXList:FX_BasicSevereScreenShake
 	    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0		FXList:FX_BasicSevereScreenShake
 	    RubbleFXList1 = Loc: X:0 Y:0 Z:0			FXList:FX_HelmsDeepGateRubble
	End

	Behavior = GateOpenAndCloseBehavior ModuleTag_GATE
		ResetTimeInMilliseconds = 12200 ; important! this must be longer than the gates animation, ir it will twitch
		OpenByDefault = Yes
		PercentOpenForPathing = 50
		SoundOpeningGateLoop = GateOpenStart
		SoundClosingGateLoop = GateCloseStart
		SoundFinishedOpeningGate = GateOpenEnd
		SoundFinishedClosingGate = GateCloseEnd
		TimeBeforePlayingOpenSound = 6000
		TimeBeforePlayingClosedSound = 6000
	End

	Behavior = FakePathfindPortalBehaviour ModuleTag_FAKEPATHFIND
		AllowEnemies			= No
		AllowNonSkirmishAIUnits	= No
	End
	
	Behavior = AIGateUpdate ModuleTage_AIGateUpdate
		TriggerWidthX = 450.0
		TriggerWidthY = 225.0
	End

	Geometry              = BOX
	GeometryMajorRadius   = 1.0
	GeometryMinorRadius   = 62.0
	GeometryHeight        = 64.0
	GeometryName          = Closed	
	GeometryOffset		  = X:-5.0 Y:0.0 Z: 0.0
	GeometryIsSmall       = No

	AdditionalGeometry    = BOX
	GeometryMajorRadius   = 17.0
	GeometryMinorRadius   = 10.0
	GeometryHeight        = 60.0	
	GeometryOffset		  = X:10 Y:45 Z:0
	GeometryName          = OpenLeft
	
	AdditionalGeometry    = BOX
	GeometryMajorRadius   = 17.0
	GeometryMinorRadius   = 10.0
	GeometryHeight        = 60.0	
	GeometryOffset		  = X:10 Y:-45 Z:0
	GeometryName          = OpenRight
	
	GeometryContactPoint =	X:23	Y:-39	Z:0 Ram
	GeometryContactPoint =	X:12	Y:-45	Z:60
	GeometryContactPoint =	X:0		Y:-50	Z:0
	GeometryContactPoint =	X:0		Y:-25	Z:60
	GeometryContactPoint =	X:0		Y:0		Z:0 Ram
	GeometryContactPoint =	X:0		Y:25	Z:60
	GeometryContactPoint =	X:0		Y:50	Z:0
	GeometryContactPoint =	X:12	Y:45	Z:60
	GeometryContactPoint =	X:23	Y:39	Z:0 Ram
	

	Shadow                = SHADOW_VOLUME
End




;------------------------------------------------------------------------------------------
Object RBHelmsDeepGateDoorSmall

	SelectPortrait = BPCHelmsDeep

  ; *** ART Parameters ***

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes

    DefaultModelConditionState  
      Model = RBHDIGatDr
    End

	ModelConditionState = ACTIVELY_BEING_CONSTRUCTED
		Model = None
	End

	ModelConditionState  = RUBBLE DOOR_1_OPENING
       Model         = RBHDIGATDR_D4  
     End
 	AnimationState = RUBBLE DOOR_1_OPENING
 		Animation = Open 
 			AnimationName	=	RBHDIGATDR_D4.RBHDIGATDR_D4
 			AnimationMode	=	ONCE 
 		End
     End
        
       ModelConditionState  = RUBBLE
       Model         = RBHDIGATDR_D3  
     End
  	AnimationState = RUBBLE 
 		Animation = Open 
 			AnimationName	=	RBHDIGATDR_D3.RBHDIGATDR_D3
 			AnimationMode	=	ONCE 
 		End
     End
     
	AnimationState = DOOR_1_OPENING
		StateName = STATE_Open   
		Animation = Open 
			AnimationName	=	RBHDIGATDR.RBHDIGATDR
			AnimationMode	=	ONCE 
			AnimationBlendTime = 0
		End
		Flags = START_FRAME_LAST
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "STATE_Closed" then CurDrawableSetTransitionAnimState("TRANS_Closed_To_Open") end
		EndScript
    End
    TransitionState = TRANS_Closed_To_Open
		Animation = Open 
			AnimationName	=	RBHDIGATDR.RBHDIGATDR
			AnimationMode	=	ONCE 
		End
    End
        
	AnimationState = DOOR_1_CLOSING 
		StateName = STATE_Closed 
		Animation = Close 
			AnimationName	=	RBHDIGATDR.RBHDIGATDR
			AnimationMode	=	ONCE_BACKWARDS 
			AnimationBlendTime = 0
		End
		Flags = START_FRAME_FIRST
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "STATE_Open" then CurDrawableSetTransitionAnimState("TRANS_Open_To_Closed") end
		EndScript
    End
    TransitionState = TRANS_Open_To_Closed
		Animation = Open 
			AnimationName	=	RBHDIGATDR.RBHDIGATDR
			AnimationMode	=	ONCE_BACKWARDS 
		End
		Flags = START_FRAME_LAST
    End

  End


  ; *** AUDIO Parameters ***

	VoiceSelect		= GateSelect


  ; ***DESIGN parameters ***

  DisplayName		= OBJECT:RBHelmsDeepGateDoorSmall
  Side				= Obsolete
  EditorSorting		= STRUCTURE
  ThreatLevel		= 1.0
  BuildCost			= MONUMENT_FORTRESS_GATE_BUILDCOST

  VisionRange         = 1600.0          ; Shroud clearing distance

  ArmorSet
    Conditions        = None
    Armor             = DefaultWallArmor
    DamageFX          = GateDamageFX
  End

	CommandSet = CastleGateCommandSet


	; *** ENGINEERING Parameters ***  
	KindOf					= STRUCTURE IMMOBILE SELECTABLE BLOCKING_GATE WALL_GATE IGNORE_FOR_VICTORY NEVER_CULL_FOR_MP
	RadarPriority			= NOT_ON_RADAR
	KeepSelectableWhenDead	= Yes

	Body                  = ActiveBody ModuleTag_02
		MaxHealth       = 3500.0
	End

	Behavior = AIUpdateInterface ModuleTag_AIForSequentialScriptsToWork
		; required for sequential scripts to work on this object
	End

	Behavior            = GettingBuiltBehavior GetBuiltBehaviorTag
		SelfBuildingLoop			= BuildingConstructionLoop		; Only played if we DON'T spawn a worker
		SelfRepairFromDamageLoop	= NoSound						; This doesn't cause an animation, so don't bother playing a sound
		SelfRepairFromRubbleLoop	= BuildingConstructionLoop
		SpawnTimer					= -1.0							; Negative means no 'autoheal'
		RebuildTimeSeconds			= 40
	End

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
  Behavior = KeepObjectDie ModuleTag_IWantRubble
  End

	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		MaxUpdateRangeCap = 800
		AnimationSound = Sound: MinisTirithGateDie Animation:GBMgatedoorSKL.GBMgatedoorA3 Frames: 1 
	End

	Behavior = TransitionDamageFX ModleTag_hideBustedDoors
 		PristineShowSubObject		HDG_GATER HDG_GATEL
 		PristineHideSubObject		HDG_GATER_D1 HDG_GATER_D2 HDG_GATEL_D1 HDG_GATEL_D2
 		DamagedShowSubObject		HDG_GATER_D1 HDG_GATEL_D1
 		DamagedHideSubObject		HDG_GATER_D2 HDG_GATEL_D2 HDG_GATER HDG_GATEL
 		ReallyDamagedShowSubObject	HDG_GATER_D2 HDG_GATEL_D2
 		ReallyDamagedHideSubObject  HDG_GATER_D1  HDG_GATEL_D1 HDG_GATER HDG_GATEL
         DamagedFXList1 = Loc: X:0 Y:0 Z:0			FXList:FX_BasicSevereScreenShake
  	    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0		FXList:FX_BasicSevereScreenShake
  	    RubbleFXList1 = Loc: X:0 Y:0 Z:0			FXList:FX_HelmsDeepGateRubble
 	End

	Behavior = GateOpenAndCloseBehavior ModuleTag_GATE
		ResetTimeInMilliseconds = 12200 ; important! this must be longer than the gates animation, ir it will twitch
		OpenByDefault = Yes
		PercentOpenForPathing = 50
		SoundOpeningGateLoop = GateOpenStart
		SoundClosingGateLoop = GateCloseStart
		SoundFinishedOpeningGate = GateOpenEnd
		SoundFinishedClosingGate = GateCloseEnd
		TimeBeforePlayingOpenSound = 8500
		TimeBeforePlayingClosedSound = 8500
	End
	
	Behavior = FakePathfindPortalBehaviour ModuleTag_FAKEPATHFIND
		AllowEnemies			= No
		AllowNonSkirmishAIUnits	= No
	End
	
	Behavior = AIGateUpdate ModuleTage_AIGateUpdate
		TriggerWidthX = 450.0
		TriggerWidthY = 225.0
	End

	Geometry              = BOX
	GeometryMajorRadius   = 1.0
	GeometryMinorRadius   = 57.0
	GeometryHeight        = 56.0
	GeometryName          = Closed
	GeometryOffset		  = X:-5.0 Y:0.0 Z: 0.0
	GeometryIsSmall       = No
	
	AdditionalGeometry    = BOX
	GeometryMajorRadius   = 20.0
	GeometryMinorRadius   = 5.0
	GeometryHeight        = 56.0	
	GeometryOffset		  = X:10 Y:50 Z:0
	GeometryName          = OpenLeft
	
	AdditionalGeometry    = BOX
	GeometryMajorRadius   = 20.0
	GeometryMinorRadius   = 5.0
	GeometryHeight        = 56.0	
	GeometryOffset		  = X:10 Y:-50 Z:0
	GeometryName          = OpenRight
	
	GeometryContactPoint = X:24		Y:-50	Z:0 Ram
	GeometryContactPoint = X:12		Y:-50	Z:45
	GeometryContactPoint = X:0		Y:-50	Z:0
	GeometryContactPoint = X:0		Y:-25	Z:54
	GeometryContactPoint = X:0		Y:0		Z:0 Ram
	GeometryContactPoint = X:0		Y:25	Z:54
	GeometryContactPoint = X:0		Y:50	Z:0
	GeometryContactPoint = X:12		Y:50	Z:45
	GeometryContactPoint = X:24		Y:50	Z:0 Ram
	
	
	Shadow                = SHADOW_VOLUME
End
