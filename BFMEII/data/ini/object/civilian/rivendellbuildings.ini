;------------------------------------------------------------------------------ 
;Rivendell Gate
Object RivGate

	SelectPortrait = BPCRivendellGate
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes

    DefaultModelConditionState  
      Model = RivGate
    End

;--------- damage states for the gate

		ModelConditionState   = DAMAGED
			Model               = RivGate_D1
		End
		
//		Having this AnimationState in results in a bug where an opened gate will switch 
//		to closed when it becomes damaged!
//		AnimationState = DAMAGED
//			EnteringStateFX = FX_RDGateDamaged
//		End
		
		
				
		ModelConditionState   = REALLYDAMAGED
			Model               = RivGate_D2
		End
		
//		Having this AnimationState in results in a bug where an opened gate will switch 
//		to closed when it becomes damaged!
//		AnimationState = REALLYDAMAGED
//			EnteringStateFX = FX_RDGateReallyDamaged
//		End


		ModelConditionState  = COLLAPSING DOOR_1_OPENING
			Model         = RivGate_D3
		End
		AnimationState = COLLAPSING DOOR_1_OPENING
      		Animation				=	RubbleAnimation
				AnimationName		=	 RivGate_D3.RivGate_D3
				AnimationMode		=	ONCE
  			End
		End
		
		ModelConditionState  = COLLAPSING
			Model         = RivGate_D4
		End
		AnimationState = COLLAPSING
      		Animation				=	RubbleAnimation
				AnimationName		=	 RivGate_D4.RivGate_D4
				AnimationMode		=	ONCE
  			End
  			EnteringStateFX	= FX_BuildingSinkSound
		End

		ModelConditionState  = RUBBLE
			Model         = RivGate_D4  
		End  
		AnimationState = RUBBLE
      		Animation				=	RubbleAnimation
				AnimationName		=	 RivGate_D4.RivGate_D4
				AnimationMode		=	ONCE
  			End
  			Flags				=	START_FRAME_LAST
		End
				
		ModelConditionState  = POST_RUBBLE
			Model         = NONE
		End
		AnimationState = POST_RUBBLE
		End

		ModelConditionState  = POST_COLLAPSE
		Model         = None
			ParticleSysBone NONE SmokeBuildingMediumRubble
		End
		AnimationState = POST_COLLAPSE
			ParticleSysBone NONE SmokeBuildingMediumRubble
		End 

				
;------ Door Animations

		AnimationState = DOOR_1_OPENING 
			Flags = START_FRAME_LAST
			StateName = Door_Open
			Animation				=	Death
				AnimationName		=	RivGate_SKL.RivGate_OP
				AnimationMode		=	ONCE
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Door_Close" then CurDrawableSetTransitionAnimState("TRANS_Closed_To_Open") end
			EndScript
		End
		TransitionState = TRANS_Closed_To_Open
			Animation = Open 
				AnimationName	=	RivGate_SKL.RivGate_OPN
				AnimationMode	=	ONCE 
			End
		End
    
		AnimationState = DOOR_1_CLOSING 
			Flags = START_FRAME_LAST
			StateName = Door_Close
			Animation				=	Death
				AnimationName		=	RivGate_SKL.RivGate_CL
				AnimationMode		=	ONCE
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Door_Open" then CurDrawableSetTransitionAnimState("TRANS_Open_To_Closed") end
			EndScript
		End
		TransitionState = TRANS_Open_To_Closed
			Animation = Open 
				AnimationName	=	RivGate_SKL.RivGate_CLS
				AnimationMode	=	ONCE 
			End
		End
		
  End
  
	// ***DESIGN parameters ***
	DisplayName		= OBJECT:RivendellGate
	Side				= Civilian
	EditorSorting		= STRUCTURE
	Browser			= REGION Rivendell STRUCTURE
	ThreatLevel		= 1.0
		
	CommandSet = CastleGateCommandSet
	 
	BuildCost           	= 500
	BuildTime           	= 15.0           ; in seconds
	VisionRange         	= 160.0          ; Shroud clearing distance
	ShroudClearingRange 	= 160
	KeepSelectableWhenDead	= Yes

	ArmorSet
		Conditions        = None
		Armor             = RivGateArmor
		DamageFX          = GateDamageFX
	End

  ; *** AUDIO Parameters ***

	SoundOnDamaged		= BuildingLightDamageStone
	SoundOnReallyDamaged	= BuildingHeavyDamageStone

	;  VoiceSelect         = GondorBarracksSelect
	 
	;  UnitSpecificSounds
	;  UnderConstruction     = UnderConstructionLoop
	;  End
 

	// *** ENGINEERING Parameters ***

    RadarPriority       = STRUCTURE
	KindOf              = STRUCTURE IMMOBILE SELECTABLE BLOCKING_GATE MADE_OF_WOOD IGNORE_FOR_VICTORY
	;KindOf              = PRELOAD STRUCTURE IMMOBILE CHUNK_VENDOR  NOT_AUTOACQUIRABLE SELECTABLE BLOCKING_GATE ;WALK_ON_TOP_OF_WALL

	Body						= ActiveBody ModuleTag_05
		MaxHealth				= 7000.0
		MaxHealthDamaged		= 3000.0
		MaxHealthReallyDamaged  = 1000.0
	End

	Behavior = KeepObjectDie ModuleTag_IWantRubble
		;CollapsingTime = 10000
	End

	Behavior            = GettingBuiltBehavior GetBuiltBehaviorTag
		SelfBuildingLoop			= BuildingConstructionLoop		; Only played if we DON'T spawn a worker
		SelfRepairFromDamageLoop	= NoSound						; This doesn't cause an animation, so don't bother playing a sound
		SelfRepairFromRubbleLoop	= BuildingConstructionLoop
		SpawnTimer					= -1.0							; Negative means no 'autoheal'
		RebuildTimeSeconds			= 40
	End
	
	Behavior = GateOpenAndCloseBehavior ModuleTag_GATE
		ResetTimeInMilliseconds			= 2000				;important! this must be longer than the gates animation, ir it will twitch
		OpenByDefault					= No
		PercentOpenForPathing			= 50
		SoundOpeningGateLoop			= GateOpenStart
		SoundClosingGateLoop			= GateCloseStart
		SoundFinishedOpeningGate		= GateOpenEnd
		SoundFinishedClosingGate		= GateCloseEnd
		TimeBeforePlayingOpenSound		= 9500
		TimeBeforePlayingClosedSound	= 9500
	End	
	  
	AttackContactPoint = X:-24 Y:-24 Z:92
	
	Geometry			  = BOX
	GeometryMajorRadius   = 45.0  
	GeometryMinorRadius   = 40.0  
	GeometryHeight        = 65.0
	GeometryOffset		= X:0 Y:-80 Z:0
	
	AdditionalGeometry	  = BOX
	GeometryMajorRadius   = 45.0  
	GeometryMinorRadius   = 40.0  
	GeometryHeight        = 65.0
	GeometryOffset		= X:0 Y:80 Z:0

	AdditionalGeometry	  = BOX
	GeometryName		  = "Closed"
	GeometryMajorRadius   = 5.0
	GeometryMinorRadius   = 60.0
	GeometryHeight        = 65.0
	GeometryOffset		= X:30 Y:0 Z:0
	
	; Left open
	AdditionalGeometry    = BOX
	GeometryName		  = "OpenLeft"
	GeometryMajorRadius   = 45.0  
	GeometryMinorRadius   = 10.0  
	GeometryHeight        = 65.0
	GeometryOffset        = X:0 Y:-40 Z:0
	
	; Right open
	AdditionalGeometry    = BOX
	GeometryName		  = "OpenRight"
	GeometryMajorRadius   = 45.0  
	GeometryMinorRadius   = 10.0  
	GeometryHeight        = 65.0
	GeometryOffset        = X:0 Y:40 Z:0   
	
	
	GeometryIsSmall       = No
	  
	Shadow                = SHADOW_VOLUME
End

;------------------------------------------------------------------------------ 
;Rivendell Gate
Object RivGateLeftSide

;	SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes

    DefaultModelConditionState
      Model = RivGateLS		
    End
    
	;WallBoundsMesh = P1
	;RampMesh1 = P2
	;RampMesh2 = P3   
    
  End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:Prop
  Side                = Civilian
  EditorSorting       = STRUCTURE
  Browser = REGION Rivendell STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 500
  BuildTime           = 15.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160


;  CommandSet          = GondorBarracksCommandSet

 
  ; *** AUDIO Parameters ***

	SoundOnDamaged		= BuildingLightDamageStone
	SoundOnReallyDamaged	= BuildingHeavyDamageStone

	;  VoiceSelect         = GondorBarracksSelect
	 
	;  UnitSpecificSounds
	;  UnderConstruction     = UnderConstructionLoop
	;  End
 

	; *** ENGINEERING Parameters ***

    RadarPriority       = STRUCTURE
	KindOf              = PRELOAD STRUCTURE IMMOBILE CHUNK_VENDOR  NOT_AUTOACQUIRABLE IGNORED_IN_GUI ;WALK_ON_TOP_OF_WALL SELECTABLE 

	Body						= ActiveBody ModuleTag_05
		MaxHealth				= 10000.0
		MaxHealthDamaged		= 5000.0
		MaxHealthReallyDamaged  = 1000.0
	End

	ArmorSet
		Conditions        = None
		Armor             = StructureArmor
		DamageFX          = GateDamageFX
	End

	Behavior = ProductionUpdate ModuleTag_06
		; nothing
	End
  
	Behavior                  = StructureCollapseUpdate ModuleTag_08
		MinCollapseDelay        = 000
		MaxCollapseDelay        = 000
		CollapseDamping         = .5
		MaxShudder              = 0.6
		MinBurstDelay           = 250
		MaxBurstDelay           = 800
		BigBurstFrequency       = 4
		FXList                  = INITIAL   FX_StructureMediumCollapse
		FXList                  = ALMOST_FINAL  FX_StructureAlmostCollapse
		DestroyObjectWhenDone	= Yes
		CollapseHeight			= 155
	End
  
	AttackContactPoint = X:-24 Y:-24 Z:92

	Geometry              = BOX
	GeometryMajorRadius   = 46.0
	GeometryMinorRadius   = 33.0
	GeometryHeight        = 100.0
	GeometryOffset		= X:0 Y:-86 Z:0
	
	GeometryIsSmall       = No
	  
	Shadow                = SHADOW_VOLUME
End


;------------------------------------------------------------------------------ 
;Rivendell Gate
ObjectReskin RivGateLeftSide_Snow RivGateLeftSide

;	SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes

    DefaultModelConditionState
      Model = RivGateLS_S
    End
    
	;WallBoundsMesh = P1
	;RampMesh1 = P2
	;RampMesh2 = P3   
    
  End
End

;------------------------------------------------------------------------------ 
;Rivendell Gate
Object RivGateRightSide

;	SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes

    DefaultModelConditionState
      Model = RivGateRS		
    End
    
	;WallBoundsMesh = P1
	;RampMesh1 = P2
	;RampMesh2 = P3   
    
  End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:Prop
  Side                = Civilian
  EditorSorting       = STRUCTURE
  Browser = REGION Rivendell STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 500
  BuildTime           = 15.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160


;  CommandSet          = GondorBarracksCommandSet

 
  ; *** AUDIO Parameters ***

	SoundOnDamaged		= BuildingLightDamageStone
	SoundOnReallyDamaged	= BuildingHeavyDamageStone

	;  VoiceSelect         = GondorBarracksSelect
	 
	;  UnitSpecificSounds
	;  UnderConstruction     = UnderConstructionLoop
	;  End
 

	; *** ENGINEERING Parameters ***

    RadarPriority       = STRUCTURE
	KindOf              = PRELOAD STRUCTURE IMMOBILE CHUNK_VENDOR  NOT_AUTOACQUIRABLE  IGNORED_IN_GUI  ;WALK_ON_TOP_OF_WALL SELECTABLE

	Body						= ActiveBody ModuleTag_05
		MaxHealth				= 10000.0
		MaxHealthDamaged		= 5000.0
		MaxHealthReallyDamaged  = 1000.0
	End

	ArmorSet
		Conditions        = None
		Armor             = StructureArmor
		DamageFX          = GateDamageFX
	End

	Behavior = ProductionUpdate ModuleTag_06
		; nothing
	End
  
	Behavior                  = StructureCollapseUpdate ModuleTag_08
		MinCollapseDelay        = 000
		MaxCollapseDelay        = 000
		CollapseDamping         = .5
		MaxShudder              = 0.6
		MinBurstDelay           = 250
		MaxBurstDelay           = 800
		BigBurstFrequency       = 4
		FXList                  = INITIAL   FX_StructureMediumCollapse
		FXList                  = ALMOST_FINAL  FX_StructureAlmostCollapse
		DestroyObjectWhenDone	= Yes
		CollapseHeight			= 155
	End
  
	AttackContactPoint = X:-24 Y:-24 Z:92

	Geometry              = BOX
	GeometryMajorRadius   = 46.0
	GeometryMinorRadius   = 33.0
	GeometryHeight        = 100.0
	GeometryOffset		= X:0 Y:86 Z:0
	
	
	GeometryIsSmall       = No
	  
	Shadow                = SHADOW_VOLUME
End


;------------------------------------------------------------------------------ 
;Rivendell Gate
ObjectReskin RivGateRightSide_Snow RivGateRightSide

;	SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes

    DefaultModelConditionState
      Model = RivGateRS_S	
    End
    
	;WallBoundsMesh = P1
	;RampMesh1 = P2
	;RampMesh2 = P3   
    
  End
End

;------------------------------------------------------------------------------
;Rivendell Walkway
Object RivWalkway

;	SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
	ExtraPublicBone = SIEGELADDER

    DefaultModelConditionState
      Model = RivWalkway
    End

    WallBoundsMesh = P1
        
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:Prop
  Side                = Civilian
  EditorSorting       = STRUCTURE
  Browser = REGION Rivendell STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone

;  VoiceSelect         = NuclearReactorSelect
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 

  ; *** ENGINEERING Parameters ***

  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE IGNORED_IN_GUI ;SELECTABLE;
 
	Behavior = SiegeDockingBehavior ModuleTag_SiegeDocking
	End

  Body                  = ActiveBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0    
  End
  
  ArmorSet
    Conditions        = None
    Armor             = HelmsDeepWalls
    DamageFX          = None
  End

	; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
	; never truly destroyed, even when reduced to zero health. Also note that garrisonable
	; buildings automatically stick around because GarrisonContain has it's own DieModule
	Behavior = KeepObjectDie ModuleTag_IWantRubble
	End

;  Behavior            = DestroyDie ModuleTag_07
;    ;nothing
;  End
 
  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= HelmsDeepWallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

; 	Behavior = FireWeaponWhenDeadBehavior FireDeadTag1
;		DeathTypes		= ALL
;		StartsActive	= Yes
;		DeathWeapon		= WallDeath
;	End	

	Geometry              = BOX
	GeometryMajorRadius   = 35.0
	GeometryMinorRadius   = 35.0
	GeometryHeight        = 50.0
	GeometryOffset		  = X:0 Y:0.0 Z:0
	
	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 30.0
	GeometryMinorRadius   = 30.0
	GeometryHeight        = 50.0
	GeometryOffset		  = X:0.0 Y:0.0 Z:0.0
	
	GeometryIsSmall       = No
	Shadow                = SHADOW_VOLUME
  
  	GeometryContactPoint = X:-90  Y:70  Z:0 Grab
	GeometryContactPoint = X:-90  Y:-40 Z:0 Grab
	GeometryContactPoint = X:-90  Y:-30 Z:10 
	GeometryContactPoint = X:-60  Y:-30 Z:60 
	GeometryContactPoint = X:-30   Y:-30 Z:10 
	GeometryContactPoint = X:0    Y:-30 Z:60
	GeometryContactPoint = X:30   Y:-30 Z:10
	GeometryContactPoint = X:60  Y:-30 Z:60
	GeometryContactPoint = X:90  Y:-30 Z:10 
	GeometryContactPoint = X:90 Y:-40 Z:0 Grab
	GeometryContactPoint = X:90 Y:70  Z:0 Grab
End



;------------------------------------------------------------------------------
;Rivendell Walkway
Object RivWalkwayT

SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
	ExtraPublicBone = SIEGELADDER

    DefaultModelConditionState
      Model = RivWalkwayT
    End

;    WallBoundsMesh = P1

;----- Damage States

		ModelConditionState  = COLLAPSING
			Model         = RivWalkwayTD
		End
		AnimationState = COLLAPSING
      		Animation				=	RubbleAnimation
				AnimationName		=	 RivWalkwayTD.RivWalkwayTD
				AnimationMode		=	ONCE
  			End
		End

		ModelConditionState  = RUBBLE
			Model         = None
		End
		AnimationState = RUBBLE
		End

		ModelConditionState  = POST_RUBBLE
			Model         = None
		End
		AnimationState = POST_RUBBLE
		End
		
		ModelConditionState  = POST_COLLAPSE
			Model         = None
		End  
		AnimationState = POST_COLLAPSE
		End	
        
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:Prop
  Side                = Civilian
  EditorSorting       = STRUCTURE
  Browser = REGION Rivendell STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone

;  VoiceSelect         = NuclearReactorSelect
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 

  ; *** ENGINEERING Parameters ***

  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE CHUNK_VENDOR  NOT_AUTOACQUIRABLE IGNORED_IN_GUI ;SELECTABLE WALK_ON_TOP_OF_WALL
 
	Behavior = SiegeDockingBehavior ModuleTag_SiegeDocking
	End

  Body                  = ActiveBody ModuleTag_B_03
    MaxHealth       = 1.0
    MaxHealthDamaged = 1.0
    MaxHealthReallyDamaged = 1.0
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0    
  End
  
  ArmorSet
    Conditions        = None
    Armor             = NoArmor
    DamageFX          = None
  End

	; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
	; never truly destroyed, even when reduced to zero health. Also note that garrisonable
	; buildings automatically stick around because GarrisonContain has it's own DieModule
	Behavior = KeepObjectDie ModuleTag_IWantRubble
	End

;  Behavior            = DestroyDie ModuleTag_07
;    ;nothing
;  End
 
;  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
;		StartsActive	= Yes ;If no, requires upgrade to turn on.
;		BonusName		= HelmsDeepWallBonus
;		RefreshDelay	= 2000
;		;Range			= 120		; Range is overridden to affect people on us since we are a wall
;		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
;	End	

; 	Behavior = FireWeaponWhenDeadBehavior FireDeadTag1
;		DeathTypes		= ALL
;		StartsActive	= Yes
;		DeathWeapon		= WallDeath
;	End	

	Geometry              = BOX
	GeometryMajorRadius   = 35.0
	GeometryMinorRadius   = 35.0
	GeometryHeight        = 50.0
	GeometryOffset		  = X:0 Y:0.0 Z:50
	
	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 30.0
	GeometryMinorRadius   = 30.0
	GeometryHeight        = 50.0
	GeometryOffset		  = X:0.0 Y:0.0 Z:0.0
	
	GeometryIsSmall       = No
	Shadow                = SHADOW_VOLUME
  
  	GeometryContactPoint = X:-90  Y:70  Z:0 Grab
	GeometryContactPoint = X:-90  Y:-40 Z:0 Grab
	GeometryContactPoint = X:-90  Y:-30 Z:10 
	GeometryContactPoint = X:-60  Y:-30 Z:60 
	GeometryContactPoint = X:-30   Y:-30 Z:10 
	GeometryContactPoint = X:0    Y:-30 Z:60
	GeometryContactPoint = X:30   Y:-30 Z:10
	GeometryContactPoint = X:60  Y:-30 Z:60
	GeometryContactPoint = X:90  Y:-30 Z:10 
	GeometryContactPoint = X:90 Y:-40 Z:0 Grab
	GeometryContactPoint = X:90 Y:70  Z:0 Grab
End



;------------------------------------------------------------------------------
;Rivendell Walkway
Object RivWalkwayT1

SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
	ExtraPublicBone = SIEGELADDER

    DefaultModelConditionState
      Model = RivWalkwayT1
    End

;    WallBoundsMesh = P1


;----- Damage States

		ModelConditionState  = COLLAPSING
			Model         = RivWalkwayT1D
		End
		AnimationState = COLLAPSING
      		Animation				=	RubbleAnimation
				AnimationName		=	 RivWalkwayT1D.RivWalkwayT1D
				AnimationMode		=	ONCE
  			End
		End

		ModelConditionState  = RUBBLE
			Model         = None
		End
		AnimationState = RUBBLE
		End

		ModelConditionState  = POST_RUBBLE
			Model         = None
		End
		AnimationState = POST_RUBBLE
		End
		
		ModelConditionState  = POST_COLLAPSE
			Model         = None
		End  
		AnimationState = POST_COLLAPSE
		End	
        
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:Prop
  Side                = Civilian
  EditorSorting       = STRUCTURE
  Browser = REGION Rivendell STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone

;  VoiceSelect         = NuclearReactorSelect
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 

  ; *** ENGINEERING Parameters ***

  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE CHUNK_VENDOR  NOT_AUTOACQUIRABLE IGNORED_IN_GUI ;SELECTABLE WALK_ON_TOP_OF_WALL
 
	Behavior = SiegeDockingBehavior ModuleTag_SiegeDocking
	End

  Body                  = ActiveBody ModuleTag_B_03
    MaxHealth       = 1.0
    MaxHealthDamaged = 1.0
    MaxHealthReallyDamaged = 1.0
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0    
  End
  
  ArmorSet
    Conditions        = None
    Armor             = NoArmor 
    DamageFX          = None
  End

	; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
	; never truly destroyed, even when reduced to zero health. Also note that garrisonable
	; buildings automatically stick around because GarrisonContain has it's own DieModule
	Behavior = KeepObjectDie ModuleTag_IWantRubble
	End

;  Behavior            = DestroyDie ModuleTag_07
;    ;nothing
;  End
 
;  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
;		StartsActive	= Yes ;If no, requires upgrade to turn on.
;		BonusName		= HelmsDeepWallBonus
;		RefreshDelay	= 2000
;		;Range			= 120		; Range is overridden to affect people on us since we are a wall
;		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
;	End	

; 	Behavior = FireWeaponWhenDeadBehavior FireDeadTag1
;		DeathTypes		= ALL
;		StartsActive	= Yes
;		DeathWeapon		= WallDeath
;	End	

	Geometry              = BOX
	GeometryMajorRadius   = 35.0
	GeometryMinorRadius   = 35.0
	GeometryHeight        = 50.0
	GeometryOffset		  = X:0 Y:0.0 Z:50
	
	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 30.0
	GeometryMinorRadius   = 30.0
	GeometryHeight        = 50.0
	GeometryOffset		  = X:0.0 Y:0.0 Z:0.0
	
	GeometryIsSmall       = No
	Shadow                = SHADOW_VOLUME
  
  	GeometryContactPoint = X:-90  Y:70  Z:0 Grab
	GeometryContactPoint = X:-90  Y:-40 Z:0 Grab
	GeometryContactPoint = X:-90  Y:-30 Z:10 
	GeometryContactPoint = X:-60  Y:-30 Z:60 
	GeometryContactPoint = X:-30   Y:-30 Z:10 
	GeometryContactPoint = X:0    Y:-30 Z:60
	GeometryContactPoint = X:30   Y:-30 Z:10
	GeometryContactPoint = X:60  Y:-30 Z:60
	GeometryContactPoint = X:90  Y:-30 Z:10 
	GeometryContactPoint = X:90 Y:-40 Z:0 Grab
	GeometryContactPoint = X:90 Y:70  Z:0 Grab
End




;------------------------------------------------------------------------------
;Rivendell Walkway
Object RivWalkway3

SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
	ExtraPublicBone = SIEGELADDER

    DefaultModelConditionState
      Model = RivWalkway3
    End

    WallBoundsMesh = P1
        
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:Prop
  Side                = Civilian
  EditorSorting       = STRUCTURE
  Browser = REGION Rivendell STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone

;  VoiceSelect         = NuclearReactorSelect
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 

  ; *** ENGINEERING Parameters ***

  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE IGNORED_IN_GUI ;SELECTABLE;
 
	Behavior = SiegeDockingBehavior ModuleTag_SiegeDocking
	End

  Body                  = ActiveBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0    
  End
  
  ArmorSet
    Conditions        = None
    Armor             = HelmsDeepWalls
    DamageFX          = None
  End

	; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
	; never truly destroyed, even when reduced to zero health. Also note that garrisonable
	; buildings automatically stick around because GarrisonContain has it's own DieModule
	Behavior = KeepObjectDie ModuleTag_IWantRubble
	End

;  Behavior            = DestroyDie ModuleTag_07
;    ;nothing
;  End
 
  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= HelmsDeepWallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

; 	Behavior = FireWeaponWhenDeadBehavior FireDeadTag1
;		DeathTypes		= ALL
;		StartsActive	= Yes
;		DeathWeapon		= WallDeath
;	End	

	Geometry              = BOX
	GeometryMajorRadius   = 35.0
	GeometryMinorRadius   = 105.0
	GeometryHeight        = 50.0
	GeometryOffset		  = X:0 Y:0.0 Z:0
	
	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 30.0
	GeometryMinorRadius   = 30.0
	GeometryHeight        = 50.0
	GeometryOffset		  = X:0.0 Y:0.0 Z:0.0
	
	GeometryIsSmall       = No
	Shadow                = SHADOW_VOLUME
  
  	GeometryContactPoint = X:-90  Y:70  Z:0 Grab
	GeometryContactPoint = X:-90  Y:-40 Z:0 Grab
	GeometryContactPoint = X:-90  Y:-30 Z:10 
	GeometryContactPoint = X:-60  Y:-30 Z:60 
	GeometryContactPoint = X:-30   Y:-30 Z:10 
	GeometryContactPoint = X:0    Y:-30 Z:60
	GeometryContactPoint = X:30   Y:-30 Z:10
	GeometryContactPoint = X:60  Y:-30 Z:60
	GeometryContactPoint = X:90  Y:-30 Z:10 
	GeometryContactPoint = X:90 Y:-40 Z:0 Grab
	GeometryContactPoint = X:90 Y:70  Z:0 Grab
End



;------------------------------------------------------------------------------
;Rivendell Walkway
Object RivWalkway3T

SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
	ExtraPublicBone = SIEGELADDER

    DefaultModelConditionState
      Model = RivWalkway3T
    End

;    WallBoundsMesh = P1


;----- Damage States

		ModelConditionState  = COLLAPSING
			Model         = RivWalkway3TD
		End
		AnimationState = COLLAPSING
      		Animation				=	RubbleAnimation
				AnimationName		=	 RivWalkway3TD.RivWalkway3TD
				AnimationMode		=	ONCE
  			End
		End

		ModelConditionState  = RUBBLE
			Model         = None
		End
		AnimationState = RUBBLE
		End

		ModelConditionState  = POST_RUBBLE
			Model         = None
		End
		AnimationState = POST_RUBBLE
		End
		
		ModelConditionState  = POST_COLLAPSE
			Model         = None
		End  
		AnimationState = POST_COLLAPSE
		End	
                
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:Prop
  Side                = Civilian
  EditorSorting       = STRUCTURE
  Browser = REGION Rivendell STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160

; *** AUDIO Parameters ***

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone

;  VoiceSelect         = NuclearReactorSelect
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 

  ; *** ENGINEERING Parameters ***

  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE CHUNK_VENDOR  NOT_AUTOACQUIRABLE IGNORED_IN_GUI ;SELECTABLE WALK_ON_TOP_OF_WALL
 
	Behavior = SiegeDockingBehavior ModuleTag_SiegeDocking
	End

  Body                  = ActiveBody ModuleTag_B_03
    MaxHealth       = 1.0
    MaxHealthDamaged = 1.0
    MaxHealthReallyDamaged = 1.0
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0    
  End
  
  ArmorSet
    Conditions        = None
    Armor             = NoArmor
    DamageFX          = None
  End

	; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
	; never truly destroyed, even when reduced to zero health. Also note that garrisonable
	; buildings automatically stick around because GarrisonContain has it's own DieModule
	Behavior = KeepObjectDie ModuleTag_IWantRubble
	End

;  Behavior            = DestroyDie ModuleTag_07
;    ;nothing
;  End
 
;  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
;		StartsActive	= Yes ;If no, requires upgrade to turn on.
;		BonusName		= HelmsDeepWallBonus
;		RefreshDelay	= 2000
;		;Range			= 120		; Range is overridden to affect people on us since we are a wall
;		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
;	End	

; 	Behavior = FireWeaponWhenDeadBehavior FireDeadTag1
;		DeathTypes		= ALL
;		StartsActive	= Yes
;		DeathWeapon		= WallDeath
;	End	

	Geometry              = BOX
	GeometryMajorRadius   = 35.0
	GeometryMinorRadius   = 105.0
	GeometryHeight        = 50.0
	GeometryOffset		  = X:0 Y:0.0 Z:50
	
	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 30.0
	GeometryMinorRadius   = 30.0
	GeometryHeight        = 50.0
	GeometryOffset		  = X:0.0 Y:0.0 Z:0.0
	
	GeometryIsSmall       = No
	Shadow                = SHADOW_VOLUME
  
  	GeometryContactPoint = X:-90  Y:70  Z:0 Grab
	GeometryContactPoint = X:-90  Y:-40 Z:0 Grab
	GeometryContactPoint = X:-90  Y:-30 Z:10 
	GeometryContactPoint = X:-60  Y:-30 Z:60 
	GeometryContactPoint = X:-30   Y:-30 Z:10 
	GeometryContactPoint = X:0    Y:-30 Z:60
	GeometryContactPoint = X:30   Y:-30 Z:10
	GeometryContactPoint = X:60  Y:-30 Z:60
	GeometryContactPoint = X:90  Y:-30 Z:10 
	GeometryContactPoint = X:90 Y:-40 Z:0 Grab
	GeometryContactPoint = X:90 Y:70  Z:0 Grab
End

;------------------------------------------------------------------------------
;Rivendell Walkway Curve
Object RivWalkCurv

SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
	ExtraPublicBone = SIEGELADDER

    DefaultModelConditionState
      Model = RivWalkCurv
    End

    WallBoundsMesh = P1
        
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:Prop
  Side                = Civilian
  EditorSorting       = STRUCTURE
  Browser = REGION Rivendell STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone

;  VoiceSelect         = NuclearReactorSelect
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 

  ; *** ENGINEERING Parameters ***

  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE IGNORED_IN_GUI ;SELECTABLE
 
	Behavior = SiegeDockingBehavior ModuleTag_SiegeDocking
	End

  Body                  = ActiveBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0    
  End
  
  ArmorSet
    Conditions        = None
    Armor             = HelmsDeepWalls
    DamageFX          = None
  End

	; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
	; never truly destroyed, even when reduced to zero health. Also note that garrisonable
	; buildings automatically stick around because GarrisonContain has it's own DieModule
	Behavior = KeepObjectDie ModuleTag_IWantRubble
	End

;  Behavior            = DestroyDie ModuleTag_07
;    ;nothing
;  End
 
  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= HelmsDeepWallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

; 	Behavior = FireWeaponWhenDeadBehavior FireDeadTag1
;		DeathTypes		= ALL
;		StartsActive	= Yes
;		DeathWeapon		= WallDeath
;	End	

	Geometry              = BOX
	GeometryMajorRadius   = 50.0
	GeometryMinorRadius   = 55.0
	GeometryHeight        = 50.0
	GeometryOffset		  = X:0 Y:0.0 Z:0
	
	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 60.0
	GeometryOffset		  = X:0.0 Y:0.0 Z:0
	
	GeometryIsSmall       = No
	Shadow                = SHADOW_VOLUME
  
  	GeometryContactPoint = X:-90  Y:70  Z:0 Grab
	GeometryContactPoint = X:-90  Y:-40 Z:0 Grab
	GeometryContactPoint = X:-90  Y:-30 Z:10 
	GeometryContactPoint = X:-60  Y:-30 Z:60 
	GeometryContactPoint = X:-30   Y:-30 Z:10 
	GeometryContactPoint = X:0    Y:-30 Z:60
	GeometryContactPoint = X:30   Y:-30 Z:10
	GeometryContactPoint = X:60  Y:-30 Z:60
	GeometryContactPoint = X:90  Y:-30 Z:10 
	GeometryContactPoint = X:90 Y:-40 Z:0 Grab
	GeometryContactPoint = X:90 Y:70  Z:0 Grab
End



;------------------------------------------------------------------------------
;Rivendell Walkway Curve
Object RivWalkCurvT

SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
	ExtraPublicBone = SIEGELADDER

    DefaultModelConditionState
      Model = RivWalkCurvT
    End

;    WallBoundsMesh = P1


;----- Damage States

		ModelConditionState  = COLLAPSING
			Model         = RivWalkCurvTD
		End
		AnimationState = COLLAPSING
      		Animation				=	RubbleAnimation
				AnimationName		=	 RivWalkCurvTD.RivWalkCurvTD
				AnimationMode		=	ONCE
  			End
		End

		ModelConditionState  = RUBBLE
			Model         = None
		End
		AnimationState = RUBBLE
		End

		ModelConditionState  = POST_RUBBLE
			Model         = None
		End
		AnimationState = POST_RUBBLE
		End
		
		ModelConditionState  = POST_COLLAPSE
			Model         = None
		End  
		AnimationState = POST_COLLAPSE
		End	
        
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:Prop
  Side                = Civilian
  EditorSorting       = STRUCTURE
  Browser = REGION Rivendell STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone

;  VoiceSelect         = NuclearReactorSelect
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 

  ; *** ENGINEERING Parameters ***

  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE CHUNK_VENDOR  NOT_AUTOACQUIRABLE IGNORED_IN_GUI ;SELECTABLE WALK_ON_TOP_OF_WALL
 
	Behavior = SiegeDockingBehavior ModuleTag_SiegeDocking
	End

  Body                  = ActiveBody ModuleTag_B_03
    MaxHealth       = 1.0
    MaxHealthDamaged = 1.0
    MaxHealthReallyDamaged = 1.0
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0    
  End
  
  ArmorSet
    Conditions        = None
    Armor             = NoArmor 
    DamageFX          = None
  End

	; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
	; never truly destroyed, even when reduced to zero health. Also note that garrisonable
	; buildings automatically stick around because GarrisonContain has it's own DieModule
	Behavior = KeepObjectDie ModuleTag_IWantRubble
	End

;  Behavior            = DestroyDie ModuleTag_07
;    ;nothing
;  End
 
;  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
;		StartsActive	= Yes ;If no, requires upgrade to turn on.
;		BonusName		= HelmsDeepWallBonus
;		RefreshDelay	= 2000
;		;Range			= 120		; Range is overridden to affect people on us since we are a wall
;		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
;	End	

; 	Behavior = FireWeaponWhenDeadBehavior FireDeadTag1
;		DeathTypes		= ALL
;		StartsActive	= Yes
;		DeathWeapon		= WallDeath
;	End	

	Geometry              = BOX
	GeometryMajorRadius   = 50.0
	GeometryMinorRadius   = 55.0
	GeometryHeight        = 50.0
	GeometryOffset		  = X:0 Y:0.0 Z:50.0
	
	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 60.0
	GeometryOffset		  = X:0.0 Y:0.0 Z:0
	
	GeometryIsSmall       = No
	Shadow                = SHADOW_VOLUME
  
  	GeometryContactPoint = X:-90  Y:70  Z:0 Grab
	GeometryContactPoint = X:-90  Y:-40 Z:0 Grab
	GeometryContactPoint = X:-90  Y:-30 Z:10 
	GeometryContactPoint = X:-60  Y:-30 Z:60 
	GeometryContactPoint = X:-30   Y:-30 Z:10 
	GeometryContactPoint = X:0    Y:-30 Z:60
	GeometryContactPoint = X:30   Y:-30 Z:10
	GeometryContactPoint = X:60  Y:-30 Z:60
	GeometryContactPoint = X:90  Y:-30 Z:10 
	GeometryContactPoint = X:90 Y:-40 Z:0 Grab
	GeometryContactPoint = X:90 Y:70  Z:0 Grab
End



;------------------------------------------------------------------------------
;Rivendell Walkway Curve
Object RivWalkCurvT1

SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
	ExtraPublicBone = SIEGELADDER

    DefaultModelConditionState
      Model = RivWalkCurvT1
    End

;    WallBoundsMesh = P1

;----- Damage States

		ModelConditionState  = COLLAPSING
			Model         = RivWalkCurvT1D
		End
		AnimationState = COLLAPSING
      		Animation				=	RubbleAnimation
				AnimationName		=	 RivWalkCurvT1D.RivWalkCurvT1D
				AnimationMode		=	ONCE
  			End
		End

		ModelConditionState  = RUBBLE
			Model         = None
		End
		AnimationState = RUBBLE
		End
		
		ModelConditionState  = POST_RUBBLE
			Model         = None
		End
		AnimationState = POST_RUBBLE
		End
		
		ModelConditionState  = POST_COLLAPSE
			Model         = None
		End  
		AnimationState = POST_COLLAPSE
		End	
		        
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:Prop
  Side                = Civilian
  EditorSorting       = STRUCTURE
  Browser = REGION Rivendell STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160


  ; *** AUDIO Parameters ***

	SoundOnDamaged		= BuildingLightDamageStone
	SoundOnReallyDamaged	= BuildingHeavyDamageStone


  ; *** ENGINEERING Parameters ***

  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE  CHUNK_VENDOR  NOT_AUTOACQUIRABLE IGNORED_IN_GUI ;SELECTABLE WALK_ON_TOP_OF_WALL
 
	Behavior = SiegeDockingBehavior ModuleTag_SiegeDocking
	End

  Body                  = ActiveBody ModuleTag_B_03
    MaxHealth       = 1.0
    MaxHealthDamaged = 1.0
    MaxHealthReallyDamaged = 1.0
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0    
  End
  
  ArmorSet
    Conditions        = None
    Armor             = NoArmor 
    DamageFX          = None
  End

	; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
	; never truly destroyed, even when reduced to zero health. Also note that garrisonable
	; buildings automatically stick around because GarrisonContain has it's own DieModule
	Behavior = KeepObjectDie ModuleTag_IWantRubble
	End

;  Behavior            = DestroyDie ModuleTag_07
;    ;nothing
;  End
 
;  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
;		StartsActive	= Yes ;If no, requires upgrade to turn on.
;		BonusName		= HelmsDeepWallBonus
;		RefreshDelay	= 2000
;		;Range			= 120		; Range is overridden to affect people on us since we are a wall
;		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
;	End	

; 	Behavior = FireWeaponWhenDeadBehavior FireDeadTag1
;		DeathTypes		= ALL
;		StartsActive	= Yes
;		DeathWeapon		= WallDeath
;	End	

	Geometry              = BOX
	GeometryMajorRadius   = 50.0
	GeometryMinorRadius   = 55.0
	GeometryHeight        = 50.0
	GeometryOffset		  = X:0 Y:0.0 Z:50.0
	
	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 60.0
	GeometryOffset		  = X:0.0 Y:0.0 Z:0
	
	GeometryIsSmall       = No
	Shadow                = SHADOW_VOLUME
  
  	GeometryContactPoint = X:-90  Y:70  Z:0 Grab
	GeometryContactPoint = X:-90  Y:-40 Z:0 Grab
	GeometryContactPoint = X:-90  Y:-30 Z:10 
	GeometryContactPoint = X:-60  Y:-30 Z:60 
	GeometryContactPoint = X:-30   Y:-30 Z:10 
	GeometryContactPoint = X:0    Y:-30 Z:60
	GeometryContactPoint = X:30   Y:-30 Z:10
	GeometryContactPoint = X:60  Y:-30 Z:60
	GeometryContactPoint = X:90  Y:-30 Z:10 
	GeometryContactPoint = X:90 Y:-40 Z:0 Grab
	GeometryContactPoint = X:90 Y:70  Z:0 Grab
End




;------------------------------------------------------------------------------
;Rivendell Walkway Curve
Object RivWalkCurvT2

SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
	ExtraPublicBone = SIEGELADDER

    DefaultModelConditionState
      Model = RivWalkCurvT2
    End

;    WallBoundsMesh = P1

;----- Damage States

		ModelConditionState  = COLLAPSING
			Model         = RivWalkCurvT2D
		End
		AnimationState = COLLAPSING
      		Animation				=	RubbleAnimation
				AnimationName		=	 RivWalkCurvT2D.RivWalkCurvT2D
				AnimationMode		=	ONCE
  			End
		End

		ModelConditionState  = RUBBLE
			Model         = None
		End
		AnimationState = RUBBLE
		End

		ModelConditionState  = POST_RUBBLE
			Model         = None
		End
		AnimationState = POST_RUBBLE
		End
		
		ModelConditionState  = POST_COLLAPSE
			Model         = None
		End  
		AnimationState = POST_COLLAPSE
		End	
        
  End
  
;  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:Prop
  Side                = Civilian
  EditorSorting       = STRUCTURE
  Browser = REGION Rivendell STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone

;  VoiceSelect         = NuclearReactorSelect
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 

  ; *** ENGINEERING Parameters ***

  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE CHUNK_VENDOR  NOT_AUTOACQUIRABLE IGNORED_IN_GUI ;SELECTABLE WALK_ON_TOP_OF_WALL
 
	Behavior = SiegeDockingBehavior ModuleTag_SiegeDocking
	End

  Body                  = ActiveBody ModuleTag_B_03
    MaxHealth       = 1.0
    MaxHealthDamaged = 1.0
    MaxHealthReallyDamaged = 1.0
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0    
  End
  
  ArmorSet
    Conditions        = None
    Armor             = NoArmor ;HelmsDeepWalls
    DamageFX          = None
  End

	; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
	; never truly destroyed, even when reduced to zero health. Also note that garrisonable
	; buildings automatically stick around because GarrisonContain has it's own DieModule
	Behavior = KeepObjectDie ModuleTag_IWantRubble
	End

;  Behavior            = DestroyDie ModuleTag_07
;    ;nothing
;  End
 
;  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
;		StartsActive	= Yes ;If no, requires upgrade to turn on.
;		BonusName		= HelmsDeepWallBonus
;		RefreshDelay	= 2000
;		;Range			= 120		; Range is overridden to affect people on us since we are a wall
;		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
;	End	

; 	Behavior = FireWeaponWhenDeadBehavior FireDeadTag1
;		DeathTypes		= ALL
;		StartsActive	= Yes
;		DeathWeapon		= WallDeath
;	End	

	Geometry              = BOX
	GeometryMajorRadius   = 50.0
	GeometryMinorRadius   = 55.0
	GeometryHeight        = 50.0
	GeometryOffset		  = X:0 Y:0.0 Z:50.0
	
	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 60.0
	GeometryOffset		  = X:0.0 Y:0.0 Z:0
	
	GeometryIsSmall       = No
	Shadow                = SHADOW_VOLUME
  
  	GeometryContactPoint = X:-90  Y:70  Z:0 Grab
	GeometryContactPoint = X:-90  Y:-40 Z:0 Grab
	GeometryContactPoint = X:-90  Y:-30 Z:10 
	GeometryContactPoint = X:-60  Y:-30 Z:60 
	GeometryContactPoint = X:-30   Y:-30 Z:10 
	GeometryContactPoint = X:0    Y:-30 Z:60
	GeometryContactPoint = X:30   Y:-30 Z:10
	GeometryContactPoint = X:60  Y:-30 Z:60
	GeometryContactPoint = X:90  Y:-30 Z:10 
	GeometryContactPoint = X:90 Y:-40 Z:0 Grab
	GeometryContactPoint = X:90 Y:70  Z:0 Grab
End



;------------------------------------------------------------------------------
;Rivendell Walkway Curve
Object RivWalkCurvT3

SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
	ExtraPublicBone = SIEGELADDER

    DefaultModelConditionState
      Model = RivWalkCurvT3
    End

;    WallBoundsMesh = P1


;----- Damage States

		ModelConditionState  = COLLAPSING
			Model         = RivWalkCurvT3D
		End
		AnimationState = COLLAPSING
      		Animation				=	RubbleAnimation
				AnimationName		=	 RivWalkCurvT3D.RivWalkCurvT3D
				AnimationMode		=	ONCE
  			End
		End

		ModelConditionState  = RUBBLE
			Model         = None
		End
		AnimationState = RUBBLE
		End

		ModelConditionState  = POST_RUBBLE
			Model         = None
		End
		AnimationState = POST_RUBBLE
		End
		
		ModelConditionState  = POST_COLLAPSE
			Model         = None
		End  
		AnimationState = POST_COLLAPSE
		End	
        
  End
  
;  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:Prop
  Side                = Civilian
  EditorSorting       = STRUCTURE
  Browser = REGION Rivendell STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone

;  VoiceSelect         = NuclearReactorSelect
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 

  ; *** ENGINEERING Parameters ***

  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE CHUNK_VENDOR  NOT_AUTOACQUIRABLE IGNORED_IN_GUI ;SELECTABLE WALK_ON_TOP_OF_WALL
 
	Behavior = SiegeDockingBehavior ModuleTag_SiegeDocking
	End

  Body                  = ActiveBody ModuleTag_B_03
    MaxHealth       = 1.0
    MaxHealthDamaged = 1.0
    MaxHealthReallyDamaged = 1.0
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0    
  End
  
  ArmorSet
    Conditions        = None
    Armor             = NoArmor ;HelmsDeepWalls
    DamageFX          = None
  End

	; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
	; never truly destroyed, even when reduced to zero health. Also note that garrisonable
	; buildings automatically stick around because GarrisonContain has it's own DieModule
	Behavior = KeepObjectDie ModuleTag_IWantRubble
	End

;  Behavior            = DestroyDie ModuleTag_07
;    ;nothing
;  End
 
;  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
;		StartsActive	= Yes ;If no, requires upgrade to turn on.
;		BonusName		= HelmsDeepWallBonus
;		RefreshDelay	= 2000
;		;Range			= 120		; Range is overridden to affect people on us since we are a wall
;		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
;	End	

; 	Behavior = FireWeaponWhenDeadBehavior FireDeadTag1
;		DeathTypes		= ALL
;		StartsActive	= Yes
;		DeathWeapon		= WallDeath
;	End	

	Geometry              = BOX
	GeometryMajorRadius   = 50.0
	GeometryMinorRadius   = 55.0
	GeometryHeight        = 50.0
	GeometryOffset		  = X:0 Y:0.0 Z:50.0
	
	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 60.0
	GeometryOffset		  = X:0.0 Y:0.0 Z:0
	
	GeometryIsSmall       = No
	Shadow                = SHADOW_VOLUME
  
  	GeometryContactPoint = X:-90  Y:70  Z:0 Grab
	GeometryContactPoint = X:-90  Y:-40 Z:0 Grab
	GeometryContactPoint = X:-90  Y:-30 Z:10 
	GeometryContactPoint = X:-60  Y:-30 Z:60 
	GeometryContactPoint = X:-30   Y:-30 Z:10 
	GeometryContactPoint = X:0    Y:-30 Z:60
	GeometryContactPoint = X:30   Y:-30 Z:10
	GeometryContactPoint = X:60  Y:-30 Z:60
	GeometryContactPoint = X:90  Y:-30 Z:10 
	GeometryContactPoint = X:90 Y:-40 Z:0 Grab
	GeometryContactPoint = X:90 Y:70  Z:0 Grab
End

;------------------------------------------------------------------------------
;Rivendell Walkway Ramp
Object RivWalkRamp

SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
	ExtraPublicBone = SIEGELADDER

    DefaultModelConditionState
      Model = RivWalkRamp
    End

    RampMesh1 = P1
        
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:Prop
  Side                = Civilian
  EditorSorting       = STRUCTURE
  Browser = REGION Rivendell STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone

;  VoiceSelect         = NuclearReactorSelect
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 

  ; *** ENGINEERING Parameters ***

  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE IGNORED_IN_GUI ;SELECTABLE
 
	Behavior = SiegeDockingBehavior ModuleTag_SiegeDocking
	End

  Body                  = ActiveBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0    
  End
  
  ArmorSet
    Conditions        = None
    Armor             = HelmsDeepWalls
    DamageFX          = None
  End

	; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
	; never truly destroyed, even when reduced to zero health. Also note that garrisonable
	; buildings automatically stick around because GarrisonContain has it's own DieModule
	Behavior = KeepObjectDie ModuleTag_IWantRubble
	End

;  Behavior            = DestroyDie ModuleTag_07
;    ;nothing
;  End
 
  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= HelmsDeepWallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

; 	Behavior = FireWeaponWhenDeadBehavior FireDeadTag1
;		DeathTypes		= ALL
;		StartsActive	= Yes
;		DeathWeapon		= WallDeath
;	End	

	Geometry              = BOX
	GeometryMajorRadius   = 50.0
	GeometryMinorRadius   = 35.0
	GeometryHeight        = 52.0
	GeometryOffset		  = X:0 Y:0.0 Z:0
	
	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 30.0
	GeometryMinorRadius   = 30.0
	GeometryHeight        = 50.0
	GeometryOffset		  = X:0.0 Y:0.0 Z:0.0
	
	GeometryIsSmall       = No
	Shadow                = SHADOW_VOLUME
  
  	GeometryContactPoint = X:-90  Y:70  Z:0 Grab
	GeometryContactPoint = X:-90  Y:-40 Z:0 Grab
	GeometryContactPoint = X:-90  Y:-30 Z:10 
	GeometryContactPoint = X:-60  Y:-30 Z:60 
	GeometryContactPoint = X:-30   Y:-30 Z:10 
	GeometryContactPoint = X:0    Y:-30 Z:60
	GeometryContactPoint = X:30   Y:-30 Z:10
	GeometryContactPoint = X:60  Y:-30 Z:60
	GeometryContactPoint = X:90  Y:-30 Z:10 
	GeometryContactPoint = X:90 Y:-40 Z:0 Grab
	GeometryContactPoint = X:90 Y:70  Z:0 Grab
End

;---------------------------------------------------
;Rivendell Main House
Object RivElHouse

	SelectPortrait  =  BPCElrondsHouse

    ; *** ART Parameters ***
    Draw = W3DScriptedModelDraw ModuleTag_Draw
        DefaultModelConditionState
            Model = RivElHouse
        End
        
		;--damaged building

		ModelConditionState  = DAMAGED
		Model         = RivElHouse_D1
			ParticleSysBone FireSmall01 FireBuildingLarge
			ParticleSysBone FireSmall02 FireBuildingMedium
			ParticleSysBone FireSmall03 FireBuildingMedium
			ParticleSysBone FireSmall04 FireBuildingSmall
			ParticleSysBone FireSmall05 SmokeBuildingLarge
		End
		AnimationState = DAMAGED
			EnteringStateFX	= FX_BuildingDamaged
		End

		ModelConditionState  = REALLYDAMAGED
		Model         = RivElHouse_D2
			ParticleSysBone FireSmall01 FireBuildingLarge
			ParticleSysBone FireSmall02 FireBuildingLarge
			ParticleSysBone FireSmall03 FireBuildingMedium
			ParticleSysBone FireSmall04 SmokeBuildingLarge
			ParticleSysBone FireSmall05 SmokeBuildingLarge
		End
		AnimationState = REALLYDAMAGED
      		Animation				=	RubbleAnimation
				AnimationName		=	RivElHouse_D2.RivElHouse_D2
				AnimationMode		=	ONCE
 			End
			EnteringStateFX	= FX_BuildingReallyDamaged
		End

		ModelConditionState  = COLLAPSING
			Model         = RivElHouse_D3
		End
		AnimationState = COLLAPSING
      		Animation				=	RubbleAnimation
				AnimationName		=	 RivElHouse_D3.RivElHouse_D3
				AnimationMode		=	ONCE
  			End
  			EnteringStateFX	= FX_BuildingSinkSound
		End
		
		ModelConditionState  = RUBBLE
			Model         = RivElHouse_D3
		End
		AnimationState = RUBBLE
      		Animation				=	RubbleAnimation
				AnimationName		=	RivElHouse_D3.RivElHouse_D3
				AnimationMode		=	ONCE
  			End
  			Flags						= START_FRAME_LAST
		End

		ModelConditionState  = POST_RUBBLE
			Model         = None
		End
		AnimationState = POST_RUBBLE
		End
		
		ModelConditionState  = POST_COLLAPSE
			Model         = None
		End  
		AnimationState = POST_COLLAPSE
		End

    End

    ; ***DESIGN parameters ***
    DisplayName         = OBJECT:ElrondsHouse
    Side                = Civilian
    EditorSorting       = STRUCTURE SELECTABLE
    Browser = REGION Rivendell STRUCTURE
    ThreatLevel = 1.0

  ; *** AUDIO Parameters ***

	SoundOnDamaged		= BuildingLightDamageStone
	SoundOnReallyDamaged	= BuildingHeavyDamageStone
	VoiceSelect = ElfFortressSelect

    ; *** ENGINEERING Parameters ***
    RadarPriority       = STRUCTURE
    KindOf				= IMMOBILE STRUCTURE SELECTABLE FS_FACTORY DOZER_FACTORY COMMANDCENTER
    Body = ActiveBody ModuleTag_03
		MaxHealth = 10000.0
    End
	

	ArmorSet
		Conditions        = None
		Armor             = FortressArmor
		;DamageFX          = StructureDamageFXNoShake
	End
    
    CommandSet = CommandSetHouseOfElrond
    
    Behavior = ProductionUpdate ProductionUpdateModuleTag		
	End

	Behavior = KeepObjectDie ModuleTag_IWantRubble
  	End
  	
	Behavior = QueueProductionExitUpdate QueueProductionModuleTag
		UnitCreatePoint			= X:-10.0 Y:0.00 Z:0.0
		NaturalRallyPoint		= X:85.0 Y:-0.1480 Z:0.0
		AllowAirborneCreation	= Yes
		ExitDelay				= 50
	End
	
	AttackContactPoint	= X:-28.0		Y:0.0			Z:185.0		Swoop
	AttackContactPoint	= X:37.0		Y:-126.0		Z:175.0		Swoop
	AttackContactPoint	= X:-106.0		Y:136.0			Z:156.0		Swoop
	AttackContactPoint	= X:38.0		Y:109.0			Z:125.0		Swoop
	
    Geometry = BOX
    GeometryMajorRadius = 116.0 
    GeometryMinorRadius = 94.0
    GeometryHeight = 171.0
    Shadow = SHADOW_VOLUME ; for demo purposes
    GeometryOffset		= X:-39 Y:145 Z:0
    
  AdditionalGeometry    = BOX
  GeometryMajorRadius   = 82.0
  GeometryMinorRadius   = 66.0
  GeometryHeight        = 198.0	
  GeometryOffset		= X:-68 Y:-6 Z:0
  
  AdditionalGeometry    = BOX
  GeometryMajorRadius   = 138.0
  GeometryMinorRadius   = 72.0
  GeometryHeight        = 194.0	
  GeometryOffset		= X:17 Y:-119 Z:0
  
  GeometryIsSmall = no
End

;---------------------------------------------------
;Rivendell Main House
Object WOR_RivElHouse

	SelectPortrait  =  BPCElrondsHouse

; *** ART Parameters ***
	Draw = W3DScriptedModelDraw ModuleTag_Draw
		DefaultModelConditionState
			Model = RivElHouse
		End
        
        ;-------------build up
        ModelConditionState   = AWAITING_CONSTRUCTION
			Model               = RivElHouse_A
		End
		AnimationState        = AWAITING_CONSTRUCTION
			Animation
				AnimationName	=RivElHouse_A.RivElHouse_A
				AnimationMode	= MANUAL
			End
			Flags				= START_FRAME_FIRST
		End
		
		ModelConditionState		=	ACTIVELY_BEING_CONSTRUCTED
			Model				=	RivElHouse_A
		End;
		AnimationState        = ACTIVELY_BEING_CONSTRUCTED
			Animation
				AnimationName     = RivElHouse_A.RivElHouse_A
				AnimationMode     = MANUAL
			End
			Flags				= START_FRAME_FIRST
			StateName			= BeingConstructed
		End
		

		;--damaged building
		ModelConditionState  = DAMAGED
		Model         = RivElHouse_D1
			ParticleSysBone FireSmall01 FireBuildingLarge
			ParticleSysBone FireSmall02 FireBuildingMedium
			ParticleSysBone FireSmall03 FireBuildingMedium
			ParticleSysBone FireSmall04 FireBuildingSmall
			ParticleSysBone FireSmall05 SmokeBuildingLarge
		End
		AnimationState = DAMAGED
			EnteringStateFX	= FX_BuildingDamaged
		End

		ModelConditionState  = REALLYDAMAGED
		Model         = RivElHouse_D2
			ParticleSysBone FireSmall01 FireBuildingLarge
			ParticleSysBone FireSmall02 FireBuildingLarge
			ParticleSysBone FireSmall03 FireBuildingMedium
			ParticleSysBone FireSmall04 SmokeBuildingLarge
			ParticleSysBone FireSmall05 SmokeBuildingLarge
		End
		AnimationState = REALLYDAMAGED
      		Animation				=	RubbleAnimation
				AnimationName		=	RivElHouse_D2.RivElHouse_D2
				AnimationMode		=	ONCE
 			End
			EnteringStateFX	= FX_BuildingReallyDamaged
		End

		ModelConditionState  = COLLAPSING
			Model         = RivElHouse_D3
		End
		AnimationState = COLLAPSING
      		Animation				=	RubbleAnimation
				AnimationName		=	 RivElHouse_D3.RivElHouse_D3
				AnimationMode		=	ONCE
  			End
			EnteringStateFX	= FX_BuildingSinkSound
		End
		
		ModelConditionState  = RUBBLE
			Model         = RivElHouse_D3
		End
		AnimationState = RUBBLE
      		Animation				=	RubbleAnimation
				AnimationName		=	RivElHouse_D3.RivElHouse_D3
				AnimationMode		=	ONCE
  			End
  			Flags						= START_FRAME_LAST
		End

		ModelConditionState  = POST_RUBBLE
			Model         = None
		End
		AnimationState = POST_RUBBLE
		End
		
		ModelConditionState  = POST_COLLAPSE
			Model         = None
		End  
		AnimationState = POST_COLLAPSE
		End
    End


; ***DESIGN parameters ***
	DisplayName		= OBJECT:ElrondsHouse
	Side			= WOR
	EditorSorting		= STRUCTURE
	ThreatLevel		= 1.0
	BuildCost		= 5000
	BuildTime		= 120.0		; in seconds
	VisionRange		= 400		; 160.0
	ShroudClearingRange	= 800		; 161

	ArmorSet
		Conditions	= None
		Armor		= HouseofElrondArmor
		;DamageFX	= StructureDamageFXNoShake
	End
    
	CommandSet		= CommandSetHouseOfElrondRebuild

	HealthBoxHeightOffset	= -200


; *** AUDIO Parameters ***

	SoundOnDamaged		= BuildingLightDamageStone
	SoundOnReallyDamaged	= BuildingHeavyDamageStone
	VoiceSelect = ElfFortressSelect


; *** ENGINEERING Parameters ***
	KindOf			= VITAL_FOR_BASE_SURVIVAL PRELOAD SELECTABLE STRUCTURE IMMOBILE SCORE CASTLE_KEEP MP_COUNT_FOR_VICTORY CAN_ATTACK FS_FACTORY AUTO_RALLYPOINT DOZER_FACTORY NEVER_CULL_FOR_MP COMMANDCENTER DONT_HIDE_IF_FOGGED
	RadarPriority		= STRUCTURE
	KeepSelectableWhenDead	= Yes

	//Commandset upgrades based on faction.  This is so the building will produce the proper units when necessary
	Behavior = CommandSetUpgrade ModuleTag_CommandSetMen
		TriggeredBy	= Upgrade_MenFaction
		CommandSet	= MenMonumentFortressRebuildCommandSet
	End
	Behavior = CommandSetUpgrade ModuleTag_CommandSetElven
		TriggeredBy	= Upgrade_ElfFaction
		CommandSet	= ElvenMonumentFortressRebuildCommandSet
	End
	Behavior = CommandSetUpgrade ModuleTag_CommandSetDwarven
		TriggeredBy	= Upgrade_DwarfFaction
		CommandSet	= DwarvenMonumentFortressRebuildCommandSet
	End
	Behavior = CommandSetUpgrade ModuleTag_CommandSetMordor
		TriggeredBy	= Upgrade_MordorFaction
		CommandSet	= MordorMonumentFortressRebuildCommandSet
	End
	Behavior = CommandSetUpgrade ModuleTag_CommandSetIsengard
		TriggeredBy	= Upgrade_IsengardFaction
		CommandSet	= IsengardMonumentFortressRebuildCommandSet
	End
	Behavior = CommandSetUpgrade ModuleTag_CommandSetWild
		TriggeredBy	= Upgrade_WildFaction
		CommandSet	= WildMonumentFortressRebuildCommandSet
	End
	//End Commandset upgrades

	Behavior = ProductionUpdate ProductionUpdateModuleTag		
	End

	Behavior = QueueProductionExitUpdate QueueProductionModuleTag
		UnitCreatePoint			= X:-10.0 Y:0.00 Z:0.0
		NaturalRallyPoint		= X:85.0 Y:-0.1480 Z:0.0
		ExitDelay			= 50
		AllowAirborneCreation		= Yes
	End

	Behavior = GettingBuiltBehavior GetBuiltBehaviorTag
		SelfBuildingLoop		= BuildingConstructionLoop		; Only played if we DON'T spawn a worker
		SelfRepairFromDamageLoop	= NoSound				; This doesn't cause an animation, so don't bother playing a sound
		SelfRepairFromRubbleLoop	= BuildingConstructionLoop
		SpawnTimer			= -1.0					; Negative means no 'autoheal'
		RebuildTimeSeconds		= 120
	End

	Body = ActiveBody ModuleTag_02
		MaxHealth			= MONUMENT_FORTRESS_HEALTH
		MaxHealthDamaged		= MONUMENT_FORTRESS_HEALTH_DAMAGED
		MaxHealthReallyDamaged		= MONUMENT_FORTRESS_HEALT_REALLY_DAMAGED
	End
    
	Behavior = KeepObjectDie ModuleTag_IWantRubble
  	End
  	
	//Money Maker
	Behavior = AutoDepositUpdate AutoDepositModuleTag
		DepositTiming       		= GENERIC_KEEP_MONEY_TIME
		DepositAmount       		= GENERIC_KEEP_MONEY_AMOUNT 
		InitialCaptureBonus 		= 0	// no initial bonus
	End

	Behavior = TerrainResourceBehavior ModuleTag_NewMoneyDeadSpot
		Radius				= GENERIC_KEEP_MONEY_RANGE		; How far we try to claim ground
		MaxIncome			= 0					; If we were to get all we wanted, how much we would earn.  Linear slope to 0 at 0% claim
		IncomeInterval			= 999999				; How often (in msec) we give that much money
		HighPriority			= Yes					; A high priority claim gets to pretend it was there first.
	End

	Behavior = CitadelSlaughterHordeContain ModuleTag_SlaughterMe
		PassengerFilter			= GENERIC_FACTION_SLAUGHTERABLE
		ObjectStatusOfContained		= UNSELECTABLE ENCLOSED
		CashBackPercent			= 200%		
		ContainMax			= 99					; give it a huge capacity, just in case player sends his whole army in at once
		AllowEnemiesInside		= No
		AllowAlliesInside		= No
 		AllowNeutralInside		= No
 		AllowOwnPlayerInsideOverride	= Yes
		EnterSound			= MordorSlaughterhouseEnterSound
		EntryOffset			= X:85.0 Y:-10.0 Z:0.0
		EntryPosition			= X:0.0 Y:.0 Z:0.0
		
		ExitOffset			= X:115.0 Y:-10.0 Z:0.0
		StatusForRingEntry		= HOLDING_THE_RING
		UpgradeForRingEntry		= Upgrade_RingHero Upgrade_FortressRingHero
		ObjectToDestroyForRingEntry	= NONE +TheDroppedRing
		FXForRingEntry			= FX_OneRingFlare
	End
	
	#include "..\FortressRingFunc.inc"
	
	AttackContactPoint	= X:-28.0	Y:0.0		Z:185.0		Swoop
	AttackContactPoint	= X:37.0	Y:-126.0	Z:175.0		Swoop
	AttackContactPoint	= X:-106.0	Y:136.0		Z:156.0		Swoop
	AttackContactPoint	= X:38.0	Y:109.0		Z:125.0		Swoop
	
	Geometry		= BOX
	GeometryMajorRadius	= 116.0
	GeometryMinorRadius	= 94.0
	GeometryHeight		= 171.0
	
	Shadow			= SHADOW_VOLUME ; for demo purposes
	GeometryOffset		= X:-39 Y:145 Z:0
    
	AdditionalGeometry    	= BOX
	GeometryMajorRadius   	= 82.0
	GeometryMinorRadius   	= 66.0
	GeometryHeight        	= 198.0	
	GeometryOffset		= X:-68 Y:-6 Z:0
	  
	AdditionalGeometry    	= BOX
	GeometryMajorRadius   	= 138.0
	GeometryMinorRadius   	= 72.0
	GeometryHeight        	= 194.0	
	GeometryOffset		= X:17 Y:-119 Z:0
	  
	GeometryIsSmall		= no
End

;---------------------------------------------------
;Rivendell Gazebo
Object RivGazebo

    ; *** ART Parameters ***
    Draw = W3DScriptedModelDraw ModuleTag_Draw
        DefaultModelConditionState
            Model = RivGazebo
        End
    End

    ; ***DESIGN parameters ***
    DisplayName         = OBJECT:Prop
    Side                = Civilian
    EditorSorting       = STRUCTURE
    Browser = REGION Rivendell STRUCTURE
    ThreatLevel = 1.0

  ; *** AUDIO Parameters ***

	SoundOnDamaged		= BuildingLightDamageStone
	SoundOnReallyDamaged	= BuildingHeavyDamageStone

    ; *** ENGINEERING Parameters ***
    KindOf = IMMOBILE UNATTACKABLE STRUCTURE ;IGNORED_IN_GUI

    Body = ActiveBody ModuleTag_03
		MaxHealth = 99999.0
    End

    Geometry = BOX
    GeometryMajorRadius = 32.0
    GeometryMinorRadius = 20.0
    GeometryHeight = 75.0
    Shadow = SHADOW_VOLUME ; for demo purposes
    GeometryIsSmall = No
End


;---------------------------------------------------
;Rivendell Gazebo
ObjectReskin RivGazebo_S RivGazebo

    ; *** ART Parameters ***
    Draw = W3DScriptedModelDraw ModuleTag_Draw
        DefaultModelConditionState
            Model = RivGazebo_S
        End
    End
End
;---------------------------------------------------
;Rivendell CBTower
Object RivCBTower

    ; *** ART Parameters ***
    Draw = W3DScriptedModelDraw ModuleTag_Draw
        DefaultModelConditionState
            Model = RivCBTower
        End
        
              ;--damaged building
    
    ModelConditionState  = DAMAGED
      Model         = RivCBTower
      Texture = RivBuilding1.tga RivBuilding1_D1.tga
		ParticleSysBone FireSmall01 FireBuildingLarge
		ParticleSysBone FireSmall02 FireBuildingMedium
		ParticleSysBone FireSmall03 FireBuildingMedium
		ParticleSysBone FireSmall04 FireBuildingSmall
		ParticleSysBone FireSmall05 SmokeBuildingLarge
    End
    AnimationState = DAMAGED
	EnteringStateFX	= FX_BuildingDamaged
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = RivCBTower
      Texture = RivBuilding1.tga RivBuilding1_D1.tga
		ParticleSysBone FireSmall01 FireBuildingLarge
		ParticleSysBone FireSmall02 FireBuildingLarge
		ParticleSysBone FireSmall03 FireBuildingMedium
		ParticleSysBone FireSmall04 SmokeBuildingLarge
		ParticleSysBone FireSmall05 SmokeBuildingLarge
    End
    AnimationState = REALLYDAMAGED
	EnteringStateFX	= FX_BuildingReallyDamaged
    End

    ModelConditionState  = RUBBLE
      Model         = RivCBTower
      Texture = RivBuilding1.tga RivBuilding1_D1.tga
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End
    
    AnimationState = RUBBLE
    EnteringStateFX	= FX_BuildingReallyDamaged
    End
        
    End

    ; ***DESIGN parameters ***
    DisplayName         = OBJECT:ElrondsHouse
    Side                = Civilian
    EditorSorting       = STRUCTURE
    Browser = REGION Rivendell STRUCTURE
    ThreatLevel = 1.0


  ; *** AUDIO Parameters ***

	SoundOnDamaged		= BuildingLightDamageStone
	SoundOnReallyDamaged	= BuildingHeavyDamageStone


    ; *** ENGINEERING Parameters ***
    KindOf = IMMOBILE STRUCTURE ;IGNORED_IN_GUI SELECTABLE

    Body = ActiveBody ModuleTag_03
    MaxHealth = 2000.0
    End

    Geometry = BOX
    GeometryMajorRadius = 26.0
    GeometryMinorRadius = 75.0
    GeometryHeight = 75.0
    Shadow = SHADOW_VOLUME ; for demo purposes
    GeometryIsSmall = Yes
End

;---------------------------------------------------
;Rivendell GTower
Object RivGTower

    ; *** ART Parameters ***
    Draw = W3DScriptedModelDraw ModuleTag_Draw
        DefaultModelConditionState
            Model = RivGTower
        End
    End

    ; ***DESIGN parameters ***
    DisplayName         = OBJECT:Prop
    Side                = Civilian
    EditorSorting       = STRUCTURE
    Browser = REGION Rivendell STRUCTURE
    ThreatLevel = 1.0


  ; *** AUDIO Parameters ***

	SoundOnDamaged		= BuildingLightDamageStone
	SoundOnReallyDamaged	= BuildingHeavyDamageStone


    ; *** ENGINEERING Parameters ***
    KindOf = IMMOBILE UNATTACKABLE IGNORED_IN_GUI

    Body = ActiveBody ModuleTag_03
    MaxHealth = 2000.0
    End

    Geometry = BOX
    GeometryMajorRadius = 26.0
    GeometryMinorRadius = 26.0
    GeometryHeight = 100.0
    Shadow = SHADOW_VOLUME ; for demo purposes
    GeometryIsSmall = Yes
End

;---------------------------------------------------
;Rivendell GTower
ObjectReskin RivGTower_Snow RivGTower

    ; *** ART Parameters ***
    Draw = W3DScriptedModelDraw ModuleTag_Draw
        DefaultModelConditionState
            Model = RivGTower_S
        End
    End
End



;---------------------------------------------------
;Rivendell OPWall
Object RivOPWall1

    ; *** ART Parameters ***
    Draw = W3DScriptedModelDraw ModuleTag_Draw
        DefaultModelConditionState
            Model = RivOPWall1
        End
    End

    ; ***DESIGN parameters ***
    DisplayName         = OBJECT:Prop
    Side                = Civilian
    EditorSorting       = STRUCTURE
    Browser = REGION Rivendell STRUCTURE
    ThreatLevel = 1.0


  ; *** AUDIO Parameters ***

	SoundOnDamaged		= BuildingLightDamageStone
	SoundOnReallyDamaged	= BuildingHeavyDamageStone


    ; *** ENGINEERING Parameters ***
    KindOf = IMMOBILE UNATTACKABLE IGNORED_IN_GUI

    Body = ActiveBody ModuleTag_03
    MaxHealth = 9000.0
    End

    Geometry = BOX
    GeometryMajorRadius = 3.0
    GeometryMinorRadius = 80.0
    GeometryHeight = 32.0
    Shadow = SHADOW_VOLUME ; for demo purposes
    GeometryIsSmall = Yes
End

;---------------------------------------------------
;Rivendell OPWall
Object RivOPWall2

    ; *** ART Parameters ***
    Draw = W3DScriptedModelDraw ModuleTag_Draw
        DefaultModelConditionState
            Model = RivOPWall2
        End
    End

    ; ***DESIGN parameters ***
    DisplayName         = OBJECT:Prop
    Side                = Civilian
    EditorSorting       = STRUCTURE
    Browser = REGION Rivendell STRUCTURE
    ThreatLevel = 1.0

  ; *** AUDIO Parameters ***

	SoundOnDamaged		= BuildingLightDamageStone
	SoundOnReallyDamaged	= BuildingHeavyDamageStone



    ; *** ENGINEERING Parameters ***
    KindOf = IMMOBILE UNATTACKABLE IGNORED_IN_GUI

    Body = ActiveBody ModuleTag_03
    MaxHealth = 9000.0
    End

    Geometry = BOX
    GeometryMajorRadius = 3.0
    GeometryMinorRadius = 60.0
    GeometryHeight = 32.0
    Shadow = SHADOW_VOLUME ; for demo purposes
    GeometryIsSmall = Yes
End

;---------------------------------------------------
;Rivendell OPWall
Object RivOPWall3

    ; *** ART Parameters ***
    Draw = W3DScriptedModelDraw ModuleTag_Draw
        DefaultModelConditionState
            Model = RivOPWall3
        End
    End

    ; ***DESIGN parameters ***
    DisplayName         = OBJECT:Prop
    Side                = Civilian
    EditorSorting       = STRUCTURE
    Browser = REGION Rivendell STRUCTURE
    ThreatLevel = 1.0


  ; *** AUDIO Parameters ***

	SoundOnDamaged		= BuildingLightDamageStone
	SoundOnReallyDamaged	= BuildingHeavyDamageStone


    ; *** ENGINEERING Parameters ***
    KindOf = IMMOBILE UNATTACKABLE IGNORED_IN_GUI

    Body = ActiveBody ModuleTag_03
    MaxHealth = 9000.0
    End

    Geometry = BOX
    GeometryMajorRadius = 3.0
    GeometryMinorRadius = 80.0
    GeometryHeight = 32.0
    Shadow = SHADOW_VOLUME ; for demo purposes
    GeometryIsSmall = Yes
End

;---------------------------------------------------
;Rivendell OPWall
ObjectReskin RivOPWall3_Snow RivOPWall3

    ; *** ART Parameters ***
    Draw = W3DScriptedModelDraw ModuleTag_Draw
        DefaultModelConditionState
            Model = RivOPWall3_S
        End
    End
End
    
;---------------------------------------------------
;Rivendell OPWall
Object RivOPWall4

    ; *** ART Parameters ***
    Draw = W3DScriptedModelDraw ModuleTag_Draw
        DefaultModelConditionState
            Model = RivOPWall4
        End
    End

    ; ***DESIGN parameters ***
    DisplayName         = OBJECT:Prop
    Side                = Civilian
    EditorSorting       = STRUCTURE
    Browser = REGION Rivendell STRUCTURE
    ThreatLevel = 1.0


  ; *** AUDIO Parameters ***

	SoundOnDamaged		= BuildingLightDamageStone
	SoundOnReallyDamaged	= BuildingHeavyDamageStone


    ; *** ENGINEERING Parameters ***
    KindOf = IMMOBILE UNATTACKABLE IGNORED_IN_GUI

    Body = ActiveBody ModuleTag_03
    MaxHealth = 9000.0
    End

    Geometry = BOX
    GeometryMajorRadius = 3.0
    GeometryMinorRadius = 60.0
    GeometryHeight = 32.0
    Shadow = SHADOW_VOLUME ; for demo purposes
    GeometryIsSmall = Yes
End

;---------------------------------------------------
;Rivendell RHall
Object RivRHall

    ; *** ART Parameters ***
    Draw = W3DScriptedModelDraw ModuleTag_Draw
        DefaultModelConditionState
            Model = RivRHall
        End
    End

    ; ***DESIGN parameters ***
    DisplayName         = OBJECT:Prop
    Side                = Civilian
    EditorSorting       = STRUCTURE
    Browser = REGION Rivendell STRUCTURE
    ThreatLevel = 1.0

  ; *** AUDIO Parameters ***

	SoundOnDamaged		= BuildingLightDamageStone
	SoundOnReallyDamaged	= BuildingHeavyDamageStone



    ; *** ENGINEERING Parameters ***
    KindOf = IMMOBILE UNATTACKABLE IGNORED_IN_GUI

    Body = ActiveBody ModuleTag_03
    MaxHealth = 9000.0
    End

    Geometry = BOX
    GeometryMajorRadius = 50.0
    GeometryMinorRadius = 110.0
    GeometryHeight = 100.0
    Shadow = SHADOW_VOLUME ; for demo purposes
    GeometryIsSmall = Yes
End

;---------------------------------------------------
;Rivendell RTower
Object RivRTower

	SelectPortrait  =  BPCRivendallBattleTower

    ; *** ART Parameters ***
    Draw = W3DScriptedModelDraw ModuleTag_Draw

		ExtraPublicBone = ARROW_01
		ExtraPublicBone = ARROW_02
		ExtraPublicBone = ARROW_03
		ExtraPublicBone = ARROW_04
		ExtraPublicBone = ARROW_05
		ExtraPublicBone = ARROW_06
		ExtraPublicBone = ARROW_07
		ExtraPublicBone = ARROW_08
		ExtraPublicBone = ARROW_09
		ExtraPublicBone = ARROW_10
		ExtraPublicBone = ARROW_11
		ExtraPublicBone = ARROW_12

        DefaultModelConditionState
            Model = RivRTower
            WeaponLaunchBone = PRIMARY ARROW_
        End
		
		
		;--damaged building

		ModelConditionState  = DAMAGED
		Model         = RivRTower_D1
			ParticleSysBone FireSmall01 FireBuildingLarge
			ParticleSysBone FireSmall02 FireBuildingMedium
			ParticleSysBone FireSmall03 FireBuildingMedium
			ParticleSysBone FireSmall04 FireBuildingSmall
			ParticleSysBone FireSmall05 SmokeBuildingLarge
		End
		AnimationState = DAMAGED
			EnteringStateFX	= FX_BuildingDamaged
		End

		ModelConditionState  = REALLYDAMAGED
		Model         = RivRTower_D2
			ParticleSysBone FireSmall01 FireBuildingLarge
			ParticleSysBone FireSmall02 FireBuildingLarge
			ParticleSysBone FireSmall03 FireBuildingMedium
			ParticleSysBone FireSmall04 SmokeBuildingLarge
			ParticleSysBone FireSmall05 SmokeBuildingLarge
		End
		AnimationState = REALLYDAMAGED
      		Animation				=	RubbleAnimation
				AnimationName		=	RivRTower_D2.RivRTower_D2
				AnimationMode		=	ONCE
  			End
			EnteringStateFX	= FX_BuildingReallyDamaged
		End

		ModelConditionState  = RUBBLE
		Model         = RivRTower_D3
		ParticleSysBone SmokeLarge01 SmokeBuildingLarge
		End
	    
		AnimationState = RUBBLE
      		Animation				=	RubbleAnimation
				AnimationName		=	RivRTower_D3.RivRTower_D3
				AnimationMode		=	ONCE
  			End
		EnteringStateFX	= FX_BuildingReallyDamaged
		End

		ModelConditionState  = POST_RUBBLE
		Model         = None
			ParticleSysBone NONE SmokeBuildingMediumRubble
		End

		ModelConditionState  = POST_COLLAPSE
		Model         = None
			ParticleSysBone NONE SmokeBuildingMediumRubble
		End  
 
    End

    // ***DESIGN parameters ***
    DisplayName         = OBJECT:RivendellBattleTower
    Side                = Civilian
    EditorSorting       = STRUCTURE
    Browser				= REGION Rivendell STRUCTURE
    ThreatLevel			= 1.0
 	CommandSet			= NeutralBattleTowerCommandSet
	VisionRange         = VISION_BASE_DEFENSE
 	ShroudClearingRange = SHROUD_CLEAR_BASE_DEFENSE
	BountyValue         = GONDOR_KEEP_BOUNTY_VALUE

	ArmorSet
		Conditions        = None
		Armor             = StructureArmor		
	End


  ; *** AUDIO Parameters ***

	SoundOnDamaged		= BuildingLightDamageStone
	SoundOnReallyDamaged	= BuildingHeavyDamageStone


    ; *** ENGINEERING Parameters ***
    RadarPriority       = STRUCTURE
    //KindOf				= PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE GARRISON CAN_ATTACK	
	KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE NEED_BASE_FOUNDATION GARRISON CAN_ATTACK GARRISONABLE_UNTIL_DESTROYED MADE_OF_STONE CHUNK_VENDOR ALWAYS_SHOW_HOUSE_COLOR GARRISONABLE_UNTIL_DESTROYED IGNORE_FOR_VICTORY

    Body = StructureBody ModuleTag_03
		MaxHealth				= 2000.0
		MaxHealthDamaged		= 1000.0
		MaxHealthReallyDamaged	= 500.0
    End

	Behavior = HordeGarrisonContain ModuleTag_hordeGarrison
 		ObjectStatusOfContained			= UNSELECTABLE CAN_ATTACK ENCLOSED
 		ContainMax              		= 1
 		DamagePercentToUnits    		= 0%
 		PassengerFilter					= ANY +INFANTRY +BANNER -CAVALRY -SUMMONED -WildSpiderling -WildSpiderlingHorde -COMBO_HORDE
 		AllowEnemiesInside      		= No		
 		AllowNeutralInside      		= Yes	; Cause this structure is normally neutral.
		AllowOwnPlayerInsideOverride	= Yes
 		NumberOfExitPaths       		= 1		; Defaults to 1.  Set 0 to not use ExitStart/ExitEnd, set higher than 1 to use ExitStart01-nn/ExitEnd01-nn
 		PassengerBonePrefix     		= PassengerBone:ARROW_ KindOf:INFANTRY
 		EntryPosition					= X:0.0 Y:0.0 Z:0.0
		EntryOffset						= X:0.0 Y:-55.0 Z:0.0
		ExitOffset						= X:0.0 Y:-55.0 Z:0.0
		EnterSound						= RuinedTowerEnterSound
		ShowPips						= No
	End

	Behavior                  = StructureCollapseUpdate ModuleTag_06
		MinCollapseDelay        = 000
		MaxCollapseDelay        = 000
		CollapseDamping         = .5
		MaxShudder              = 0.6
		MinBurstDelay           = 250
		MaxBurstDelay           = 800
		BigBurstFrequency       = 4
		FXList                  = INITIAL   FX_StructureMediumCollapse
		FXList                  = ALMOST_FINAL  FX_StructureAlmostCollapse
		;DestroyObjectWhenDone	= Yes
		CollapseHeight			= 150
	End

    GeometryIsSmall		= No
    
    Geometry			= BOX
    GeometryMajorRadius = 35.0
    GeometryMinorRadius = 20.0
    GeometryHeight		= 80.0
    GeometryOffset		= X:0 Y:10 Z:0
    
    AdditionalGeometry	= BOX
    GeometryMajorRadius = 20.0
    GeometryMinorRadius = 35.0
    GeometryHeight		= 80.0
    GeometryOffset		= X:0 Y:10 Z:0
    
    Shadow = SHADOW_VOLUME ; for demo purposes
End


;---------------------------------------------------
;Rivendell RTower
ObjectReskin RivRTower_Snow RivRTower

    ; *** ART Parameters ***
    Draw = W3DScriptedModelDraw ModuleTag_Draw
        DefaultModelConditionState
            Model = RivRTower_Snow
        End
    End

End

;---------------------------------------------------
;Rivendell Bridge
Object RivBridge

    ; *** ART Parameters ***
    Draw = W3DScriptedModelDraw ModuleTag_Draw
    
    WallBoundsMesh = P1
	RampMesh1 = P2
	RampMesh2 = P3
		
        DefaultModelConditionState
            Model = RivBridge
        End
    End

    ; ***DESIGN parameters ***
    DisplayName         = OBJECT:Prop
    Side                = Civilian
    EditorSorting       = STRUCTURE
    Browser = REGION Rivendell STRUCTURE
    ThreatLevel = 1.0


  ; *** AUDIO Parameters ***

	SoundOnDamaged		= BuildingLightDamageStone
	SoundOnReallyDamaged	= BuildingHeavyDamageStone


    ; *** ENGINEERING Parameters ***
    KindOf = IMMOBILE UNATTACKABLE WALK_ON_TOP_OF_WALL STRUCTURE IGNORED_IN_GUI

    Body = ActiveBody ModuleTag_03
    MaxHealth = 99999.0
    End

    Geometry			= BOX
    GeometryMajorRadius = 120.0
    GeometryMinorRadius = 235.0
    GeometryHeight		= 100.0
    Shadow				= SHADOW_VOLUME ; for demo purposes
    GeometryIsSmall		= No
End



;---------------------------------------------------
;Rivendell Bell Tower
Object RivBellTower

    ; *** ART Parameters ***
    Draw = W3DScriptedModelDraw ModuleTag_Draw
        DefaultModelConditionState
            Model = RivBTower
        End

			;--damaged building
		ModelConditionState  = DAMAGED
		Model         = RivBTower_D1
      		ParticleSysBone FireSmall01 FireBuildingLarge
			ParticleSysBone FireSmall02 FireBuildingMedium
			ParticleSysBone FireSmall03 FireBuildingMedium
			ParticleSysBone FireSmall04 SmokeBuildingLarge
			ParticleSysBone FireSmall05 FireBuildingMedium 	  
		End
		AnimationState = DAMAGED
		EnteringStateFX	= FX_BuildingDamaged
		End

		ModelConditionState  = REALLYDAMAGED
		Model         = RivBTower_D2  
      		ParticleSysBone FireSmall01 FireBuildingLarge
			ParticleSysBone FireSmall02 FireBuildingLarge
			ParticleSysBone FireSmall03 FireBuildingMedium
			ParticleSysBone FireSmall04 SmokeBuildingLarge
			ParticleSysBone FireSmall05 FireBuildingMedium 	
		End
		AnimationState = REALLYDAMAGED
     		EnteringStateFX	= FX_BuildingDamaged
			Animation				=	RubbleAnimation
					AnimationName		=	RivBTower_D2.RivBTower_D2
					AnimationMode		=	ONCE
  			End
		End

		ModelConditionState  = RUBBLE
		Model         = RivBTower_D3
		ParticleSysBone SmokeLarge01 SmokeBuildingLarge
		End
	    
		AnimationState = RUBBLE
			Animation				=	RubbleAnimation
					AnimationName		=	RivBTower_D3.RivBTower_D3
					AnimationMode		=	ONCE
  			End
  			EnteringStateFX	= FX_BuildingSinkSound
		End

		ModelConditionState  = POST_RUBBLE
			Model         = None
			ParticleSysBone NONE SmokeBuildingMediumRubble
		End

		ModelConditionState  = POST_COLLAPSE
			Model         = None
			ParticleSysBone NONE SmokeBuildingMediumRubble
		End
	    
    End

    ; ***DESIGN parameters ***
    DisplayName         = OBJECT:Prop
    Side                = Civilian
    EditorSorting       = STRUCTURE
    Browser				= REGION Rivendell STRUCTURE
    ThreatLevel			= 1.0
	VisionRange         = VISION_BASE_DEFENSE
 	ShroudClearingRange = SHROUD_CLEAR_BASE_DEFENSE

	ArmorSet
		Conditions        = None
		Armor             = StructureArmor
	End

	WeaponSet
		Weapon				= PRIMARY GoodStructureBow
		AutoChooseSources	= PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End 


  ; *** AUDIO Parameters ***

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged	= BuildingHeavyDamageStone


    ; *** ENGINEERING Parameters ***
    KindOf	= PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE NEED_BASE_FOUNDATION CAN_ATTACK FS_BASE_DEFENSE
	//KindOf = IMMOBILE STRUCTURE IGNORED_IN_GUI ;SELECTABLE 

    Body = StructureBody ModuleTag_03
		MaxHealth				= 9000.0
		MaxHealthDamaged		= 4500.0
		MaxHealthReallyDamaged	= 2250.0
    End
    
	Behavior                  = StructureCollapseUpdate ModuleTag_StructureCollapseUpdate 
		MinCollapseDelay        = 000
		MaxCollapseDelay        = 000
		CollapseDamping         = .5
		MaxShudder              = 0.6
		MinBurstDelay           = 250
		MaxBurstDelay           = 800
		BigBurstFrequency       = 4
		FXList                  = INITIAL   FX_StructureMediumCollapseNoSound
		FXList                  = ALMOST_FINAL  FX_StructureAlmostCollapse
		DestroyObjectWhenDone	= Yes
		CollapseHeight			= 89
	End

	Behavior = AIUpdateInterface ModuleTag_SoWeCanUseWeapon
		AutoAcquireEnemiesWhenIdle	= Yes
		MoodAttackCheckRate			= 250
	End
	
    Geometry			= BOX
    GeometryMajorRadius = 26.0
    GeometryMinorRadius = 26.0
    GeometryHeight		= 200.0
    Shadow				= SHADOW_VOLUME ; for demo purposes
    GeometryIsSmall		= No
End


;---------------------------------------------------
;Rivendell Bell Tower
ObjectReskin RivBellTower_Snow RivBellTower

    ; *** ART Parameters ***
    Draw = W3DScriptedModelDraw ModuleTag_Draw
        DefaultModelConditionState
            Model = RivBTower_S
        End
    End
End
