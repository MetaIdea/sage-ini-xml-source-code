;------------------------------------------------------------------------------
Object MordorBalrog

	; *** ART Parameters ***
    ; SelectPortrait for Heros is portrait behind skill buttons. HP = HeroPortrait.
	SelectPortrait = HPBalrog
    
    ; ButtonImage for Heros is button image on Hero Select UI to select hero. HI = HeroIcon or HeroImage.
    ButtonImage = HIBalrog
    
	Draw = W3DScriptedModelDraw ModuleTag_BodyDraw
;		GlowEnabled = Yes
;		GlowEmissive = Yes
		
;		StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD

		OkToChangeModelColor = Yes
	
		ExtraPublicBone = ZZZPASSENGERBON
		ExtraPublicBone = ZZZWHIPCOIL
		ExtraPublicBone = SWORD

		;-------------------------
		ModelConditionState = NONE ; Not DefaultConditionState, because that keyword copies anything in here to every other state
			Model = MUBalrog_SKN
			ParticleSysBone = SWORD BalrogSwordFlare FollowBone:yes		; Not SWORDBONE, because SWORD is the bone that gets art-hidden mid animation in WIPX
			ParticleSysBone = SWORD BalrogSwordEmbers FollowBone:yes
			ParticleSysBone = MANEBONE BalrogManeFlare FollowBone:yes
			ParticleSysBone = MANEBONE BalrogManeEmbers FollowBone:yes
			ParticleSysBone = MANEBONE BalrogManeFire FollowBone:yes
			ParticleSysBone = RTWINGBONE BalrogWingSmokeLite FollowBone:yes
			ParticleSysBone = LFWINGBONE BalrogWingSmokeLite FollowBone:yes
		End

; This is triggered by the single player only HitReaction module for the lightningsword		
        ModelConditionState = HIT_LEVEL_2
			Model = MUBalLIT_SKN
		End

		ModelConditionState = HERO
			Model = MUBalIGNT_SKN
			ParticleSysBone = MANEBONE BalrogManeFlare FollowBone:yes
			ParticleSysBone = MANEBONE BalrogManeEmbers FollowBone:yes
			ParticleSysBone = MANEBONE BalrogManeFire FollowBone:yes
			ParticleSysBone = RTWINGBONE BalrogWingEmbers FollowBone:yes
			ParticleSysBone = LFWINGBONE BalrogWingEmbers FollowBone:yes

			ParticleSysBone = SWORD BalrogSwordFlare FollowBone:yes		; Not SWORDBONE, because SWORD is the bone that gets art-hidden mid animation in WIPX
			ParticleSysBone = SWORD BalrogSwordEmbers FollowBone:yes
	                ParticleSysBone = NONE BalrogIgniteHeatWave FollowBone:no
		End

		;-----------------		
		IdleAnimationState
			StateName = State_Idle
			Animation = Breathe 
				AnimationName = MUBalrog_SKL.MUBalrog_IDLA
				AnimationMode = ONCE
				AnimationBlendTime = 10
				AnimationPriority = 20
			End
			Animation = LookAround 
				AnimationName = MUBalrog_SKL.MUBalrog_IDLB
				AnimationMode = ONCE
				AnimationBlendTime = 10
				AnimationPriority = 2
			End
			Animation = SnortLikeABull 
				AnimationName = MUBalrog_SKL.MUBalrog_IDLC
				AnimationMode = ONCE
				AnimationBlendTime = 10
				AnimationPriority = 1
			End

			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "State_JustBuilt" 
					then CurDrawableSetTransitionAnimState("TRANS_JustBuilt_To_Idle") 
				end
				if Prev == "State_AboutToHitGround" 
					then CurDrawableSetTransitionAnimState("TRANS_AboutToHitGround_To_Idle") 
				end
			EndScript
		End 
		
		AnimationState					=	DYING DEATH_1
			Animation					=	Dying 
				AnimationName			=	MUBalrog_SKL.MUBalrog_DIEA 
				AnimationMode			=	ONCE
			End
			ParticleSysBone = None BalrogFallDust FollowBone:No
		End

		AnimationState					=	DYING DEATH_2
			Animation					=	FadingOut 
				AnimationName			=	MUBalrog_SKL.MUBalrog_RORC 
				AnimationMode			=	ONCE
			End
		End


; This is triggered by the single player only HitReaction module for the lightningsword	
; It is highest instead of lowest priority, because the hit reaction Paralyzes us, where for others it is just a fancy idle.	
		AnimationState					=	HIT_LEVEL_2
			Animation					=	Owowowowowowowow
				AnimationName			=	MUBalrog_SKL.MUBalrog_HITB 
				AnimationMode			=	ONCE
			End
		End
		
		AnimationState					=	EATING
			Animation					=	DoingHorribleThingToGrabbedGuy 
				AnimationName			=	MUBalrog_SKL.MUBalrog_BRNA 
				AnimationMode			=	ONCE
				AnimationBlendTime		=	0
			End

				ParticleSysBone = ZZZPassengerBon balrogHandSqueezeFlames FollowBone:Yes
                ParticleSysBone = ZZZPassengerBon balrogHandSqueezeFlames2 FollowBone:Yes
				ParticleSysBone = ZZZPassengerBon balrogHandSqueezeFlamesFinal FollowBone:Yes
                ParticleSysBone = ZZZPassengerBon BalrogHandSqueezeFlash FollowBone:Yes
                ParticleSysBone = ZZZPassengerBon BalrogHandSmoke FollowBone:Yes
                ParticleSysBone = RING_2_L balrogHandAsh FollowBone:Yes
                ParticleSysBone = RING_2_L balrogHandAshSmall FollowBone:Yes
		End

		AnimationState					=	UNPACKING PACKING_TYPE_3
			Animation					=	GrabbingToTouching
				AnimationName			=	MUBalrog_SKL.MUBalrog_GRBA 
				AnimationMode			=	ONCE
				AnimationBlendTime		=	0
			End
		End

		AnimationState					=	PACKING PACKING_TYPE_3
			Animation					=	GrabbingFollowThrough 
				AnimationName			=	MUBalrog_SKL.MUBalrog_GRBC 
				AnimationMode			=	ONCE
				AnimationBlendTime		=	0
			End	
		End

		AnimationState			= JUST_BUILT
			StateName = State_JustBuilt
			Animation
				AnimationName = MUBalrog_SKL.MUBalrog_RORA
				AnimationMode = MANUAL
				AnimationBlendTime = 0
			End
		End
		
	    TransitionState = TRANS_JustBuilt_To_Idle
			Animation = BeingSummoned
				AnimationName = MUBalrog_SKL.MUBalrog_RORA 
				AnimationMode = ONCE
			End
		End
		
		AnimationState = FIRING_OR_PREATTACK_B
			Animation = CrackThatWhip 
				AnimationName = MUBalrog_SKL.MUBalrog_WIPA
				AnimationMode = ONCE
			End
				ParticleSysBone = RTHANDBONE BalrogWhip2swordEfx FollowBone:Yes
		End

		AnimationState			= SPECIAL_POWER_1
			Animation			= RoaringFear 
				AnimationName	= MUBalrog_SKL.MUBalrog_RORB
				AnimationMode   = ONCE
			End
				ParticleSysBone = BAT_JAW BalrogScreamEffect FollowBone:Yes
				FXEvent			= Frame:20 Name:FX_BalrogScreamEfx
				ParticleSysBone = BAT_JAW balrogPixelDisplScrm FollowBone:Yes
				ParticleSysBone = BAT_JAW balrogScrmEmbers FollowBone:Yes
		End
			   
		AnimationState			= SPECIAL_WEAPON_ONE
			Animation			= BreathingFireAnimation
				AnimationName	= MUBalrog_SKL.MUBalrog_FIRA
				AnimationMode   = ONCE
			End
				;This is Balrog's fire breath efx
				ParticleSysBone = BAT_JAW balrogFireBreath FollowBone:Yes
				ParticleSysBone = BAT_JAW balrogBreathEmbers FollowBone:Yes
				ParticleSysBone = BAT_JAW balrogBreathSmoke FollowBone:Yes
				ParticleSysBone = BAT_JAW balrogBreathProxy FollowBone:Yes
			End
			   
		AnimationState			= SPECIAL_WEAPON_TWO UNPACKING
			StateName			= State_LeapStart
			Animation			= GettingReadyToLeap
				AnimationName	= MUBalrog_SKL.MUBalrog_JMP1
				AnimationMode   = ONCE
			End
		End
			   
	    AnimationState			= SPECIAL_WEAPON_TWO PACKING
			Animation			= FirstWingBeatGoingUp 
				AnimationName	= MUBalrog_SKL.MUBalrog_JMP2
				AnimationMode   = ONCE
			End
		End
			   
	    AnimationState			= ABOUT_TO_HIT						; Before ThrownProjectile, since by definition this set for nn frames while T_P is still on
			StateName			= State_AboutToHitGround
			Animation			= StartingToLandToTouchingGround 
				AnimationName	= MUBalrog_SKL.MUBalrog_LND1
				AnimationMode   = ONCE
			End
		End
			   
		AnimationState			= THROWN_PROJECTILE
			Animation			= HurtlingThroughAir 
				AnimationName	= MUBalrog_SKL.MUBalrog_FLYA
				AnimationMode   = LOOP
				AnimationBlendTime = 10
			End
		End
			   
	    TransitionState = TRANS_AboutToHitGround_To_Idle
			Animation = SplashAtEndOfJump
				AnimationName = MUBalrog_SKL.MUBalrog_LND2 
				AnimationMode = ONCE
				AnimationBlendTime = 0
			End
		End
		
		AnimationState			= TURN_RIGHT
			Animation			= TurningRight 
				AnimationName	= MUBalrog_SKL.MUBalrog_TRNA
				AnimationMode   = LOOP
				AnimationBlendTime = 10
			End
		End

		AnimationState			= TURN_LEFT
			Animation			= TurningLeft 
				AnimationName	= MUBalrog_SKL.MUBalrog_TRNB
				AnimationMode   = LOOP
				AnimationBlendTime = 10
			End
		End

		AnimationState			= MOVING
			Animation			= Running 
				AnimationName	= MUBalrog_SKL.MUBalrog_WLKA
				AnimationMode   = LOOP
				AnimationBlendTime = 10
			End
			Flags               = RANDOMSTART
			
			FXEvent	= Frame:20 FireWhenSkipped Name:FX_BalrogRightFootStep
			FXEvent	= Frame:44 FireWhenSkipped Name:FX_BalrogLeftFootStep
		End
      
		AnimationState			= WEAPONSET_HERO_MODE UNPACKING PACKING_TYPE_1
			Animation = StartIgniteRoar 
				AnimationName = MUBalrog_SKL.MUBalrog_IGNTA
				AnimationMode = ONCE
			End
		End
				
		AnimationState			= HERO PACKING PACKING_TYPE_1
			Animation = FinishIgniteRoar 
				AnimationName = MUBalrog_SKL.MUBalrog_IGNTB
				AnimationMode = ONCE
			End
           
            EnteringStateFX = FX_BalrogIgniteStart
		End
				
		AnimationState			= FIRING_OR_PREATTACK_A
			Animation			= Swipe
				AnimationName	= MUBalrog_SKL.MUBalrog_ATKB
				AnimationMode	= ONCE
				UseWeaponTiming	= Yes
			End
		End
		
		AnimationState			= FIRING_OR_PREATTACK_C
			Animation			= Chop
				AnimationName	= MUBalrog_SKL.MUBalrog_ATKA
				AnimationMode	= ONCE
				UseWeaponTiming	= Yes
			End
			ParticleSysBone		= SWORDBONE BalrogSword FollowBone:yes
		End
	End

;--------------------------
	Draw = W3DScriptedModelDraw ModuleTag_WhipDraw
		GlowEnabled = Yes
		GlowEmissive = Yes
		ShadowForceDisable = Yes	;The shadow setting is for the whole drawable, but this individual draw module wants to not have a shadow.
		
;		StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD

		DefaultModelConditionState
			Model = None
		End
		
		ModelConditionState = FIRING_OR_PREATTACK_B
			Model = MUBalsWhip_SKN
		End
		
		;------------------
		IdleAnimationState
		End
		
		AnimationState = FIRING_OR_PREATTACK_B
			Animation = CrackThatWhip 
				AnimationName = MUBalsWhip_SKL.MUBalsWhip_WIPA
				AnimationMode = ONCE
				AnimationBlendTime = 0
			End
		End
			WadingParticleSys = BalrogRiverSteam		
	End

	; ***DESIGN parameters ***
	DisplayName      = OBJECT:Balrog
	;//DisplayMeleeDamage = BALROG_DAMAGE_DISPLAY

	Side = Neutral
	EditorSorting = UNIT
	ThreatLevel = 4.0
	ThingClass = CHARACTER_UNIT
	CrusherLevel   = 4  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
	CrushWeapon = BalrogCrush  

	TransportSlotCount = TRANSPORTSLOTCOUNT_MONSTER
	
	WeaponSet
		Conditions = None
		Weapon = PRIMARY	MordorBalrogSwordSwipe
		Weapon = SECONDARY	MordorBalrogWhip
		Weapon = TERTIARY	MordorBalrogSwordChop
		
		AutoChooseSources = SECONDARY None
		OnlyAgainst = TERTIARY STRUCTURE BIG_MONSTER
	End
	
	ArmorSet
		Conditions      = None
		Armor           = BalrogArmor
		DamageFX        = NormalDamageFX
	End

	VisionRange = VISION_BALROG					
	ShroudClearingRange = SHROUD_CLEAR_BALROG

	DisplayName = OBJECT:Balrog
	ShockwaveResistance = SHOCKWAVE_RESISTANCE_ALWAYS
	CommandSet = BalrogCommandSet
	CanPathThroughGates	= No
	IsTrainable = No
	
	DeadCollideSize = LARGE ; How big does the AOD consider this unit for damage fx & behavior.


	;------------------ AUDIO Parameters ----------------------

	VoiceAttack			= BalrogVoiceAttack
	VoiceAttackCharge		= BalrogVoiceAttack
	VoiceAttackMachine	= BalrogVoiceAttack
	VoiceAttackStructure	= BalrogVoiceAttack
	VoiceGuard			= BalrogVoiceMove
	VoiceMove			= BalrogVoiceMove
	VoiceSelect			= BalrogVoiceSelect
	VoiceSelectBattle		= BalrogVoiceSelect

	SoundAmbient		= BalrogAmbientLoop
	SoundImpact			= ImpactHorse

    #include "..\includes\StandardUnitEvaEvents.inc"
	
    ; Warn the player when the enemy gets a unit. Override the normal sighting event from StandardUnitEvaEvents.inc
    EvaEnemyObjectSightedEvent	= DiscoveredEnemyBalrog

	ClientUpdate = EvaAnnounceClientCreate ModuleTag_CreateAnnounce
		AnnouncementEventEnemy = DiscoveredEnemyBalrog
		AnnouncementEventAlly = None
		AnnouncementEventOwner = None
		
		OnlyIfVisible = Yes						; Don't announce if hidden in the shroud
		CountAsFirstSightedAnnoucement = Yes	; Don't re-annouce if going into shroud & back
		UseObjectsPosition = No					; Play from central Fortress, not at unit's position
		CreateFakeRadarEvent = Yes				; Allow player to jump to unit after hearing annoucement
	End

	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		MaxUpdateRangeCap = 800
		AnimationSound = Sound: BalrogFootstep			Animation: MUBalrog_SKL.MUBalrog_WLKA Frames: 42 17 
		AnimationSound = Sound: BalrogFootstep			Animation: MUBalrog_SKL.MUBalrog_TRNA Frames: 21 52
		AnimationSound = Sound: BalrogFootstep			Animation: MUBalrog_SKL.MUBalrog_TRNB Frames: 21 52
 
		AnimationSound = Sound: BalrogWhipPart1			Animation: MUBalrog_SKL.MUBalrog_WIPA Frames: 1 
		AnimationSound = Sound: BalrogWhipPart2			Animation: MUBalrog_SKL.MUBalrog_WIPA Frames: 21 
		AnimationSound = Sound: ImpactWhipCrack			Animation: MUBalrog_SKL.MUBalrog_WIPA Frames: 34

		AnimationSound = Sound: BalrogSwordSwipe			Animation: MUBalrog_SKL.MUBalrog_ATKB Frames: 32	
		AnimationSound = Sound: BalrogSwordSwipe			Animation: MUBalrog_SKL.MUBalrog_ATKA Frames: 32
		AnimationSound = Sound: ImpactBalrogAttackGeneric	Animation: MUBalrog_SKL.MUBalrog_ATKA Frames:41
		AnimationSound = Sound: ImpactBalrogAttackGeneric	Animation: MUBalrog_SKL.MUBalrog_ATKB Frames:40 
		AnimationSound = Sound: ImpactBalrogAttackGeneric	Animation: MUBalrog_SKL.MUBalrog_ATKC Frames:27 53 88

		AnimationSound = Sound: BalrogJump_Part1			Animation: MUBalrog_SKL.MUBalrog_JMP1 Frames: 0 
		AnimationSound = Sound: BalrogJump_Part2			Animation: MUBalrog_SKL.MUBalrog_JMP1 Frames: 41
		AnimationSound = Sound: BalrogWingFlaps			Animation: MUBalrog_SKL.MUBalrog_FLYA Frames: 9 
		AnimationSound = Sound: BalrogLand				Animation: MUBalrog_SKL.MUBalrog_LND1 Frames: 0
		AnimationSound = Sound: BalrogWingFlaps			Animation: MUBalrog_SKL.MUBalrog_JMP2 Frames: 0
		AnimationSound = Sound: BalrogLandSwordHit		Animation: MUBalrog_SKL.MUBalrog_LND2 Frames: 6
		AnimationSound = Sound: BalrogIdleB_Part3			Animation: MUBalrog_SKL.MUBalrog_LND2 Frames: 27

		AnimationSound = Sound: BalrogBreathFireExhale		Animation: MUBalrog_SKL.MUBalrog_FIRA Frames: 31 
		AnimationSound = Sound: BalrogBreathFireInhale		Animation: MUBalrog_SKL.MUBalrog_FIRA Frames: 0

		AnimationSound = Sound: BalrogRoar				Animation: MUBalrog_SKL.MUBalrog_RORB Frames: 25
		AnimationSound = Sound: BalrogVanquishedRoar		Animation: MUBalrog_SKL.MUBalrog_RORC Frames: 21
		AnimationSound = Sound: BalrogVanquished			Animation: MUBalrog_SKL.MUBalrog_RORC Frames: 50

		AnimationSound = Sound: BalrogInjuredB_Part1		Animation: MUBalrog_SKL.MUBalrog_HITB Frames: 0 
		AnimationSound = Sound: BalrogInjuredB_Part2		Animation: MUBalrog_SKL.MUBalrog_HITB Frames: 70 

		AnimationSound = Sound: BalrogChuckle			Animation: MUBalrog_SKL.MUBalrog_IDLA Frames: 1
		AnimationSound = Sound: BalrogContentVox			Animation: MUBalrog_SKL.MUBalrog_IDLA Frames: 0
		AnimationSound = Sound: BalrogIdleB_Part1			Animation: MUBalrog_SKL.MUBalrog_IDLB Frames: 0 
		AnimationSound = Sound: BalrogIdleB_Part2			Animation: MUBalrog_SKL.MUBalrog_IDLB Frames: 37 
		AnimationSound = Sound: BalrogIdleB_Part3			Animation: MUBalrog_SKL.MUBalrog_IDLB Frames: 95 
		AnimationSound = Sound: BalrogIdleC_Part2			Animation: MUBalrog_SKL.MUBalrog_IDLC Frames: 29 
		AnimationSound = Sound: BalrogIdleC_Part3			Animation: MUBalrog_SKL.MUBalrog_IDLC Frames: 60 
		AnimationSound = Sound: BalrogFootstep			Animation: MUBalrog_SKL.MUBalrog_IDLC Frames: 61

		AnimationSound = Sound: BalrogDieVox			Animation: MUBalrog_SKL.MUBalrog_DIEA Frames: 13
		AnimationSound = Sound: BalrogBodyfall1			Animation: MUBalrog_SKL.MUBalrog_DIEA Frames: 56
		AnimationSound = Sound: BalrogBodyfall2			Animation: MUBalrog_SKL.MUBalrog_DIEA Frames: 57
		AnimationSound = Sound: OliphantFall			Animation: MUBalrog_SKL.MUBalrog_DIEA Frames: 21
		AnimationSound = Sound: BalrogLandSwordHit		Animation: MUBalrog_SKL.MUBalrog_DIEA Frames: 54

		AnimationSound = Sound: BalrogIgnite			Animation: MUBalrog_SKL.MUBalrog_IGNTA Frames: 51
	End


  ; *** ENGINEERING Parameters ***  

	RadarPriority = UNIT
  KindOf          = HERO PRELOAD SELECTABLE CAN_CAST_REFLECTIONS MONSTER SCORE CAN_ATTACK NO_FREEWILL_ENTER PATH_THROUGH_INFANTRY SCARY BIG_MONSTER CAN_ATTACK_WALLS SUMMONED
  ThreatBreakdown MordorBalrog_DetailedThreat
	AIKindOf = SIEGEWEAPON
  End
	
  Body            = ActiveBody ModuleTag_02
    MaxHealth         = BALROG_HEALTH					;BALANCE Balrog Health
  End

  Behavior = StancesBehavior ModuleTag_StancesBehavior
    StanceTemplate = FighterHorde
  End

  Behavior = AIUpdateInterface ModuleTag_03
    AutoAcquireEnemiesWhenIdle	= Yes ATTACK_BUILDINGS
    MoodAttackCheckRate			= 500
    AILuaEventsList				= BalrogFunctions
  End

  LocomotorSet
    Locomotor     = BalrogLocomotor
    Condition     = SET_NORMAL
    Speed         = 50
  End

	Behavior = BezierProjectileBehavior ModuleTag_Projectile ; Module starts asleep, and wakes up when thrown.
		; To tweak a Bezier path
		FirstHeight = 104  ; Height of Bezier control points above highest intervening terrain
		SecondHeight = 52
		FirstPercentIndent = 20% ; Percentage of shot distance control points are placed
		SecondPercentIndent = 70%
		TumbleRandomly = Yes

		CrushStyle = Yes ; I don't detonate, I just hit

		BounceCount = 0   ; When I hit the ground, I'll arc again

		FinalStuckTime = 1766 ; Can't move for this long afterwards

		GroundHitFX       = FX_BalrogJumpHitGround
		GroundHitWeapon   = RohanGimliLeapWarhead
		
		PreLandingStateTime = 300; Look ahead to the end of the arc, and get the ABOUT_TO_HIT flag this far in advance
	End

	Behavior = PhysicsBehavior ModuleTag_04
	    GravityMult = 1.0
	End
  
	Behavior = FireWeaponUpdate FireWeaponUpdateModuleTag
		FireWeaponNugget
			WeaponName = MordorBalrogHeroEffect
			FireDelay = 0
			OneShot = No
		End
		HeroModeTrigger = Yes ; this only happens when hero mode is active
	End
  
  	Behavior = SlowDeathBehavior ModuleTag_05
		DeathTypes = ALL -FADED
		DestructionDelay = 2500
        FX = FINAL FX_BalrogFinalDeath
        DeathFlags = DEATH_1
	End
  
  	Behavior = SlowDeathBehavior ModuleTag_FadeDeath
		DeathTypes = NONE +FADED
        FX = INITIAL FX_BalrogUnsummonInitial
		DestructionDelay = 3800
        FX = FINAL FX_BalrogUnsummonFinal
        DeathFlags = DEATH_2
	End
  
  	Behavior = SpecialPowerModule ModuleTag_IgniteStarter                      
		SpecialPowerTemplate      = SpecialAbilityHeroMode
		UpdateModuleStartsAttack  = Yes
		;InitiateSound           = 
	End
	Behavior = HeroModeSpecialAbilityUpdate ModuleTag_IgniteUpdate   
		SpecialPowerTemplate    = SpecialAbilityHeroMode
		UnpackingVariation		= 1

		UnpackTime              = 1800 
		PackTime                = 1600

		AwardXPForTriggering    = 0
		
		HeroAttributeModifier = BalrogIgniteState
		HeroEffectDuration = 30000
	End

	Behavior = SpecialPowerModule ModuleTag_ScreamStarter                      
		SpecialPowerTemplate      = SpecialAbilityBalrogScream
		UpdateModuleStartsAttack  = Yes
		;InitiateSound           = 
	End
	Behavior = ModelConditionSpecialAbilityUpdate ModuleTag_ScreamUpdate   ; So the difference in SpecialPower is that it takes timing from this UpdateG, instead of simply firing.
		SpecialPowerTemplate    = SpecialAbilityBalrogScream

		UnpackTime              = 1500 ; Drawing the horn
		PreparationTime         = 1   ; nothing
		PackTime                = 1800 ; Putting horn away

		AwardXPForTriggering    = 0
		
		WhichSpecialPower = 1
	End

	Behavior = SpecialPowerModule ModuleTag_BreathStarter                      
		SpecialPowerTemplate		= SpecialAbilityBalrogBreath
		UpdateModuleStartsAttack	= Yes
		InitiateSound			= BalrogSpecialPowerRoar	;this plays on right-click target, not when Balrog leaps
	End

	Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_BreathUpdate   
		SpecialPowerTemplate    = SpecialAbilityBalrogBreath

		UnpackTime              = 1300 ; Drawing the horn
		PackTime                = 3700 ; Putting horn away

		AwardXPForTriggering    = 0
		
		StartAbilityRange = 40.0
		
		SpecialWeapon = MordorBalrogBreath
		WhichSpecialWeapon = 1
	End

	Behavior = SpecialPowerModule ModuleTag_LeapStarter                      
		SpecialPowerTemplate		= SpecialAbilityBalrogWings
		UpdateModuleStartsAttack	= Yes
		InitiateSound			= BalrogSpecialPowerRoar	;this plays on right-click target, not when Balrog leaps
	End

	Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_LeapUpdate   
		SpecialPowerTemplate    = SpecialAbilityBalrogWings

		UnpackTime              = 1733 ; Drawing the horn
		PackTime                = 1160 ; Putting horn away

		AwardXPForTriggering    = 0
		
		StartAbilityRange	= 800.0
		ApproachRequiresLOS = No
		SpecialWeapon		= MordorBalrogLeap
		BusyForDuration		= 3000 ; don't accept any AI for this long... ai commands will be queued
		WhichSpecialWeapon	= 2
	End

	Behavior = LifetimeUpdate ModuleTag_LifetimeUpdate
		MinLifetime		= BALROG_LIFETIME
		MaxLifetime		= BALROG_LIFETIME
		DeathType		= FADED
	End
	
	Behavior = CreateObjectDie ModuleTag_CrushUnitsOnDeath
		CreationList = OCL_BalrogDie
 	End

	Geometry			= CYLINDER
	GeometryMajorRadius = 30.0
	GeometryHeight		= 70.0
	GeometryIsSmall		= No
	Shadow				= SHADOW_VOLUME ;SHADOW_DECAL	; SHADOW_VOLUME has trouble with his wings.  Possibly because of the transparent bits
	ShadowSizeX			= 100
	ShadowSizeY			= 100
	ShadowTexture		= ShadowI
End

;------------------------------------------------------------------------------
; aka Smeagal
Object NeutralGollum
	; *** ART Parameters ***

	; This is required for garrisoned objects - please put in all objects.
	ButtonImage = HIGollum
	
        SelectPortrait = HPGollum
        
	Draw = W3DScriptedModelDraw ModuleTag_01
		OkToChangeModelColor = Yes

;;====================== MODELS ================================================================
		DefaultModelConditionState
			Model = CUGollum_SKN
			Skeleton = CUGollum_SKL
		End

;;================== ANIMATIONS =================================================================

;;------------------ MOVING & DYING -------------------------------------------------------------

;;======= DYING

		AnimationState        = STUNNED_STANDING_UP
			Animation           = Stun
				AnimationName     = CUGollum_GTPA
				AnimationMode      = ONCE
			End
		End
		
		AnimationState = DYING
			Animation = DyingA
				AnimationName = CUGollum_DIEA
				AnimationMode = ONCE
			End

			Animation = DyingB
				AnimationName = CUGollum_DIEB
				AnimationMode = ONCE
			End
			
		End

;;======= MOVING
		AnimationState = MOVING
			Animation = Moving
				AnimationName	= CUGollum_RUNA
				AnimationMode	= LOOP
				Distance		= 48
			End
			Flags = RANDOMSTART
			;ParticleSysBone = None InfantryDustTrails
		End

;;------------------ ATTACKING --------------------------------------------------------------------
		AnimationState = FIRING_OR_PREATTACK_A
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;;;;;;		Steps off his shadow :( ;;;;;;;;;;
;			Animation = ATKA
;				AnimationName	= CUGollum_ATKA
;				AnimationMode	= ONCE
;				UseWeaponTiming = Yes
;			End
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
			Animation = ATKB
				AnimationName	= CUGollum_ATKB
				AnimationMode	= ONCE
				UseWeaponTiming = Yes
			End
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;;;;;		Too Long :(  ;;;;;;;;;;;;;
;			Animation = ATKA
;				AnimationName	= CUGollum_ATKC
;				AnimationMode	= ONCE
;				UseWeaponTiming = Yes
;			End			
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
		End

;;-------------------- HIT REACTIONS -----------------------------------------------------------
		AnimationState						= HIT_REACTION
			Animation						= HITA
				AnimationName				= CUGollum_HITA
				AnimationMode				= ONCE
			End
		End		
;;------------ EMOTIONS ------------------------------------------------------------------		

;;====== AFRAID	
		AnimationState						= EMOTION_AFRAID
			StateName						= STATE_Afraid
			Animation						= FERA
				AnimationName				= CUGollum_IDLD			; CUGollum_FERA or CUGollum_FERB don't exist
				AnimationMode				= LOOP
			End
			;Animation						= FERB
			;	AnimationName				= CUGollum_FERB
			;	AnimationMode				= LOOP
			;End
		End

		AnimationState				= EMOTION_TAUNTING
			Animation				= TNTA
				AnimationName		= CUGollum_TNTA
				AnimationMode		= ONCE
			End
			Flags					= RESTART_ANIM_WHEN_COMPLETE
		End

;		AnimationState				= EMOTION_POINTING
;			Animation				= Pointing1
;				AnimationName		= CUGollum_PNTA
;				AnimationMode		= LOOP
;			End
;		End

;;====== CELEBRATING	
		AnimationState				= EMOTION_CELEBRATING
			Animation				= CHRA
				AnimationName	    = CUGollum_CHRA
				AnimationMode		= ONCE
			End
		End
;;------------------- SELECTED STATES ------------------------------------------------------------

;		AnimationState				= SELECTED
;			StateName				= STATE_Selected
;			Flags					= RESTART_ANIM_WHEN_COMPLETE RANDOMSTART
;			Animation				= Selected(ATNA)
;				AnimationName			= CUGollum_IDLA
;				AnimationMode			= LOOP
;			End
;			BeginScript
;				Prev = CurDrawablePrevAnimationState()
;				if Prev == "STATE_Idle"	then CurDrawableSetTransitionAnimState("TRANS_Idle_to_Selected") return end
;			EndScript
;		End

;;--------------- IDLE STATES -----------------------------------------------------------------	

		IdleAnimationState
			StateName				= STATE_Idle
			
			Animation = IDLA
				AnimationName		= CUGollum_IDLA
				AnimationMode		= ONCE
				AnimationBlendTime  =   10
				AnimationPriority	=	20
			End
			Animation = IDLB
				AnimationName		= CUGollum_IDLB
				AnimationMode		= ONCE
				AnimationBlendTime  =   10
				AnimationPriority	=	5
			End
			Animation = IDLC
				AnimationName		= CUGollum_IDLC
				AnimationMode		= ONCE
				AnimationBlendTime  =   10
				AnimationPriority	=	1
			End
			Animation = IDLD
				AnimationName		= CUGollum_IDLD
				AnimationMode		= ONCE
				AnimationBlendTime  =   10
				AnimationPriority	=	1
			End
			Flags               = RESTART_ANIM_WHEN_COMPLETE
		End

	;---Transitions--------------------------------------------
	
;		TransitionState = TRANS_Idle_to_Selected
;			Animation			= Salute
;				AnimationName	= CUGollum_ATNA
;				AnimationMode	= ONCE
;				AnimationSpeedFactorRange = 0.8 1.2
;			End
;		End

	End

;;================== ANIMATIONS END =================================================================
Scale = 1.5

	; ***DESIGN parameters ***
	Side = Neutral
	EditorSorting = UNIT
	ThreatLevel = 1.0
	EmotionRange = 240
	CommandPoints = 0
	
	;//DisplayMeleeDamage = GOLLUM_DAMAGE
	
	CommandSet = GenericCommandSet

	TransportSlotCount = TRANSPORTSLOTCOUNT_HERO
	WeaponSet
		Conditions = None 
		Weapon = PRIMARY    GollumAttack
		AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End
	ArmorSet
		Conditions      = None
		Armor           = GollumArmor
		DamageFX        = NormalDamageFX
	End
	VisionRange = 400.0
	ShroudClearingRange = SHROUD_CLEAR_RANGED_HERO
	DisplayName = OBJECT:NeutralGollum
	CrushableLevel = 0  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
 

	; *** AUDIO Parameters ***;

	VoiceAttack				= GollumVoiceAttack
	VoiceAttackCharge			= GollumVoiceAttackCharge
	VoiceAttackMachine		= GollumVoiceAttackBuilding
	VoiceAttackStructure		= GollumVoiceAttackBuilding
	VoiceFear				= GollumVoiceHelpMe
	VoiceGuard				= GollumVoiceMove
	VoiceMove				= GollumVoiceMove
	VoiceMoveWhileAttacking		= GollumVoiceMove
	VoicePriority			= 1
	VoiceSelect				= GollumVoiceSelectMS
	VoiceSelectBattle			= GollumVoiceSelect

	SoundMoveLoop			= GollumVoxMoveLoop
	SoundImpact				= BodyFallGenericNoArmor

    #include "..\includes\StandardUnitEvaEvents.inc"
	;EvaEventDieOwner			= GollumDie				;Eva event to trigger on unit's death. NOTICE THAT this is only for permanent deaths

	; Override object sighted from StandardUnitEvaEvents.inc
	EvaEnemyObjectSightedEvent    = GollumSeen			; This is so that we get the Gollum Seen event if he is unstealthed when we first see him
	
	ClientUpdate = EvaAnnounceClientCreate ModuleTag_AnnounceCreate
		; And this covers the case where Gollum spawns in while in sight of the player's troops
		AnnouncementEventEnemy = GollumSeen
		AnnouncementEventAlly = GollumSeen
		AnnouncementEventOwner = GollumSeen
		
		OnlyIfVisible = Yes						; Don't announce if hidden in the shroud
		; CountAsFirstSightedAnnoucement = Yes	; Doesn't matter since this unit doesn't use EvaOnFirstSightingEventEnemy/NonEnemy
		UseObjectsPosition = Yes				; Play from Gollum's position
		CreateFakeRadarEvent = Yes				; Allow player to jump to Gollum after hearing annoucement
	End

	Behavior = LargeGroupAudioUpdate ModuleTag_LGAU			;Tie into LargeGroupAudio system
		Key = Hero
	End

	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		MaxUpdateRangeCap = 800
		AnimationSound = Sound:FootstepDirtA		Animation:CUGollum_SKL.CUGollum_RUNA	Frames:1 3 18 21 23 38
		AnimationSound = Sound:FootstepDirtA		Animation:CUGollum_SKL.CUGollum_CHR		Frames:32 59 76 94 110
		AnimationSound = Sound:FootstepDirtA		Animation:CUGollum_SKL.CUGollum_ATKB	Frames:39 45 60 62

		AnimationSound = Sound:BodyFallGenericNoArmor	Animation:CUGollum_SKL.CUGollum_DIEA	Frames:33
		AnimationSound = Sound:BodyFallGenericNoArmor	Animation:CUGollum_SKL.CUGollum_DIEB	Frames:59

		AnimationSound = Sound:GollumVoxAttack		Animation:CUGollum_SKL.CUGollum_ATKB	Frames:23
		AnimationSound = Sound:GollumVoxHurt		Animation:CUGollum_SKL.CUGollum_HITA	Frames:0
	End


	; *** ENGINEERING Parameters ***

	RadarPriority = UNIT
	KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE HERO NEUTRALGOLLUM
 
;	Body = RespawnBody ModuleTag_RespawnBody
;		MaxHealth         = 200                  ;BALANCE Gollum Health
;		;MaxHealthDamaged  = 400
;		PermanentlyKilledByFilter	= NONE		;Who kills me permanently?
;		;;RecoveryTime      = 5000
;	End
	
	Body = ActiveBody ModuleTag_02
	    MaxHealth         = 200
	End

	BuildCost = 50

	Behavior = AutoHealBehavior ModuleTag_HeroHealing
		StartsActive = Yes
		HealingAmount = HERO_HEAL_AMOUNT
		HealingDelay = 1000
		StartHealingDelay = HERO_HEAL_DELAY
		HealOnlyIfNotInCombat = Yes
	End

;	Behavior = RespawnUpdate ModuleTag_RespawnUpdate
;		DeathAnim				= DYING					;Model condition to play when killed-to-respawn
;		;DeathFX				= FX_GandalfLightningSwordHit		;FXList to play when killed-to-respawn
;		DeathAnimationTime		= 4000					;How long DeathAnim will take.
;		InitialSpawnFX			= FX_GollumInitialSpawn
;		RespawnAnim				= EMOTION_CELEBRATING			;Animation to play when respawning.
;		RespawnFX				= FX_GollumRespawn			;FX_Resurrection	;FXList to play when respawning.
;		RespawnAnimationTime		= 2000					;Time it takes for respawn to play.
;		AutoRespawnAtObjectFilter	= NONE +CASTLE_KEEP			;Respawn at this location -- and at it's exit production point if possible.
;		ButtonImage				= HIGollum
;		
;		;RespawnEntries determine the ruleset for how a character can be revived. Some units may automatically respawn, others
;		;may require a specific revive action performed on him. You can specify different values for each level... or use Level:Any
;		RespawnRules =				AutoSpawn:No	Cost:50		Time:10000		Health:100%		;DEFAULT VALUES
;		RespawnEntry =	Level:2						Cost:700		Time:14000						;For other levels, only override what is different.
;		RespawnEntry =	Level:3						Cost:800		Time:16000
;		RespawnEntry =	Level:4						Cost:900		Time:18000
;		RespawnEntry =	Level:5						Cost:1000		Time:20000
;		RespawnEntry =	Level:6						Cost:1100		Time:22000
;		RespawnEntry =	Level:7						Cost:1200		Time:24000
;		RespawnEntry =	Level:8						Cost:1300		Time:26000
;		RespawnEntry =	Level:9						Cost:1400		Time:28000
;		RespawnEntry =	Level:10					Cost:1500		Time:30000
;	End

	Behavior = AIUpdateInterface ModuleTag_03
		AutoAcquireEnemiesWhenIdle = Yes
		MoodAttackCheckRate        = 500
	End

	LocomotorSet
		Locomotor     = HumanLocomotor
		Condition     = SET_NORMAL
		Speed         = 45 ;32
	End

	LocomotorSet
		Locomotor     = HumanWanderLocomotor
		Condition     = SET_WANDER
		Speed         = 32
	End
 
	Behavior = PhysicsBehavior ModuleTag_04
		GravityMult = 1.0
	End


	Behavior = InvisibilityUpdate ModuleTag_StealthForEscape
		InvisibilityNugget
			InvisibilityType			= CAMOUFLAGE
			ForbiddenConditions			= FIRING_ANY
			BecomeStealthedFX       	= FX_ElvenCloakOn
			ExitStealthFX           	= FX_ElvenCloakOff
			DetectionRange				= 120
			HintDetectableConditions    = IS_FIRING_WEAPON
		End
		StartsActive					= Yes
		UpdatePeriod					= 2000
	End

	EvaEventDetectedEnemy       = GollumSeen
	EvaEventDetectedAlly        = GollumSeen
	EvaEventDetectedOwner       = GollumSeen
 
 	Behavior = HitReactionBehavior ModuleTag_HitAnimModule
		HitReactionLifeTimer1 = 2500 ; level 1 (light  damage)  

		HitReactionThreshold1 =  0.0   ; level 1 (light  damage) threshold trigger
	End
 
	Behavior = SlowDeathBehavior ModuleTag_05
		DeathTypes = ALL 
		SinkDelay = 3000
		SinkRate = 0.40     ; in Dist/Sec
		DestructionDelay = 8000
		Sound = INITIAL GollumVoiceDie
	End
 
	Behavior = SquishCollide ModuleTag_06
		;nothing
	End
  
	Behavior = HordeMemberCollide ModuleTag_HMC
		;nothing
	End

	Geometry = CYLINDER
	GeometryMajorRadius = 8.0
	GeometryMinorRadius = 8.0
	GeometryHeight = 19.2
	GeometryIsSmall = Yes

	Shadow = SHADOW_DECAL
	ShadowSizeX = 7;
	ShadowSizeY = 7;
	ShadowTexture = ShadowI;
End

;------------------------------------------------------------------------------
ChildObject NeutralGollum_RingHero NeutralGollum

	Behavior = CreateObjectDie ModuleTag_DropTheRing
		CreationList = OCL_TheOneRing
	End
	
	;Behavior = CreateObjectDie ModuleTag_CreateTheRingStealer
	;	CreationList = OCL_TheRingStealer
	;End
	
	Behavior = AnimalAIUpdate ModuleTagWanderAround
		FleeRange			= 300	; how close enemies have to be before we panic
		FleeDistance		= 800	; how far the animal will run once spooked
		WanderPercentage	= 80		; percentage of the time we should move
		MaxWanderDistance	= 50	; maximum distance to move at once
		MaxWanderRadius		= 999999	; how far to wander on our own
		UpdateTimer			= 1		; how often do we want to check for enemies
	End

End

;------------------------------------------------------------------------------
ChildObject NeutralGollum_RingStealer NeutralGollum

	Behavior = AnimalAIUpdate ModuleTagWanderAround
		FleeRange			= 200	; how close enemies have to be before we panic
		FleeDistance		= 800	; how far the animal will run once spooked
		WanderPercentage	= 5		; percentage of the time we should move
		MaxWanderDistance	= 100	; maximum distance to move at once
		MaxWanderRadius		= 100	; how far to wander on our own
		UpdateTimer			= 1		; how often do we want to check for enemies
	End

	Behavior = AIUpdateInterface ModuleTag_03
		AutoAcquireEnemiesWhenIdle	= Yes
		MoodAttackCheckRate			= 500
		AILuaEventsList				= NeutralGollum_RingStealerFunctions
	End

	Behavior = CreateObjectDie ModuleTag_RespawnRingStealer
		DeathTypes			= ALL -SLAUGHTERED
		CreationList		= OCL_TheRingStealer
	End
	
	Behavior = CreateObjectDie ModuleTag_RespawnRingCarrier
		DeathTypes			= NONE +SLAUGHTERED
		CreationList		= OCL_TheRingCarrier
	End

End

;------------------------------------------------------------------------------
; aka Shelob the spider
Object MordorShelob
	; *** ART Parameters ***

    ; SelectPortrait for Heros is portrait behind skill buttons. HP = HeroPortrait.
	SelectPortrait = HPShelobNew
    
    ; This is required for garrisoned objects - please put in all objects.
    ButtonImage = HIShelob
    
	Draw = W3DScriptedModelDraw ModuleTag_01

	  OkToChangeModelColor = Yes
	  
		DefaultModelConditionState
			Model					= MUShelob_SKN
			Skeleton				= MUShelob_SKL
		End

		IdleAnimationState
			Animation				= IDLA
				AnimationName		= MUShelob_IDLA
				AnimationMode		= ONCE
			End
		End

		; -------- STUNNED ANIMS ---------		
		AnimationState        = STUNNED_FLAILING
			Animation           = StunFlail
				AnimationName     = MUShelob_FLYA
				AnimationMode      = LOOP
			End
			Flags               = RANDOMSTART
		End
		
		AnimationState        = STUNNED
			Animation           = Stun
				AnimationName     = MUShelob_LNDA
				AnimationMode      = ONCE
			End
		End
		
		AnimationState        = STUNNED_STANDING_UP
			Animation           = Stun
				AnimationName     = MUShelob_GTPA
				AnimationMode      = ONCE
			End
		End
		
		; -------- DYING ANIMS ---------		
		AnimationState				= DYING
			Animation				= DIEA
				AnimationName		= MUShelob_DIEA
				AnimationMode		= ONCE
			End
		End
	
		; ------- MOVING ANIMS ---------	
		AnimationState				= TURN_LEFT
			StateName				= Turn
			Animation				= Walk
				AnimationName		= MUShelob_TRNL 
				AnimationMode		= LOOP
			End
		End
		
		AnimationState				= TURN_RIGHT
			StateName				= Turn
			Animation				= Walk
				AnimationName		= MUShelob_TRNR 
				AnimationMode		= LOOP
			End
		End

		AnimationState				= MOVING BACKING_UP
			Animation				= BAKA
				AnimationName		= MUShelob_BAKA
				AnimationMode		= LOOP
			End
			Flags					= RANDOMSTART
		End

		AnimationState				=	MOVING ATTACKING
			Animation				=	RUNA
				AnimationName		=	MUShelob_RUNA
				AnimationMode		=	LOOP
				Distance			=	21
			End
		End
		AnimationState				=	MOVING 
			Animation				=	WLKA
				AnimationName		=	MUShelob_WLKA
				AnimationMode		=	LOOP
				Distance			=	21
			End
		End

		; ------- ATTACKING ANIMS ---------	
		AnimationState				= FIRING_OR_PREATTACK_A
			Animation				= ATKA
				AnimationName		= MUShelob_ATKA
				AnimationMode		= ONCE
			End
		End
				
		AnimationState				=	SELECTED
			Animation           = IDLA
				AnimationName     = MUShelob_IDLA
				AnimationMode     = ONCE
				AnimationPriority = 1
			End
			Animation           = IDLA
				AnimationName     = MUShelob_IDLA
				AnimationMode     = ONCE
				AnimationPriority = 1
			End
			Animation				=	AtAttention
				AnimationName		=	MUShelob_ATNA
				AnimationMode		=	ONCE
			End
			Flags					= RESTART_ANIM_WHEN_COMPLETE
		End
		
		; ------- HIT REACTION ANIMS ---------	
		AnimationState = HIT_REACTION HIT_LEVEL_1
			Animation = Hit_Level_1_a
				AnimationName = MUShelob_HITA
				AnimationMode = ONCE
			End
		End
	End
	
	; ***DESIGN parameters ***
	Side = Neutral
	EditorSorting = UNIT
	ThreatLevel = 1.0
	TransportSlotCount = TRANSPORTSLOTCOUNT_MONSTER
	WeaponSet
		Conditions = None 
		Weapon = PRIMARY    ShelobMandibles
		AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End
	ArmorSet
		Conditions      = None
		Armor           = ShelobArmor
		DamageFX        = NormalDamageFX
	End
	VisionRange = 120.0
	DisplayName = OBJECT:NeutralShelob
	CrushableLevel = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
	CommandSet = ShelobCommandSet


	; *** AUDIO Parameters ***;

	;VoiceAmbushed			= ShelobVoiceDie	  OBSOLETE VOICE
	VoiceAttack			= ShelobVoiceAttack
	VoiceAttackCharge		= ShelobVoiceAttack
	VoiceAttackMachine		= ShelobVoiceAttack
	VoiceAttackStructure		= ShelobVoiceAttack
	VoiceCreated			= ShelobVoiceSelect
	VoiceFullyCreated 		= ShelobVoiceSelect
	VoiceMove			= ShelobVoiceMove
	VoiceMoveToCamp			= ShelobVoiceMove
	VoiceMoveWhileAttacking		= ShelobVoiceMove
	VoicePriority			= 50
	VoiceRetreatToCastle		= ShelobVoiceDie
	VoiceSelect			= ShelobVoiceSelect
	VoiceSelectBattle 		= ShelobVoiceSelect
	VoiceGuard			= ShelobVoiceMove
	

	SoundAmbient			= ShelobVoiceSinglesLoop
	SoundImpact			= ImpactHorse
	;SoundMoveLoop			= ShelobMove

	;UnitSpecificSounds
	;End

    #include "..\includes\StandardUnitEvaEvents.inc"

	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		MaxUpdateRangeCap = 800
		AnimationSound = Sound: ShelobMove		Animation:MUShelob_SKL.MUShelob_TRNL 	Frames:1 11
		AnimationSound = Sound: ShelobMove		Animation:MUShelob_SKL.MUShelob_TRNR 	Frames:1 11
		AnimationSound = Sound: ShelobMove		Animation:MUShelob_SKL.MUShelob_WLKA 	Frames:1 17 33 
		AnimationSound = Sound: ShelobMove		Animation:MUShelob_SKL.MUShelob_RUNA 	Frames:1 5 9
		AnimationSound = Sound: ShelobMove		Animation:MUShelob_SKL.MUShelob_GTPA 	Frames:1 16 
		AnimationSound = Sound: ShelobMove		Animation:MUShelob_SKL.MUShelob_ATKA 	Frames:0 39
		AnimationSound = Sound: ShelobMove		Animation:MUShelob_SKL.MUShelob_ATKB 	Frames:0 100
		AnimationSound = Sound: ShelobFootstep		Animation:MUShelob_SKL.MUShelob_TRNL 	Frames:0 5 10 15 
		AnimationSound = Sound: ShelobFootstep		Animation:MUShelob_SKL.MUShelob_TRNR 	Frames:0 5 10 15 
		AnimationSound = Sound: ShelobFootstep		Animation:MUShelob_SKL.MUShelob_WLKA 	Frames:0 8 16 24 32 40 
		AnimationSound = Sound: ShelobFootstep		Animation:MUShelob_SKL.MUShelob_RUNA 	Frames:0 4 8 
		AnimationSound = Sound: ShelobFootstep		Animation:MUShelob_SKL.MUShelob_GTPA 	Frames: 10 20
		AnimationSound = Sound: ShelobFootstepAttack 	Animation:MUShelob_SKL.MUShelob_ATKA 	Frames:26
		AnimationSound = Sound: ShelobFootstepAttack 	Animation:MUShelob_SKL.MUShelob_ATKB 	Frames:26
		AnimationSound = Sound: ShelobVoiceHurt 	Animation:MUShelob_SKL.MUShelob_HITA	Frames:0
		AnimationSound = Sound: ShelobAttackScreech	Animation:MUShelob_SKL.MUShelob_ATKA	Frames:20
		AnimationSound = Sound: ShelobAttackScreech	Animation:MUShelob_SKL.MUShelob_ATKB	Frames:20
		AnimationSound = Sound: TrollBodyfall		Animation:MUShelob_SKL.MUShelob_LNDA	Frames:2
		AnimationSound = Sound: TrollBodyfall		Animation:MUShelob_SKL.MUShelob_DIEA	Frames:6
		;AnimationSound = Sound: ShelobVoiceDie Animation:MUShelob_SKL.MUShelob_DIEA Frames:12
		;AnimationSound = Sound: ShelobFootstep2 Animation:MUShelob_SKL.MUShelob_TRNL Frames:0 5 10 15 Animation:MUShelob_SKL.MUShelob_TRNR Frames:0 5 10 15 Animation:MUShelob_SKL.MUShelob_WLKA Frames:0 4 8 12 16 20 24 28 32 36 40 46 Animation:MUShelob_SKL.MUShelob_RUNA Frames:0 Animation:MUShelob_SKL.MUShelob_GTPA Frames:0 15
	End

	; *** ENGINEERING Parameters ***
	RadarPriority = UNIT
	KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS MONSTER SCORE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT PATH_THROUGH_EACH_OTHER HERO CAN_CLIMB_WALLS
	
	Behavior = AIUpdateInterface ModuleTag_03
		AutoAcquireEnemiesWhenIdle = Yes
		MoodAttackCheckRate        = 500
		AILuaEventsList				= ShelobFunctions
		MaxCowerTime				=	7500
		MinCowerTime				=	5000
	End

   	Behavior = EmotionTrackerUpdate	Module_EmotionTracker
		AddEmotion	=	Terror_Base
		AddEmotion	=	OVERRIDE UncontrollableFear_Base_Evil
			Duration			=	7000	
		End
		AddEmotion	=	Alert_Base
		IgnoreVeterancy = Yes
	End

	LocomotorSet
		Locomotor     = ShelobWallScalingLocomotor
		Condition     = SET_NORMAL
		Speed         = 50
	End
	
	Body = RespawnBody ModuleTag_RespawnBody
		MaxHealth         = 4500                ;BALANCE Shelob Health
		PermanentlyKilledByFilter	= NONE		;Who kills me permanently?
	End
	Behavior = RespawnUpdate ModuleTag_RespawnUpdate
		DeathAnim					= STUNNED						;Model condition to play when killed-to-respawn
;		DeathFX						= FX_GandalfLightningSwordHit	;FXList to play when killed-to-respawn
		DeathAnimationTime			= 1133							;How long DeathAnim will take.

		RespawnAnim					= SELECTED			;Animation to play when respawning.
		RespawnFX					= FX_Resurrection					;FXList to play when respawning.
		RespawnAnimationTime		= 2000							;Time it takes for respawn to play.
		AutoRespawnAtObjectFilter	= NONE +CASTLE_KEEP				;Respawn at this location -- and at it's exit production point if possible.
		ButtonImage					= HIShelob
		
		;RespawnEntries determine the ruleset for how a character can be revived. Some units may automatically respawn, others
		;may require a specific revive action performed on him. You can specify different values for each level... or use Level:Any
		RespawnRules =				AutoSpawn:No	Cost:600		Time:12000		Health:100%		;DEFAULT VALUES
		RespawnEntry =	Level:2						Cost:700		Time:14000						;For other levels, only override what is different.
		RespawnEntry =	Level:3						Cost:800		Time:16000
		RespawnEntry =	Level:4						Cost:900		Time:18000
		RespawnEntry =	Level:5						Cost:1000		Time:20000
		RespawnEntry =	Level:6						Cost:1100		Time:22000
		RespawnEntry =	Level:7						Cost:1200		Time:24000
		RespawnEntry =	Level:8						Cost:1300		Time:26000
		RespawnEntry =	Level:9						Cost:1400		Time:28000
		RespawnEntry =	Level:10					Cost:1500		Time:30000
	End
	
	Behavior = PhysicsBehavior ModuleTag_04
		GravityMult = 1.0
		ShockStandingTime = 1000	;msec
	End
	
	Behavior = SlowDeathBehavior ModuleTag_05
		DeathTypes = ALL 
		SinkDelay = 2500
		SinkRate = 3.00     ; in Dist/Sec
		DestructionDelay = 20000
		FX = INITIAL FX_GiantSpiderDie
		Sound = INITIAL ShelobVoiceDie
	End
	
	Behavior = SquishCollide ModuleTag_06
		;nothing
	End
	
	Behavior = HitReactionBehavior HitReactionBehaviorModuleTag
		HitReactionLifeTimer1 = 2000 ; level 1 (light  damage) 
		HitReactionThreshold1 = 1.0   ; level 1 (light  damage) threshold trigger
	End
	
  	Behavior = SpecialPowerModule ModuleTag_EatStarter                      
		SpecialPowerTemplate      = SpecialPowerEat
		UpdateModuleStartsAttack  = Yes
	End
	Behavior = SpecialAbilityUpdate ModuleTag_EatUpdate
		SpecialPowerTemplate		= SpecialPowerEat
		StartAbilityRange			= 15.0 ;Negative distances will cause the unit to overshoot the destination.
		PreparationTime				= 1
		PackTime					= 3667 ; Eating
		TriggerAttributeModifier	= ShelobSelfHealWhileEating
		AttributeModifierDuration	= 3600
		KillAttributeModifierOnExit = Yes ;If player aborts ability, the attribute modifier is immediately removed.
	End
	
	Behavior = AutoHealBehavior ModuleTag_SarumanHealing
		StartsActive = Yes
		HealingAmount = 50	
		HealingDelay = 1000	
		StartHealingDelay = 10000
		HealOnlyIfNotInCombat = Yes
	End

	Geometry = CYLINDER
	GeometryMajorRadius = 25.0
	GeometryMinorRadius = 25.0
	GeometryHeight = 30.0
	GeometryIsSmall = No
	Shadow = SHADOW_DECAL	;SHADOW_VOLUME
	ShadowSizeX = 47;
	ShadowSizeY = 30;
	ShadowOffsetX = -4;
	ShadowTexture = ShadowSpider2 ;ShadowI
End

ChildObject MordorShelobNoFear MordorShelob
  
	Behavior = AIUpdateInterface ModuleTag_03
		AutoAcquireEnemiesWhenIdle = Yes
		MoodAttackCheckRate        = 500
		AILuaEventsList				= None
		MaxCowerTime				=	7500
		MinCowerTime				=	5000
	End

	Body = RespawnBody ModuleTag_RespawnBody
		MaxHealth         = 3500                ;BALANCE Shelob Health
		PermanentlyKilledByFilter	= NONE		;Who kills me permanently?
	End

   	Behavior = EmotionTrackerUpdate	Module_EmotionTracker
		AddEmotion	=	Alert_Base
	End
	
	LocomotorSet
		Locomotor     = ShelobWallScalingLocomotor
		Condition     = SET_NORMAL
		Speed         = 60
	End
End

;------------------------------------------------------------------------------
;Creating this oathbreaker will randomize between several variations of the oathbreaker.
;------------------------------------------------------------------------------
Object RohanOathbreaker

	SelectPortrait         = UPOathBreakers

	Draw = W3DScriptedModelDraw ModuleTag_01  
		DefaultModelConditionState
			;Give it a model so it'll show up in WB
			Model               = RUPsnt_1_SKN
			Skeleton            = RUPsnt_1_SKL
		End
	End

	;***** IMPORTANT NOTE! ***************************************************************	
	;Certain Upgrades and costs may need to be propagated from here. One example was veterancy
	;overlays. See Zero Hour GLAVehicleTechnical for reference.
	;*************************************************************************************	

	Side = Neutral
	IsTrainable = No
	EditorSorting = UNIT
	BuildVariations = RohanOathbreaker1 RohanOathbreaker2 RohanOathbreaker3	
	KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE THROWN_OBJECT DOZER
	
  ;Shadow = SHADOW_DECAL
  ;ShadowSizeX = 24;
  ;ShadowSizeY = 24;
  ;ShadowTexture = ShadowI;

End

;------------------------------------------------------------------------------
; aka Oathbreakers, Dead, Army of the Dead
Object RohanOathbreaker1
	; *** ART Parameters ***

	SelectPortrait         = UPOathBreakers

	Draw = W3DHordeModelDraw ModuleTag_01

		DefaultModelConditionState
			Model               = RUOath3A_SKN
			Skeleton            = RUOath3_SKL
            ParticleSysBone = NONE AODTrails FollowBone:no
 		End
   
		IdleAnimationState
			StateName				= STATE_Idle
			Animation				= IDLA
				AnimationName       = RUOath3_IDLB
				AnimationMode       = ONCE
				AnimationSpeedFactorRange = 0.9 1.1
				AnimationBlendTime	= 20
			End			
		End

		
		AnimationState        = DYING
			Animation           = RUNA
				AnimationName     = RUOath3A_DIEA
			End
            EnteringStateFX = FX_AODDeath
		End

		AnimationState        =  OATH_FULLFILLED
			Animation           = WLK
				AnimationName     = RUOath3_WLKA
				AnimationMode     = LOOP
			End
			ParticleSysBone = NONE AODtrackingLightShafts
		End

		AnimationState        =  ATTACKING
			Animation           = ATA1
				AnimationName     = RUOath3_ATKA
				AnimationMode     = LOOP
				AnimationSpeedFactorRange = 0.75 1.25
			End
		End

		AnimationState        =  FIRING_A
			Animation           = ATA1
				AnimationName     = RUOath3_ATKA
				AnimationMode     = LOOP
			End
		End

		AnimationState        = MOVING
			Animation           = RUNA
				AnimationName     = RUOath3_RUNA
				AnimationMode     = LOOP
			End
			Flags               = RANDOMSTART
		End
		
	End
	
	; ***DESIGN parameters ***
	Side = Neutral
	IsTrainable = No
	EditorSorting = UNIT
	ThreatLevel = 3.0
	ThingClass = HORDE_UNIT
	CommandPoints = 0

	EmotionRange = 0 ; Make sure this value is greater than the fear distribution range. 

	TransportSlotCount = TRANSPORTSLOTCOUNT_UNIT
	WeaponSet
		Conditions = None 
		Weapon = PRIMARY    OathbreakerSword
		AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End
	ArmorSet
		Conditions      = None
		Armor           = OathBreakerArmor
		DamageFX        = NormalDamageFX
	End
	VisionRange = 81
	DisplayName = OBJECT:Oathbreaker
	CrushableLevel = 5  ; Nothing can crush these guys. What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
;	CrusherLevel = 4  ; They don't crush anyone - they use a custom module to do damage. What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
	
	ShockwaveResistance = SHOCKWAVE_RESISTANCE_ALWAYS
	
	CommandSet = GondorFighterCommandSet
	EquivalentTo = RohanOathbreaker

	; *** AUDIO Parameters ***;

	VoiceAttack			= OathbreakerVoxSelect
;	VoiceCreated		= OathbreakerVoxSelect
;	VoiceFullyCreated	= OathbreakerVoxSelect
	VoiceMove			= OathbreakerVoxSelect
	VoicePriority		= 15
	VoiceSelect			= OathbreakerVoxSelect

	SoundImpact			= ImpactHorse
	
	UnitSpecificSounds
		VoiceGarrison						= OathbreakerVoxSelect
		VoiceEnterUnitElvenTransportShip	= OathbreakerVoxSelect
		VoiceEnterUnitEvilMenTransportShip	= OathbreakerVoxSelect
		VoiceEnterUnitMordorMumakil			= OathbreakerVoxSelect
		VoiceEnterUnitSlaughterHouse		= OathbreakerVoxSelect
		VoiceInitiateCaptureBuilding		= OathbreakerVoxSelect
	End

    #include "..\includes\StandardUnitEvaEvents.inc"

    ; Warn the player when the enemy gets a unit. Override the normal sighting event from StandardUnitEvaEvents.inc
    EvaEnemyObjectSightedEvent	= DiscoveredEnemyOathbreaker		;GenericEnemyUnitSighted ; Normal response to enemy units

	ClientUpdate = EvaAnnounceClientCreate ModuleTag_CreateAnnounce
		AnnouncementEventEnemy = DiscoveredEnemyOathbreaker
		AnnouncementEventAlly = None
		AnnouncementEventOwner = None
		
		OnlyIfVisible = Yes						; Don't announce if hidden in the shroud
		CountAsFirstSightedAnnoucement = Yes	; Don't re-annouce if going into shroud & back
		UseObjectsPosition = No					; Play from central Fortress, not at unit's position
		CreateFakeRadarEvent = Yes				; Allow player to jump to unit after hearing annoucement
	End

	; *** ENGINEERING Parameters ***
	RadarPriority = UNIT
	KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE THROWN_OBJECT ATTACK_NEEDS_LINE_OF_SIGHT ARMY_OF_DEAD
	
	Body = ActiveBody ModuleTag_02
		MaxHealth         = 2000                
		MaxHealthDamaged  = 2000
		;RecoveryTime      = 15000
	End
	
	Behavior = AIUpdateInterface ModuleTag_03
		AutoAcquireEnemiesWhenIdle	=	Yes ATTACK_BUILDINGS
		MoodAttackCheckRate			=	500
	End

	LocomotorSet
		Locomotor = ArmyOfTheDeadLocomotor
		Condition = SET_NORMAL 
		Speed     = 100
		
	End

	Behavior = LifetimeUpdate ModuleTag_LifetimeUpdate
		MinLifetime		= OATHBREAKER_LIFETIME
		MaxLifetime		= OATHBREAKER_LIFETIME
	End	

	Behavior = PhysicsBehavior ModuleTag_04
		GravityMult = 1.0
		ShockStunnedTimeLow		= 1400
		ShockStunnedTimeHigh	= 2400
		ShockStandingTime		= 2400
	End 
	
	Behavior = SlowDeathBehavior ModuleTag_SlowDeath_01
		DeathTypes = ALL 
;		SinkDelay = 200
; Rising in animation, don't sink		SinkRate = 5.40     ; in Dist/Sec
		DestructionDelay = 3000
        FadeTime = 1000
        FadeDelay = 1000
		;Sound = INITIAL OathbreakerDie
	End
	
	
	Behavior = OathbreakersFadeAwayBehavior ModuleTag_05
		FadeOutTime   = 3500 ;  Fade time in ms - 4000 == 4 seconds.
	End

	Behavior = AODCrushCollide ModuleTag_06
		SmallFXList = FX_AODHitSmall; FXList for small objects.
		MediumFXList = FX_AODHitMedium; FXList for medium objects.
        ; LargeFXList = FX_AODHitLarge; FXList for medium objects.
		;MediumObjectCreationList = OCL_FireFieldSmall; disabled for now.
		
		; Normal damage delivered.
		Damage = 50 ;10.0
		DamageType = MAGIC
		DeathType = SUPERNATURAL
		
		SpecialObject = NONE +MordorBalrog +GondorAragorn -SELECTABLE -CAVALRY -INFANTRY -HERO -MONSTER; Special objects receive and dish out special damage.
		SpecialDamage = 5.0  ; not as lethal (has to be really small so as not to provoke a hit reaction from balrog, who wants to only react to phaser and lightning)
		SpecialDamageType = MAGIC
		SpecialDeathType = CRUSHED
		
		SelfDamage = 9999.0  ; Damaging a special object inflicts damage on self.
		SelfDamageType = FLAME
		SelfDeathType = BURNED
	End
	
	; Tie into LargeGroupAudio system
	Behavior = LargeGroupAudioUpdate ModuleTag_LGAU
		Key = Oathbreaker
	End

	Geometry = CYLINDER
	GeometryMajorRadius = 12.0
	GeometryMinorRadius = 12.0
	GeometryHeight = 19.2
	GeometryIsSmall = No
	;Shadow = SHADOW_DECAL
	;Shadow = SHADOW_VOLUME	
	;ShadowSizeX = 10;
	;ShadowSizeY = 10;
	;ShadowTexture = ShadowI;
End

;------------------------------------------------------------------------------
; aka Oathbreakers, Dead, Army of the Dead
ObjectReskin RohanOathbreaker2 RohanOathbreaker1
	; *** ART Parameters ***
	
	Draw = W3DHordeModelDraw ModuleTag_01

		DefaultModelConditionState
			Model               = RUOath3B_SKN
			Skeleton            = RUOath3_SKL
            ParticleSysBone = NONE AODTrails FollowBone:no
 		End
   
		IdleAnimationState
			StateName				= STATE_Idle
			Animation				= IDLA
				AnimationName       = RUOath3B_IDLB
				AnimationMode       = ONCE
				AnimationSpeedFactorRange = 0.9 1.1
				AnimationBlendTime	= 20
			End			
		End

		AnimationState        = DYING
			Animation           = RUNA
				AnimationName     = RUOath3B_DIEA
			End
            EnteringStateFX = FX_AODDeath
		End
		
		AnimationState        =  OATH_FULLFILLED
			Animation           = WLK
				AnimationName     = RUOath3B_WLKA
				AnimationMode     = LOOP
			End
				ParticleSysBone = NONE AODtrackingLightShafts
		End

		AnimationState        =  ATTACKING
			Animation           = ATA1
				AnimationName     = RUOath3B_ATKA
				AnimationMode     = LOOP
				AnimationSpeedFactorRange = 0.75 1.25
			End
		End

		AnimationState        =  FIRING_A
			Animation           = ATA1
				AnimationName     = RUOath3B_ATKA
				AnimationMode     = LOOP
			End
		End

		AnimationState        = MOVING
			Animation           = RUNA
				AnimationName     = RUOath3B_RUNA
				AnimationMode     = LOOP
			End
			Flags               = RANDOMSTART
		End	
	End	
End

;------------------------------------------------------------------------------
; aka Oathbreakers, Dead, Army of the Dead
ObjectReskin RohanOathbreaker3 RohanOathbreaker1
	; *** ART Parameters ***

	Draw = W3DHordeModelDraw ModuleTag_01

		DefaultModelConditionState
			Model               = RUOath3C_SKN
			Skeleton            = RUOath3_SKL
            ParticleSysBone = NONE AODTrails FollowBone:no
 		End
   
		IdleAnimationState
			StateName				= STATE_Idle
			Animation				= IDLA
				AnimationName       = RUOath3C_IDLB
				AnimationMode       = ONCE
				AnimationSpeedFactorRange = 0.9 1.1
				AnimationBlendTime	= 20
			End			
		End

		AnimationState        = DYING
			Animation           = RUNA
				AnimationName     = RUOath3C_DIEA
			End
            EnteringStateFX = FX_AODDeath
		End
		
		AnimationState        =  OATH_FULLFILLED
			Animation           = WLK
				AnimationName     = RUOath3C_WLKA
				AnimationMode     = LOOP
			End
			ParticleSysBone = NONE AODtrackingLightShafts
		End

		AnimationState        =  ATTACKING
			Animation           = ATA1
				AnimationName     = RUOath3C_ATKA
				AnimationMode     = LOOP
				AnimationSpeedFactorRange = 0.75 1.25
			End
		End

		AnimationState        =  FIRING_A
			Animation           = ATA1
				AnimationName     = RUOath3C_ATKA
				AnimationMode     = LOOP
			End
		End

		AnimationState        = MOVING
			Animation           = RUNA
				AnimationName     = RUOath3C_RUNA
				AnimationMode     = LOOP
			End
			Flags               = RANDOMSTART
		End
	End
End

;------------------------------------------------------------------------------
; Rohirrim Oathbreakers on a Horse
Object RohanOathbreakersCavalry
	; *** ART Parameters ***
	; NOTE: If you are updating any of the art parameters, you should really check
	; GondorCavalryRiderless in FactionSubObject.ini and see if it needs to be updated

	SelectPortrait         = UPOathBreakers

	Draw = W3DScriptedModelDraw ModuleTag_01 
		StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD

	
		DefaultModelConditionState
			Model					= RUOthHrse_SKN
		End


		IdleAnimationState
			Animation				=	IdleA
				AnimationName		=	RURohrm_SKL.RURohrm_IDLA
				AnimationPriority	=	20
				AnimationMode		=	ONCE
				AnimationBlendTime	=	15
			End
			Animation				=	IdleB
				AnimationName		=	RURohrm_SKL.RURohrm_IDLB
				AnimationMode		=	ONCE
				AnimationBlendTime	=	15
			End
		End
		
		AnimationState				=	PASSENGER
			Animation				=	grabbed
				AnimationName		=	RURohrm_SKL.RURohrm_GBDA
				AnimationMode		=	LOOP
			End
			Flags					=	RANDOMSTART
		End
		
		; --- stunned anims
		AnimationState				=	FREEFALL 
			Animation				=	free fall
				AnimationName		=	RURohrm_SKL.RURohrm_FLYB
				AnimationMode		=	LOOP
			End
			Flags					=	RANDOMSTART
		End
		
		AnimationState				=	STUNNED_FLAILING 
			Animation				=	JustDie
				AnimationName		=	RURohrm_SKL.RURohrm_FLYC
				AnimationMode		=	LOOP
			End
			Flags					=	RANDOMSTART
		End

		AnimationState				=	STUNNED 
			Animation				=	Land
				AnimationName		=	RURohrm_SKL.RURohrm_LNDA
				AnimationMode		=	ONCE
			End
		End

		AnimationState				=	STUNNED_STANDING_UP
			Animation				=	StandUp
				AnimationName		=	RURohrm_SKL.RURohrm_GTPA
				AnimationMode		=	ONCE
			End
		End

		; This is the no-spawn-horse type of death
		AnimationState				=	DYING     ; DEATH_2 Normally has DEATH_2, but just as a backup don't insist
			Animation				=	JustDie
				AnimationName		=	RURohrm_SKL.RURohrm_DIEA
				AnimationMode		=	ONCE
			End
		End
		
		; When the rider is killed, we call this animation even though the unit hasn't officially died yet.
		AnimationState				=	DEATH_2
			Animation				=	JustDie
				AnimationName       =	RURohrm_SKL.RURohrm_DIEB
				AnimationMode       =	ONCE
			End
		End
		
		AnimationState = MOVING ENGAGED
			Animation = Moving_Engaged
				AnimationName = RURohrm_SKL.RURohrm_RUNC
				AnimationMode = LOOP
			End
			Flags               = RANDOMSTART
		End
		
		AnimationState				=	TURN_LEFT_HIGH_SPEED
			Animation				=	TurnLeft
				AnimationName		=	RURohrm_SKL.RURohrm_TNL1
				AnimationMode		=	LOOP
;				AnimationSpeedFactorRange= 1.8 1.8
				AnimationBlendTime	=	20
			End
		End
		
		AnimationState				=	TURN_RIGHT_HIGH_SPEED
			Animation				=	TurnLeft
				AnimationName		=	RURohrm_SKL.RURohrm_TNR1
				AnimationMode		=	LOOP
;				AnimationSpeedFactorRange= 1.8 1.8
				AnimationBlendTime	=	20
			End
		End
		
		AnimationState				= MOVING WANDER
			Animation				= WLKA
				AnimationName		= RURohrm_SKL.RURohrm_WLKA
				AnimationMode		= LOOP
			End
		End

		AnimationState				=	MOVING TURN_LEFT 
			Animation				=	TurnLeft
				AnimationName		=	RURohrm_SKL.RURohrm_TRNL
				AnimationMode		=	LOOP
			End
		End

		AnimationState				=	MOVING TURN_RIGHT 
			Animation				=	TurnRight
				AnimationName		=	RURohrm_SKL.RURohrm_TRNR
				AnimationMode		=	LOOP
			End
		End
	
		AnimationState				=	MOVING ACCELERATE
			Animation				=	Accelerate
				AnimationName		=	RURohrm_SKL.RURohrm_ACCL
				AnimationMode		=	LOOP
			End
		End

		AnimationState				=	MOVING DECELERATE
			Animation				=	Decelerate
				AnimationName		=	RURohrm_SKL.RURohrm_DECL
				AnimationMode		=	ONCE
			End
		End

		AnimationState				=	MOVING
			Animation				=	RunA
				AnimationName		=	RURohrm_SKL.RURohrm_RUNA
				AnimationMode		=	LOOP
			End
			Flags					=	RANDOMSTART
		End

		AnimationState				=	SELECTED
			SimilarRestart			=   Yes
			Animation				=	AtAttention
				AnimationName		=	RURohrm_SKL.RURohrm_ATNA
				AnimationMode		=	ONCE
			End
		End	
	End
	
	ShockwaveResistance = SHOCKWAVE_RESISTANCE_IMMUNE
	

	; ***DESIGN parameters ***
	Side = Men
	EditorSorting = UNIT
	ThreatLevel = 2.0
	TransportSlotCount = TRANSPORTSLOTCOUNT_UNIT
	CommandPoints = 0

	ArmorSet
		Conditions      = None
		Armor           = CavalryLineFormationArmor
		DamageFX        = NormalDamageFX
	End
	ArmorSet
		Conditions		= ALTERNATE_FORMATION
		Armor			= CavalryWedgeFormationArmor
		DamageFX		= NormalDamageFX
	End
	WeaponSet
		Conditions = None 
		Weapon = PRIMARY    RohanRohirrimSpear
		AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
		Weapon = SECONDARY	RiderlessWeapon
		AutoChooseSources = SECONDARY FROM_SCRIPT
	End
	VisionRange = 280.0
	DisplayName = OBJECT:Oathbreaker
	CrushableLevel = 4  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
	CrusherLevel = 0
	
	; *** AUDIO Parameters ***;

    #include "..\includes\StandardUnitEvaEvents.inc"

	VoiceAttack			= OathbreakerVoxSelect
;	VoiceCreated		= OathbreakerVoxSelect
;	VoiceFullyCreated	= OathbreakerVoxSelect
	VoiceMove			= OathbreakerVoxSelect
	VoicePriority		= 16
	VoiceSelect			= OathbreakerVoxSelect
	;VoiceSelect2		= RohirrimAttention

	SoundCrushing		= RohirrimCrushing ; Sound made when crushing another unit underhoof
	SoundImpact			= ImpactHorse
	SoundMoveStart		= GondorHorseMoveStart
	
	UnitSpecificSounds
		VoiceGarrison						= OathbreakerVoxSelect
		VoiceEnterUnitElvenTransportShip	= OathbreakerVoxSelect
		VoiceEnterUnitEvilMenTransportShip	= OathbreakerVoxSelect
		VoiceEnterUnitMordorMumakil			= OathbreakerVoxSelect
		VoiceEnterUnitSlaughterHouse		= OathbreakerVoxSelect
		VoiceInitiateCaptureBuilding		= OathbreakerVoxSelect
	End

	; Tie into LargeGroupAudio system
	Behavior = LargeGroupAudioUpdate ModuleTag_LGAU
		Key = Oathbreaker
	End

    ; Warn the player when the enemy gets a unit. Override the normal sighting event from StandardUnitEvaEvents.inc
    EvaEnemyObjectSightedEvent	= DiscoveredEnemyOathbreaker		;GenericEnemyUnitSighted ; Normal response to enemy units

	ClientUpdate = EvaAnnounceClientCreate ModuleTag_CreateAnnounce
		AnnouncementEventEnemy = DiscoveredEnemyOathbreaker
		AnnouncementEventAlly = None
		AnnouncementEventOwner = None
		
		OnlyIfVisible = Yes						; Don't announce if hidden in the shroud
		CountAsFirstSightedAnnoucement = Yes	; Don't re-annouce if going into shroud & back
		UseObjectsPosition = No					; Play from central Fortress, not at unit's position
		CreateFakeRadarEvent = Yes				; Allow player to jump to unit after hearing annoucement
	End

	; *** ENGINEERING Parameters ***
	RadarPriority = UNIT
	ThingClass = CAVALRY_UNIT

	KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS CAVALRY SCORE INFANTRY ARMY_OF_DEAD
	
	Body = ActiveBody ModuleTag_02
		MaxHealth         = 100                  ;BALANCE Man at Arms Health
		MaxHealthDamaged  = 5
		;RecoveryTime      = 5000
	End

	Behavior = AIUpdateInterface ModuleTag_03
		AutoAcquireEnemiesWhenIdle = Yes ATTACK_BUILDINGS
		AILuaEventsList	=	RohirrimFunctions
		AttackPriority = AttackPriorityCavalry
	End

	LocomotorSet
		Locomotor = HorseLocomotor
		Condition = SET_NORMAL 
		Speed     = 72
	End

	Behavior = PhysicsBehavior ModuleTag_04
		GravityMult = 1.0
		ShockStunnedTimeLow		= 1400
		ShockStunnedTimeHigh	= 2400
		ShockStandingTime		= 2400
	End
	
	Behavior = OathbreakersFadeAwayBehavior ModuleTag_05
		FadeOutTime   = 3500 ;  Fade time in ms - 4000 == 4 seconds.
	End

	Behavior = LifetimeUpdate ModuleTag_LifetimeUpdate
		MinLifetime		= OATHBREAKER_LIFETIME
		MaxLifetime		= OATHBREAKER_LIFETIME
	End	

	Behavior = AODCrushCollide ModuleTag_06
		SmallFXList = FX_AODHitSmall; FXList for small objects.
		MediumFXList = FX_AODHitMedium; FXList for medium objects.
        ;LargeFXList = FX_AODHitLarge; FXList for medium objects.
		
		; Normal damage delivered.
		Damage = 99999.0  ; normally really lethal
		DamageType = CRUSH
		DeathType = CRUSHED
		
		SpecialObject = NONE +MordorBalrog -SELECTABLE -CAVALRY -INFANTRY -HERO -MONSTER; Special objects receive and dish out special damage.
		SpecialDamage = 100.0  ; not as lethal
		SpecialDamageType = CRUSH
		SpecialDeathType = CRUSHED
		
		SelfDamage = 9999.0  ; Damaging a special object inflicts damage on self.
		SelfDamageType = FLAME
		SelfDeathType = BURNED
	End


	Behavior = SlowDeathBehavior ModuleTag_08
		DeathTypes = ALL 
		SinkDelay = 1000
		SinkRate = 1.40     ; in Dist/Sec
		DestructionDelay = 10000
		;ProbabilityModifier = 33
		DeathFlags = DEATH_2 ; Tell model which death animation to play. Sets BOTH model condition and object status bits.
		;Sound = INITIAL OathbreakerDie
	End
	
	Geometry = CYLINDER
	GeometryMajorRadius = 10.4
	GeometryMinorRadius = 10.4
	GeometryHeight = 20.0
	GeometryIsSmall = No
	;Shadow = SHADOW_DECAL
	;ShadowSizeX = 30;
	;ShadowSizeY = 21;
	;ShadowTexture = ShadowI;

End

;-----------------------------------------------------------------------------------------
; Marker Object
;-----------------------------------------------------------------------------------------
Object Marker
	; *** ART Parameters ***

	Draw = W3DScriptedModelDraw ModuleTag_01
		OkToChangeModelColor = Yes
		NoRotate = Yes
		
		DefaultModelConditionState
			Model           = MUSauronEye
		End
   
	End
	
	; ***DESIGN parameters ***
	Side = Neutral
	EditorSorting	= UNIT
	ThreatLevel		= 1.0
	CommandPoints	= 0

	VisionRange		= 200.0
	DisplayName		= OBJECT:Marker
	
	CommandSet		= EmptyCommandSet

	; *** AUDIO parameters ***
  	EvaEnemyObjectSightedEvent = None  ; Not a real unit

	; *** ENGINEERING Parameters ***
	RadarPriority = UNIT
	KindOf = SELECTABLE NO_COLLIDE AIRCRAFT UNATTACKABLE MOVE_ONLY CLICK_THROUGH HERO IGNORE_FOR_VICTORY IGNORE_FOR_EVA_SPEECH_POSITION
	
	Body = ActiveBody ModuleTag_02
		MaxHealth         = 200000
		MaxHealthDamaged  = 100000
		;RecoveryTime      = 5000
	End

	Behavior = AIUpdateInterface	ModuleTag_AIUpdateInterface
	End

	Behavior = PhysicsBehavior		ModuleTag_PhysicsBehavior
	End
	
	LocomotorSet
		Locomotor = EyeLocomotor
		Condition = SET_NORMAL 
		Speed     = 200
	End
	
	Behavior = LifetimeUpdate ModuleTag_LifetimeUpdate
		MinLifetime		= 60000
		MaxLifetime		= 60000
	End
	
	
	Geometry = CYLINDER
	GeometryMajorRadius = 1.0
	GeometryMinorRadius = 1.0
	GeometryHeight		= 1.0
	GeometryIsSmall		= Yes

    Shadow			= SHADOW_ADDITIVE_DECAL_DYNAMIC
    ShadowSizeX		= 400;
    ShadowSizeY		= 400;
    ShadowTexture	= EXLnzFlar1;

	ShadowOpacityStart = 0
	ShadowOpacityFadeInTime = 1000
	ShadowOpacityPeak = 255
	ShadowOpacityFadeOutTime = 1000
	ShadowOpacityEnd = 0

End

;-----------------------------------------------------------------------------------------
; Crebain Object
;-----------------------------------------------------------------------------------------
Object Crebain
	; *** ART Parameters ***

    ; ButtonImage for Heros is button image on Hero Select UI to select hero. HI = HeroIcon or HeroImage.
    ButtonImage 		= HICrebain
    SelectPortrait         	= UPCrebain

	Draw = W3DHordeModelDraw ModuleTag_01
		; OkToChangeModelColor = Yes ; temporarily commented out to remove the house color

		WadingParticleSys = EntRipples

		StaticModelLODMode = Yes ; Will append M or L to the skin name depending on GameLOD

		DefaultModelConditionState
			Model					= Crebain_SKN
		End
		
		IdleAnimationState
			StateName				= Idle
			Animation				= IdleA
				AnimationName       = Crebain_SKL.Crebain_IDL
				AnimationMode       = LOOP
				AnimationBlendTime  = 30
			End
			Flags						= RANDOMSTART RESTART_ANIM_WHEN_COMPLETE
		End
		
		AnimationState				= JUST_BUILT
			StateName				= State_JustBuilt
			Animation
				AnimationName		= Crebain_SKL.Crebain_SMNA
				AnimationMode		= ONCE
				AnimationBlendTime	= 0
			End
		End
		
		AnimationState				= DYING DEATH_1				; Killed
			Animation
				AnimationName		= Crebain_SKL.Crebain_SMNB 
				AnimationMode		= ONCE
				AnimationBlendTime	= 15
			End
		End
		
		
		AnimationState				= MOVING
			Animation				= RunA
				AnimationName       = Crebain_SKL.Crebain_MOV
				AnimationMode       = LOOP
				AnimationBlendTime  = 30
;				Distance			= 35
			End
		End

		AnimationState				=	SELECTED
			StateName				=	State_Selected
			Animation				=	AtAttention
				AnimationName		=	Crebain_SKL.Crebain_IDL
				AnimationMode		=	LOOP
				AnimationBlendTime  = 30
			End
		End
		
	End
		
	Draw = W3DScriptedModelDraw DustEffects
	    DefaultModelConditionState
	      Model = None
	    End
	    IdleAnimationState
	    End
	    AnimationState = MOVING WADING
			ParticleSysBone = None FootstepSlash
	    End
	    AnimationState = MOVING ACCELERATE
			ParticleSysBone = None GenericSiegeTrailDust
	    End
	    AnimationState = MOVING DECELERATE
			ParticleSysBone = None GenericSiegeTrailDust
	    End
	    AnimationState = MOVING
	    End
	End
	
	; ***DESIGN parameters ***
	Side			= Neutral
	EditorSorting	= UNIT
	ThreatLevel		= 0.0
	CommandPoints	= 0
	ShockwaveResistance = SHOCKWAVE_RESISTANCE_IMMUNE

	VisionRange		= 200.0
	DisplayName		= OBJECT:Crebain
	
	CommandSet		= EmptyCommandSet


	; *** AUDIO Parameters ***

	EvaEnemyObjectSightedEvent = None  ; Don't bother player about this object showing up over their base -- happens too much to bother

	SoundAmbient = CrebainAmbientLoop
	SoundMoveStart = CrebainSelect

	VoiceSelect = CrebainSelect


	; *** ENGINEERING Parameters ***

	RadarPriority = UNIT
	KindOf = SELECTABLE NO_COLLIDE MONSTER MOVE_ONLY HERO IGNORE_FOR_VICTORY IGNORE_FOR_EVA_SPEECH_POSITION IGNORES_SELECT_ALL SUMMONED SCORE
	SelectionPriority = SELECTION_PRIORITY_CREBAIN
	
	Body = ActiveBody ModuleTag_02
		MaxHealth         = 1500
		MaxHealthDamaged  = 750
		;RecoveryTime      = 5000
	End

	Behavior = AIUpdateInterface	ModuleTag_AIUpdateInterface
	End

	Behavior = PhysicsBehavior		ModuleTag_PhysicsBehavior
	End
	
	LocomotorSet
		Locomotor = CrebainLocomotor
		Condition = SET_NORMAL 
		Speed     = 200
	End
	
	Behavior = LifetimeUpdate ModuleTag_LifetimeUpdate
		MinLifetime		= 60000
		MaxLifetime		= 60000
	End	
	

	Behavior = AttributeModifierAuraUpdate ModuleTag_FearMe
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= EyeOfSauronFear
		RefreshDelay	= 1000
		Range			= 150.0
		ObjectFilter	= ANY +INFANTRY +CAVALRY
		TargetEnemy		= Yes
		MaxActiveRank	= 1		;Only affects level 1 rank units
	End
	
	Behavior = AttributeModifierAuraUpdate ModuleTag_Debuff
		StartsActive	= Yes
		BonusName		= GenericDebuff
		AntiCategory	= LEADERSHIP BUFF
		Range			= 200
		RefreshDelay	= 2000
		ObjectFilter	= ANY +INFANTRY +CAVALRY -STRUCTURE -BASE_FOUNDATION -HORDE -HERO
		TargetEnemy		= Yes
	End

	; Detects other stealth units
	Behavior = StealthDetectorUpdate StealthDetectorUpdateModuleTag
		DetectionRate		= 500   ; how often to rescan for stealthed things in my sight (msec)
	End

	Behavior = SlowDeathBehavior ModuleTag_NormalDeath			; Nuked
		DeathTypes			= ALL
        DeathFlags			= DEATH_1
		DestructionDelay	= 2000
		SinkDelay			= 2000
		;SinkRate			= 0.64								; in Dist/Sec
		Sound = INITIAL SpellGenericUnsummonFasterMS
	End

	Geometry = CYLINDER
	GeometryMajorRadius = 50.0
	GeometryMinorRadius = 50.0
	GeometryHeight		= 61.0
	GeometryIsSmall		= No
	;AttackContactPoint  = X:0 Y:0 Z:60
	AttackContactPoint  = X:40 Y:40 Z:60
	AttackContactPoint  = X:-40 Y:40 Z:60
	AttackContactPoint  = X:-40 Y:-40 Z:60
	AttackContactPoint  = X:40 Y:-40 Z:60

    Shadow			= SHADOW_ADDITIVE_DECAL_DYNAMIC
    ShadowSizeX		= 400;
    ShadowSizeY		= 400;
    ShadowTexture	= MUSauronEye;

	ShadowOpacityStart = 0
	ShadowOpacityFadeInTime = 1000
	ShadowOpacityPeak = 255
	ShadowOpacityFadeOutTime = 1000
	ShadowOpacityEnd = 0

	ShadowOverrideLODVisibility = yes
End

;---------------------------------------------------------------------------------------
ObjectReskin WildCaveBats Crebain
	; *** ART Parameters ***

    ; ButtonImage for Heros is button image on Hero Select UI to select hero. HI = HeroIcon or HeroImage.
    ButtonImage 	   = HICaveBats
    SelectPortrait         = UPBatCloud

	Draw = W3DHordeModelDraw ModuleTag_01
		; OkToChangeModelColor = Yes ; temporarily commented out to remove the house color

		WadingParticleSys = EntRipples

		StaticModelLODMode = Yes ; Will append M or L to the skin name depending on GameLOD

		DefaultModelConditionState
			Model					= Bats_SKN
		End
		
		IdleAnimationState
			StateName				= Idle
			Animation				= IdleA
				AnimationName       = Bats_SKL.Bats_IDLA
				AnimationMode       = LOOP
				AnimationBlendTime  = 30
			End
			Flags						= RANDOMSTART
		End
		
		AnimationState				= JUST_BUILT
			StateName				= State_JustBuilt
			Animation
				AnimationName		= Bats_SKL.Bats_SMNA
				AnimationMode		= ONCE
				AnimationBlendTime	= 0
			End
		End
		
		AnimationState				= DYING DEATH_1				; Killed
			Animation
				AnimationName		= Bats_SKL.Bats_SMNB 
				AnimationMode		= ONCE
				AnimationBlendTime	= 15
			End
		End
		
		
		AnimationState				= MOVING
			Animation				= RunA
				AnimationName       = Bats_SKL.Bats_MOV
				AnimationMode       = LOOP
				AnimationBlendTime  = 30
;				Distance			= 35
			End
		End
		

		AnimationState				=	SELECTED
			StateName				=	State_Selected
			Animation				=	AtAttention
				AnimationName		=	Bats_SKL.Bats_IDLA
				AnimationMode		=	LOOP
				AnimationBlendTime  = 30
			End
		End
		
	End

	; *** AUDIO Parameters ***

	SoundAmbient = CaveBatsAmbientLoop
	SoundMoveStart = CaveBatsSelect

	VoiceSelect = CaveBatsSelect

	;--------------
	
	DisplayName = OBJECT:CaveBats
End

;//---------------------------------------------------------------------------------------
Object WildBatCloud
	;// *** ART Parameters ***

    ;// ButtonImage for Heros is button image on Hero Select UI to select hero. HI = HeroIcon or HeroImage.
    ButtonImage			= HICaveBats
    SelectPortrait		= UPBatCloud    

	Draw = W3DHordeModelDraw ModuleTag_01
		;// OkToChangeModelColor = Yes ; temporarily commented out to remove the house color

		WadingParticleSys = EntRipples

		StaticModelLODMode = Yes ; Will append M or L to the skin name depending on GameLOD

		DefaultModelConditionState
			Model					= Bats_SKN
		End
		
		IdleAnimationState
			StateName				= Idle
			Animation				= IdleA
				AnimationName       = Bats_SKL.Bats_IDLA
				AnimationMode       = LOOP
				AnimationBlendTime  = 30
			End
			Flags					= RANDOMSTART
		End
		
		;TransitionState       = TRANS_TO_IDLE
		;	Animation
		;		AnimationName     = Bats_IDLA
		;		AnimationMode     = ONCE
		;	End
		;End
		
	
		AnimationState				= JUST_BUILT
			StateName				= State_JustBuilt
			Animation
				AnimationName		= Bats_SKL.Bats_SMNA
				AnimationMode		= ONCE
				AnimationBlendTime	= 0
			End
		End
		
		AnimationState				= DYING DEATH_1				; Killed
			Animation
				AnimationName		= Bats_SKL.Bats_SMNB 
				AnimationMode		= ONCE
				AnimationBlendTime	= 15
			End
		End
		
		AnimationState				= MOVING
			Animation				= RunA
				AnimationName       = Bats_SKLBats_SMNABats_MOV
				AnimationMode       = LOOP
				AnimationBlendTime  = 30
;				Distance			= 35
			End
		End

		;AnimationState				=	SELECTED
		;	StateName				=	State_Selected
		;	Animation				=	AtAttention
		;		AnimationName		=	Bats_SKL.Bats_IDLA
		;		AnimationMode		=	LOOP
		;		AnimationBlendTime  =	30
		;	End
		;End
	End
	
	

	;// ***DESIGN parameters ***
	Side				= Neutral
	EditorSorting		= UNIT
	ThreatLevel			= 0.0
	CommandPoints		= 0
	ShockwaveResistance = SHOCKWAVE_RESISTANCE_IMMUNE

	VisionRange			= 200.0
	DisplayName			= OBJECT:BatCloud
	
	CommandSet			= EmptyCommandSet


	;// *** AUDIO Parameters ***
	EvaEnemyObjectSightedEvent	= None  ;// Don't bother player about this object showing up over their base -- happens too much to bother

	;SoundAmbient = CrebainAmbientLoop
	;SoundMoveStart = CrebainSelect

	;VoiceSelect = CrebainSelect

	;// *** ENGINEERING Parameters ***
	RadarPriority = UNIT
	KindOf = SELECTABLE NO_COLLIDE MONSTER MOVE_ONLY CLICK_THROUGH HERO IGNORE_FOR_VICTORY IGNORE_FOR_EVA_SPEECH_POSITION IGNORES_SELECT_ALL
	
	Body = ActiveBody ModuleTag_02
		MaxHealth         = 200000
		MaxHealthDamaged  = 100000		
	End

	Behavior = AIUpdateInterface	ModuleTag_AIUpdateInterface
	End

	Behavior = PhysicsBehavior		ModuleTag_PhysicsBehavior
	End
	
	Behavior = SlowDeathBehavior ModuleTag_NormalDeath			; Nuked
		DeathTypes			= ALL
        DeathFlags			= DEATH_1
		DestructionDelay	= 2000
		SinkDelay			= 2000
		;SinkRate			= 0.64								; in Dist/Sec
		Sound = INITIAL SpellGenericUnsummonFasterMS
	End
	
	
	LocomotorSet
		Locomotor = CrebainLocomotor
		Condition = SET_NORMAL 
		Speed     = 200
	End
	
	Behavior = LifetimeUpdate ModuleTag_LifetimeUpdate
		MinLifetime		= 30000
		MaxLifetime		= 30000
	End	
	
	Behavior = FireWeaponUpdate ModuleTag_PeckTheirEyesOut
		FireWeaponNugget
			WeaponName		= WildFortressBatCloudBasicWeapon
			FireDelay		= 1000
			OneShot			= No
		End
	End

	;Behavior = SlowDeathBehavior ModuleTag_05
	;	DeathTypes = ALL
	;End

	Geometry			= CYLINDER
	GeometryMajorRadius = 50.0
	GeometryHeight		= 61.0
	GeometryIsSmall		= No
	;AttackContactPoint  = X:0 Y:0 Z:60
	AttackContactPoint  = X:40 Y:40 Z:60
	AttackContactPoint  = X:-40 Y:40 Z:60
	AttackContactPoint  = X:-40 Y:-40 Z:60
	AttackContactPoint  = X:40 Y:-40 Z:60

    Shadow			= SHADOW_ADDITIVE_DECAL_DYNAMIC
    ShadowSizeX		= 400
    ShadowSizeY		= 400
    ShadowTexture	= MUSauronEye

	ShadowOpacityStart			= 0
	ShadowOpacityFadeInTime		= 1000
	ShadowOpacityPeak			= 255
	ShadowOpacityFadeOutTime	= 1000
	ShadowOpacityEnd			= 0

	ShadowOverrideLODVisibility = yes
End

;//---------------------------------------------------------------------------------------
Object IsengardMurderOfCrows
	;// *** ART Parameters ***

    ;// ButtonImage for Heros is button image on Hero Select UI to select hero. HI = HeroIcon or HeroImage.
    ButtonImage			= HICrebain
    SelectPortrait 		= UPCrebain   

	Draw = W3DHordeModelDraw ModuleTag_01
		;// OkToChangeModelColor = Yes ; temporarily commented out to remove the house color

		WadingParticleSys = EntRipples

		StaticModelLODMode = Yes ; Will append M or L to the skin name depending on GameLOD

		DefaultModelConditionState
			Model					= Crebain_SKN
		End
		
		IdleAnimationState
			StateName				= Idle
			Animation				= IdleA
				AnimationName       = Crebain_SKL.Crebain_IDLA
				AnimationMode       = LOOP
				AnimationBlendTime  = 30
			End
			Flags						= RANDOMSTART RESTART_ANIM_WHEN_COMPLETE
		End
		
		AnimationState				= MOVING
			Animation				= RunA
				AnimationName       = Crebain_SKL.Crebain_MOV
				AnimationMode       = LOOP
				AnimationBlendTime  = 30
;				Distance			= 35
			End
		End

		AnimationState				=	SELECTED
			StateName				=	State_Selected
			Animation				=	AtAttention
				AnimationName		=	Crebain_SKL.Crebain_IDLA
				AnimationMode		=	LOOP
				AnimationBlendTime  =	30
			End
		End
	End

	;// ***DESIGN parameters ***
	Side				= Neutral
	EditorSorting		= UNIT
	ThreatLevel			= 0.0
	CommandPoints		= 0
	ShockwaveResistance = SHOCKWAVE_RESISTANCE_IMMUNE

	VisionRange			= 200.0
	DisplayName			= OBJECT:MurderOfCrows
	
	CommandSet			= EmptyCommandSet


	;// *** AUDIO Parameters ***
	EvaEnemyObjectSightedEvent	= None  ;// Don't bother player about this object showing up over their base -- happens too much to bother

	;SoundAmbient = CrebainAmbientLoop
	;SoundMoveStart = CrebainSelect

	;VoiceSelect = CrebainSelect

	;// *** ENGINEERING Parameters ***
	RadarPriority = UNIT
	KindOf = SELECTABLE NO_COLLIDE MONSTER MOVE_ONLY CLICK_THROUGH HERO IGNORE_FOR_VICTORY IGNORE_FOR_EVA_SPEECH_POSITION IGNORES_SELECT_ALL
	
	Body = ActiveBody ModuleTag_02
		MaxHealth         = 200000
		MaxHealthDamaged  = 100000		
	End

	Behavior = AIUpdateInterface	ModuleTag_AIUpdateInterface
	End

	Behavior = PhysicsBehavior		ModuleTag_PhysicsBehavior
	End
	
	LocomotorSet
		Locomotor = CrebainLocomotor
		Condition = SET_NORMAL 
		Speed     = 200
	End
	
	Behavior = LifetimeUpdate ModuleTag_LifetimeUpdate
		MinLifetime		= 30000
		MaxLifetime		= 30000
	End	
	
	Behavior = FireWeaponUpdate ModuleTag_PeckTheirEyesOut
		FireWeaponNugget			
			WeaponName		= IsengardFortressMurderOfCrowsBasicWeapon
			FireDelay		= 1000
			OneShot			= No
		End
	End

	Behavior = SlowDeathBehavior ModuleTag_05
		DeathTypes = ALL
		Sound = INITIAL SpellGenericUnsummonFasterMS
	End

	Geometry			= CYLINDER
	GeometryMajorRadius = 50.0
	GeometryMinorRadius = 50.0
	GeometryHeight		= 61.0
	GeometryIsSmall		= No
	;AttackContactPoint  = X:0 Y:0 Z:60
	AttackContactPoint  = X:40 Y:40 Z:60
	AttackContactPoint  = X:-40 Y:40 Z:60
	AttackContactPoint  = X:-40 Y:-40 Z:60
	AttackContactPoint  = X:40 Y:-40 Z:60

    Shadow			= SHADOW_ADDITIVE_DECAL_DYNAMIC
    ShadowSizeX		= 400;
    ShadowSizeY		= 400;
    ShadowTexture	= MUSauronEye;

	ShadowOpacityStart			= 0
	ShadowOpacityFadeInTime		= 1000
	ShadowOpacityPeak			= 255
	ShadowOpacityFadeOutTime	= 1000
	ShadowOpacityEnd			= 0

	ShadowOverrideLODVisibility = yes
End

;------------------------------------------------------------------------------
;Creating this peasant will randomize between several variations of the peasant.
;------------------------------------------------------------------------------
Object RohanPeasant

;	SelectPortrait	= UPRohan_Peasant

	Draw = W3DScriptedModelDraw ModuleTag_01  
		DefaultModelConditionState
			;Give it a model so it'll show up in WB
			Model               = RUPsnt_1_SKN
			Skeleton            = RUPsnt_1_SKL
		End
	End

	;***** IMPORTANT NOTE! ***************************************************************	
	;Certain Upgrades and costs may need to be propagated from here. One example was veterancy
	;overlays.
	;*************************************************************************************	

	Side = Neutral
	EditorSorting = UNIT
	BuildVariations = RohanPeasant1 RohanPeasant3 RohanPeasant4	; RohanPeasant2 <- removed from the game 
	KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE THROWN_OBJECT SWARM_DOZER GRAB_AND_DROP DOZER 
	
  ;Shadow = SHADOW_DECAL
  ;ShadowSizeX = 24;
  ;ShadowSizeY = 24;
  ;ShadowTexture = ShadowI;

End


;;------------------------------------------------------------------------------
; aka Peasant1
Object RohanPeasant1	; ///  OLD MAN ///
	; ***ART Parameters ***
	
;	SelectPortrait	= UPRohan_Peasant
	
	Draw = W3DScriptedModelDraw ModuleTag_01  

		StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD
			
		  OkToChangeModelColor = Yes
		  
		RandomTexture = RUPeasant01.tga 0 RUPeasant01.tga
		RandomTexture = RUPeasant01_Alt.tga 0 RUPeasant01.tga

;;====================== MODELS ================================================================	
		DefaultModelConditionState
			Model               = RUPsnt_1_SKN
			Skeleton            = RUPsnt_1_SKL
		End
		
;;================== ANIMATIONS =================================================================		

;;------------------  DYING -------------------------------------------------------------

		AnimationState						= PASSENGER
			Animation						= FLLA
				AnimationName				= RUPsnt_1_FLLA
				AnimationMode				= LOOP
			End
		End
		
		AnimationState        = THROWN_PROJECTILE
			Animation           = FLYA
				AnimationName     = RUPsnt_1_FLYA
				AnimationMode     = LOOP
			End
		End
		
		AnimationState						= FREEFALL
			Animation						= FLYA
				AnimationName				= RUPsnt_1_FLYA
				AnimationMode				= LOOP
				AnimationSpeedFactorRange	= 0.7	0.7
				AnimationBlendTime			= 10
			End
		End
		
		AnimationState        = STUNNED_FLAILING
			Animation           = FLYA
				AnimationName     = RUPsnt_1_FLYA
				AnimationMode      = LOOP
			End
			Flags               = RANDOMSTART
		End
		
		AnimationState						= DYING SPLATTED
			Animation						= LNDA
				AnimationName				= RUPsnt_1_LNDA
				AnimationMode				= ONCE
			End
		End
		
		AnimationState        = DYING
			Animation           = DIEA
				AnimationName     = RUPsnt_1_DIEA
				AnimationMode     = ONCE
			End
			Animation           = DIEB
				AnimationName     = RUPsnt_1_DIEB
				AnimationMode     = ONCE
			End			
		End

		AnimationState        = STUNNED_STANDING_UP
			Animation           = GTPA
				AnimationName     = RUPsnt_1_GTPA
				AnimationMode     = ONCE
				AnimationSpeedFactorRange = 1.5 1.5
			End
;			Animation           = GTPB
;				AnimationName     = RUPsnt_1_GTPB
;				AnimationMode     = ONCE
;                                AnimationSpeedFactorRange = 1.5 1.5
;			End			
		End
		
		AnimationState        = STUNNED
			Animation           = LNDA
				AnimationName     = RUPsnt_1_LNDA
				AnimationMode     = ONCE
			End
		End		
				
		AnimationState        = MOVING FIRING_OR_PREATTACK_A
			ShareAnimation		= Yes
			Animation           = RunAndFire
				AnimationName       = RUPsnt_1_ATRA
				AnimationMode       = LOOP
			End
			Flags               = RANDOMSTART 
		End


	;;------------------ ATTACKING ---------------------------------------

		AnimationState				=	FIRING_OR_PREATTACK_A
			Animation
				AnimationName		=	RUPsnt_1_ATKA 
				AnimationMode		=	LOOP
;				UseWeaponTiming		=	Yes
			End
			Animation
				AnimationName		=	RUPsnt_1_ATKB
				AnimationMode		=	LOOP
;				UseWeaponTiming		=	Yes
			End			
		End
		
;;------------------ MOVING ------------------------------------------
	
;;===== BACKUP
		AnimationState				= MOVING BACKING_UP
			Animation				= BAKA
				AnimationName		= RUPsnt_1_BAKA
				AnimationMode		= LOOP
			End
;			Animation				= BAKB
;				AnimationName		= RUPsnt_1_BAKB
;				AnimationMode		= LOOP
;			End
;			Animation				= BAKC
;				AnimationName		= RUPsnt_1_BAKC
;				AnimationMode		= LOOP
;			End								
		End

; OBSOLETE		
;		AnimationState				= MOVING PANICKING
;			Animation				= RUNM
;				AnimationName		= RUPsnt_1_MFDA
;				AnimationMode		= LOOP
;			End
;			Flags					= RANDOMSTART
;			;;ParticleSysBone			= None InfantryDustTrails
;		End
		
		AnimationState				= MOVING WANDER
			Animation				= WLKA
				AnimationName		= RUPsnt_1_WLKA
				AnimationMode		= LOOP
			End
;			Animation				= WLKE
;				AnimationName		= RUPsnt_1_WLKE
;				AnimationMode		= LOOP
;			End
			
			;;ParticleSysBone     = None InfantryDustTrails
		End
		
		AnimationState				= MOVING
			Animation				= RUNA
				AnimationName		= RUPsnt_1_RUNA
				AnimationMode		= LOOP
;				AnimationSpeedFactorRange = 0.8 0.8
			End
			Animation				= RUNC
				AnimationName		= RUPsnt_1_RUNC
				AnimationMode		= LOOP
;				AnimationSpeedFactorRange = 0.8 0.8
			End			
			Flags					= RANDOMSTART
			ParticleSysBone			= None InfantryDustTrails
		End
		
; WORKING		
		AnimationState = ACTIVELY_CONSTRUCTING DEPLOYED ; building from too far to smack his hammer
			Animation				=	Stand
				AnimationName		=	RUPsnt_1_IDLA 
				AnimationMode		=	LOOP
			End
		End

		
		AnimationState				= ACTIVELY_CONSTRUCTING
			Animation				= WRKA
				AnimationName		= RUPsnt_1_WRKA
				AnimationMode		= ONCE
			End
			Animation				= WRKD
				AnimationName		= RUPsnt_1_WRKD
				AnimationMode		= ONCE
			End
			Flags					= RANDOMSTART RESTART_ANIM_WHEN_COMPLETE
		End	
	
;;------------ HIT REACTION -----------------------------------------------------

		AnimationState = HIT_REACTION
			Animation = Hit_Level_1_a
				AnimationName = RUPsnt_1_HITA
				AnimationMode = ONCE
			End
		End

;;------------- EMOTIONS ---------------------------------------------

			

;;======== POINTING

		AnimationState				= EMOTION_POINTING
			Animation				= Pointing1
				AnimationName		= RUPsnt_1_PNTA
				AnimationMode		= LOOP
                AnimationSpeedFactorRange = 0.75 1.25
			End
		End

;;======= TERROR
		AnimationState				= EMOTION_AFRAID
			Animation				= &&FEAR&&
				AnimationName		= RUPsnt_1_FERA
				AnimationMode		= LOOP
			End
		End
		
		AnimationState				= EMOTION_TAUNTING
			Animation				= TNTA
				AnimationName		= RUPsnt_1_TNTA
				AnimationMode		= ONCE
			End
			Animation				= TNTB
				AnimationName		= RUPsnt_1_TNTB
				AnimationMode		= ONCE
			End	
			Flags					= RANDOMSTART RESTART_ANIM_WHEN_COMPLETE		
		End

;;====== CELEBRATING		
			AnimationState				= EMOTION_CELEBRATING
				Animation				= CHRA
					AnimationName	    = RUPsnt_1_CHRA
					AnimationMode		= ONCE
				End
				Animation				= CHRB
					AnimationName	    = RUPsnt_1_CHRB
					AnimationMode		= ONCE
				End
				Flags					= RANDOMSTART RESTART_ANIM_WHEN_COMPLETE
			End
			
			AnimationState				= EMOTION_ALERT
				StateName				= STATE_Alert
				Animation				= &&ALERT&&
					AnimationName		= RUPsnt_1_IDLA
					AnimationMode		= LOOP
				End
			End
			
	;;------------- SELECTED ---------------------------------------------

		AnimationState				=	SELECTED
			StateName				=	STATE_Selected
			SimilarRestart			=   Yes			
			Animation				=	ATNB
				AnimationName		=	RUPsnt_1_ATNB
				AnimationMode		=	LOOP
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Idle" then CurDrawableSetTransitionAnimState("TRANS_IdleToSelected") end
				if Prev == "STATE_Selected" then CurDrawableSetTransitionAnimState("TRANS_IdleToSelected") end
			EndScript
		End	

	;;--------------- IDLE STATES -----------------------------------------------------------------	
		IdleAnimationState
			StateName			=	STATE_Idle
			Animation           = IDLA
				AnimationName     = RUPsnt_1_IDLA
				AnimationMode     = ONCE
				AnimationPriority = 20
			End

			Animation           = IDLC
				AnimationName     = RUPsnt_1_IDLC
				AnimationMode     = ONCE
				AnimationPriority = 1
			End

			Animation           = IDLD
				AnimationName     = RUPsnt_1_IDLD
				AnimationMode     = ONCE
				AnimationPriority = 2
			End

			Animation           = IDLE
				AnimationName     = RUPsnt_1_IDLE
				AnimationMode     = ONCE
				AnimationPriority = 1
			End

			Animation           = IDLF
				AnimationName     = RUPsnt_1_IDLF
				AnimationMode     = ONCE
				AnimationPriority = 1
			End

			Animation           = IDLG
				AnimationName     = RUPsnt_1_IDLG
				AnimationMode     = ONCE
				AnimationPriority = 1				
			End
			
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Selected" then CurDrawableSetTransitionAnimState("TRANS_SelectedToIdle") end
			EndScript		
		End
		
	;---Transitions-------------------------------------		

		TransitionState       = TRANS_SelectedToIdle	
			Animation           = ATNC
				AnimationName     = RUPsnt_1_ATNC
				AnimationMode     = ONCE
				AnimationSpeedFactorRange = 0.7 1.2
			End
		End
		
		TransitionState				=	TRANS_IdleToSelected
			Animation				=	ATNA
				AnimationName		=	RUPsnt_1_ATNA
				AnimationMode		=	ONCE
				AnimationSpeedFactorRange = 0.7 1.2
			End
		End	
		
	End
	
	; ***DESIGN parameters ***
	Side = Neutral
	EditorSorting = UNIT
	ThreatLevel = 1.0
	TransportSlotCount = TRANSPORTSLOTCOUNT_UNIT
	
	CommandPoints = 2

	CommandSet = PeasantCommandSet
	
	BountyValue = ROHAN_PEASANT_BOUNTY_VALUE

	;;;; WEAPON SETS ;;;;
	WeaponSet
		Conditions          = None 
		Weapon              = PRIMARY		RohanFighterSword
	End
	
	WeaponSet
		Conditions			= PLAYER_UPGRADE
		Weapon				= PRIMARY		RohanFighterSwordUpgraded
	End
	
	;;;; ARMOR SETS ;;;;	
	ArmorSet
		Conditions      = None
		Armor           = PeasantArmor
		DamageFX        = NormalDamageFX
	End

	ArmorSet
		Conditions      = PLAYER_UPGRADE
		Armor           = SoldierHeavyArmor
		DamageFX        = NormalDamageFX
	End

	VisionRange = VISION_STANDARD_MELEE
	ShroudClearingRange = SHROUD_CLEAR_STANDARD
			
	DisplayName = OBJECT:RohanPeasant
	CrushableLevel = 0  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
	CrushRevengeWeapon = BasicInfantryCrushRevenge
	EquivalentTo = RohanPeasant	


	; *** AUDIO Parameters ***;

	VoiceAttack 				= PeasantMaleVoiceAttack
	VoiceAttackCharge 			= PeasantMaleVoiceAttackCharge
	VoiceAttackStructure 			= PeasantMaleVoiceAttackBuilding
	VoiceAttackMachine 			= PeasantMaleVoiceAttack
	VoiceCreated 				= PeasantMaleVoiceSalute
	VoiceFullyCreated 			= PeasantMaleVoiceSalute
	VoiceGuard					= PeasantMaleVoiceMove
	VoiceMove 					= PeasantMaleVoiceMove
	VoiceMoveToCamp 				= PeasantMaleVoiceMoveCamp
	VoiceMoveWhileAttacking 		= PeasantMaleVoiceDisengage
	VoicePriority				= 30
	VoiceRetreatToCastle 			= PeasantMaleVoiceRetreat
	VoiceSelect 				= PeasantMaleVoiceSelectMS
	VoiceSelectBattle  			= PeasantMaleVoiceSelectBattle
	
	VoiceEnterStateAttack 			= PeasantMaleVoiceEnterStateAttack
	VoiceEnterStateAttackCharge 		= PeasantMaleVoiceEnterStateAttackCharge
	VoiceEnterStateAttackStructure 	= PeasantMaleVoiceEnterStateAttackBuilding
	VoiceEnterStateAttackMachine 		= PeasantMaleVoiceEnterStateAttackBuilding
	VoiceEnterStateMove 			= PeasantMaleVoiceEnterStateMove
	VoiceEnterStateMoveToCamp 		= PeasantMaleVoiceEnterStateMoveCamp
	VoiceEnterStateMoveWhileAttacking 	= PeasantMaleVoiceEnterStateDisengage
	VoiceEnterStateRetreatToCastle	= PeasantMaleVoiceEnterStateRetreat
		
	SoundImpact					= ImpactHorse
	
	UnitSpecificSounds
		VoiceGarrison			= PeasantMaleVoiceGarrison    
		VoiceRepair				= PeasantMaleVoiceRepair
	End

    #include "..\includes\StandardUnitEvaEvents.inc"

	ClientBehavior = RandomSoundSelectorClientBehavior ModuleTag_RSSCB
		; This is a counter to the similar module in the RohanPeasant4. Without this,
		; the larger a group, the more likely it is a woman's voice will be heard; until
		; a 100 peasant group will basically ALWAYS be playing a woman's voice. This ensures that a 
		; large group of mixed peasants will still be led by a man. [Sorry, but that's
		; Middle Earth for you -- just ask Eowyn!]
		Chance = 5% 
		RerollOnEveryFrame = No ; For consistancy
		VoicePriority = 32 ; Bossy man is high enough to overcome "bossy" women
	End
	
	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		MaxUpdateRangeCap = 800
		AnimationSound = Sound:BodyFallGeneric1		Animation:RUPsnt_1_SKL.RUPsnt_1_DIEA	Frames:45
		AnimationSound = Sound:BodyFallGenericNoArmor	Animation:RUPsnt_1_SKL.RUPsnt_1_DIEB	Frames:44
		AnimationSound = Sound:BodyFallGeneric1		Animation:RUPsnt_1_SKL.RUPsnt_1_LNDA	Frames:4
	End


	; *** ENGINEERING Parameters ***
	RadarPriority = UNIT
	KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE THROWN_OBJECT DOZER SWARM_DOZER GRAB_AND_DROP
	
;	CommandSet = GondorWorkerCommandSet
	
	Body = ActiveBody ModuleTag_02
		CheerRadius 	  = EMOTION_CHEER_RADIUS
		MaxHealth         = ROHAN_PEASANT_HEALTH				;BALANCE Peasant Health
		MaxHealthDamaged  = ROHAN_PEASANT_HEALTH_DAMAGED			
		;RecoveryTime      = ROHAN_PEASANT_HEALTH_RECOVERY_TIME		
	End
	
	Behavior = WorkerAIUpdate ModuleTag_10
		AutoAcquireEnemiesWhenIdle		= Yes ATTACK_BUILDINGS
		RepairHealthPercentPerSecond	= 0.2%    ; % of max health to repair each second
		AILuaEventsList					= StandardPeasantFunctions
		AttackPriority				= 	AttackPriority_Infantry
		SpecialContactPoints		   = Repair
	End

	LocomotorSet
		Locomotor = HumanLocomotor
		Condition = SET_NORMAL 
		Speed     = NORMAL_GOOD_INFANTRY_MEMBER_SPEED	
	End

	LocomotorSet
		Locomotor = HumanWanderLocomotor
		Condition = SET_WANDER
		Speed     = NORMAL_GOOD_INFANTRY_MEMBER_SPEED	
	End 

	Behavior = PhysicsBehavior ModuleTag_04
		GravityMult = 1.0
	End
	
	Behavior = SlowDeathBehavior ModuleTag_05
		DeathTypes = ALL
		SinkDelay = 3000
		SinkRate = 1.0     ; in Dist/Sec
		DestructionDelay = 8000
            Sound = INITIAL PeasantMaleVoiceDie
	End
	
 	Behavior = WeaponSetUpgrade ModuleTag_Weaponpgrade
		TriggeredBy = Upgrade_RohanForgedBladesForPeasants
	End

 	Behavior = ArmorUpgrade ModuleTag_ArmorUpgrade
		TriggeredBy = Upgrade_RohanHeavyArmorForPeasants
		ArmorSetFlag			= PLAYER_UPGRADE
	End

	;; Don't remove this. It's required for newly spawned members
	;; It does not change the armor set, but it allows us to accept the Drafted Upgrade
 	Behavior = ArmorUpgrade ModuleTag_ArmorUpgradeDrafted
		TriggeredBy = Upgrade_Drafted
		IgnoreArmorUpgrade = Yes ; does not trigger any armor sets
	End

	Behavior = RepairSpecialPower ModuleTag_RepairSPecialPower
		SpecialPowerTemplate      = SpecialRepairStructure
	End		

	;-------------------------------------------------------------------------------
	;
	;	Sub objects upgrade.
	;
	Behavior = SubObjectsUpgrade Armor_Upgrade
		TriggeredBy	= Upgrade_RohanHeavyArmorForPeasants
		ShowSubObjects	= HELMET
		HideSubObjects	= HAMMER
		UpgradeTexture	= RUPeasant01.tga 0 RUPeasant01_HA.tga
		UpgradeTexture	= RUPeasant01_Alt.tga 0 RUPeasant01_HA.tga
		UpgradeTexture	= RUPeasantWep.tga 0 RUPeasantWep_HA.tga
		UpgradeTexture	= RUPeasantWep_L.tga 0 RUPeasantWep_HA.tga
		RecolorHouse	= Yes
		ExcludeSubobjects = Forged_Blade
	End
	
	Behavior = SubObjectsUpgrade ForgedBlade_Upgrade
		TriggeredBy		= Upgrade_RohanForgedBladesForPeasants
		ShowSubObjects	= FORGED_BLADE SWORD			; Forged blade will give us a sword too, as we'll get a weapon upgrade.
		HideSubObjects	= HAMMER
	End
	
	Behavior = SubObjectsUpgrade Drafted_Upgrade
		TriggeredBy		= Upgrade_Drafted
		ShowSubObjects	= SWORD SHIELD
		HideSubObjects	= HAMMER
		;FXListUpgrade   = FX_Draft
		;Sound = INITIAL PeasantVoiceDraftUpgrade			;this doesn't work
	End
	;-------------------------------------------------------------------------------


	Behavior = SquishCollide ModuleTag_06
		;nothing
	End
	
	Behavior = HordeMemberCollide ModuleTag_HMC
		;nothing
	End

	Behavior = BezierProjectileBehavior ModuleTag_08 ; Module starts asleep, and wakes up when thrown.
		FirstHeight = 24  ; Height of Bezier control points above highest intervening terrain
		SecondHeight = 24
		FirstPercentIndent = 30% ; Percentage of shot distance control points are placed
		SecondPercentIndent = 70%
		TumbleRandomly = Yes

		CrushStyle = Yes ; I don't detonate, I just hit
		DieOnImpact = Yes
		BounceCount = 1   ; When I hit the ground, I'll arc again
		BounceDistance = 40 ; this far
		BounceFirstHeight = 16  ; Height of Bezier control points above highest intervening terrain
		BounceSecondHeight = 16
		BounceFirstPercentIndent = 20% ; Percentage of shot distance control points are placed
		BounceSecondPercentIndent = 80%

		GroundHitFX       = FX_ThrownRockGroundHit
		GroundBounceFX    = FX_ThrownRockBounceHit
	End

	Behavior = HitReactionBehavior HitReactionBehaviorModuleTag
		HitReactionLifeTimer1 = 2333 ; level 1 (light  damage)  hit reaction animations in ms
		HitReactionLifeTimer2 = 2333 ; level 2 (medium damage)  hit reaction animations in ms
		HitReactionLifeTimer3 = 2333 ; level 3 (heavy  damage)  hit reaction animations in ms

		HitReactionThreshold1 = 5.0   ; level 1 (light  damage) threshold trigger
		HitReactionThreshold2 = 25.0  ; level 2 (medium damage) threshold trigger
		HitReactionThreshold3 = 50.0  ; level 3 (heavy  damage) threshold trigger

		FastHitsResetReaction = Yes    ;If set -- when hits occur faster than the reaction animations, it will reset the animation. (like getting riddled with machine gun bullets)
	End

	; Tie into LargeGroupAudio system
	Behavior = LargeGroupAudioUpdate ModuleTag_LGAU
		Key = Human Unit Peasant Peasant_Male
	End

	Geometry = CYLINDER
	GeometryMajorRadius = 8.0
	GeometryMinorRadius = 8.0
	GeometryHeight = 19.2
	GeometryIsSmall = Yes

  Shadow = SHADOW_DECAL
  ShadowSizeX = 19;
  ShadowSizeY = 19;
  ShadowTexture = ShadowI;

End

;;------------------------------------------------------------------------------
; aka Peasant2  /// YOUNG BOY ////
ChildObject RohanPeasant2 RohanPeasant1
	; ***ART Parameters ***
	
	Draw = W3DScriptedModelDraw ModuleTag_01  

		StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD
			
		  OkToChangeModelColor = Yes
		  
		RandomTexture = RUPeasant02.tga 0
		RandomTexture = RUPeasant02_Alt.tga 0
	
;;====================== MODELS ================================================================	
		DefaultModelConditionState
			Model               = RUPsnt_2_SKN
			Skeleton            = RUPsnt_2_SKL
		End

;;================== ANIMATIONS =================================================================		

;;------------------  DYING -------------------------------------------------------------
		
		AnimationState        = PASSENGER
			Animation           = FLLA
				AnimationName     = RUPsnt_2_FLLA
				AnimationMode     = LOOP
			End
		End
		
		AnimationState        = THROWN_PROJECTILE
			Animation           = FLYA
				AnimationName     = RUPsnt_2_FLYA
				AnimationMode     = LOOP
			End
		End
		
		

		AnimationState        = DYING
			Animation           = DIEA
				AnimationName     = RUPsnt_2_DIEA
				AnimationMode     = ONCE
			End
		End
		
		AnimationState        = STUNNED_STANDING_UP
			Animation           = GTPA
				AnimationName     = RUPsnt_2_GTPA
				AnimationMode     = ONCE
				AnimationSpeedFactorRange = 1.5 1.5
			End
		End
		
		AnimationState        = STUNNED
			Animation           = LNDA
				AnimationName     = RUPsnt_2_LNDA
				AnimationMode     = ONCE
			End
		End
		
		AnimationState        = STUNNED
			Animation           = LNDA
				AnimationName     = RUPsnt_2_LNDA
				AnimationMode     = ONCE
			End
		End	

;;------------------ ATTACKING ---------------------------------------

		AnimationState				=	FIRING_OR_PREATTACK_A
			Animation
				AnimationName		=	RUPsnt_2_ATKA 
				AnimationMode		=	LOOP
;				UseWeaponTiming		=	Yes
			End
		End

;;------------------ MOVING ------------------------------------------

;;===== BACKUP
		AnimationState				= MOVING BACKING_UP
			Animation				= &&TERROR&&
				AnimationName		= RUPsnt_2_IDLA
				AnimationMode		= LOOP
			End
		End

; OBSOLETE		
;		AnimationState				= MOVING PANICKING
;			Animation				= WLKM
;				AnimationName		= RUPsnt_2_MFDA
;				AnimationMode		= LOOP
;			End
;			;;ParticleSysBone     = None InfantryDustTrails
;		End
		
		AnimationState				= MOVING WANDER
			Animation				= WLKA
				AnimationName		= RUPsnt_2_WLKA
				AnimationMode		= LOOP
			End
			;;ParticleSysBone     = None InfantryDustTrails
		End
		
		AnimationState				= MOVING
			Animation				= RUNA
				AnimationName		= RUPsnt_2_RUNA
				AnimationMode		= LOOP
                                AnimationSpeedFactorRange = 1.00 1.15 ;--- JGS
			End
			Flags					= RANDOMSTART
			;;ParticleSysBone			= None InfantryDustTrails
		End

; WORKING	

		AnimationState = ACTIVELY_CONSTRUCTING DEPLOYED ; building from too far to smack his hammer
			Animation				=	Stand
				AnimationName		=	RUPsnt_2_IDLA 
				AnimationMode		=	LOOP
			End
		End

		
		AnimationState				= ACTIVELY_CONSTRUCTING
			Animation				= WRKA
				AnimationName		= RUPsnt_2_WRKA
				AnimationMode		= LOOP
			End
		End

;;------------ HIT REACTION -----------------------------------------------------

		AnimationState = HIT_REACTION
			Animation = Hit_Level_1_a
				AnimationName = RUPsnt_2_HITA
				AnimationMode = ONCE
			End
		End
				
;;------------- EMOTIONS ---------------------------------------------

;;======== POINTING

		AnimationState				= EMOTION_POINTING
			Animation				= Pointing2
				AnimationName		= RUPsnt_2_PNTA
				AnimationMode		= LOOP
                AnimationSpeedFactorRange = 0.75 1.25
			End
		End

;;======= TERROR

		AnimationState				= EMOTION_AFRAID
			Animation				= &&FEAR&&
				AnimationName		= RUPsnt_2_IDLA
				AnimationMode		= LOOP
			End
		End
		
		AnimationState				= EMOTION_TAUNTING
			Animation				= &&TAUNT&&
				AnimationName		= RUPsnt_2_IDLA
				AnimationMode		= LOOP
			End
		End

;;====== CELEBRATING		
		AnimationState				= EMOTION_CELEBRATING
			Animation				= &&CHEER&&
				AnimationName	    = RUPsnt_2_IDLA
				AnimationMode		= LOOP
			End
		End
		
		AnimationState				= EMOTION_ALERT
			Animation				= &&ALERT&&
				AnimationName		= RUPsnt_2_IDLA
				AnimationMode		= LOOP
			End
		End

;;------------- SELECTED ---------------------------------------------

	IdleAnimationState
		Animation				= IDLA
			AnimationName		= RUPsnt_2_IDLA
			AnimationMode		= ONCE
		End
	End
		
;;--------------- IDLE STATES -----------------------------------------------------------------	

	;---Transitions-------------------------------------
	
	
	End
	
	EquivalentTo = RohanPeasant	


; *** AUDIO Parameters ***;

	VoicePriority = 1
	VoiceFear = NoSound
	VoiceGuard = NoSound

	SoundImpact = ImpactHorse
	
	;UnitSpecificSounds
	;	VoiceGarrison         = NoSound
	;	VoiceEnter            = NoSound
	;	VoiceEnterHostile     = NoSound
	;	VoiceGetHealed        = NoSound
	;End

    #include "..\includes\StandardUnitEvaEvents.inc"


	; Tie into LargeGroupAudio system
	Behavior = LargeGroupAudioUpdate ModuleTag_LGAU
		Key = Human Unit Peasant 	; Peasant_Boy
	End


; *** ENGINEERING PARAMETERS *** ;

	Behavior = SubObjectsUpgrade Armor_Upgrade
		TriggeredBy		= Upgrade_RohanHeavyArmorForPeasants
		ShowSubObjects	= HELMET
		UpgradeTexture	= RUPeasant02.tga 0 RUPeasant02_HA.tga
		UpgradeTexture	= RUPeasant02_Alt.tga 0 RUPeasant02_HA.tga
		UpgradeTexture	= RUPeasantWep.tga 0 RUPeasantWep_HA.tga
		UpgradeTexture	= RUPeasantWep_L.tga 0 RUPeasantWep_HA.tga
		RecolorHouse	= Yes
		ExcludeSubobjects = Forged_Blade
	End

End

;;------------------------------------------------------------------------------
; aka Peasant3  /// FAT GUY ///
ChildObject RohanPeasant3 RohanPeasant1
	; ***ART Parameters ***
	
	Draw = W3DScriptedModelDraw ModuleTag_01  

		StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD
			
		  OkToChangeModelColor = Yes
		  
		RandomTexture = RUPeasant03_Alt.tga 0 RUPeasant03_Alt.tga
		RandomTexture = RUPeasant03.tga 0 RUPeasant03_Alt.tga

;;====================== MODELS ================================================================		
		DefaultModelConditionState
			Model               = RUPsnt_3_SKN
			Skeleton            = RUPsnt_3_SKL
		End
		
;;================== ANIMATIONS =================================================================				

;;------------------  DYING -------------------------------------------------------------
	
		AnimationState						= PASSENGER
			Animation						= FLLA
				AnimationName				= RUPsnt_3_FLLA
				AnimationMode				= LOOP
			End
		End
		
		AnimationState        = THROWN_PROJECTILE
			Animation           = FLYA
				AnimationName     = RUPsnt_3_FLYA
				AnimationMode     = LOOP
			End
		End
		
		AnimationState						= FREEFALL
			Animation						= FLYA
				AnimationName				= RUPsnt_3_FLYA
				AnimationMode				= LOOP
				AnimationSpeedFactorRange	= 0.7	0.7
				AnimationBlendTime			= 10
			End
		End
		
		AnimationState        = STUNNED_FLAILING
			Animation           = FLYA
				AnimationName     = RUPsnt_3_FLYA
				AnimationMode      = LOOP
			End
			Flags               = RANDOMSTART
		End
		
		AnimationState						= DYING SPLATTED
			Animation						= LNDA
				AnimationName				= RUPsnt_3_LNDA
				AnimationMode				= ONCE
			End
		End
		
;		AnimationState					=	DYING AFLAME
;			Animation					=	Fire
;				AnimationName     = RUPsnt_3__MFDA
;				AnimationMode     = LOOP
;			End
;		End	
		
		AnimationState        = DYING
			Animation           = DIEA
				AnimationName     = RUPsnt_3_DIEA
				AnimationMode     = ONCE
			End
			Animation           = DIEB
				AnimationName     = RUPsnt_3_DIEB
				AnimationMode     = ONCE
			End
			Animation           = DIEC
				AnimationName     = RUPsnt_3_DIEC
				AnimationMode     = ONCE
			End			
		End
		
		AnimationState        = STUNNED_STANDING_UP
;			Animation           = GTPA				; from side
;				AnimationName     = RUPsnt_3_GTPA
;				AnimationMode     = ONCE
;			End
			Animation           = GTPB				; from back
				AnimationName     = RUPsnt_3_GTPB
				AnimationMode     = ONCE
				AnimationSpeedFactorRange = 1.5 1.5
			End
		End
		
		AnimationState        = STUNNED
			Animation           = LNDA
				AnimationName     = RUPsnt_3_LNDA
				AnimationMode     = ONCE
			End
		End	
		
		AnimationState        = MOVING FIRING_OR_PREATTACK_A
			ShareAnimation		= Yes
			Animation           = RunAndFire
				AnimationName       = RUPsnt_3_ATRA
				AnimationMode       = LOOP
			End
			Flags               = RANDOMSTART 
		End
;		

;;------------------ ATTACKING ---------------------------------------		

		AnimationState				=	FIRING_OR_PREATTACK_A
			Animation				=	ATKA
				AnimationName		=	RUPsnt_3_ATKA 
				AnimationMode		=	LOOP
;				UseWeaponTiming		=	Yes
			End
			Animation				=	ATKB
				AnimationName		=	RUPsnt_3_ATKB 
				AnimationMode		=	LOOP
;				UseWeaponTiming		=	Yes
			End			
		End

;;------------------ MOVING ------------------------------------------

;;===== BACKUP
		AnimationState				= MOVING BACKING_UP
			Animation				= BAKA
				AnimationName		= RUPsnt_3_BAKA
				AnimationMode		= LOOP
			End
		End
		
;OBSOLETE		
;		AnimationState				= MOVING PANICKING
;			Animation				= WLKM
;				AnimationName		= RUPsnt_3_MFDA
;				AnimationMode		= LOOP
;			End
;			;;ParticleSysBone     = None InfantryDustTrails
;		End
		
		AnimationState				= MOVING WANDER
			Animation				= WLKA
				AnimationName		= RUPsnt_3_WLKA
				AnimationMode		= LOOP
			End
			;;ParticleSysBone     = None InfantryDustTrails
		End

		AnimationState				= MOVING ATTACKING
			Animation				= RUNE
				AnimationName		= RUPsnt_3_RUNE
				AnimationMode		= LOOP
				AnimationBlendTime	= 15
			End
			Animation				= RUNF
				AnimationName		= RUPsnt_3_RUNF
				AnimationMode		= LOOP
				AnimationBlendTime	= 15
			End			
			;;ParticleSysBone     = None InfantryDustTrails
		End
		
		AnimationState				= MOVING
			Animation				= RUNC
				AnimationName		= RUPsnt_3_RUNC
				AnimationMode		= LOOP
			End
			Animation				= RUND
				AnimationName		= RUPsnt_3_RUND
				AnimationMode		= LOOP
			End
			Flags					= RANDOMSTART
			;;ParticleSysBone			= None InfantryDustTrails
		End

; WORKING	

		AnimationState = ACTIVELY_CONSTRUCTING DEPLOYED ; building from too far to smack his hammer
			Animation				=	Stand
				AnimationName		=	RUPsnt_3_IDLA 
				AnimationMode		=	LOOP
			End
		End
	
		AnimationState				= ACTIVELY_CONSTRUCTING
			Animation				= WRKB
				AnimationName		= RUPsnt_3_WRKB
				AnimationMode		= ONCE
			End
			Animation				= WRKC
				AnimationName		= RUPsnt_3_WRKC
				AnimationMode		= ONCE
			End			
			Flags					= RANDOMSTART RESTART_ANIM_WHEN_COMPLETE			
		End
				
;;------------ HIT REACTION -----------------------------------------------------

		AnimationState = HIT_REACTION
			Animation = Hit_Level_1_a
				AnimationName = RUPsnt_3_HITA
				AnimationMode = ONCE
			End
		End
		
;;------------- EMOTIONS ---------------------------------------------

;;======== POINTING

		AnimationState				= EMOTION_POINTING
			Animation				= Pointing3
				AnimationName		= RUPsnt_3_PNTA
				AnimationMode		= LOOP
                AnimationSpeedFactorRange = 0.75 1.25
			End
		End

;;======= TERROR

		AnimationState				= EMOTION_AFRAID
			Animation				= &&FEAR&&
				AnimationName		= RUPsnt_3_FERA
				AnimationMode		= LOOP
			End
		End
		
		AnimationState				= EMOTION_TAUNTING
			Animation				= TNTA
				AnimationName		= RUPsnt_3_TNTA
				AnimationMode		= ONCE
			End
			Animation				= TNTB
				AnimationName		= RUPsnt_3_TNTB
				AnimationMode		= ONCE
			End
			Flags					= RANDOMSTART RESTART_ANIM_WHEN_COMPLETE								
		End

;;====== CELEBRATING		
		AnimationState				= EMOTION_CELEBRATING
			Animation				= CHRA
				AnimationName	    = RUPsnt_3_CHRA
				AnimationMode		= ONCE
			End
			Animation				= CHRB
				AnimationName	    = RUPsnt_3_CHRB
				AnimationMode		= ONCE
			End
			Flags					= RANDOMSTART RESTART_ANIM_WHEN_COMPLETE			
		End
		
		AnimationState				= EMOTION_ALERT
			StateName				= STATE_Alert
			Animation				= &&ALERT&&
				AnimationName		= RUPsnt_3_IDLA
				AnimationMode		= LOOP
			End
		End
;;------------- SELECTED ---------------------------------------------

		AnimationState				=	SELECTED
			StateName				=	STATE_Selected
			SimilarRestart			=   Yes			
			Animation				=	ATNB
				AnimationName		=	RUPsnt_3_ATNB
				AnimationMode		=	LOOP
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Idle" then CurDrawableSetTransitionAnimState("TRANS_IdleToSelected") end
				if Prev == "STATE_Selected" then CurDrawableSetTransitionAnimState("TRANS_IdleToSelected") end
			EndScript
		End	

;;--------------- IDLE STATES -----------------------------------------------------------------			

		IdleAnimationState
			StateName				=	STATE_Idle
			Animation           = IDLA
				AnimationName     = RUPsnt_3_IDLA
				AnimationMode     = ONCE
				AnimationPriority = 20
			End
			
			Animation           = IDLC
				AnimationName     = RUPsnt_3_IDLC
				AnimationMode     = ONCE
				AnimationPriority = 1
			End

			Animation           = IDLD
				AnimationName     = RUPsnt_3_IDLD
				AnimationMode     = ONCE
				AnimationPriority = 2
			End

			Animation           = IDLE
				AnimationName     = RUPsnt_3_IDLE
				AnimationMode     = ONCE
				AnimationPriority = 1
			End

			Animation           = IDLF
				AnimationName     = RUPsnt_3_IDLF
				AnimationMode     = ONCE
				AnimationPriority = 1
			End

			Animation           = IDLG
				AnimationName     = RUPsnt_3_IDLG
				AnimationMode     = ONCE
				AnimationPriority = 1				
			End
			
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Selected" then CurDrawableSetTransitionAnimState("TRANS_SelectedToIdle") end
			EndScript					
		End

	;---Transitions-------------------------------------		

		TransitionState       = TRANS_SelectedToIdle	
			Animation           = ATNC
				AnimationName     = RUPsnt_3_ATNC
				AnimationMode     = ONCE
				AnimationSpeedFactorRange = 0.7 1.2
			End
		End
		
		TransitionState				=	TRANS_IdleToSelected
			Animation				=	ATNA
				AnimationName		=	RUPsnt_3_ATNA
				AnimationMode		=	ONCE
				AnimationSpeedFactorRange = 0.7 1.2
			End
		End		
	
	End
	
	EquivalentTo = RohanPeasant	


	; *** AUDIO Parameters ***;

	VoiceAttack 				= PeasantMaleVoiceAttack
	VoiceAttackCharge 			= PeasantMaleVoiceAttackCharge
	VoiceAttackStructure 			= PeasantMaleVoiceAttackBuilding
	VoiceAttackMachine 			= PeasantMaleVoiceAttack
	VoiceCreated 				= PeasantMaleVoiceSalute
	VoiceFullyCreated 			= PeasantMaleVoiceSalute
	VoiceGuard					= PeasantMaleVoiceMove
	VoiceMove 					= PeasantMaleVoiceMove
	VoiceMoveToCamp 				= PeasantMaleVoiceMoveCamp
	VoiceMoveWhileAttacking 		= PeasantMaleVoiceDisengage
	VoicePriority				= 30			;3
	VoiceRetreatToCastle 			= PeasantMaleVoiceRetreat
	VoiceSelect 				= PeasantMaleVoiceSelectMS
	VoiceSelectBattle  			= PeasantMaleVoiceSelectBattle

	VoiceEnterStateAttack 			= PeasantMaleVoiceEnterStateAttack
	VoiceEnterStateAttackCharge 		= PeasantMaleVoiceEnterStateAttackCharge
	VoiceEnterStateAttackStructure 	= PeasantMaleVoiceEnterStateAttackBuilding
	VoiceEnterStateAttackMachine		= PeasantMaleVoiceEnterStateAttackBuilding
	VoiceEnterStateMove 			= PeasantMaleVoiceEnterStateMove
	VoiceEnterStateMoveToCamp 		= PeasantMaleVoiceEnterStateMoveCamp
	VoiceEnterStateMoveWhileAttacking	= PeasantMaleVoiceEnterStateDisengage
	VoiceEnterStateRetreatToCastle 	= PeasantMaleVoiceEnterStateRetreat
	
	UnitSpecificSounds
		VoiceGarrison         		= PeasantMaleVoiceGarrison    
	End

	; Tie into LargeGroupAudio system
	Behavior = LargeGroupAudioUpdate ModuleTag_LGAU
		Key = Human Unit Peasant Peasant_Male
	End

    #include "..\includes\StandardUnitEvaEvents.inc"

	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		MaxUpdateRangeCap = 800
		AnimationSound = Sound:BodyFallGenericNoArmor	Animation:RUPsnt_3_SKL.RUPsnt_3_DIEA	Frames:46
		AnimationSound = Sound:BodyFallGeneric1		Animation:RUPsnt_3_SKL.RUPsnt_3_DIEB	Frames:45
		AnimationSound = Sound:BodyFallGenericNoArmor	Animation:RUPsnt_3_SKL.RUPsnt_3_DIEC	Frames:35
		AnimationSound = Sound:BodyFallGeneric1		Animation:RUPsnt_3_SKL.RUPsnt_3_LNDA	Frames:8
	End


; *** ENGINEERING PARAMETERS *** ;

	Behavior = SubObjectsUpgrade Armor_Upgrade
		TriggeredBy		= Upgrade_RohanHeavyArmorForPeasants
		ShowSubObjects	= HELMET
		HideSubObjects	= HAMMER		
		UpgradeTexture	= RUPeasant03.tga 0 RUPeasant03_HA.tga
		UpgradeTexture	= RUPeasant03_Alt.tga 0 RUPeasant03_HA.tga
		UpgradeTexture	= RUPeasantWep.tga 0 RUPeasantWep_HA.tga
		UpgradeTexture	= RUPeasantWep_L.tga 0 RUPeasantWep_HA.tga
		RecolorHouse	= Yes
		ExcludeSubobjects = Forged_Blade
	End

End
	
;;------------------------------------------------------------------------------
; aka Peasant4  ///  WOMAN ///
ChildObject RohanPeasant4 RohanPeasant1
	; ***ART Parameters ***
	
	Draw = W3DScriptedModelDraw ModuleTag_01  

		StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD
			
		OkToChangeModelColor = Yes
		  
		RandomTexture = RUPeasant04.tga 0 RUPeasant04.tga
		RandomTexture = RUPeasant04_Alt.tga 0 RUPeasant04.tga

;;====================== MODELS ================================================================		
		DefaultModelConditionState
			Model               = RUPsnt_4_SKN
			Skeleton            = RUPsnt_4_SKL
		End

;;================== ANIMATIONS =================================================================		


;;------------------  DYING -------------------------------------------------------------
		
		AnimationState						= PASSENGER
			Animation						= FLLA
				AnimationName				= RUPsnt_4_FLLA
				AnimationMode				= LOOP
			End
		End
		
		AnimationState				= THROWN_PROJECTILE
			Animation				= FLYA
				AnimationName		= RUPsnt_4_FLYA
				AnimationMode		= LOOP
			End
		End
		
		AnimationState						= FREEFALL
			Animation						= FLYA
				AnimationName				= RUPsnt_4_FLYA
				AnimationMode				= LOOP
				AnimationSpeedFactorRange	= 0.7	0.7
				AnimationBlendTime			= 10
			End
		End
		
		AnimationState        = STUNNED_FLAILING
			Animation           = FLYA
				AnimationName     = RUPsnt_4_FLYA
				AnimationMode      = LOOP
			End
		End
		
		AnimationState						= DYING SPLATTED
			Animation						= LNDA
				AnimationName				= RUPsnt_4_LNDA
				AnimationMode				= ONCE
			End
		End
		
		AnimationState				= DYING
			Animation				= DIEA
				AnimationName		= RUPsnt_4_DIEA
				AnimationMode		= ONCE
			End
			Animation				= DIEB
				AnimationName		= RUPsnt_4_DIEB
				AnimationMode		= ONCE
			End
			Animation				= DIEC
				AnimationName		= RUPsnt_4_DIEC
				AnimationMode		= ONCE
			End
		End

		AnimationState				= STUNNED_STANDING_UP
			Animation				= GTPA
				AnimationName		= RUPsnt_4_GTPA
				AnimationMode		= ONCE
				AnimationSpeedFactorRange = 1.5 1.5
			End
;			Animation           = GTPB
;				AnimationName     = RUPsnt_4_GTPB
;				AnimationMode     = ONCE
;			End						
		End
		
		AnimationState				= STUNNED
			Animation				= LNDA
				AnimationName		= RUPsnt_4_LNDA
				AnimationMode		= ONCE
			End
		End
		
		AnimationState        = MOVING FIRING_OR_PREATTACK_A
			ShareAnimation		= Yes
			Animation           = RunAndFire
				AnimationName       = RUPsnt_4_ATRA
				AnimationMode       = LOOP
			End
			Flags               = RANDOMSTART 
		End

;;------------------ ATTACKING ---------------------------------------		

		AnimationState				=	FIRING_OR_PREATTACK_A
			Animation
				AnimationName		=	RUPsnt_4_ATKA 
				AnimationMode		=	LOOP
;				UseWeaponTiming		=	Yes
			End
			Animation
				AnimationName		=	RUPsnt_4_ATKB
				AnimationMode		=	LOOP
;				UseWeaponTiming		=	Yes
			End						
		End


;;------------------ MOVING ------------------------------------------

;;===== BACKUP
		AnimationState				= MOVING BACKING_UP
			Animation				= BAKA
				AnimationName		= RUPsnt_4_BAKA
				AnimationMode		= LOOP
			End
		End

; OBSOLETE		
;		AnimationState				= MOVING PANICKING
;			Animation				= WLKM
;				AnimationName		= RUPsnt_4_MFDA
;				AnimationMode		= LOOP
;			End
;			;;ParticleSysBone     = None InfantryDustTrails
;		End

		AnimationState				= MOVING WANDER
			Animation				= WLKA
				AnimationName		= RUPsnt_4_WLKA
				AnimationMode		= LOOP
			End
			;;ParticleSysBone     = None InfantryDustTrails
		End

		AnimationState				= MOVING ATTACKING
			Animation				= RUNB
				AnimationName		= RUPsnt_4_RUNB
				AnimationMode		= LOOP
				AnimationBlendTime	= 15
			End
			Animation				= RUNE
				AnimationName		= RUPsnt_4_RUNE
				AnimationMode		= LOOP
				AnimationBlendTime	= 15
			End			
			;;ParticleSysBone     = None InfantryDustTrails
		End
				
		AnimationState				= MOVING
			Animation				= RUNA
				AnimationName		= RUPsnt_4_RUNA
				AnimationMode		= LOOP
			End
			Animation				= RUNC
				AnimationName		= RUPsnt_4_RUNC
				AnimationMode		= LOOP
			End						
			Animation				= RUND
				AnimationName		= RUPsnt_4_RUND
				AnimationMode		= LOOP
			End									
			Flags					= RANDOMSTART
			;;ParticleSysBone			= None InfantryDustTrails
		End

; WORKING	



		AnimationState = ACTIVELY_CONSTRUCTING DEPLOYED ; building from too far to smack his hammer
			Animation				=	Stand
				AnimationName		=	RUPsnt_4_IDLA 
				AnimationMode		=	LOOP
			End
		End
	
		AnimationState				= ACTIVELY_CONSTRUCTING
			Animation				= WRKA
				AnimationName		= RUPsnt_4_WRKA
				AnimationMode		= LOOP
			End
		End
			
;;------------ HIT REACTION -----------------------------------------------------

		AnimationState = HIT_REACTION
			Animation = Hit_Level_1_a
				AnimationName = RUPsnt_4_HITA
				AnimationMode = ONCE
			End
		End

;;------------- EMOTIONS ---------------------------------------------

;;======== POINTING

		AnimationState				= EMOTION_POINTING
			Animation				= Pointing4
				AnimationName		= RUPsnt_4_PNTA
				AnimationMode		= LOOP
                AnimationSpeedFactorRange = 0.75 1.25
			End
		End
		
;;======= TERROR

		AnimationState				= EMOTION_AFRAID
			Animation				= &&FEAR&&
				AnimationName		= RUPsnt_4_FERA
				AnimationMode		= LOOP
			End
		End
			
		AnimationState				= EMOTION_TAUNTING
			Animation				= TNTA
				AnimationName		= RUPsnt_4_TNTA
				AnimationMode		= LOOP
			End
			Animation				= TNTB
				AnimationName		= RUPsnt_4_TNTB
				AnimationMode		= LOOP
			End	
			Flags					= RANDOMSTART RESTART_ANIM_WHEN_COMPLETE				
		End
	
;;====== CELEBRATING		
		AnimationState				= EMOTION_CELEBRATING
			Animation				= CHRA
				AnimationName	    = RUPsnt_4_CHRA
				AnimationMode		= ONCE
			End
			Animation				= CHRB
				AnimationName	    = RUPsnt_4_CHRB
				AnimationMode		= ONCE
			End
			Animation				= CHRC
				AnimationName	    = RUPsnt_4_CHRC
				AnimationMode		= ONCE
			End
			Flags					= RANDOMSTART RESTART_ANIM_WHEN_COMPLETE			
		End
		
		AnimationState				= EMOTION_ALERT
			StateName				= STATE_Alert
			Animation				= &&ALERT&&
				AnimationName		= RUPsnt_4_IDLA
				AnimationMode		= LOOP
			End
		End

;;------------- SELECTED ---------------------------------------------

		AnimationState				=	SELECTED
			StateName				=	STATE_Selected
			SimilarRestart			=   Yes			
			Animation				=	ATNB
				AnimationName		=	RUPsnt_4_ATNB
				AnimationMode		=	LOOP
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Idle" then CurDrawableSetTransitionAnimState("TRANS_IdleToSelected") end
				if Prev == "STATE_Selected" then CurDrawableSetTransitionAnimState("TRANS_IdleToSelected") end
			EndScript
		End	
		
;;--------------- IDLE STATES -----------------------------------------------------------------			

		IdleAnimationState
			StateName			=	STATE_Idle
			Animation           = IDLA
				AnimationName     = RUPsnt_4_IDLA
				AnimationMode     = ONCE
				AnimationPriority = 20
			End
			Animation           = IDLC
				AnimationName     = RUPsnt_4_IDLC
				AnimationMode     = ONCE
				AnimationPriority = 1
			End
			Animation           = IDLD
				AnimationName     = RUPsnt_4_IDLD
				AnimationMode     = ONCE
				AnimationPriority = 1
			End	
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Selected" then CurDrawableSetTransitionAnimState("TRANS_SelectedToIdle") end
			EndScript													
		End
		
;---Transitions-------------------------------------		

		TransitionState       = TRANS_SelectedToIdle	
			Animation           = ATNC
				AnimationName     = RUPsnt_4_ATNC
				AnimationMode     = ONCE
				AnimationSpeedFactorRange = 0.7 1.2
			End
		End
		
		TransitionState				=	TRANS_IdleToSelected
			Animation				=	ATNA
				AnimationName		=	RUPsnt_4_ATNA
				AnimationMode		=	ONCE
				AnimationSpeedFactorRange = 0.7 1.2
			End
		End	
	
	
	
	End
	
	EquivalentTo = RohanPeasant


	; *** AUDIO Parameters ***;

	VoiceAttack					= PeasantFemaleVoiceAttack				;RohanPeasantWomanVoiceAttack
	VoiceAttackCharge				= PeasantFemaleVoiceAttackCharge
	VoiceAttackMachine			= PeasantFemaleVoiceAttack
	VoiceAttackStructure			= PeasantFemaleVoiceAttackBuilding
	VoiceCreated				= PeasantFemaleVoiceSalute
	VoiceFullyCreated 			= PeasantFemaleVoiceSalute
	VoiceGuard					= PeasantFemaleVoiceMove
	VoiceMove					= PeasantFemaleVoiceMove				;RohanPeasantWomanVoiceMove
	VoiceMoveToCamp				= PeasantFemaleVoiceMoveCamp
	VoiceMoveWhileAttacking			= PeasantFemaleVoiceDisengage
	VoicePriority				= 13								;3
	VoiceRetreatToCastle			= PeasantFemaleVoiceRetreat
	VoiceSelect					= PeasantFemaleVoiceSelectMS				;RohanPeasantWomanVoiceSelect
	VoiceSelectBattle 			= PeasantFemaleVoiceSelectBattle

	VoiceEnterStateAttack			= PeasantFemaleVoiceEnterStateAttack		;RohanPeasantWomanVoiceAttack
	VoiceEnterStateAttackCharge		= PeasantFemaleVoiceEnterStateAttackCharge
	VoiceEnterStateAttackMachine		= PeasantFemaleVoiceEnterStateAttackBuilding
	VoiceEnterStateAttackStructure	= PeasantFemaleVoiceEnterStateAttackBuilding
	VoiceEnterStateMove			= PeasantFemaleVoiceEnterStateMove			;RohanPeasantWomanVoiceMove
	VoiceEnterStateMoveToCamp		= PeasantFemaleVoiceEnterStateMoveCamp
	VoiceEnterStateMoveWhileAttacking	= PeasantFemaleVoiceEnterStateDisengage
	VoiceEnterStateRetreatToCastle	= PeasantFemaleVoiceEnterStateRetreat
		
	SoundImpact = ImpactHorse

	UnitSpecificSounds
		VoiceGarrison			= PeasantFemaleVoiceGarrison
		VoiceRepair				= PeasantFemaleVoiceRepair
	End

    #include "..\includes\StandardUnitEvaEvents.inc"

	ReplaceModule ModuleTag_RSSCB
		ClientBehavior = RandomSoundSelectorClientBehavior ModuleTag_RSSCB_Woman
			; This boils down to: Each time a mixed RohanPeasant is created, there is a 
			; 1.5% chance per female the female will be "bossy" and play her voices
			; instead of the men's. Once the "bossy-ness" of a female is set, it does
			; change, so that we don't keep getting voices from different people.
			; So, normally, the male voices will be heard [hey, this IS Middle Earth -- not a place known
			; for its gender equity], but every once in a while the females will get a voice. Otherwise
			; we basically never ever hear all these nice lines. This spices things up a bit
			Chance = 1.5% 
			RerollOnEveryFrame = No ; For consistancy of which unit plays the voice
			VoicePriority = 31 ; High enough to overcome the non-bossy men
		End
	End

	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		MaxUpdateRangeCap = 800
		AnimationSound = Sound:BodyFallGenericNoArmor	Animation:RUPsnt_4_SKL.RUPsnt_4_DIEA	Frames:47
		AnimationSound = Sound:BodyFallGenericNoArmor	Animation:RUPsnt_4_SKL.RUPsnt_4_DIEB	Frames:43
		AnimationSound = Sound:BodyFallGenericNoArmor	Animation:RUPsnt_4_SKL.RUPsnt_4_DIEC	Frames:34
		AnimationSound = Sound:BodyFallGeneric1		Animation:RUPsnt_4_SKL.RUPsnt_4_LNDA	Frames:1
	End

	; Tie into LargeGroupAudio system
	Behavior = LargeGroupAudioUpdate ModuleTag_LGAU
		Key = Human Unit Peasant Peasant_Female
	End

; *** ENGINEERING PARAMETERS *** ;

	;-------------------------------------------------------------------------------
	;
	;	Sub objects upgrade.
	;
	Behavior = SubObjectsUpgrade Armor_Upgrade
		TriggeredBy	= Upgrade_RohanHeavyArmorForPeasants
		UpgradeTexture	= RUPeasant04.tga 0 RUPeasant04_HA.tga
		UpgradeTexture	= RUPeasant04_Alt.tga 0 RUPeasant04_HA.tga
		UpgradeTexture	= RUPeasantWep.tga 0 RUPeasantWep_HA.tga
		UpgradeTexture	= RUPeasantWep_L.tga 0 RUPeasantWep_HA.tga
		RecolorHouse	= Yes
		ExcludeSubobjects = Forged_Blade
	End

	Behavior = SlowDeathBehavior ModuleTag_05
		DeathTypes = ALL
		SinkDelay = 3000
		SinkRate = 1.0     ; in Dist/Sec
		DestructionDelay = 8000
            Sound = INITIAL PeasantFemaleVoiceDie
	End
End	

;////////////////////////////////////////////////////////////////////////////////
Object RohanPeasantHorde
	; This is required for garrisoned objects - please put in all objects.
;	ButtonImage = BCFarm_Peasants
;	SelectPortrait	= UPRohan_Peasant


	Draw = W3DScriptedModelDraw ModuleTag_W3DModelDraw
	    DependencySharedModelFlags = EMOTION_ALERT EMOTION_MORALE_HIGH EMOTION_MORALE_LOW EMOTION_AFRAID EMOTION_COWER SELECTED EMOTION_TERROR
		DefaultModelConditionState
			Model = None ;InvisHrdeTmp5x2
		End
		ModelConditionState = HORDE_EMPTY
			Model = None
		End		
		ModelConditionState = WORLD_BUILDER
			Model = HordeMarkRUPea
		End
	End
	
	Side = Neutral
	EditorSorting = UNIT
	EmotionRange = 240
	DisplayName = OBJECT:HordeRohanPeasant
	
	WeaponSet
		Conditions = None 
		Weapon = PRIMARY    NormalMeleeHordeRangefinder
	End
	
	CommandSet = RohanPeasantHordeCommandSet

	; *** AUDIO Parameters ***;
	; Note: Don't put voice parameters here -- they will be ignored. Voice play requests
	; are always passed through to members

 	CrushableLevel = 0  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
	CrusherLevel = 0

	BuildCost = ROHAN_PEASANT_BUILDCOST				
	BuildTime = ROHAN_PEASANT_BUILDTIME				      
	VisionRange = ROHAN_PEASANT_VISION_RANGE 			
	CommandPoints = 10
	
	FormationWidth = 2 ; Width it occupies in formations. Current choices are 1 or 2.
	FormationDepth = 1 ; Depth it occupies in formations. Current choices are 1 or 2.
	
	
    TransportSlotCount = TRANSPORTSLOTCOUNT_UNIT
	KindOf = SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT INFANTRY HORDE MELEE_HORDE DOZER SWARM_DOZER ;UNATTACKABLE 
	
	;;;;; AUTO-RESOLVE DATA ;;;;;
	AutoResolveUnitType = AutoResolveUnit_Soldier
	
	Body = ImmortalBody ModuleTag_ImmortalBody
		MaxHealth = 1
	End
	
	Behavior = HordeWorkerAIUpdate ModuleTag_HordeAIUpdate
		AutoAcquireEnemiesWhenIdle = Yes ATTACK_BUILDINGS
		MoodAttackCheckRate        = 500
		MaxCowerTime				=	5000
		MinCowerTime				=	3000
        AILuaEventsList				= InfantryFunctions	
        AttackPriority				= 	AttackPriority_Infantry
        SpecialContactPoints		   = Repair
	End

	Behavior = RepairSpecialPower ModuleTag_RepairSPecialPower
		SpecialPowerTemplate      = SpecialRepairStructure
	End		

	Behavior = HordeContain ModuleTag_HordeContain
		ObjectStatusOfContained = 
		InitialPayload = RohanPeasant GOOD_MEN_HORDE_SIZE
		Slots = 5
		PassengerFilter = NONE +INFANTRY
		ShowPips = No
		ThisFormationIsTheMainFormation = Yes	;Used to determine which armorset to use (and anything else we want!)
		RandomOffset = X:5 Y:5
		
		; Banner Carrier info		
		BannerCarriersAllowed	= RohanBanner										; types of units that are allowed as banner carriers
		BannerCarrierPosition	= UnitType:RohanPeasant		Pos:X:30.0 Y:0.0		; (DEFAULT) position of banner carrier for peasant horde
		
		; Positions for 5
		RankInfo = RankNumber:1 UnitType:RohanPeasant Position:X:0 Y:0	Position:X:0 Y:25		Position:X:0 Y:-25		Position:X:0 Y:50		Position:X:0 Y:-50 
		
		RanksToReleaseWhenAttacking = 1 

		MeleeAttackLeashDistance = 25; How far the hordes can move from the center of the horde when melee attacking.
	End

	Behavior = PhysicsBehavior ModuleTag_PhysicsBehavior
		GravityMult = 1.0
	End
	
	Behavior = CommandButtonHuntUpdate ModuleTag_CommandButtonHuntUpdate
	End
	
 	Behavior = EmotionTrackerUpdate	Module_EmotionTracker

		TauntAndPointDistance		=	INFANTRY_TAUNT_POINT_RADIUS		; max distance to taunted/pointed objet
		TauntAndPointUpdateDelay	=	1000	; how often scan (milliseconds)
		TauntAndPointExcluded		=	NONE
		AfraidOf					=	NONE +GondorGwaihir +RohanTreeBerd +RohanEntFir +RohanEntAsh +RohanEntBirch +MordorMountainTroll +MordorDrummerTroll +MordorFellBeast +MordorWitchKingOnFellBeast +MordorMumakil;Must be SCARY kindof as well.
		AlwaysAfraidOf				=	NONE +MordorBalrog +RohanOathbreaker +MordorSauron ;+MordorWitchKing +MordorWitchKingOnFellBeast
 		PointAt				=	NONE +MordorFellBeast +MordorWitchKingOnFellBeast 
		HeroScanDistance		=	150
		FearScanDistance		=	INFANTRY_FEAR_SCAN_RADIUS



		AddEmotion	=	Terror_Base
		AddEmotion	=	Doom_Base
		AddEmotion	=   BraceForBeingCrushed_Base
		AddEmotion	=	UncontrollableFear_Base
		AddEmotion	=	FearIdle_Base
		AddEmotion	=	FearBusy_Base
		AddEmotion	=	Point_Base
		AddEmotion	=	Taunt_Base	
		AddEmotion	=	CheerIdle_Base
		AddEmotion	=	CheerBusy_Base
		AddEmotion	=	HeroCheerIdle_Base
		AddEmotion	=	HeroCheerBusy_Base
		AddEmotion	=	Alert_Base
	End	
		
	LocomotorSet
		Locomotor     = NormalMeleeHordeLocomotor
		Condition     = SET_NORMAL
		Speed         = NORMAL_GOOD_INFANTRY_HORDE_SPEED
	End

	Behavior = ProductionUpdate ProductionUpdateModuleTag
		GiveNoXP = Yes
	End

	Behavior = LevelUpUpgrade ModuleTag_BasicTraining
		TriggeredBy = Upgrade_RohanBasicTraining
		LevelsToGain = 1
		LevelCap = 2
	End
	
	Behavior = StatusBitsUpgrade ModuleTag_ProductionLegality
		TriggeredBy = Upgrade_RohanHeavyArmorForPeasants
	End
	
	Behavior = StatusBitsUpgrade ModuleTag_ProductionLegality2
		TriggeredBy = Upgrade_RohanForgedBladesForPeasants
	End
	
	Geometry = BOX
	GeometryMajorRadius = 20.0
	GeometryMinorRadius = 20.0
	GeometryHeight = 20.0
	GeometryIsSmall = No
End

//--------------------------------------
//----------- TORNADOES ------------------
//--------------------------------------
Object GaladrielTornado02

	; *** ART Parameters ***

    ; ButtonImage for Heros is button image on Hero Select UI to select hero. HI = HeroIcon or HeroImage.
    ButtonImage = HSGaladriel_NaturesWrath
    SelectPortrait         = UPTornado
	Draw = W3DScriptedModelDraw ModuleTag_01
		OkToChangeModelColor = Yes
		DefaultModelConditionState
			Model           = EXTornado_SKN
			ParticleSysBone = NONE TornadoDust01 
			ParticleSysBone = NONE TornadoDust02
			;ParticleSysBone = NONE TornadoDebris01 
			;ParticleSysBone = NONE TornadoDebris02
			ParticleSysBone = NONE TornadoMagic01
			ParticleSysBone = NONE TornadoMagic02
			ParticleSysBone = NONE TornadoMagic03
			ParticleSysBone = B_TORNADO11 TornadoLightning FOLLOWBONE:YES
			ParticleSysBone = B_TORNADO11 TornadoLightning1 FOLLOWBONE:YES
			ParticleSysBone = B_TORNADO11 TornadoLightning2 FOLLOWBONE:YES
			ParticleSysBone = B_TORNADO11 TornadoLightning3 FOLLOWBONE:YES
			ParticleSysBone = B_TORNADO11 TornadoLightning4 FOLLOWBONE:YES
			ParticleSysBone = B_TORNADO11 TornadoLightning5 FOLLOWBONE:YES
			ParticleSysBone = B_TORNADO11 TornadoLightning6 FOLLOWBONE:YES
			ParticleSysBone = B_TORNADO11 TornadoLightning7 FOLLOWBONE:YES
			ParticleSysBone = B_TORNADO11 TornadoLightning8 FOLLOWBONE:YES
			ParticleSysBone = B_TORNADO11 TornadoLightning9 FOLLOWBONE:YES
		End   
		
	
		
		IdleAnimationState
			StateName = State_Idle
			Animation = tornadodefault 
				AnimationName = EXTornado_SKL.EXTornado_IDLA
				AnimationMode = ONCE
				AnimationBlendTime = 30
				AnimationSpeedFactorRange = 0.3 0.4
			End
			
						
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "State_JustBuilt" 
					then CurDrawableSetTransitionAnimState("TRANS_JustBuilt_To_Idle") 
				end
			EndScript
		End
		

		AnimationState				= JUST_BUILT
			StateName				= State_JustBuilt
			Animation
				AnimationName		= EXTornado_SKL.EXTornado_SMNA
				AnimationMode		= ONCE
				AnimationBlendTime	= 0
			End
		End
		TransitionState = TRANS_JustBuilt_To_Idle
			Animation = BeingSummoned
				AnimationName = EXTornado_SMNA 
				AnimationMode = ONCE
			End
		
		End
	End
	
	Draw = W3DTornadoDraw ModuleTag_TornadoDraw
	
		DecalTemplate
  			Texture        = EXTornadoGround
			Style          = SHADOW_ALPHA_DECAL
			OpacityMin     = 5% 
			OpacityMax     = 20%	 
			MaxRadius	   = 300.0
			Color          = R:200 G:200 B:200 A:255 ;R:180 G:48 B:26 A:255 
			OnlyVisibleToOwningPlayer = Yes
			RotationsPerMinute = 0.4
			SpiralAcceleration = 1.0
		End
		DecalCount		= 7
		DecalMaxRadius	= 300.0
		
		
	End
	
	; ***DESIGN parameters ***
	Side			= Mordor
	EditorSorting	= UNIT
	ThreatLevel		= 0.0
	CommandPoints	= 0
	ShockwaveResistance = SHOCKWAVE_RESISTANCE_ALWAYS

	VisionRange		= 200.0
	DisplayName		= OBJECT:NaturesWrath
	
	CommandSet		= EmptyCommandSet


	; *** AUDIO Parameters ***

	EvaEnemyObjectSightedEvent = None  ; Don't bother player about this object showing up over their base -- happens too much to bother

	SoundAmbient	= TornadoLoopMS
	SoundMoveStart	= TornadoMoveStart

	VoiceAttack		= TornadoSelect
	VoiceMove		= TornadoSelect
	VoiceSelect		= TornadoSelect

	; *** ENGINEERING Parameters ***

	RadarPriority = UNIT
	KindOf = SELECTABLE NO_COLLIDE AIRCRAFT UNATTACKABLE MOVE_ONLY ORIENTS_TO_CAMERA CLICK_THROUGH HERO IGNORE_FOR_VICTORY IGNORE_FOR_EVA_SPEECH_POSITION NOT_AUTOACQUIRABLE IGNORES_SELECT_ALL PASS_EXPERIENCE_TO_PRODUCER
		
	Body = HighlanderBody ModuleTag_02
		MaxHealth         = 1.0
	End
	
	Behavior = AIUpdateInterface	ModuleTag_AIUpdateInterface
	End

	Behavior = PhysicsBehavior		ModuleTag_PhysicsBehavior
	End
	
	LocomotorSet
		Locomotor = TornadoLocomotor
		Condition = SET_NORMAL 
		Speed     = 20
	End
	
	Behavior = LifetimeUpdate ModuleTag_LifetimeUpdate
		MinLifetime		= 60000
		MaxLifetime		= 60000
	End	

	Behavior = FireWeaponUpdate ModuleTag_WINDY
		FireWeaponNugget
			WeaponName = TornadoWindWeapon
			FireDelay = 0
			OneShot = No
		End
	End	
	

	// TORNADOES ARE SCARY	
	Behavior = AttributeModifierAuraUpdate ModuleTag_FearMe
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= EyeOfSauronFear
		RefreshDelay	= 1000
		Range			= 150.0
		ObjectFilter	= ANY +INFANTRY +CAVALRY
		TargetEnemy		= Yes
		MaxActiveRank	= 1		;Only affects level 1 rank units
	End	


	
	Behavior = SlowDeathBehavior ModuleTag_05
		DeathTypes = ALL
	End

	Geometry = CYLINDER
	GeometryMajorRadius = 1.0
	GeometryMinorRadius = 1.0
	GeometryHeight		= 1.0
	GeometryIsSmall		= Yes





// NO SHADOW -M Lo
//    Shadow			= SHADOW_DECAL;SHADOW_ALPHA_DECAL; SHADOW_ALPHA_DECAL_DYNAMIC
//    ShadowSizeX		= 200;
//    ShadowSizeY		= 200;
//    ShadowTexture	= EUTornadoShadow;
//
//	ShadowOpacityStart = 0
//	ShadowOpacityFadeInTime = 1000
//	ShadowOpacityPeak = 255
//	ShadowOpacityFadeOutTime = 1000
//	ShadowOpacityEnd = 0
//
//	ShadowOverrideLODVisibility = yes

End

//--------------------------------------
//----------- TORNADOES ------------------
//--------------------------------------
Object GaladrielTornado

	; *** ART Parameters ***

    ; ButtonImage for Heros is button image on Hero Select UI to select hero. HI = HeroIcon or HeroImage.
    ButtonImage = HSGaladriel_NaturesWrath
    SelectPortrait         = UPTornado
	Draw = W3DScriptedModelDraw ModuleTag_01
		OkToChangeModelColor = Yes
		DefaultModelConditionState
			Model           = EXTornado_SKN
			;ParticleSysBone = NONE TornadoCow01 
			ParticleSysBone = NONE TornadoDebris01 
			ParticleSysBone = NONE TornadoDebris02
			ParticleSysBone = NONE TornadoDust01 
			ParticleSysBone = NONE TornadoDust02 
		End   
		
	
		
		IdleAnimationState
			StateName = State_Idle
			Animation = tornadodefault 
				AnimationName = EXTornado_SKL.EXTornado_IDLA
				AnimationMode = ONCE
				AnimationBlendTime = 30
				AnimationSpeedFactorRange = 0.3 0.4
			End
			
						
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "State_JustBuilt" 
					then CurDrawableSetTransitionAnimState("TRANS_JustBuilt_To_Idle") 
				end
			EndScript
		End
		

		AnimationState				= JUST_BUILT
			StateName				= State_JustBuilt
			Animation
				AnimationName		= EXTornado_SKL.EXTornado_SMNA
				AnimationMode		= ONCE
				AnimationBlendTime	= 0
			End
		End
		TransitionState = TRANS_JustBuilt_To_Idle
			Animation = BeingSummoned
				AnimationName = EXTornado_SMNA 
				AnimationMode = ONCE
			End
		
		End
	End
	
	Draw = W3DTornadoDraw ModuleTag_TornadoDraw
	
		DecalTemplate
  			Texture        = EXTornadoGround
			Style          = SHADOW_ALPHA_DECAL
			OpacityMin     = 5% 
			OpacityMax     = 20%	 
			MaxRadius	   = 300.0
			Color          = R:200 G:200 B:200 A:255 ;R:180 G:48 B:26 A:255 
			OnlyVisibleToOwningPlayer = Yes
			RotationsPerMinute = 0.4
			SpiralAcceleration = 1.0
		End
		DecalCount		= 7
		DecalMaxRadius	= 300.0
		
		
	End
	
	; ***DESIGN parameters ***
	Side			= Mordor
	EditorSorting	= UNIT
	ThreatLevel		= 0.0
	CommandPoints	= 0
	ShockwaveResistance = SHOCKWAVE_RESISTANCE_ALWAYS

	VisionRange		= 200.0
	DisplayName		= OBJECT:NaturesWrath
	
	CommandSet		= EmptyCommandSet


	; *** AUDIO Parameters ***

	EvaEnemyObjectSightedEvent = None  ; Don't bother player about this object showing up over their base -- happens too much to bother

	SoundAmbient	= TornadoLoopMS
	SoundMoveStart	= TornadoMoveStart

	VoiceAttack		= TornadoSelect
	VoiceMove		= TornadoSelect
	VoiceSelect		= TornadoSelect

	; *** ENGINEERING Parameters ***

	RadarPriority = UNIT
	KindOf = SELECTABLE NO_COLLIDE AIRCRAFT UNATTACKABLE MOVE_ONLY ORIENTS_TO_CAMERA CLICK_THROUGH HERO IGNORE_FOR_VICTORY IGNORE_FOR_EVA_SPEECH_POSITION NOT_AUTOACQUIRABLE IGNORES_SELECT_ALL PASS_EXPERIENCE_TO_PRODUCER
		
	Body = HighlanderBody ModuleTag_02
		MaxHealth         = 1.0
	End
	
	Behavior = AIUpdateInterface	ModuleTag_AIUpdateInterface
	End

	Behavior = PhysicsBehavior		ModuleTag_PhysicsBehavior
	End
	
	LocomotorSet
		Locomotor = TornadoLocomotor
		Condition = SET_NORMAL 
		Speed     = 20
	End
	
	Behavior = LifetimeUpdate ModuleTag_LifetimeUpdate
		MinLifetime		= 60000
		MaxLifetime		= 60000
	End	

	Behavior = FireWeaponUpdate ModuleTag_WINDY
		FireWeaponNugget
			WeaponName = TornadoWindWeapon
			FireDelay = 0
			OneShot = No
		End
	End	
	

	// TORNADOES ARE SCARY	
	Behavior = AttributeModifierAuraUpdate ModuleTag_FearMe
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= EyeOfSauronFear
		RefreshDelay	= 1000
		Range			= 150.0
		ObjectFilter	= ANY +INFANTRY +CAVALRY
		TargetEnemy		= Yes
		MaxActiveRank	= 1		;Only affects level 1 rank units
	End	


	
	Behavior = SlowDeathBehavior ModuleTag_05
		DeathTypes = ALL
	End

	Geometry = CYLINDER
	GeometryMajorRadius = 1.0
	GeometryMinorRadius = 1.0
	GeometryHeight		= 1.0
	GeometryIsSmall		= Yes





// NO SHADOW -M Lo
//    Shadow			= SHADOW_DECAL;SHADOW_ALPHA_DECAL; SHADOW_ALPHA_DECAL_DYNAMIC
//    ShadowSizeX		= 200;
//    ShadowSizeY		= 200;
//    ShadowTexture	= EUTornadoShadow;
//
//	ShadowOpacityStart = 0
//	ShadowOpacityFadeInTime = 1000
//	ShadowOpacityPeak = 255
//	ShadowOpacityFadeOutTime = 1000
//	ShadowOpacityEnd = 0
//
//	ShadowOverrideLODVisibility = yes

End

;--------------------------------------------------

Object ElrondWhirlwind

	; *** ART Parameters ***

    ; ButtonImage for Heros is button image on Hero Select UI to select hero. HI = HeroIcon or HeroImage.
    ButtonImage = HSGaladriel_NaturesWrath
    SelectPortrait         = UPTornado
	Draw = W3DScriptedModelDraw ModuleTag_01
		OkToChangeModelColor = Yes
		DefaultModelConditionState
			Model           = EXWhirlwind
			ParticleSysBone = NONE WhirlwindDust01 
			ParticleSysBone = NONE WhirlwindDust02
		End  
	End
	
 	Draw = W3DTornadoDraw ModuleTag_TornadoDraw
	
		DecalTemplate
  			Texture        = EXWhirlwindGround
			Style          = SHADOW_ALPHA_DECAL
			OpacityMin     = 5% 
			OpacityMax     = 40%	 
			MaxRadius	   = 100.0
			Color          = R:255 G:255 B:255 A:255 ;R:200 G:200 B:200 A:255 
			OnlyVisibleToOwningPlayer = Yes
			RotationsPerMinute = 0.4
			SpiralAcceleration = 1.0
		End
		DecalCount		= 7
		DecalMaxRadius	= 300.0
		
		
	End
	
	; ***DESIGN parameters ***
	Side			= Mordor
	EditorSorting	= UNIT
	ThreatLevel		= 0.0
	CommandPoints	= 0
	ShockwaveResistance = SHOCKWAVE_RESISTANCE_ALWAYS

	VisionRange		= 200.0
	DisplayName		= OBJECT:Whirlwind
	
	CommandSet		= EmptyCommandSet


	; *** AUDIO Parameters ***

	EvaEnemyObjectSightedEvent = None  ; Don't bother player about this object showing up over their base -- happens too much to bother

	SoundAmbient	= TornadoLoopMS
	SoundMoveStart	= TornadoMoveStart

	VoiceAttack		= TornadoSelect
	VoiceMove		= TornadoSelect
	VoiceSelect		= TornadoSelect

	; *** ENGINEERING Parameters ***
	RadarPriority = UNIT
	KindOf = SELECTABLE NO_COLLIDE AIRCRAFT UNATTACKABLE MOVE_ONLY ORIENTS_TO_CAMERA CLICK_THROUGH HERO IGNORE_FOR_VICTORY IGNORE_FOR_EVA_SPEECH_POSITION NOT_AUTOACQUIRABLE IGNORES_SELECT_ALL PASS_EXPERIENCE_TO_PRODUCER
	
	Body = HighlanderBody ModuleTag_02
		MaxHealth         = 1.0
	End

	Behavior = AIUpdateInterface	ModuleTag_AIUpdateInterface
	End

	Behavior = PhysicsBehavior		ModuleTag_PhysicsBehavior
	End
	
	LocomotorSet
		Locomotor = TornadoLocomotor
		Condition = SET_NORMAL 
		Speed     = 20
	End
	
	Behavior = LifetimeUpdate ModuleTag_LifetimeUpdate
		MinLifetime		= 60000
		MaxLifetime		= 60000
	End	

	Behavior = FireWeaponUpdate ModuleTag_WINDY
		FireWeaponNugget
			WeaponName = WhirlwindWindWeapon
			FireDelay = 0
			OneShot = No
		End
	End	
	

	// TORNADOES ARE SCARY	
	Behavior = AttributeModifierAuraUpdate ModuleTag_FearMe
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= EyeOfSauronFear
		RefreshDelay	= 1000
		Range			= 150.0
		ObjectFilter	= ANY +INFANTRY +CAVALRY
		TargetEnemy		= Yes
		MaxActiveRank	= 1		;Only affects level 1 rank units
	End	


	
	Behavior = SlowDeathBehavior ModuleTag_05
		DeathTypes = ALL
		FadeTime = 4000
        	FadeDelay = 1000
	End

	Geometry = CYLINDER
	GeometryMajorRadius = 1.0
	GeometryMinorRadius = 1.0
	GeometryHeight		= 1.0
	GeometryIsSmall		= Yes

// NO SHADOW -M Lo
//    Shadow			= SHADOW_DECAL;SHADOW_ALPHA_DECAL; SHADOW_ALPHA_DECAL_DYNAMIC
//    ShadowSizeX		= 200;
//    ShadowSizeY		= 200;
//    ShadowTexture	= EUTornadoShadow;
//
//	ShadowOpacityStart = 0
//	ShadowOpacityFadeInTime = 1000
//	ShadowOpacityPeak = 255
//	ShadowOpacityFadeOutTime = 1000
//	ShadowOpacityEnd = 0
//
//	ShadowOverrideLODVisibility = yes

End

;-------------------------------------------------------------------------------------------------------------
Object ElvenWhirlpool

	; *** ART Parameters ***
    
	Draw = W3DScriptedModelDraw ModuleTag_Draw
		DefaultModelConditionState
			Model = EXWhirl02
			
			ParticleSysBone NONE WhirlpoolMist04Start
			
			ParticleSysBone NONE WhirlpoolMist
			ParticleSysBone NONE WhirlpoolMist02
			ParticleSysBone NONE WhirlpoolMist03
			ParticleSysBone NONE WhirlpoolMist04
			ParticleSysBone NONE WhirlpoolMist05
			ParticleSysBone NONE WhirlpoolFoam
			
			
			ParticleSysBone NONE WhirlpoolFlashes01
			ParticleSysBone NONE WhirlpoolSparks		
		End
	End

	; ***DESIGN parameters ***
	Side				= Elves
	EditorSorting		= UNIT
	ThreatLevel			= 0.0
	CommandPoints		= 0
	ShockwaveResistance = SHOCKWAVE_RESISTANCE_IMMUNE

	ShroudClearingRange		= GOOD_FIRE_SHIP_WHIRLPOOL_RADIUS					; so we can see ships sinking etc.
	
	CommandSet		= EmptyCommandSet

	Scale			= 2.0

	; *** AUDIO Parameters ***

	;VoiceCreated 			= ShipWhirlpoolAttack				;didn't work
	;VoiceFullyCreated 		= ShipWhirlpoolAttack				;didn't work

	SoundAmbient 			= ShipWhirlpoolAttack

	EvaEnemyObjectSightedEvent = None  ; Don't bother player about this object showing up over their base -- happens too much to bother

	; *** ENGINEERING Parameters ***

	RadarPriority = UNIT
	KindOf = NO_COLLIDE UNATTACKABLE MOVE_ONLY CLICK_THROUGH IGNORE_FOR_VICTORY IGNORE_FOR_EVA_SPEECH_POSITION NOT_AUTOACQUIRABLE IGNORES_SELECT_ALL
	
	Body = ActiveBody ModuleTag_Body
		MaxHealth         = 200000
	End

	Behavior = AIUpdateInterface ModuleTag_AIUpdateInterface
	End

	Behavior = PhysicsBehavior ModuleTag_PhysicsBehavior
	End
	
	LocomotorSet
		Locomotor = WhirlpoolLocomotor
		Condition = SET_NORMAL 
		Speed     = 0
	End
	
	Behavior = LifetimeUpdate ModuleTag_LifetimeUpdate
		MinLifetime		= GOOD_FIRE_SHIP_WHIRLPOOL_TIMEOUT
		MaxLifetime		= GOOD_FIRE_SHIP_WHIRLPOOL_TIMEOUT
	End	

	Behavior = FireWeaponUpdate ModuleTag_Whirly
		FireWeaponNugget
			WeaponName	= WhirlpoolWeapon
			FireDelay	= 0
			OneShot		= No
		End
	End
	
	Behavior = SlowDeathBehavior ModuleTag_Death
		DeathTypes = ALL
		DestructionDelay = 5000
        FadeTime = 4000
        FadeDelay = 1000
	End

	Geometry			= CYLINDER
	GeometryMajorRadius = 1.0
	GeometryMinorRadius = 1.0
	GeometryHeight		= 1.0
	GeometryIsSmall		= Yes

End

