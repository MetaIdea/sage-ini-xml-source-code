; FILE: EvilFactionBuildings.ini ///////////////////////////////////////////////////
; This file contains only buildings that are part of a player or faction.
; Typically these are the buildings that can be build by the player or
; are part of a base.  
;//////////////////////////////////////////////////////////////////////////////



;------------------------------------------------------------------------------
;------------------------------------------------------------------------------
;------------------------------------------------------------------------------
;------------------------------------------------------------------------------
;
;  Mordor
;
;------------------------------------------------------------------------------
;------------------------------------------------------------------------------
;------------------------------------------------------------------------------



;------------------------------------------------------------------------------

Object MordorBlackGate01

	SelectPortrait = BPMBlackgate
  
  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_Draw
    StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = MBBlackGt01
    End
    WallBoundsMesh = P08
    RampMesh1 = P09
  End
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:MordorBlackGate
  Side                = Mordor
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 161
 

  ; *** AUDIO Parameters ***

	SoundOnDamaged		= BuildingLightDamageStone
	SoundOnReallyDamaged	= BuildingHeavyDamageStone

 
  ; *** ENGINEERING Parameters ***

  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE WALK_ON_TOP_OF_WALL CHUNK_VENDOR IMMOBILE SCORE NEED_BASE_FOUNDATION CASTLE_KEEP NOT_AUTOACQUIRABLE MADE_OF_METAL;SELECTABLE 
  
  Behavior            = GettingBuiltBehavior ModuleTag_04
    SelfBuildingLoop = BuildingConstructionLoop ; Only played if we DON'T spawn a worker
	SelfRepairFromDamageLoop  = NoSound         ; This doesn't cause an animation, so don't bother playing a sound
	SelfRepairFromRubbleLoop  = BuildingConstructionLoop
  End
 
  Body                = StructureBody ModuleTag_05
    MaxHealth         = 1500.0
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0
  End
 
  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End
 
  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= WallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

  Geometry              = BOX
  GeometryMajorRadius   = 55.0
  GeometryMinorRadius   = 50.0
  GeometryHeight        = 220.0
  GeometryOffset		= X:-53 Y:0 Z:0
  
  AdditionalGeometry    = CYLINDER
  GeometryMajorRadius   = 55.0
  GeometryMinorRadius   = 0
  GeometryHeight        = 310.0
  GeometryOffset		= X:53 Y:0 Z:0
  
  GeometryContactPoint =	X:0			Y:0			Z:200 
  GeometryContactPoint =	X:50		Y:-60			Z:0 Grab
  GeometryContactPoint =	X:100		Y:-60			Z:0 Grab
  GeometryContactPoint =	X:0			Y:0			Z:200
  GeometryContactPoint =	X:50		Y:60			Z:0 Grab
  GeometryContactPoint =	X:100		Y:60			Z:0 Grab
  GeometryContactPoint =	X:50		Y:0				Z:200
  GeometryContactPoint =	X:-75		Y:0				Z:200
  
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
End

;------------------------------------------------------------------------------

Object MordorBlackGate02

	SelectPortrait = BPMBlackgate
  
  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_Draw
    StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = MBBlackGt02
    End
  End
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:MordorBlackGate
  Side                = Mordor
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 161
 

  ; *** AUDIO Parameters ***
 
	SoundOnDamaged		= BuildingLightDamageStone
	SoundOnReallyDamaged	= BuildingHeavyDamageStone


  ; *** ENGINEERING Parameters ***

  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE CHUNK_VENDOR IMMOBILE SCORE NEED_BASE_FOUNDATION CASTLE_KEEP NOT_AUTOACQUIRABLE MADE_OF_METAL ;WALK_ON_TOP_OF_WALL SELECTABLE 
 
  Behavior            = GettingBuiltBehavior ModuleTag_04
    SelfBuildingLoop = BuildingConstructionLoop ; Only played if we DON'T spawn a worker
 	SelfRepairFromDamageLoop  = NoSound         ; This doesn't cause an animation, so don't bother playing a sound
	SelfRepairFromRubbleLoop  = BuildingConstructionLoop
  End
 
  Body                = StructureBody ModuleTag_05
    MaxHealth         = 1500.0
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0
  End
 
  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End
 
  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= WallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

  Geometry				= BOX
  GeometryMajorRadius   = 32.0
  GeometryMinorRadius   = 165.0
  GeometryHeight        = 115.0
  GeometryOffset		= X:0 Y:-60 Z:0
  
  AdditionalGeometry    = BOX
  GeometryMajorRadius   = 32.0
  GeometryMinorRadius   = 95.0
  GeometryHeight        = 200.0
  GeometryOffset		= X:0 Y:-130 Z:0
  
  AdditionalGeometry    = CYLINDER
  GeometryMajorRadius   = 30.0
  GeometryMinorRadius   = 30.0
  GeometryHeight        = 180.0
  GeometryOffset		= X:0 Y:75 Z:0
    

  GeometryIsSmall       = No
  
  
  GeometryContactPoint =	X:35		Y:-100		Z:0 Grab
  GeometryContactPoint =	X:35		Y:-75		Z:100 
  GeometryContactPoint =	X:35		Y:-50		Z:0 Grab
  GeometryContactPoint =	X:35		Y:-25		Z:100 
  GeometryContactPoint =	X:35		Y:0		Z:0 Grab
  GeometryContactPoint =	X:35		Y:25		Z:0 Grab
  GeometryContactPoint =	X:35		Y:50		Z:100 
  GeometryContactPoint =	X:35		Y:75		Z:0 Grab
  GeometryContactPoint =	X:35		Y:100		Z:100 
  GeometryContactPoint =	X:-35		Y:-100		Z:0 Grab
  GeometryContactPoint =	X:-35		Y:-75		Z:100 
  GeometryContactPoint =	X:-35		Y:-50		Z:0 Grab
  GeometryContactPoint =	X:-35		Y:-25		Z:100 
  GeometryContactPoint =	X:-35		Y:0		Z:0 Grab
  GeometryContactPoint =	X:-35		Y:25		Z:0 Grab
  GeometryContactPoint =	X:-35		Y:50		Z:100 
  GeometryContactPoint =	X:-35		Y:75		Z:0 Grab
  GeometryContactPoint =	X:-35		Y:100		Z:100 

  
  Shadow                = SHADOW_VOLUME
End


;------------------------------------------------------------------------------

Object MordorBlackGate02EX

	SelectPortrait = BPMBlackgate
  
  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_Draw
    StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = MBBlackGt02EX
    End
  End
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:MordorBlackGate
  Side                = Mordor
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 161
 

  ; *** AUDIO Parameters ***
 
	SoundOnDamaged		= BuildingLightDamageStone
	SoundOnReallyDamaged	= BuildingHeavyDamageStone


  ; *** ENGINEERING Parameters ***

  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE WALK_ON_TOP_OF_WALL CHUNK_VENDOR IMMOBILE SCORE NEED_BASE_FOUNDATION CASTLE_KEEP NOT_AUTOACQUIRABLE MADE_OF_METAL ;SELECTABLE 
 
  Behavior            = GettingBuiltBehavior ModuleTag_04
    SelfBuildingLoop = BuildingConstructionLoop ; Only played if we DON'T spawn a worker
 	SelfRepairFromDamageLoop  = NoSound         ; This doesn't cause an animation, so don't bother playing a sound
	SelfRepairFromRubbleLoop  = BuildingConstructionLoop
  End
 
  Body                = StructureBody ModuleTag_05
    MaxHealth         = 1500.0
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0
  End
 
  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End
 
  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= WallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

  Geometry              = BOX
  GeometryMajorRadius   = 130.0
  GeometryMinorRadius   = 50.0
  GeometryHeight        = 115.0
  GeometryOffset		= X:150 Y:100 Z:0
  
  AdditionalGeometry    = BOX
  GeometryMajorRadius   = 32.0
  GeometryMinorRadius   = 95.0
  GeometryHeight        = 200.0
  GeometryOffset		= X:0 Y:-130 Z:0
  
  AdditionalGeometry    = BOX
  GeometryMajorRadius   = 32.0
  GeometryMinorRadius   = 165.0
  GeometryHeight        = 115.0
  GeometryOffset		= X:0 Y:-60 Z:0

  AdditionalGeometry    = BOX
  GeometryMajorRadius   = 110.0
  GeometryMinorRadius   = 140.0
  GeometryHeight        = 50.0
  GeometryOffset		= X:-140 Y:-15 Z:0

  AdditionalGeometry    = CYLINDER
  GeometryMajorRadius   = 30.0
  GeometryMinorRadius   = 30.0
  GeometryHeight        = 180.0
  GeometryOffset		= X:0 Y:75 Z:0
    

GeometryIsSmall       = No
  
  GeometryContactPoint =	X:0			Y:38		Z:0 Grab
  GeometryContactPoint =	X:50		Y:37		Z:100
  GeometryContactPoint =	X:75		Y:47		Z:0 Grab
  GeometryContactPoint =	X:100		Y:42		Z:100
  GeometryContactPoint =	X:125		Y:53		Z:0 Grab
  GeometryContactPoint =	X:150		Y:49		Z:100
  GeometryContactPoint =	X:175		Y:58		Z:0 Grab
  GeometryContactPoint =	X:200		Y:56		Z:100
  GeometryContactPoint =	X:225		Y:66		Z:0 Grab
  
  GeometryContactPoint =	X:0			Y:-26		Z:0 Grab
  GeometryContactPoint =	X:50		Y:-16		Z:100
  GeometryContactPoint =	X:75		Y:-18		Z:0 Grab
  GeometryContactPoint =	X:100		Y:-8			Z:100
  GeometryContactPoint =	X:125		Y:-10		Z:0 Grab
  GeometryContactPoint =	X:150		Y:-1			Z:100
  GeometryContactPoint =	X:175		Y:-4			Z:0 Grab
  GeometryContactPoint =	X:200		Y:6		Z:100
  GeometryContactPoint =	X:225		Y:10		Z:0 Grab


  GeometryContactPoint =	X:35		Y:-100		Z:0 Grab
  GeometryContactPoint =	X:35		Y:-75		Z:100 
  GeometryContactPoint =	X:35		Y:-50		Z:0 Grab
  GeometryContactPoint =	X:35		Y:-25		Z:100 
  GeometryContactPoint =	X:35		Y:0		Z:0 Grab
  GeometryContactPoint =	X:35		Y:25		Z:0 Grab
  GeometryContactPoint =	X:35		Y:50		Z:100 
  GeometryContactPoint =	X:35		Y:75		Z:0 Grab
  GeometryContactPoint =	X:35		Y:100		Z:100 
  GeometryContactPoint =	X:-35		Y:-100		Z:0 Grab
  GeometryContactPoint =	X:-35		Y:-75		Z:100 
  GeometryContactPoint =	X:-35		Y:-50		Z:0 Grab
  GeometryContactPoint =	X:-35		Y:-25		Z:100 
  GeometryContactPoint =	X:-35		Y:0		Z:0 Grab
  GeometryContactPoint =	X:-35		Y:25		Z:0 Grab
  GeometryContactPoint =	X:-35		Y:50		Z:100 
  GeometryContactPoint =	X:-35		Y:75		Z:0 Grab
  GeometryContactPoint =	X:-35		Y:100		Z:100 
  GeometryContactPoint =	X:-40		Y:25		Z:0 Grab
  GeometryContactPoint =	X:0			Y:-25		Z:0 Grab
  GeometryContactPoint =	X:50		Y:-62		Z:50
  GeometryContactPoint =	X:75		Y:-75		Z:0 Grab
  GeometryContactPoint =	X:100		Y:-80		Z:50
  GeometryContactPoint =	X:100		Y:-35		Z:0 Grab
  GeometryContactPoint =	X:75		Y:-30		Z:50
  GeometryContactPoint =	X:50		Y:-20		Z:0 Grab   
  GeometryContactPoint =	X:25		Y:	0		Z:50   
  GeometryContactPoint =	X:0			Y: 35		Z:0 Grab  
  GeometryContactPoint =	X:-20		Y: 65		Z:50   
  GeometryContactPoint =	X:-30		Y: 100		Z:0 Grab
  GeometryContactPoint =	X:-33		Y: 130		Z:50
  GeometryContactPoint =	X:-70		Y: 130		Z:0 Grab
  GeometryContactPoint =	X:-70		Y: 100		Z:50
  GeometryContactPoint =	X:-50		Y: 25		Z:0 Grab

  
  Shadow                = SHADOW_VOLUME
End



;------------------------------------------------------------------------------

Object MordorBlackGate03

	SelectPortrait = BPMBlackgate
  
  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_Draw
    StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = MBBlackGt03
    End
    WallBoundsMesh = P1
  End
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:MordorBlackGate
  Side                = Mordor
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 161
 

  ; *** AUDIO Parameters ***
 
	SoundOnDamaged		= BuildingLightDamageStone
	SoundOnReallyDamaged	= BuildingHeavyDamageStone


  ; *** ENGINEERING Parameters ***

  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE WALK_ON_TOP_OF_WALL CHUNK_VENDOR IMMOBILE SCORE NEED_BASE_FOUNDATION CASTLE_KEEP NOT_AUTOACQUIRABLE SELECTABLE MADE_OF_METAL 
 
  Behavior            = GettingBuiltBehavior ModuleTag_04
    SelfBuildingLoop = BuildingConstructionLoop ; Only played if we DON'T spawn a worker
	SelfRepairFromDamageLoop  = NoSound         ; This doesn't cause an animation, so don't bother playing a sound
	SelfRepairFromRubbleLoop  = BuildingConstructionLoop
  End
 
  Body                = StructureBody ModuleTag_05
    MaxHealth         = 1500.0
  End
 
  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End
 
  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= WallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

  Geometry    = BOX
  GeometryMajorRadius   = 110.0
  GeometryMinorRadius   = 140.0
  GeometryHeight        = 50.0
  GeometryOffset		= X:-140 Y:-15 Z:0
  
  
  GeometryContactPoint =	X:-40		Y:25		Z:0 Grab
  GeometryContactPoint =	X:0			Y:-25		Z:0 Grab
  GeometryContactPoint =	X:50		Y:-62		Z:50
  GeometryContactPoint =	X:75		Y:-75		Z:0 Grab
  GeometryContactPoint =	X:100		Y:-80		Z:50
  GeometryContactPoint =	X:100		Y:-35		Z:0 Grab
  GeometryContactPoint =	X:75		Y:-30		Z:50
  GeometryContactPoint =	X:50		Y:-20		Z:0 Grab   
  GeometryContactPoint =	X:25		Y:	0		Z:50   
  GeometryContactPoint =	X:0			Y: 35		Z:0 Grab  
  GeometryContactPoint =	X:-20		Y: 65		Z:50   
  GeometryContactPoint =	X:-30		Y: 100		Z:0 Grab
  GeometryContactPoint =	X:-33		Y: 130		Z:50
  GeometryContactPoint =	X:-70		Y: 130		Z:0 Grab
  GeometryContactPoint =	X:-70		Y: 100		Z:50
  GeometryContactPoint =	X:-50		Y: 25		Z:0 Grab

  GeometryIsSmall       = No  
  Shadow                = SHADOW_VOLUME
End



;------------------------------------------------------------------------------

Object MordorBlackGate04

	SelectPortrait = BPMBlackgate
  
  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_Draw
    StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = MBBlackGt04
    End
    WallBoundsMesh = P1
  End
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:MordorBlackGate
  Side                = Mordor
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 161
 

  ; *** AUDIO Parameters ***
 
	SoundOnDamaged		= BuildingLightDamageStone
	SoundOnReallyDamaged	= BuildingHeavyDamageStone


  ; *** ENGINEERING Parameters ***

  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE WALK_ON_TOP_OF_WALL CHUNK_VENDOR IMMOBILE SCORE NEED_BASE_FOUNDATION CASTLE_KEEP NOT_AUTOACQUIRABLE MADE_OF_METAL SELECTABLE; 
 
  Behavior            = GettingBuiltBehavior ModuleTag_04
	SelfBuildingLoop = BuildingConstructionLoop ; Only played if we DON'T spawn a worker
	SelfRepairFromDamageLoop  = NoSound         ; This doesn't cause an animation, so don't bother playing a sound
	SelfRepairFromRubbleLoop  = BuildingConstructionLoop
  End
 
  Body                = StructureBody ModuleTag_05
    MaxHealth         = 1500.0
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0
  End
 
  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End
 
  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= WallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

  Geometry				= BOX
  GeometryMajorRadius   = 110.0
  GeometryMinorRadius   = 140.0
  GeometryHeight        = 50.0
  GeometryOffset		= X:-140 Y:15 Z:0
  
 
  GeometryContactPoint =	X:-40		Y:-25		Z:0 Grab
  GeometryContactPoint =	X:0			Y:25		Z:0 Grab
  GeometryContactPoint =	X:50		Y:62		Z:50
  GeometryContactPoint =	X:75		Y:75		Z:0 Grab
  GeometryContactPoint =	X:100		Y:80		Z:50
  GeometryContactPoint =	X:100		Y:35		Z:0 Grab
  GeometryContactPoint =	X:75		Y:30		Z:50
  GeometryContactPoint =	X:50		Y:20		Z:0 Grab   
  GeometryContactPoint =	X:25		Y:	0		Z:50   
  GeometryContactPoint =	X:0			Y: -35		Z:0 Grab  
  GeometryContactPoint =	X:-20		Y: -65		Z:50   
  GeometryContactPoint =	X:-30		Y: -100		Z:0 Grab
  GeometryContactPoint =	X:-33		Y: -130		Z:50
  GeometryContactPoint =	X:-70		Y: -130		Z:0 Grab
  GeometryContactPoint =	X:-70		Y: -100		Z:50
  GeometryContactPoint =	X:-50		Y: -25		Z:0 Grab
  
  GeometryIsSmall       = No  
  Shadow                = SHADOW_VOLUME
End


;------------------------------------------------------------------------------

Object MordorBlackGate05

	SelectPortrait = BPMBlackgate
  
  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_Draw
    StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = MBBlackGt05
    End
  End
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:MordorBlackGate
  Side                = Mordor
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 161
 

  ; *** AUDIO Parameters ***
 
	SoundOnDamaged		= BuildingLightDamageStone
	SoundOnReallyDamaged	= BuildingHeavyDamageStone


  ; *** ENGINEERING Parameters ***

  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE CHUNK_VENDOR IMMOBILE SCORE NEED_BASE_FOUNDATION CASTLE_KEEP NOT_AUTOACQUIRABLE MADE_OF_METAL ; SELECTABLE 
 
  Behavior            = GettingBuiltBehavior ModuleTag_04
    SelfBuildingLoop = BuildingConstructionLoop ; Only played if we DON'T spawn a worker
	SelfRepairFromDamageLoop  = NoSound         ; This doesn't cause an animation, so don't bother playing a sound
	SelfRepairFromRubbleLoop  = BuildingConstructionLoop
  End
 
  Body                = StructureBody ModuleTag_05
    MaxHealth         = 1500.0
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0
  End
 
  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End
 
  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= WallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

  Geometry				= BOX
  GeometryMajorRadius   = 32.0
  GeometryMinorRadius   = 95.0
  GeometryHeight        = 200.0
  GeometryOffset		= X:0 Y:130 Z:0
  
  AdditionalGeometry    = BOX
  GeometryMajorRadius   = 32.0
  GeometryMinorRadius   = 165.0
  GeometryHeight        = 115.0
  GeometryOffset		= X:0 Y:60 Z:0

  AdditionalGeometry    = CYLINDER
  GeometryMajorRadius   = 30.0
  GeometryMinorRadius   = 30.0
  GeometryHeight        = 180.0
  GeometryOffset		= X:0 Y:-75 Z:0

  GeometryContactPoint =	X:35		Y:-100		Z:0 Grab
  GeometryContactPoint =	X:35		Y:-75		Z:100 
  GeometryContactPoint =	X:35		Y:-50		Z:0 Grab
  GeometryContactPoint =	X:35		Y:-25		Z:100 
  GeometryContactPoint =	X:35		Y:0		Z:0 Grab
  GeometryContactPoint =	X:35		Y:25		Z:0 Grab
  GeometryContactPoint =	X:35		Y:50		Z:100 
  GeometryContactPoint =	X:35		Y:75		Z:0 Grab
  GeometryContactPoint =	X:35		Y:100		Z:100 
  GeometryContactPoint =	X:-35		Y:-100		Z:0 Grab
  GeometryContactPoint =	X:-35		Y:-75		Z:100 
  GeometryContactPoint =	X:-35		Y:-50		Z:0 Grab
  GeometryContactPoint =	X:-35		Y:-25		Z:100 
  GeometryContactPoint =	X:-35		Y:0		Z:0 Grab
  GeometryContactPoint =	X:-35		Y:25		Z:0 Grab
  GeometryContactPoint =	X:-35		Y:50		Z:100 
  GeometryContactPoint =	X:-35		Y:75		Z:0 Grab
  GeometryContactPoint =	X:-35		Y:100		Z:100 

  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
End

;------------------------------------------------------------------------------

Object MordorBlackGate05EX

	SelectPortrait = BPMBlackgate
  
  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_Draw
    StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = MBBlackGt05EX
    End
    WallBoundsMesh = P04
    RampMesh1 = P05
  End
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:MordorBlackGate
  Side                = Mordor
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 161
 

  ; *** AUDIO Parameters ***
 
	SoundOnDamaged		= BuildingLightDamageStone
	SoundOnReallyDamaged	= BuildingHeavyDamageStone


  ; *** ENGINEERING Parameters ***

  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE WALK_ON_TOP_OF_WALL CHUNK_VENDOR IMMOBILE SCORE NEED_BASE_FOUNDATION CASTLE_KEEP NOT_AUTOACQUIRABLE MADE_OF_METAL ;SELECTABLE 
 
  Behavior            = GettingBuiltBehavior ModuleTag_04
    SelfBuildingLoop = BuildingConstructionLoop ; Only played if we DON'T spawn a worker
	SelfRepairFromDamageLoop  = NoSound         ; This doesn't cause an animation, so don't bother playing a sound
	SelfRepairFromRubbleLoop  = BuildingConstructionLoop
  End
 
  Body                = StructureBody ModuleTag_05
    MaxHealth         = 1500.0
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0
  End
 
  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End
 
  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= WallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	


  Geometry              = BOX
  GeometryMajorRadius   = 130.0
  GeometryMinorRadius   = 50.0
  GeometryHeight        = 115.0
  GeometryOffset		= X:150 Y:-100 Z:0
  
  AdditionalGeometry    = BOX
  GeometryMajorRadius   = 32.0
  GeometryMinorRadius   = 95.0
  GeometryHeight        = 200.0
  GeometryOffset		= X:0 Y:130 Z:0
  
  AdditionalGeometry    = BOX
  GeometryMajorRadius   = 32.0
  GeometryMinorRadius   = 165.0
  GeometryHeight        = 115.0
  GeometryOffset		= X:0 Y:60 Z:0

  AdditionalGeometry    = BOX
  GeometryMajorRadius   = 110.0
  GeometryMinorRadius   = 140.0
  GeometryHeight        = 50.0
  GeometryOffset		= X:-140 Y:15 Z:0

  AdditionalGeometry    = CYLINDER
  GeometryMajorRadius   = 30.0
  GeometryMinorRadius   = 30.0
  GeometryHeight        = 180.0
  GeometryOffset		= X:0 Y:-75 Z:0
    
  GeometryContactPoint =	X:0			Y:-38		Z:0 Grab
  GeometryContactPoint =	X:50		Y:-37		Z:100
  GeometryContactPoint =	X:75		Y:-47		Z:0 Grab
  GeometryContactPoint =	X:100		Y:-42		Z:100
  GeometryContactPoint =	X:125		Y:-53		Z:0 Grab
  GeometryContactPoint =	X:150		Y:-49		Z:100
  GeometryContactPoint =	X:175		Y:-58		Z:0 Grab
  GeometryContactPoint =	X:200		Y:-56		Z:100
  GeometryContactPoint =	X:225		Y:-66		Z:0 Grab
  
  GeometryContactPoint =	X:0			Y:26		Z:0 Grab
  GeometryContactPoint =	X:50		Y:16		Z:100
  GeometryContactPoint =	X:75		Y:18		Z:0 Grab
  GeometryContactPoint =	X:100		Y:8			Z:100
  GeometryContactPoint =	X:125		Y:10		Z:0 Grab
  GeometryContactPoint =	X:150		Y:1			Z:100
  GeometryContactPoint =	X:175		Y:4			Z:0 Grab
  GeometryContactPoint =	X:200		Y:-6		Z:100
  GeometryContactPoint =	X:225		Y:-10		Z:0 Grab
  
  GeometryContactPoint =	X:-40		Y:-25		Z:0 Grab
  GeometryContactPoint =	X:0			Y:25		Z:0 Grab
  GeometryContactPoint =	X:50		Y:62		Z:50
  GeometryContactPoint =	X:75		Y:75		Z:0 Grab
  GeometryContactPoint =	X:100		Y:80		Z:50
  GeometryContactPoint =	X:100		Y:35		Z:0 Grab
  GeometryContactPoint =	X:75		Y:30		Z:50
  GeometryContactPoint =	X:50		Y:20		Z:0 Grab   
  GeometryContactPoint =	X:25		Y:	0		Z:50   
  GeometryContactPoint =	X:0			Y: -35		Z:0 Grab  
  GeometryContactPoint =	X:-20		Y: -65		Z:50   
  GeometryContactPoint =	X:-30		Y: -100		Z:0 Grab
  GeometryContactPoint =	X:-33		Y: -130		Z:50
  GeometryContactPoint =	X:-70		Y: -130		Z:0 Grab
  GeometryContactPoint =	X:-70		Y: -100		Z:50
  GeometryContactPoint =	X:-50		Y: -25		Z:0 Grab

  GeometryContactPoint =	X:35		Y:-100		Z:0 Grab
  GeometryContactPoint =	X:35		Y:-75		Z:100 
  GeometryContactPoint =	X:35		Y:-50		Z:0 Grab
  GeometryContactPoint =	X:35		Y:-25		Z:100 
  GeometryContactPoint =	X:35		Y:0		Z:0 Grab
  GeometryContactPoint =	X:35		Y:25		Z:0 Grab
  GeometryContactPoint =	X:35		Y:50		Z:100 
  GeometryContactPoint =	X:35		Y:75		Z:0 Grab
  GeometryContactPoint =	X:35		Y:100		Z:100 
  GeometryContactPoint =	X:-35		Y:-100		Z:0 Grab
  GeometryContactPoint =	X:-35		Y:-75		Z:100 
  GeometryContactPoint =	X:-35		Y:-50		Z:0 Grab
  GeometryContactPoint =	X:-35		Y:-25		Z:100 
  GeometryContactPoint =	X:-35		Y:0		Z:0 Grab
  GeometryContactPoint =	X:-35		Y:25		Z:0 Grab
  GeometryContactPoint =	X:-35		Y:50		Z:100 
  GeometryContactPoint =	X:-35		Y:75		Z:0 Grab
  GeometryContactPoint =	X:-35		Y:100		Z:100 

  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
End



;------------------------------------------------------------------------------

Object MordorBlackGate06

	SelectPortrait = BPMBlackgate
  
  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_Draw
    StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = MBBlackGt06
    End
    WallBoundsMesh = P07
    RampMesh1 = P10
  End
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:MordorBlackGate
  Side                = Mordor
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 161
 

  ; *** AUDIO Parameters ***
 
	SoundOnDamaged		= BuildingLightDamageStone
	SoundOnReallyDamaged	= BuildingHeavyDamageStone


  ; *** ENGINEERING Parameters ***

  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE WALK_ON_TOP_OF_WALL CHUNK_VENDOR IMMOBILE SCORE NEED_BASE_FOUNDATION CASTLE_KEEP NOT_AUTOACQUIRABLE MADE_OF_METAL ;SELECTABLE 
 
  Behavior            = GettingBuiltBehavior ModuleTag_04
    SelfBuildingLoop = BuildingConstructionLoop ; Only played if we DON'T spawn a worker
	SelfRepairFromDamageLoop  = NoSound         ; This doesn't cause an animation, so don't bother playing a sound
	SelfRepairFromRubbleLoop  = BuildingConstructionLoop
  End
 
  Body                = StructureBody ModuleTag_05
    MaxHealth         = 1500.0
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0
  End
 
  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End
 
  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= WallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

  Geometry              = BOX
  GeometryMajorRadius   = 55.0
  GeometryMinorRadius   = 50.0
  GeometryHeight        = 220.0
  GeometryOffset		= X:-53 Y:0 Z:0
  
  AdditionalGeometry    = CYLINDER
  GeometryMajorRadius   = 55.0
  GeometryMinorRadius   = 0
  GeometryHeight        = 310.0
  GeometryOffset		= X:53 Y:0 Z:0
  
  GeometryContactPoint =	X:0			Y:0			Z:200 
  GeometryContactPoint =	X:50		Y:-60			Z:0 Grab
  GeometryContactPoint =	X:100		Y:-60			Z:0 Grab
  GeometryContactPoint =	X:0			Y:0			Z:200
  GeometryContactPoint =	X:50		Y:60			Z:0 Grab
  GeometryContactPoint =	X:100		Y:60			Z:0 Grab
  GeometryContactPoint =	X:50		Y:0				Z:200
  GeometryContactPoint =	X:-75		Y:0				Z:200
  
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
End


;------------------------------------------------------------------------------

Object MordorBlackGateLeft

	SelectPortrait = BPMBlackgate
  
  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_Draw
    StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
		Model = MBBlackGtL
    End
    WallBoundsMesh = P01
    
    AnimationState = USER_1 ;openning
		Animation
			AnimationName	= MBBlackGtL.MBBlackGtL
			AnimationMode   = ONCE_BACKWARDS
		End
		Flags = START_FRAME_LAST
    End
    AnimationState = USER_2 ;standing closed
		Animation
			AnimationName	= MBBlackGtL.MBBlackGtL
			AnimationMode   = ONCE
		End
		Flags = START_FRAME_LAST
    End
    
    
    
  End
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:MordorBlackGate
  Side                = Mordor
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 161
 

  ; *** AUDIO Parameters ***
 
	SoundOnDamaged		= BuildingLightDamageStone
	SoundOnReallyDamaged	= BuildingHeavyDamageStone


  ; *** ENGINEERING Parameters ***

  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE WALK_ON_TOP_OF_WALL CHUNK_VENDOR IMMOBILE SCORE NEED_BASE_FOUNDATION CASTLE_KEEP NOT_AUTOACQUIRABLE SELECTABLE MADE_OF_METAL 
 
  Behavior            = GettingBuiltBehavior ModuleTag_04
    SelfBuildingLoop = BuildingConstructionLoop ; Only played if we DON'T spawn a worker
	SelfRepairFromDamageLoop  = NoSound         ; This doesn't cause an animation, so don't bother playing a sound
	SelfRepairFromRubbleLoop  = BuildingConstructionLoop
  End
 
  Body                = StructureBody ModuleTag_05
    MaxHealth         = 1500.0
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0
  End
 
  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End
 
  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= WallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

  Geometry              = BOX
  GeometryMajorRadius   = 130.0
  GeometryMinorRadius   = 50.0
  GeometryHeight        = 115.0
  GeometryOffset		= X:150 Y:100 Z:0
  
  GeometryContactPoint =	X:0			Y:38		Z:0 Grab
  GeometryContactPoint =	X:50		Y:37		Z:100
  GeometryContactPoint =	X:75		Y:47		Z:0 Grab
  GeometryContactPoint =	X:100		Y:42		Z:100
  GeometryContactPoint =	X:125		Y:53		Z:0 Grab
  GeometryContactPoint =	X:150		Y:49		Z:100
  GeometryContactPoint =	X:175		Y:58		Z:0 Grab
  GeometryContactPoint =	X:200		Y:56		Z:100
  GeometryContactPoint =	X:225		Y:66		Z:0 Grab
  
  GeometryContactPoint =	X:0			Y:-26		Z:0 Grab
  GeometryContactPoint =	X:50		Y:-16		Z:100
  GeometryContactPoint =	X:75		Y:-18		Z:0 Grab
  GeometryContactPoint =	X:100		Y:-8			Z:100
  GeometryContactPoint =	X:125		Y:-10		Z:0 Grab
  GeometryContactPoint =	X:150		Y:-1			Z:100
  GeometryContactPoint =	X:175		Y:-4			Z:0 Grab
  GeometryContactPoint =	X:200		Y:6		Z:100
  GeometryContactPoint =	X:225		Y:10		Z:0 Grab
  
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
End


;------------------------------------------------------------------------------

Object MordorBlackGateRight

	SelectPortrait = BPMBlackgate
  
  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_Draw
    StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
		Model = MBBlackGtR
    End
    WallBoundsMesh = P04
    
    AnimationState = USER_1 ;openning
		Animation
			AnimationName	= MBBlackGtR.MBBlackGtR
			AnimationMode   = ONCE_BACKWARDS
		End
		Flags = START_FRAME_LAST
    End
    AnimationState = USER_2 ;standing closed
		Animation
			AnimationName	= MBBlackGtR.MBBlackGtR
			AnimationMode   = ONCE 
		End
		Flags = START_FRAME_LAST
    End
	
  End
  

	
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:MordorBlackGate
  Side                = Mordor
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 161
 

  ; *** AUDIO Parameters ***
 
	SoundOnDamaged		= BuildingLightDamageStone
	SoundOnReallyDamaged	= BuildingHeavyDamageStone


  ; *** ENGINEERING Parameters ***

  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE WALK_ON_TOP_OF_WALL CHUNK_VENDOR IMMOBILE SCORE NEED_BASE_FOUNDATION CASTLE_KEEP NOT_AUTOACQUIRABLE SELECTABLE MADE_OF_METAL 
 
  Behavior            = GettingBuiltBehavior ModuleTag_04
    SelfBuildingLoop = BuildingConstructionLoop ; Only played if we DON'T spawn a worker
	SelfRepairFromDamageLoop  = NoSound         ; This doesn't cause an animation, so don't bother playing a sound
	SelfRepairFromRubbleLoop  = BuildingConstructionLoop
  End
 
  Body                = StructureBody ModuleTag_05
    MaxHealth         = 1500.0
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0
  End
 
  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End
 
  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= WallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

  Geometry              = BOX
  GeometryMajorRadius   = 130.0
  GeometryMinorRadius   = 50.0
  GeometryHeight        = 115.0
  GeometryOffset		= X:150 Y:-100 Z:0

  
  GeometryContactPoint =	X:0			Y:-38		Z:0 Grab
  GeometryContactPoint =	X:50		Y:-37		Z:100
  GeometryContactPoint =	X:75		Y:-47		Z:0 Grab
  GeometryContactPoint =	X:100		Y:-42		Z:100
  GeometryContactPoint =	X:125		Y:-53		Z:0 Grab
  GeometryContactPoint =	X:150		Y:-49		Z:100
  GeometryContactPoint =	X:175		Y:-58		Z:0 Grab
  GeometryContactPoint =	X:200		Y:-56		Z:100
  GeometryContactPoint =	X:225		Y:-66		Z:0 Grab
  
  GeometryContactPoint =	X:0			Y:26		Z:0 Grab
  GeometryContactPoint =	X:50		Y:16		Z:100
  GeometryContactPoint =	X:75		Y:18		Z:0 Grab
  GeometryContactPoint =	X:100		Y:8			Z:100
  GeometryContactPoint =	X:125		Y:10		Z:0 Grab
  GeometryContactPoint =	X:150		Y:1			Z:100
  GeometryContactPoint =	X:175		Y:4			Z:0 Grab
  GeometryContactPoint =	X:200		Y:-6		Z:100
  GeometryContactPoint =	X:225		Y:-10		Z:0 Grab
  
  
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
End



;--------------------------------------------- MordorCitadel ---------------------------------------------
Object MordorCampKeep

	SelectPortrait = BPMCamp

  ; *** ART Parameters ***

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes

    DefaultModelConditionState  
      Model = MBCCenter_SKN
;                    ParticleSysBone   = glowbone01 TorchGlow
;                    ParticleSysBone   = glowbone02 TorchGlow
    End

	ModelConditionState = WORLD_BUILDER
		Model = MBCCenterW
	End
    
	IdleAnimationState
		Animation             = Idle
			AnimationName     = MBCCenter_SKL.MBCCenter_IDLA
			AnimationMode     = ONCE
			AnimationBlendTime = 0			
        End
        Flags               = RESTART_ANIM_WHEN_COMPLETE 

		;BeginScript
		;	Prev = CurDrawablePrevAnimationState()
		;	if Prev == "BeingConstructed" then 
			    ; Don't play completed sound when canceling build-in-progress or when
			    ; destroyed halfway
		;	    if not CurDrawableModelcondition( "DYING" ) then 
		;			CurDrawablePlaySound("CampOrcCompleteKeep")
		;		end
		;	end
		;EndScript

	End    

  ;------------Build Up States
    ModelConditionState   = ACTIVELY_BEING_CONSTRUCTED
      Model               = MBCCenter_SKN
;      ParticleSysBone	  = NONE BuildingDoughnutCloud
      ParticleSysBone     = NONE BuildingContructDust
    End

	AnimationState          = ACTIVELY_BEING_CONSTRUCTED
		Animation
			AnimationName	= MBCCenter_SKL.MBCCenter_A
			AnimationMode   = MANUAL
		End
		StateName		= BeingConstructed
		BeginScript
			CurDrawablePlaySound("GondorBarracksBeginConstruction")
			CurDrawablePlaySound("BuildingTopple")
		EndScript
	End

  ;------------Build Up States
    ModelConditionState   = BASE_BUILD
      Model               = MBCCenter_SKN
 ;     ParticleSysBone	  = NONE BuildingDoughnutCloud
      ParticleSysBone     = NONE BuildingContructDust
    End

	AnimationState		  = BASE_BUILD
		Animation
			AnimationName = MBCCenter_SKL.MBCCenter_A
			AnimationMode = ONCE
			AnimationBlendTime = 0			
			AnimationSpeedFactorRange = 0.66 0.66 ; 100 frame anim, but need to stretch to 5 seconds
		End
		BeginScript
			CurDrawablePlaySound("DebrisDust")
			CurDrawablePlaySound("GondorBarracksBeginConstruction")
			CurDrawablePlaySound("BuildingTopple")
		EndScript
	End

    ModelConditionState   = JUST_BUILT
      Model               = MBCCenter_SKN
 ;     ParticleSysBone	  = NONE BuildingDoughnutCloud
      ParticleSysBone     = NONE BuildingContructDust
    End

	AnimationState		  = JUST_BUILT
		Animation
			AnimationName = MBCCenter_SKL.MBCCenter_A
			AnimationMode = MANUAL
			AnimationBlendTime = 0			
		End
        Flags = START_FRAME_FIRST
		;BeginScript
		;	CurDrawablePlaySound("DamageDebrisLightRock")
		;EndScript
	End

    ModelConditionState  = DAMAGED
      Model         = MBCCenter_D1
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
;      ParticleSysBone   = glowbone01 TorchGlow
;      ParticleSysBone   = glowbone02 TorchGlow
    End

    AnimationState = DAMAGED
	EnteringStateFX	= FX_BuildingDamaged
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = MBCCenter_D2
      ParticleSysBone NONE SmokeBuildingLarge
      ParticleSysBone NONE DebrisHitSmall
    End

    AnimationState = REALLYDAMAGED
	EnteringStateFX	= FX_BuildingReallyDamaged
    End
    
    ModelConditionState  = RUBBLE
      Model         = MBCCenter_D2 
      ParticleSysBone NONE DebrisHitSmall
      ParticleSysBone NONE Explosion5
    End

    AnimationState = RUBBLE
	;EnteringStateFX	= FX_MordorCitadelDie		;added to trigger BuildingSink audio but already being triggered in StructureCollapseUpdate module
    End

    ModelConditionState  = POST_RUBBLE
        Model         = GBGenRubble
   		ParticleSysBone NONE SmokeBuildingMediumRubble
    End    
    AnimationState = POST_RUBBLE
    End
   
    ModelConditionState  = POST_COLLAPSE
        Model         = GBGenRubble
   		ParticleSysBone NONE SmokeBuildingMediumRubble
    End
    AnimationState = POST_COLLAPSE
    End        
  End
   

     ; *** AUDIO Parameters ***

	VoiceSelect				= MordorCitadelSelect
   
	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone

	VoiceSelectUnderConstruction	= BuildingEvilVoiceSelectUnderConstruction

	UnitSpecificSounds
		UnderConstruction		= BuildingBigConstructionLoop		; Built first time
		; UnderRepairFromDamage	= NoSound					; Repaired No animation on the building, so don't bother playing sound
		UnderRepairFromRubble	= BuildingBigConstructionLoop		; Repaired from completely destroyed (not used???)
	End

	EvaEventDieOwner = CitadelDie


     ; ***DESIGN parameters ***

     DisplayName		= OBJECT:MordorCampKeep
     Side				= Mordor
     EditorSorting		= STRUCTURE
     ThreatLevel		= 1.0
     BuildCost			= 1000
     BuildTime			= 30.0           ; in seconds
     CommandSet			= MordorCampKeepCommandSet
   
     ArmorSet
       Conditions        = None
       Armor             = CitadelArmor
       DamageFX          = None
     End
   
	; *** ENGINEERING Parameters ***  
	KindOf					= VITAL_FOR_BASE_SURVIVAL STRUCTURE IMMOBILE CASTLE_KEEP MP_COUNT_FOR_VICTORY SELECTABLE FS_FACTORY AUTO_RALLYPOINT MADE_OF_WOOD SCORE
	RadarPriority			= STRUCTURE
	KeepSelectableWhenDead	= Yes
     
     
     Body              = ActiveBody ModuleTag_02
       MaxHealth       = MORDOR_CENTRAL_CAMP_KEEP_HEALTH
     End
   
     Behavior = GettingBuiltBehavior ModuleTag_04
		SelfBuildingLoop = BuildingBigConstructionLoop			; Only played if we DON'T spawn a worker
		SelfRepairFromDamageLoop  = NoSound        			; This doesn't cause an animation, so don't bother playing a sound
		SelfRepairFromRubbleLoop  = BuildingBigConstructionLoop
     End
   
     Behavior = CastleMemberBehavior ModuleTag_CMB
		BeingBuiltSound = BuildingBigConstructionLoop
     End 

  	;-----------------------------------------------
	;Used for hero revival and initial construction     
	Behavior = ProductionUpdate ProductionUpdateModuleTag
		; nothing, but is required if we have any Object-level Upgrades!
	End

	Behavior = QueueProductionExitUpdate ModuleTag_QueuePEU
		UnitCreatePoint   = X:0.0 Y:-20.0 Z:0.0
		NaturalRallyPoint = X:28.8 Y:-80.0 Z:0.0;NaturalRallyPointX must always match GeometryMajorRadius! 
		ExitDelay = 300 ;Handles delays between units if multiple produced at a time. (like Generals Redguard coming out 2 at a time)
	End  

	;-----------------------------------------------
     
	Behavior = AutoDepositUpdate AutoDepositModuleTag
		DepositTiming			= GENERIC_KEEP_MONEY_TIME		; in milliseconds
		DepositAmount			= GENERIC_KEEP_MONEY_AMOUNT		; cash amount to deposit every DepositTiming
		InitialCaptureBonus		= 0  ; no initial bonus
	End
   
     ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
     ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
     ; buildings automatically stick around because GarrisonContain has it's own DieModule
	 Behavior = KeepObjectDie ModuleTag_IWantRubble
     End
     
     Behavior                  = StructureCollapseUpdate ModuleTag_06
       MinCollapseDelay        = 000
       MaxCollapseDelay        = 000
       CollapseDamping         = .5
       MaxShudder              = 0.6
       MinBurstDelay           = 250
       MaxBurstDelay           = 800
       BigBurstFrequency       = 4
       FXList                  = INITIAL FX_StructureMediumCollapse
     End
   
    Behavior                  = RubbleRiseUpdate ModuleTag_07
      MinRubbleRiseDelay      = 000
      MaxRubbleRiseDelay      = 000
      ;RubbleRiseDamping       = .5
      RubbleHeight            = 4.0
      MaxShudder              = 0.6
      MinBurstDelay           = 250
      MaxBurstDelay           = 800
      BigBurstFrequency       = 4
      FXList                  = INITIAL FX_StructureMediumPostCollapse		;FX_StructureMediumCollapse
    End

  Geometry              = BOX
  GeometryMajorRadius   = 30.0
  GeometryMinorRadius   = 30.0
  GeometryHeight        = 88.0
  
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME;_NON_SELF_1 ; no non-self's for structures
  
  AttackContactPoint	= X:1.418	Y:-0.852	Z:133.697	Swoop
  AttackContactPoint	= X:0		Y:0			Z:0
End

;------------------------------------------------------------------------------------------
Object MordorEconomyKeep

	SelectPortrait = BPMCamp

  ; *** ART Parameters ***

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes

    DefaultModelConditionState  
      Model = MUIncinerator
    End
    AnimationState        = NONE
      Animation           = MUIncinerator
        AnimationName     = MUIncinerator.MUIncinerator
        AnimationMode     = LOOP
      End
    End
    
    ModelConditionState  = RUBBLE
      Model         = MUIncinerator  
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End
    AnimationState = RUBBLE
    End

    ModelConditionState  = POST_RUBBLE
      Model         = None
		ParticleSysBone NONE SmokeBuildingMediumRubble
    End    
    AnimationState = POST_RUBBLE
    End

    ModelConditionState  = POST_COLLAPSE
      Model         = None
		ParticleSysBone NONE SmokeBuildingMediumRubble
    End
    AnimationState = POST_COLLAPSE
    End        
  End


  ; *** AUDIO Parameters ***

	SoundOnDamaged		= BuildingLightDamageStone
	SoundOnReallyDamaged	= BuildingHeavyDamageStone


  ; ***DESIGN parameters ***

  DisplayName      = OBJECT:MordorCampKeep
  Side = Mordor
  EditorSorting   = STRUCTURE
  ThreatLevel = 1.0
  ;BuildCost           = 500
  ;BuildTime           = 10.0           ; in seconds

  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    DamageFX          = None
  End

  ; *** ENGINEERING Parameters ***  
  KindOf            = STRUCTURE SELECTABLE IMMOBILE CASTLE_KEEP MP_COUNT_FOR_VICTORY MADE_OF_WOOD
  RadarPriority		= STRUCTURE
  Body              = ActiveBody ModuleTag_02
    MaxHealth       = 4000.0
  End

  Behavior = GettingBuiltBehavior ModuleTag_04
    WorkerName	= MordorWorkerNoSelect
    SpawnTimer  = 120
    RebuildWhenDead = Yes
  End

  Behavior = CastleMemberBehavior ModuleTag_CMB
	BeingBuiltSound = BuildingBigConstructionLoop
  End 

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
  Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 4000
  End
  
  Behavior                  = StructureCollapseUpdate ModuleTag_06
    MinCollapseDelay        = 000
    MaxCollapseDelay        = 000
    CollapseDamping         = .5
    MaxShudder              = 0.6
    MinBurstDelay           = 250
    MaxBurstDelay           = 800
    BigBurstFrequency       = 4
    FXList                  = INITIAL   FX_StructureMediumCollapse

  End
 
  Geometry              = CYLINDER
  GeometryMajorRadius   = 16.0
  GeometryMinorRadius   = 16.0
  GeometryHeight        = 88.0
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
End

;------------------------------------------------------------------------------


Object MBCastleFloor

  ; *** ART Parameters ***
  Draw = W3DFloorDraw ModuleTag_01
    StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD
      ModelName = MBCastFloor
	  ForceToBack = Yes
  End

  ; *** AUDIO Parameters ***

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:MBCastFloor
  Side = Mordor
  EditorSorting = STRUCTURE
; Browser = CINEMATICS UNIT

  ArmorSet
    Conditions        = None
    Armor             = NoArmor
    DamageFX          = None
  End

  ; *** ENGINEERING Parameters ***  
  KindOf                = STRUCTURE IMMOBILE NO_COLLIDE UNATTACKABLE INERT 
  RadarPriority = NOT_ON_RADAR
  Body                  = ImmortalBody ModuleTag_03
    MaxHealth       = 2000.0
  End

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
  Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 1000
  End
  
  Geometry              = BOX
  GeometryMajorRadius   = 0.8
  GeometryMinorRadius   = 0.8
  GeometryHeight        = 0.8
  GeometryIsSmall       = Yes
  ;GeometryRotationAnchorOffset = X:1037.871 Y:0
  Shadow                = SHADOW_VOLUME
End

;------------------------------------------------------------------------------


Object MBCampFloor

  ; *** ART Parameters ***
  Draw = W3DFloorDraw ModuleTag_01
    StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD
      ModelName = MBCampFloor
	  ForceToBack = Yes
  End

  ; *** AUDIO Parameters ***

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:MBCampFloor
  Side = Mordor
  EditorSorting = STRUCTURE
; Browser = CINEMATICS UNIT

  ArmorSet
    Conditions        = None
    Armor             = NoArmor
    DamageFX          = None
  End

  ; *** ENGINEERING Parameters ***  
  KindOf                = STRUCTURE IMMOBILE NO_COLLIDE UNATTACKABLE INERT 
  RadarPriority = NOT_ON_RADAR
  Body                  = ImmortalBody ModuleTag_03
    MaxHealth       = 2000.0
  End

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
  Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 1000
  End
  
  Geometry              = BOX
  GeometryMajorRadius   = 0.8
  GeometryMinorRadius   = 0.8
  GeometryHeight        = 0.8
  GeometryIsSmall       = Yes
  ;GeometryRotationAnchorOffset = X:1037.871 Y:0
  Shadow                = SHADOW_VOLUME
End
;------------------------------------------------------------------------------------------

;Mordor Base Foundation -- the area where faction mordor bases can be built
Object MordorBaseFoundation
 
  SelectPortrait = BPMCamp
 
  ; *** ART Parameters ***

  Draw                = W3DScriptedModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    DefaultModelConditionState
      Model           = GBFarmF
    End
  End
  
  PlacementViewAngle  = 0

 
	; *** AUDIO Parameters ***

	VoiceSelect		= Gui_PlotSelect


  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:MordorBaseFoundation
  Side                = Mordor
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 0
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 161
 
  ; *** ENGINEERING Parameters ***
  RadarPriority       = STRUCTURE
  KindOf              = STRUCTURE SELECTABLE IMMOBILE BASE_FOUNDATION UNATTACKABLE MP_COUNT_FOR_VICTORY NO_COLLIDE DO_NOT_CLASSIFY
 
  Behavior            = FoundationAIUpdate ModuleTag_foundationAI
  End

  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  Body                = StructureBody ModuleTag_05
    MaxHealth         = 15000.0
  End
 
  Geometry              = BOX
  GeometryMajorRadius   = 51.2
  GeometryMinorRadius   = 49.6
  GeometryHeight        = 0.8
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER
End

;------------------------------------------------------------------------------

;Mordor Building Foundation -- the area where faction Mordor buildings can be built on
Object MordorBuildingFoundation
 
	SelectPortrait = BPMCamp_Plot
 
  ; *** ART Parameters ***

  
	Draw = W3DScriptedModelDraw ModuleTag_Draw2
	    DefaultModelConditionState
			Model = OBBFoundationX
		End
		ModelConditionState = WORLD_BUILDER
  			Model = MBSizeTemplate
  		End
		
	End
	
    Draw = W3DFloorDraw ModuleTag_Draw
		ModelName = MBFoundationX
  End

  ;PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:MordorBuildingFoundation
  Side                = Mordor
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 161

  CommandSet = MordorFoundationCommandSet


  ; *** AUDIO Parameters ***

  VoiceSelect = Gui_PlotSelect


  ; *** ENGINEERING Parameters ***
  RadarPriority       = STRUCTURE
  KindOf              = STRUCTURE SELECTABLE IMMOBILE BASE_FOUNDATION UNATTACKABLE MP_COUNT_FOR_VICTORY NO_COLLIDE DO_NOT_CLASSIFY
  Behavior            = FoundationAIUpdate ModuleTag_foundationAI
  End

  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  Body                = ImmortalBody ModuleTag_05
    MaxHealth         = 15000.0
  End
 
  Geometry              = BOX
  GeometryMajorRadius   = 24.0
  GeometryMinorRadius   = 24.0
  GeometryHeight        = 0.8
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  BuildCompletion		= PLACED_BY_PLAYER
End

;------------------------------------------------------------------------------

;MordorBase
Object MordorBase
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw                = W3DScriptedModelDraw ModuleTag_01

    ExtraPublicBone      = upgrade

    OkToChangeModelColor = Yes

    DefaultModelConditionState
      Model           = MUOrcBase
;     FXEvent = 1  FX_TrebuchetImpactHit ; sample of method to fire FXList at desired animation frames
;     FXEvent = 30 FX_TrebuchetImpactHit ; sample of method to fire FXList at desired animation frames
;     FXEvent = 50 FX_TrebuchetImpactHit ; sample of method to fire FXList at desired animation frames
    End
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:MordorBase
  Side                = Mordor
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 0
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 161
;  ArmorSet
;    Conditions        = None
;    Armor             = StructureArmor
;    DamageFX          = StructureDamageFXNoShake
;  End


; For Testing Purposes
  CommandSet = MordorBaseTestCommandSet

; *** AUDIO Parameters ***
;  VoiceSelect         = NuclearReactorSelect
;  SoundOnDamaged        = BuildingDamagedStateLight
;  SoundOnReallyDamaged  = BuildingDestroy
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 
  ; *** ENGINEERING Parameters ***
  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE NEED_BASE_FOUNDATION MP_COUNT_FOR_VICTORY
 
  Behavior            = GettingBuiltBehavior ModuleTag_04
    SelfBuildingLoop = BuildingConstructionLoop ; Only played if we DON'T spawn a worker
	SelfRepairFromDamageLoop  = NoSound         ; This doesn't cause an animation, so don't bother playing a sound
	SelfRepairFromRubbleLoop  = BuildingConstructionLoop
  End

  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  Behavior            = BaseUpgrade BaseUpgradeTag_01
    TriggeredBy       = Upgrade_TestBuilding
    BuildingTemplateName = MordorTent
    PlacementPrefix   = upgrade
    PlacementIndex    = 1
  End

  Behavior            = BaseUpgrade BaseUpgradeTag_02
    TriggeredBy       = Upgrade_TestBuilding_2
    BuildingTemplateName = MordorTent2
    PlacementPrefix   = upgrade
    PlacementIndex    = 5
  End

  Behavior = ProductionUpdate ProductionUpdateModuleTag
    ; nothing, but is required if we have any Object-level Upgrades!
  End

  Body                = StructureBody ModuleTag_05
    MaxHealth         = 1500.0
  End
 
  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End

;  Behavior           = CreateObjectDie ModuleTag_08
;    CreationList     = OCL_SmallStructureDebris
;  End
 
;  Behavior = ProductionUpdate ModuleTag_10
;    ; nothing, but is required if we have any Object-level Upgrades!
;  End
 
;  Behavior = FlammableUpdate ModuleTag_14
;    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
;    AflameDamageAmount = 5       ; taking this much damage...
;    AflameDamageDelay = 500       ; this often.
;  End
 
;  Behavior = TransitionDamageFX ModuleTag_15
;    ;-------------DESIGNED FOR SMALL SIZED FACTION BUILDING TRANSITIONS-------------------
;    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
;    ;---------------------------------------------------------------------------------------
;    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
;    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
;    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
;  End
 
;  Behavior             = FXListDie ModuleTag_16
;    DeathFX       = FX_BuildingDie
;  End
 
  Geometry              = BOX
  GeometryMajorRadius   = 45.6
  GeometryMinorRadius   = 37.6
  GeometryHeight        = 20.8
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER
End


;------------------------------------------------------------------------------
;Mordor Rhun Barracks
Object MordorBarracks

	SelectPortrait = BPMHaradrimPalace
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

;  Draw                = W3DModelDraw ModuleTag_01
;    OkToChangeModelColor = Yes
;
;    DefaultConditionState
;      Model           = RBBarracks
;;     FXEvent = 1  FX_TrebuchetImpactHit ; sample of method to fire FXList at desired animation frames
;;     FXEvent = 30 FX_TrebuchetImpactHit ; sample of method to fire FXList at desired animation frames
;;     FXEvent = 50 FX_TrebuchetImpactHit ; sample of method to fire FXList at desired animation frames
;    End
;  End


  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBBarracks
    End
  End

  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:MordorBarracks
  Description 	      = OBJECT:MordorHaradrimPalaceDescription
  Side                = Mordor
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 0
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 161

;  ArmorSet
;    Conditions        = None
;    Armor             = StructureArmor
;    DamageFX          = StructureDamageFXNoShake
;  End

  CommandSet = MordorRhunBarracksCommandSet
  BuildCost           = 500           ; BALANCE
  BuildTime           = 5.0           ; BALANCE


; *** AUDIO Parameters ***

	SoundOnDamaged		= BuildingLightDamageStone
	SoundOnReallyDamaged	= BuildingHeavyDamageStone

	VoiceSelectUnderConstruction	= BuildingEvilVoiceSelectUnderConstruction

	UnitSpecificSounds
		UnderConstruction		= BuildingConstructionLoop  ; Built first time
		; UnderRepairFromDamage	= NoSound					; Repaired No animation on the building, so don't bother playing sound
		UnderRepairFromRubble	= BuildingConstructionLoop	; Repaired from completely destroyed (not used???)
	End
 

  ; *** ENGINEERING Parameters ***

  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE NEED_BASE_FOUNDATION MP_COUNT_FOR_VICTORY AUTO_RALLYPOINT MADE_OF_WOOD FACE_AWAY_FROM_CASTLE_KEEP

  Behavior = ProductionUpdate ProductionUpdateModuleTag
    ; nothing, but is required if we have any Object-level Upgrades!
  End
 
  Behavior            = GettingBuiltBehavior ModuleTag_04
    SelfBuildingLoop = BuildingConstructionLoop ; Only played if we DON'T spawn a worker
	SelfRepairFromDamageLoop  = NoSound         ; This doesn't cause an animation, so don't bother playing a sound
	SelfRepairFromRubbleLoop  = BuildingConstructionLoop
  End

  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  Body                = StructureBody ModuleTag_05
    MaxHealth         = 1500.0
  End
 
  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End
  
  Behavior = QueueProductionExitUpdate ModuleTag_11
    UnitCreatePoint   = X:0.0 Y:-20.0 Z:0.0
    NaturalRallyPoint = X:28.8 Y:-20.0 Z:0.0;NaturalRallyPointX must always match GeometryMajorRadius! 
    ExitDelay = 300 ; Mainly for the multiply produced.  Make them come out one at a time.
  End  

;  Behavior           = CreateObjectDie ModuleTag_08
;    CreationList     = OCL_SmallStructureDebris
;  End
 
;  Behavior = ProductionUpdate ModuleTag_10
;    ; nothing, but is required if we have any Object-level Upgrades!
;  End
 
;  Behavior = FlammableUpdate ModuleTag_14
;    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
;    AflameDamageAmount = 5       ; taking this much damage...
;    AflameDamageDelay = 500       ; this often.
;  End
 
;  Behavior = TransitionDamageFX ModuleTag_15
;    ;-------------DESIGNED FOR SMALL SIZED FACTION BUILDING TRANSITIONS-------------------
;    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
;    ;---------------------------------------------------------------------------------------
;    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
;    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
;    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
;  End
 
;  Behavior             = FXListDie ModuleTag_16
;    DeathFX       = FX_BuildingDie
;  End
 
  Geometry              = BOX
  GeometryMajorRadius   = 35.6
  GeometryMinorRadius   = 37.6
  GeometryHeight        = 37.8
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER
End

;------------------------------------------------------------------------------

;Mordor Tent
Object MordorTent
 
  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
    OkToChangeModelColor = No
    DefaultModelConditionState
    Model = MUOrctent
  End
	
    ModelConditionState  = DAMAGED
      Model         = MUOrctent_D
      ParticleSysBone emberBone01 SmokeBuildingLarge
	
    End
    AnimationState = DAMAGED
	EnteringStateFX	= FX_BuildingDamaged
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = MUOrctent_D
      ParticleSysBone emberBone01 SmokeBuildingLarge
	
    End
    AnimationState = REALLYDAMAGED
	EnteringStateFX	= FX_BuildingReallyDamaged
    End	
    
    ModelConditionState  = RUBBLE
      Model         = MUOrctent_D  
      ParticleSysBone emberBone01 CatapultDestroyDebris
      ParticleSysBone emberBone02 SmokeBuildingLarge
      ParticleSysBone emberBone03 PCTMediumDust
    End
    AnimationState = RUBBLE
    End

  	ModelConditionState  = POST_RUBBLE
		Model         = None 
		ParticleSysBone NONE SmokeBuildingMediumRubble
	End
	ModelConditionState  = POST_COLLAPSE
		Model         = None 
		ParticleSysBone NONE SmokeBuildingMediumRubble
	End

  End

  ; *** AUDIO Parameters ***
  
  	SoundOnDamaged		= BuildingLightDamageStone
	SoundOnReallyDamaged	= BuildingHeavyDamageStone

  ; ***DESIGN parameters ***
  DisplayName = OBJECT:OrcTent
  EditorSorting = MISC_MAN_MADE

  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    DamageFX          = None
  End

  ; *** ENGINEERING Parameters ***  
  KindOf                = STRUCTURE SELECTABLE IMMOBILE MADE_OF_WOOD

  RadarPriority = STRUCTURE
  Body                  = ActiveBody ModuleTag_03
    MaxHealth       = 1000.0
  End

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
  Behavior = StructureCollapseUpdate ModuleTag_StructureCollapseUpdate 
  End

  Geometry = CYLINDER
  GeometryMajorRadius = 20.0
  GeometryMinorRadius = 20.0
  GeometryHeight = 4.8
  GeometryIsSmall = No
  Shadow = SHADOW_VOLUME
End

;------------------------------------------------------------------------------

;Mordor Tent 2
Object MordorTent2
 
  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
    OkToChangeModelColor = No
    DefaultModelConditionState
    Model = MUOrctent2
  End
	
    ModelConditionState  = DAMAGED
      Model         = MUOrctent2_D
      ParticleSysBone emberBone01 SmokeBuildingLarge
	
    End
    AnimationState = DAMAGED
	EnteringStateFX	= FX_BuildingDamaged
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = MUOrctent2_D
      ParticleSysBone emberBone01 SmokeBuildingLarge
	
    End
    AnimationState = REALLYDAMAGED
	EnteringStateFX	= FX_BuildingReallyDamaged
    End	
    
    ModelConditionState  = RUBBLE
      Model         = MUOrctent2_D  
      ParticleSysBone emberBone01 CatapultDestroyDebris
      ParticleSysBone emberBone02 SmokeBuildingLarge
      ParticleSysBone emberBone03 PCTMediumDust
    End
    AnimationState = RUBBLE
    End

  	ModelConditionState  = POST_RUBBLE
		Model         = None 
		ParticleSysBone NONE SmokeBuildingMediumRubble
	End
	ModelConditionState  = POST_COLLAPSE
		Model         = None 
		ParticleSysBone NONE SmokeBuildingMediumRubble
	End

  End

  ; *** AUDIO Parameters ***
	SoundOnDamaged		= BuildingLightDamageStone
	SoundOnReallyDamaged	= BuildingHeavyDamageStone
	
  ; ***DESIGN parameters ***
  DisplayName = OBJECT:OrcTent
  EditorSorting = MISC_MAN_MADE

  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    DamageFX          = None
  End

  ; *** ENGINEERING Parameters ***  
  KindOf                = STRUCTURE SELECTABLE IMMOBILE MADE_OF_WOOD
  RadarPriority = STRUCTURE
  Body                  = ActiveBody ModuleTag_03
    MaxHealth       = 1000.0
  End

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
  Behavior = StructureCollapseUpdate ModuleTag_StructureCollapseUpdate 
  End

  Geometry = CYLINDER
  GeometryMajorRadius = 60.0
  GeometryMinorRadius = 47.2
  GeometryHeight = 44.8
  GeometryIsSmall = No
  Shadow = SHADOW_VOLUME
End
;------------------------------------------------------------------------------

Object MordorBase_DEMO

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
  OkToChangeModelColor = Yes
  
    DefaultModelConditionState
      Model = MBBlkGate
    End
    
  End
  
  CommandSet = MordorBaseCommandSet
  BuildCost           = 500           ; BALANCE
  BuildTime           = 5.0           ; BALANCE

  ; *** AUDIO Parameters ***
  ; SoundAmbient = MordorBaseAmbientLoop

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:MordorBase
  Side = Mordor
  EditorSorting   = STRUCTURE
  ThreatLevel = 1.0
  ArmorSet
    Conditions        = None
    Armor             = NoArmor
    DamageFX          = None
  End

  ; *** ENGINEERING Parameters ***  
  KindOf                = STRUCTURE SELECTABLE IMMOBILE MADE_OF_WOOD
  RadarPriority = STRUCTURE

  Body                  = ActiveBody ModuleTag_02
    MaxHealth       = 2000.0
  End

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
  Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 2100
  End

  Behavior = OCLSpecialPower ModuleTag_03
    SpecialPowerTemplate = SuperweaponRainOfFire
    OCL                  = SUPERWEAPON_RainOfFire
  End

  RemoveTerrainRadius = 105.0 ; Remove terrain around this structure for subterranean cracks effect. 
  
  Geometry              = BOX
  GeometryMajorRadius   = 8.0
  GeometryMinorRadius   = 8.0
  GeometryHeight        = 8.0
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
End

;------------------------------------------------------------------------------
;Mordor OrcPit, Orc Pit
Object MordorOrcPit

	SelectPortrait = BPMOrcPit
 
  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
	StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD  
    DefaultModelConditionState
      Model = MBOrcpit_SKN
    End

    IdleAnimationState
		StateName					=   STATE_Idle
		Flags = MAINTAIN_FRAME_ACROSS_STATES
		Animation = IdleA
			AnimationName			=	MBOrcpit_SKL.MBOrcpit_STRA
			AnimationMode		=	ONCE 
		End
		Flags               = RESTART_ANIM_WHEN_COMPLETE 

		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "BeingConstructed" then 	
			    ; Don't play completed sound when canceling build-in-progress or when
			    ; destroyed halfway
			    if not CurDrawableModelcondition( "DYING" ) then 
					CurDrawablePlaySound("CampOrcCompleteOrcPit")
				end
			end
		EndScript
	End
	

    ;------------ New Build Up States coming soon. 
    ModelConditionState   = AWAITING_CONSTRUCTION 
      Model               = MBOrcpit_A
;		ParticleSysBone	  = NONE BuildingDoughnutCloud
    End;
    AnimationState        = AWAITING_CONSTRUCTION
      Animation           =  MBOrcpit_A
        AnimationName     =  MBOrcpit_ASKL.MBOrcpit_ABLD
        AnimationMode     = MANUAL
        AnimationBlendTime = 0
      End
	  Flags				  = START_FRAME_FIRST
	  BeginScript
	  ;	CurDrawablePlaySound("GondorBarracksBeginConstruction")
	  EndScript
    End

    ModelConditionState   = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
      Model               = MBOrcpit_A
		ParticleSysBone   = CONSTDUSTBONE01 BuildingContructDust FollowBone:Yes
    End;
    
    AnimationState        = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
		Animation           = MBOrcpit_A
			AnimationName     = MBOrcpit_ASKL.MBOrcpit_ABLD
			AnimationMode     = MANUAL
			AnimationBlendTime = 0
		End
		Flags				  = START_FRAME_FIRST
		StateName			  = BeingConstructed
		BeginScript
			CurDrawablePlaySound("GondorBarracksBeginConstruction")
		EndScript
    End
        
        ;--damaged building
      ModelConditionState  = DESTROYED_FRONT
      Model         = MBOrcpit_D2  
      	ParticleSysBone FireSmall01 FireBuildingLarge
		ParticleSysBone FireSmall02 FireBuildingLarge
		ParticleSysBone FireSmall03 FireBuildingMedium
		ParticleSysBone FireSmall04 SmokeBuildingLarge
		ParticleSysBone FireSmall05 FireBuildingLarge 
    End
    AnimationState = DESTROYED_FRONT
      BeginScript
        CurDrawableHideSubObject("D2A")
      EndScript
    End
    
        ModelConditionState  = DESTROYED_RIGHT
      Model         = MBOrcpit_D2  
      	ParticleSysBone FireSmall01 FireBuildingLarge
		ParticleSysBone FireSmall02 FireBuildingLarge
		ParticleSysBone FireSmall03 FireBuildingMedium
		ParticleSysBone FireSmall04 SmokeBuildingLarge
		ParticleSysBone FireSmall05 FireBuildingLarge 
    End

    AnimationState = DESTROYED_RIGHT
      BeginScript
        CurDrawableHideSubObject("D2B")
      EndScript
    End
    

    ModelConditionState  = DESTROYED_BACK
      Model         = MBOrcpit_D2  
      	ParticleSysBone FireSmall01 FireBuildingLarge
		ParticleSysBone FireSmall02 FireBuildingLarge
		ParticleSysBone FireSmall03 FireBuildingMedium
		ParticleSysBone FireSmall04 SmokeBuildingLarge
		ParticleSysBone FireSmall05 FireBuildingLarge 
    End

    AnimationState = DESTROYED_BACK
      BeginScript
        CurDrawableHideSubObject("D2C")
      EndScript
    End

	ModelConditionState  = DESTROYED_LEFT
      Model         = MBOrcpit_D2  
      	ParticleSysBone FireSmall01 FireBuildingLarge
		ParticleSysBone FireSmall02 FireBuildingLarge
		ParticleSysBone FireSmall03 FireBuildingMedium
		ParticleSysBone FireSmall04 SmokeBuildingLarge
		ParticleSysBone FireSmall05 FireBuildingLarge 
    End
    
    AnimationState = DESTROYED_LEFT
      BeginScript
        CurDrawableHideSubObject("D2D")
      EndScript
    End
    
    
    ModelConditionState  = DAMAGED
      Model         = MBOrcpit_D1
        ParticleSysBone FireSmall01 FireBuildingLarge
		ParticleSysBone FireSmall02 FireBuildingMedium
		ParticleSysBone FireSmall03 FireBuildingMedium
		ParticleSysBone FireSmall04 SmokeBuildingLarge
		ParticleSysBone FireSmall05 FireBuildingMedium  
    End
    AnimationState = DAMAGED
		EnteringStateFX	= FX_BuildingDamaged
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = MBOrcpit_D2  
      	ParticleSysBone FireSmall01 FireBuildingLarge
		ParticleSysBone FireSmall02 FireBuildingLarge
		ParticleSysBone FireSmall03 FireBuildingMedium
		ParticleSysBone FireSmall04 SmokeBuildingLarge
		ParticleSysBone FireSmall05 FireBuildingLarge  
    End
    AnimationState = REALLYDAMAGED
		EnteringStateFX	= FX_BuildingReallyDamaged
    End

    ModelConditionState  = RUBBLE
      Model         = MBOrcpit_D2  
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End
    
    AnimationState = RUBBLE
      BeginScript
        CurDrawableHideSubObject("D2A")
        CurDrawableHideSubObject("D2B")
        CurDrawableHideSubObject("D2C")
        CurDrawableHideSubObject("D2D")
      EndScript
    End

    ModelConditionState  = POST_RUBBLE
		Model         = None
		ParticleSysBone NONE SmokeBuildingMediumRubble
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
		ParticleSysBone NONE SmokeBuildingMediumRubble
    End
    
    
	;------------Door 	 
   AnimationState		  = DOOR_1_WAITING_OPEN
   		Animation			= POKA
			AnimationName	= MBOrcpit_SKL.MBOrcpit_POKA
			AnimationMode   = LOOP
		End 
   End
	
	;------------- With Call of Horde anim, idle but faster.
    AnimationState = UPGRADE_ECONOMY_BONUS
		StateName	=	STATE_Idle
		Flags = MAINTAIN_FRAME_ACROSS_STATES
		Animation = IdleA
			AnimationName				= MBOrcpit_SKL.MBOrcpit_STRA
			AnimationMode				= LOOP 
			AnimationBlendTime			= 0
			AnimationSpeedFactorRange	= 1.7 2.0
		End
	End
	
  End

	Draw = W3DFloorDraw DrawFloorV1    
		StaticModelLODMode = Yes		; THIS NEEDS TO BE COMMENTED OUT WHEN ENGINEERING ENABLES LOD'S IN THE FLOOR DRAW 
		ModelName = MBOrcpit_Bib
	End
	Draw = W3DFloorDraw DrawFloorV2    
		ModelName = MBOrcpit_V1
		StartHidden = Yes
	End
 
	; Dedicated draw module just for the horde effects.
	;
	Draw = W3DScriptedModelDraw TheHordeEffects
	    DefaultModelConditionState
	      Model = None
	    End
		AnimationState = UPGRADE_ECONOMY_BONUS
			ParticleSysBone = None CalltheHordeSteam
			ParticleSysBone	= None CalltheHordeCast
		End
	End
  
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:MordorOrcPit
  Description 	      = OBJECT:MordorOrcPitDescription
  Side                = Mordor
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
  
  PlacementViewAngle  = 90
 
  BuildCost           = MORDOR_ORCPIT_BUILDCOST            ; BALANCE
  BuildTime           = MORDOR_ORCPIT_BUILDTIME
  VisionRange         = MORDOR_ORCPIT_VISION_RANGE
  ShroudClearingRange = MORDOR_ORCPIT_SHROUD_CLEAR
  BountyValue         = MORDOR_ORCPIT_BOUNTY_VALUE

  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    ;DamageFX          = StructureDamageFXNoShake
  End

  CommandSet          = MordorOrcPitCommandSet


; *** AUDIO Parameters ***

	VoiceSelect		= MordorOrcPitSelect
	SoundAmbient		= MordorOrcPitAmbience
	SoundOnDamaged		= BuildingLightDamageStone
	SoundOnReallyDamaged	= BuildingHeavyDamageStone

	VoiceSelectUnderConstruction	= BuildingEvilVoiceSelectUnderConstruction

	UnitSpecificSounds
		UnderConstruction		= BuildingConstructionLoop  ; Built first time
		; UnderRepairFromDamage	= NoSound					; Repaired No animation on the building, so don't bother playing sound
		UnderRepairFromRubble	= BuildingConstructionLoop	; Repaired from completely destroyed (not used???)
	End

 
	; *** ENGINEERING Parameters ***

	RadarPriority       = STRUCTURE
	KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE NEED_BASE_FOUNDATION MP_COUNT_FOR_VICTORY AUTO_RALLYPOINT FS_FACTORY MADE_OF_DIRT FACE_AWAY_FROM_CASTLE_KEEP

	Behavior = ProductionUpdate ProductionUpdateModuleTag
		NumDoorAnimations            = 1
		DoorOpeningTime              = 0  ;in mSeconds how long you want doors to be in open state
		DoorWaitOpenTime             = 1000 ;in mSeconds time the door stays open, so units can exit
		DoorCloseTime                = 0  ;in mSeconds how long you want doors to be in open state
		ConstructionCompleteDuration = 250 ;in mSeconds   wait time so if you have multiple units they don't run over each other
		VeteranUnitsFromVeteranFactory = No ;I am higher than my default level, I will give a free level to those I produce
		
		SetBonusModelConditionOnSpeedBonus = Yes ; set the UPGRADE_ECONOMY_BONUS if there is any production bonus
		BonusForType				 = MordorFighterHorde
		SpeedBonusAudioLoop		 = CallTheHordeOrcPitLoop; Sound to play while bonus is active
	End
 
	Behavior            = GettingBuiltBehavior GetBuiltBehaviorTag
		WorkerName		  = MordorWorkerNoSelect
	End
  
   	Behavior = SubObjectsUpgrade ModuleTag_HideAll
		TriggeredBy		= Upgrade_StructureLevel1
		ShowSubObjects	= DrawFloorV1
		HideSubObjects	= V1 V1A V1B V1C V1D V2 DrawFloorV2
	End
  	Behavior = SubObjectsUpgrade ModuleTag_ShowWalls 
		TriggeredBy		= Upgrade_StructureLevel2
		ShowSubObjects	= V1 V1A V1B V1C V1D	DrawFloorV2
		HideSubObjects	= V2 bib V1HIDE00 V1HIDE01 V1HIDE02 DrawFloorV1
	End
	Behavior = SubObjectsUpgrade ModuleTag_ShowFlagsAndTower 
		TriggeredBy		= Upgrade_StructureLevel3
		ShowSubObjects	= V1 V1A V1B V1C V1D V2 DrawFloorV2
		HideSubObjects	= bib V1HIDE00 V1HIDE01 V1HIDE02 DrawFloorV1
	End

	Behavior                  = StructureCollapseUpdate ModuleTag_StructureCollapseUpdate 
		MinCollapseDelay        = 000
		MaxCollapseDelay        = 000
		CollapseDamping         = .5
		MaxShudder              = 0.6
		MinBurstDelay           = 250
		MaxBurstDelay           = 800
		BigBurstFrequency       = 4
		FXList                  = INITIAL   FX_StructureMediumCollapse
		FXList                  = ALMOST_FINAL  FX_StructureAlmostCollapse
		DestroyObjectWhenDone	= Yes
		CollapseHeight			= 89
	End



  Behavior = CastleMemberBehavior ModuleTag_CMB
  End   


  Body						= ActiveBody ModuleTag_05
    MaxHealth				      = MORDOR_ORCPIT_HEALTH
    MaxHealthDamaged		  = MORDOR_ORCPIT_HEALTH_DAMAGED
	  MaxHealthReallyDamaged	= MORDOR_ORCPIT_HEALTH_REALLY_DAMAGED
    DamageCreationList		= OCL_BuildingDamageList01 CATAPULT_ROCK
  
    DamageCreationList		= OCL_MBOrcPit_Chunk1 CATAPULT_ROCK FRONT_DESTROYED
    DamageCreationList		= OCL_MBOrcPit_Chunk2 CATAPULT_ROCK RIGHT_DESTROYED
    DamageCreationList		= OCL_MBOrcPit_Chunk3 CATAPULT_ROCK BACK_DESTROYED
    DamageCreationList		= OCL_MBOrcPit_Chunk4 CATAPULT_ROCK LEFT_DESTROYED
    
  End
 
  
  Behavior = QueueProductionExitUpdate ModuleTag_11
    UnitCreatePoint   = X:0.0 Y:-20.0 Z:0.0
    NaturalRallyPoint = X:28.8 Y:-80.0 Z:0.0;NaturalRallyPointX must always match GeometryMajorRadius!
    ExitDelay = 300 ; Mainly for the multiply produced. Make them come out one at a time.
  End  
   
	
  Geometry              = CYLINDER
  GeometryMajorRadius   = 50.6
  GeometryMinorRadius   = 37.6
  GeometryHeight        = 20.8
  GeometryOffset		= X:-10 Y:-5 Z:0
  
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER
  
  GeometryContactPoint	= X:-40.188		Y:41.694	Z:0			Repair
  GeometryContactPoint	= X:35.037		Y:-26.085	Z:0			Repair
  GeometryContactPoint	= X:40.629		Y:32.691	Z:0
  GeometryContactPoint	= X:-56.679		Y:-3.451	Z:0
  GeometryContactPoint	= X:27.139		Y:11.062	Z:32.902	Swoop

End

;------------------------------------------------------------------------------
;Mordor Orc Fletcher
Object MordorOrcFletcher
 
  ; *** ART Parameters ***

;  Draw                = W3DModelDraw ModuleTag_01
;    OkToChangeModelColor = Yes
;
;    DefaultConditionState
;      Model           = RBBarracks
;;     FXEvent = 1  FX_TrebuchetImpactHit ; sample of method to fire FXList at desired animation frames
;;     FXEvent = 30 FX_TrebuchetImpactHit ; sample of method to fire FXList at desired animation frames
;;     FXEvent = 50 FX_TrebuchetImpactHit ; sample of method to fire FXList at desired animation frames
;    End
;  End


  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBBarracks
    End
  End

  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:MordorOrcFletcher
  Side                = Mordor
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 0
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 161

;  ArmorSet
;    Conditions        = None
;    Armor             = StructureArmor
;    DamageFX          = StructureDamageFXNoShake
;  End

 CommandSet = MordorOrcFletcherCommandSet
  BuildCost           = 500           ; BALANCE
  BuildTime           = 5.0           ; BALANCE


; *** AUDIO Parameters ***

	SoundOnDamaged		= BuildingLightDamageStone
	SoundOnReallyDamaged	= BuildingHeavyDamageStone

 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End

 
  ; *** ENGINEERING Parameters ***

  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE NEED_BASE_FOUNDATION MADE_OF_WOOD

  Behavior = ProductionUpdate ProductionUpdateModuleTag
    ; nothing, but is required if we have any Object-level Upgrades!
  End
 
  Behavior            = GettingBuiltBehavior GetBuiltBehaviorTag
    WorkerName		  = MordorWorkerNoSelect
  End

  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  Body                = StructureBody ModuleTag_05
    MaxHealth         = 1500.0
  End
 
  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End
  
  Behavior = QueueProductionExitUpdate ModuleTag_11
    UnitCreatePoint   = X:0.0 Y:-20.0 Z:0.0
    NaturalRallyPoint = X:28.8 Y:-20.0 Z:0.0;NaturalRallyPointX must always match GeometryMajorRadius!
    ExitDelay = 300 ; Mainly for the multiple produced. Make them come out one at a time.
  End  

;  Behavior           = CreateObjectDie ModuleTag_08
;    CreationList     = OCL_SmallStructureDebris
;  End
 
;  Behavior = ProductionUpdate ModuleTag_10
;    ; nothing, but is required if we have any Object-level Upgrades!
;  End
 
;  Behavior = FlammableUpdate ModuleTag_14
;    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
;    AflameDamageAmount = 5       ; taking this much damage...
;    AflameDamageDelay = 500       ; this often.
;  End
 
;  Behavior = TransitionDamageFX ModuleTag_15
;    ;-------------DESIGNED FOR SMALL SIZED FACTION BUILDING TRANSITIONS-------------------
;    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
;    ;---------------------------------------------------------------------------------------
;    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
;    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
;    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
;  End
 
;  Behavior             = FXListDie ModuleTag_16
;    DeathFX       = FX_BuildingDie
;  End
 
  Geometry              = BOX
  GeometryMajorRadius   = 35.6
  GeometryMinorRadius   = 37.6
  GeometryHeight        = 37.8
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER
End

;------------------------------------------------------------------------------
;Mordor Troll Cages
Object MordorTrollCage

	SelectPortrait = BPMTrollCages
 
  ; *** ART Parameters ***

  Draw = W3DScriptedModelDraw ModuleTag_Draw
		OkToChangeModelColor  = Yes
		UseStandardModelNames = Yes
		StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD  
		DefaultModelConditionState
			Model = MBTrollPit_SKN
		End
    
	
    IdleAnimationState
		StateName					=   STATE_Idle
		Animation = IdleA
			AnimationName			=	MBTrollPit_SKL.MBTrollPit_IDLA
			AnimationMode			=	ONCE 
		End
		Animation = IdleB
			AnimationName			=	MBTrollPit_SKL.MBTrollPit_IDLB
			AnimationMode			=	ONCE 
		End
		Animation = IdleD
			AnimationName			=	MBTrollPit_SKL.MBTrollPit_IDLD
			AnimationMode			=	ONCE 
		End

		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "BeingConstructed" then 
			    ; Don't play completed sound when canceling build-in-progress or when
			    ; destroyed halfway
			    if not CurDrawableModelcondition( "DYING" ) then 
					CurDrawablePlaySound("CampOrcCompleteTrollCages")
				end
			end
		EndScript

	End


    ;------------ New Build Up States coming soon. 
    ModelConditionState   = AWAITING_CONSTRUCTION 
      Model               = MBTrollPit_A
;		ParticleSysBone	  = NONE BuildingDoughnutCloud
    End;
    AnimationState        = AWAITING_CONSTRUCTION
      Animation           =  MBTrollPit_A
        AnimationName     =  MBTrollPit_ASKL.MBTrollPit_ABLD
        AnimationMode     = MANUAL
        AnimationBlendTime = 0
      End
	  Flags				  = START_FRAME_FIRST
	  ;BeginScript
	  ;	CurDrawablePlaySound("GondorBarracksBeginConstruction")
	  ;EndScript
    End

    ModelConditionState   = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
      Model               = MBTrollPit_A
		ParticleSysBone   = CONSTDUSTBONE01 BuildingContructDust FollowBone:Yes
    End
    AnimationState        = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
		Animation           = MBTrollPit_A
			AnimationName     = MBTrollPit_ASKL.MBTrollPit_ABLD
			AnimationMode     = MANUAL
			AnimationBlendTime = 0
		End
		Flags				  = START_FRAME_FIRST
		StateName			  = BeingConstructed
		BeginScript
			CurDrawablePlaySound("GondorBarracksBeginConstruction")
		EndScript
    End
    
    
        ;--damaged building
      ModelConditionState  = DESTROYED_FRONT
      Model         = MBTrollPit_D2  
      	ParticleSysBone FireSmall01 FireBuildingLarge
		ParticleSysBone FireSmall02 FireBuildingLarge
		ParticleSysBone FireSmall03 SmokeBuildingLarge
		ParticleSysBone FireSmall04 FireBuildingMedium
		ParticleSysBone FireSmall05 FireBuildingLarge 
    End
    AnimationState = DESTROYED_FRONT
      BeginScript
        CurDrawableHideSubObject("D2A")
      EndScript
    End
    
        ModelConditionState  = DESTROYED_RIGHT
      Model         = MBTrollPit_D2
      	ParticleSysBone FireSmall01 FireBuildingLarge
		ParticleSysBone FireSmall02 FireBuildingLarge
		ParticleSysBone FireSmall03 SmokeBuildingLarge
		ParticleSysBone FireSmall04 FireBuildingMedium
		ParticleSysBone FireSmall05 FireBuildingLarge 
    End

    AnimationState = DESTROYED_RIGHT
      BeginScript
        CurDrawableHideSubObject("D2B")
      EndScript
    End
    

    ModelConditionState  = DESTROYED_BACK
      Model         = MBTrollPit_D2
      	ParticleSysBone FireSmall01 FireBuildingLarge
		ParticleSysBone FireSmall02 FireBuildingLarge
		ParticleSysBone FireSmall03 SmokeBuildingLarge
		ParticleSysBone FireSmall04 FireBuildingMedium
		ParticleSysBone FireSmall05 FireBuildingLarge 
    End

    AnimationState = DESTROYED_BACK
      BeginScript
        CurDrawableHideSubObject("D2C")
      EndScript
    End

	ModelConditionState  = DESTROYED_LEFT
      Model         = MBTrollPit_D2
      	ParticleSysBone FireSmall01 FireBuildingLarge
		ParticleSysBone FireSmall02 FireBuildingLarge
		ParticleSysBone FireSmall03 SmokeBuildingLarge
		ParticleSysBone FireSmall04 FireBuildingMedium
		ParticleSysBone FireSmall05 FireBuildingLarge 
    End
    
    AnimationState = DESTROYED_LEFT
      BeginScript
        CurDrawableHideSubObject("D2D")
      EndScript
    End
    
    
    ModelConditionState  = DAMAGED
      Model         = MBTrollPit_D1  
      	ParticleSysBone FireSmall01 FireBuildingLarge
		ParticleSysBone FireSmall02 FireBuildingMedium
		ParticleSysBone FireSmall03 SmokeBuildingLarge
		ParticleSysBone FireSmall04 FireBuildingMedium
		ParticleSysBone FireSmall05 FireBuildingMedium 
    End
    AnimationState = DAMAGED
	EnteringStateFX	= FX_BuildingDamaged
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = MBTrollPit_D2  
      	ParticleSysBone FireSmall01 FireBuildingLarge
		ParticleSysBone FireSmall02 FireBuildingLarge
		ParticleSysBone FireSmall03 SmokeBuildingLarge
		ParticleSysBone FireSmall04 FireBuildingMedium
		ParticleSysBone FireSmall05 FireBuildingLarge 
    End
    AnimationState = REALLYDAMAGED
	EnteringStateFX	= FX_BuildingReallyDamaged
    End

    ModelConditionState  = RUBBLE
      Model         = MBTrollPit_D2  
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End
    
    AnimationState = RUBBLE
      BeginScript
        CurDrawableHideSubObject("D2A")
        CurDrawableHideSubObject("D2B")
        CurDrawableHideSubObject("D2C")
        CurDrawableHideSubObject("D2D")
      EndScript
    End

    ModelConditionState  = POST_RUBBLE
		Model         = None
		ParticleSysBone NONE SmokeBuildingMediumRubble
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
		ParticleSysBone NONE SmokeBuildingMediumRubble
    End
    
	
  End
  
 
  ;----------the door
 Draw = W3DScriptedModelDraw ModuleTag_02
     
    DefaultModelConditionState
      Model = MBTrollPit_DSCL
    End
     
    IdleAnimationState
		Animation			=	MBTrollPit_DSCL
			AnimationName	=	MBTrollPit_DSCL.MBTrollPit_DSCL
			AnimationMode   =	ONCE
			AnimationBlendTime = 0
		End
		Flags				=	START_FRAME_FIRST
    End
    
    ModelConditionState   = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
      Model               = MBTrollPit_DrA
    End
    
    AnimationState        = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
		Animation           =MBTrollPit_DrA
			AnimationName     = MBTrollPit_DrA.MBTrollPit_DrA
			AnimationMode     = MANUAL
		End
		Flags				  = START_FRAME_FIRST
    End
     
   ;--normal states
    ModelConditionState   = DOOR_1_OPENING
      Model               = MBTrollPit_DOP
    End
    
	AnimationState			=	DOOR_1_OPENING
		Animation           =	MBTrollPit_DOP
			AnimationName   =	MBTrollPit_DOP.MBTrollPit_DOP
			AnimationMode   =	ONCE	
			AnimationBlendTime = 0
		End
	;	Flags				=	START_FRAME_FIRST
   End 
   
   
   ModelConditionState   = DOOR_1_CLOSING
      Model               = MBTrollPit_DCL
		ParticleSysBone	  = NONE trollCageDust
    End;  
   
   	AnimationState			=	DOOR_1_CLOSING
		Animation           =	MBTrollPit_DCL
			AnimationName   =	MBTrollPit_DCL.MBTrollPit_DCL
			AnimationMode   =	ONCE
			AnimationBlendTime = 0
		End
	;	Flags				=	START_FRAME_FIRST
   End   
   
   
    ModelConditionState   = DOOR_1_WAITING_OPEN
      Model               = MBTrollPit_DSOP
		;ParticleSysBone	  = NONE BuildingDoughnutCloud
    End  
    
   AnimationState			=	DOOR_1_WAITING_OPEN
		Animation           =	MBTrollPit_DSOP
			AnimationName   =   MBTrollPit_DSOP.MBTrollPit_DSOP
			AnimationMode   =	ONCE
			AnimationBlendTime = 0
		End
	;	Flags				=	START_FRAME_FIRST
   End   

    ModelConditionState  = POST_RUBBLE
		Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
    End
  
 End

  ;----------the fade in of the troll & orc
 Draw = W3DScriptedModelDraw DrawModuleTag_03
     
	HighDetailOnly = Yes ; will not show up in medium or low detail... this is because there are no trainer and trolls in the lower detail settings.
     
    DefaultModelConditionState
      Model = None
    End
     
    ModelConditionState   = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
      Model               = MBTrollPit_AFDE
    End
    
    AnimationState        = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
		Animation           = fade
			AnimationName     = MBTrollPit_AFDE.MBTrollPit_AFDE
			AnimationMode     = MANUAL
			FadeBeginFrame    = 90.0
			FadeEndFrame	  = 100.0
			FadingIn		  = Yes
		End
		Flags				  = START_FRAME_FIRST
	End     
 End
 
	Draw = W3DFloorDraw DrawFloorV1    
		StaticModelLODMode = Yes		; THIS NEEDS TO BE COMMENTED OUT WHEN ENGINEERING ENABLES LOD'S IN THE FLOOR DRAW
		ModelName = MBTROLLPIT_Bib
	End
	Draw = W3DFloorDraw DrawFloorV2    
		ModelName = MBTrollPit_V1
		StartHidden = Yes
	End
  
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:MordorTrollCage
  Description 	      = OBJECT:MordorTrollCageDescription
  Side                = Mordor
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
  
  PlacementViewAngle  = 90
 
  BuildCost           = MORDOR_TROLLCAGE_BUILDCOST
  BuildTime           = MORDOR_TROLLCAGE_BUILDTIME
  VisionRange         = MORDOR_TROLLCAGE_VISION_RANGE
  ShroudClearingRange = MORDOR_TROLLCAGE_SHROUD_CLEAR
  BountyValue         = MORDOR_TROLLCAGE_BOUNTY_VALUE

  CommandSet = MordorTrollCageCommandSet

  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    ;DamageFX          = StructureDamageFXNoShake
  End


  ; *** AUDIO Parameters ***

	VoiceSelect		= MordorTrollCageSelect

	SoundOnDamaged		= BuildingLightDamageStone
	SoundOnReallyDamaged	= BuildingHeavyDamageStone

	VoiceSelectUnderConstruction	= BuildingEvilVoiceSelectUnderConstruction

	UnitSpecificSounds
		UnderConstruction		= BuildingConstructionLoop  ; Built first time
		; UnderRepairFromDamage	= NoSound					; Repaired No animation on the building, so don't bother playing sound
		UnderRepairFromRubble	= BuildingConstructionLoop	; Repaired from completely destroyed (not used???)
	End


  ; *** ENGINEERING Parameters ***

  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE NEED_BASE_FOUNDATION MP_COUNT_FOR_VICTORY AUTO_RALLYPOINT FS_FACTORY MADE_OF_WOOD FACE_AWAY_FROM_CASTLE_KEEP

 
  Behavior            = GettingBuiltBehavior GetBuiltBehaviorTag
    WorkerName		  = MordorWorkerNoSelect
  End

  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  Body						= ActiveBody ModuleTag_05
    MaxHealth				        = MORDOR_TROLLCAGE_HEALTH
    MaxHealthDamaged		    = MORDOR_TROLLCAGE_HEALTH_DAMAGED
	  MaxHealthReallyDamaged	= MORDOR_TROLLCAGE_HEALTH_REALLY_DAMAGED
    DamageCreationList		= OCL_BuildingDamageList01 CATAPULT_ROCK
  
    DamageCreationList		= OCL_MBTrollPit_Chunk1 CATAPULT_ROCK FRONT_DESTROYED
    DamageCreationList		= OCL_MBTrollPit_Chunk2 CATAPULT_ROCK RIGHT_DESTROYED
    DamageCreationList		= OCL_MBTrollPit_Chunk3 CATAPULT_ROCK BACK_DESTROYED
    DamageCreationList		= OCL_MBTrollPit_Chunk4 CATAPULT_ROCK LEFT_DESTROYED
  End
 
  
  Behavior = ProductionUpdate ProductionUpdateModuleTag
	NumDoorAnimations            = 1
    DoorOpeningTime              = 3250  ;in mSeconds how long you want doors to be in open state
    DoorWaitOpenTime             =2000  ;in mSeconds time the door stays open, so units can exit
    DoorCloseTime                = 4000  ;in mSeconds how long you want doors to be in open state
    ConstructionCompleteDuration = 1500  ;in mSeconds   wait time so if you have multiple units they don't run over each other
    ;;;;;;;;;UnitPreparationTime			 = 4333		; time of the unit build animation
	;;;;;;;;;; 4-1/3 second prep needs to be set in THingTemplate, for Both trolls, now
  End
 
  Behavior = QueueProductionExitUpdate ModuleTag_11
    PlacementViewAngle = -90
    UnitCreatePoint   = X:34.0 Y:-45.0 Z:0.0
    NaturalRallyPoint = X:34.0 Y:-93.0 Z:0.0	;NaturalRallyPointX must always match GeometryMajorRadius! 
;    UnitCreatePoint   = X:47.172 Y:-25.763 Z:0.0
;    NaturalRallyPoint = X:48.8 Y:-91.0 Z:0.0	;NaturalRallyPointX must always match GeometryMajorRadius! 
  End  
  
    Behavior = SubObjectsUpgrade ModuleTag_HideAll
		TriggeredBy		= Upgrade_StructureLevel1
		ShowSubObjects	= DrawFloorV1
		HideSubObjects	= V1 DrawFloorV2 V2
	End
  	Behavior = SubObjectsUpgrade ModuleTag_ShowWalls 
		TriggeredBy		= Upgrade_StructureLevel2
		ShowSubObjects	= V1 DrawFloorV2
		HideSubObjects	= Bib DrawFloorV1 V2
	End
	Behavior = SubObjectsUpgrade ModuleTag_ShowFlagsAndTower 
		TriggeredBy		= Upgrade_StructureLevel3
		ShowSubObjects	= V1 DrawFloorV2 V2
		HideSubObjects	= Bib DrawFloorV1
	End

  Behavior                  = StructureCollapseUpdate ModuleTag_StructureCollapseUpdate 
    MinCollapseDelay        = 000
    MaxCollapseDelay        = 000
    CollapseDamping         = .5
    MaxShudder              = 0.6
    MinBurstDelay           = 250
    MaxBurstDelay           = 800
    BigBurstFrequency       = 4
    FXList                  = INITIAL   FX_StructureMediumCollapse
    FXList                  = ALMOST_FINAL  FX_StructureAlmostCollapse
	DestroyObjectWhenDone	= Yes
	CollapseHeight			= 89
  End

  ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		MaxUpdateRangeCap = 800
		AnimationSound = Sound: MordorTrollCageTrollVox Animation:MBTrollPit_SKL.MBTrollPit_IDLB Frames: 83 
		AnimationSound = Sound: MordorTrollCageBuildUpWoodscrape Animation:MBTrollPit_A.MBTrollPit_A Frames: 290 
		AnimationSound = Sound: MordorTrollCageChains Animation:MBTrollPit_SKL.MBTrollPit_IDLB Frames: 124 197 222 247 
		AnimationSound = Sound: MordorTrollCageTrollBreath Animation:MBTrollPit_SKL.MBTrollPit_IDLB Frames: 140 
		AnimationSound = Sound: MordorTrollCageOrcVox Animation:MBTrollPit_SKL.MBTrollPit_IDLB Frames: 11 
		AnimationSound = Sound: MordorTrollCageGateOpen Animation:MBTrollPit_DOP.MBTrollPit_DOP Frames: 1 
		AnimationSound = Sound: MordorTrollCageBuildUpGateSqueak Animation:MBTrollPit_A.MBTrollPit_A Frames: 961 
		AnimationSound = Sound: MordorTrollCageBuildUpCageUp Animation:MBTrollPit_A.MBTrollPit_A Frames: 746 
		AnimationSound = Sound: MordorTrollCageBuildUpBed Animation:MBTrollPit_A.MBTrollPit_A Frames: 10 
		AnimationSound = Sound: MordorTrollCageBuildUpMetalBand Animation:MBTrollPit_A.MBTrollPit_A Frames: 613 
		AnimationSound = Sound: MordorTrollCageGateClose Animation:MBTrollPit_DCL.MBTrollPit_DCL Frames: 1 
		AnimationSound = Sound: MordorTrollCageBuildUpGateClose Animation:MBTrollPit_A.MBTrollPit_A Frames: 996 
  End

  Geometry              = BOX
  GeometryMajorRadius   = 30.0
  GeometryMinorRadius   = 30.0
  GeometryHeight        = 42.4
  GeometryOffset		= X:34.6 Y:10.4 Z:0
  
  AdditionalGeometry    = CYLINDER
  GeometryMajorRadius   = 42.0
  GeometryMinorRadius   = 0
  GeometryHeight        = 42.4
  GeometryOffset		= X:-18.6 Y:-3.0 Z:0
  
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER
End

;------------------------------------------------------------------------------
;Mordor Siege Works, GreatSiegeWorks
Object MordorSiegeWorks

	SelectPortrait = BPMGreatSiegeWorks
 
  ; *** ART Parameters ***
  
  Draw = W3DScriptedModelDraw ModuleTag_Draw01
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
	StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD  
    DefaultModelConditionState
		Model = MBSeigeWork
		ParticleSysBone     =  BN_FIRE002 GrondFire FollowBone:Yes
		ParticleSysBone     =  BN_FIRE003 GrondFire FollowBone:Yes    
	   ;ParticleSysBone     =  E_GRFlame8 GrondFire FollowBone:Yes
	   ;ParticleSysBone     =  E_GRFlame9 GrondFire FollowBone:Yes 
		ParticleSysBone     =  BN_FIRE002 siegeWorkFireGlow1 FollowBone:Yes
	    ParticleSysBone     =  BN_FIRE003 siegeWorkFireGlow1 FollowBone:Yes   
    End
    
	IdleAnimationState
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "BeingConstructed" then 
			    ; Don't play completed sound when canceling build-in-progress or when
			    ; destroyed halfway
			    if not CurDrawableModelcondition( "DYING" ) then 
					CurDrawablePlaySound("CampOrcCompleteGreatSiegeWorks")
				end
			end
		EndScript
	End
      
    ;------------Build Up States
    ModelConditionState   = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
      Model               = MBSeigeWork_A
		ParticleSysBone   = CONSTDUSTBONE01 BuildingContructDust FollowBone:Yes
    End
    
    AnimationState        = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
		Animation           =MBSeigeWork_A
			AnimationName     = MBSeigeWork_ASK.MBSeigeWork_ABL
			AnimationMode     = MANUAL
		End
		Flags			= START_FRAME_FIRST
		StateName		= BeingConstructed
		BeginScript
			CurDrawablePlaySound("GondorBarracksBeginConstruction")
		EndScript
    End
    
    
    ;---------Damaged States
    ModelConditionState		= DESTROYED_FRONT
      Model					= MBSeigeWork_D2
      	ParticleSysBone FireSmall01 FireBuildingMedium
		ParticleSysBone FireSmall02 FireBuildingMedium
		ParticleSysBone FireSmall03 FireBuildingLarge
		ParticleSysBone FireSmall04 SmokeBuildingLarge
		ParticleSysBone FireSmall05 FireBuildingLarge
    End
    AnimationState			= DESTROYED_FRONT
      BeginScript
        CurDrawableHideSubObject("SeigeWorkDP1")
        CurDrawableHideSubObject("SeigeWorkDP1A")
      EndScript
    End
    
    ModelConditionState		= DESTROYED_RIGHT
      Model					= MBSeigeWork_D2
      	ParticleSysBone FireSmall01 FireBuildingMedium
		ParticleSysBone FireSmall02 FireBuildingMedium
		ParticleSysBone FireSmall03 FireBuildingLarge
		ParticleSysBone FireSmall04 SmokeBuildingLarge
		ParticleSysBone FireSmall05 FireBuildingLarge
    End

    AnimationState			= DESTROYED_RIGHT
      BeginScript
        CurDrawableHideSubObject("SeigeWorkDP2")
        CurDrawableHideSubObject("SeigeWorkDP2A")
      EndScript
    End

    ModelConditionState		= DESTROYED_BACK
      Model					= MBSeigeWork_D2
      	ParticleSysBone FireSmall01 FireBuildingMedium
		ParticleSysBone FireSmall02 FireBuildingMedium
		ParticleSysBone FireSmall03 FireBuildingLarge
		ParticleSysBone FireSmall04 SmokeBuildingLarge
		ParticleSysBone FireSmall05 FireBuildingLarge
    End

    AnimationState = DESTROYED_BACK
      BeginScript
        CurDrawableHideSubObject("SeigeWorkDP3")
        CurDrawableHideSubObject("SeigeWorkDP3A")
      EndScript
    End

	ModelConditionState  = DESTROYED_LEFT
      Model         = MBSeigeWork_D2
		ParticleSysBone FireSmall01 FireBuildingMedium
		ParticleSysBone FireSmall02 FireBuildingMedium
		ParticleSysBone FireSmall03 FireBuildingLarge
		ParticleSysBone FireSmall04 SmokeBuildingLarge
		ParticleSysBone FireSmall05 FireBuildingLarge
    End
    
    AnimationState = DESTROYED_LEFT
      BeginScript
        CurDrawableHideSubObject("SeigeWorkDP4")
        CurDrawableHideSubObject("SeigeWorkDP4A")
      EndScript
    End
    
    
    ModelConditionState  = DAMAGED
      Model         = MBSeigeWork_D1 
		ParticleSysBone FireSmall01 FireBuildingMedium
		ParticleSysBone FireSmall02 FireBuildingMedium
		ParticleSysBone FireSmall03 FireBuildingLarge
		ParticleSysBone FireSmall04 FireBuildingMedium
		ParticleSysBone FireSmall05 SmokeBuildingMedium
    End
    AnimationState = DAMAGED
     EnteringStateFX	= FX_BuildingDamaged
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = MBSeigeWork_D2 
		ParticleSysBone FireSmall01 FireBuildingMedium
		ParticleSysBone FireSmall02 FireBuildingMedium
		ParticleSysBone FireSmall03 FireBuildingLarge
		ParticleSysBone FireSmall04 SmokeBuildingLarge
		ParticleSysBone FireSmall05 FireBuildingLarge
    End

    AnimationState = REALLYDAMAGED
	EnteringStateFX	= FX_BuildingReallyDamaged
    End

    ModelConditionState  = RUBBLE
      Model         = MBSeigeWork_D2 
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End
    
    AnimationState = RUBBLE
      BeginScript
        CurDrawableHideSubObject("SeigeWorkDP1")
        CurDrawableHideSubObject("SeigeWorkDP1A")
        CurDrawableHideSubObject("SeigeWorkDP2")
        CurDrawableHideSubObject("SeigeWorkDP2A")
        CurDrawableHideSubObject("SeigeWorkDP3")
        CurDrawableHideSubObject("SeigeWorkDP3A")
        CurDrawableHideSubObject("SeigeWorkDP4")
        CurDrawableHideSubObject("SeigeWorkDP4A")
      EndScript
    End

    ModelConditionState  = POST_RUBBLE
      Model         = None
		ParticleSysBone NONE SmokeBuildingMediumRubble
    End
    
    AnimationState = POST_RUBBLE
    End

    ModelConditionState  = POST_COLLAPSE
      Model         = None
		ParticleSysBone NONE SmokeBuildingMediumRubble
    End
    AnimationState = POST_COLLAPSE
    End
    

 End
 
 ;----------the door
 Draw = W3DScriptedModelDraw ModuleTag_02
     
    DefaultModelConditionState
      Model = MBSeigeWorkDSCL
    End
     
    IdleAnimationState
		Animation			=	MBSeigeWorkDOOR
			AnimationName	=	MBSeigeWorkDSCL.MBSeigeWorkDSCL
			AnimationMode   =	ONCE
			AnimationBlendTime = 0
		End
		Flags				=	START_FRAME_FIRST
    End
    
    ModelConditionState   = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
      Model               = MBSeigeW_DrA
    End
    
    AnimationState        = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
		Animation           =MBSeigeW_DrA
			AnimationName     = MBSeigeW_DrA.MBSeigeW_DrA
			AnimationMode     = MANUAL
		End
		Flags				  = START_FRAME_FIRST
    End
    
    
    ;---------------------damaged states
    ;--front
    ModelConditionState   = DESTROYED_FRONT DOOR_1_OPENING
      Model               = MBSeigeW_DROAD
;		ParticleSysBone	  = NONE BuildingDoughnutCloud
    End
    
	AnimationState			=	DESTROYED_FRONT DOOR_1_OPENING
		Animation           =	MBSeigeW_DROAD
			AnimationName   =	MBSeigeW_DROAD.MBSeigeW_DROAD
			AnimationMode   =	ONCE	
			AnimationBlendTime = 0
		End
	;	Flags				=	START_FRAME_FIRST
   End 
   
   
   ModelConditionState   =  DESTROYED_FRONT DOOR_1_CLOSING
      Model               = MBSeigeW_DRCAD
;		ParticleSysBone	  = NONE BuildingDoughnutCloud
    End;  
   
   	AnimationState			=	DESTROYED_FRONT DOOR_1_CLOSING
		Animation           =	MBSeigeW_DRCAD
			AnimationName   =	MBSeigeW_DRCAD.MBSeigeW_DRCAD
			AnimationMode   =	ONCE
			AnimationBlendTime = 0
		End
	;	Flags				=	START_FRAME_FIRST
   End   
   
   
    ModelConditionState   = DESTROYED_FRONT DOOR_1_WAITING_OPEN
      Model               = MBSeigeW_DROD
;		ParticleSysBone	  = NONE BuildingDoughnutCloud
    End  
    
   AnimationState			=DESTROYED_FRONT DOOR_1_WAITING_OPEN
   End   
   
   ModelConditionState   = DESTROYED_FRONT
      Model               = MBSeigeW_DRCD
;		ParticleSysBone	  = NONE BuildingDoughnutCloud
    End  
    
   AnimationState		=	DESTROYED_FRONT
   End  
    
    ;--BACK
    ModelConditionState   = DESTROYED_BACK DOOR_1_OPENING
      Model               = MBSeigeW_DROAD
;		ParticleSysBone	  = NONE BuildingDoughnutCloud
    End
    
	AnimationState			=	DESTROYED_BACK DOOR_1_OPENING
		Animation           =	MBSeigeW_DROAD
			AnimationName   =	MBSeigeW_DROAD.MBSeigeW_DROAD
			AnimationMode   =	ONCE	
			AnimationBlendTime = 0
		End
	;	Flags				=	START_FRAME_FIRST
   End 
   
   
   ModelConditionState   =  DESTROYED_BACK DOOR_1_CLOSING
      Model               = MBSeigeW_DRCAD
;		ParticleSysBone	  = NONE BuildingDoughnutCloud
    End;  
   
   	AnimationState			=	DESTROYED_BACK DOOR_1_CLOSING
		Animation           =	MBSeigeW_DRCAD
			AnimationName   =	MBSeigeW_DRCAD.MBSeigeW_DRCAD
			AnimationMode   =	ONCE
			AnimationBlendTime = 0
		End
	;	Flags				=	START_FRAME_FIRST
   End   
   
   
    ModelConditionState   = DESTROYED_BACK DOOR_1_WAITING_OPEN
      Model               = MBSeigeW_DROD
;		ParticleSysBone	  = NONE BuildingDoughnutCloud
    End  
    
   AnimationState			=DESTROYED_BACK DOOR_1_WAITING_OPEN
   End   
   
   ModelConditionState   = DESTROYED_BACK
      Model               = MBSeigeW_DRCD
;		ParticleSysBone	  = NONE BuildingDoughnutCloud
    End  
    
   AnimationState		=	DESTROYED_BACK
   End   

    ;--RIGHT
    ModelConditionState   = DESTROYED_RIGHT DOOR_1_OPENING
      Model               = MBSeigeW_DROAD
;		ParticleSysBone	  = NONE BuildingDoughnutCloud
    End
    
	AnimationState			=	DESTROYED_RIGHT DOOR_1_OPENING
		Animation           =	MBSeigeW_DROAD
			AnimationName   =	MBSeigeW_DROAD.MBSeigeW_DROAD
			AnimationMode   =	ONCE	
			AnimationBlendTime = 0
		End
	;	Flags				=	START_FRAME_FIRST
   End 
   
   
   ModelConditionState   =  DESTROYED_RIGHT DOOR_1_CLOSING
      Model               = MBSeigeW_DRCAD
;		ParticleSysBone	  = NONE BuildingDoughnutCloud
    End;  
   
   	AnimationState			=	DESTROYED_RIGHT DOOR_1_CLOSING
		Animation           =	MBSeigeW_DRCAD
			AnimationName   =	MBSeigeW_DRCAD.MBSeigeW_DRCAD
			AnimationMode   =	ONCE
			AnimationBlendTime = 0
		End
	;	Flags				=	START_FRAME_FIRST
   End   
   
   
    ModelConditionState   = DESTROYED_RIGHT DOOR_1_WAITING_OPEN
      Model               = MBSeigeW_DROD
;		ParticleSysBone	  = NONE BuildingDoughnutCloud
    End  
    
   AnimationState			=DESTROYED_RIGHT DOOR_1_WAITING_OPEN
   End   
   
   ModelConditionState   = DESTROYED_RIGHT
      Model               = MBSeigeW_DRCD
;		ParticleSysBone	  = NONE BuildingDoughnutCloud
    End  
    
   AnimationState		=	DESTROYED_RIGHT
   End   
    
    ;--LEFT
    ModelConditionState   = DESTROYED_LEFT DOOR_1_OPENING
      Model               = MBSeigeW_DROAD
;		ParticleSysBone	  = NONE BuildingDoughnutCloud
    End
    
	AnimationState			=	DESTROYED_LEFT DOOR_1_OPENING
		Animation           =	MBSeigeW_DROAD
			AnimationName   =	MBSeigeW_DROAD.MBSeigeW_DROAD
			AnimationMode   =	ONCE	
			AnimationBlendTime = 0
		End
	;	Flags				=	START_FRAME_FIRST
   End 
   
   
   ModelConditionState   =  DESTROYED_LEFT DOOR_1_CLOSING
      Model               = MBSeigeW_DRCAD
;		ParticleSysBone	  = NONE BuildingDoughnutCloud
    End;  
   
   	AnimationState			=	DESTROYED_LEFT DOOR_1_CLOSING
		Animation           =	MBSeigeW_DRCAD
			AnimationName   =	MBSeigeW_DRCAD.MBSeigeW_DRCAD
			AnimationMode   =	ONCE
			AnimationBlendTime = 0
		End
	;	Flags				=	START_FRAME_FIRST
   End   
   
   
    ModelConditionState   = DESTROYED_LEFT DOOR_1_WAITING_OPEN
      Model               = MBSeigeW_DROD
;		ParticleSysBone	  = NONE BuildingDoughnutCloud
    End  
    
   AnimationState			=DESTROYED_LEFT DOOR_1_WAITING_OPEN
   End   
   
   ModelConditionState   = DESTROYED_LEFT
      Model               = MBSeigeW_DRCD
;		ParticleSysBone	  = NONE BuildingDoughnutCloud
    End  
    
   AnimationState		=	DESTROYED_LEFT
   End   
   
     ;--DAMAGED
    ModelConditionState   =DAMAGED DOOR_1_OPENING
      Model               = MBSeigeW_DROAD
;		ParticleSysBone	  = NONE BuildingDoughnutCloud
    End
    
	AnimationState			=	DAMAGED DOOR_1_OPENING
		Animation           =	MBSeigeW_DROAD
			AnimationName   =	MBSeigeW_DROAD.MBSeigeW_DROAD
			AnimationMode   =	ONCE	
			AnimationBlendTime = 0
		End
	;	Flags				=	START_FRAME_FIRST
   End 
   
   
   ModelConditionState   =  DAMAGED DOOR_1_CLOSING
      Model               = MBSeigeW_DRCAD
;		ParticleSysBone	  = NONE BuildingDoughnutCloud
    End;  
   
   	AnimationState			=	DAMAGED DOOR_1_CLOSING
		Animation           =	MBSeigeW_DRCAD
			AnimationName   =	MBSeigeW_DRCAD.MBSeigeW_DRCAD
			AnimationMode   =	ONCE
			AnimationBlendTime = 0
		End
	;	Flags				=	START_FRAME_FIRST
   End   
   
   
    ModelConditionState   = DAMAGED DOOR_1_WAITING_OPEN
      Model               = MBSeigeW_DROD
	
    End  
    
   AnimationState			=DAMAGED DOOR_1_WAITING_OPEN
   End   
   
   ModelConditionState   = DAMAGED
      Model               = MBSeigeW_DRCD
	
    End  
    
   AnimationState		=	DAMAGED
   End   
    
    
   ;--normal states
    ModelConditionState   = DOOR_1_OPENING
      Model               = MBSeigeWorkDOP
;		ParticleSysBone	  = NONE BuildingDoughnutCloud
    End
    
	AnimationState			=	DOOR_1_OPENING
		Animation           =	MBSeigeWorkDOP
			AnimationName   =	MBSeigeWorkDOP.MBSeigeWorkDOP
			AnimationMode   =	ONCE	
			AnimationBlendTime = 0
		End
	;	Flags				=	START_FRAME_FIRST
   End 
   
   
   ModelConditionState   = DOOR_1_CLOSING
      Model               = MBSeigeWorkDCL
;		ParticleSysBone	  = NONE BuildingDoughnutCloud
    End;  
   
   	AnimationState			=	DOOR_1_CLOSING
		Animation           =	MBSeigeWorkDCL
			AnimationName   =	MBSeigeWorkDCL.MBSeigeWorkDCL
			AnimationMode   =	ONCE
			AnimationBlendTime = 0
		End
	;	Flags				=	START_FRAME_FIRST
   End   
   
   
    ModelConditionState   = DOOR_1_WAITING_OPEN
      Model               = MBSeigeWorkDSOP
;		ParticleSysBone	  = NONE BuildingDoughnutCloud
    End  
    
   AnimationState			=	DOOR_1_WAITING_OPEN
		Animation           =	MBSeigeWorkDSOP
			AnimationName   =   MBSeigeWorkDSOP.MBSeigeWorkDSOP
			AnimationMode   =	ONCE
			AnimationBlendTime = 0
		End
	;	Flags				=	START_FRAME_FIRST
   End   

    ModelConditionState  = RUBBLE
      Model         = MBSeigeW_DRCD
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End
    
    AnimationState = RUBBLE
      BeginScript
        CurDrawableHideSubObject("MBSeigeWork_D2A")
        CurDrawableHideSubObject("MBSeigeWork_D2B")
        CurDrawableHideSubObject("MBSeigeWork_D2C")
        CurDrawableHideSubObject("MBSeigeWork_D2D")
      EndScript
    End

    ModelConditionState  = POST_RUBBLE
      Model         = None
		ParticleSysBone NONE SmokeBuildingMediumRubble
    End
    
    AnimationState = POST_RUBBLE
    End

    ModelConditionState  = POST_COLLAPSE
      Model         = None
		ParticleSysBone NONE SmokeBuildingMediumRubble
    End
    AnimationState = POST_COLLAPSE
    End
End


	Draw = W3DFloorDraw DrawFloorV1    
		StaticModelLODMode = Yes		; THIS NEEDS TO BE COMMENTED OUT WHEN ENGINEERING ENABLES LOD'S IN THE FLOOR DRAW
		ModelName = MBSeigeWorkBib
	End
	Draw = W3DFloorDraw DrawFloorV2    
		ModelName = MBSeigeWork_V1
		StartHidden = Yes
	End
  
    
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:MordorSiegeWorks
  Description 	      = OBJECT:MordorGreatSiegeWorksDescription
  Side                = Mordor
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = MORDOR_SIEGEWORKS_BUILDCOST           ; BALANCE
  BuildTime           = MORDOR_SIEGEWORKS_BUILDTIME
  VisionRange         = MORDOR_SIEGEWORKS_VISION_RANGE
  ShroudClearingRange = MORDOR_SIEGEWORKS_SHROUD_CLEAR

  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    ;DamageFX          = StructureDamageFXNoShake
  End


  CommandSet = MordorSiegeWorksCommandSet


  ; *** AUDIO Parameters ***
	
	VoiceSelect			= MordorSiegeworksSelect

	SoundOnDamaged		= BuildingLightDamageStone
	SoundOnReallyDamaged	= BuildingHeavyDamageStone

	VoiceSelectUnderConstruction	= BuildingEvilVoiceSelectUnderConstruction

	UnitSpecificSounds
		UnderConstruction		= BuildingConstructionLoop  ; Built first time
		; UnderRepairFromDamage	= NoSound					; Repaired No animation on the building, so don't bother playing sound
		UnderRepairFromRubble	= BuildingConstructionLoop	; Repaired from completely destroyed (not used???)
	End

	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		MaxUpdateRangeCap = 800
		AnimationSound = Sound:MordorSiegeworksGateOpenStart	Animation:MBSeigeW_DROAD.MBSeigeW_DROAD	 	Frames:0
		AnimationSound = Sound:MordorSiegeworksGateOpenEnd	Animation:MBSeigeW_DROAD.MBSeigeW_DROAD	 	Frames:50
		AnimationSound = Sound:MordorSiegeworksGateCloseStart	Animation:MBSeigeW_DRCAD.MBSeigeW_DRCAD	 	Frames:0
		AnimationSound = Sound:MordorSiegeworksGateCloseEnd	Animation:MBSeigeW_DRCAD.MBSeigeW_DRCAD	 	Frames:50

		AnimationSound = Sound:MordorSiegeworksGateOpenStart	Animation:MBSeigeWorkDOP.MBSeigeWorkDOP	 	Frames:0
		AnimationSound = Sound:MordorSiegeworksGateOpenEnd	Animation:MBSeigeWorkDOP.MBSeigeWorkDOP	 	Frames:50
		AnimationSound = Sound:MordorSiegeworksGateCloseStart	Animation:MBSeigeWorkDCL.MBSeigeWorkDCL	 	Frames:0
		AnimationSound = Sound:MordorSiegeworksGateCloseEnd	Animation:MBSeigeWorkDCL.MBSeigeWorkDCL	 	Frames:50

		;AnimationSound = Sound:MordorSiegeworksOrcVox 		Animation:MBSeigeWork_SKL.MBSeigeWork_RDY 	Frames:306 
		;AnimationSound = Sound:MordorSiegeworksOrcHit 		Animation:MBSeigeWork_SKL.MBSeigeWork_RDY 	Frames:298 
		;AnimationSound = Sound:MordorSiegeworksHorn 		Animation:MBSeigeWork_SKL.MBSeigeWork_RDY 	Frames:155 
		;AnimationSound = Sound:MordorSiegeworksCrank1 		Animation:MBSeigeWork_SKL.MBSeigeWork_RDY 	Frames:14 
		;AnimationSound = Sound:MordorSiegeworksCrank2 		Animation:MBSeigeWork_SKL.MBSeigeWork_RDY 	Frames:370 
	End


  ; *** ENGINEERING Parameters ***

  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE NEED_BASE_FOUNDATION FS_FACTORY AUTO_RALLYPOINT  MADE_OF_DIRT FACE_AWAY_FROM_CASTLE_KEEP

  Body                = StructureBody ModuleTag_05
    MaxHealth         		= MORDOR_SIEGEWORKS_HEALTH
    MaxHealthDamaged  		= MORDOR_SIEGEWORKS_HEALTH_DAMAGED
	MaxHealthReallyDamaged	= MORDOR_SIEGEWORKS_HEALTH_REALLY_DAMAGED
    DamageCreationList = OCL_BuildingDamageList01 CATAPULT_ROCK
    
    DamageCreationList = OCL_MBSeigeWork_D2_Chunk1 CATAPULT_ROCK FRONT_DESTROYED
    DamageCreationList = OCL_MBSeigeWork_D2_Chunk2 CATAPULT_ROCK RIGHT_DESTROYED
    DamageCreationList = OCL_MBSeigeWork_D2_Chunk3 CATAPULT_ROCK BACK_DESTROYED
    DamageCreationList = OCL_MBSeigeWork_D2_Chunk4 CATAPULT_ROCK LEFT_DESTROYED
    
    
  End

  Behavior = ProductionUpdate ProductionUpdateModuleTag
	NumDoorAnimations            = 1
    DoorOpeningTime              = 3250  ;in mSeconds how long you want doors to be in open state
    DoorWaitOpenTime             =13000  ;in mSeconds time the door stays open, so units can exit
    DoorCloseTime                = 4000  ;in mSeconds how long you want doors to be in open state
    ConstructionCompleteDuration = 1500  ;in mSeconds   wait time so if you have multiple units they don't run over each other
    ;;;;;;;;;;UnitPreparationTime = 16000		; time of the unit build animation
    ;;;;;;;;;; 16 second prep needs to be set in THingTemplate, for catapult, now (others?)
  End

  Behavior            = GettingBuiltBehavior GetBuiltBehaviorTag
    WorkerName		  = MordorWorkerNoSelect
  End
 
   Behavior = CastleMemberBehavior ModuleTag_CMB
  End 
  
  Behavior = QueueProductionExitUpdate ModuleTag_11
  ;  UnitCreatePoint   = X:  -48.0  Y:  0.0   Z:0.0
    UnitCreatePoint   = X:120.0 Y:0.0 Z:0.0
    NaturalRallyPoint = X:120.0 Y:0.0 Z:0.0;NaturalRallyPointX must always match GeometryMajorRadius!
	PlacementViewAngle  = 0
  End  

    Behavior = SubObjectsUpgrade ModuleTag_HideAll
		TriggeredBy		= Upgrade_StructureLevel1
		ShowSubObjects	= Bib DrawFloorV1
		HideSubObjects	= V1 DrawFloorV2 V2
	End
  	Behavior = SubObjectsUpgrade ModuleTag_ShowWalls 
		TriggeredBy		= Upgrade_StructureLevel2
		ShowSubObjects	= V1 DrawFloorV2
		HideSubObjects	= Bib DrawFloorV1 V2
	End
	Behavior = SubObjectsUpgrade ModuleTag_ShowFlagsAndTower 
		TriggeredBy		= Upgrade_StructureLevel3
		ShowSubObjects	= V1 DrawFloorV2 V2
		HideSubObjects	= Bib DrawFloorV1
	End

  Behavior                  = StructureCollapseUpdate ModuleTag_08
    MinCollapseDelay        = 000
    MaxCollapseDelay        = 000
    CollapseDamping         = .5
    MaxShudder              = 0.6
    MinBurstDelay           = 250
    MaxBurstDelay           = 800
    BigBurstFrequency       = 4
    FXList                  = INITIAL   FX_StructureMediumCollapse
    FXList                  = ALMOST_FINAL  FX_StructureAlmostCollapse
	DestroyObjectWhenDone	= Yes
	CollapseHeight			= 89
  End

 

  Geometry              = BOX
  GeometryMajorRadius   = 44.6
  GeometryMinorRadius   = 52.2
  GeometryHeight        = 56.0
  GeometryOffset        = X:-20 Y:0 Z:0
  
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER
  
  GeometryContactPoint	= X:-56.099		Y:50.814	Z:0			Repair
  GeometryContactPoint	= X:12.909		Y:-49.638	Z:0			Repair
  GeometryContactPoint	= X:12.909		Y:50.814	Z:0
  GeometryContactPoint	= X:-72.411		Y:-35.958	Z:0
  GeometryContactPoint	= X:-20.358		Y:-41.324	Z:51.338	Swoop

End

;------------------------------------------------------------------------------
;Mordor Haradrim Palace
Object MordorHaradrimPalace

	SelectPortrait = BPMHaradrimPalace
 
  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
	StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD  
		DefaultModelConditionState
			Model = MBHrdPlc_SKN
		End
    
    IdleAnimationState
		StateName					=   STATE_Idle
		Animation = IdleA
			AnimationName			=	MBHrdPlc_SKL.MBHrdPlc_IDLA
			AnimationMode		=	ONCE 
		End
		Animation = IdleB
			AnimationName			=	MBHrdPlc_SKL.MBHrdPlc_IDLB
			AnimationMode		=	ONCE 
		End
		Animation = IdleC
			AnimationName			=	MBHrdPlc_SKL.MBHrdPlc_IDLC
			AnimationMode		=	ONCE 
		End
		Flags               = RESTART_ANIM_WHEN_COMPLETE 

		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "BeingConstructed" then 
			    ; Don't play completed sound when canceling build-in-progress or when
			    ; destroyed halfway
			    if not CurDrawableModelcondition( "DYING" ) then 
					CurDrawablePlaySound("CampOrcCompleteHaradrimPalace")
				end
			end
		EndScript
	End
	
    ;------------ New Build Up States coming soon. 
    ModelConditionState   = AWAITING_CONSTRUCTION 
      Model               = MBHrdPlc_A
;		ParticleSysBone	  = NONE BuildingDoughnutCloud
    End;
    AnimationState        = AWAITING_CONSTRUCTION
      Animation           =  MBHrdPlc_A
        AnimationName     =  MBHrdPlc_ASKL.MBHrdPlc_ABLD
        AnimationMode     = MANUAL
        AnimationBlendTime = 0
      End
	  Flags				  = START_FRAME_FIRST
	  ;BeginScript
	  ;	CurDrawablePlaySound("GondorBarracksBeginConstruction")
	  ;EndScript
    End

    ModelConditionState   = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
      Model               = MBHrdPlc_A
		ParticleSysBone   = CONSTDUSTBONE01 BuildingContructDust FollowBone:Yes
    End
    AnimationState        = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
		Animation           = MBHrdPlc_A
			AnimationName     = MBHrdPlc_ASKL.MBHrdPlc_ABLD
			AnimationMode     = MANUAL
			AnimationBlendTime = 0
		End
		Flags				  = START_FRAME_FIRST
		StateName			  = BeingConstructed
		BeginScript
			CurDrawablePlaySound("GondorBarracksBeginConstruction")
		EndScript
    End
    
    
        ;--damaged building
      ModelConditionState  = DESTROYED_FRONT
      Model         = MBHrdPlc_D2  
		ParticleSysBone FireSmall01 FireBuildingMedium
		ParticleSysBone FireSmall02 FireBuildingMedium
		ParticleSysBone FireSmall03 FireBuildingLarge
		ParticleSysBone FireSmall04 SmokeBuildingLarge
		ParticleSysBone FireSmall05 FireBuildingLarge
    End
    AnimationState = DESTROYED_FRONT
      BeginScript
        CurDrawableHideSubObject("D2A")
      EndScript
    End
    
        ModelConditionState  = DESTROYED_RIGHT
      Model         = MBHrdPlc_D2
		ParticleSysBone FireSmall01 FireBuildingMedium
		ParticleSysBone FireSmall02 FireBuildingMedium
		ParticleSysBone FireSmall03 FireBuildingLarge
		ParticleSysBone FireSmall04 SmokeBuildingLarge
		ParticleSysBone FireSmall05 FireBuildingLarge
    End

    AnimationState = DESTROYED_RIGHT
      BeginScript
        CurDrawableHideSubObject("D2B")
      EndScript
    End
    

    ModelConditionState  = DESTROYED_BACK
      Model         = MBHrdPlc_D2
		ParticleSysBone FireSmall01 FireBuildingMedium
		ParticleSysBone FireSmall02 FireBuildingMedium
		ParticleSysBone FireSmall03 FireBuildingLarge
		ParticleSysBone FireSmall04 SmokeBuildingLarge
		ParticleSysBone FireSmall05 FireBuildingLarge
    End

    AnimationState = DESTROYED_BACK
      BeginScript
        CurDrawableHideSubObject("D2C")
      EndScript
    End

	ModelConditionState  = DESTROYED_LEFT
      Model         = MBHrdPlc_D2
		ParticleSysBone FireSmall01 FireBuildingMedium
		ParticleSysBone FireSmall02 FireBuildingMedium
		ParticleSysBone FireSmall03 FireBuildingLarge
		ParticleSysBone FireSmall04 SmokeBuildingLarge
		ParticleSysBone FireSmall05 FireBuildingLarge
    End
    
    AnimationState = DESTROYED_LEFT
      BeginScript
        CurDrawableHideSubObject("D2D")
      EndScript
    End
    
    
    ModelConditionState  = DAMAGED
      Model         = MBHrdPlc_D1 
	 	ParticleSysBone FireSmall01 FireBuildingMedium
		ParticleSysBone FireSmall02 FireBuildingMedium
		ParticleSysBone FireSmall03 FireBuildingLarge
		ParticleSysBone FireSmall04 SmokeBuildingMedium
		ParticleSysBone FireSmall05 SmokeBuildingMedium
    End
    AnimationState = DAMAGED
     EnteringStateFX	= FX_BuildingDamaged
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = MBHrdPlc_D2  
		ParticleSysBone FireSmall01 FireBuildingMedium
		ParticleSysBone FireSmall02 FireBuildingMedium
		ParticleSysBone FireSmall03 FireBuildingLarge
		ParticleSysBone FireSmall04 SmokeBuildingLarge
		ParticleSysBone FireSmall05 FireBuildingLarge
	
    End
    AnimationState = REALLYDAMAGED
	EnteringStateFX	= FX_BuildingDamaged
    End

    ModelConditionState  = RUBBLE
      Model         = MBHrdPlc_D2  
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End
    
    AnimationState = RUBBLE
      BeginScript
        CurDrawableHideSubObject("D2A")
        CurDrawableHideSubObject("D2B")
        CurDrawableHideSubObject("D2C")
        CurDrawableHideSubObject("D2D")
      EndScript
    End

    ModelConditionState  = POST_RUBBLE
		Model         = None
		ParticleSysBone NONE SmokeBuildingMediumRubble
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
		ParticleSysBone NONE SmokeBuildingMediumRubble
    End
    
  End
  
	Draw = W3DFloorDraw DrawFloorV1    
		StaticModelLODMode = Yes		; THIS NEEDS TO BE COMMENTED OUT WHEN ENGINEERING ENABLES LOD'S IN THE FLOOR DRAW
		ModelName = MBHrdPlc_Bib
	End
	Draw = W3DFloorDraw DrawFloorV2    
		ModelName = MBHrdPlc_V1
		StartHidden = Yes
	End
  
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:MordorHaradrimPalace
  Description 	      = OBJECT:MordorHaradrimPalaceDescription
  Side                = Mordor
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = MORDOR_HARADRIMPALACE_BUILDCOST
  BuildTime           = MORDOR_HARADRIMPALACE_BUILDTIME
  VisionRange         = MORDOR_HARADRIMPALACE_VISION_RANGE
  ShroudClearingRange = MORDOR_HARADRIMPALACE_SHROUD_CLEAR
  BountyValue         = MORDOR_HARADRIMPALACE_BOUNTY_VALUE

  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    ;DamageFX          = StructureDamageFXNoShake
  End

  CommandSet = MordorHaradrimPalaceCommandSet


  ; *** AUDIO Parameters ***

	VoiceSelect		= MordorHaradrimPalaceSelect

	SoundOnDamaged		= BuildingLightDamageStone
	SoundOnReallyDamaged	= BuildingHeavyDamageStone

	VoiceSelectUnderConstruction	= BuildingEvilVoiceSelectUnderConstruction

	UnitSpecificSounds
		UnderConstruction		= BuildingConstructionLoop  ; Built first time
		; UnderRepairFromDamage	= NoSound					; Repaired No animation on the building, so don't bother playing sound
		UnderRepairFromRubble	= BuildingConstructionLoop	; Repaired from completely destroyed (not used???)
	End
 

  ; *** ENGINEERING Parameters ***

  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE NEED_BASE_FOUNDATION MP_COUNT_FOR_VICTORY AUTO_RALLYPOINT FS_FACTORY MADE_OF_WOOD FACE_AWAY_FROM_CASTLE_KEEP

  Behavior = ProductionUpdate ProductionUpdateModuleTag
    ; nothing, but is required if we have any Object-level Upgrades!
  End
 
  Behavior            = GettingBuiltBehavior GetBuiltBehaviorTag
    WorkerName		  = MordorWorkerNoSelect
  End

  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 


  Body						= ActiveBody ModuleTag_05
    MaxHealth				      = MORDOR_HARADRIMPALACE_HEALTH
    MaxHealthDamaged		  = MORDOR_HARADRIMPALACE_HEALTH_DAMAGED
	MaxHealthReallyDamaged	= MORDOR_HARADRIMPALACE_HEALTH_REALLY_DAMAGED
    DamageCreationList		= OCL_BuildingDamageList01 CATAPULT_ROCK
  
    DamageCreationList		= OCL_MBHardPalace_Chunk1 CATAPULT_ROCK FRONT_DESTROYED
    DamageCreationList		= OCL_MBHardPalace_Chunk2 CATAPULT_ROCK RIGHT_DESTROYED
    DamageCreationList		= OCL_MBHardPalace_Chunk3 CATAPULT_ROCK BACK_DESTROYED
    DamageCreationList		= OCL_MBHardPalace_Chunk4 CATAPULT_ROCK LEFT_DESTROYED
  End
 
    Behavior = SubObjectsUpgrade ModuleTag_HideAll
		TriggeredBy		= Upgrade_StructureLevel1
		HideSubObjects	= V1 V1A V2A V2B Banner_Harad01 Banner_Harad02 Banner_Harad03 Banner_Harad04 Lance MUHaraLncr
	End
	Behavior = GeometryUpgrade Geom_ModuleTag_HideAll
		TriggeredBy		= Upgrade_StructureLevel1
		HideGeometry	= Geom_V1 Geom_V2
	End
	
  	Behavior = SubObjectsUpgrade ModuleTag_ShowWalls 
		TriggeredBy		= Upgrade_StructureLevel2
		ShowSubObjects	= V1 V1A
		HideSubObjects	= V2A V2B Banner_Harad01 Banner_Harad02 Banner_Harad03 Banner_Harad04 Lance MUHaraLncr
	End
	Behavior = GeometryUpgrade Geom_ModuleTag_ShowWalls 
		TriggeredBy		= Upgrade_StructureLevel2
		ShowGeometry	= Geom_V1
		HideGeometry	= Geom_V2 Geom_Orig
	End
	
	Behavior = SubObjectsUpgrade ModuleTag_ShowFlagsAndTower 
		TriggeredBy		= Upgrade_StructureLevel3
		ShowSubObjects	= V1 V1A V2A V2B Banner_Harad01 Banner_Harad02 Banner_Harad03 Banner_Harad04 Lance MUHaraLncr
	End
	Behavior = GeometryUpgrade Geom_ModuleTag_ShowFlagsAndTower 
		TriggeredBy		= Upgrade_StructureLevel3
		ShowGeometry	= Geom_V2 Geom_V1
		HideGeometry	= Geom_Orig
	End
  
	Behavior                  = StructureCollapseUpdate ModuleTag_StructureCollapseUpdate 
		MinCollapseDelay        = 000
		MaxCollapseDelay        = 000
		CollapseDamping         = .5
		MaxShudder              = 0.6
		MinBurstDelay           = 250
		MaxBurstDelay           = 800
		BigBurstFrequency       = 4
		FXList                  = INITIAL   FX_StructureMediumCollapse
		FXList                  = ALMOST_FINAL  FX_StructureAlmostCollapse
		DestroyObjectWhenDone	= Yes
		CollapseHeight			= 89
	End

  Behavior = QueueProductionExitUpdate ModuleTag_11
    UnitCreatePoint   = X:0.0 Y:0.0 Z:0.0
    NaturalRallyPoint = X:64.0 Y:0.0 Z:0.0	;NaturalRallyPointX must always match GeometryMajorRadius! 
    ExitDelay = 300 ; Mainly for the multiple produced. Make them come out one at a time.
  End  

;  Behavior           = CreateObjectDie ModuleTag_08
;    CreationList     = OCL_SmallStructureDebris
;  End
 
;  Behavior = ProductionUpdate ModuleTag_10
;    ; nothing, but is required if we have any Object-level Upgrades!
;  End
 
;  Behavior = FlammableUpdate ModuleTag_14
;    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
;    AflameDamageAmount = 5       ; taking this much damage...
;    AflameDamageDelay = 500       ; this often.
;  End
 
;  Behavior = TransitionDamageFX ModuleTag_15
;    ;-------------DESIGNED FOR SMALL SIZED FACTION BUILDING TRANSITIONS-------------------
;    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
;    ;---------------------------------------------------------------------------------------
;    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
;    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
;    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
;  End
 
;  Behavior             = FXListDie ModuleTag_16
;    DeathFX       = FX_BuildingDie
;  End
 
  Geometry              = BOX
  GeometryName			= Geom_Orig
  GeometryMajorRadius   = 29.4
  GeometryMinorRadius   = 33.6
  GeometryHeight        = 36.4
  
  AdditionalGeometry	= CYLINDER
  GeometryName			= Geom_V1
  GeometryActive		= no
  GeometryMajorRadius   = 49.4
  GeometryMinorRadius   = 0
  GeometryHeight        = 41.4
  
  AdditionalGeometry    = BOX
  GeometryName			= Geom_V2
  GeometryActive		= no
  GeometryMajorRadius   = 16.4
  GeometryMinorRadius   = 15.6
  GeometryHeight        = 72.4
  
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER
  
  GeometryContactPoint	= X:-15.776		Y:40.76		Z:0			Repair
  GeometryContactPoint	= X:17.632		Y:-40.011	Z:0			Repair
  GeometryContactPoint	= X:33.112		Y:37.317	Z:0
  GeometryContactPoint	= X:-36.271		Y:-21.389	Z:0
  GeometryContactPoint	= X:-0.38		Y:-0.175	Z:72.452	Swoop

End

;------------------------------------------------------------------------------
;Mordor King Palace
;Reskin of the HaradrimPalace (see above object). May need to modify some values if different from Haradrim.
Object MordorKingPalace

	SelectPortrait = BPMHaradrimPalace
 
  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
		DefaultModelConditionState
			Model = MBKingPlc_SKN
		End
    
    IdleAnimationState
		StateName					=   STATE_Idle
		Animation = IdleA
			AnimationName			=	MBKingPlc_SKL.MBKingPlc_IDLA
			AnimationMode		=	ONCE 
		End
		Animation = IdleB
			AnimationName			=	MBKingPlc_SKL.MBKingPlc_IDLB
			AnimationMode		=	ONCE 
		End
		Animation = IdleC
			AnimationName			=	MBKingPlc_SKL.MBKingPlc_IDLC
			AnimationMode		=	ONCE 
		End
		Flags               = RESTART_ANIM_WHEN_COMPLETE 
	End
	
 

    ;------------ New Build Up States coming soon. 
    ModelConditionState   = AWAITING_CONSTRUCTION 
      Model               = MBKingPlc_A
;		ParticleSysBone	  = NONE BuildingDoughnutCloud
    End;
    AnimationState        = AWAITING_CONSTRUCTION
      Animation           =  MBKingPlc_A
        AnimationName     =  MBKingPlc_A.MBKingPlc_A
        AnimationMode     = MANUAL
        AnimationBlendTime = 0
      End
	  Flags				  = START_FRAME_FIRST
	  BeginScript
	  ;	CurDrawablePlaySound("GondorBarracksBeginConstruction")
	  EndScript
    End

    ModelConditionState   = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
      Model               = MBKingPlc_A
		ParticleSysBone   = CONSTDUSTBONE01 BuildingContructDust FollowBone:Yes
    End
    
    AnimationState        = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
		Animation           = MBKingPlc_A
			AnimationName     = MBKingPlc_A.MBKingPlc_A
			AnimationMode     = MANUAL
			AnimationBlendTime = 0
		End
		Flags				  = START_FRAME_FIRST
		StateName			  = BeingConstructed
    End
    
    
        ;--damaged building
      ModelConditionState  = DESTROYED_FRONT
      Model         = MBKingPlc_D2  
		ParticleSysBone SmokeMedium01 FireBuildingSmall
		ParticleSysBone FireSmall01 FireBuildingMedium
     	ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End
    AnimationState = DESTROYED_FRONT
      BeginScript
        CurDrawableHideSubObject("MBHRDPLCDP1")
      EndScript
    End
    
        ModelConditionState  = DESTROYED_RIGHT
      Model         = MBKingPlc_D2
		ParticleSysBone SmokeMedium01 FireBuildingSmall
		ParticleSysBone FireSmall01 FireBuildingMedium
     	ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End

    AnimationState = DESTROYED_RIGHT
      BeginScript
        CurDrawableHideSubObject("MBHRDPLCDP2")
      EndScript
    End
    

    ModelConditionState  = DESTROYED_BACK
      Model         = MBKingPlc_D2
		ParticleSysBone SmokeMedium01 FireBuildingSmall
		ParticleSysBone FireSmall01 FireBuildingMedium
     	ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End

    AnimationState = DESTROYED_BACK
      BeginScript
        CurDrawableHideSubObject("MBHRDPLCDP3")
      EndScript
    End

	ModelConditionState  = DESTROYED_LEFT
      Model         = MBKingPlc_D2
		ParticleSysBone SmokeMedium01 FireBuildingSmall
		ParticleSysBone FireSmall01 FireBuildingMedium
     	ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End
    
    AnimationState = DESTROYED_LEFT
      BeginScript
        CurDrawableHideSubObject("MBHRDPLCDP4")
      EndScript
    End
    
    
    ModelConditionState  = DAMAGED
      Model         = MBKingPlc_D1  
	
    End
    AnimationState = DAMAGED
     EnteringStateFX	= FX_BuildingDamaged
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = MBKingPlc_D2  
		ParticleSysBone SmokeMedium01 FireBuildingSmall
		ParticleSysBone FireSmall01 FireBuildingMedium
     	ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End
    AnimationState = REALLYDAMAGED
	EnteringStateFX	= FX_BuildingDamaged
    End

    ModelConditionState  = RUBBLE
      Model         = MBKingPlc_D2  
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End
    
    AnimationState = RUBBLE
      BeginScript
        CurDrawableHideSubObject("MBHRDPLCDP1")
        CurDrawableHideSubObject("MBHRDPLCDP2")
        CurDrawableHideSubObject("MBHRDPLCDP3")
        CurDrawableHideSubObject("MBHRDPLCDP4")
      EndScript
    End

    ModelConditionState  = POST_RUBBLE
		Model         = None
		ParticleSysBone NONE SmokeBuildingMediumRubble
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
		ParticleSysBone NONE SmokeBuildingMediumRubble
    End
    
  End

	Draw = W3DFloorDraw DrawFloorBib    
		StaticModelLODMode = Yes		; THIS NEEDS TO BE COMMENTED OUT WHEN ENGINEERING ENABLES LOD'S IN THE FLOOR DRAW
		ModelName = MBKingPlc_Bib
	End
	
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:MordorHaradrimPalace
  Side                = Mordor
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = MORDOR_HARADRIMPALACE_BUILDCOST
  BuildTime           = MORDOR_HARADRIMPALACE_BUILDTIME
  VisionRange         = MORDOR_HARADRIMPALACE_VISION_RANGE
  ShroudClearingRange = MORDOR_HARADRIMPALACE_SHROUD_CLEAR
  BountyValue         = MORDOR_HARADRIMPALACE_BOUNTY_VALUE

  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    ;DamageFX          = StructureDamageFXNoShake
  End

  CommandSet = MordorHaradrimPalaceCommandSet


  ; *** AUDIO Parameters ***

	VoiceSelect		= MordorHaradrimPalaceSelect

	SoundOnDamaged		= BuildingLightDamageStone
	SoundOnReallyDamaged	= BuildingHeavyDamageStone

	VoiceSelectUnderConstruction	= BuildingEvilVoiceSelectUnderConstruction

	UnitSpecificSounds
		UnderConstruction		= BuildingConstructionLoop  ; Built first time
		; UnderRepairFromDamage	= NoSound					; Repaired No animation on the building, so don't bother playing sound
		UnderRepairFromRubble	= BuildingConstructionLoop	; Repaired from completely destroyed (not used???)
	End

 
  ; *** ENGINEERING Parameters ***

  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE NEED_BASE_FOUNDATION MP_COUNT_FOR_VICTORY AUTO_RALLYPOINT FS_FACTORY MADE_OF_WOOD FACE_AWAY_FROM_CASTLE_KEEP

  Behavior = ProductionUpdate ProductionUpdateModuleTag
    ; nothing, but is required if we have any Object-level Upgrades!
  End
 
  Behavior            = GettingBuiltBehavior GetBuiltBehaviorTag
    WorkerName		  = MordorWorkerNoSelect
  End

  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 


  Body						= ActiveBody ModuleTag_05
    MaxHealth				      = MORDOR_HARADRIMPALACE_HEALTH
    MaxHealthDamaged		  = MORDOR_HARADRIMPALACE_HEALTH_DAMAGED
	MaxHealthReallyDamaged	= MORDOR_HARADRIMPALACE_HEALTH_REALLY_DAMAGED
    DamageCreationList		= OCL_BuildingDamageList01 CATAPULT_ROCK
  
    DamageCreationList		= OCL_MBHardPalace_Chunk1 CATAPULT_ROCK FRONT_DESTROYED
    DamageCreationList		= OCL_MBHardPalace_Chunk2 CATAPULT_ROCK RIGHT_DESTROYED
    DamageCreationList		= OCL_MBHardPalace_Chunk3 CATAPULT_ROCK BACK_DESTROYED
    DamageCreationList		= OCL_MBHardPalace_Chunk4 CATAPULT_ROCK LEFT_DESTROYED
  End
 

  
	Behavior                  = StructureCollapseUpdate ModuleTag_StructureCollapseUpdate 
		MinCollapseDelay        = 000
		MaxCollapseDelay        = 000
		CollapseDamping         = .5
		MaxShudder              = 0.6
		MinBurstDelay           = 250
		MaxBurstDelay           = 800
		BigBurstFrequency       = 4
		FXList                  = INITIAL   FX_StructureMediumCollapse
		FXList                  = ALMOST_FINAL  FX_StructureAlmostCollapse
		DestroyObjectWhenDone	= Yes
		CollapseHeight			= 89
	End

  Behavior = QueueProductionExitUpdate ModuleTag_11
    UnitCreatePoint   = X:0.0 Y:0.0 Z:0.0
    NaturalRallyPoint = X:64.0 Y:0.0 Z:0.0	;NaturalRallyPointX must always match GeometryMajorRadius!
    ExitDelay = 300 ; Mainly for the multiple produced. Make them come out one at a time.
  End  

;  Behavior           = CreateObjectDie ModuleTag_08
;    CreationList     = OCL_SmallStructureDebris
;  End
 
;  Behavior = ProductionUpdate ModuleTag_10
;    ; nothing, but is required if we have any Object-level Upgrades!
;  End
 
;  Behavior = FlammableUpdate ModuleTag_14
;    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
;    AflameDamageAmount = 5       ; taking this much damage...
;    AflameDamageDelay = 500       ; this often.
;  End
 
;  Behavior = TransitionDamageFX ModuleTag_15
;    ;-------------DESIGNED FOR SMALL SIZED FACTION BUILDING TRANSITIONS-------------------
;    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
;    ;---------------------------------------------------------------------------------------
;    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
;    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
;    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
;  End
 
;  Behavior             = FXListDie ModuleTag_16
;    DeathFX       = FX_BuildingDie
;  End
 
  Geometry	= CYLINDER
  GeometryMajorRadius   = 49.4
  GeometryMinorRadius   = 0
  GeometryHeight        = 41.4
  
  AdditionalGeometry    = BOX
  GeometryMajorRadius   = 16.4
  GeometryMinorRadius   = 15.6
  GeometryHeight        = 72.4
  
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER
End


;------------------------------------------------------------------------------
;Mordor Mumakil Pen
Object MordorMumakilPen

	SelectPortrait = BPMMumakilPen
 
  ; *** ART Parameters ***


  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
	StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD      
    DefaultModelConditionState
      Model = MBMumkpen
  End
  
	IdleAnimationState
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "BeingConstructed" then 
			    ; Don't play completed sound when canceling build-in-progress or when
			    ; destroyed halfway
			    if not CurDrawableModelcondition( "DYING" ) then 
					CurDrawablePlaySound("CampOrcCompleteMumakilPen")
				end
			end
		EndScript
	End

    ;------------Build Up States
    ModelConditionState   = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
	    Model             = MBMumkpen_A
		ParticleSysBone   = C_1 BuildingContructDust FollowBone:Yes
    End
    
    AnimationState        = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
		Animation
			AnimationName     = MBMumkpen_ASKL.MBMumkpen_ABLD
			AnimationMode     = MANUAL
		End
		Flags			= START_FRAME_FIRST
		StateName		= BeingConstructed
		BeginScript
			CurDrawablePlaySound("GondorBarracksBeginConstruction")
		EndScript
    End
  
  
   ;---------Damaged States
    ModelConditionState		= DESTROYED_FRONT
      Model					= MBMUMKPEN_D2
      	ParticleSysBone FireSmall01 FireBuildingLarge
		ParticleSysBone FireSmall02 FireBuildingLarge
		ParticleSysBone FireSmall03 FireBuildingMedium
		ParticleSysBone FireSmall04 SmokeBuildingLarge
		ParticleSysBone FireSmall05 FireBuildingMedium
    End
    AnimationState			= DESTROYED_FRONT
      BeginScript
        CurDrawableHideSubObject("MUMAKILPENDP_1")
      EndScript
    End
    
    ModelConditionState		= DESTROYED_RIGHT
      Model					= MBMUMKPEN_D2
      	ParticleSysBone FireSmall01 FireBuildingLarge
		ParticleSysBone FireSmall02 FireBuildingLarge
		ParticleSysBone FireSmall03 FireBuildingMedium
		ParticleSysBone FireSmall04 SmokeBuildingLarge
		ParticleSysBone FireSmall05 FireBuildingMedium
    End

    AnimationState			= DESTROYED_RIGHT
      BeginScript
      ;  CurDrawableHideSubObject("MUMAKILPENDP_2")
      EndScript
    End

    ModelConditionState		= DESTROYED_BACK
      Model					= MBMUMKPEN_D2
      	ParticleSysBone FireSmall01 FireBuildingLarge
		ParticleSysBone FireSmall02 FireBuildingLarge
		ParticleSysBone FireSmall03 FireBuildingMedium
		ParticleSysBone FireSmall04 SmokeBuildingLarge
		ParticleSysBone FireSmall05 FireBuildingMedium      
    End

    AnimationState = DESTROYED_BACK
      BeginScript
        CurDrawableHideSubObject("MUMAKILPENDP_3")
      EndScript
    End

	ModelConditionState  = DESTROYED_LEFT
      Model         = MBMUMKPEN_D2
      	ParticleSysBone FireSmall01 FireBuildingLarge
		ParticleSysBone FireSmall02 FireBuildingLarge
		ParticleSysBone FireSmall03 FireBuildingMedium
		ParticleSysBone FireSmall04 SmokeBuildingLarge
		ParticleSysBone FireSmall05 FireBuildingMedium      
    End
    
    AnimationState = DESTROYED_LEFT
      BeginScript
        CurDrawableHideSubObject("MUMAKILPENDP_4")
      EndScript
    End
    
    
    ModelConditionState  = DAMAGED
      Model         = MBMUMKPEN_D1
      	ParticleSysBone FireSmall01 FireBuildingLarge
		ParticleSysBone FireSmall02 FireBuildingMedium
		ParticleSysBone FireSmall03 FireBuildingMedium
		ParticleSysBone FireSmall04 SmokeBuildingLarge
		ParticleSysBone FireSmall05 FireBuildingMedium      
    End
    AnimationState = DAMAGED
	EnteringStateFX	= FX_BuildingDamaged
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = MBMUMKPEN_D2
      	ParticleSysBone FireSmall01 FireBuildingLarge
		ParticleSysBone FireSmall02 FireBuildingLarge
		ParticleSysBone FireSmall03 FireBuildingMedium
		ParticleSysBone FireSmall04 SmokeBuildingLarge
		ParticleSysBone FireSmall05 FireBuildingMedium      
    End
    AnimationState = REALLYDAMAGED
	EnteringStateFX	= FX_BuildingReallyDamaged
    End

    ModelConditionState  = RUBBLE
      Model         = MBMUMKPEN_D2
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End
    
    AnimationState = RUBBLE
      BeginScript
        CurDrawableHideSubObject("MUMAKILPENDP_1")
     ;   CurDrawableHideSubObject("MUMAKILPENDP_2")
        CurDrawableHideSubObject("MUMAKILPENDP_3")
        CurDrawableHideSubObject("MUMAKILPENDP_4")
      EndScript
    End



  End

 ;----------the door
 Draw = W3DScriptedModelDraw ModuleTag_02
     
    DefaultModelConditionState
      Model = MBMumkpenDSCL
    End
     
    IdleAnimationState
		Animation			=	MBMumkpenDOOR
			AnimationName	=	MBMumkpenDSCL.MBMumkpenDSCL
			AnimationMode   =	ONCE
			AnimationBlendTime = 0
		End
		Flags				=	START_FRAME_FIRST
    End

;------------Build Up States
 	ModelConditionState   = AWAITING_CONSTRUCTION 
 		Model               = MBMumkpen_DRA
 	End
 	AnimationState        = AWAITING_CONSTRUCTION
		Animation           = MBMumkpen_DRA
 			AnimationName     = MBMumkpen_DRA.MBMumkpen_DRA
 			AnimationMode     = MANUAL
 			AnimationBlendTime = 0
         End
 		Flags				  = START_FRAME_FIRST
 	End
       
 	ModelConditionState   = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
 		Model               = MBMumkpen_DRA
 	End
       
 	AnimationState        = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
 		Animation           =MBMumkpen_DRA
 			AnimationName     = MBMumkpen_DRA.MBMumkpen_DRA
 			AnimationMode     = MANUAL
 			AnimationBlendTime = 0
 		End
 		Flags				  = START_FRAME_FIRST
 	End
   
     ;---DAMAGED

	ModelConditionState   = DAMAGED
		Model               = MBMumkpen_DROCD
	End

	AnimationState			=	DAMAGED DOOR_1_WAITING_OPEN
		Animation           =	MBMumkpen_DROCD
			AnimationName   =   MBMumkpen_DROCD.MBMumkpen_DROCD
			AnimationMode   =	ONCE
			AnimationBlendTime = 0
		End
	End   
   
     ;---REALLYDAMAGED
   
	ModelConditionState   = REALLYDAMAGED
		Model               = MBMumkpen_DROCD
	End

	AnimationState			=	REALLYDAMAGED DOOR_1_WAITING_OPEN
		Animation           =	MBMumkpen_DROCD
			AnimationName   =   MBMumkpen_DROCD.MBMumkpen_DROCD
			AnimationMode   =	ONCE
			AnimationBlendTime = 0
		End
	End   
    
   ;--rubble state

	ModelConditionState	= RUBBLE
		Model = MBMumkpen_DROCD
	End
    
   ;--normal state

	ModelConditionState		= DOOR_1_WAITING_OPEN
		Model				= MBMumkpenDOP
    End
	
	AnimationState			=	DOOR_1_WAITING_OPEN
		Animation           =	MBMumkpenDOP
			AnimationName   =   MBMumkpenDOP.MBMumkpenDOP
			AnimationMode   =	ONCE
			AnimationBlendTime = 0
		End
	End   


End

	Draw = W3DFloorDraw DrawFloorV1    
		StaticModelLODMode = Yes		; THIS NEEDS TO BE COMMENTED OUT WHEN ENGINEERING ENABLES LOD'S IN THE FLOOR DRAW
		ModelName = MBMUMKPEN_Bib
	End
	Draw = W3DFloorDraw DrawFloorV2    
		ModelName = MBMUMKPEN_V1
		StartHidden = Yes
	End
  
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:MordorMumakilPen
  Description         = OBJECT:MordorMumakilPenDescription
  Side                = Mordor
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = MORDOR_MUMAKILPEN_BUILDCOST
  BuildTime           = MORDOR_MUMAKILPEN_BUILDTIME
  VisionRange         = MORDOR_MUMAKILPEN_VISION_RANGE
  ShroudClearingRange = MORDOR_MUMAKILPEN_SHROUD_CLEAR
  BountyValue         = MORDOR_MUMAKILPEN_BOUNTY_VALUE

  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    ;DamageFX          = StructureDamageFXNoShake
  End

  CommandSet = MordorMumakilPenCommandSet


  ; *** AUDIO Parameters ***

	VoiceSelect		= MordorMumakilPenSelect

	SoundOnDamaged		= BuildingLightDamageStone
	SoundOnReallyDamaged	= BuildingHeavyDamageStone

	VoiceSelectUnderConstruction	= BuildingEvilVoiceSelectUnderConstruction

	UnitSpecificSounds
		UnderConstruction		= BuildingConstructionLoop  ; Built first time
		; UnderRepairFromDamage	= NoSound					; Repaired No animation on the building, so don't bother playing sound
		UnderRepairFromRubble	= BuildingConstructionLoop	; Repaired from completely destroyed (not used???)
	End 
 

  ; *** ENGINEERING Parameters ***

  RadarPriority       = STRUCTURE 
  KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE CAPTURABLE FS_FACTORY AUTO_RALLYPOINT MP_COUNT_FOR_VICTORY NEED_BASE_FOUNDATION MADE_OF_WOOD FACE_AWAY_FROM_CASTLE_KEEP

  Behavior = ProductionUpdate ProductionUpdateModuleTag
	NumDoorAnimations            = 1
    DoorOpeningTime              = 0  ;in mSeconds how long you want doors to be in open state
    DoorWaitOpenTime             = 600  ;in mSeconds time the door stays open, so units can exit
    DoorCloseTime                = 0  ;in mSeconds how long you want doors to be in open state
    ConstructionCompleteDuration = 0  ;in mSeconds   wait time so if you have multiple units they don't run over each other
    UnitInvulnerableTime		 = 6000 ; In msec, we flag things we make as invulnerable for a bit.  The mumakil can't handle being hurt during his complicated build phase.
	VeteranUnitsFromVeteranFactory = Yes ;I am higher than my default level, I will give a free level to those I produce
  End 
  
  Behavior            = GettingBuiltBehavior GetBuiltBehaviorTag
    WorkerName		  = MordorWorkerNoSelect
  End

  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  Body                = StructureBody ModuleTag_05
    MaxHealth         		= MORDOR_MUMAKILPEN_HEALTH
    MaxHealthDamaged  		= MORDOR_MUMAKILPEN_HEALTH_DAMAGED
	MaxHealthReallyDamaged 	= MORDOR_MUMAKILPEN_HEALTH_REALLY_DAMAGED
	
	DamageCreationList = OCL_BuildingDamageList01 CATAPULT_ROCK
    
    DamageCreationList = OCL_MBMumkPenD2_Chunk1 CATAPULT_ROCK FRONT_DESTROYED
 ;   DamageCreationList = OCL_MBMumkPenD2_Chunk2 CATAPULT_ROCK RIGHT_DESTROYED
    DamageCreationList = OCL_MBMumkPenD2_Chunk3 CATAPULT_ROCK BACK_DESTROYED
    DamageCreationList = OCL_MBMumkPenD2_Chunk4 CATAPULT_ROCK LEFT_DESTROYED
  End
  
    Behavior = SubObjectsUpgrade ModuleTag_HideAll
		TriggeredBy		= Upgrade_StructureLevel1
		HideSubObjects	= V1 V2 BANNERS BANNER01 BANNER02 BANNER03
	End
	Behavior = GeometryUpgrade Geom_ModuleTag_HideAll
		TriggeredBy		= Upgrade_StructureLevel1
		HideGeometry	= Geom_V1
	End
	
	
  	Behavior = SubObjectsUpgrade ModuleTag_ShowWalls 
		TriggeredBy		= Upgrade_StructureLevel2
		ShowSubObjects	= V1
		HideSubObjects	= V2 BANNERS BANNER01 BANNER02 BANNER03
	End
	Behavior = GeometryUpgrade Geom_ModuleTag_ShowWalls 
		TriggeredBy		= Upgrade_StructureLevel2
		ShowGeometry	= Geom_V1 
		HideGeometry	= Geom_Orig
	End
	
	
	Behavior = SubObjectsUpgrade ModuleTag_ShowFlagsAndTower 
		TriggeredBy		= Upgrade_StructureLevel3
		ShowSubObjects	= V1 V2 BANNERS BANNER01 BANNER02 BANNER03
	End
	
  Behavior                  = StructureCollapseUpdate ModuleTag_08
    MinCollapseDelay        = 000
    MaxCollapseDelay        = 000
    CollapseDamping         = .5
    MaxShudder              = 0.6
    MinBurstDelay           = 250
    MaxBurstDelay           = 800
    BigBurstFrequency       = 4
    FXList                  = INITIAL   FX_StructureMediumCollapse
    FXList                  = ALMOST_FINAL  FX_StructureAlmostCollapse
	DestroyObjectWhenDone	= Yes
	CollapseHeight			= 89
  End
  
  Behavior = QueueProductionExitUpdate ModuleTag_11
    UnitCreatePoint   = X:95.424 Y:0.0 Z:0.0
    NaturalRallyPoint = X:100.0 Y:0.0 Z:0.0	;NaturalRallyPointX must always match GeometryMajorRadius! 
  End  
 
  Geometry              = BOX
  GeometryName			= Geom_Orig
  GeometryMajorRadius   = 46.0
  GeometryMinorRadius   = 40.0
  GeometryHeight        = 51.0
  GeometryOffset		= X: -10.0 Y: 0.0 Z: 0.0
  
  AdditionalGeometry	= CYLINDER
  GeometryName			= Geom_V1
  GeometryActive		= no
  GeometryMajorRadius   = 70.0
  GeometryMinorRadius   = 0
  GeometryHeight        = 51.0
  
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER

	GeometryContactPoint	= X:-51.501		Y:39.728	Z:0			Repair
	GeometryContactPoint	= X:1.978		Y:-58.722	Z:0			Repair
	AttackContactPoint		= X:18.308		Y:50.646	Z:0
	AttackContactPoint		= X:-52.032		Y:-41.831	Z:0
	GeometryContactPoint	= X:-3.287		Y:26.482	Z:56.385	Swoop
;	AttackContactPoint		= X:39.251		Y:21.173	Z:45.937	Swoop
;	AttackContactPoint		= X:-45.226		Y:22.455	Z:45.937	Swoop
;	AttackContactPoint		= X:-45.226		Y:-0.883	Z:45.937	Swoop

End

;------------------------------------------------------------------------------
;Mordor Umbar Tavern
Object MordorUmbarTavern
 
  ; *** ART Parameters ***

;  Draw                = W3DModelDraw ModuleTag_01
;    OkToChangeModelColor = Yes
;
;    DefaultConditionState
;      Model           = RBBarracks
;;     FXEvent = 1  FX_TrebuchetImpactHit ; sample of method to fire FXList at desired animation frames
;;     FXEvent = 30 FX_TrebuchetImpactHit ; sample of method to fire FXList at desired animation frames
;;     FXEvent = 50 FX_TrebuchetImpactHit ; sample of method to fire FXList at desired animation frames
;    End
;  End


  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBBarracks
    End
  End

  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:MordorTavern
  Side                = Mordor
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 0
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 161

;  ArmorSet
;    Conditions        = None
;    Armor             = StructureArmor
;    DamageFX          = StructureDamageFXNoShake
;  End

; For Testing Purposes
  CommandSet = MordorUmberTavernCommandSet
  BuildCost           = 500           ; BALANCE
  BuildTime           = 5.0           ; BALANCE


  ; *** AUDIO Parameters ***

	SoundOnDamaged		= BuildingLightDamageStone
	SoundOnReallyDamaged	= BuildingHeavyDamageStone

 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End

 
  ; *** ENGINEERING Parameters ***

  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE NEED_BASE_FOUNDATION MP_COUNT_FOR_VICTORY AUTO_RALLYPOINT MADE_OF_WOOD

  Behavior = ProductionUpdate ProductionUpdateModuleTag
    ; nothing, but is required if we have any Object-level Upgrades!
  End
 
  Behavior            = GettingBuiltBehavior GetBuiltBehaviorTag
    WorkerName		  = MordorWorkerNoSelect
  End

  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  Body                = StructureBody ModuleTag_05
    MaxHealth         = 1500.0
  End
 
  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End
  
  Behavior = QueueProductionExitUpdate ModuleTag_11
    UnitCreatePoint   = X:0.0 Y:-20.0 Z:0.0
    NaturalRallyPoint = X:28.8 Y:-20.0 Z:0.0;NaturalRallyPointX must always match GeometryMajorRadius! 
    ExitDelay = 300 ; Mainly for the multiple produced. Make them come out one at a time.
  End  

;  Behavior           = CreateObjectDie ModuleTag_08
;    CreationList     = OCL_SmallStructureDebris
;  End
 
;  Behavior = ProductionUpdate ModuleTag_10
;    ; nothing, but is required if we have any Object-level Upgrades!
;  End
 
;  Behavior = FlammableUpdate ModuleTag_14
;    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
;    AflameDamageAmount = 5       ; taking this much damage...
;    AflameDamageDelay = 500       ; this often.
;  End
 
;  Behavior = TransitionDamageFX ModuleTag_15
;    ;-------------DESIGNED FOR SMALL SIZED FACTION BUILDING TRANSITIONS-------------------
;    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
;    ;---------------------------------------------------------------------------------------
;    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
;    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
;    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
;  End
 
;  Behavior             = FXListDie ModuleTag_16
;    DeathFX       = FX_BuildingDie
;  End
 
  Geometry              = BOX
  GeometryMajorRadius   = 35.6
  GeometryMinorRadius   = 37.6
  GeometryHeight        = 37.8
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER
End

;------------------------------------------------------------------------------
Object MordorEyeOfSauron
  
  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = MBTheEye
    End
  End
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:MordorEyeOfSauron
  Side                = Mordor
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 161

  ; *** AUDIO Parameters ***

  ; *** ENGINEERING Parameters ***
  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE NEED_BASE_FOUNDATION CASTLE_KEEP 
 
  Behavior            = GettingBuiltBehavior ModuleTag_04
    SelfBuildingLoop = BuildingConstructionLoop ; Only played if we DON'T spawn a worker
	SelfRepairFromDamageLoop  = NoSound         ; This doesn't cause an animation, so don't bother playing a sound
	SelfRepairFromRubbleLoop  = BuildingConstructionLoop
  End

  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  Body                = StructureBody ModuleTag_05
    MaxHealth         = 1500.0
  End
 
  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End

  Geometry              = CYLINDER
  GeometryMajorRadius   = 15.6
  GeometryMinorRadius   = 0
  GeometryHeight        = 111.2
  
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER
End

;------------------------------------------------------------------------------
;------------------------------------------------------------------------------
;------------------------------------------------------------------------------
;------------------------------------------------------------------------------
;
;  Isengard
;
;------------------------------------------------------------------------------
;------------------------------------------------------------------------------
;------------------------------------------------------------------------------
;------------------------------------------------------------------------------


;----------------------------------- IsengardCitadel -------------------------------------------------------
Object IsengardCampKeep

	SelectPortrait = BPICamp

  ; *** ART Parameters ***

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes

    DefaultModelConditionState  
      Model = IBCCenter
      ParticleSysBone	  = smokebone01 furnaceSparks
;      ParticleSysBone     = smokebone02 furnaceSmoke
;      ParticleSysBone	  = glowbone01 TorchGlow
;      ParticleSysBone     = glowbone02 TorchGlow
;      ParticleSysBone	  = glowbone03 TorchGlow
;      ParticleSysBone     = glowbone04 TorchGlow
    End

	ModelConditionState = WORLD_BUILDER
		Model = IBCCenterW
	End
    
	IdleAnimationState
		;BeginScript
		;	Prev = CurDrawablePrevAnimationState()
		;	if Prev == "BeingConstructed" then 
			    ; Don't play completed sound when canceling build-in-progress or when
			    ; destroyed halfway
		;	    if not CurDrawableModelcondition( "DYING" ) then 
		;			CurDrawablePlaySound("CampOrcCompleteKeep")
		;		end
		;	end
		;EndScript
	End

;------------Build Up States
    ModelConditionState   = ACTIVELY_BEING_CONSTRUCTED
      Model               = IBCCenter_A
;      ParticleSysBone	  = NONE BuildingDoughnutCloud
      ParticleSysBone     = NONE BuildingContructDust
    End  

	AnimationState          = ACTIVELY_BEING_CONSTRUCTED
		Animation
			AnimationName	= IBCCenter_A.IBCCenter_A
			AnimationMode   = MANUAL
		End
		StateName		= BeingConstructed
		BeginScript
			;CurDrawableHideSubObject("FIRE02")
			CurDrawablePlaySound("GondorBarracksBeginConstruction")
			CurDrawablePlaySound("BuildingTopple")
		EndScript
	End

;------------Build Up States
    ModelConditionState   = BASE_BUILD
      Model               = IBCCenter_A
;      ParticleSysBone	  = NONE BuildingDoughnutCloud
      ParticleSysBone     = NONE BuildingContructDust
    End  

	AnimationState		  = BASE_BUILD
		Animation
			AnimationName = IBCCenter_A.IBCCenter_A
			AnimationMode = ONCE
			AnimationBlendTime = 0			
			AnimationSpeedFactorRange = 2.0 2.0 ; 300 frame anim, but need to shrink down to 5 seconds
		End		
		BeginScript
			CurDrawablePlaySound("DebrisDust")
			CurDrawablePlaySound("GondorBarracksBeginConstruction")
			CurDrawablePlaySound("BuildingTopple")
		EndScript
	End

    ModelConditionState   = JUST_BUILT
      Model               = IBCCenter_A
;      ParticleSysBone	  = NONE BuildingDoughnutCloud
      ParticleSysBone     = NONE BuildingContructDust
    End  

	AnimationState		  = JUST_BUILT
		Animation
			AnimationName = IBCCenter_A.IBCCenter_A
			AnimationMode = MANUAL			
			AnimationBlendTime = 0
		End
        Flags = START_FRAME_FIRST
		;BeginScript
		;	CurDrawablePlaySound("DebrisDust")
		;	CurDrawableHideSubObject("FIRE02")
		;EndScript
	End

    ModelConditionState  = DAMAGED
      Model         = IBCCenter_D1 
      ParticleSysBone Smokebone01 TrebuchetImpactSplinters
;      ParticleSysBone Smokebone02 furnaceSmoke
	

    End
    AnimationState = DAMAGED
     EnteringStateFX	= FX_BuildingDamaged
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = IBCCenter_D2 
      ParticleSysBone Smokebone01 TrebuchetImpactSplinters
;      ParticleSysBone Smokebone02 furnaceSmoke
    End
    AnimationState = REALLYDAMAGED
     	EnteringStateFX	= FX_BuildingReallyDamaged
    End
    
    ModelConditionState  = RUBBLE
      Model         = IBCCenter_D2  
      ParticleSysBone Smokebone01 Explosion3
      ParticleSysBone Smokebone02 Explosion5
    End

    AnimationState = RUBBLE
	;EnteringStateFX	= FX_IsengardCitadelDie		;added to trigger BuildingSink audio but already being triggered in StructureCollapseUpdate module
    End

  	ModelConditionState  = POST_RUBBLE
		Model         = GBGenRubble
		ParticleSysBone NONE SmokeBuildingMediumRubble
	End
    AnimationState = POST_RUBBLE
    End
	
	ModelConditionState  = POST_COLLAPSE
		Model         = GBGenRubble
		ParticleSysBone NONE SmokeBuildingMediumRubble
	End
    AnimationState = POST_COLLAPSE
    End

  End


	; *** AUDIO Parameters ***

	VoiceSelect				= IsengardCitadelSelect

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone

	VoiceSelectUnderConstruction	= BuildingEvilVoiceSelectUnderConstruction

	UnitSpecificSounds
		UnderConstruction		= BuildingBigConstructionLoop		; Built first time
		; UnderRepairFromDamage	= NoSound					; Repaired No animation on the building, so don't bother playing sound
		UnderRepairFromRubble	= BuildingBigConstructionLoop		; Repaired from completely destroyed (not used???)
	End
	EvaEventDieOwner = CitadelDie


	; ***DESIGN parameters ***

	DisplayName      = OBJECT:IsengardCampKeep
	Side = Isengard
	EditorSorting   = STRUCTURE
	ThreatLevel = 1.0
	BuildCost           = 1000
	BuildTime           = 30.0           ; in seconds
	CommandSet			= GenericKeepCommandSet
	
	ArmorSet
		Conditions        = None
		Armor             = CitadelArmor
		DamageFX          = None
	End

  ; *** ENGINEERING Parameters ***  
	KindOf					= VITAL_FOR_BASE_SURVIVAL STRUCTURE SELECTABLE IMMOBILE CASTLE_KEEP MP_COUNT_FOR_VICTORY FS_FACTORY AUTO_RALLYPOINT MADE_OF_WOOD SCORE
	RadarPriority			= STRUCTURE
	KeepSelectableWhenDead	= Yes
 
  
	Body              = ActiveBody ModuleTag_02
		MaxHealth       = ISGENARD_CENTRAL_CAMP_KEEP_HEALTH
	End

	Behavior = GettingBuiltBehavior ModuleTag_04
		SelfBuildingLoop = BuildingBigConstructionLoop			; Only played if we DON'T spawn a worker
		SelfRepairFromDamageLoop  = NoSound         			; This doesn't cause an animation, so don't bother playing a sound
		SelfRepairFromRubbleLoop  = BuildingBigConstructionLoop
	End

  Behavior = CastleMemberBehavior ModuleTag_CMB
	BeingBuiltSound = BuildingBigConstructionLoop
  End 

	Behavior = AutoDepositUpdate AutoDepositModuleTag
		DepositTiming			= GENERIC_KEEP_MONEY_TIME		; in milliseconds
		DepositAmount			= GENERIC_KEEP_MONEY_AMOUNT		; cash amount to deposit every DepositTiming
		InitialCaptureBonus		= 0  ; no initial bonus
	End

  	;-----------------------------------------------
	;Used for hero revival and initial construction     
	Behavior = ProductionUpdate ProductionUpdateModuleTag
		; nothing, but is required if we have any Object-level Upgrades!
	End
	Behavior = QueueProductionExitUpdate ModuleTag_QueuePEU
		UnitCreatePoint   = X:0.0 Y:-20.0 Z:0.0
		NaturalRallyPoint = X:28.8 Y:-80.0 Z:0.0;NaturalRallyPointX must always match GeometryMajorRadius! 
		ExitDelay = 300 ;Handles delays between units if multiple produced at a time. (like Generals Redguard coming out 2 at a time)
	End  
	;-----------------------------------------------

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
  Behavior = KeepObjectDie ModuleTag_IWantRubble
  End
  
     Behavior                  = StructureCollapseUpdate ModuleTag_06
       MinCollapseDelay        = 000
       MaxCollapseDelay        = 000
       CollapseDamping         = .5
       MaxShudder              = 0.6
       MinBurstDelay           = 250
       MaxBurstDelay           = 800
       BigBurstFrequency       = 4
       FXList                  = INITIAL FX_StructureMediumCollapse
     End

	Behavior                  = RubbleRiseUpdate ModuleTag_07
		MinRubbleRiseDelay      = 000
		MaxRubbleRiseDelay      = 000
		;RubbleRiseDamping       = .5
		RubbleHeight            = 4.0
		MaxShudder              = 0.6
		MinBurstDelay           = 250
		MaxBurstDelay           = 800
		BigBurstFrequency       = 4
		FXList                  = INITIAL FX_StructureMediumPostCollapse	;FX_StructureMediumCollapse
	End  
  
  Geometry              = BOX
  GeometryMajorRadius   = 15.0
  GeometryMinorRadius   = 15.0
  GeometryHeight        = 148.0
  
  AdditionalGeometry	= BOX
  GeometryMajorRadius   = 35.0
  GeometryMinorRadius   = 33.0
  GeometryHeight        = 30.0
  
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  
  GeometryContactPoint	= X:0.115	Y:0		Z:150.622		Swoop
  GeometryContactPoint	= X:0		Y:0		Z:0
End

;------------------------------------------------------------------------------------------
Object IsengardEconomyKeep

	SelectPortrait = BPIOrthancTower

  ; *** ART Parameters ***

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes

    DefaultModelConditionState  
      Model = IBTent2
    End
    AnimationState        = NONE
      Animation           = IBTent2
        AnimationName     = IBTent2.IBTent2
        AnimationMode     = LOOP
      End
    End
    
    ModelConditionState  = RUBBLE
      Model         = IBTent2  
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End
    AnimationState = RUBBLE
    End

    ModelConditionState  = POST_RUBBLE
      Model         = None
		ParticleSysBone NONE SmokeBuildingMediumRubble
    End    
    AnimationState = POST_RUBBLE
    End

    ModelConditionState  = POST_COLLAPSE
      Model         = None
		ParticleSysBone NONE SmokeBuildingMediumRubble
    End
    AnimationState = POST_COLLAPSE
    End        
  End


  ; *** AUDIO Parameters ***

	SoundOnDamaged		= BuildingLightDamageStone
	SoundOnReallyDamaged	= BuildingHeavyDamageStone


  ; ***DESIGN parameters ***

  DisplayName      = OBJECT:IsengardCampKeep
  Side = Isengard
  EditorSorting   = STRUCTURE
  ThreatLevel = 1.0
  ;BuildCost           = 500
  ;BuildTime           = 10.0           ; in seconds

  ArmorSet
    Conditions        = None
    Armor             = NoArmor
    DamageFX          = None
  End

  ; *** ENGINEERING Parameters ***  
  KindOf            = STRUCTURE SELECTABLE IMMOBILE CASTLE_KEEP MP_COUNT_FOR_VICTORY MADE_OF_WOOD
  RadarPriority		= STRUCTURE
  Body              = ActiveBody ModuleTag_02
    MaxHealth       = 2000.0
  End

  Behavior = GettingBuiltBehavior ModuleTag_04
    WorkerName	= MordorWorkerNoSelect
    SpawnTimer  = 120
    RebuildWhenDead = Yes
  End

  Behavior = CastleMemberBehavior ModuleTag_CMB
	BeingBuiltSound = BuildingBigConstructionLoop
  End 

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
  Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 4000
  End
  
  Behavior                  = StructureCollapseUpdate ModuleTag_06
    MinCollapseDelay        = 000
    MaxCollapseDelay        = 000
    CollapseDamping         = .5
    MaxShudder              = 0.6
    MinBurstDelay           = 250
    MaxBurstDelay           = 800
    BigBurstFrequency       = 4
    FXList                  = INITIAL   FX_StructureMediumCollapse

  End
  
  Geometry              = CYLINDER
  GeometryMajorRadius   = 50.0
  GeometryMinorRadius   = 0
  GeometryHeight        = 31.0
  
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
End

;------------------------------------------------------------------------------


Object IBCastleFloor

  ; *** ART Parameters ***
  Draw = W3DFloorDraw ModuleTag_01
    StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD
      ModelName = IBCastFloor
		ForceToBack = Yes
  End


	Draw = W3DScriptedModelDraw ModuleTag_Draw2
	    DefaultModelConditionState
			Model = OBBFoundationX
		End
		ModelConditionState = WORLD_BUILDER
  			Model = IBSizeTemplate
  		End
		
	End


	; *** AUDIO Parameters ***

	VoiceSelect		= Gui_PlotSelect


  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:IBCastFloor
  Side = Isengard
  EditorSorting = STRUCTURE
; Browser = CINEMATICS UNIT

  ArmorSet
    Conditions        = None
    Armor             = NoArmor
    DamageFX          = None
  End

  ; *** ENGINEERING Parameters ***  
  KindOf                = STRUCTURE IMMOBILE NO_COLLIDE UNATTACKABLE INERT 
  RadarPriority = NOT_ON_RADAR
  Body                  = ImmortalBody ModuleTag_03
    MaxHealth       = 2000.0
  End

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
  Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 1000
  End
  
  Geometry              = BOX
  GeometryMajorRadius   = 0.8
  GeometryMinorRadius   = 0.8
  GeometryHeight        = 0.8
  GeometryIsSmall       = Yes
  ;GeometryRotationAnchorOffset = X:1037.871 Y:0
  Shadow                = SHADOW_VOLUME
End

;------------------------------------------------------------------------------


Object IBCampFloor

  ; *** ART Parameters ***
  Draw = W3DFloorDraw ModuleTag_01
    StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD
      ModelName = IBCampFloor
		ForceToBack = Yes
  End
  ; *** AUDIO Parameters ***

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:IBCampFloor
  Side = Isengard
  EditorSorting = STRUCTURE
; Browser = CINEMATICS UNIT

  ArmorSet
    Conditions        = None
    Armor             = NoArmor
    DamageFX          = None
  End

  ; *** ENGINEERING Parameters ***  
  KindOf                = STRUCTURE IMMOBILE NO_COLLIDE UNATTACKABLE INERT 
  RadarPriority = NOT_ON_RADAR
  Body                  = ImmortalBody ModuleTag_03
    MaxHealth       = 2000.0
  End

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
  Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 1000
  End
  
  Geometry              = BOX
  GeometryMajorRadius   = 0.8
  GeometryMinorRadius   = 0.8
  GeometryHeight        = 0.8
  GeometryIsSmall       = Yes
  ;GeometryRotationAnchorOffset = X:1037.871 Y:0
  Shadow                = SHADOW_VOLUME
End
;------------------------------------------------------------------------------
 
;Isengard Tent
Object IsengardTent
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day
 
  Draw                = W3DScriptedModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
 
    DefaultModelConditionState
      Model           = IBTent
    End
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:IsengardTent
  Side                = Isengard
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 0
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 161
;  ArmorSet
;    Conditions        = None
;    Armor             = StructureArmor
;    DamageFX          = StructureDamageFXNoShake
;  End
;  CommandSet          = IsengardTentCommandSet
 

  ; *** AUDIO Parameters ***
;  VoiceSelect         = NuclearReactorSelect
;  SoundOnDamaged        = BuildingDamagedStateLight
;  SoundOnReallyDamaged  = BuildingDestroy
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End

  ; *** ENGINEERING Parameters ***
  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE MADE_OF_WOOD
 
  Behavior            = GettingBuiltBehavior ModuleTag_04
    SelfBuildingLoop = BuildingConstructionLoop ; Only played if we DON'T spawn a worker
	SelfRepairFromDamageLoop  = NoSound         ; This doesn't cause an animation, so don't bother playing a sound
	SelfRepairFromRubbleLoop  = BuildingConstructionLoop
  End
 
   Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  Body                = StructureBody ModuleTag_05
    MaxHealth         = 1500.0
  End
 
  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End
 
  Behavior = UpgradeDie  UpgradeDieModuleTag
    ;This frees the object based upgrade for the producer object.
    DeathTypes = ALL
    UpgradeToRemove     = Upgrade_TestBuilding BaseUpgradeTag_01
  End
 
;  Behavior           = CreateObjectDie ModuleTag_08
;    CreationList     = OCL_SmallStructureDebris
;  End
 
;  Behavior = ProductionUpdate ModuleTag_10
;    ; nothing, but is required if we have any Object-level Upgrades!
;  End
 
;  Behavior = FlammableUpdate ModuleTag_14
;    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
;    AflameDamageAmount = 5       ; taking this much damage...
;    AflameDamageDelay = 500       ; this often.
;  End
 
;  Behavior = TransitionDamageFX ModuleTag_15
;    ;-------------DESIGNED FOR SMALL SIZED FACTION BUILDING TRANSITIONS-------------------
;    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
;    ;---------------------------------------------------------------------------------------
;    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
;    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
;    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
;  End
 
;  Behavior             = FXListDie ModuleTag_16
;    DeathFX       = FX_BuildingDie
;  End
 
 
  Geometry              = BOX
  GeometryMajorRadius   = 33.6
  GeometryMinorRadius   = 37.0
  GeometryHeight        = 31.8
  
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER
End

;------------------------------------------------------------------------------------------
;Isengard Battle Tower
Object IsengardBattleTower

	SelectPortrait = BPIBattleTwr

  	; *** ART Parameters ***
	ButtonImage = BRBattleTower
	  
	; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_Draw
  
	ExtraPublicBone	= ARROWBONE01
	ExtraPublicBone	= ARROWBONE02
	ExtraPublicBone	= ARROWBONE03
	ExtraPublicBone	= ARROWBONE04
	ExtraPublicBone	= ARROWBONE05
	ExtraPublicBone	= ARROWBONE06
	ExtraPublicBone	= ARROWBONE07
	ExtraPublicBone	= ARROWBONE08
	ExtraPublicBone	= ARROWBONE09
	ExtraPublicBone	= ARROWBONE10
	ExtraPublicBone	= ARROWBONE11
	ExtraPublicBone	= ARROWBONE12
  
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
		Model = IBBtlTwr
		WeaponLaunchBone = PRIMARY ARROWBONE
    End

	IdleAnimationState
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "BeingConstructed" then 
			    ; Don't play completed sound when canceling build-in-progress or when
			    ; destroyed halfway
			    if not CurDrawableModelcondition( "DYING" ) then 
					CurDrawablePlaySound("CampOrcCompleteKeep")
				end
			end
		EndScript
	End

    
     ;------------ build up states---------------
    ModelConditionState   = AWAITING_CONSTRUCTION 
      Model               = IBBtlTwr_A
;		ParticleSysBone	  = NONE BuildingDoughnutCloud
    End;
    AnimationState        = AWAITING_CONSTRUCTION
      Animation           =  IBBtlTwr_A
        AnimationName     =  IBBtlTwr_A.IBBtlTwr_A
        AnimationMode     = MANUAL
        AnimationBlendTime = 0
      End
	  Flags				  = START_FRAME_FIRST
    End

    ModelConditionState   = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
      Model               = IBBtlTwr_A
		ParticleSysBone   = CONSTDUSTBONE01 BuildingContructDust FollowBone:Yes
    End;
    
    AnimationState        = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
		Animation           = IBBtlTwr_A
			AnimationName     = IBBtlTwr_A.IBBtlTwr_A
			AnimationMode     = MANUAL
			AnimationBlendTime = 0
		End
		Flags				  = START_FRAME_FIRST
		StateName			  = BeingConstructed
		BeginScript
			CurDrawablePlaySound("GondorBarracksBeginConstruction")
		EndScript
    End
    
      ;--damaged building
    ModelConditionState  = DESTROYED_FRONT
      Model         = IBBtlTwr_D2 

     	ParticleSysBone FXbone01 FireBuildingLarge
     	ParticleSysBone FXbone02 SmokeBuildingLarge
    End
    AnimationState = DESTROYED_FRONT
      BeginScript
        CurDrawableHideSubObject("IBBtlTwr_D2a")
      EndScript
    End
    
        ModelConditionState  = DESTROYED_RIGHT
      Model         =  IBBtlTwr_D2 
     	ParticleSysBone FXbone01 FireBuildingLarge
     	ParticleSysBone FXbone02 SmokeBuildingLarge
    End

    AnimationState = DESTROYED_RIGHT
      BeginScript
        CurDrawableHideSubObject("IBBtlTwr_D2b")
      EndScript
    End
    

    ModelConditionState  = DESTROYED_BACK
      Model         =  IBBtlTwr_D2   
     	ParticleSysBone FXbone01 FireBuildingLarge
     	ParticleSysBone FXbone02 SmokeBuildingLarge
    End

    AnimationState = DESTROYED_BACK
      BeginScript
        CurDrawableHideSubObject("IBBtlTwr_D2c")
      EndScript
    End

	ModelConditionState  = DESTROYED_LEFT
      Model         =  IBBtlTwr_D2   
     	ParticleSysBone FXbone01 FireBuildingLarge
     	ParticleSysBone FXbone02 SmokeBuildingLarge
    End
    
    AnimationState = DESTROYED_LEFT
      BeginScript
        CurDrawableHideSubObject("IBBtlTwr_D2d")
      EndScript
    End
    
    
    ModelConditionState  = DAMAGED
      Model         =  IBBtlTwr_D1   
		ParticleSysBone NONE SmokeBuildingLarge
    End
    AnimationState = DAMAGED
     EnteringStateFX	= FX_BuildingDamaged
    End

    ModelConditionState  = REALLYDAMAGED
      Model         =  IBBtlTwr_D2 
	
     	ParticleSysBone FXbone01 FireBuildingLarge
     	ParticleSysBone FXbone02 SmokeBuildingLarge
    End
    AnimationState = REALLYDAMAGED
     	EnteringStateFX	= FX_BuildingDamaged
    End

    ModelConditionState  = RUBBLE
      Model         =  IBBtlTwr_D2 
      ParticleSysBone FXbone01 SmokeBuildingLarge
    End
    
    AnimationState = RUBBLE
      BeginScript
        CurDrawableHideSubObject("IBBtlTwr_D2a")
        CurDrawableHideSubObject("IBBtlTwr_D2b")
        CurDrawableHideSubObject("IBBtlTwr_D2c")
        CurDrawableHideSubObject("IBBtlTwr_D2d")
      EndScript
    End

    ModelConditionState  = POST_RUBBLE
		Model         = None
		ParticleSysBone NONE SmokeBuildingMediumRubble
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
		ParticleSysBone NONE SmokeBuildingMediumRubble
    End

  End

	Draw = W3DFloorDraw ModuleTag_Draw_Bib
		ModelName = IBBtlTwr_Bib
	End
   
  PlacementViewAngle  = 180
 
	; ***DESIGN parameters ***
	DisplayName         = OBJECT:IsengardBattleTower
	Side                = Isengard
	EditorSorting       = STRUCTURE
	ThreatLevel = 1.0
	 
	BuildCost           = 700
	BuildTime           = 20.0           ; in seconds
	VisionRange         = VISION_BASE_DEFENSE
	ShroudClearingRange = SHROUD_CLEAR_BASE_DEFENSE	

  CommandSet = BattleTowerCommandSet
  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    ;DamageFX          = StructureDamageFXNoShake
  End

	WeaponSet
		Conditions			= None
		Weapon				= PRIMARY KeepBow
		AutoChooseSources	= PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End


	; *** AUDIO Parameters ***

	VoiceSelect		= IsengardKeepSelect

	SoundOnDamaged		= BuildingLightDamageStone
	SoundOnReallyDamaged	= BuildingHeavyDamageStone

	VoiceSelectUnderConstruction	= BuildingEvilVoiceSelectUnderConstruction

	UnitSpecificSounds
		UnderConstruction		= BuildingConstructionLoop  ; Built first time
		; UnderRepairFromDamage	= NoSound					; Repaired No animation on the building, so don't bother playing sound
		UnderRepairFromRubble	= BuildingConstructionLoop	; Repaired from completely destroyed (not used???)
	End


	; *** ENGINEERING Parameters ***

	RadarPriority       = STRUCTURE
	KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE NEED_BASE_FOUNDATION CAN_ATTACK MADE_OF_WOOD	; GARRISON GARRISONABLE_UNTIL_DESTROYED
	 
	Behavior            = GettingBuiltBehavior ModuleTag_04
		WorkerName		  = MordorWorkerNoSelect
	End


	Body                      = StructureBody ModuleTag_05
		MaxHealth               = 2000.0
		MaxHealthDamaged        = 1300.0
		MaxHealthReallyDamaged  = 700.0
		DamageCreationList = OCL_BuildingDamageList01 CATAPULT_ROCK
	    
	;	DamageCreationList = OCL_IBBtlTwrD2_Chunk1 CATAPULT_ROCK FRONT_DESTROYED
	;	DamageCreationList = OCL_IBBtlTwrD2_Chunk2 CATAPULT_ROCK RIGHT_DESTROYED
	;	DamageCreationList = OCL_IBBtlTwrD2_Chunk3 CATAPULT_ROCK BACK_DESTROYED
	;	DamageCreationList = OCL_IBBtlTwrD2_Chunk4 CATAPULT_ROCK LEFT_DESTROYED
	End

 
	Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
		DestructionDelay  = 5000
	End
	  

	Behavior                  = StructureCollapseUpdate ModuleTag_StructureCollapseUpdate 
		MinCollapseDelay        = 000
		MaxCollapseDelay        = 000
		CollapseDamping         = .5
		MaxShudder              = 0.6
		MinBurstDelay           = 250
		MaxBurstDelay           = 800
		BigBurstFrequency       = 4
		FXList                  = INITIAL   FX_StructureMediumCollapse
		FXList                  = ALMOST_FINAL  FX_StructureAlmostCollapse
		DestroyObjectWhenDone	= Yes
		CollapseHeight			= 89
	End
	
	Behavior = CastleMemberBehavior ModuleTag_CMB
	End 

	Behavior       = EvacuateDamage ModuleTag_evacuateDamage
		WeaponThatCausesEvacuation  = MordorCatapultHumanHeads
	End

	Behavior = AIUpdateInterface ModuleTag_SoWeCanUseWeapon
 		AutoAcquireEnemiesWhenIdle	= Yes
 		MoodAttackCheckRate			= 250
		AILuaEventsList				= GarrisonableFunctions
 	End

;	Behavior = HordeGarrisonContain ModuleTag_hordeGarrison
;		ObjectStatusOfContained	= UNSELECTABLE CAN_ATTACK
;		ContainMax              = 4
;		MaxHordeCapacity        = 4
;		DamagePercentToUnits    = 0%
;		PassengerFilter			= ANY +INFANTRY +HORDE -CAVALRY
;		AllowEnemiesInside      = Yes
;		AllowNeutralInside      = Yes
;		NumberOfExitPaths       = 1 ; Defaults to 1.  Set 0 to not use ExitStart/ExitEnd, set higher than 1 to use ExitStart01-nn/ExitEnd01-nn
;		PassengerBonePrefix     = PassengerBone:ARROWBONE KindOf:INFANTRY
;		EntryPosition			= X:0.0 Y:0.0 Z:0.0
;		EntryOffset				= X:-45.0 Y:0.0 Z:0.0
;		ExitOffset				= X:-45.0 Y:0.0 Z:0.0
;		
;		;PassengersTestCollisionHeight = 80
;		;Slots                         = 1
;		;EnterSound                     = GarrisonEnter
;		;ExitSound                      = GarrisonExit
;		;ExitDelay               = 250
;		;GoAggressiveOnExit      = Yes ; AI Will tell people to set their mood to Aggressive on exiting
;		;ForceOrientationContainer = No  ; otherwise contained units can't orient themselves towards their targets...
;	End 

	GeometryContactPoint = X:20.0	Y:-20.0	Z:0		Repair

	Geometry              = BOX
	GeometryMajorRadius   = 13.0
	GeometryMinorRadius   = 12.4
	GeometryHeight        = 119
	GeometryOffset		  = X:5 Y:0 Z:0
	
	GeometryIsSmall       = No
	Shadow                = SHADOW_VOLUME
	BuildCompletion     = PLACED_BY_PLAYER
End

 
;------------------------------------------------------------------------------
 
;Isengard Tent2
Object IsengardTent2
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day
 
  Draw                = W3DScriptedModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
 
    DefaultModelConditionState
      Model           = IBTent2
    End
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:IsengardTent2
  Side                = Isengard       
  EditorSorting		  = STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 0
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 161
;  ArmorSet
;    Conditions        = None
;    Armor             = StructureArmor
;    DamageFX          = StructureDamageFXNoShake
;  End
;  CommandSet          = IsengardTentCommandSet
 
 
  ; *** AUDIO Parameters ***
;  VoiceSelect         = NuclearReactorSelect
;  SoundOnDamaged        = BuildingDamagedStateLight
;  SoundOnReallyDamaged  = BuildingDestroy
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 
  ; *** ENGINEERING Parameters ***
  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE MADE_OF_WOOD
 
  Behavior            = GettingBuiltBehavior ModuleTag_04
    SelfBuildingLoop = BuildingConstructionLoop ; Only played if we DON'T spawn a worker
	SelfRepairFromDamageLoop  = NoSound         ; This doesn't cause an animation, so don't bother playing a sound
	SelfRepairFromRubbleLoop  = BuildingConstructionLoop
  End
 
  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  Body                = StructureBody ModuleTag_05
    MaxHealth         = 1500.0
  End
 
  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End
 
  Behavior = UpgradeDie  UpgradeDieModuleTag
    ;This frees the object based upgrade for the producer object.
    DeathTypes = ALL
    UpgradeToRemove     = Upgrade_TestBuilding_2 BaseUpgradeTag_02
  End
 
;  Behavior           = CreateObjectDie ModuleTag_08
;    CreationList     = OCL_SmallStructureDebris
;  End
 
;  Behavior = ProductionUpdate ModuleTag_10
;    ; nothing, but is required if we have any Object-level Upgrades!
;  End
 
;  Behavior = FlammableUpdate ModuleTag_14
;    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
;    AflameDamageAmount = 5       ; taking this much damage...
;    AflameDamageDelay = 500       ; this often.
;  End
 
;  Behavior = TransitionDamageFX ModuleTag_15
;    ;-------------DESIGNED FOR SMALL SIZED FACTION BUILDING TRANSITIONS-------------------
;    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
;    ;---------------------------------------------------------------------------------------
;    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
;    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
;    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
;  End
 
;  Behavior             = FXListDie ModuleTag_16
;    DeathFX       = FX_BuildingDie
;  End
 
  Geometry              = CYLINDER
  GeometryMajorRadius   = 50.0
  GeometryMinorRadius   = 0
  GeometryHeight        = 31.0
  
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER
End
 
;------------------------------------------------------------------------------

;Isengard Building Foundation -- the area where faction Isengard buildings can be built on
Object IsengardBuildingFoundation
 
 SelectPortrait = BPICamp_Plot
 
  ; *** ART Parameters ***

  
	Draw = W3DScriptedModelDraw ModuleTag_Draw2
	    DefaultModelConditionState
			Model = OBBFoundationX
		End
		ModelConditionState = WORLD_BUILDER
  			Model = MBSizeTemplate
  		End
		
	End
	
	Draw = W3DFloorDraw ModuleTag_Draw
		ModelName = IBFoundationX
	End
  
  ;PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:IsengardBuildingFoundation
  Side                = Isengard
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 161

  CommandSet = IsengardFoundationCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = Gui_PlotSelect

  ; *** ENGINEERING Parameters ***
  RadarPriority       = STRUCTURE
  KindOf              = STRUCTURE SELECTABLE IMMOBILE BASE_FOUNDATION UNATTACKABLE MP_COUNT_FOR_VICTORY NO_COLLIDE DO_NOT_CLASSIFY
 
  Behavior            = FoundationAIUpdate ModuleTag_foundationAI
  End

  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  Body                = ImmortalBody ModuleTag_05
    MaxHealth         = 15000.0
  End
 
  Geometry              = BOX
  GeometryMajorRadius   = 24.0
  GeometryMinorRadius   = 24.0
  GeometryHeight        = 0.8
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  BuildCompletion		= PLACED_BY_PLAYER
End

;------------------------------------------------------------------------------
;Isengard Uruk Pit
Object IsengardUrukPit

	SelectPortrait = BPIUrukPit
 
  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
	StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD  
    DefaultModelConditionState
      Model = IBUrukPit_SKN
    End
 
    IdleAnimationState
		StateName				= STATE_Idle
		Animation				= IdleB
			AnimationName		= IBUrukPit_SKL.IBUrukPit_SPNA
			AnimationMode		= ONCE
			AnimationPriority	= 10 
		End		
		Flags               = RESTART_ANIM_WHEN_COMPLETE

		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "BeingConstructed" then 
			    ; Don't play completed sound when canceling build-in-progress or when
			    ; destroyed halfway
			    if not CurDrawableModelcondition( "DYING" ) then 
					CurDrawablePlaySound("CampOrcCompleteUrukPit")
				end
			end
		EndScript	

;		BeginScript
;			Prev = CurDrawablePrevAnimationState()
;			if Prev == "ActivelyConstructing" then CurDrawableSetTransitionAnimState("TRANS_IDLA_TO_SPNA") end
;		EndScript 
	End


    ;------------ New Build Up States coming soon. 
    ModelConditionState   = AWAITING_CONSTRUCTION 
      Model               = IBUrukPit_A
;		ParticleSysBone	  = NONE BuildingDoughnutCloud
    End;
    AnimationState        = AWAITING_CONSTRUCTION
      Animation           =  IBUrukPit_A
        AnimationName     =  IBUrukPit_ASKL.IBUrukPit_ABLD
        AnimationMode     = MANUAL
      End
	  Flags				  = START_FRAME_FIRST
    End

    ModelConditionState   = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
      Model               = IBUrukPit_A
		ParticleSysBone   = CONSTDUSTBONE01 BuildingContructDust FollowBone:Yes    
    End
    AnimationState        = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
		Animation           = IBUrukPit_A
			AnimationName     = IBUrukPit_ASKL.IBUrukPit_ABLD
			AnimationMode     = MANUAL
		End
		Flags				  = START_FRAME_FIRST
		StateName			  = BeingConstructed
		BeginScript
			CurDrawablePlaySound("GondorBarracksBeginConstruction")
		EndScript
    End
    
    ;--------------damaged states
        
      ModelConditionState  = DESTROYED_FRONT
      Model         = IBUrukPit_D2  
			ParticleSysBone FireSmall01 FireBuildingLarge
			ParticleSysBone FireSmall02 FireBuildingLarge
			ParticleSysBone FireSmall03 FireBuildingMedium
			ParticleSysBone FireSmall04 SmokeBuildingLarge
			ParticleSysBone FireSmall05 FireBuildingLarge 
    End
    AnimationState = DESTROYED_FRONT
      BeginScript
        CurDrawableHideSubObject("DamagePiece01")
      EndScript
    End
    
        ModelConditionState  = DESTROYED_RIGHT
      Model         = IBUrukPit_D2  
			ParticleSysBone FireSmall01 FireBuildingLarge
			ParticleSysBone FireSmall02 FireBuildingLarge
			ParticleSysBone FireSmall03 FireBuildingMedium
			ParticleSysBone FireSmall04 SmokeBuildingLarge
			ParticleSysBone FireSmall05 FireBuildingLarge 
    End

    AnimationState = DESTROYED_RIGHT
      BeginScript
        CurDrawableHideSubObject("DamagePiece02")
      EndScript
    End
    

    ModelConditionState  = DESTROYED_BACK
      Model         = IBUrukPit_D2  
			ParticleSysBone FireSmall01 FireBuildingLarge
			ParticleSysBone FireSmall02 FireBuildingLarge
			ParticleSysBone FireSmall03 FireBuildingMedium
			ParticleSysBone FireSmall04 SmokeBuildingLarge
			ParticleSysBone FireSmall05 FireBuildingLarge 
    End

    AnimationState = DESTROYED_BACK
      BeginScript
        CurDrawableHideSubObject("DamagePiece03")
      EndScript
    End

	ModelConditionState  = DESTROYED_LEFT
      Model         = IBUrukPit_D2  
			ParticleSysBone FireSmall01 FireBuildingLarge
			ParticleSysBone FireSmall02 FireBuildingLarge
			ParticleSysBone FireSmall03 FireBuildingMedium
			ParticleSysBone FireSmall04 SmokeBuildingLarge
			ParticleSysBone FireSmall05 FireBuildingLarge 
    End
    
    AnimationState = DESTROYED_LEFT
      BeginScript
        CurDrawableHideSubObject("DamagePiece04")
      EndScript
    End
    
    
    ModelConditionState  = DAMAGED
      Model         = IBUrukPit_D1  
			ParticleSysBone FireSmall01 FireBuildingLarge
			ParticleSysBone FireSmall02 FireBuildingMedium
			ParticleSysBone FireSmall03 FireBuildingMedium
			ParticleSysBone FireSmall04 SmokeBuildingLarge
			ParticleSysBone FireSmall05 FireBuildingMedium 	
    End
    AnimationState = DAMAGED
     EnteringStateFX	= FX_BuildingDamaged
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = IBUrukPit_D2  
			ParticleSysBone FireSmall01 FireBuildingLarge
			ParticleSysBone FireSmall02 FireBuildingLarge
			ParticleSysBone FireSmall03 FireBuildingMedium
			ParticleSysBone FireSmall04 SmokeBuildingLarge
			ParticleSysBone FireSmall05 FireBuildingLarge 
    End
    AnimationState = REALLYDAMAGED
     	EnteringStateFX	= FX_BuildingReallyDamaged
    End

    ModelConditionState  = RUBBLE
      Model         = IBUrukPit_D2  
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End
    
    AnimationState = RUBBLE
      BeginScript
        CurDrawableHideSubObject("DamagePiece01")
        CurDrawableHideSubObject("DamagePiece02")
        CurDrawableHideSubObject("DamagePiece03")
        CurDrawableHideSubObject("DamagePiece04")
      EndScript
    End

    ModelConditionState  = POST_RUBBLE
		Model         = None
		ParticleSysBone NONE SmokeBuildingMediumRubble
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
		ParticleSysBone NONE SmokeBuildingMediumRubble
    End
    
	
	;------------Transition States
;	TransitionState       = TRANS_IDLA_TO_SPNA
;		Animation           = IDLB
;			AnimationName     = IBUrukPit_SKL.IBUrukPit_IDLB
;			AnimationMode     = ONCE
;		End
;	End
	
;	TransitionState       = TRANS_SPNA_TO_ILDA
;		Animation           = IDLC
;			AnimationName     = IBUrukPit_SKL.IBUrukPit_IDLC
;			AnimationMode     = ONCE
;		End
;	End
	;------------Transition States
	
  End
  
  Draw = W3DFloorDraw DrawFloor_Bib    
		StaticModelLODMode = Yes		; THIS NEEDS TO BE COMMENTED OUT WHEN ENGINEERING ENABLES LOD'S IN THE FLOOR DRAW
     ModelName = IBUrukPit_Bib
  End
  Draw = W3DFloorDraw DrawFloor_V1  
     ModelName = IBUrukPit_V1
	StartHidden = Yes
  End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:IsengardUrukPit
  Description 	      = OBJECT:IsengardUrukPitDescription
  Side                = Isengard
  EditorSorting       = STRUCTURE
  PlacementViewAngle  = 90
  ThreatLevel = 1.0
 
  BuildCost           = ISENGARD_URUKPIT_BUILDCOST            ; BALANCE
  BuildTime           = ISENGARD_URUKPIT_BUILDTIME			; BALANCE
  VisionRange         = ISENGARD_URUKPIT_VISIONRANGE			; Shroud clearing distance
  ShroudClearingRange = ISENGARD_URUKPIT_SHROUDCLEAR
  BountyValue         = ISENGARD_URUKPIT_BOUNTY_VALUE 			

  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    ;DamageFX          = StructureDamageFXNoShake
  End



; For Testing Purposes
 CommandSet = IsengardUrukPitCommandSet


  ; *** AUDIO Parameters ***

	VoiceSelect		= IsengardUrukPitSelect

	SoundOnDamaged		= BuildingLightDamageStone
	SoundOnReallyDamaged	= BuildingHeavyDamageStone

	VoiceSelectUnderConstruction	= BuildingEvilVoiceSelectUnderConstruction

	UnitSpecificSounds
		UnderConstruction		= BuildingConstructionLoop  ; Built first time
		; UnderRepairFromDamage	= NoSound					; Repaired No animation on the building, so don't bother playing sound
		UnderRepairFromRubble	= BuildingConstructionLoop	; Repaired from completely destroyed (not used???)
	End
 

  ; *** ENGINEERING Parameters ***

  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE NEED_BASE_FOUNDATION FS_FACTORY MP_COUNT_FOR_VICTORY AUTO_RALLYPOINT MADE_OF_DIRT FACE_AWAY_FROM_CASTLE_KEEP

  Behavior = ProductionUpdate ProductionUpdateModuleTag
	  VeteranUnitsFromVeteranFactory = No ;I am higher than my default level, I will give a free level to those I produce
  End
 
  Behavior            = GettingBuiltBehavior GetBuiltBehaviorTag
    WorkerName		  = MordorWorkerNoSelect
  End

  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  Body                = StructureBody ModuleTag_05
    MaxHealth 			    = ISENGARD_URUKPIT_MAXHEALTH			
    MaxHealthDamaged		    = ISENGARD_URUKPIT_MAXHEALTHDAMAGED			
	MaxHealthReallyDamaged		= ISENGARD_URUKPIT_MAXHEALTH_REALLYDAMAGED			
    DamageCreationList		= OCL_BuildingDamageList01 CATAPULT_ROCK
  
    DamageCreationList		= OCL_IBUrukPit_Chunk1 CATAPULT_ROCK FRONT_DESTROYED
    DamageCreationList		= OCL_IBUrukPit_Chunk2 CATAPULT_ROCK RIGHT_DESTROYED
    DamageCreationList		= OCL_IBUrukPit_Chunk3 CATAPULT_ROCK BACK_DESTROYED
    DamageCreationList		= OCL_IBUrukPit_Chunk4 CATAPULT_ROCK LEFT_DESTROYED
  End
 
	Behavior                  = StructureCollapseUpdate ModuleTag_StructureCollapseUpdate 
		MinCollapseDelay        = 000
		MaxCollapseDelay        = 000
		CollapseDamping         = .5
		MaxShudder              = 0.6
		MinBurstDelay           = 250
		MaxBurstDelay           = 800
		BigBurstFrequency       = 4
		FXList                  = INITIAL   FX_StructureMediumCollapse
		FXList                  = ALMOST_FINAL  FX_StructureAlmostCollapse
		DestroyObjectWhenDone	= Yes
		CollapseHeight			= 89
	End
 
  Behavior = QueueProductionExitUpdate ModuleTag_11
	PlacementViewAngle  = -90

    UnitCreatePoint   = X:46.0 Y:-10.0 Z:0.0 ;moved this because uruks were popping from the back of the structure
    NaturalRallyPoint = X:46.0 Y:-60.0 Z:0.0 ;NaturalRallyPointX must always match GeometryMajorRadius! 

    ExitDelay = 300 ; For the hordes.  Make them come out one at a time.
	
  End  

;  Behavior           = CreateObjectDie ModuleTag_08
;    CreationList     = OCL_SmallStructureDebris
;  End
 
;  Behavior = FlammableUpdate ModuleTag_14
;    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
;    AflameDamageAmount = 5       ; taking this much damage...
;    AflameDamageDelay = 500       ; this often.
;  End
 
;  Behavior = TransitionDamageFX ModuleTag_15
;    ;-------------DESIGNED FOR SMALL SIZED FACTION BUILDING TRANSITIONS-------------------
;    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
;    ;---------------------------------------------------------------------------------------
;    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
;    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
;    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
;  End
 
;  Behavior             = FXListDie ModuleTag_16
;    DeathFX       = FX_BuildingDie
;  End

    Behavior = SubObjectsUpgrade ModuleTag_HideAll
		TriggeredBy		= Upgrade_StructureLevel1
		ShowSubObjects	= DrawFloor_Bib
		HideSubObjects	= DrawFloor_V1 V2
	End
  	Behavior = SubObjectsUpgrade ModuleTag_ShowWalls 
		TriggeredBy		= Upgrade_StructureLevel2
		ShowSubObjects	= DrawFloor_V1
		HideSubObjects	= DrawFloor_Bib V2
	End
	Behavior = SubObjectsUpgrade ModuleTag_ShowFlagsAndTower 
		TriggeredBy		= Upgrade_StructureLevel3
		ShowSubObjects	= DrawFloor_V1 V2
		HideSubObjects	= DrawFloor_Bib
	End 
	
	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
	  MaxUpdateRangeCap = 800
	  AnimationSound = Sound: IsengardUrukPitLift Animation:IBUrukPit_SKL.IBUrukPit_SPNA Frames: 134
	  AnimationSound = Sound: IsengardUrukPitThrow Animation:IBUrukPit_SKL.IBUrukPit_SPNA Frames: 196
	  AnimationSound = Sound: IsengardUrukPitBodyfall Animation:IBUrukPit_SKL.IBUrukPit_SPNA Frames: 211
	  AnimationSound = Sound: IsengardUrukPitSlide Animation:IBUrukPit_SKL.IBUrukPit_SPNA Frames: 250
    End
  
 
  Geometry              = CYLINDER
  GeometryMajorRadius   = 32.4
  GeometryMinorRadius   = 32.4
  GeometryHeight        = 46.0
  GeometryOffset		= X:-11.5 Y:19.5 Z:0
  
  AdditionalGeometry    = CYLINDER
  GeometryMajorRadius   = 47.0
  GeometryMinorRadius   = 42.0
  GeometryHeight        = 30.0	
  GeometryOffset		= X:30 Y:-4.5 Z:0

  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER
  
  GeometryContactPoint	= X:-35.506		Y:47.357	Z:0			Repair
  GeometryContactPoint	= X:73.28		Y:-30.338	Z:0			Repair
  GeometryContactPoint	= X:35.77		Y:30.726	Z:0
  GeometryContactPoint	= X:-23.681		Y:-27.011	Z:0
  GeometryContactPoint	= X:-14.612		Y:24.179	Z:61.446	Swoop

End

;------------------------------------------------------------------------------
;Isengard Warg Pit
Object IsengardWargPit

	SelectPortrait = BPIWargPit
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor = Yes
    UseStandardModelNames = Yes
	StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD  
    DefaultModelConditionState
     Model           = IBWARGPIT
    End


    IdleAnimationState
	StateName = STATE_Idle
		Animation = IBWargPit_IDLA
	        AnimationName     = IBWARGPIT_SKL.IBWARGPIT_IDLA
			AnimationMode 	  = ONCE
			AnimationPriority	=	3
		End
		Animation = IBWargPit_IDLB
	        AnimationName     = IBWARGPIT_SKL.IBWARGPIT_IDLB
			AnimationMode 	  = ONCE
		End		
		Flags = RESTART_ANIM_WHEN_COMPLETE

		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "BeingConstructed" then 
			    ; Don't play completed sound when canceling build-in-progress or when
			    ; destroyed halfway
			    if not CurDrawableModelcondition( "DYING" ) then 
					CurDrawablePlaySound("CampOrcCompleteWargPit")
				end
			end
		EndScript
    End

    ;------------ New Build Up States coming soon. 
    ModelConditionState   = AWAITING_CONSTRUCTION 
      Model               = IBWargPit_A
;		ParticleSysBone	  = NONE BuildingDoughnutCloud
    End;
    AnimationState        = AWAITING_CONSTRUCTION
      Animation           =  IBWargPit_A
        AnimationName     =  IBWargPit_ASKL.IBWargPit_ABLDA
        AnimationMode     = MANUAL
        AnimationBlendTime = 0
      End
	  Flags				  = START_FRAME_FIRST
	  ;BeginScript
	  ;	CurDrawablePlaySound("GondorBarracksBeginConstruction")
	  ;EndScript
    End

    ModelConditionState   = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
      Model               = IBWargPit_A
		ParticleSysBone   = CONSTDUSTBONE01 BuildingContructDust FollowBone:Yes
    End;
    
    AnimationState        = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
		Animation           = IBWargPit_A
			AnimationName     = IBWargPit_ASKL.IBWargPit_ABLDA
			AnimationMode     = MANUAL
			AnimationBlendTime = 0
		End
		Flags				  = START_FRAME_FIRST
		StateName			  = BeingConstructed
		BeginScript
			CurDrawablePlaySound("GondorBarracksBeginConstruction")
		EndScript
    End
    
    
        ;--damaged building
      ModelConditionState  = DESTROYED_FRONT
      Model         = IBWargPit_D2  
      	ParticleSysBone FireSmall01 FireBuildingLarge
		ParticleSysBone FireSmall02 FireBuildingLarge
		ParticleSysBone FireSmall03 FireBuildingMedium
		ParticleSysBone FireSmall04 SmokeBuildingLarge
		ParticleSysBone FireSmall05 FireBuildingMedium 
    End
    AnimationState = DESTROYED_FRONT
      BeginScript
        CurDrawableHideSubObject("IBWargPitDP1")
      EndScript
    End
    
        ModelConditionState  = DESTROYED_RIGHT
      Model         = IBWargPit_D2  
      	ParticleSysBone FireSmall01 FireBuildingLarge
		ParticleSysBone FireSmall02 FireBuildingLarge
		ParticleSysBone FireSmall03 FireBuildingMedium
		ParticleSysBone FireSmall04 SmokeBuildingLarge
		ParticleSysBone FireSmall05 FireBuildingMedium 
    End

    AnimationState = DESTROYED_RIGHT
      BeginScript
        CurDrawableHideSubObject("IBWargPitDP2")
      EndScript
    End
    

    ModelConditionState  = DESTROYED_BACK
      Model         = IBWargPit_D2  
      	ParticleSysBone FireSmall01 FireBuildingLarge
		ParticleSysBone FireSmall02 FireBuildingLarge
		ParticleSysBone FireSmall03 FireBuildingMedium
		ParticleSysBone FireSmall04 SmokeBuildingLarge
		ParticleSysBone FireSmall05 FireBuildingMedium 
    End

    AnimationState = DESTROYED_BACK
      BeginScript
        CurDrawableHideSubObject("IBWargPitDP3")
      EndScript
    End

	ModelConditionState  = DESTROYED_LEFT
      Model         = IBWargPit_D2  
      	ParticleSysBone FireSmall01 FireBuildingLarge
		ParticleSysBone FireSmall02 FireBuildingLarge
		ParticleSysBone FireSmall03 FireBuildingMedium
		ParticleSysBone FireSmall04 SmokeBuildingLarge
		ParticleSysBone FireSmall05 FireBuildingMedium 
    End
    
    AnimationState = DESTROYED_LEFT
      BeginScript
        CurDrawableHideSubObject("IBWargPitDP4")
      EndScript
    End
    
    ModelConditionState  = DAMAGED
      Model         = IBWargPit_D1
      	ParticleSysBone FireSmall01 FireBuildingLarge
		ParticleSysBone FireSmall02 FireBuildingMedium
		ParticleSysBone FireSmall03 FireBuildingMedium
		ParticleSysBone FireSmall04 SmokeBuildingLarge
		ParticleSysBone FireSmall05 FireBuildingMedium 	  
    End
    AnimationState = DAMAGED
     EnteringStateFX	= FX_BuildingDamaged
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = IBWargPit_D2  
      	ParticleSysBone FireSmall01 FireBuildingLarge
		ParticleSysBone FireSmall02 FireBuildingLarge
		ParticleSysBone FireSmall03 FireBuildingMedium
		ParticleSysBone FireSmall04 SmokeBuildingLarge
		ParticleSysBone FireSmall05 FireBuildingMedium 	
    End
    AnimationState = REALLYDAMAGED
     	EnteringStateFX	= FX_BuildingDamaged
    End

    ModelConditionState  = RUBBLE
      Model         = IBWargPit_D2  
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End
    
    AnimationState = RUBBLE
      BeginScript
        CurDrawableHideSubObject("IBWargPitDP1")
        CurDrawableHideSubObject("IBWargPitDP2")
        CurDrawableHideSubObject("IBWargPitDP3")
        CurDrawableHideSubObject("IBWargPitDP4")
      EndScript
    End

    ModelConditionState  = POST_RUBBLE
		Model         = None
		ParticleSysBone NONE SmokeBuildingMediumRubble
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
		ParticleSysBone NONE SmokeBuildingMediumRubble
    End
  End
  
  
   ;----------the door
 Draw = W3DScriptedModelDraw ModuleTag_02
     
    DefaultModelConditionState
      Model = IBWARGPIT_DRC
    End
     
    
	ModelConditionState   = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
      Model               = IBWargpit_DRA
    End
    
	AnimationState        = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
		Animation           = IBWargpit_DRA
			AnimationName     = IBWargpit_DRA.IBWargpit_DRA
			AnimationMode     = MANUAL
		End
		Flags				  = START_FRAME_FIRST
	End
     
   ;--normal states
    ModelConditionState   = DOOR_1_OPENING
      Model               = IBWARGPIT_DROA
    End
    
	AnimationState			=	DOOR_1_OPENING
		Animation           =	IBWARGPIT_DRO
			AnimationName   =	IBWARGPIT_DROA.IBWARGPIT_DROA
			AnimationMode   =	ONCE	
			AnimationBlendTime = 0
		End
	;	Flags				=	START_FRAME_FIRST
   End 
   
   
   ModelConditionState   = DOOR_1_CLOSING
      Model               = IBWARGPIT_DRCA
		ParticleSysBone	  = NONE trollCageDust
    End;  
   
   	AnimationState			=	DOOR_1_CLOSING
		Animation           =	IBWARGPIT_DRCA
			AnimationName   =	IBWARGPIT_DRCA.IBWARGPIT_DRCA
			AnimationMode   =	ONCE
			AnimationBlendTime = 0
		End
	;	Flags				=	START_FRAME_FIRST
   End   
   
   
    ModelConditionState   = DOOR_1_WAITING_OPEN
      Model               = IBWARGPIT_DRO
		;ParticleSysBone	  = NONE BuildingDoughnutCloud
    End  
    
   AnimationState			=	DOOR_1_WAITING_OPEN
   End   

    ModelConditionState  = POST_RUBBLE
		Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
    End
  
 End

  Draw = W3DFloorDraw DrawFloor_Bib   
		StaticModelLODMode = Yes		; THIS NEEDS TO BE COMMENTED OUT WHEN ENGINEERING ENABLES LOD'S IN THE FLOOR DRAW
    ModelName = IBWARGPIT_Bib
  End
  Draw = W3DFloorDraw DrawFloor_V1    
    ModelName = IBWARGPIT_V1
	StartHidden = Yes
  End

  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:IsengardWargPit
  Description 	      = OBJECT:IsengardWargPitDescription
  Side                = Isengard
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = ISENGARD_WARGPIT_BUILDCOST			; BALANCE
  BuildTime           = ISENGARD_WARGPIT_BUILDTIME			; BALANCE
  VisionRange         = ISENGARD_WARGPIT_VISIONRANGE			; Shroud clearing distance
  ShroudClearingRange = ISENGARD_WARGPIT_SHROUDCLEAR
  BountyValue         =	ISENGARD_WARGPIT_BOUNTY_VALUE		

  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    ;DamageFX          = StructureDamageFXNoShake
  End



; For Testing Purposes
 CommandSet = IsengardWargPitCommandSet


  ; *** AUDIO Parameters ***

	VoiceSelect		= IsengardWargPitSelect

	SoundAmbient		= BuildingWargPitVoxSingles
	SoundOnDamaged		= BuildingLightDamageStone
	SoundOnReallyDamaged	= BuildingHeavyDamageStone
 
	VoiceSelectUnderConstruction	= BuildingEvilVoiceSelectUnderConstruction

	UnitSpecificSounds
		UnderConstruction		= BuildingConstructionLoop  ; Built first time
		; UnderRepairFromDamage	= NoSound					; Repaired No animation on the building, so don't bother playing sound
		UnderRepairFromRubble	= BuildingConstructionLoop	; Repaired from completely destroyed (not used???)
	End

	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		MaxUpdateRangeCap = 800
		AnimationSound = Sound:BuildingWargPitDoorCreak		Animation:IBWARGPIT_DRCA.IBWARGPIT_DRCA	Frames:0
		AnimationSound = Sound:BuildingWargPitDoorBang		Animation:IBWARGPIT_DRCA.IBWARGPIT_DRCA	Frames:27

		AnimationSound = Sound:BuildingWargPitDoorCreak		Animation:IBWARGPIT_DROA.IBWARGPIT_DROA	Frames:0
		AnimationSound = Sound:BuildingWargPitDoorBang		Animation:IBWARGPIT_DROA.IBWARGPIT_DROA	Frames:27

		AnimationSound = Sound:WargFootstep				Animation:IBWARGPIT_SKL.IBWARGPIT_IDLB	Frames:56 63 67 82 100 107 111
		AnimationSound = Sound:WargFootstep				Animation:IBWARGPIT_SKL.IBWARGPIT_IDLB	Frames:9 12 20 25 35 39 45 48 54
		AnimationSound = Sound:WargFootstep				Animation:IBWARGPIT_SKL.IBWARGPIT_IDLB	Frames:116 120 123 128 131 133
		AnimationSound = Sound:WargFootstep				Animation:IBWARGPIT_SKL.IBWARGPIT_IDLB	Frames:140 143 153 157 167 177
	End


  ; *** ENGINEERING Parameters ***

  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE NEED_BASE_FOUNDATION FS_FACTORY MP_COUNT_FOR_VICTORY AUTO_RALLYPOINT MADE_OF_WOOD FACE_AWAY_FROM_CASTLE_KEEP
 
  Behavior            = GettingBuiltBehavior GetBuiltBehaviorTag
    WorkerName		  = MordorWorkerNoSelect
  End

  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  Body                = StructureBody ModuleTag_05
    MaxHealth               = ISENGARD_WARGPIT_MAXHEALTH			
    MaxHealthDamaged		    = ISENGARD_WARGPIT_MAXHEALTHDAMAGED		
	  MaxHealthReallyDamaged	= ISENGARD_WARGPIT_MAXHEALTH_REALLYDAMAGED	
    DamageCreationList		= OCL_BuildingDamageList01 CATAPULT_ROCK
  
    DamageCreationList		= OCL_IBWargPit_Chunk1 CATAPULT_ROCK FRONT_DESTROYED
    DamageCreationList		= OCL_IBWargPit_Chunk2 CATAPULT_ROCK RIGHT_DESTROYED
    DamageCreationList		= OCL_IBWargPit_Chunk3 CATAPULT_ROCK BACK_DESTROYED
    DamageCreationList		= OCL_IBWargPit_Chunk4 CATAPULT_ROCK LEFT_DESTROYED
    
  End
	
	Behavior                = TransitionDamageFX ModuleTag_08
		ReallyDamagedFXList1  = Loc: X:0 Y:0 Z:0 FXList:FX_BuildingReallyDamagedTransitionMedium
	End

	Behavior = QueueProductionExitUpdate ModuleTag_Queue
		PlacementViewAngle		= 0

		UnitCreatePoint			= X:0.0 Y:-37.0 Z:0.0
		NaturalRallyPoint		= X:70.0 Y:-37.0 Z:0.0		;NaturalRallyPointX must always match GeometryMajorRadius! 

;		UnitCreatePoint			= X:50.279 Y:-36.914 Z:0.0
;		NaturalRallyPoint		= X:100.0 Y:0.0 Z:0.0		;NaturalRallyPointX must always match GeometryMajorRadius! 
		ExitDelay = 300 ; For the hordes.  Make them come out one at a time.
	End

	Behavior                  = StructureCollapseUpdate ModuleTag_StructureCollapseUpdate 
		MinCollapseDelay        = 000
		MaxCollapseDelay        = 000
		CollapseDamping         = .5
		MaxShudder              = 0.6
		MinBurstDelay           = 250
		MaxBurstDelay           = 800
		BigBurstFrequency       = 4
		FXList                  = INITIAL   FX_StructureMediumCollapse
		FXList                  = ALMOST_FINAL  FX_StructureAlmostCollapse
		DestroyObjectWhenDone	= Yes
		CollapseHeight			= 89
	End

  Behavior = ProductionUpdate ProductionUpdateModuleTag
  	NumDoorAnimations            = 1
    DoorOpeningTime              = 2000  ;in mSeconds how long you want doors to be in open state
    DoorWaitOpenTime             =2000  ;in mSeconds time the door stays open, so units can exit
    DoorCloseTime                = 3000  ;in mSeconds how long you want doors to be in open state
  End
   
    Behavior = SubObjectsUpgrade ModuleTag_HideAll
		TriggeredBy		= Upgrade_StructureLevel1
		ShowSubObjects	= DrawFloor_Bib 
		HideSubObjects	= DrawFloor_V1 V2
	End
  	Behavior = SubObjectsUpgrade ModuleTag_ShowWalls 
		TriggeredBy		= Upgrade_StructureLevel2
		ShowSubObjects	= DrawFloor_V1
		HideSubObjects	= DrawFloor_Bib V2
	End
	Behavior = SubObjectsUpgrade ModuleTag_ShowFlagsAndTower 
		TriggeredBy		= Upgrade_StructureLevel3
		ShowSubObjects	= DrawFloor_V1 V2
		HideSubObjects	= DrawFloor_Bib
	End 

;  Behavior           = CreateObjectDie ModuleTag_08
;    CreationList     = OCL_SmallStructureDebris
;  End
 
;  Behavior = ProductionUpdate ModuleTag_10
;    ; nothing, but is required if we have any Object-level Upgrades!
;  End
 
;  Behavior = FlammableUpdate ModuleTag_14
;    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
;    AflameDamageAmount = 5       ; taking this much damage...
;    AflameDamageDelay = 500       ; this often.
;  End
 
;  Behavior = TransitionDamageFX ModuleTag_15
;    ;-------------DESIGNED FOR SMALL SIZED FACTION BUILDING TRANSITIONS-------------------
;    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
;    ;---------------------------------------------------------------------------------------
;    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
;    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
;    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
;  End
 
;  Behavior             = FXListDie ModuleTag_16
;    DeathFX       = FX_BuildingDie
;  End
 
  Geometry              = BOX
  GeometryMajorRadius   = 26.0
  GeometryMinorRadius   = 13.0
  GeometryHeight        = 43.8
  GeometryOffset		= X:8.6 Y:-36.6 Z:0
  
  AdditionalGeometry	= CYLINDER
  GeometryMajorRadius   = 43.0
  GeometryMinorRadius   = 0
  GeometryHeight        = 23.8
  GeometryOffset		= X:-2.6 Y:11.6 Z:0
  
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER
  
  GeometryContactPoint	= X:-38.572		Y:33.011	Z:0			Repair
  GeometryContactPoint	= X:27.147		Y:-52.493	Z:0			Repair
  GeometryContactPoint	= X:27.147		Y:35.511	Z:0
  GeometryContactPoint	= X:-35.434		Y:-30.376	Z:0
  GeometryContactPoint	= X:-5.754		Y:-36.75	Z:46.762	Swoop

End

;------------------------------------------------------------------------------
;Isengard Siege Works
Object IsengardSiegeWorks

	SelectPortrait = BPISiegeWorks
 
	; *** ART Parameters ***
	Draw = W3DScriptedModelDraw ModuleTag_Draw

		ExtraPublicBone = ARROW_01
		ExtraPublicBone = ARROW_02
		ExtraPublicBone = ARROW_03
		ExtraPublicBone = ARROW_04
		ExtraPublicBone = ARROW_05
		ExtraPublicBone = ARROW_06
		ExtraPublicBone = ARROW_07
		ExtraPublicBone = ARROW_08
		ExtraPublicBone = ARROW_09
		ExtraPublicBone = ARROW_10
		ExtraPublicBone = ARROW_11
		ExtraPublicBone = ARROW_12

		OkToChangeModelColor  = Yes
		UseStandardModelNames = Yes
		StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD   
		DefaultModelConditionState
		Model = IBSeigeWork		 ;<-- @todo This should have an optimized model, not the build-up model
			ParticleSysBone     =  BN_FIRE05 SiegeWorkFire FollowBone:Yes
			ParticleSysBone     =  BN_FIRE06 SiegeWorkFire FollowBone:Yes 
			ParticleSysBone     =  BN_FIRE05 siegeWorkFireGlow FollowBone:Yes
			ParticleSysBone     =  BN_FIRE06 siegeWorkFireGlow FollowBone:Yes  
			WeaponLaunchBone	= PRIMARY ARROW_
		End
    
  	IdleAnimationState
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "BeingConstructed" then 
			    ; Don't play completed sound when canceling build-in-progress or when
			    ; destroyed halfway
			    if not CurDrawableModelcondition( "DYING" ) then 
					CurDrawablePlaySound("CampOrcCompleteSiegeWorks")
				end
			end
		EndScript
	End
  
		;------------Build Up States
		ModelConditionState   = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
			Model               = IBSeigeW_A
			ParticleSysBone   = CONSTDUSTBONE01 BuildingContructDust FollowBone:Yes
		End

		AnimationState        = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
			Animation           =IBSeigeW_A
				AnimationName     = IBSeigeW_ASKL.IBSeigeW_ABLD
				AnimationMode     = MANUAL
			End
			Flags			= START_FRAME_FIRST
			StateName		= BeingConstructed
			BeginScript
				CurDrawablePlaySound("GondorBarracksBeginConstruction")
			EndScript
		End
	  
	  
		;---------Damaged States
		ModelConditionState		= DESTROYED_FRONT
			Model					= IBSeigeWork_D2
			ParticleSysBone FireSmall01 FireBuildingLarge
			ParticleSysBone FireSmall02 FireBuildingLarge
			ParticleSysBone FireSmall03 FireBuildingMedium
			ParticleSysBone FireSmall04 SmokeBuildingLarge
			ParticleSysBone FireSmall05 FireBuildingLarge 
		End
		AnimationState			= DESTROYED_FRONT
		BeginScript
			CurDrawableHideSubObject("SeigeWorkDP1")
			CurDrawableHideSubObject("SeigeWorkDP1A")
		EndScript
		End
	    
		ModelConditionState		= DESTROYED_RIGHT
			Model					= IBSeigeWork_D2
			ParticleSysBone FireSmall01 FireBuildingLarge
			ParticleSysBone FireSmall02 FireBuildingLarge
			ParticleSysBone FireSmall03 FireBuildingMedium
			ParticleSysBone FireSmall04 SmokeBuildingLarge
			ParticleSysBone FireSmall05 FireBuildingLarge 
		End

		AnimationState			= DESTROYED_RIGHT
		BeginScript
			CurDrawableHideSubObject("SeigeWorkDP2")
			CurDrawableHideSubObject("SeigeWorkDP2A")
		EndScript
		End

		ModelConditionState		= DESTROYED_BACK
			Model					= IBSeigeWork_D2
			ParticleSysBone FireSmall01 FireBuildingLarge
			ParticleSysBone FireSmall02 FireBuildingLarge
			ParticleSysBone FireSmall03 FireBuildingMedium
			ParticleSysBone FireSmall04 SmokeBuildingLarge
			ParticleSysBone FireSmall05 FireBuildingLarge 
		End

		AnimationState = DESTROYED_BACK
		BeginScript
			CurDrawableHideSubObject("SeigeWorkDP3")
			CurDrawableHideSubObject("SeigeWorkDP3A")
		EndScript
		End

		ModelConditionState  = DESTROYED_LEFT
			Model         = IBSeigeWork_D2
			ParticleSysBone FireSmall01 FireBuildingLarge
			ParticleSysBone FireSmall02 FireBuildingLarge
			ParticleSysBone FireSmall03 FireBuildingMedium
			ParticleSysBone FireSmall04 SmokeBuildingLarge
			ParticleSysBone FireSmall05 FireBuildingLarge 
		End
	    
		AnimationState = DESTROYED_LEFT
		BeginScript
			CurDrawableHideSubObject("SeigeWorkDP4")
			CurDrawableHideSubObject("SeigeWorkDP4A")
		EndScript
		End
	    
	    
		ModelConditionState  = DAMAGED
			Model         = IBSeigeWork_D1 
			ParticleSysBone FireSmall01 FireBuildingLarge
			ParticleSysBone FireSmall02 FireBuildingLarge
			ParticleSysBone FireSmall03 FireBuildingMedium
			ParticleSysBone FireSmall04 SmokeBuildingLarge
			ParticleSysBone FireSmall05 FireBuildingLarge 
		
		End
		AnimationState = DAMAGED
     			EnteringStateFX	= FX_BuildingDamaged
		End

		ModelConditionState  = REALLYDAMAGED
		Model         = IBSeigeWork_D2 
			ParticleSysBone FireSmall01 FireBuildingLarge
			ParticleSysBone FireSmall02 FireBuildingLarge
			ParticleSysBone FireSmall03 FireBuildingMedium
			ParticleSysBone FireSmall04 SmokeBuildingLarge
			ParticleSysBone FireSmall05 FireBuildingLarge 
		End
		AnimationState = REALLYDAMAGED
		     	EnteringStateFX	= FX_BuildingReallyDamaged
		End

		ModelConditionState  = RUBBLE
		Model         = IBSeigeWork_D2 
		ParticleSysBone SmokeLarge01 SmokeBuildingLarge
		End
	    
		AnimationState = RUBBLE
		BeginScript
			CurDrawableHideSubObject("SeigeWorkDP1")
			CurDrawableHideSubObject("SeigeWorkDP1A")
			CurDrawableHideSubObject("SeigeWorkDP2")
			CurDrawableHideSubObject("SeigeWorkDP2A")
			CurDrawableHideSubObject("SeigeWorkDP3")
			CurDrawableHideSubObject("SeigeWorkDP3A")
			CurDrawableHideSubObject("SeigeWorkDP4")
			CurDrawableHideSubObject("SeigeWorkDP4A")
		EndScript
		End

		ModelConditionState  = POST_RUBBLE
		Model         = None
			ParticleSysBone NONE SmokeBuildingMediumRubble
		End
	    
;		AnimationState = POST_RUBBLE
;		End

		ModelConditionState  = POST_COLLAPSE
		Model         = None
			ParticleSysBone NONE SmokeBuildingMediumRubble
		End

;		AnimationState = POST_COLLAPSE
;		End

	End
	  
  
  
  
  
  
	;----------the door
	Draw = W3DScriptedModelDraw ModuleTag_02
	     
		DefaultModelConditionState
			Model = IBSeigeW_DRC
		End
		
		ModelConditionState   = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
			Model               = IBSeigeWork_DrA
		End
		AnimationState        = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
			Animation           =IBSeigeWork_DrA
				AnimationName     = IBSeigeWork_DrA.IBSeigeWork_DrA
				AnimationMode     = MANUAL
			End
			Flags				  = START_FRAME_FIRST
		End

		; -----opening-----------
		ModelConditionState   = DOOR_1_OPENING
			Model               = IBSeigeW_DROA
;			ParticleSysBone	  = NONE BuildingDoughnutCloud
		End
		AnimationState			=	DOOR_1_OPENING
			Animation           =	IBSeigeW_DROA
				AnimationName   =	IBSeigeW_DROA.IBSeigeW_DROA
;				AnimationMode   =	ONCE	
;				AnimationBlendTime = 0
			End
		End 
		ModelConditionState   = DOOR_1_WAITING_OPEN
			Model               = IBSeigeW_DSOP
;			ParticleSysBone	  = NONE BuildingDoughnutCloud
		End 
		AnimationState			=	DOOR_1_WAITING_OPEN
				Animation           =	IBSeigeW_DSOP
					AnimationName   =   IBSeigeW_DSOP.IBSeigeW_DSOP
					AnimationMode   =	ONCE
					AnimationBlendTime = 0
				End
			;	Flags				=	START_FRAME_FIRST
		End   


		; -----closing-----------
		ModelConditionState   = DOOR_1_CLOSING
			Model               = IBSeigeW_DRCA
;			ParticleSysBone	  = NONE BuildingDoughnutCloud
		End;  
		AnimationState			=	DOOR_1_CLOSING
			Animation           =	IBSeigeW_DRCA
				AnimationName   =	IBSeigeW_DRCA.IBSeigeW_DRCA
				AnimationMode   =	ONCE
				AnimationBlendTime = 0
			End
		End   
		

  End

  Draw = W3DFloorDraw DrawFloor_Bib    
		StaticModelLODMode = Yes		; THIS NEEDS TO BE COMMENTED OUT WHEN ENGINEERING ENABLES LOD'S IN THE FLOOR DRAW
     ModelName = IBSeigeWorkBib
  End
  
  Draw = W3DFloorDraw DrawFloor_V1    
     ModelName = IBSeigeWork_V1
		StartHidden = Yes
  End


  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:IsengardSiegeWorks
  Description 	      = OBJECT:IsengardSiegeWorksDescription
  Side                = Isengard
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = ISENGARD_URUKSIEGE_BUILDCOST			; BALANCE
  BuildTime           = ISENGARD_URUKSIEGE_BUILDTIME			; in seconds
  VisionRange         = ISENGARD_URUKSIEGE_VISIONRANGE			; Shroud clearing distance
  ShroudClearingRange = ISENGARD_URUKSIEGE_SHROUDCLEAR			
  BountyValue         = ISENGARD_URUKSIEGE_BOUNTY_VALUE

  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    ;DamageFX          = StructureDamageFXNoShake
  End

	WeaponSet
		Conditions			= None
	End

	WeaponSet
		Weapon				= PRIMARY EvilStructureBow
		Conditions			= PLAYER_UPGRADE
		AutoChooseSources	= PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End

  CommandSet = IsengardSiegeWorksCommandSet


  ; *** AUDIO Parameters ***

	VoiceSelect				= IsengardSiegeWorksSelect

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone

	VoiceSelectUnderConstruction	= BuildingEvilVoiceSelectUnderConstruction

	UnitSpecificSounds
		UnderConstruction		= BuildingConstructionLoop  ; Built first time
		; UnderRepairFromDamage	= NoSound					; Repaired No animation on the building, so don't bother playing sound
		UnderRepairFromRubble	= BuildingConstructionLoop	; Repaired from completely destroyed (not used???)
	End

	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		MaxUpdateRangeCap = 800
		AnimationSound = Sound:MordorSiegeworksGateOpenStart	Animation:IBSeigeW_DROA.IBSeigeW_DROA		Frames:0
		AnimationSound = Sound:MordorSiegeworksGateOpenEnd	Animation:IBSeigeW_DROA.IBSeigeW_DROA		Frames:35
		AnimationSound = Sound:MordorSiegeworksGateCloseStart	Animation:IBSeigeW_DRCA.IBSeigeW_DRCA		Frames:0
		AnimationSound = Sound:MordorSiegeworksGateCloseEnd	Animation:IBSeigeW_DRCA.IBSeigeW_DRCA		Frames:35
	End

 
  ; *** ENGINEERING Parameters ***

  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE NEED_BASE_FOUNDATION FS_FACTORY MP_COUNT_FOR_VICTORY AUTO_RALLYPOINT MADE_OF_WOOD CAN_ATTACK FACE_AWAY_FROM_CASTLE_KEEP

  Behavior = ProductionUpdate ProductionUpdateModuleTag
	NumDoorAnimations            = 1
    DoorOpeningTime              = 3250  ;in mSeconds how long you want doors to be in open state
    DoorWaitOpenTime             = 8000  ;in mSeconds time the door stays open, so units can exit
    DoorCloseTime                = 4000  ;in mSeconds how long you want doors to be in open state
    ConstructionCompleteDuration = 1500  ;in mSeconds   wait time so if you have multiple units they don't run over each other
    UnitInvulnerableTime		= 6000 ; In msec, we flag things we make as invulnerable for a bit.  The mumakil can't handle being hurt during his complicated build phase.
  End
 
  Behavior            = GettingBuiltBehavior GetBuiltBehaviorTag
    WorkerName		  = MordorWorkerNoSelect
  End

  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

	Behavior = AIUpdateInterface ModuleTag_SoWeCanUseWeapon
		AutoAcquireEnemiesWhenIdle	= Yes
		MoodAttackCheckRate			= 250
	End

  Body                = StructureBody ModuleTag_05
    MaxHealth               = ISENGARD_URUKSIEGE_MAXHEALTH			
    MaxHealthDamaged		    = ISENGARD_URUKSIEGE_MAXHEALTHDAMAGED		
	  MaxHealthReallyDamaged	= ISENGARD_URUKSIEGE_MAXHEALTH_REALLYDAMAGED	
  End
 
;  Behavior            = DestroyDie ModuleTag_07
    ;nothing
;  End

  Behavior = QueueProductionExitUpdate ModuleTag_11
    UnitCreatePoint   = X:66.65 Y:0.0 Z:0.0
    NaturalRallyPoint = X:130.0 Y:0.0 Z:0.0;NaturalRallyPointX must always match GeometryMajorRadius! 
    ExitDelay = 300 ; Mainly for the multiple produced. Make them come out one at a time.
  End  
 
   	Behavior = SubObjectsUpgrade ModuleTag_HideAll
		TriggeredBy		= Upgrade_StructureLevel1
		ShowSubObjects	= DrawFloor_Bib 
		HideSubObjects	= DrawFloor_V1 V2 V2A
	End
	Behavior = GeometryUpgrade Geom_ModuleTag_HideAll
		TriggeredBy		= Upgrade_StructureLevel1
		HideGeometry	= Geom_V2
		ShowGeometry	= Geom_Orig
	End
	
  	Behavior = SubObjectsUpgrade ModuleTag_ShowWalls 
		TriggeredBy		= Upgrade_StructureLevel2
		ShowSubObjects	= DrawFloor_V1 
		HideSubObjects	= DrawFloor_Bib V2 V2A
	End
	
	Behavior = SubObjectsUpgrade ModuleTag_ShowFlagsAndTower 
		TriggeredBy		= Upgrade_StructureLevel3
		ShowSubObjects	= DrawFloor_V1 V2 V2A
		HideSubObjects	= DrawFloor_Bib 
	End
	Behavior = GeometryUpgrade Geom_ModuleTag_ShowFlagsAndTower 
		TriggeredBy		= Upgrade_StructureLevel3
		ShowGeometry	= Geom_V2 Geom_Orig
	End
  	Behavior = WeaponSetUpgrade ModuleTag_ThirdLevelBuildingArrows
		TriggeredBy		= Upgrade_StructureLevel3
		ConflictsWith	= Upgrade_EasyAIMultiPlayer
	End
 
 Behavior                  = StructureCollapseUpdate ModuleTag_08
    MinCollapseDelay        = 000
    MaxCollapseDelay        = 000
    CollapseDamping         = .5
    MaxShudder              = 0.6
    MinBurstDelay           = 250
    MaxBurstDelay           = 800
    BigBurstFrequency       = 4
    FXList                  = INITIAL   FX_StructureMediumCollapse
    FXList                  = ALMOST_FINAL  FX_StructureAlmostCollapse
	DestroyObjectWhenDone	= Yes
	CollapseHeight			= 89
  End
 
 
  Geometry              = BOX
  GeometryName			= Geom_Orig
  GeometryMajorRadius   = 44.6
  GeometryMinorRadius   = 52.2
  GeometryHeight        = 40.0
  
  AdditionalGeometry    = BOX
  GeometryName			= Geom_V2
  GeometryActive		= no
  GeometryMajorRadius   = 22.0
  GeometryMinorRadius   = 22.0
  GeometryHeight        = 75.0
  GeometryOffset        = X:-60.0 Y:0 Z:0
  
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER
  
  GeometryContactPoint	= X:-43.011		Y:52.151	Z:0			Repair
  GeometryContactPoint	= X:-8.517		Y:-48.714	Z:0			Repair
  GeometryContactPoint	= X:39.501		Y:52.419	Z:0
  GeometryContactPoint	= X:-73.75		Y:-28.33	Z:0
  GeometryContactPoint	= X:-60.404		Y:0.905		Z:77.731	Swoop
End

;------------------------------------------------------------------------------
;Isengard Armory
Object IsengardArmory

	SelectPortrait = BPIArmory
 
  ; *** ART Parameters ***

  Draw = W3DScriptedModelDraw ModuleTag_Draw

	ExtraPublicBone = ARROW_01
	ExtraPublicBone = ARROW_02
	ExtraPublicBone = ARROW_03
	ExtraPublicBone = ARROW_04
	ExtraPublicBone = ARROW_05
	ExtraPublicBone = ARROW_06
	ExtraPublicBone = ARROW_07
	ExtraPublicBone = ARROW_08
	ExtraPublicBone = ARROW_09
	ExtraPublicBone = ARROW_10
	ExtraPublicBone = ARROW_11
	ExtraPublicBone = ARROW_12

    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD    
    DefaultModelConditionState
		Model = IBArmory_SKN
		WeaponLaunchBone = PRIMARY ARROW_
    End

    IdleAnimationState
		ParticleSysBone   = SPARKS01 IsengardArmorySparks FollowBone:Yes
		ParticleSysBone   = WHEELDUST01 IsengardArmoryDust FollowBone:Yes
		ParticleSysBone   = WHEELDUST02 IsengardArmoryDust FollowBone:Yes

		Animation             = Idle
			AnimationName     = IBArmory_SKL.IBArmory_IDLA
			AnimationMode     = LOOP
		End

		;BeginScript
		;	Prev = CurDrawablePrevAnimationState()
		;	if Prev == "BeingConstructed" then 
			    ; Don't play completed sound when canceling build-in-progress or when
			    ; destroyed halfway
		;	    if not CurDrawableModelcondition( "DYING" ) then 
		;			CurDrawablePlaySound("CampOrcCompleteGeneric")
		;		end
		;	end
		;EndScript

	End  
	
    ;------------ New Build Up States coming soon. 
    ModelConditionState   = AWAITING_CONSTRUCTION 
      Model               = IBArmory_A
;		ParticleSysBone	  = NONE BuildingDoughnutCloud
    End;
    AnimationState        = AWAITING_CONSTRUCTION
      Animation           =  IBArmory_A
        AnimationName     =  IBArmory_ASKL.IBArmory_ABLD
        AnimationMode     = MANUAL
        AnimationBlendTime = 0
      End
	  Flags				  = START_FRAME_FIRST
	  ;BeginScript
	  ;	CurDrawablePlaySound("GondorBarracksBeginConstruction")
	  ;EndScript
    End

    ModelConditionState   = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
      Model               = IBArmory_A
		ParticleSysBone   = CONSTDUSTBONE01 BuildingContructDust FollowBone:Yes
    End;
    
    AnimationState        = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
		Animation           = IBArmory_A
			AnimationName     = IBArmory_ASKL.IBArmory_ABLD
			AnimationMode     = MANUAL
			AnimationBlendTime = 0
		End
		Flags				  = START_FRAME_FIRST
		StateName			  = BeingConstructed
		BeginScript
			CurDrawablePlaySound("GondorBarracksBeginConstruction")
		EndScript
    End
 
        ;--damaged building
      ModelConditionState  = DESTROYED_FRONT
      Model         = IBArmory_D2  
	    ParticleSysBone FireSmall01 FireBuildingLarge
		ParticleSysBone FireSmall02 FireBuildingLarge
		ParticleSysBone FireSmall03 FireBuildingMedium
		ParticleSysBone FireSmall04 SmokeBuildingLarge
		ParticleSysBone FireSmall05 FireBuildingLarge 
    End
    AnimationState = DESTROYED_FRONT
      BeginScript
        CurDrawableHideSubObject("IBArmoryDP_1")
      EndScript
    End
    
        ModelConditionState  = DESTROYED_RIGHT
      Model         = IBArmory_D2  
	    ParticleSysBone FireSmall01 FireBuildingLarge
		ParticleSysBone FireSmall02 FireBuildingLarge
		ParticleSysBone FireSmall03 FireBuildingMedium
		ParticleSysBone FireSmall04 SmokeBuildingLarge
		ParticleSysBone FireSmall05 FireBuildingLarge 
    End

    AnimationState = DESTROYED_RIGHT
      BeginScript
        CurDrawableHideSubObject("IBArmoryDP_2")
      EndScript
    End
    

    ModelConditionState  = DESTROYED_BACK
      Model         = IBArmory_D2  
	    ParticleSysBone FireSmall01 FireBuildingLarge
		ParticleSysBone FireSmall02 FireBuildingLarge
		ParticleSysBone FireSmall03 FireBuildingMedium
		ParticleSysBone FireSmall04 SmokeBuildingLarge
		ParticleSysBone FireSmall05 FireBuildingLarge 
    End

    AnimationState = DESTROYED_BACK
      BeginScript
        CurDrawableHideSubObject("IBArmoryDP_3")
      EndScript
    End

	ModelConditionState  = DESTROYED_LEFT
      Model         = IBArmory_D2  
	    ParticleSysBone FireSmall01 FireBuildingLarge
		ParticleSysBone FireSmall02 FireBuildingLarge
		ParticleSysBone FireSmall03 FireBuildingMedium
		ParticleSysBone FireSmall04 SmokeBuildingLarge
		ParticleSysBone FireSmall05 FireBuildingLarge 
    End
    
    AnimationState = DESTROYED_LEFT
      BeginScript
        CurDrawableHideSubObject("IBArmoryDP_4")
      EndScript
    End
    
    
    ModelConditionState  = DAMAGED
      Model         = IBArmory_D1  
	    ParticleSysBone FireSmall01 FireBuildingLarge
		ParticleSysBone FireSmall02 FireBuildingMedium
		ParticleSysBone FireSmall03 FireBuildingMedium
		ParticleSysBone FireSmall04 SmokeBuildingLarge
		ParticleSysBone FireSmall05 FireBuildingMedium 	
    End
    AnimationState = DAMAGED
     EnteringStateFX	= FX_BuildingDamaged
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = IBArmory_D2  
	    ParticleSysBone FireSmall01 FireBuildingLarge
		ParticleSysBone FireSmall02 FireBuildingLarge
		ParticleSysBone FireSmall03 FireBuildingMedium
		ParticleSysBone FireSmall04 SmokeBuildingLarge
		ParticleSysBone FireSmall05 FireBuildingLarge 	
    End
    AnimationState = REALLYDAMAGED
        EnteringStateFX	= FX_BuildingReallyDamaged
    End

    ModelConditionState  = RUBBLE
      Model         = IBArmory_D2  
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End
    
    AnimationState = RUBBLE
      BeginScript
        CurDrawableHideSubObject("IBArmoryDP_1")
        CurDrawableHideSubObject("IBArmoryDP_2")
        CurDrawableHideSubObject("IBArmoryDP_3")
        CurDrawableHideSubObject("IBArmoryDP_4")
      EndScript
    End

    ModelConditionState  = POST_RUBBLE
		Model         = None
		ParticleSysBone NONE SmokeBuildingMediumRubble
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
		ParticleSysBone NONE SmokeBuildingMediumRubble
    End
    
    
  End

  Draw = W3DFloorDraw DrawFloor_Bib   
		StaticModelLODMode = Yes		; THIS NEEDS TO BE COMMENTED OUT WHEN ENGINEERING ENABLES LOD'S IN THE FLOOR DRAW
     ModelName = IBArmory_Bib
  End
  Draw = W3DFloorDraw DrawFloor_V1  
    ModelName = IBArmory_V1
	StartHidden = Yes
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:IsengardArmory
  Description 	      = OBJECT:IsengardArmoryDescription
  Side                = Isengard
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
  IsTrainable			= No
 
  BuildCost           = ISENGARD_ARMORY_BUILDCOST			; BALANCE IsengardArmory
  BuildTime           = ISENGARD_ARMORY_BUILDTIME			; BALANCE IsengardArmory
  VisionRange         = ISENGARD_ARMORY_VISIONRANGE			; Shroud clearing distance
  ShroudClearingRange = ISENGARD_ARMORY_SHROUDCLEAR			
  BountyValue         = ISENGARD_ARMORY_BOUNTY_VALUE


  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    ;DamageFX          = StructureDamageFXNoShake
  End
  
	WeaponSet
		Conditions			= None
	End

	WeaponSet
		Weapon				= PRIMARY EvilStructureBow
		Conditions			= PLAYER_UPGRADE
		AutoChooseSources	= PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End

  
 CommandSet = IsengardArmoryCommandSet


  ; *** AUDIO Parameters ***
    SoundAmbient = IsengardArmoryAmbientLoop
	VoiceSelect		= IsengardArmorySelect
	
	SoundAmbientDamaged = NoSound
	SoundAmbientReallyDamaged = NoSound

	SoundOnDamaged		= BuildingLightDamageStone
	SoundOnReallyDamaged	= BuildingHeavyDamageStone

	VoiceSelectUnderConstruction	= BuildingEvilVoiceSelectUnderConstruction

	UnitSpecificSounds
		UnderConstruction		= BuildingConstructionLoop  ; Built first time
		; UnderRepairFromDamage	= NoSound					; Repaired No animation on the building, so don't bother playing sound
		UnderRepairFromRubble	= BuildingConstructionLoop	; Repaired from completely destroyed (not used???)
	End


  ; *** ENGINEERING Parameters ***

  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE NEED_BASE_FOUNDATION MP_COUNT_FOR_VICTORY FS_FACTORY MADE_OF_WOOD CAN_ATTACK ; AUTO_RALLYPOINT ; 

  Behavior = ProductionUpdate ProductionUpdateModuleTag
    ; nothing, but is required if we have any Object-level Upgrades!
  End

  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

	Behavior = AIUpdateInterface ModuleTag_SoWeCanUseWeapon
		AutoAcquireEnemiesWhenIdle	= Yes
		MoodAttackCheckRate			= 250
	End
 
  Behavior            = GettingBuiltBehavior GetBuiltBehaviorTag
    WorkerName		  = MordorWorkerNoSelect
  End
  
   	Behavior = SubObjectsUpgrade ModuleTag_HideAll
		TriggeredBy		= Upgrade_StructureLevel1
		ShowSubObjects	= DrawFloor_Bib
		HideSubObjects	= DrawFloor_V1 V1A V2
	End
	Behavior = GeometryUpgrade Geom_ModuleTag_HideAll
		TriggeredBy		= Upgrade_StructureLevel1
		HideGeometry	= Geom_V1 Geom_V2
	End
	
  	Behavior = SubObjectsUpgrade ModuleTag_ShowWalls 
		TriggeredBy		= Upgrade_StructureLevel2
		ShowSubObjects	= DrawFloor_V1 V1A
		HideSubObjects	= DrawFloor_Bib V2
	End
	Behavior = GeometryUpgrade Geom_ModuleTag_ShowWalls 
		TriggeredBy		= Upgrade_StructureLevel2
		ShowGeometry	= Geom_V1 Geom_Orig
		HideGeometry	= Geom_V2
	End
	
	Behavior = SubObjectsUpgrade ModuleTag_ShowFlagsAndTower 
		TriggeredBy		= Upgrade_StructureLevel3
		ShowSubObjects	= DrawFloor_V1 V1A V2
		HideSubObjects	= DrawFloor_Bib
	End
	Behavior = GeometryUpgrade Geom_ModuleTag_ShowFlagsAndTower 
		TriggeredBy		= Upgrade_StructureLevel3
		ShowGeometry	= Geom_V2 Geom_Orig
		HideGeometry	= Geom_V1
	End
  	Behavior = WeaponSetUpgrade ModuleTag_ThirdLevelBuildingArrows
		TriggeredBy		= Upgrade_StructureLevel3
		ConflictsWith	= Upgrade_EasyAIMultiPlayer
	End

  Body                = StructureBody ModuleTag_05
    MaxHealth               = ISENGARD_ARMORY_MAXHEALTH			
    MaxHealthDamaged        = ISENGARD_ARMORY_MAXHEALTHDAMAGED		
	MaxHealthReallyDamaged  = ISENGARD_ARMORY_MAXHEALTH_REALLYDAMAGED	
    DamageCreationList		= OCL_BuildingDamageList01 CATAPULT_ROCK
  
	DamageCreationList		= OCL_IBArmory_Chunk1 CATAPULT_ROCK FRONT_DESTROYED
	DamageCreationList		= OCL_IBArmory_Chunk2 CATAPULT_ROCK RIGHT_DESTROYED
	DamageCreationList		= OCL_IBArmory_Chunk3 CATAPULT_ROCK BACK_DESTROYED
	DamageCreationList		= OCL_IBArmory_Chunk4 CATAPULT_ROCK LEFT_DESTROYED
		
  End
 
  
  Behavior = QueueProductionExitUpdate ModuleTag_11
    UnitCreatePoint   = X:5.0 Y:33.0 Z:0.0
    NaturalRallyPoint = X:50.0 Y:33.0 Z:0.0	;NaturalRallyPointX must always match GeometryMajorRadius! 
  End  


  Behavior                  = StructureCollapseUpdate ModuleTag_08
    MinCollapseDelay        = 000
    MaxCollapseDelay        = 000
    CollapseDamping         = .5
    MaxShudder              = 0.6
    MinBurstDelay           = 250
    MaxBurstDelay           = 800
    BigBurstFrequency       = 4
    FXList                  = INITIAL   FX_StructureMediumCollapse
    FXList                  = ALMOST_FINAL  FX_StructureAlmostCollapse
	DestroyObjectWhenDone	= Yes
	CollapseHeight			= 89
  End
  
  ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
	MaxUpdateRangeCap = 800
	AnimationSound = Sound: IsengardArmoryGrind Animation:IBArmory_SKL.IBArmory_IDLA Frames: 22 86 157 226 
  End

  Geometry              = BOX
  GeometryName			= Geom_Orig
  GeometryMajorRadius   = 28.6
  GeometryMinorRadius   = 43.6
  GeometryHeight        = 20.8
  
  AdditionalGeometry    = BOX
  GeometryName			= Geom_V1
  GeometryActive		= no
  GeometryMajorRadius   = 15.0
  GeometryMinorRadius   = 16.0
  GeometryHeight        = 65.8
  GeometryOffset		= X:-8.6 Y:-31.6 Z:0
  
  AdditionalGeometry    = BOX
  GeometryName			= Geom_V2
  GeometryActive		= no
  GeometryMajorRadius   = 15.0
  GeometryMinorRadius   = 16.0
  GeometryHeight        = 97.8
  GeometryOffset		= X:-8.6 Y:-31.6 Z:0
  
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER
  
  GeometryContactPoint	= X:-33.193		Y:44.016	Z:0			Repair
  GeometryContactPoint	= X:9.603		Y:-55.074	Z:0			Repair
  GeometryContactPoint	= X:-33.193		Y:-13.672	Z:0
  GeometryContactPoint	= X:43.542		Y:-4.095	Z:0
  GeometryContactPoint	= X:-8.472		Y:-30.664	Z:83.394	Swoop
End

;------------------------------------------------------------------------------
Object IsengardWargSentry
  
  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = IBWargSnty
    End
  End
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:IsengardWargSentry
  Side                = Isengard
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 600
  BuildTime           = 15.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 161
  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    ;DamageFX          = StructureDamageFXNoShake
  End


  ; *** AUDIO Parameters ***


  ; *** ENGINEERING Parameters ***

  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE NEED_BASE_FOUNDATION CASTLE_KEEP MADE_OF_WOOD
 
  Behavior            = GettingBuiltBehavior ModuleTag_04
    SelfBuildingLoop = BuildingConstructionLoop ; Only played if we DON'T spawn a worker
	SelfRepairFromDamageLoop  = NoSound         ; This doesn't cause an animation, so don't bother playing a sound
	SelfRepairFromRubbleLoop  = BuildingConstructionLoop
  End

  Behavior = CastleMemberBehavior ModuleTag_CMB
	BeingBuiltSound = BuildingConstructionLoop
  End 

  Body                = StructureBody ModuleTag_05
    MaxHealth               = 1500.0
    MaxHealthDamaged        = 1000.0
	  MaxHealthReallyDamaged  = 500.0
  End
 
  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End

  Geometry              = CYLINDER
  GeometryMajorRadius   = 37.6
  GeometryMinorRadius   = 0
  GeometryHeight        = 31.2
  GeometryOffset		= X:10 Y:0 Z:0
  
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER
End
;------------------------------------------------------------------------------
Object IsengardTowerOfOrthanc

SelectPortrait = BPIOrthancTower
  
  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = IBTwrOrthanc
    End
  End
 
	; ***DESIGN parameters ***
	DisplayName         = OBJECT:IsengardOrthanc
	Side                = Isengard
	EditorSorting       = STRUCTURE
	ThreatLevel			= 1.0
	CommandSet			= GenericKeepCommandSet
	BuildCost           = 1
	BuildTime           = 5.0           ; in seconds
	VisionRange         = 160.0          ; Shroud clearing distance
	ShroudClearingRange = 161


  ; *** AUDIO Parameters ***

	SoundOnDamaged		= BuildingLightDamageStone
	SoundOnReallyDamaged	= BuildingHeavyDamageStone


  ; *** ENGINEERING Parameters ***

  RadarPriority       = STRUCTURE
  KindOf              = VITAL_FOR_BASE_SURVIVAL PRELOAD STRUCTURE IMMOBILE SCORE NEED_BASE_FOUNDATION CASTLE_KEEP NOT_AUTOACQUIRABLE FS_FACTORY AUTO_RALLYPOINT SELECTABLE MADE_OF_METAL
 
  Behavior            = GettingBuiltBehavior ModuleTag_04
    SelfBuildingLoop = BuildingConstructionLoop ; Only played if we DON'T spawn a worker
	SelfRepairFromDamageLoop  = NoSound         ; This doesn't cause an animation, so don't bother playing a sound
	SelfRepairFromRubbleLoop  = BuildingConstructionLoop
  End

  Behavior = CastleMemberBehavior ModuleTag_CMB
	BeingBuiltSound = BuildingConstructionLoop
  End 

  	;-----------------------------------------------
	;Used for hero revival and initial construction     
	Behavior = ProductionUpdate ProductionUpdateModuleTag
		; nothing, but is required if we have any Object-level Upgrades!
	End
	Behavior = QueueProductionExitUpdate ModuleTag_QueuePEU
		UnitCreatePoint   = X:0.0 Y:-20.0 Z:0.0
		NaturalRallyPoint = X:28.8 Y:-80.0 Z:0.0;NaturalRallyPointX must always match GeometryMajorRadius! 
		ExitDelay = 300 ;Handles delays between units if multiple produced at a time. (like Generals Redguard coming out 2 at a time)
	End  
	;-----------------------------------------------

  Body                = StructureBody ModuleTag_05
    MaxHealth         = 1500.0
  End
 
  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End

  Geometry              = CYLINDER
  GeometryMajorRadius   = 42.6
  GeometryMinorRadius   = 0
  GeometryHeight        = 65.2
  
  AdditionalGeometry    = CYLINDER
  GeometryMajorRadius   = 22.6
  GeometryMinorRadius   = 0
  GeometryHeight        = 265.2
  
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  BuildCompletion       = PLACED_BY_PLAYER
  
  HealthBoxScale		= 2.5
  HealthBoxHeightOffset	= -160.0
End

;------------------------------------------------------------------------------
;----------------------------------------------------------------------------------------------------
ChildObject MPOrthanc IsengardTowerOfOrthanc
KindOf              =  PRELOAD STRUCTURE IMMOBILE NOT_AUTOACQUIRABLE 
End
;----------------------------------------------------------------------------------------------------
Object IsengardTowerOfOrthancMPSA

	SelectPortrait = BPIOrthancTower
  
  
	SelectPortrait = BPIOrthancTower
        ButtonImage            = BIWatchTower
   ; *** ART Parameters ***

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes

    DefaultModelConditionState  
      Model = IB_Orthanc
    End


;------------Build Up States
    ModelConditionState   = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
      Model               = IB_Orthanc_A
;      ParticleSysBone	  = NONE BuildingDoughnutCloud
      ParticleSysBone     = NONE BuildingContructDust
    End  

	AnimationState          = ACTIVELY_BEING_CONSTRUCTED
		Animation
			AnimationName	= IB_Orthanc_A.IB_Orthanc_A
			AnimationMode   = MANUAL
		End
		BeginScript
;			CurDrawableHideSubObject("FIRE02")
		EndScript
	End

;------------Build Up States
    ModelConditionState   = BASE_BUILD
      Model               = IB_Orthanc_A
;      ParticleSysBone	  = NONE BuildingDoughnutCloud
      ParticleSysBone     = NONE BuildingContructDust
    End  

	AnimationState		  = BASE_BUILD
		Animation
			AnimationName = IB_Orthanc_A.IB_Orthanc_A
			AnimationMode = ONCE
			AnimationBlendTime = 0			
			AnimationSpeedFactorRange = 2.0 2.0 ; 300 frame anim, but need to shrink down to 5 seconds
		End
		BeginScript
;			CurDrawableHideSubObject("FIRE02")
		EndScript
	End

	AnimationState		  = JUST_BUILT
		Animation
			AnimationName = IB_Orthanc_A.IB_Orthanc_A
			AnimationMode = MANUAL			
			AnimationBlendTime = 0
		End
        Flags = START_FRAME_FIRST
		BeginScript
;			CurDrawableHideSubObject("FIRE02")
		EndScript
	End
	
    ModelConditionState  = DAMAGED
      Model         = IB_Orthanc_D1  
    End
    
    AnimationState = DAMAGED
     EnteringStateFX	= FX_BuildingDamaged
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = IB_Orthanc_D2
;      ParticleSysBone NONE furnaceSmoke
    End
	AnimationState = REALLYDAMAGED
       	Animation				=	ReallyDamagedanimation
			AnimationName		=	 IB_Orthanc_D2.IB_Orthanc_D2
			AnimationMode		=	ONCE
   		End
     	EnteringStateFX	= FX_BuildingReallyDamaged
    End

    ModelConditionState  = RUBBLE
      Model         = IB_Orthanc_D3
      ParticleSysBone FXbone01 BaradDurDust01 FollowBone:yes
      ParticleSysBone FXbone02 BaradDurDust01 FollowBone:yes
      ParticleSysBone NONE ExplosiveMineSmoke02
    End
    
    AnimationState = RUBBLE
		Animation				=	Death
			AnimationName		=	IB_Orthanc_D3.IB_Orthanc_D3
			AnimationMode		=	ONCE
		End
;        EnteringStateFX = FX_RohanWallRubble
    End      

    ModelConditionState  = POST_RUBBLE
		Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
    End
	

  End
 
	; ***DESIGN parameters ***
	DisplayName         = OBJECT:IsengardOrthanc
	Side                = Isengard
	EditorSorting       = STRUCTURE
	ThreatLevel			= 1.0
	CommandSet			= GenericKeepCommandSet
	BuildCost           = 1
	BuildTime           = 15.0           ; in seconds
	VisionRange         = 160.0          ; Shroud clearing distance
	ShroudClearingRange = 161


  ; *** AUDIO Parameters ***

	SoundOnDamaged		= BuildingLightDamageStone
	SoundOnReallyDamaged	= BuildingHeavyDamageStone


  ; *** ENGINEERING Parameters ***

  RadarPriority       = STRUCTURE
  KindOf              = VITAL_FOR_BASE_SURVIVAL PRELOAD STRUCTURE IMMOBILE SCORE NEED_BASE_FOUNDATION CASTLE_KEEP NOT_AUTOACQUIRABLE FS_FACTORY AUTO_RALLYPOINT SELECTABLE MADE_OF_METAL
 
  Behavior            = GettingBuiltBehavior ModuleTag_04
    SelfBuildingLoop = BuildingConstructionLoop ; Only played if we DON'T spawn a worker
	SelfRepairFromDamageLoop  = NoSound         ; This doesn't cause an animation, so don't bother playing a sound
	SelfRepairFromRubbleLoop  = BuildingConstructionLoop
  End

  Behavior = CastleMemberBehavior ModuleTag_CMB
	BeingBuiltSound = BuildingConstructionLoop
  End 

  	;-----------------------------------------------
	;Used for hero revival and initial construction     
	Behavior = ProductionUpdate ProductionUpdateModuleTag
		; nothing, but is required if we have any Object-level Upgrades!
	End
	Behavior = QueueProductionExitUpdate ModuleTag_QueuePEU
		UnitCreatePoint   = X:0.0 Y:-20.0 Z:0.0
		NaturalRallyPoint = X:28.8 Y:-80.0 Z:0.0;NaturalRallyPointX must always match GeometryMajorRadius! 
		ExitDelay = 300 ;Handles delays between units if multiple produced at a time. (like Generals Redguard coming out 2 at a time)
	End  
	;-----------------------------------------------

  Body                = ActiveBody ModuleTag_05
    MaxHealth         = 2500.0
  End
 
  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End

  Geometry              = CYLINDER
  GeometryMajorRadius   = 42.6
  GeometryMinorRadius   = 0
  GeometryHeight        = 65.2
  
  AdditionalGeometry    = CYLINDER
  GeometryMajorRadius   = 22.6
  GeometryMinorRadius   = 0
  GeometryHeight        = 265.2
  
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER
End


ChildObject IsengardTowerOfOrthancMPSB IsengardTowerOfOrthancMPSA
	Body  = SymbioticStructuresBody ModuleTag_SymbioticBody
		Symbiote = KeepLeft
	End
End

;------------------------------------------------------------------------------------------
Object IsengardOrthancDoor

SelectPortrait = BPRHelmsDeep

  ; *** ART Parameters ***

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes

    DefaultModelConditionState  
      Model = IBGATEDR
    End


    ModelConditionState  = RUBBLE DOOR_1_OPENING
      Model         = IBGATEDR_D4  
    End
	AnimationState = RUBBLE DOOR_1_OPENING
		Animation = Open 
			AnimationName	=	IBGATEDR_D4.IBGATEDR_D4
			AnimationMode	=	ONCE 
		End
    End
       
      ModelConditionState  = RUBBLE
      Model         = IBGATEDR_D3 
      ParticleSysBone NONE CatapultDestroyDebris
      ParticleSysBone NONE PCTMediumDust 
    End
 	AnimationState = RUBBLE 
		Animation = Open 
			AnimationName	=	IBGATEDR_D3.IBGATEDR_D3
			AnimationMode	=	ONCE 
		End
    End
    
	AnimationState = DOOR_1_OPENING
		StateName = STATE_Open   
		Animation = Open 
			AnimationName	=	IBGATEDR.IBGATEDR
			AnimationMode	=	ONCE 
			AnimationBlendTime = 0
		End
		Flags = START_FRAME_LAST
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "STATE_Closed" then CurDrawableSetTransitionAnimState("TRANS_Closed_To_Open") end
		EndScript
    End
    TransitionState = TRANS_Closed_To_Open
		Animation = Open 
			AnimationName	=	IBGATEDR.IBGATEDR
			AnimationMode	=	ONCE 
		End
    End
        
	AnimationState = DOOR_1_CLOSING 
		StateName = STATE_Closed 
		Animation = Close 
			AnimationName	=	IBGATEDR.IBGATEDR
			AnimationMode	=	ONCE_BACKWARDS 
			AnimationBlendTime = 0
		End
		Flags = START_FRAME_FIRST
		BeginScript
			
			Prev = CurDrawablePrevAnimationState()
			if Prev == "STATE_Open" then CurDrawableSetTransitionAnimState("TRANS_Open_To_Closed") end
		EndScript
    End
    TransitionState = TRANS_Open_To_Closed
		Animation = Open 
			AnimationName	=	IBGATEDR.IBGATEDR
			AnimationMode	=	ONCE_BACKWARDS 
		End
		Flags = START_FRAME_LAST
    End

  End


  ; *** AUDIO Parameters ***

	VoiceSelect		= GateSelect


  ; ***DESIGN parameters ***

  DisplayName      = OBJECT:IsengardOrthancDoor
  Side = Isengard
  EditorSorting   = STRUCTURE
  ThreatLevel = 1.0

  VisionRange         = 400.0          ; Shroud clearing distance

  ArmorSet
    Conditions        = None
    Armor             = CastleGateArmor
    DamageFX          = GateDamageFX
  End

	CommandSet = CastleGateCommandSet


	; *** ENGINEERING Parameters ***  
	KindOf                = STRUCTURE IMMOBILE SELECTABLE BLOCKING_GATE MADE_OF_WOOD
	RadarPriority = STRUCTURE
	Body                  = ActiveBody ModuleTag_02
		MaxHealth       = 3000.0
	End

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
  Behavior = KeepObjectDie ModuleTag_IWantRubble
  End

	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		MaxUpdateRangeCap = 800
		AnimationSound = Sound: MinisTirithGateDie Animation:GBMgatedoorSKL.GBMgatedoorA3 Frames: 1 
	End

	Behavior = TransitionDamageFX ModleTag_hideBustedDoors
		PristineShowSubObject		IBGATEDOORL IBGATEDOORR
		PristineHideSubObject		IBGATEDOORR_D1 IBGATEDOORR_D2 IBGATEDOORL_D1 IBGATEDOORL_D2
		DamagedShowSubObject		IBGATEDOORR_D1 IBGATEDOORL_D1
		DamagedHideSubObject		IBGATEDOORR_D2 IBGATEDOORL_D2 IBGATEDOORR IBGATEDOORL
		ReallyDamagedShowSubObject	IBGATEDOORR_D2 IBGATEDOORL_D2
		ReallyDamagedHideSubObject  IBGATEDOORR_D1  IBGATEDOORL_D1 IBGATEDOORR IBGATEDOORL
        DamagedFXList1 = Loc: X:0 Y:0 Z:0			FXList:FX_BasicSevereScreenShake
 	    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0		FXList:FX_BasicSevereScreenShake
 	    RubbleFXList1 = Loc: X:0 Y:0 Z:0			FXList:FX_HelmsDeepGateRubble
	End

	Behavior = GateOpenAndCloseBehavior ModuleTag_GATE
		ResetTimeInMilliseconds = 12200 ; important! this must be longer than the gates animation, ir it will twitch
		OpenByDefault = Yes
		PercentOpenForPathing = 50
		Proxy = IsengardOrthancDoorProxy
		SoundOpeningGateLoop = GateOpenStart
		SoundClosingGateLoop = GateCloseStart
		SoundFinishedOpeningGate = GateOpenEnd
		SoundFinishedClosingGate = GateCloseEnd
		TimeBeforePlayingOpenSound = 9500
		TimeBeforePlayingClosedSound = 9500
	End

	Geometry              = BOX
	GeometryMajorRadius   = 16.0
	GeometryMinorRadius   = 65.0
	GeometryHeight        = 56.0
	GeometryName          = Closed
	GeometryIsSmall       = No
	
	
	AdditionalGeometry    = BOX
	GeometryMajorRadius   = 20.0
	GeometryMinorRadius   = 7.0
	GeometryHeight        = 56.0	
	GeometryOffset		  = X:14 Y:58 Z:0
	GeometryName          = OpenLeft
	
	AdditionalGeometry    = BOX
	GeometryMajorRadius   = 20.0
	GeometryMinorRadius   = 7.0
	GeometryHeight        = 56.0	
	GeometryOffset		  = X:14 Y:-58 Z:0
	GeometryName          = OpenRight
	
	GeometryContactPoint	=	X:28	Y:-58	Z:0 Ram
	GeometryContactPoint	=	X:14	Y:-58	Z:56
	GeometryContactPoint	=	X:0		Y:-58   Z:0
	GeometryContactPoint	=	X:0		Y:-28   Z:56
	GeometryContactPoint	=	X:0		Y:0	    Z:0 Ram
	GeometryContactPoint	=	X:0		Y:28	Z:56
	GeometryContactPoint	=	X:0		Y:58	Z:0
	GeometryContactPoint	=	X:14	Y:58	Z:56
	GeometryContactPoint	=	X:28	Y:58	Z:0 Ram
	
	Shadow                = SHADOW_VOLUME
End


ChildObject IsengardOrthancDoorProxy IsengardOrthancDoor
	Behavior = GateProxyBehavior ModuleTag_GateProxy
	End
	Body = SymbioticStructuresBody ModuleTag_SymbioticBody
		Symbiote = KeepLeft
	End
End


;------------------------------------------------------------------------------
;------------------------------------------------------------------------------
;------------------------------------------------------------------------------
;------------------------------------------------------------------------------
;
;  Temp and Testing
;
;------------------------------------------------------------------------------
;------------------------------------------------------------------------------
;------------------------------------------------------------------------------

;---------------------------------------------------------------------------
;Mordor Fire Object
Object MordorFire

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
    DefaultModelConditionState
      Model = MBfireStretch
     
  ;embers and smoke particle elements
      ;;ParticleSysBone = emberBone fireFlare
      ;;ParticleSysBone = fireBone VolcanoSmoke
      ParticleSysBone = emberBone VolcanoEmbers
      ;;ParticleSysBone = emberBone fireGlow
      ParticleSysBone = fireBone SmokeRed
    End
  End

  ; *** AUDIO Parameters ***
	SoundAmbient = Campfire1AmbientLoop

  ; ***DESIGN parameters ***
  DisplayName     = OBJECT:Fire
  Side            = Mordor
  EditorSorting   = STRUCTURE
  ThreatLevel = 1.0

  ; *** ENGINEERING Parameters ***  
  KindOf          = SELECTABLE IMMOBILE
  Shadow          = SHADOW_VOLUME
  Body            = ActiveBody ModuleTag_03
    MaxHealth       = 99999.0
  End

  Geometry = CYLINDER
  GeometryMajorRadius = 2.4
  GeometryMinorRadius = 2.4
  GeometryHeight = 4.8
  GeometryIsSmall = Yes
End
;------------------------------------------------------------------
;Mordor AshFall
Object MordorAshFall

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
    DefaultModelConditionState
      Model = MBAshFall
  End
End

  ; *** AUDIO Parameters ***

  ; ***DESIGN parameters ***
  DisplayName     = OBJECT:Ashfall
  Side            = Mordor
  EditorSorting   = STRUCTURE
  ThreatLevel = 1.0

  ; *** ENGINEERING Parameters ***  
  KindOf          = SELECTABLE IMMOBILE
  Shadow          = SHADOW_VOLUME
  Body            = ActiveBody ModuleTag_03
    MaxHealth       = 99999.0
  End

  Geometry = CYLINDER
  GeometryMajorRadius = 2.4
  GeometryMinorRadius = 2.4
  GeometryHeight = 4.8
  GeometryIsSmall = Yes
End
;--------------------------------------------------------------------------
;Mordor Mount Doom
Object MordorMountDoom

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
    DefaultModelConditionState
      Model = MBMdoom
    End
  End

  ; *** AUDIO Parameters ***

  ; ***DESIGN parameters ***
  DisplayName     = OBJECT:MountDoom
  Side            = Mordor
  EditorSorting   = STRUCTURE
  ThreatLevel = 1.0

  ; *** ENGINEERING Parameters ***  
  KindOf          = SELECTABLE IMMOBILE
  Shadow          = SHADOW_VOLUME
  Body            = ActiveBody ModuleTag_03
    MaxHealth       = 99999.0
  End

  Geometry = CYLINDER
  GeometryMajorRadius = 2.4
  GeometryMinorRadius = 2.4
  GeometryHeight = 4.8
  GeometryIsSmall = Yes
End


;------------------------------------------------------------------------------
Object MordorCampCentralTent
  
  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = GBWTower
    End
  End
 
	; ***DESIGN parameters ***
	DisplayName         = OBJECT:GondorWhiteTower
	Side                = Mordor
	EditorSorting       = STRUCTURE
	ThreatLevel = 1.0
	CommandSet			= GenericKeepCommandSet
 
	BuildCost           = 1
	BuildTime           = 5.0           ; in seconds
	VisionRange         = 160.0          ; Shroud clearing distance
	ShroudClearingRange = 161

	; *** AUDIO Parameters ***

  ; *** ENGINEERING Parameters ***
  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE NEED_BASE_FOUNDATION CASTLE_KEEP FS_FACTORY AUTO_RALLYPOINT  MADE_OF_WOOD
 
  Behavior            = GettingBuiltBehavior ModuleTag_04
    SelfBuildingLoop = BuildingConstructionLoop ; Only played if we DON'T spawn a worker
	SelfRepairFromDamageLoop  = NoSound         ; This doesn't cause an animation, so don't bother playing a sound
	SelfRepairFromRubbleLoop  = BuildingConstructionLoop
  End

  Behavior = CastleMemberBehavior ModuleTag_CMB
	BeingBuiltSound = BuildingConstructionLoop
  End 

  	;-----------------------------------------------
	;Used for hero revival and initial construction     
	Behavior = ProductionUpdate ProductionUpdateModuleTag
		; nothing, but is required if we have any Object-level Upgrades!
	End
	Behavior = QueueProductionExitUpdate ModuleTag_QueuePEU
		UnitCreatePoint   = X:0.0 Y:-20.0 Z:0.0
		NaturalRallyPoint = X:28.8 Y:-80.0 Z:0.0;NaturalRallyPointX must always match GeometryMajorRadius! 
		ExitDelay = 300 ;Handles delays between units if multiple produced at a time. (like Generals Redguard coming out 2 at a time)
	End  
	;-----------------------------------------------

  Body                = StructureBody ModuleTag_05
    MaxHealth         = 1500.0
  End
 
  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End

  Geometry              = BOX
  GeometryMajorRadius   = 32.2
  GeometryMinorRadius   = 32.2
  GeometryHeight        = 45.2
  
  AdditionalGeometry    = CYLINDER
  GeometryMajorRadius   = 24.6
  GeometryMinorRadius   = 0
  GeometryHeight        = 104.2
  
  AdditionalGeometry    = CYLINDER
  GeometryMajorRadius   = 12.6
  GeometryMinorRadius   = 0
  GeometryHeight        = 194.2
  
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER
End


;------------------------------------------------------------------------------
Object IsengardCampCentralTent
  
  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = GBWTower
    End
  End
 
	; ***DESIGN parameters ***
	DisplayName         = OBJECT:GondorWhiteTower
	Side                = Isengard
	EditorSorting       = STRUCTURE
	ThreatLevel = 1.0
 	CommandSet			= GenericKeepCommandSet

	BuildCost           = 1
	BuildTime           = 5.0           ; in seconds
	VisionRange         = 160.0          ; Shroud clearing distance
	ShroudClearingRange = 161

  ; *** AUDIO Parameters ***

  ; *** ENGINEERING Parameters ***
  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE NEED_BASE_FOUNDATION CASTLE_KEEP FS_FACTORY AUTO_RALLYPOINT MADE_OF_WOOD
 
  Behavior            = GettingBuiltBehavior ModuleTag_04
    SelfBuildingLoop = BuildingConstructionLoop ; Only played if we DON'T spawn a worker
	SelfRepairFromDamageLoop  = NoSound         ; This doesn't cause an animation, so don't bother playing a sound
	SelfRepairFromRubbleLoop  = BuildingConstructionLoop
  End

  Behavior = CastleMemberBehavior ModuleTag_CMB
	BeingBuiltSound = BuildingConstructionLoop
  End 

  	;-----------------------------------------------
	;Used for hero revival and initial construction     
	Behavior = ProductionUpdate ProductionUpdateModuleTag
		; nothing, but is required if we have any Object-level Upgrades!
	End
	Behavior = QueueProductionExitUpdate ModuleTag_QueuePEU
		UnitCreatePoint   = X:0.0 Y:-20.0 Z:0.0
		NaturalRallyPoint = X:28.8 Y:-80.0 Z:0.0;NaturalRallyPointX must always match GeometryMajorRadius! 
		ExitDelay = 300 ;Handles delays between units if multiple produced at a time. (like Generals Redguard coming out 2 at a time)
	End  
	;-----------------------------------------------

  Body                = StructureBody ModuleTag_05
    MaxHealth         = 1500.0
  End
 
  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End

  Geometry              = BOX
  GeometryMajorRadius   = 32.2
  GeometryMinorRadius   = 32.2
  GeometryHeight        = 45.2
  
  AdditionalGeometry    = CYLINDER
  GeometryMajorRadius   = 24.6
  GeometryMinorRadius   = 0
  GeometryHeight        = 104.2
  
  AdditionalGeometry    = CYLINDER
  GeometryMajorRadius   = 12.6
  GeometryMinorRadius   = 0
  GeometryHeight        = 194.2
  
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER
End

;------------------------------------------------------------------------------
Object IsengardScaffolding01

	; *** ART Parameters ***
	Draw = W3DScriptedModelDraw ModuleTag_01
		DefaultModelConditionState
		Model = IUScaff01
		End
	    
		IdleAnimationState
		Animation           = IUScaff01
			AnimationName     = IUScaff01.IUScaff01
			AnimationMode     = LOOP
		End
		End
    
		;--damaged building
	  
		ModelConditionState  = DAMAGED
			Model         = IUScaff01  
		End
		AnimationState = DAMAGED
		End	    
		
		ModelConditionState  = REALLYDAMAGED
			Model         = IUScaff01
		End
	        AnimationState = REALLYDAMAGED
		     	EnteringStateFX	= FX_BuildingReallyDamaged
		End
 
		ModelConditionState  = COLLAPSING
			Model         = IUScaff01_D2
		End
		AnimationState = COLLAPSING
      		Animation				=	RubbleAnimation
				AnimationName		=	 IUScaff01_D2.IUScaff01_D2
				AnimationMode		=	ONCE
  			End
		End

		ModelConditionState  = RUBBLE
			Model         = IUScaff01_D3  
		End    
	End


	; *** AUDIO Parameters ***

	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		MaxUpdateRangeCap = 800
		AnimationSound = Sound: BuildingScaffoldShatterMedium		Animation: IUScaff01_D2.IUScaff01_D2	Frames: 14
		AnimationSound = Sound: BuildingScaffoldHeavyDamage		Animation: IUScaff01_D2.IUScaff01_D2 	Frames: 45
	End


	; ***DESIGN parameters ***
	DisplayName     = OBJECT:Scaffolding
	Side            = Isengard
	EditorSorting   = STRUCTURE
	ThreatLevel = 1.0

	; *** ENGINEERING Parameters ***  
	KindOf          = SELECTABLE IMMOBILE STRUCTURE MADE_OF_WOOD

	Body                = StructureBody ModuleTag_05
		MaxHealth       = 200.0
		MaxHealthDamaged = 150
		MaxHealthReallyDamaged = 100
	End

	Behavior = KeepObjectDie ModuleTag_IWantRubble
	End

	Behavior = FireWeaponWhenDeadBehavior FireWeaponWhenDeadBehaviorModuleTag_01
	  StartsActive = Yes
	  DelayTime = 1000 ; milliseconds from the actual death, to the weapon firing 
	  DeathWeapon = IsengardScaffoldLargeCollapseWeapon
	  WeaponOffset = X:-40 Y:0 Z:0
	End

	Geometry				= BOX
	GeometryMajorRadius	= 32.4
	GeometryMinorRadius	= 15.4
	GeometryHeight		= 54.8
	GeometryOffset		= X:0 Y:0 Z:0
	
	GeometryIsSmall		= No
	Shadow				= SHADOW_VOLUME
End

;------------------------------------------------------------------------------
Object IsengardScaffolding02

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
    DefaultModelConditionState
      Model = IUScaff02
    End
    
    IdleAnimationState
      Animation           = IUScaff02
        AnimationName     = IUScaff02.IUScaff02
        AnimationMode     = LOOP
      End
    End
    
		;--damaged building
	  
		ModelConditionState  = DAMAGED
			Model         = IUScaff02  
		End
		AnimationState = DAMAGED
		End	    
		
		ModelConditionState  = REALLYDAMAGED
			Model         = IUScaff02
		End
		AnimationState = REALLYDAMAGED
		     	EnteringStateFX	= FX_BuildingReallyDamaged
		End
    
		ModelConditionState  = COLLAPSING
			Model         = IUScaff02_D2
		End
		AnimationState = COLLAPSING
      		Animation				=	RubbleAnimation
				AnimationName		=	 IUScaff02_D2.IUScaff02_D2
				AnimationMode		=	ONCE
  			End
		End

		ModelConditionState  = RUBBLE
			Model         = IUScaff02_D3  
		End  

  End


  ; *** AUDIO Parameters ***

	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		AnimationSound = Sound: BuildingScaffoldShatterLightQuick	Animation: IUScaff02_D2.IUScaff02_D2	Frames: 77
		AnimationSound = Sound: BuildingScaffoldStressFracture	Animation: IUScaff02_D2.IUScaff02_D2	Frames: 0
		AnimationSound = Sound: BuildingScaffoldHeavyDamage		Animation: IUScaff02_D2.IUScaff02_D2 	Frames: 53
	End


  ; ***DESIGN parameters ***
  DisplayName     = OBJECT:Scaffolding
  Side            = Isengard
  EditorSorting   = STRUCTURE
  ThreatLevel = 1.0

  ; *** ENGINEERING Parameters ***  
  KindOf          = SELECTABLE IMMOBILE STRUCTURE MADE_OF_WOOD

	Body                = StructureBody ModuleTag_05
		MaxHealth       = 200.0
		MaxHealthDamaged = 150
		MaxHealthReallyDamaged = 100
	End

	Behavior = KeepObjectDie ModuleTag_IWantRubble
	End
  
	Behavior = FireWeaponWhenDeadBehavior FireWeaponWhenDeadBehaviorModuleTag_01
		StartsActive = Yes
		DelayTime = 1000 ; milliseconds from the actual death, to the weapon firing 
		DeathWeapon = IsengardScaffoldSmallCollapseWeapon
		WeaponOffset = X:-40 Y:0 Z:0
	End

  
  Geometry				= BOX
  GeometryMajorRadius	= 27.0
  GeometryMinorRadius	= 15.4
  GeometryHeight		= 84.4
  GeometryOffset		= X:8.4 Y:0 Z:0
  
  GeometryIsSmall		= No
  Shadow				= SHADOW_VOLUME
End

;------------------------------------------------------------------------------
Object IsengardScaffolding03

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
    DefaultModelConditionState
      Model = IUScaff03
    End
    
    IdleAnimationState
      Animation           = IUScaff03
        AnimationName     = IUScaff03.IUScaff03
        AnimationMode     = LOOP
      End
    End
     
		;--damaged building
	  
		ModelConditionState  = DAMAGED
			Model         = IUScaff03  
		End
		AnimationState = DAMAGED
		End	    
		
		ModelConditionState  = REALLYDAMAGED
			Model         = IUScaff03
		End
		AnimationState = REALLYDAMAGED
    			EnteringStateFX	= FX_BuildingReallyDamaged
		End
    
		ModelConditionState  = COLLAPSING
			Model         = IUScaff03_D2
		End
		AnimationState = COLLAPSING
      		Animation				=	RubbleAnimation
				AnimationName		=	 IUScaff03_D2.IUScaff03_D2
				AnimationMode		=	ONCE
  			End
		End

		ModelConditionState  = RUBBLE
			Model         = IUScaff03_D3  
		End  

  End


  ; *** AUDIO Parameters ***

	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		AnimationSound = Sound: BuildingScaffoldShatterLightQuick	Animation: IUScaff03_D2.IUScaff03_D2	Frames: 86
		AnimationSound = Sound: BuildingScaffoldShatterMedium		Animation: IUScaff03_D2.IUScaff03_D2	Frames: 15
		AnimationSound = Sound: BuildingScaffoldStressFracture	Animation: IUScaff03_D2.IUScaff03_D2	Frames: 64
		AnimationSound = Sound: BuildingScaffoldHeavyDamage		Animation: IUScaff03_D2.IUScaff03_D2 	Frames: 35
	End


  ; ***DESIGN parameters ***
  DisplayName     = OBJECT:Scaffolding
  Side            = Isengard
  EditorSorting   = STRUCTURE
  ThreatLevel = 1.0


  ; *** ENGINEERING Parameters ***  
  KindOf          = SELECTABLE IMMOBILE STRUCTURE MADE_OF_WOOD

	Body                = StructureBody ModuleTag_05
		MaxHealth       = 200.0
		MaxHealthDamaged = 150
		MaxHealthReallyDamaged = 100
	End

	Behavior = KeepObjectDie ModuleTag_IWantRubble
	End
	
	Behavior = FireWeaponWhenDeadBehavior FireWeaponWhenDeadBehaviorModuleTag_01
		StartsActive = Yes
		DelayTime = 1000 ; milliseconds from the actual death, to the weapon firing 
		DeathWeapon = IsengardScaffoldLargeCollapseWeapon
		WeaponOffset = X:-40 Y:0 Z:0
	End

  Geometry				= BOX
  GeometryMajorRadius	= 14.4
  GeometryMinorRadius	= 14.4
  GeometryHeight		= 64.8
  GeometryOffset		= X:0 Y:0 Z:0
  
  GeometryIsSmall		= No
  Shadow				= SHADOW_VOLUME
End

;------------------------------------------------------------------------------
Object IsengardScaffolding04

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
    DefaultModelConditionState
      Model = IUScaff04
    End
    
    IdleAnimationState
      Animation           = IUScaff04
        AnimationName     = IUScaff04.IUScaff04
        AnimationMode     = LOOP
      End
    End
    
		;--damaged building
	  
		ModelConditionState  = DAMAGED
			Model         = IUScaff04  
		End
		AnimationState = DAMAGED
		End	    
		
		ModelConditionState  = REALLYDAMAGED
			Model         = IUScaff04
		End
		AnimationState = REALLYDAMAGED
                    	EnteringStateFX	= FX_BuildingReallyDamaged
		End
    
		ModelConditionState  = COLLAPSING
			Model         = IUScaff04_D2
		End
		AnimationState = COLLAPSING
      		Animation				=	RubbleAnimation
				AnimationName		=	 IUScaff04_D2.IUScaff04_D2
				AnimationMode		=	ONCE
  			End
		End

		ModelConditionState  = RUBBLE
			Model         = IUScaff04_D3  
		End  

  End


  ; *** AUDIO Parameters ***

	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		AnimationSound = Sound: BuildingScaffoldShatterLightQuick	Animation: IUScaff04_D2.IUScaff04_D2	Frames: 10
		AnimationSound = Sound: BuildingScaffoldShatterMedium		Animation: IUScaff04_D2.IUScaff04_D2	Frames: 48
		AnimationSound = Sound: BuildingScaffoldHeavyDamage		Animation: IUScaff04_D2.IUScaff04_D2 	Frames: 30
	End


  ; ***DESIGN parameters ***
  DisplayName     = OBJECT:Scaffolding
  Side            = Isengard
  EditorSorting   = STRUCTURE
  ThreatLevel = 1.0


  ; *** ENGINEERING Parameters ***  
  KindOf          = SELECTABLE IMMOBILE STRUCTURE MADE_OF_WOOD

	Body                = StructureBody ModuleTag_05
		MaxHealth       = 200.0
		MaxHealthDamaged = 150
		MaxHealthReallyDamaged = 100
	End

	Behavior = KeepObjectDie ModuleTag_IWantRubble
	End
	Behavior = FireWeaponWhenDeadBehavior FireWeaponWhenDeadBehaviorModuleTag_01
		StartsActive = Yes
		DelayTime = 1000 ; milliseconds from the actual death, to the weapon firing 
		DeathWeapon = IsengardScaffoldLargeCollapseWeapon
		WeaponOffset = X:-40 Y:0 Z:0
	End

  Geometry				= BOX
  GeometryMajorRadius	= 58.4
  GeometryMinorRadius	= 20.4
  GeometryHeight		= 44.8
  GeometryOffset		= X:0 Y:0 Z:0
  
  AdditionalGeometry	= CYLINDER
  GeometryMajorRadius	= 13.0
  GeometryMinorRadius	= 0
  GeometryHeight		= 84.8
  GeometryOffset		= X:-36.4 Y:0 Z:0
  
  GeometryIsSmall		= No
  Shadow				= SHADOW_VOLUME
End


;------------------------------------------------------------------------------
Object IsengardScaffolding05

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
    DefaultModelConditionState
      Model = IUScaff05
    End
    
		;--damaged building
	  
		ModelConditionState  = DAMAGED
			Model         = IUScaff05  
		End
		AnimationState = DAMAGED
		End	    
		
		ModelConditionState  = REALLYDAMAGED
			Model         = IUScaff05
		End
		AnimationState = REALLYDAMAGED
		     	EnteringStateFX	= FX_BuildingReallyDamaged
		End
    
		ModelConditionState  = COLLAPSING
			Model         = IUScaff05_D2
		End
		AnimationState = COLLAPSING
      		Animation				=	RubbleAnimation
				AnimationName		=	 IUScaff05_D2.IUScaff05_D2
				AnimationMode		=	ONCE
  			End
		End

		ModelConditionState  = RUBBLE
			Model         = IUScaff05_D3  
		End  

  End


  ; *** AUDIO Parameters ***

	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		AnimationSound = Sound: BuildingScaffoldShatterLightQuick	Animation: IUScaff05_D2.IUScaff05_D2	Frames: 80
		AnimationSound = Sound: BuildingScaffoldShatterMedium		Animation: IUScaff05_D2.IUScaff05_D2	Frames: 15
		AnimationSound = Sound: BuildingScaffoldStressFracture	Animation: IUScaff05_D2.IUScaff05_D2	Frames: 14
		AnimationSound = Sound: BuildingScaffoldHeavyDamage		Animation: IUScaff05_D2.IUScaff05_D2 	Frames: 49
	End


  ; ***DESIGN parameters ***
  DisplayName     = OBJECT:Scaffolding
  Side            = Isengard
  EditorSorting   = STRUCTURE
  ThreatLevel = 1.0


  ; *** ENGINEERING Parameters ***  
  KindOf          = SELECTABLE IMMOBILE STRUCTURE MADE_OF_WOOD

	Body                = StructureBody ModuleTag_05
		MaxHealth       = 200.0
		MaxHealthDamaged = 150
		MaxHealthReallyDamaged = 100
	End
	Behavior = FireWeaponWhenDeadBehavior FireWeaponWhenDeadBehaviorModuleTag_01
		StartsActive = Yes
		DelayTime = 1000 ; milliseconds from the actual death, to the weapon firing 
		DeathWeapon = IsengardScaffoldSmallCollapseWeapon
		WeaponOffset = X:-40 Y:0 Z:0
	End

	Behavior = KeepObjectDie ModuleTag_IWantRubble
	End

  Geometry				= BOX
  GeometryMajorRadius	= 18.4
  GeometryMinorRadius	= 12.4
  GeometryHeight		= 84.8
  
  GeometryIsSmall		= No
  Shadow				= SHADOW_VOLUME
End



;------------------------------------------------------------------------------
Object IsengardScaffolding06

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
    DefaultModelConditionState
      Model = IUScaff06
    End
    
    
		;--damaged building
	  
		ModelConditionState  = DAMAGED
			Model         = IUScaff06  
		End
		AnimationState = DAMAGED
		End	    
		
		ModelConditionState  = REALLYDAMAGED
			Model         = IUScaff06
		End
		AnimationState = REALLYDAMAGED
		     	EnteringStateFX	= FX_BuildingReallyDamaged
		End
    
		ModelConditionState  = COLLAPSING
			Model         = IUScaff06_D2
		End
		AnimationState = COLLAPSING
      		Animation				=	RubbleAnimation
				AnimationName		=	 IUScaff06_D2.IUScaff06_D2
				AnimationMode		=	ONCE
  			End
		End

		ModelConditionState  = RUBBLE
			Model         = IUScaff06_D3  
		End  

  End


  ; *** AUDIO Parameters ***

	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		AnimationSound = Sound: BuildingScaffoldShatterLightQuick	Animation: IUScaff06_D2.IUScaff06_D2	Frames: 71
		AnimationSound = Sound: BuildingScaffoldShatterMedium		Animation: IUScaff06_D2.IUScaff06_D2	Frames: 12
		AnimationSound = Sound: BuildingScaffoldStressFracture	Animation: IUScaff06_D2.IUScaff06_D2	Frames: 13
		AnimationSound = Sound: BuildingScaffoldHeavyDamage		Animation: IUScaff06_D2.IUScaff06_D2 	Frames: 46
	End


  ; ***DESIGN parameters ***
  DisplayName     = OBJECT:Scaffolding
  Side            = Isengard
  EditorSorting   = STRUCTURE
  ThreatLevel = 1.0


  ; *** ENGINEERING Parameters ***  
  KindOf          = SELECTABLE IMMOBILE STRUCTURE MADE_OF_WOOD

	Body                = StructureBody ModuleTag_05
		MaxHealth       = 200.0
		MaxHealthDamaged = 150
		MaxHealthReallyDamaged = 100
	End
	Behavior = FireWeaponWhenDeadBehavior FireWeaponWhenDeadBehaviorModuleTag_01
		StartsActive = Yes
		DelayTime = 1000 ; milliseconds from the actual death, to the weapon firing 
		DeathWeapon = IsengardScaffoldLargeCollapseWeapon
		WeaponOffset = X:-40 Y:0 Z:0
	End

	Behavior = KeepObjectDie ModuleTag_IWantRubble
	End

  Geometry				= BOX
  GeometryMajorRadius	= 15.4
  GeometryMinorRadius	= 45.4
  GeometryHeight		= 44.8
  
  GeometryIsSmall		= No
  Shadow				= SHADOW_VOLUME
End


;------------------------------------------------------------------------------
;Object IsengardScaffolding07
;
;  ; *** ART Parameters ***
;  Draw = W3DScriptedModelDraw ModuleTag_01
;    DefaultModelConditionState
;      Model = IUScaff07
;    End
;  End
;
;  ; *** AUDIO Parameters ***
;
;  ; ***DESIGN parameters ***
;  DisplayName     = OBJECT:Scaffolding
;  Side            = Isengard
;  EditorSorting   = STRUCTURE
;  ThreatLevel = 1.0
;
;  ; *** ENGINEERING Parameters ***  
;  KindOf          = SELECTABLE IMMOBILE
;  Body            = ActiveBody ModuleTag_03
;    MaxHealth       = 200.0
;  End
;  
;	Behavior = FireWeaponWhenDeadBehavior FireWeaponWhenDeadBehaviorModuleTag_01
;		StartsActive = Yes
;		DelayTime = 1000 ; milliseconds from the actual death, to the weapon firing 
;		DeathWeapon = IsengardScaffoldSmallCollapseWeapon
;		WeaponOffset = X:-40 Y:0 Z:0
;	End
;	Behavior = KeepObjectDie ModuleTag_IWantRubble
;	End
;	
;  Geometry				= BOX
;  GeometryMajorRadius	= 41.4
;  GeometryMinorRadius	= 14.4
;  GeometryHeight		= 43.8
;  
;  GeometryIsSmall		= No
;  Shadow				= SHADOW_VOLUME
;End

;------------------------------------------------------------------------------
Object IsengardScaffolding08

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
    DefaultModelConditionState
      Model = IUScaff08
    End
    
		;--damaged building
	  
		ModelConditionState  = DAMAGED
			Model         = IUScaff08  
		End
		AnimationState = DAMAGED
		End	    
		
		ModelConditionState  = REALLYDAMAGED
			Model         = IUScaff08
		End
		AnimationState = REALLYDAMAGED
		     	EnteringStateFX	= FX_BuildingReallyDamaged
		End
    
		ModelConditionState  = COLLAPSING
			Model         = IUScaff08_D2
		End
		AnimationState = COLLAPSING
      		Animation				=	RubbleAnimation
				AnimationName		=	 IUScaff08_D2.IUScaff08_D2
				AnimationMode		=	ONCE
  			End
		End

		ModelConditionState  = RUBBLE
			Model         = IUScaff08_D3  
		End  

  End


  ; *** AUDIO Parameters ***

	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		AnimationSound = Sound: BuildingScaffoldShatterLightQuick	Animation: IUScaff08_D2.IUScaff08_D2	Frames: 8 54
		AnimationSound = Sound: BuildingScaffoldShatterMedium		Animation: IUScaff08_D2.IUScaff08_D2	Frames: 28
	End


  ; ***DESIGN parameters ***
  DisplayName     = OBJECT:Scaffolding
  Side            = Isengard
  EditorSorting   = STRUCTURE
  ThreatLevel = 1.0


  ; *** ENGINEERING Parameters ***  
  KindOf          = SELECTABLE IMMOBILE STRUCTURE MADE_OF_WOOD

	Body                = StructureBody ModuleTag_05
		MaxHealth       = 200.0
		MaxHealthDamaged = 150
		MaxHealthReallyDamaged = 100
	End

	Behavior = FireWeaponWhenDeadBehavior FireWeaponWhenDeadBehaviorModuleTag_01
		StartsActive = Yes
		DelayTime = 1000 ; milliseconds from the actual death, to the weapon firing 
		DeathWeapon = IsengardScaffoldSmallCollapseWeapon
		WeaponOffset = X:-40 Y:0 Z:0
	End
	Behavior = KeepObjectDie ModuleTag_IWantRubble
	End

  Geometry				= BOX
  GeometryMajorRadius	= 32.4
  GeometryMinorRadius	= 12.4
  GeometryHeight		= 58.8
  
  GeometryIsSmall		= No
  Shadow				= SHADOW_VOLUME
End

;------------------------------------------------------------------------------
Object IsengardScaffolding09

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
    DefaultModelConditionState
      Model = IUScaff09
    End
     
		;--damaged building
	  
		ModelConditionState  = DAMAGED
			Model         = IUScaff09  
		End
		AnimationState = DAMAGED
		End	    
		
		ModelConditionState  = REALLYDAMAGED
			Model         = IUScaff09
		End
		AnimationState = REALLYDAMAGED
		     	EnteringStateFX	= FX_BuildingReallyDamaged
		End
    
		ModelConditionState  = COLLAPSING
			Model         = IUScaff09_D2
		End
		AnimationState = COLLAPSING
      		Animation				=	RubbleAnimation
				AnimationName		=	 IUScaff09_D2.IUScaff09_D2
				AnimationMode		=	ONCE
  			End
		End

		ModelConditionState  = RUBBLE
			Model         = IUScaff09_D3  
		End  

  End


  ; *** AUDIO Parameters ***

	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		AnimationSound = Sound: BuildingScaffoldShatterLightQuick	Animation: IUScaff09_D2.IUScaff09_D2	Frames: 35 57
		AnimationSound = Sound: BuildingScaffoldShatterMedium		Animation: IUScaff09_D2.IUScaff09_D2	Frames: 11
	End


  ; ***DESIGN parameters ***
  DisplayName     = OBJECT:Scaffolding
  Side            = Isengard
  EditorSorting   = STRUCTURE
  ThreatLevel = 1.0


  ; *** ENGINEERING Parameters ***  
  KindOf          = SELECTABLE IMMOBILE STRUCTURE MADE_OF_WOOD

	Body                = StructureBody ModuleTag_05
		MaxHealth       = 200.0
		MaxHealthDamaged = 150
		MaxHealthReallyDamaged = 100
	End

	Behavior = FireWeaponWhenDeadBehavior FireWeaponWhenDeadBehaviorModuleTag_01
		StartsActive = Yes
		DelayTime = 1000 ; milliseconds from the actual death, to the weapon firing 
		DeathWeapon = IsengardScaffoldLargeCollapseWeapon
		WeaponOffset = X:-40 Y:0 Z:0
	End
	Behavior = KeepObjectDie ModuleTag_IWantRubble
	End

  Geometry				= BOX
  GeometryMajorRadius	= 21.4
  GeometryMinorRadius	= 29.4
  GeometryHeight		= 64.8
  
  GeometryIsSmall		= No
  Shadow				= SHADOW_VOLUME
End

;------------------------------------------------------------------------------
Object IsengardScaffolding10

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
    DefaultModelConditionState
      Model = IUScaff10
    End
     
		;--damaged building
	  
		ModelConditionState  = DAMAGED
			Model         = IUScaff10  
		End
		AnimationState = DAMAGED
		End	    
		
		ModelConditionState  = REALLYDAMAGED
			Model         = IUScaff10
		End
		AnimationState = REALLYDAMAGED
		     	EnteringStateFX	= FX_BuildingReallyDamaged
		End
    
		ModelConditionState  = COLLAPSING
			Model         = IUScaff10_D2
		End
		AnimationState = COLLAPSING
      		Animation				=	RubbleAnimation
				AnimationName		=	 IUScaff10_D2.IUScaff10_D2
				AnimationMode		=	ONCE
  			End
		End

		ModelConditionState  = RUBBLE
			Model         = IUScaff10_D3  
		End  

  End


  ; *** AUDIO Parameters ***

	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		AnimationSound = Sound: BuildingScaffoldShatterMedium		Animation: IUScaff10_D2.IUScaff10_D2	Frames: 0
		AnimationSound = Sound: BuildingScaffoldHeavyDamage		Animation: IUScaff10_D2.IUScaff10_D2 	Frames: 31
	End


  ; ***DESIGN parameters ***
  DisplayName     = OBJECT:Scaffolding
  Side            = Isengard
  EditorSorting   = STRUCTURE
  ThreatLevel = 1.0


  ; *** ENGINEERING Parameters ***  
  KindOf          = SELECTABLE IMMOBILE STRUCTURE MADE_OF_WOOD

	Body                = StructureBody ModuleTag_05
		MaxHealth       = 200.0
		MaxHealthDamaged = 150
		MaxHealthReallyDamaged = 100
	End

	Behavior = FireWeaponWhenDeadBehavior FireWeaponWhenDeadBehaviorModuleTag_01
		StartsActive = Yes
		DelayTime = 1000 ; milliseconds from the actual death, to the weapon firing 
		DeathWeapon = IsengardScaffoldSmallCollapseWeapon
		WeaponOffset = X:-40 Y:0 Z:0
	End
	Behavior = KeepObjectDie ModuleTag_IWantRubble
	End

  Geometry				= BOX
  GeometryMajorRadius	= 42.4
  GeometryMinorRadius	= 25.4
  GeometryHeight		= 57.8
  
  GeometryIsSmall		= No
  Shadow				= SHADOW_VOLUME
End

;------------------------------------------------------------------------------
;Object IsengardScaffolding11
;
;  ; *** ART Parameters ***
;  Draw = W3DScriptedModelDraw ModuleTag_01
;    DefaultModelConditionState
;      Model = IUScaff11
;    End
;  End
;
;  ; *** AUDIO Parameters ***
;
;  ; ***DESIGN parameters ***
;  DisplayName     = OBJECT:Scaffolding
;  Side            = Isengard
;  EditorSorting   = STRUCTURE
;  ThreatLevel = 1.0
;
;  ; *** ENGINEERING Parameters ***  
;  KindOf          = SELECTABLE IMMOBILE
;  Body            = ActiveBody ModuleTag_03
;    MaxHealth       = 200.0
;  End
;
;	Behavior = FireWeaponWhenDeadBehavior FireWeaponWhenDeadBehaviorModuleTag_01
;		StartsActive = Yes
;		DelayTime = 1000 ; milliseconds from the actual death, to the weapon firing 
;		DeathWeapon = IsengardScaffoldLargeCollapseWeapon
;		WeaponOffset = X:-40 Y:0 Z:0
;	End
;	Behavior = KeepObjectDie ModuleTag_IWantRubble
;	End
;  Geometry				= BOX
;  GeometryMajorRadius	= 24.4
;  GeometryMinorRadius	= 26.4
;  GeometryHeight		= 66.8
;  
;  GeometryIsSmall		= No
;  Shadow				= SHADOW_VOLUME
;End
;
;------------------------------------------------------------------------------
Object IsengardScaffolding12

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
    DefaultModelConditionState
      Model = IUScaff12
    End
     
		;--damaged building
	  
		ModelConditionState  = DAMAGED
			Model         = IUScaff12  
		End
		AnimationState = DAMAGED
		End	    
		
		ModelConditionState  = REALLYDAMAGED
			Model         = IUScaff12
		End
		AnimationState = REALLYDAMAGED
		     	EnteringStateFX	= FX_BuildingReallyDamaged
		End
    
		ModelConditionState  = COLLAPSING
			Model         = IUScaff12_D2
		End
		AnimationState = COLLAPSING
      		Animation				=	RubbleAnimation
				AnimationName		=	 IUScaff12_D2.IUScaff12_D2
				AnimationMode		=	ONCE
  			End
		End

		ModelConditionState  = RUBBLE
			Model         = IUScaff12_D3  
		End  

  End


  ; *** AUDIO Parameters ***

	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		AnimationSound = Sound: BuildingScaffoldShatterLightQuick	Animation: IUScaff12_D2.IUScaff12_D2	Frames: 0 50
		AnimationSound = Sound: BuildingScaffoldStressFracture	Animation: IUScaff12_D2.IUScaff12_D2	Frames: 59
		AnimationSound = Sound: BuildingScaffoldHeavyDamage		Animation: IUScaff12_D2.IUScaff12_D2 	Frames: 87
	End


  ; ***DESIGN parameters ***
  DisplayName     = OBJECT:Scaffolding
  Side            = Isengard
  EditorSorting   = STRUCTURE
  ThreatLevel = 1.0


  ; *** ENGINEERING Parameters ***  
  KindOf          = SELECTABLE IMMOBILE STRUCTURE MADE_OF_WOOD

	Body                = StructureBody ModuleTag_05
		MaxHealth       = 200.0
		MaxHealthDamaged = 150
		MaxHealthReallyDamaged = 100
	End

	Behavior = FireWeaponWhenDeadBehavior FireWeaponWhenDeadBehaviorModuleTag_01
		StartsActive = Yes
		DelayTime = 1000 ; milliseconds from the actual death, to the weapon firing 
		DeathWeapon = IsengardScaffoldLargeCollapseWeapon
		WeaponOffset = X:-40 Y:0 Z:0
	End
	Behavior = KeepObjectDie ModuleTag_IWantRubble
	End

  Geometry				= BOX
  GeometryMajorRadius	= 72.4
  GeometryMinorRadius	= 16.4
  GeometryHeight		= 79.8
  
  GeometryIsSmall		= No
  Shadow				= SHADOW_VOLUME
End

;------------------------------------------------------------------------------
Object IsengardScaffolding13

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
    DefaultModelConditionState
      Model = IUScaff13
    End
    
		;--damaged building
	  
		ModelConditionState  = DAMAGED
			Model         = IUScaff13  
		End
		AnimationState = DAMAGED
		End	    
		
		ModelConditionState  = REALLYDAMAGED
			Model         = IUScaff13
		End
		AnimationState = REALLYDAMAGED
		     	EnteringStateFX	= FX_BuildingReallyDamaged
		End
    
		ModelConditionState  = COLLAPSING
			Model         = IUScaff13_D2
		End
		AnimationState = COLLAPSING
      		Animation				=	RubbleAnimation
				AnimationName		=	 IUScaff13_D2.IUScaff13_D2
				AnimationMode		=	ONCE
  			End
		End

		ModelConditionState  = RUBBLE
			Model         = IUScaff13_D3  
		End  

  End


  ; *** AUDIO Parameters ***

	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		AnimationSound = Sound: BuildingScaffoldShatterLightQuick	Animation: IUScaff13_D2.IUScaff13_D2	Frames: 57
		AnimationSound = Sound: BuildingScaffoldShatterMedium		Animation: IUScaff13_D2.IUScaff13_D2	Frames: 13
		AnimationSound = Sound: BuildingScaffoldStressFracture	Animation: IUScaff13_D2.IUScaff13_D2	Frames: 0
		AnimationSound = Sound: BuildingScaffoldHeavyDamage		Animation: IUScaff13_D2.IUScaff13_D2 	Frames: 44
	End


  ; ***DESIGN parameters ***
  DisplayName     = OBJECT:Scaffolding
  Side            = Isengard
  EditorSorting   = STRUCTURE
  ThreatLevel = 1.0


  ; *** ENGINEERING Parameters ***  
  KindOf          = SELECTABLE IMMOBILE STRUCTURE MADE_OF_WOOD

	Body                = StructureBody ModuleTag_05
		MaxHealth       = 200.0
		MaxHealthDamaged = 150
		MaxHealthReallyDamaged = 100
	End

	Behavior = FireWeaponWhenDeadBehavior FireWeaponWhenDeadBehaviorModuleTag_01
		StartsActive = Yes
		DelayTime = 1000 ; milliseconds from the actual death, to the weapon firing 
		DeathWeapon = IsengardScaffoldLargeCollapseWeapon
		WeaponOffset = X:-40 Y:0 Z:0
	End
	Behavior = KeepObjectDie ModuleTag_IWantRubble
	End

  Geometry				= BOX
  GeometryMajorRadius	= 17.0
  GeometryMinorRadius	= 13.4
  GeometryHeight		= 100.8
  GeometryOffset		= X:15.4 Y:0 Z:0
  
  AdditionalGeometry	= BOX
  GeometryMajorRadius	= 35.4
  GeometryMinorRadius	= 13.4
  GeometryHeight		= -72.0
  GeometryOffset		= X:0 Y:0 Z:86.8
  
  GeometryIsSmall		= No
  Shadow				= SHADOW_VOLUME
End

;------------------------------------------------------------------------------
;Object IsengardScaffolding14
;
;  ; *** ART Parameters ***
;  Draw = W3DScriptedModelDraw ModuleTag_01
;    DefaultModelConditionState
;      Model = IUScaff14
;    End
;  End
;
;  ; *** AUDIO Parameters ***
;
;  ; ***DESIGN parameters ***
;  DisplayName     = OBJECT:Scaffolding
;  Side            = Isengard
;  EditorSorting   = STRUCTURE
;  ThreatLevel = 1.0
;
;  ; *** ENGINEERING Parameters ***  
;  KindOf          = SELECTABLE IMMOBILE
;  Body            = ActiveBody ModuleTag_03
;    MaxHealth       = 99999.0
;  End
;
;	Behavior = FireWeaponWhenDeadBehavior FireWeaponWhenDeadBehaviorModuleTag_01
;		StartsActive = Yes
;		DelayTime = 1000 ; milliseconds from the actual death, to the weapon firing 
;		DeathWeapon = IsengardScaffoldLargeCollapseWeapon
;		WeaponOffset = X:-40 Y:0 Z:0
;	End
;	Behavior = KeepObjectDie ModuleTag_IWantRubble
;	End
;	
;  Geometry				= BOX
;  GeometryMajorRadius	= 16.4
;  GeometryMinorRadius	= 12.4
;  GeometryHeight		= 81.8
;  GeometryOffset		= X:0 Y:0 Z:0
;  
;  AdditionalGeometry	= BOX
;  GeometryMajorRadius	= 30.4
;  GeometryMinorRadius	= 12.4
;  GeometryHeight		= -66.0
;  GeometryOffset		= X:0 Y:0 Z:80.8
;  
;  GeometryIsSmall		= No
;  Shadow				= SHADOW_VOLUME
;End

;------------------------------------------------------------------------------
;Object IsengardScaffolding15
;
;  ; *** ART Parameters ***
;  Draw = W3DScriptedModelDraw ModuleTag_01
;    DefaultModelConditionState
;      Model = IUScaff15
;    End
;  End
;
;  ; *** AUDIO Parameters ***
;
;  ; ***DESIGN parameters ***
;  DisplayName     = OBJECT:Scaffolding
;  Side            = Isengard
;  EditorSorting   = STRUCTURE
;  ThreatLevel = 1.0
;
;  ; *** ENGINEERING Parameters ***  
;  KindOf          = SELECTABLE IMMOBILE
;  Body            = ActiveBody ModuleTag_03
;    MaxHealth       = 99999.0
;  End
;
;	Behavior = FireWeaponWhenDeadBehavior FireWeaponWhenDeadBehaviorModuleTag_01
;		StartsActive = Yes
;		DelayTime = 1000 ; milliseconds from the actual death, to the weapon firing 
;		DeathWeapon = IsengardScaffoldLargeCollapseWeapon
;		WeaponOffset = X:-40 Y:0 Z:0
;	End
;	Behavior = KeepObjectDie ModuleTag_IWantRubble
;	End
;  Geometry				= BOX
;  GeometryMajorRadius	= 20.0
;  GeometryMinorRadius	= 10.4
;  GeometryHeight		= 74.8
;  GeometryOffset		= X:8.4 Y:0 Z:0
;  
;  AdditionalGeometry	= BOX
;  GeometryMajorRadius	= 45.4
;  GeometryMinorRadius	= 29.4
;  GeometryHeight		= -37.0
;  GeometryOffset		= X:0 Y:0 Z:60.8
;  
;  GeometryIsSmall		= No
;  Shadow				= SHADOW_VOLUME
;  
;End

;------------------------------------------------------------------------------
Object IsengardScaffolding16

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
    DefaultModelConditionState
      Model = IUScaff16
    End
    
		;--damaged building
	  
		ModelConditionState  = DAMAGED
			Model         = IUScaff16  
		End
		AnimationState = DAMAGED
		End	    
		
		ModelConditionState  = REALLYDAMAGED
			Model         = IUScaff16
		End
		AnimationState = REALLYDAMAGED
		     	EnteringStateFX	= FX_BuildingReallyDamaged
		End
    
		ModelConditionState  = COLLAPSING
			Model         = IUScaff16_D2
		End
		AnimationState = COLLAPSING
      		Animation				=	RubbleAnimation
				AnimationName		=	 IUScaff16_D2.IUScaff16_D2
				AnimationMode		=	ONCE
  			End
		End

		ModelConditionState  = RUBBLE
			Model         = IUScaff16_D3  
		End  

  End


  ; *** AUDIO Parameters ***

	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		AnimationSound = Sound: BuildingScaffoldShatterLightQuick	Animation: IUScaff16_D2.IUScaff16_D2	Frames: 46
		AnimationSound = Sound: BuildingScaffoldShatterMedium		Animation: IUScaff16_D2.IUScaff16_D2	Frames: 12
		AnimationSound = Sound: BuildingScaffoldStressFracture	Animation: IUScaff16_D2.IUScaff16_D2	Frames: 13
		AnimationSound = Sound: BuildingScaffoldHeavyDamage		Animation: IUScaff16_D2.IUScaff16_D2 	Frames: 69
	End


  ; ***DESIGN parameters ***
  DisplayName     = OBJECT:Scaffolding
  Side            = Isengard
  EditorSorting   = STRUCTURE
  ThreatLevel = 1.0


  ; *** ENGINEERING Parameters ***  
  KindOf          = SELECTABLE IMMOBILE STRUCTURE MADE_OF_WOOD

	Body                = StructureBody ModuleTag_05
		MaxHealth       = 200.0
		MaxHealthDamaged = 150
		MaxHealthReallyDamaged = 100
	End
	Behavior = FireWeaponWhenDeadBehavior FireWeaponWhenDeadBehaviorModuleTag_01
		StartsActive = Yes
		DelayTime = 1000 ; milliseconds from the actual death, to the weapon firing 
		DeathWeapon = IsengardScaffoldLargeCollapseWeapon
		WeaponOffset = X:-40 Y:0 Z:0
	End
	Behavior = KeepObjectDie ModuleTag_IWantRubble
	End

  Geometry				= BOX
  GeometryMajorRadius	= 52.4
  GeometryMinorRadius	= 15.4
  GeometryHeight		= 72.8
  
  GeometryIsSmall		= No
  Shadow				= SHADOW_VOLUME
End

;------------------------------------------------------------------------------
Object IsengardScaffolding17

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
    DefaultModelConditionState
      Model = IUScaff17
    End
    
		;--damaged building
	  
		ModelConditionState  = DAMAGED
			Model         = IUScaff17  
		End
		AnimationState = DAMAGED
		End	    
		
		ModelConditionState  = REALLYDAMAGED
			Model         = IUScaff17
		End
		AnimationState = REALLYDAMAGED
		     	EnteringStateFX	= FX_BuildingReallyDamaged
		End
    
		ModelConditionState  = COLLAPSING
			Model         = IUScaff17_D2
		End
		AnimationState = COLLAPSING
      		Animation				=	RubbleAnimation
				AnimationName		=	 IUScaff17_D2.IUScaff17_D2
				AnimationMode		=	ONCE
  			End
		End

		ModelConditionState  = RUBBLE
			Model         = IUScaff17_D3  
		End  

  End


  ; *** AUDIO Parameters ***

	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		AnimationSound = Sound: BuildingScaffoldShatterMedium		Animation: IUScaff17_D2.IUScaff17_D2	Frames: 34
		AnimationSound = Sound: BuildingScaffoldHeavyDamage		Animation: IUScaff17_D2.IUScaff17_D2 	Frames: 10
	End


  ; ***DESIGN parameters ***
  DisplayName     = OBJECT:Scaffolding
  Side            = Isengard
  EditorSorting   = STRUCTURE
  ThreatLevel = 1.0


  ; *** ENGINEERING Parameters ***  
  KindOf          = SELECTABLE IMMOBILE STRUCTURE MADE_OF_WOOD

	Body                = StructureBody ModuleTag_05
		MaxHealth       = 200.0
		MaxHealthDamaged = 150
		MaxHealthReallyDamaged = 100
	End

	Behavior = FireWeaponWhenDeadBehavior FireWeaponWhenDeadBehaviorModuleTag_01
		StartsActive = Yes
		DelayTime = 1000 ; milliseconds from the actual death, to the weapon firing 
		DeathWeapon = IsengardScaffoldLargeCollapseWeapon
		WeaponOffset = X:-40 Y:0 Z:0
	End
	Behavior = KeepObjectDie ModuleTag_IWantRubble
	End

  Geometry				= BOX
  GeometryMajorRadius	= 40.4
  GeometryMinorRadius	= 14.4
  GeometryHeight		= 64.8
  
  GeometryIsSmall		= No
  Shadow				= SHADOW_VOLUME
End

;------------------------------------------------------------------------------
;Tainted land object
Object TaintLand

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
;      Model = TaintCntr
      Model = NONE
      ParticleSysBone = None TaintHCPing HouseColor:yes
    End
   MultiPlayerOnly = Yes
  End 

  ; *** AUDIO Parameters ***
;  SoundAmbient  = TaintedLandAmbientLoop
 
  ; ***DESIGN parameters ***
  DisplayName     = OBJECT:TaintedLand
  Side            = Mordor
  EditorSorting   = STRUCTURE
;  ThreatLevel = 1.0

;  CommandSet          = TaintedLandCommandSet

  ; *** ENGINEERING Parameters ***  
  RadarPriority       = NOT_ON_RADAR
  KindOf              = PRELOAD UNATTACKABLE IMMOBILE TAINT

	Behavior = AttributeModifierAuraUpdate ModuleTag_TaintedLandOne
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= TaintPositiveSpell
		RefreshDelay	= 2000
		Range			= 200
		ObjectFilter	= ANY +INFANTRY +CAVALRY -HERO -STRUCTURE -BASE_FOUNDATION -HERO
		RunWhileDead	= Yes
		RequiredConditions = TAINT ; In case elven wood and taint overlap, this flag makes it double check the cell type of the target
	End	

	Behavior = AttributeModifierAuraUpdate ModuleTag_TaintedLandTwo
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= TaintNegativeSpell		
		RefreshDelay	= 2000
		Range			= 200
		TargetEnemy		= Yes
		AntiCategory	= LEADERSHIP ; This means cancel all previous leadership bonuses
		AntiFX			= FX_AntiLeadership ; FX for anti category
		ObjectFilter	= ANY +INFANTRY +CAVALRY -HERO -STRUCTURE -BASE_FOUNDATION
		RunWhileDead	= Yes
		RequiredConditions = TAINT
	End	

;  Geometry = BOX
;  GeometryMajorRadius = 80.0
;  GeometryMinorRadius = 88.0
;  GeometryHeight = 40.0
;  GeometryIsSmall = No

  GeometryIsSmall		= No
  Shadow				= SHADOW_VOLUME
End




;------------------------------------------------------------------------------
Object IsengardDam

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_Draw
    DefaultModelConditionState
      Model = IB_Dam
    End
    
    
	ModelConditionState  = DAMAGED
		Model         = IB_Dam_D1  
		ParticleSysBone   = bone02 WaterPokeSmall03
        ParticleSysBone   = bone03 WaterPokeSmall02
        ParticleSysBone   = bone04 WaterPokeSmall01
        ParticleSysBone   = bone02 CatapultDestroyDust
        ParticleSysBone   = bone03 CatapultDestroyDust
        ParticleSysBone   = bone04 CatapultDestroyDust
	End
	AnimationState = DAMAGED
	End
	
	
	ModelConditionState  = REALLYDAMAGED
		Model         = IB_Dam_D2
		ParticleSysBone   = bone02 WaterPokeLarge03
        ParticleSysBone   = bone03 WaterPokeLarge02
        ParticleSysBone   = bone04 WaterPokeLarge01
        ParticleSysBone   = bone02 CatapultDestroyDust
        ParticleSysBone   = bone03 CatapultDestroyDust
        ParticleSysBone   = bone04 CatapultDestroyDust  
	End
	AnimationState = REALLYDAMAGED
		Animation	=	D2Animation
			AnimationName		=	IB_Dam_D2.IB_Dam_D2
			AnimationMode		=	ONCE
		End
	End
	
		    
  End

  ;----------------- AUDIO parameters -------------------

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone
	SoundAmbientDamaged		= DamBreakLeakLightWater
	SoundAmbientReallyDamaged	= DamBreakLeakHeavyWater
	SoundAmbientReallyDamaged2	= DamBreakLeakLightWater

	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		MaxUpdateRangeCap = 800
 		AnimationSound = Sound:ImpactRock					Animation:IB_Dam_D2.IB_Dam_D2		Frames:2
 		AnimationSound = Sound:BuildingTopple				Animation:IB_Dam_D2.IB_Dam_D2		Frames:29
 		AnimationSound = Sound:BuildingForbiddenPoolDestroyRock	Animation:IB_Dam_D2.IB_Dam_D2		Frames:33
 		AnimationSound = Sound:BuildingForbiddenPoolDestroyStone	Animation:IB_Dam_D2.IB_Dam_D2		Frames:38
 		AnimationSound = Sound:DamageDebrisLightRock			Animation:IB_Dam_D2.IB_Dam_D2		Frames:45
	End


  ; ***DESIGN parameters ***

  DisplayName      = OBJECT:IsengardDam
  Side = Isengard
  EditorSorting   = STRUCTURE


  ; *** ENGINEERING Parameters ***  
  KindOf          = SELECTABLE IMMOBILE STRUCTURE MADE_OF_STONE
;  Shadow          = SHADOW_VOLUME
  Body            = ActiveBody ModuleTag_03
    MaxHealth       = 20000.0
    MaxHealthDamaged = 15000.0
    MaxHealthReallyDamaged = 11000.0
  End

ArmorSet
   Conditions        = None
   Armor             = DamArmor
    ;DamageFX          = StructureDamageFXNoShake
 End
 
  AttackContactPoint	= X:0 Y:0   Z:10
  AttackContactPoint	= X:0 Y:30  Z:100
  AttackContactPoint	= X:0 Y:-50 Z:70
  AttackContactPoint	= X:0 Y:-30 Z:10
  AttackContactPoint	= X:0 Y:50  Z:10
  
  Geometry = BOX
  GeometryMajorRadius = 25.0
  GeometryMinorRadius = 125.0
  GeometryHeight = 150.0
  GeometryIsSmall = No
  Shadow                = SHADOW_VOLUME
End

;------------------------------------------------------------------------------

;Harad Building Foundation -- the area where faction Mordor buildings can be built on
Object HaradBuildingFoundation
 
	SelectPortrait = BPMCamp_Plot
 
  ; *** ART Parameters ***

  
	Draw = W3DScriptedModelDraw ModuleTag_Draw2
	    DefaultModelConditionState
			Model = OBBFoundationX
		End
		ModelConditionState = WORLD_BUILDER
  			Model = MBSizeTemplate
  		End
		
	End
	
    Draw = W3DFloorDraw ModuleTag_Draw
		ModelName = HBFoundationX
  End

  ;PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HaradBuildingFoundation
  Side                = Mordor
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 161

  CommandSet = MordorFoundationCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = Gui_PlotSelect

  ; *** ENGINEERING Parameters ***
  RadarPriority       = STRUCTURE
  KindOf              = STRUCTURE SELECTABLE IMMOBILE BASE_FOUNDATION UNATTACKABLE MP_COUNT_FOR_VICTORY NO_COLLIDE DO_NOT_CLASSIFY
  Behavior            = FoundationAIUpdate ModuleTag_foundationAI
  End

  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  Body                = ImmortalBody ModuleTag_05
    MaxHealth         = 15000.0
  End
 
  Geometry              = BOX
  GeometryMajorRadius   = 24.0
  GeometryMinorRadius   = 24.0
  GeometryHeight        = 0.8
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  BuildCompletion		= PLACED_BY_PLAYER
End

;------------------------------------------------------------------------------------------
Object HaradCampKeep

	SelectPortrait = BP_HarodKeep

  ; *** ART Parameters ***

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes

    DefaultModelConditionState  
      Model = HBCCenter
    End

	ModelConditionState = WORLD_BUILDER
		Model = HBCCenter
	End
    
	IdleAnimationState
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "BeingConstructed" then 
			    ; Don't play completed sound when canceling build-in-progress or when
			    ; destroyed halfway
			    if not CurDrawableModelcondition( "DYING" ) then 
					CurDrawablePlaySound("CampOrcCompleteKeep")
				end
			end
		EndScript
	End

;------------Build Up States
    ModelConditionState   = ACTIVELY_BEING_CONSTRUCTED
      Model               = HBCCenter_A
;      ParticleSysBone	  = NONE BuildingDoughnutCloud
      ParticleSysBone     = NONE BuildingContructDust
    End  

	AnimationState          = ACTIVELY_BEING_CONSTRUCTED
		Animation
			AnimationName	= HBCCenter_A.HBCCenter_A
			AnimationMode   = MANUAL
		End
		StateName		= BeingConstructed
		BeginScript
			;CurDrawableHideSubObject("FIRE02")
			CurDrawablePlaySound("GondorBarracksBeginConstruction")
			CurDrawablePlaySound("BuildingTopple")
		EndScript
	End

;------------Build Up States
    ModelConditionState   = BASE_BUILD
      Model               = HBCCenter_A
;      ParticleSysBone	  = NONE BuildingDoughnutCloud
      ParticleSysBone     = NONE BuildingContructDust
    End  

	AnimationState		  = BASE_BUILD
		Animation
			AnimationName = HBCCenter_A.HBCCenter_A
			AnimationMode = ONCE
			AnimationBlendTime = 0			
			AnimationSpeedFactorRange = 2.0 2.0 ; 300 frame anim, but need to shrink down to 5 seconds
		End		
		BeginScript
			CurDrawablePlaySound("DebrisDust")
			CurDrawablePlaySound("GondorBarracksBeginConstruction")
			CurDrawablePlaySound("BuildingTopple")
		EndScript
	End

    ModelConditionState   = JUST_BUILT
      Model               = HBCCenter_A
;      ParticleSysBone	  = NONE BuildingDoughnutCloud
      ParticleSysBone     = NONE BuildingContructDust
    End  

	AnimationState		  = JUST_BUILT
		Animation
			AnimationName = HBCCenter_A.HBCCenter_A
			AnimationMode = MANUAL			
			AnimationBlendTime = 0
		End
        Flags = START_FRAME_FIRST
		;BeginScript
		;	CurDrawablePlaySound("DebrisDust")
		;	CurDrawableHideSubObject("FIRE02")
		;EndScript
	End

    ModelConditionState  = DAMAGED
      Model         = HBCCenter_D1 
      ParticleSysBone Smokebone01 TrebuchetImpactSplinters
;      ParticleSysBone Smokebone02 furnaceSmoke
	

    End
    AnimationState = DAMAGED
     EnteringStateFX	= FX_BuildingDamaged
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = HBCCenter_D2 
      ParticleSysBone Smokebone01 TrebuchetImpactSplinters
;      ParticleSysBone Smokebone02 furnaceSmoke
    End
    AnimationState = REALLYDAMAGED
     	EnteringStateFX	= FX_BuildingReallyDamaged
    End
    
    ModelConditionState  = RUBBLE
      Model         = HBCCenter_D2  
      ParticleSysBone Smokebone01 Explosion3
      ParticleSysBone Smokebone02 Explosion5
    End

    AnimationState = RUBBLE
	;EnteringStateFX	= FX_IsengardCitadelDie		;added to trigger BuildingSink audio but already being triggered in StructureCollapseUpdate module
    End

  	ModelConditionState  = POST_RUBBLE
		Model         = GBGenRubble
		ParticleSysBone NONE SmokeBuildingMediumRubble
	End
    AnimationState = POST_RUBBLE
    End
	
	ModelConditionState  = POST_COLLAPSE
		Model         = GBGenRubble
		ParticleSysBone NONE SmokeBuildingMediumRubble
	End
    AnimationState = POST_COLLAPSE
    End

  End


     ; *** AUDIO Parameters ***

	SoundOnDamaged		= BuildingLightDamageStone
	SoundOnReallyDamaged	= BuildingHeavyDamageStone

	VoiceSelectUnderConstruction	= BuildingEvilVoiceSelectUnderConstruction

	UnitSpecificSounds
		UnderConstruction		= BuildingConstructionLoop  ; Built first time
		; UnderRepairFromDamage	= NoSound					; Repaired No animation on the building, so don't bother playing sound
		UnderRepairFromRubble	= BuildingConstructionLoop	; Repaired from completely destroyed (not used???)
	End


	; ***DESIGN parameters ***

	DisplayName      = OBJECT:HaradCampKeep
	Side = Mordor
	EditorSorting   = STRUCTURE
	ThreatLevel = 1.0
	BuildCost           = 500
	BuildTime           = 30.0           ; in seconds
	CommandSet			= MordorCampKeepCommandSet
	
	ArmorSet
		Conditions        = None
		Armor             = StructureArmor
		DamageFX          = None
	End

  ; *** ENGINEERING Parameters ***  
	KindOf					= VITAL_FOR_BASE_SURVIVAL STRUCTURE SELECTABLE IMMOBILE CASTLE_KEEP MP_COUNT_FOR_VICTORY FS_FACTORY AUTO_RALLYPOINT MADE_OF_WOOD SCORE
	RadarPriority			= STRUCTURE
	KeepSelectableWhenDead	= Yes
 
  
	Body              = ActiveBody ModuleTag_02
		MaxHealth       = MORDOR_CENTRAL_CAMP_KEEP_HEALTH
	End

	Behavior = GettingBuiltBehavior ModuleTag_04
		SelfBuildingLoop = BuildingBigConstructionLoop			; Only played if we DON'T spawn a worker
		SelfRepairFromDamageLoop  = NoSound         			; This doesn't cause an animation, so don't bother playing a sound
		SelfRepairFromRubbleLoop  = BuildingBigConstructionLoop
	End

  Behavior = CastleMemberBehavior ModuleTag_CMB
	BeingBuiltSound = BuildingBigConstructionLoop
  End 



  	;-----------------------------------------------
	;Used for hero revival and initial construction     
	Behavior = ProductionUpdate ProductionUpdateModuleTag
		; nothing, but is required if we have any Object-level Upgrades!
	End
	Behavior = QueueProductionExitUpdate ModuleTag_QueuePEU
		UnitCreatePoint   = X:0.0 Y:-20.0 Z:0.0
		NaturalRallyPoint = X:28.8 Y:-80.0 Z:0.0;NaturalRallyPointX must always match GeometryMajorRadius! 
		ExitDelay = 300 ;Handles delays between units if multiple produced at a time. (like Generals Redguard coming out 2 at a time)
	End  
	;-----------------------------------------------

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
  Behavior = KeepObjectDie ModuleTag_IWantRubble
  End
  
     Behavior                  = StructureCollapseUpdate ModuleTag_06
       MinCollapseDelay        = 000
       MaxCollapseDelay        = 000
       CollapseDamping         = .5
       MaxShudder              = 0.6
       MinBurstDelay           = 250
       MaxBurstDelay           = 800
       BigBurstFrequency       = 4
       FXList                  = INITIAL FX_StructureMediumCollapse
     End

	Behavior                  = RubbleRiseUpdate ModuleTag_07
		MinRubbleRiseDelay      = 000
		MaxRubbleRiseDelay      = 000
		;RubbleRiseDamping       = .5
		RubbleHeight            = 4.0
		MaxShudder              = 0.6
		MinBurstDelay           = 250
		MaxBurstDelay           = 800
		BigBurstFrequency       = 4
		FXList                  = INITIAL FX_StructureMediumPostCollapse	;FX_StructureMediumCollapse
	End  
  
  Geometry              = CYLINDER
  GeometryMajorRadius   = 16.0
  GeometryMinorRadius   = 16.0
  GeometryHeight        = 88.0
  
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME;_NON_SELF_1 ; no non-self's for structures
  
  GeometryContactPoint	= X:0	Y:0		Z:88		Swoop
  GeometryContactPoint	= X:0		Y:0		Z:0
End

;------------------------------------------------------------------------------

Object MordorHaradTent1
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw                = W3DScriptedModelDraw ModuleTag_01
    OkToChangeModelColor = Yes

    DefaultModelConditionState
      Model           = MuGenHarTnt
    End
    
	ModelConditionState  = DAMAGED
		Model         = MuGenHarTnt_D
	End
	AnimationState = DAMAGED
		EnteringStateFX	= FX_BuildingDamaged
    End    
    
	ModelConditionState  = REALLYDAMAGED
		Model         = MuGenHarTnt_D
	End
	AnimationState = REALLYDAMAGED
		EnteringStateFX	= FX_BuildingReallyDamaged
    End    

	ModelConditionState  = RUBBLE
		Model         = MuGenHarTnt_D
	End
        
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HaradrimTent
  Side                = Mordor
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 0
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 161

;  ArmorSet
;    Conditions        = None
;    Armor             = StructureArmor
;    DamageFX          = StructureDamageFXNoShake
;  End
;  CommandSet          = MordorTentCommandSet

 
  ; *** AUDIO Parameters ***
;  VoiceSelect         = NuclearReactorSelect
;  SoundOnDamaged        = BuildingDamagedStateLight
;  SoundOnReallyDamaged  = BuildingDestroy
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 
  ; *** ENGINEERING Parameters ***
  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE MADE_OF_WOOD
 
; Behavior            = GettingBuiltBehavior ModuleTag_04
;   SelfBuildingLoop = BuildingConstructionLoop ; Only played if we DON'T spawn a worker
;	SelfRepairFromDamageLoop  = NoSound         ; This doesn't cause an animation, so don't bother playing a sound
;	SelfRepairFromRubbleLoop  = BuildingConstructionLoop
;  End

  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  Body                = StructureBody ModuleTag_05
    MaxHealth         = 1500.0
  End
 
 ; Behavior            = DestroyDie ModuleTag_07
 ;   ;nothing
;  End

  Behavior = UpgradeDie  UpgradeDieModuleTag
    ;This frees the object based upgrade for the producer object.
    DeathTypes = ALL
    UpgradeToRemove     = Upgrade_TestBuilding_2 BaseUpgradeTag_02
  End

;  Behavior           = CreateObjectDie ModuleTag_08
;    CreationList     = OCL_SmallStructureDebris
;  End
 
;  Behavior = ProductionUpdate ModuleTag_10
;    ; nothing, but is required if we have any Object-level Upgrades!
;  End
 
;  Behavior = FlammableUpdate ModuleTag_14
;    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
;    AflameDamageAmount = 5       ; taking this much damage...
;    AflameDamageDelay = 500       ; this often.
;  End
 
;  Behavior = TransitionDamageFX ModuleTag_15
;    ;-------------DESIGNED FOR SMALL SIZED FACTION BUILDING TRANSITIONS-------------------
;    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
;    ;---------------------------------------------------------------------------------------
;    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
;    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
;    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
;  End
 
;  Behavior             = FXListDie ModuleTag_16
;    DeathFX       = FX_BuildingDie
;  End
 
	Behavior                  = StructureCollapseUpdate ModuleTag_06
		MinCollapseDelay        = 000
		MaxCollapseDelay        = 000
		CollapseDamping         = .5
		MaxShudder              = 0.6
		MinBurstDelay           = 250
		MaxBurstDelay           = 800
		BigBurstFrequency       = 4
		FXList                  = INITIAL   FX_StructureMediumCollapse
	End

  Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 3000
  End
  
  Geometry              = CYLINDER
  GeometryMajorRadius   = 45.6
  GeometryMinorRadius   = 28.0
  GeometryHeight        = 36.0 ;40.8
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER
End

;------------------------------------------------------------------------------
Object BaradDur1

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_Draw
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = MBBarDur1_D3
      ParticleSysBone   = FXbone01 EyeExplode
      ParticleSysBone   = FXbone02 BuildingChunkBitsTrail02
    End
		IdleAnimationState
		StateName					=   STATE_Idle
			Animation = IdleA
				AnimationName		=	MBBarDur1_D3.MBBarDur1_D3
				AnimationMode		=	LOOP 
			End
			Flags					= RESTART_ANIM_WHEN_COMPLETE 
		End
    End  

	;--------------------- AUDIO -------------------

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone


  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:BaradDur
  Side = Mordor
  EditorSorting   = STRUCTURE

  ; *** ENGINEERING Parameters ***  
  KindOf          = SELECTABLE IMMOBILE
;  Shadow          = SHADOW_VOLUME
  Body            = ActiveBody ModuleTag_03
    MaxHealth       = 3000.0
  End

  Geometry = CYLINDER
  GeometryMajorRadius = 2.4
  GeometryMinorRadius = 2.4
  GeometryHeight = 4.8
  GeometryIsSmall = Yes
End

;------------------------------------------------------------------------------
Object BaradDur2

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_Draw
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = MBBarDur2_D3
    End
		IdleAnimationState
		StateName					=   STATE_Idle
			Animation = IdleA
				AnimationName		=	MBBarDur2_D3.MBBarDur2_D3
				AnimationMode		=	LOOP 
			End
			Flags					= RESTART_ANIM_WHEN_COMPLETE 
		End
    End  

	;--------------------- AUDIO -------------------

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone


  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:BaradDur
  Side = Mordor
  EditorSorting   = STRUCTURE

  ; *** ENGINEERING Parameters ***  
  KindOf          = SELECTABLE IMMOBILE
;  Shadow          = SHADOW_VOLUME
  Body            = ActiveBody ModuleTag_03
    MaxHealth       = 3000.0
  End

  Geometry = CYLINDER
  GeometryMajorRadius = 2.4
  GeometryMinorRadius = 2.4
  GeometryHeight = 4.8
  GeometryIsSmall = Yes
End

;------------------------------------------------------------------------------
Object BaradDur3

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_Draw
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = MBBarDur3_D3
    End
		IdleAnimationState
		StateName					=   STATE_Idle
			Animation = IdleA
				AnimationName		=	MBBarDur3_D3.MBBarDur3_D3
				AnimationMode		=	LOOP 
			End
			Flags					= RESTART_ANIM_WHEN_COMPLETE 
		End
    End  

	;--------------------- AUDIO -------------------

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone


  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:BaradDur
  Side = Mordor
  EditorSorting   = STRUCTURE

  ; *** ENGINEERING Parameters ***  
  KindOf          = SELECTABLE IMMOBILE
;  Shadow          = SHADOW_VOLUME
  Body            = ActiveBody ModuleTag_03
    MaxHealth       = 3000.0
  End

  Geometry = CYLINDER
  GeometryMajorRadius = 2.4
  GeometryMinorRadius = 2.4
  GeometryHeight = 4.8
  GeometryIsSmall = Yes
End

;------------------------------------------------------------------------------
Object BaradDur4

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_Draw
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = MBBarDur4_D3
    End
		IdleAnimationState
		StateName					=   STATE_Idle
			Animation = IdleA
				AnimationName		=	MBBarDur4_D3.MBBarDur4_D3
				AnimationMode		=	LOOP 
			End
			Flags					= RESTART_ANIM_WHEN_COMPLETE 
		End
    End  

	;--------------------- AUDIO -------------------

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone


  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:BaradDur
  Side = Mordor
  EditorSorting   = STRUCTURE

  ; *** ENGINEERING Parameters ***  
  KindOf          = SELECTABLE IMMOBILE
;  Shadow          = SHADOW_VOLUME
  Body            = ActiveBody ModuleTag_03
    MaxHealth       = 3000.0
  End

  Geometry = CYLINDER
  GeometryMajorRadius = 2.4
  GeometryMinorRadius = 2.4
  GeometryHeight = 4.8
  GeometryIsSmall = Yes
End

;------------------------------------------------------------------------------
Object BaradDur5

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_Draw
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = MBBarDur5_D3
    End
		IdleAnimationState
		StateName					=   STATE_Idle
			Animation = IdleA
				AnimationName		=	MBBarDur5_D3.MBBarDur5_D3
				AnimationMode		=	LOOP 
			End
			Flags					= RESTART_ANIM_WHEN_COMPLETE 
		End
    End  

	;--------------------- AUDIO -------------------

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone


  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:BaradDur
  Side = Mordor
  EditorSorting   = STRUCTURE

  ; *** ENGINEERING Parameters ***  
  KindOf          = SELECTABLE IMMOBILE
;  Shadow          = SHADOW_VOLUME
  Body            = ActiveBody ModuleTag_03
    MaxHealth       = 3000.0
  End

  Geometry = CYLINDER
  GeometryMajorRadius = 2.4
  GeometryMinorRadius = 2.4
  GeometryHeight = 4.8
  GeometryIsSmall = Yes
End

;------------------------------------------------------------------------------
Object BaradDur6

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_Draw
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = MBBarDur6_D3
    End
		IdleAnimationState
		StateName					=   STATE_Idle
			Animation = IdleA
				AnimationName		=	MBBarDur6_D3.MBBarDur6_D3
				AnimationMode		=	LOOP 
			End
			Flags					= RESTART_ANIM_WHEN_COMPLETE 
		End
    End  

	;--------------------- AUDIO -------------------

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone


  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:BaradDur
  Side = Mordor
  EditorSorting   = STRUCTURE

  ; *** ENGINEERING Parameters ***  
  KindOf          = SELECTABLE IMMOBILE
;  Shadow          = SHADOW_VOLUME
  Body            = ActiveBody ModuleTag_03
    MaxHealth       = 3000.0
  End

  Geometry = CYLINDER
  GeometryMajorRadius = 2.4
  GeometryMinorRadius = 2.4
  GeometryHeight = 4.8
  GeometryIsSmall = Yes
End

;------------------------------------------------------------------------------
Object BaradDur7

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_Draw
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = MBBarDur7_D3
    End
		IdleAnimationState
		StateName					=   STATE_Idle
			Animation = IdleA
				AnimationName		=	MBBarDur7_D3.MBBarDur7_D3
				AnimationMode		=	LOOP 
			End
			Flags					= RESTART_ANIM_WHEN_COMPLETE 
		End
    End  

	;--------------------- AUDIO -------------------

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone


  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:BaradDur
  Side = Mordor
  EditorSorting   = STRUCTURE

  ; *** ENGINEERING Parameters ***  
  KindOf          = SELECTABLE IMMOBILE
;  Shadow          = SHADOW_VOLUME
  Body            = ActiveBody ModuleTag_03
    MaxHealth       = 3000.0
  End

  Geometry = CYLINDER
  GeometryMajorRadius = 2.4
  GeometryMinorRadius = 2.4
  GeometryHeight = 4.8
  GeometryIsSmall = Yes
End

;------------------------------------------------------------------------------
Object BaradDur8

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_Draw
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = MBBarDur8_D3
    End
		IdleAnimationState
		StateName					=   STATE_Idle
			Animation = IdleA
				AnimationName		=	MBBarDur8_D3.MBBarDur8_D3
				AnimationMode		=	LOOP 
			End
			Flags					= RESTART_ANIM_WHEN_COMPLETE 
		End
    End  

	;--------------------- AUDIO -------------------

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone


  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:BaradDur
  Side = Mordor
  EditorSorting   = STRUCTURE

  ; *** ENGINEERING Parameters ***  
  KindOf          = SELECTABLE IMMOBILE
;  Shadow          = SHADOW_VOLUME
  Body            = ActiveBody ModuleTag_03
    MaxHealth       = 3000.0
  End

  Geometry = CYLINDER
  GeometryMajorRadius = 2.4
  GeometryMinorRadius = 2.4
  GeometryHeight = 4.8
  GeometryIsSmall = Yes
End

;------------------------------------------------------------------------------
Object BaradDur9

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_Draw
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = MBBarDur9_D3
    End
		IdleAnimationState
		StateName					=   STATE_Idle
			Animation = IdleA
				AnimationName		=	MBBarDur9_D3.MBBarDur9_D3
				AnimationMode		=	LOOP 
			End
			Flags					= RESTART_ANIM_WHEN_COMPLETE 
		End
    End  

	;--------------------- AUDIO -------------------

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone


  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:BaradDur
  Side = Mordor
  EditorSorting   = STRUCTURE

  ; *** ENGINEERING Parameters ***  
  KindOf          = SELECTABLE IMMOBILE
;  Shadow          = SHADOW_VOLUME
  Body            = ActiveBody ModuleTag_03
    MaxHealth       = 3000.0
  End

  Geometry = CYLINDER
  GeometryMajorRadius = 2.4
  GeometryMinorRadius = 2.4
  GeometryHeight = 4.8
  GeometryIsSmall = Yes
End

;------------------------------------------------------------------------------
Object BaradDur

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_Draw
    UseStandardModelNames = Yes
    DefaultModelConditionState  
      Model = MBBarDur1_D3
		End
		ModelConditionState = WORLD_BUILDER
  			Model = MBBarDur7_D3
  			
	End

    ModelConditionState  = REALLYDAMAGED
      Model         = MBBarDur1_D3
      ParticleSysBone FXbone01 EyeExplode FollowBone:yes
      ParticleSysBone FXbone02 BaradDurDust01 FollowBone:yes
    End
	AnimationState = REALLYDAMAGED
       	Animation				=	REALLYDAMAGEDanimation
			AnimationName		=	 MBBarDur1_D3.MBBarDur1_D3
			AnimationMode		=	ONCE
   		End
   	End
  End

	;----------------------------------------------------------------------------------------------
	Draw = W3DScriptedModelDraw Draw_Wall2

    DefaultModelConditionState  
      Model = MBBarDur2_D3
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = MBBarDur2_D3
      ParticleSysBone FXbone01 BaradDurDust01 FollowBone:yes
      ParticleSysBone FXbone03 SmokeBuildingLarge FollowBone:yes
    End
	AnimationState = REALLYDAMAGED
       	Animation				=	REALLYDAMAGEDanimation
			AnimationName		=	 MBBarDur2_D3.MBBarDur2_D3
			AnimationMode		=	ONCE
   		End
   		End
  End

	;----------------------------------------------------------------------------------------------
	Draw = W3DScriptedModelDraw Draw_Wall3

    DefaultModelConditionState  
      Model = MBBarDur3_D3
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = MBBarDur3_D3
      ParticleSysBone FXbone01 BaradDurDust01 FollowBone:yes
      ParticleSysBone FXbone03 SmokeBuildingLarge FollowBone:yes
    End
	AnimationState = REALLYDAMAGED
       	Animation				=	REALLYDAMAGEDanimation
			AnimationName		=	 MBBarDur3_D3.MBBarDur3_D3
			AnimationMode		=	ONCE
   		End
   		End
  End

	;----------------------------------------------------------------------------------------------
	Draw = W3DScriptedModelDraw Draw_Wall4

    DefaultModelConditionState  
      Model = MBBarDur4_D3
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = MBBarDur4_D3
      ParticleSysBone FXbone01 BaradDurDust01 FollowBone:yes
      ParticleSysBone FXbone03 SmokeBuildingLarge FollowBone:yes
    End
	AnimationState = REALLYDAMAGED
       	Animation				=	REALLYDAMAGEDanimation
			AnimationName		=	 MBBarDur4_D3.MBBarDur4_D3
			AnimationMode		=	ONCE
   		End
   		End
  End

	;----------------------------------------------------------------------------------------------
	Draw = W3DScriptedModelDraw Draw_Wall5

    DefaultModelConditionState  
      Model = MBBarDur5_D3
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = MBBarDur5_D3
      ParticleSysBone FXbone01 BaradDurDust01 FollowBone:yes
      ParticleSysBone FXbone03 SmokeBuildingLarge FollowBone:yes
    End
	AnimationState = REALLYDAMAGED
       	Animation				=	REALLYDAMAGEDanimation
			AnimationName		=	 MBBarDur5_D3.MBBarDur5_D3
			AnimationMode		=	ONCE
   		End
   		End
  End

	;----------------------------------------------------------------------------------------------
	Draw = W3DScriptedModelDraw Draw_Wall6

    DefaultModelConditionState  
      Model = MBBarDur6_D3
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = MBBarDur6_D3
      ParticleSysBone FXbone01 BaradDurDust01 FollowBone:yes
      ParticleSysBone FXbone03 SmokeBuildingLarge FollowBone:yes
    End
	AnimationState = REALLYDAMAGED
       	Animation				=	REALLYDAMAGEDanimation
			AnimationName		=	 MBBarDur6_D3.MBBarDur6_D3
			AnimationMode		=	ONCE
   		End
   		End
  End

	;----------------------------------------------------------------------------------------------
	Draw = W3DScriptedModelDraw Draw_Wall7

    DefaultModelConditionState  
      Model = MBBarDur7_D3
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = MBBarDur7_D3
      FXEvent = Frame: 300 Name: FX_BaradDurWaveDust
    End
	AnimationState = REALLYDAMAGED
       	Animation				=	REALLYDAMAGEDanimation
			AnimationName		=	 MBBarDur7_D3.MBBarDur7_D3
			AnimationMode		=	ONCE
   		End
   		End
  End

	;--------------------- AUDIO -------------------

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone


  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:BaradDur
  Side = Mordor
  EditorSorting   = STRUCTURE

  ; *** ENGINEERING Parameters ***  
  KindOf          = SELECTABLE IMMOBILE
;  Shadow          = SHADOW_VOLUME
  Body            = ActiveBody ModuleTag_03
    MaxHealth       = 1000.0
  End

  Geometry = CYLINDER
  GeometryMajorRadius = 300
  GeometryMinorRadius = 300
  GeometryHeight = 300
  GeometryIsSmall = No
End

;------------------------------------------------------------------------------
Object BaradDurCINE

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_Draw
    UseStandardModelNames = Yes
    DefaultModelConditionState  
      Model = MBBarDur1_DE
		End
		ModelConditionState = WORLD_BUILDER
  			Model = MBBarDur7_D3
  			
	End

    ModelConditionState  = REALLYDAMAGED
      Model         = MBBarDur1_DE
    End
	AnimationState = REALLYDAMAGED
       	Animation				=	REALLYDAMAGEDanimation
			AnimationName		=	 MBBarDur1_DE.MBBarDur1_DE
			AnimationMode		=	ONCE
   		End
   		End
  End

	;----------------------------------------------------------------------------------------------
	Draw = W3DScriptedModelDraw Draw_Wall2

    DefaultModelConditionState  
      Model = MBBarDur2_DE
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = MBBarDur2_DE
    End
	AnimationState = REALLYDAMAGED
       	Animation				=	REALLYDAMAGEDanimation
			AnimationName		=	 MBBarDur2_DE.MBBarDur2_DE
			AnimationMode		=	ONCE
   		End
   		End
  End

	;----------------------------------------------------------------------------------------------
	Draw = W3DScriptedModelDraw Draw_Wall3

    DefaultModelConditionState  
      Model = MBBarDur3_D3
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = MBBarDur3_D3
    End
	AnimationState = REALLYDAMAGED
       	Animation				=	REALLYDAMAGEDanimation
			AnimationName		=	 MBBarDur3_D3.MBBarDur3_D3
			AnimationMode		=	ONCE
   		End
   		End
  End

	;----------------------------------------------------------------------------------------------
	Draw = W3DScriptedModelDraw Draw_Wall4

    DefaultModelConditionState  
      Model = MBBarDur4_D3
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = MBBarDur4_D3
    End
	AnimationState = REALLYDAMAGED
       	Animation				=	REALLYDAMAGEDanimation
			AnimationName		=	 MBBarDur4_D3.MBBarDur4_D3
			AnimationMode		=	ONCE
   		End
   		End
  End

	;----------------------------------------------------------------------------------------------
	Draw = W3DScriptedModelDraw Draw_Wall5

    DefaultModelConditionState  
      Model = MBBarDur5_D3
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = MBBarDur5_D3
    End
	AnimationState = REALLYDAMAGED
       	Animation				=	REALLYDAMAGEDanimation
			AnimationName		=	 MBBarDur5_D3.MBBarDur5_D3
			AnimationMode		=	ONCE
   		End
   		End
  End

	;----------------------------------------------------------------------------------------------
	Draw = W3DScriptedModelDraw Draw_Wall6

    DefaultModelConditionState  
      Model = MBBarDur6_D3
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = MBBarDur6_D3
    End
	AnimationState = REALLYDAMAGED
       	Animation				=	REALLYDAMAGEDanimation
			AnimationName		=	 MBBarDur6_D3.MBBarDur6_D3
			AnimationMode		=	ONCE
   		End
   		End
  End

	;----------------------------------------------------------------------------------------------
	Draw = W3DScriptedModelDraw Draw_Wall7

    DefaultModelConditionState  
      Model = MBBarDur7_D3
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = MBBarDur7_D3
    End
	AnimationState = REALLYDAMAGED
       	Animation				=	REALLYDAMAGEDanimation
			AnimationName		=	 MBBarDur7_D3.MBBarDur7_D3
			AnimationMode		=	ONCE
   		End
   		End
  End

	;--------------------- AUDIO -------------------

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone


  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:BaradDur
  Side = Mordor
  EditorSorting   = STRUCTURE

  ; *** ENGINEERING Parameters ***  
  KindOf          = SELECTABLE IMMOBILE
;  Shadow          = SHADOW_VOLUME
  Body            = ActiveBody ModuleTag_03
    MaxHealth       = 1000.0
  End

  Geometry = CYLINDER
  GeometryMajorRadius = 300
  GeometryMinorRadius = 300
  GeometryHeight = 300
  GeometryIsSmall = No
End




;------------------------------------------------------------------------------------------
;Evil Sentry Tower
Object EvilSentryTower

SelectPortrait = BPISentryTwr

  	; *** ART Parameters ***
	ButtonImage = BISentryTwr
	  
	; *** ART Parameters ***
	Draw = W3DScriptedModelDraw ModuleTag_Draw
  
		ExtraPublicBone	= ARROWBONE01
		ExtraPublicBone	= ARROWBONE02
		ExtraPublicBone	= ARROWBONE03
		ExtraPublicBone	= ARROWBONE04
		ExtraPublicBone	= ARROWBONE05
		ExtraPublicBone	= ARROWBONE06
		ExtraPublicBone	= ARROWBONE07
		ExtraPublicBone	= ARROWBONE08
		ExtraPublicBone	= ARROWBONE09
		ExtraPublicBone	= ARROWBONE10
		ExtraPublicBone	= ARROWBONE11
		ExtraPublicBone	= ARROWBONE12

	  
		OkToChangeModelColor  = Yes
		UseStandardModelNames = Yes
		
		DefaultModelConditionState
			Model = IBBtlTwrM
			WeaponLaunchBone =   PRIMARY ARROWBONE
		End
    
     ;------------ build up states---------------
		ModelConditionState   = AWAITING_CONSTRUCTION 
		Model               = IBBtlTwrM_A
;			ParticleSysBone	  = NONE BuildingDoughnutCloud
		End;
		AnimationState        = AWAITING_CONSTRUCTION
		Animation           =  IBBtlTwrM_A
			AnimationName     =  IBBtlTwrM_A.IBBtlTwrM_A
			AnimationMode     = MANUAL
			AnimationBlendTime = 0
		End
		Flags				  = START_FRAME_FIRST
		End

		ModelConditionState   = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
		Model               = IBBtlTwrM_A
			ParticleSysBone   = CONSTDUSTBONE01 BuildingContructSmall FollowBone:Yes
		End;
	    
		AnimationState        = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
			Animation           = IBBtlTwrM_A
				AnimationName     = IBBtlTwrM_A.IBBtlTwrM_A
				AnimationMode     = MANUAL
				AnimationBlendTime = 0
			End
			Flags				  = START_FRAME_FIRST
			StateName			  = BeingConstructed
			BeginScript
				CurDrawablePlaySound("GondorBarracksBeginConstruction")
			EndScript
		End
    
       ;--damaged building

    
		ModelConditionState  = DAMAGED
		Model         =  IBBtlTwrM_D1  
			ParticleSysBone FireSmall01 FireBuildingSmall
			ParticleSysBone FireSmall02 FireBuildingSmall
			ParticleSysBone FireSmall03 FireBuildingSmall
			ParticleSysBone FireSmall04 FireBuildingSmall
			ParticleSysBone FireMedium01 FireBuildingMedium
			ParticleSysBone FireMedium02 FireBuildingMedium
			ParticleSysBone FireLarge01 FireBuildingLarge
			ParticleSysBone SmokeLarge01 SmokeBuildingLarge
		End
		AnimationState = DAMAGED
		End

		ModelConditionState  = REALLYDAMAGED
		Model         =  IBBtlTwrM_D2  
			ParticleSysBone FireSmall01 FireBuildingSmall
			ParticleSysBone FireSmall02 FireBuildingSmall
			ParticleSysBone FireSmall03 FireBuildingSmall
			ParticleSysBone FireSmall04 FireBuildingSmall
			ParticleSysBone FireMedium01 FireBuildingMedium
			ParticleSysBone FireMedium02 FireBuildingMedium
			ParticleSysBone FireLarge01 FireBuildingLarge
			ParticleSysBone SmokeLarge01 SmokeBuildingLarge
		End
		AnimationState = REALLYDAMAGED
		    	EnteringStateFX	= FX_BuildingReallyDamaged
		End

		ModelConditionState  = RUBBLE
			Model         =  IBBtlTwrM_D2 
			ParticleSysBone SmokeLarge01 SmokeBuildingLarge
		End
		AnimationState = RUBBLE
		End

		ModelConditionState  = POST_RUBBLE
			Model         = None
			ParticleSysBone NONE SmokeBuildingMediumRubble
		End

		ModelConditionState  = POST_COLLAPSE
			Model         = None
			ParticleSysBone NONE SmokeBuildingMediumRubble
		End
	  
	End
	 
	 
;	PlacementViewAngle  = 0
 
	; ***DESIGN parameters ***
	DisplayName         = OBJECT:EvilSentryTower
	Side                = Mordor
	EditorSorting       = STRUCTURE
	ThreatLevel 		= 11.0
	IsTrainable			= No
	 
	BuildCost           = SENTRY_TOWER_COST
	BuildTime           = SENTRY_TOWER_BUILDTIME	; in seconds
	VisionRange         = VISION_BASE_DEFENSE
	ShroudClearingRange = SHROUD_CLEAR_BASE_DEFENSE	

	ArmorSet
		Conditions        = None
		Armor             = StructureArmor
		;DamageFX          = StructureDamageFXNoShake
	End


	WeaponSet
		Weapon				= PRIMARY EvilStructureBow 
		AutoChooseSources	= PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End 


	; *** AUDIO Parameters ***

	VoiceSelect			= IsengardKeepSelect			;Gui_PlotSelect

	SoundOnDamaged		= BuildingLightDamageWood
	SoundOnReallyDamaged	= BuildingHeavyDamageWood

	VoiceSelectUnderConstruction	= BuildingEvilVoiceSelectUnderConstruction

	UnitSpecificSounds
		UnderConstruction		= BuildingConstructionLoop  ; Built first time
		; UnderRepairFromDamage	= NoSound					; Repaired No animation on the building, so don't bother playing sound
		UnderRepairFromRubble	= BuildingConstructionLoop	; Repaired from completely destroyed (not used???)
	End


	; *** ENGINEERING Parameters ***

	RadarPriority       = STRUCTURE
	KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE NEED_BASE_FOUNDATION CAN_ATTACK FS_BASE_DEFENSE MADE_OF_WOOD
	 
	Behavior            = GettingBuiltBehavior ModuleTag_04
		WorkerName		  = MordorWorkerNoSelect
	End

	CommandSet = SentryTowerCommandSet

	Body                      = StructureBody ModuleTag_05
		MaxHealth               = 1000.0
		MaxHealthDamaged        = 500.0
		MaxHealthReallyDamaged  = 250.0
	End

	Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
		DestructionDelay  = 5000
	End

	Behavior                  = StructureCollapseUpdate ModuleTag_StructureCollapseUpdate 
		MinCollapseDelay        = 000
		MaxCollapseDelay        = 000
		CollapseDamping         = .5
		MaxShudder              = 0.6
		MinBurstDelay           = 250
		MaxBurstDelay           = 800
		BigBurstFrequency       = 4
		FXList                  = INITIAL   FX_StructureMediumCollapse
		FXList                  = ALMOST_FINAL  FX_StructureAlmostCollapse
		DestroyObjectWhenDone	= Yes
		CollapseHeight			= 89
	End

	Behavior = AIUpdateInterface ModuleTag_SoWeCanUseWeapon
		AutoAcquireEnemiesWhenIdle	= Yes
		MoodAttackCheckRate			= 250
	End

    Behavior = CastleMemberBehavior ModuleTag_CMB
    End 

	GeometryContactPoint = X:23.624		Y:23.464	Z:0			Repair
	GeometryContactPoint = X:22.954		Y:-16.306	Z:0			Repair
	GeometryContactPoint = X:22.954		Y:15.951	Z:0
	GeometryContactPoint = X:5.435		Y:-23.279	Z:0
	GeometryContactPoint = X:-0.459		Y:-0.275	Z:116.828	Swoop


	Geometry              = BOX
	GeometryMajorRadius   = 11
	GeometryMinorRadius   = 11
	GeometryHeight        = 75
	GeometryIsSmall       = No
	Shadow                = SHADOW_VOLUME
	BuildCompletion     = PLACED_BY_PLAYER
End






; --------------------- BASE DEFENSE FOUNDATIONS ----------------------------------

;Mordor Base Defence Foundation -- the area where faction rohan buildings can be built on
Object MordorBaseDefenceFoundation
 
	SelectPortrait = BPMCamp_Plot
  ; *** ART Parameters ***

	Scale = 0.7
  
	Draw = W3DScriptedModelDraw ModuleTag_Draw2
	    DefaultModelConditionState
			Model = OBBFoundationX
		End
		ModelConditionState = WORLD_BUILDER
  			Model = IBBtlTwrM
  		End
		
	End
   Draw = W3DFloorDraw ModuleTag_Draw
      ModelName = MBFoundationM
  End
 
  ;PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:MordorBaseDefenseFoundation
  Side                = Mordor
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160

  CommandSet = MordorBaseDefenceFoundationCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = Gui_PlotSelect

  ; *** ENGINEERING Parameters ***
  RadarPriority       = STRUCTURE
  KindOf              = STRUCTURE SELECTABLE IMMOBILE BASE_FOUNDATION BASE_DEFENSE_FOUNDATION UNATTACKABLE MP_COUNT_FOR_VICTORY NO_COLLIDE DO_NOT_CLASSIFY
 
  Behavior            = FoundationAIUpdate ModuleTag_foundationAI
  End

  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  Body                = ImmortalBody ModuleTag_05
    MaxHealth         = 15000.0
  End
 
  Geometry              = BOX
  GeometryMajorRadius   = 24.0
  GeometryMinorRadius   = 24.0
  GeometryHeight        = 0.8
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  BuildCompletion		= PLACED_BY_PLAYER
End


;Isengard Base Defence Foundation -- the area where faction rohan buildings can be built on
Object IsengardBaseDefenceFoundation
 
	SelectPortrait = BPICamp_Plot
  ; *** ART Parameters ***

	Scale = 0.7
  
	Draw = W3DScriptedModelDraw ModuleTag_Draw2
	    DefaultModelConditionState
			Model = OBBFoundationX
		End
		ModelConditionState = WORLD_BUILDER
  			Model = IBBtlTwrM
  		End
		
	End
   Draw = W3DFloorDraw ModuleTag_Draw
      ModelName = IBFoundationM
  End
 
  ;PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:IsengardBaseDefenseFoundation
  Side                = Mordor
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160

  CommandSet = IsengardBaseDefenceFoundationCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = Gui_PlotSelect

  ; *** ENGINEERING Parameters ***
  RadarPriority       = STRUCTURE
  KindOf              = STRUCTURE SELECTABLE IMMOBILE BASE_FOUNDATION BASE_DEFENSE_FOUNDATION UNATTACKABLE MP_COUNT_FOR_VICTORY NO_COLLIDE DO_NOT_CLASSIFY
 
  Behavior            = FoundationAIUpdate ModuleTag_foundationAI
  End

  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  Body                = ImmortalBody ModuleTag_05
    MaxHealth         = 15000.0
  End
 
  Geometry              = BOX
  GeometryMajorRadius   = 24.0
  GeometryMinorRadius   = 24.0
  GeometryHeight        = 0.8
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  BuildCompletion		= PLACED_BY_PLAYER
End

;------------------------------------------------------------------------------------------
Object IsengardCastleBaseKeep

	SelectPortrait = BPIOrthancTower
        ButtonImage            = BIWatchTower
   ; *** ART Parameters ***

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes

    DefaultModelConditionState  
      Model = IB_Orthanc
    End


;------------Build Up States
    ModelConditionState   = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
      Model               = IB_Orthanc_A
;      ParticleSysBone	  = NONE BuildingDoughnutCloud
      ParticleSysBone     = NONE BuildingContructDust
    End  

	AnimationState          = ACTIVELY_BEING_CONSTRUCTED
		Animation
			AnimationName	= IB_Orthanc_A.IB_Orthanc_A
			AnimationMode   = MANUAL
		End
		BeginScript
;			CurDrawableHideSubObject("FIRE02")
		EndScript
	End

;------------Build Up States
    ModelConditionState   = BASE_BUILD
      Model               = IB_Orthanc_A
;      ParticleSysBone	  = NONE BuildingDoughnutCloud
      ParticleSysBone     = NONE BuildingContructDust
    End  

	AnimationState		  = BASE_BUILD
		Animation
			AnimationName = IB_Orthanc_A.IB_Orthanc_A
			AnimationMode = ONCE
			AnimationBlendTime = 0			
			AnimationSpeedFactorRange = 2.0 2.0 ; 300 frame anim, but need to shrink down to 5 seconds
		End
		BeginScript
;			CurDrawableHideSubObject("FIRE02")
		EndScript
	End

	AnimationState		  = JUST_BUILT
		Animation
			AnimationName = IB_Orthanc_A.IB_Orthanc_A
			AnimationMode = MANUAL			
			AnimationBlendTime = 0
		End
        Flags = START_FRAME_FIRST
		BeginScript
;			CurDrawableHideSubObject("FIRE02")
		EndScript
	End
	
    ModelConditionState  = DAMAGED
      Model         = IB_Orthanc_D1  
    End
    
    AnimationState = DAMAGED
     EnteringStateFX	= FX_BuildingDamaged
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = IB_Orthanc_D2
;      ParticleSysBone NONE furnaceSmoke
    End
	AnimationState = REALLYDAMAGED
       	Animation				=	ReallyDamagedanimation
			AnimationName		=	 IB_Orthanc_D2.IB_Orthanc_D2
			AnimationMode		=	ONCE
   		End
     	EnteringStateFX	= FX_BuildingReallyDamaged
    End

    ModelConditionState  = RUBBLE
      Model         = IB_Orthanc_D3
      ParticleSysBone FXbone01 BaradDurDust01 FollowBone:yes
      ParticleSysBone FXbone02 BaradDurDust01 FollowBone:yes
      ParticleSysBone NONE ExplosiveMineSmoke02
    End
    
    AnimationState = RUBBLE
		Animation				=	Death
			AnimationName		=	IB_Orthanc_D3.IB_Orthanc_D3
			AnimationMode		=	ONCE
		End
;        EnteringStateFX = FX_RohanWallRubble
    End      

    ModelConditionState  = POST_RUBBLE
		Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
    End
	

  End


	; *** AUDIO Parameters ***

	SoundOnDamaged		= BuildingLightDamageStone
	SoundOnReallyDamaged	= BuildingHeavyDamageStone

	VoiceSelectUnderConstruction	= BuildingEvilVoiceSelectUnderConstruction

	UnitSpecificSounds
		UnderConstruction		= BuildingConstructionLoop  ; Built first time
		; UnderRepairFromDamage	= NoSound					; Repaired No animation on the building, so don't bother playing sound
		UnderRepairFromRubble	= BuildingConstructionLoop	; Repaired from completely destroyed (not used???)
	End


	; ***DESIGN parameters ***

	DisplayName      = OBJECT:IsengardCastleBaseKeep
	Side = Isengard
	EditorSorting   = STRUCTURE
	ThreatLevel = 1.0
	;BuildCost           = 500
	;BuildTime           = 10.0           ; in seconds
	VisionRange         = 160.0          ; Shroud clearing distance
	ShroudClearingRange = 161
	CommandSet			= GenericKeepCommandSet

	ArmorSet
		Conditions        = None
		Armor             = StructureArmor
		DamageFX          = OrthancDamageFX
	End

  ; *** ENGINEERING Parameters ***  
  KindOf            = PRELOAD STRUCTURE IMMOBILE SCORE NEED_BASE_FOUNDATION CASTLE_KEEP NOT_AUTOACQUIRABLE FS_FACTORY AUTO_RALLYPOINT SELECTABLE MADE_OF_METAL
  RadarPriority		= STRUCTURE
  Body              = ActiveBody ModuleTag_02
    MaxHealth       = 4000.0
  End

  Behavior = GettingBuiltBehavior ModuleTag_04
    WorkerName	= MordorWorkerNoSelect
    SpawnTimer  = 120
    RebuildWhenDead = Yes
  End

  Behavior = CastleMemberBehavior ModuleTag_CMB
	BeingBuiltSound = BuildingConstructionLoop
  End 

  	;-----------------------------------------------
	;Used for hero revival and initial construction     
	Behavior = ProductionUpdate ProductionUpdateModuleTag
		; nothing, but is required if we have any Object-level Upgrades!
	End
	Behavior = QueueProductionExitUpdate ModuleTag_QueuePEU
		UnitCreatePoint   = X:0.0 Y:-20.0 Z:0.0
		NaturalRallyPoint = X:28.8 Y:-80.0 Z:0.0;NaturalRallyPointX must always match GeometryMajorRadius! 
		ExitDelay = 300 ;Handles delays between units if multiple produced at a time. (like Generals Redguard coming out 2 at a time)
	End  
	;-----------------------------------------------

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
  Behavior = KeepObjectDie ModuleTag_IWantRubble
  End
  
;  Behavior                  = StructureCollapseUpdate ModuleTag_06
;    MinCollapseDelay        = 000
;    MaxCollapseDelay        = 000
;    CollapseDamping         = .5
;    MaxShudder              = 0.6
;    MinBurstDelay           = 250
;    MaxBurstDelay           = 800
;    BigBurstFrequency       = 4
;    FXList                  = INITIAL   FX_StructureMediumCollapse
;  End

	Behavior                  = RubbleRiseUpdate ModuleTag_07
		MinRubbleRiseDelay      = 000
		MaxRubbleRiseDelay      = 000
		;RubbleRiseDamping       = .5
		RubbleHeight            = 4.0
		MaxShudder              = 0.6
		MinBurstDelay           = 250
		MaxBurstDelay           = 800
		BigBurstFrequency       = 4
		FXList                  = INITIAL FX_StructureMediumCollapse
	End    

  
  Geometry              = CYLINDER
  GeometryMajorRadius   = 42.6
  GeometryMinorRadius   = 0
  GeometryHeight        = 65.2
  
  AdditionalGeometry    = CYLINDER
  GeometryMajorRadius   = 22.6
  GeometryMinorRadius   = 0
  GeometryHeight        = 265.2
  
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  
  AttackContactPoint	= X:0 Y:0 Z:262
  AttackContactPoint	= X:0 Y:0 Z:0
End
