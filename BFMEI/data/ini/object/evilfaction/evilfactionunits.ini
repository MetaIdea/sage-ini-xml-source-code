; FILE: EvilFactionUnits.ini ///////////////////////////////////////////////////////
; This file contains only objects that are units tied to EVIL factions.
; You will find tanks, infantry, transports ... all our "units" here.  
;//////////////////////////////////////////////////////////////////////////////
;The new ThingClass names are:
;  "UNSPECIFIED",
; "HORDE_UNIT",
; "CHARACTER_UNIT",
; "CAVALRY_UNIT",
; "MEDIUM_MONSTER",
; "LARGE_MONSTER",
; "PROP",
; "CIV_BUILDING",
; "WALL_PIECE",
; "FACTION_BUILDING",
; "LANDMARK_BUILDING",
; "GROUND_COVER",
; "BUSH",
; "TREE",

; Objects will have the first word of their name be their Faction.  Rohan, Gondor,
; Isengard, and Mordor.  Please sort them in this file in that way as well.  The rest of their
; name will try to be generic since the detail can change, but the heroes can have
; their true name since they won't change.  Generic names are important because the 
; game name could change, and not everyone knows what a Rohirim is.  All four sides
; have a Worker, Fighter, Archer, and Cavalry.

; Please maintain the BALANCE keyword.  Put a ; BALANCE Name on the Object definition
; line to show what to search on, and then put ; BALANCE Name Keyword on every line
; that Design would be most likely to need to find quickly.  Suggestions include
; Health, Damage, Weapon, etc, but the most important part would be to get the Object
; definition line, because then they could search and find all weywords.



;------------------------------------------------------------------------------
;------------------------------------------------------------------------------
;------------------------------------------------------------------------------
;------------------------------------------------------------------------------
;
;  Isengard
;
;------------------------------------------------------------------------------
;------------------------------------------------------------------------------
;------------------------------------------------------------------------------

;------------------------------------------------------------------------------
; aka Uruk Hai, IsengardUrukHai, FighterIsengard, UrukWarrior, UrukFighter, UrukHaiWarrior, UrukHaiFighter, UrukSwordman
Object IsengardFighter
  ; *** ART Parameters ***

  ; This is required for garrisoned objects - please put in all objects.
  ButtonImage = BIUrukPit_Warriors
  SelectPortrait         = UPIsenguard_UrukHai
  
  Draw = W3DHordeModelDraw ModuleTag_01

	OkToChangeModelColor = Yes
	  
	StaticModelLODMode = Yes
	; specify options for static LODs
	LodOptions	= LOW
		AllowMultipleModels		=	ALLOW_MULTIPLE_MODELS_LOW
		MaxRandomTextures		=	MAX_RANDOM_TEXTURES_LOW
		MaxRandomAnimations		=	MAX_RANDOM_ANIMATIONS_LOW
		MaxAnimFrameDelta		=	MAX_ANIM_FRAME_DELTA_LOW
	End
	
	LodOptions	= MEDIUM
		AllowMultipleModels		=	ALLOW_MULTIPLE_MODELS_MED
		MaxRandomTextures		=	MAX_RANDOM_TEXTURES_MED
		MaxRandomAnimations		=	MAX_RANDOM_ANIMATIONS_MED
		MaxAnimFrameDelta		=	MAX_ANIM_FRAME_DELTA_MED
	End
	
	LodOptions	= HIGH
		AllowMultipleModels		=	ALLOW_MULTIPLE_MODELS_HIGH
		MaxRandomTextures		=	MAX_RANDOM_TEXTURES_HIGH
		MaxRandomAnimations		=	MAX_RANDOM_ANIMATIONS_HIGH
		MaxAnimFrameDelta		=	MAX_ANIM_FRAME_DELTA_HIGH
	End
	
    DefaultModelConditionState
		Model = IUUrukahi_SKN
		Skeleton = IUUrukahi_SKL
    End

    ModelConditionState WEAPONSET_PLAYER_UPGRADE
		Model = IUUrukahi_SKN
		Skeleton = IUUrukahi_SKL
    End

	IdleAnimationState
		Animation = IDLB
			AnimationName = IUUrukahi_IDLB
			AnimationMode = ONCE
			AnimationPriority = 20
		End
		Animation = IDLG
			AnimationName = IUUrukahi_IDLG
			AnimationMode = ONCE
			AnimationPriority = 1 ;2
		End
		Animation = IDLD
			AnimationName = IUUrukahi_IDLD
			AnimationMode = ONCE
			AnimationPriority = 2
		End	
		StateName = Idle
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "STATE_Selected" then CurDrawableSetTransitionAnimState("TRANS_SelectedToBoard") end
		EndScript
	End


	AnimationState						= PASSENGER
		Animation						= Falling
			AnimationName				= IUUrukahi_FLLA
			AnimationMode				= LOOP
		End
	End
	
	AnimationState						= FREEFALL
		Animation						= FLYA
			AnimationName				= IUUrukahi_FLYA
			AnimationMode				= LOOP
			AnimationSpeedFactorRange	= 0.5	0.5
			AnimationBlendTime			= 5
		End
	End
	
	AnimationState			= STUNNED_FLAILING
		Animation           = StunFlail
			AnimationName   = IUUrukahi_FLYA
			AnimationMode   = LOOP
		End
		Flags						= MAINTAIN_FRAME_ACROSS_STATES2
	End

	AnimationState			= DYING SPLATTED
		Animation			= Splat
			AnimationName	= IUUrukahi_LNDA
			AnimationMode	= ONCE
		End
	End

    AnimationState = DYING
		Animation = DIEA
			AnimationName = IUUrukahi_DIEA
		    AnimationMode = ONCE
			AnimationPriority = 1
			AnimationSpeedFactorRange	=	0.8 1.25
		End
		Animation = DIEB
			AnimationName = IUUrukahi_DIEB
		    AnimationMode = ONCE
			AnimationPriority = 3
			AnimationSpeedFactorRange	=	0.8 1.25
		End
		Animation = DIEC
			AnimationName = IUUrukahi_DIEC
		    AnimationMode = ONCE
			AnimationPriority = 2
			AnimationSpeedFactorRange	=	0.8 1.25
		End
		Animation = DIEG
			AnimationName = IUUrukahi_DIEG
		    AnimationMode = ONCE
			AnimationPriority = 10
			AnimationSpeedFactorRange	=	0.8 1.25
		End
    End    

	AnimationState        = STUNNED
		Animation           = LNDA
			AnimationName     = IUUrukahi_LNDA
			AnimationMode     = ONCE
		End
	End

	AnimationState        = STUNNED_STANDING_UP
		Animation           = GTPA
			AnimationName     = IUUrukahi_GTPA
			AnimationMode     = ONCE
			AnimationSpeedFactorRange = 1.5 1.5
		End
	End	
		
	AnimationState        = THROWN_PROJECTILE
		Animation           = FLYA
			AnimationName     = IUUrukahi_FLYA
			AnimationMode     = LOOP
		End
	End

	;----------------------------------------------------
	;Manning battering ram - Left and right handed attack
	;----------------------------------------------------
	AnimationState = FIRING_OR_PREATTACK_A PASSENGER PASSENGER_VARIATION_1 ; attacking with battering ram
		Animation = grasping_siege_lefthanded
			AnimationName =  IUUrukahi_BATB
			AnimationMode = ONCE
;			UseWeaponTiming = Yes
		End
	End
	
	AnimationState = FIRING_OR_PREATTACK_A PASSENGER PASSENGER_VARIATION_2 ; attacking with battering ram
		Animation = grasping_siege_righthanded
			AnimationName = IUUrukahi_BATA
			AnimationMode = ONCE
;			UseWeaponTiming = Yes
		End
	End

	AnimationState = FIRING_OR_PREATTACK_B PASSENGER PASSENGER_VARIATION_1 ; attacking with battering ram
		Animation = grasping_siege_lefthanded
			AnimationName =  IUUrukahi_BATB
			AnimationMode = ONCE
;			UseWeaponTiming = Yes
		End
	End
	AnimationState = FIRING_OR_PREATTACK_B PASSENGER PASSENGER_VARIATION_2 ; attacking with battering ram
		Animation = grasping_siege_righthanded
			AnimationName = IUUrukahi_BATA
			AnimationMode = ONCE
;			UseWeaponTiming = Yes
		End
	End

	AnimationState = FIRING_OR_PREATTACK_C PASSENGER PASSENGER_VARIATION_1 ; attacking with battering ram
		Animation = grasping_siege_lefthanded
			AnimationName =  IUUrukahi_BATB
			AnimationMode = ONCE
;			UseWeaponTiming = Yes
		End
	End
	AnimationState = FIRING_OR_PREATTACK_C PASSENGER PASSENGER_VARIATION_2 ; attacking with battering ram
		Animation = grasping_siege_righthanded
			AnimationName = IUUrukahi_BATA
			AnimationMode = ONCE
;			UseWeaponTiming = Yes
		End
	End

    AnimationState = MOVING FIRING_OR_PREATTACK_A
		Animation = TrotAndFire
			AnimationName = IUUrukahi_ATRA
		    AnimationMode = LOOP
		End
		Flags = RANDOMSTART
		;ParticleSysBone = None InfantryDustTrails
    End
    
	;----------------------------------------------------
	;Manning battering ram - Left and right movement
	;----------------------------------------------------
	AnimationState = MOVING BACKING_UP PASSENGER PASSENGER_VARIATION_1 ; running with battering ram
		Animation = moving_siege_lefthanded
			AnimationName =  IUUrukahi_BRNB
			AnimationMode = LOOP_BACKWARDS
		End
	End
	AnimationState = MOVING BACKING_UP PASSENGER PASSENGER_VARIATION_2 ; running with battering ram
		Animation = moving_siege_righthanded
			AnimationName = IUUrukahi_BRNA
			AnimationMode = LOOP_BACKWARDS
		End
	End

	AnimationState = MOVING TURN_LEFT PASSENGER PASSENGER_VARIATION_1 ; running with battering ram
		Animation = moving_siege_lefthanded
			AnimationName =  IUUrukahi_BRNB
			AnimationMode = LOOP_BACKWARDS
		End
	End
	AnimationState = MOVING TURN_LEFT PASSENGER PASSENGER_VARIATION_2 ; running with battering ram
		Animation = moving_siege_righthanded
			AnimationName = IUUrukahi_BRNA
			AnimationMode = LOOP
		End
	End

	AnimationState = MOVING TURN_RIGHT PASSENGER PASSENGER_VARIATION_1 ; running with battering ram
		Animation = moving_siege_lefthanded
			AnimationName =  IUUrukahi_BRNB
			AnimationMode = LOOP
		End
	End
	AnimationState = MOVING TURN_RIGHT PASSENGER PASSENGER_VARIATION_2 ; running with battering ram
		Animation = moving_siege_righthanded
			AnimationName = IUUrukahi_BRNA
			AnimationMode = LOOP_BACKWARDS
		End
	End

	AnimationState = MOVING PASSENGER PASSENGER_VARIATION_1 ; running with battering ram
		Animation = moving_siege_lefthanded
			AnimationName =  IUUrukahi_BRNB
			AnimationMode = LOOP
			AnimationSpeedFactorRange	=	0.7 0.7
		End
	End
	AnimationState = MOVING PASSENGER PASSENGER_VARIATION_2 ; running with battering ram
		Animation = moving_siege_righthanded
			AnimationName = IUUrukahi_BRNA
			AnimationMode = LOOP
			AnimationSpeedFactorRange	=	0.7 0.7
		End
	End
	
	; ladder climbing animations
	AnimationState = MOVING CLIMBING BACKING_UP
		Animation = Climbing_Down
			AnimationName = IUUrukahi_CLMA
			AnimationMode = LOOP_BACKWARDS
			AnimationSpeedFactorRange = 2.0 2.0
		End
    End

    AnimationState = MOVING CLIMBING
		Animation = Climbing_Up
			AnimationName = IUUrukahi_CLMA
			AnimationMode = LOOP
			AnimationSpeedFactorRange = 2.0 2.0
		End
    End

	AnimationState = MOVING EMOTION_TERROR
		Animation = TERRORIZED
			AnimationName = IUUrukahi_RUNC
			AnimationMode = LOOP
		End
		Flags = RANDOMSTART
		ParticleSysBone = None InfantryDustTrails
	End
     
    AnimationState = MOVING BACKING_UP
		Animation = BackingUp
			AnimationName = IUUrukahi_BAKA
			AnimationMode = LOOP
		End
		Flags = RANDOMSTART
	End

;    AnimationState = MOVING DAMAGED
;		Animation = Moving
;			AnimationName = IUUrukahi_WLK
;		    AnimationMode = LOOP
;		End
;		Flags = RANDOMSTART
;		ParticleSysBone = None InfantryDustTrails
;    End

    AnimationState = MOVING
		Animation = Moving
			AnimationName = IUUrukahi_RUNA
		    AnimationMode = LOOP
		End
		Flags = RANDOMSTART
		ParticleSysBone = None InfantryDustTrails
    End

		; --------- Click and Hit Reactions ------------
		AnimationState = HIT_REACTION HIT_LEVEL_1
			Animation = Hit_Level_1_a
				AnimationName = IUUrukahi_HITC
				AnimationMode = ONCE
			End
			Animation = Hit_Level_1_a
				AnimationName = IUUrukahi_HITE
				AnimationMode = ONCE
			End
		End
		
		AnimationState = HIT_REACTION HIT_LEVEL_2
			Animation = Hit_Level_1_a
				AnimationName = IUUrukahi_HITD
				AnimationMode = ONCE
			End
		End
		
    AnimationState = FIRING_OR_PREATTACK_A
		Animation = ATKA
			AnimationName = IUUrukahi_ATKA
			AnimationMode = ONCE
		End
		Animation = ATKC
			AnimationName = IUUrukahi_ATKC
			AnimationMode = ONCE
			AnimationSpeedFactorRange	=	0.7 0.7
		End
		Animation = ATKB
			AnimationName = IUUrukahi_ATKB
			AnimationMode = ONCE
		End
    End
    
    AnimationState = BETWEEN_FIRING_SHOTS_A
		Animation = Wait
			AnimationName = IUUrukahi_IDLA
			AnimationMode = ONCE
		End
	End

   
    AnimationState = WAR_CHANT
		Animation = Chant
			AnimationName = IUUrukahi_TNTA
			AnimationMode = LOOP
		End
	End
    
    AnimationState							= EMOTION_UNCONTROLLABLY_AFRAID
		Animation							= FERA
			AnimationName					= IUUrukahi_FERA
			AnimationMode					= LOOP
		End
		Flags = RANDOMSTART
    End

     AnimationState = ATTACKING
		Animation = IdleAllAttacksComeFrom
			AnimationName = IUUrukahi_IDLA
			AnimationMode = LOOP
		End
	End
    
   ;-emotions--
	; Should be before selected (if uncontrollable..)      
    AnimationState							= EMOTION_AFRAID
		Animation							= FERA
			AnimationName					= IUUrukahi_FERA
			AnimationMode					= LOOP
		End
		Flags = RANDOMSTART
    End

	AnimationState							= EMOTION_TAUNTING
		Animation							= TNTA
			AnimationName					= IUUrukahi_TNTA
			AnimationMode					= LOOP
			AnimationBlendTime				= 10
			AnimationSpeedFactorRange		= 0.8 1.2
		End
		Flags				= RESTART_ANIM_WHEN_COMPLETE
	End
	
	AnimationState							= EMOTION_POINTING
		Animation							= Pointing1
			AnimationName					= IUUrukahi_PNTA
			AnimationMode					= LOOP
		End
	End
	
	AnimationState							= EMOTION_CELEBRATING
		Animation							= CHRA
			AnimationName					= IUUrukahi_CHRA
			AnimationMode					= ONCE
			AnimationBlendTime				= 10
		End
		Animation							= CHRB
			AnimationName					= IUUrukahi_CHRB
			AnimationMode					= ONCE
			AnimationBlendTime				= 10
		End
		Animation							= TNTA
			AnimationName					= IUUrukahi_TNTA
			AnimationMode					= ONCE
			AnimationBlendTime				= 10
		End
		Flags				= RESTART_ANIM_WHEN_COMPLETE
	End
	
	AnimationState							= EMOTION_ALERT
		Animation							= ALERT
			AnimationName					= IUUrukahi_IDLA
			AnimationMode					= LOOP
		End
		Flags								= RESTART_ANIM_WHEN_COMPLETE RANDOMSTART
	End


	AnimationState        = SELECTED
		StateName           = STATE_Selected
		Animation           = ATNB
			AnimationName     = IUUrukahi_ATNB
			AnimationMode     = LOOP
		End
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_IdleToSelected") end
		EndScript
	End

	TransitionState       = TRANS_IdleToSelected
		Animation           = ATNA
			AnimationName     = IUUrukahi_ATNA
			AnimationMode     = ONCE
			AnimationSpeedFactorRange = 0.9 1.0
		End
	End

	TransitionState       = TRANS_SelectedToGuard
		Animation           = ATNB
			AnimationName     = IUUrukahi_ATNB
			AnimationMode     = ONCE
			AnimationSpeedFactorRange = 0.9 1.0
		End
	End
		
	TransitionState		= TRANS_SelectedToBoard
		Animation			= ATNC
			AnimationName	= IUUrukahi_ATNC
			AnimationMode	= ONCE
			AnimationSpeedFactorRange = 0.9 1.0
		End
	End
  	
	;----------------------------------------------------
	;Manning battering ram - Left and right idle
	;----------------------------------------------------
	AnimationState = PASSENGER PASSENGER_VARIATION_1 ; idle with battering ram
		Animation = idle_siege_lefthanded
			AnimationName =  IUUrukahi_BIDB
			AnimationMode = LOOP
		End
	End
	AnimationState = PASSENGER PASSENGER_VARIATION_2 ; idle with battering ram
		Animation = idle_siege_righthanded
			AnimationName = IUUrukahi_BIDA
			AnimationMode = LOOP
		End
	End
	
	AnimationState WEAPONSET_PLAYER_UPGRADE
		Animation = IDLA
			AnimationName = IUUrukahi_IDLA
			AnimationMode = LOOP
		End
		StateName	= Idle
		Flags		= RANDOMSTART
	End
	
;    AnimationState  = JUST_BUILT
;      Animation = Being_Built
;        AnimationName     = IUUrukahi_BLDA
;        AnimationMode =ONCE
;        AnimationBlendTime = 0
;      End
;    End	
    
  End

	; ***DESIGN parameters ***
	Side = Isengard
	EditorSorting = UNIT
		ThreatLevel = 1.0
	ThingClass = HORDE_UNIT
	EmotionRange = 240
	CommandPoints = 2
	CommandSet = IsengardFighterCommandSet
	TransportSlotCount = 1

	VisionRange = VISION_STANDARD_MELEE
	ShroudClearingRange = SHROUD_CLEAR_STANDARD

	BountyValue = ISENGARD_URUKFIGHTER_BOUNTY_VALUE
	DisplayName = OBJECT:IsengardFighter
	CrushableLevel = 0  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
	CrusherLevel = 0 ;What can I crush?: 0 = fluffy bunnies, 1 = infantry, 2 = trees, 3 = vehicles
  	CrushRevengeWeapon = BasicInfantryCrushRevenge

	WeaponSet
		Conditions = None 
		Weapon = PRIMARY    IsengardBannerSword
		AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End
	WeaponSet
		Conditions = PLAYER_UPGRADE
		Weapon = PRIMARY    IsengardBannerSwordUpgrade
		AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End
	ArmorSet
		Conditions      = None
		Armor           = UrukHaiArmor
		DamageFX        = NormalDamageFX
	End
	ArmorSet
		Conditions		= PLAYER_UPGRADE
		Armor			= UrukHaiHeavyArmor
		DamageFX		= NormalDamageFX
	End

  	; This is required so that the build phase lasts as long as the anim.
	BuildFadeInOnCreateTime = 0 ; 2  ;temporarily set to 0
	

  ; *** AUDIO Parameters ***;

    	VoiceAmbushed				= UrukWarriorVoiceAmbushed
	VoiceAttack					= UrukWarriorVoiceAttack
	VoiceAttack2				= OrcVoiceMove2
	VoiceMove					= UrukWarriorVoiceMove
	VoiceRetreatToCastle			= UrukPikemanVoiceRetreat
	VoiceMoveToCamp				= UrukWarriorVoiceMoveCamp
	VoiceRetreatToCastle2			= OrcVoiceMove2
	VoiceMoveWhileAttacking			= UrukWarriorVoiceDisengage
	VoiceMoveWhileAttacking2		= OrcVoiceMove2
	VoiceRetreatToCastle			= UrukPikemanVoiceRetreat
	VoiceRetreatToCastle			= OrcVoiceMove2
	VoiceEnterStateAttack			= UrukWarriorVoiceEnterStateAttack
	VoiceAttackStructure			= UrukWarriorVoiceAttackBuilding
	VoiceEnterStateAttackStructure	= UrukWarriorVoiceEnterStateAttackBuilding
	VoiceAttackMachine			= UrukWarriorVoiceAttack
	VoiceEnterStateAttackMachine		= UrukWarriorVoiceEnterStateAttackBuilding
	VoiceAttackCharge				= UrukWarriorVoiceAttackCharge
	VoiceEnterStateAttackCharge		= UrukWarriorVoiceEnterStateAttackCharge
	VoiceCreated				= CampOrcCreateUrukHai
	VoiceFullyCreated 			= CampOrcCreateUrukHai
	VoiceEnterStateMove			= UrukWarriorVoiceEnterStateMove
	VoiceEnterStateMoveToCamp		= UrukWarriorVoiceEnterStateMoveCamp
	VoiceEnterStateMoveWhileAttacking	= UrukWarriorVoiceEnterStateDisengage
	VoiceEnterStateRetreatToCastle	= UrukPikemanVoiceEnterStateRetreat
	VoicePriority				= 54
	VoiceSelect					= UrukWarriorVoiceSelect
	VoiceSelect2				= UrukSwordmanVoiceSelect2
	VoiceSelectBattle 			= UrukWarriorVoiceSelectBattle
	VoiceGuard					= UrukWarriorVoiceMove

	SoundImpact					= ImpactHorse

	UnitSpecificSounds
		VoiceGarrison			= UrukWarriorVoiceGarrison
		VoiceEnterUnitSlaughterHouse 	= UrukWarriorVoiceGarrisonSlaughterHouse
	End

	EvaEventDamagedOwner			= UnitUnderAttack 		;Eva event to trigger when unit is damaged
	;EvaEventDieOwner = GroupUrukWarriorDie		;Eva event to trigger on unit's death. NOTICE THAT this is only for permanent deaths
							;For deaths you can respawn from, use the DeathFX

	Behavior = LargeGroupAudioUpdate ModuleTag_LGAU	;Tie into LargeGroupAudio system
		Key = Orc_Infantry UrukHai_Swordman
	End

	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		MaxUpdateRangeCap = 800
		AnimationSound = Sound:BodyFallOrc			Animation:IUUrukahi_SKL.IUUrukahi_DIEA	Frames:18
		AnimationSound = Sound:BodyFallOrc			Animation:IUUrukahi_SKL.IUUrukahi_DIEB	Frames:30
		AnimationSound = Sound:BodyFallOrc			Animation:IUUrukahi_SKL.IUUrukahi_DIEC	Frames:28
		AnimationSound = Sound:BodyFallGeneric2		Animation:IUUrukahi_SKL.IUUrukahi_DIEG	Frames:115
		AnimationSound = Sound:BodyFallOrc			Animation:IUUrukahi_SKL.IUUrukahi_LNDA	Frames:2
		AnimationSound = Sound:BodyFallGeneric2		Animation:IUUrukahi_SKL.IUUrukahi_LNDA	Frames:37
	End


	; *** ENGINEERING Parameters ***
	RadarPriority = UNIT
	KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE CAN_USE_SIEGE_TOWER URUK GRAB_AND_DROP
	 
	Body = ActiveBody ModuleTag_02
		CheerRadius 	= EMOTION_CHEER_RADIUS
		MaxHealth         	= ISENGARD_URUKFIGHTER_HEALTH				;BALANCE Uruk Hai Health
		MaxHealthDamaged  	= ISENGARD_URUKFIGHTER_HEALTH_DAMAGED		
		;RecoveryTime      = ISENGARD_URUKFIGHTER_HEALTH_RECOVERY_TIME	
	    
		CheerRadius = EMOTION_CHEER_RADIUS
	End

    ;Sword Upgrade
	Behavior = WeaponSetUpgrade WeaponSetUpgradeModuleTag
		TriggeredBy		= Upgrade_IsengardForgedBlades
	End

	 ;Heavy Armor
	Behavior = ArmorUpgrade ArmorUpgradeModuleTag
		TriggeredBy		= Upgrade_IsengardHeavyArmor
		ArmorSetFlag			= PLAYER_UPGRADE
	End

	Behavior = SubObjectsUpgrade Armor_Upgrade
		TriggeredBy		= Upgrade_IsengardHeavyArmor
		UpgradeTexture	= IUUrukahi.tga 0 IUUrukahi_HA.tga
		UpgradeTexture	= IUUrukahi_l.tga 0 IUUrukahi_HA.tga
		RecolorHouse			= Yes
		ExcludeSubobjects		= Forged_Blade
	End

	Behavior = SubObjectsUpgrade ForgedBlades_Upgrade
		TriggeredBy		= Upgrade_IsengardForgedBlades
		ShowSubObjects	= Forged_Blade
	End
		
  Behavior = AIUpdateInterface ModuleTag_03
    AutoAcquireEnemiesWhenIdle = Yes ATTACK_BUILDINGS
	AILuaEventsList			   = IsengardFighterFunctions
    MoodAttackCheckRate        = 500
    AttackPriority				= 	AttackPriority_Infantry
  End
  
;  Behavior = StealthUpdate ModuleTag_Stealth
;	StealthDelay                = 0 ; msec
;	StealthForbiddenConditions  = ATTACKING
;	HintDetectableConditions    = IS_FIRING_WEAPON 
;	FriendlyOpacityMin          = 10.0%
;	FriendlyOpacityMax          = 60.0%
;	PulseFrequency              = 750   ; msec
;	OrderIdleEnemiesToAttackMeUponReveal  = Yes
;	StartsActive				= No
;	InnateStealth				= No
;  End

  LocomotorSet
    Locomotor     = HumanLocomotor
    Condition     = SET_NORMAL
    Speed         = NORMAL_EVIL_FAST_MEMBER_SPEED		
  End

  Behavior = PhysicsBehavior ModuleTag_04
    GravityMult = 1.0
	ShockStandingTime		= 2533	;msec
  End
 
  Behavior = SlowDeathBehavior ModuleTag_05
    DeathTypes = ALL 
    SinkDelay = 3000
    SinkRate = 0.40     ; in Dist/Sec
    DestructionDelay = 8000
    Sound = INITIAL UrukVoiceDie
  End
 
  Behavior = SquishCollide ModuleTag_06
    ;nothing
  End
  
  Behavior = HordeMemberCollide ModuleTag_HMC
    ;nothing
  End
 
	Behavior = HitReactionBehavior HitReactionBehaviorModuleTag
		HitReactionLifeTimer1 = 2860 ; level 1 (light  damage)  hit reaction animations in ms
		HitReactionLifeTimer2 = 3000 ; level 2 (medium damage)  hit reaction animations in ms

		HitReactionThreshold1 = 0.0   ; level 1 (light  damage) threshold trigger
		HitReactionThreshold2 = 50.0  ; level 2 (medium damage) threshold trigger
	End
  
  Geometry = CYLINDER
  GeometryMajorRadius = 8.0
  GeometryMinorRadius = 8.0
  GeometryHeight = 19.2
  GeometryIsSmall = Yes

  Shadow = SHADOW_DECAL
  ShadowSizeX = 21;
  ShadowSizeY = 21;
  ShadowTexture = ShadowI;
End

;------------------------------------------------------------------------------
; aka Uruk Hai, IsengardUrukHai, FighterIsengard, UrukWarrior, UrukFighter, UrukHaiWarrior, UrukHaiFighter
Object IsengardRamCrew
  ; *** ART Parameters ***

  ; This is required for garrisoned objects - please put in all objects.
  ButtonImage = BIUrukPit_Warriors
  SelectPortrait         = UPIsenguard_UrukHai
  
  Draw = W3DHordeModelDraw ModuleTag_01

	OkToChangeModelColor = Yes
	  
	StaticModelLODMode = Yes
	; specify options for static LODs
	LodOptions	= LOW
		AllowMultipleModels		=	ALLOW_MULTIPLE_MODELS_LOW
		MaxRandomTextures		=	MAX_RANDOM_TEXTURES_LOW
		MaxRandomAnimations		=	MAX_RANDOM_ANIMATIONS_LOW
		MaxAnimFrameDelta		=	MAX_ANIM_FRAME_DELTA_LOW
	End
	
	LodOptions	= MEDIUM
		AllowMultipleModels		=	ALLOW_MULTIPLE_MODELS_MED
		MaxRandomTextures		=	MAX_RANDOM_TEXTURES_MED
		MaxRandomAnimations		=	MAX_RANDOM_ANIMATIONS_MED
		MaxAnimFrameDelta		=	MAX_ANIM_FRAME_DELTA_MED
	End
	
	LodOptions	= HIGH
		AllowMultipleModels		=	ALLOW_MULTIPLE_MODELS_HIGH
		MaxRandomTextures		=	MAX_RANDOM_TEXTURES_HIGH
		MaxRandomAnimations		=	MAX_RANDOM_ANIMATIONS_HIGH
		MaxAnimFrameDelta		=	MAX_ANIM_FRAME_DELTA_HIGH
	End
	
    DefaultModelConditionState
		Model = IU_BRCrew_SKN
		Skeleton = IUUrukahi_SKL
    End

	IdleAnimationState
		Animation = IDLB
			AnimationName = IUUrukahi_IDLB
			AnimationMode = ONCE
			AnimationPriority = 20
		End
		Animation = IDLG
			AnimationName = IUUrukahi_IDLG
			AnimationMode = ONCE
			AnimationPriority = 1 ;2
		End
		Animation = IDLD
			AnimationName = IUUrukahi_IDLD
			AnimationMode = ONCE
			AnimationPriority = 2
		End	
		StateName = Idle
		BeginScript
			Prev = CurDrawablePrevAnimationState()
		EndScript
	End
	
    AnimationState = JUST_BUILT PASSENGER_VARIATION_1
		Animation = built
			AnimationName		= IUUrukahi_UDBL
		    AnimationMode		= ONCE
		    AnimationBlendTime	= 0		; Must be zero.
		End
	End
	
    AnimationState = JUST_BUILT PASSENGER_VARIATION_2
		Animation = built
			AnimationName		= IUUrukahi_UDBR
		    AnimationMode		= ONCE
		    AnimationBlendTime	= 0		; Must be zero.
		End
	End

    AnimationState = DYING
		Animation = DIEA
			AnimationName = IUUrukahi_BDIA
		    AnimationMode = ONCE
			AnimationSpeedFactorRange	=	0.7 1.4
		End
		Animation = DIEB
			AnimationName = IUUrukahi_BDIB
		    AnimationMode = ONCE
			AnimationSpeedFactorRange	=	0.7 1.4
		End
		Animation = DIEC
			AnimationName = IUUrukahi_BDIC
		    AnimationMode = ONCE
			AnimationSpeedFactorRange	=	0.7 1.4
		End
    End    

	;----------------------------------------------------
	;Manning battering ram - Left and right handed attack
	;----------------------------------------------------
	AnimationState = FIRING_OR_PREATTACK_A PASSENGER PASSENGER_VARIATION_1 ; attacking with battering ram
		Animation = grasping_siege_lefthanded
			AnimationName =  IUUrukahi_BATB
			AnimationMode = ONCE
;			UseWeaponTiming = Yes
		End
	End
	
	AnimationState = FIRING_OR_PREATTACK_A PASSENGER PASSENGER_VARIATION_2 ; attacking with battering ram
		Animation = grasping_siege_righthanded
			AnimationName = IUUrukahi_BATA
			AnimationMode = ONCE
;			UseWeaponTiming = Yes
		End
	End

	AnimationState = FIRING_OR_PREATTACK_B PASSENGER PASSENGER_VARIATION_1 ; attacking with battering ram
		Animation = grasping_siege_lefthanded
			AnimationName =  IUUrukahi_BATB
			AnimationMode = ONCE
;			UseWeaponTiming = Yes
		End
	End
	AnimationState = FIRING_OR_PREATTACK_B PASSENGER PASSENGER_VARIATION_2 ; attacking with battering ram
		Animation = grasping_siege_righthanded
			AnimationName = IUUrukahi_BATA
			AnimationMode = ONCE
;			UseWeaponTiming = Yes
		End
	End

	AnimationState = FIRING_OR_PREATTACK_C PASSENGER PASSENGER_VARIATION_1 ; attacking with battering ram
		Animation = grasping_siege_lefthanded
			AnimationName =  IUUrukahi_BATB
			AnimationMode = ONCE
;			UseWeaponTiming = Yes
		End
	End
	AnimationState = FIRING_OR_PREATTACK_C PASSENGER PASSENGER_VARIATION_2 ; attacking with battering ram
		Animation = grasping_siege_righthanded
			AnimationName = IUUrukahi_BATA
			AnimationMode = ONCE
;			UseWeaponTiming = Yes
		End
	End

	;----------------------------------------------------
	;Manning battering ram - Left and right movement
	;----------------------------------------------------
	AnimationState = MOVING BACKING_UP PASSENGER PASSENGER_VARIATION_1 ; running with battering ram
		Animation = moving_siege_lefthanded
			AnimationName =  IUUrukahi_BRND
			AnimationMode = LOOP
			AnimationSpeedFactorRange	=	0.7 0.7
		End
	End
	AnimationState = MOVING BACKING_UP PASSENGER PASSENGER_VARIATION_2 ; running with battering ram
		Animation = moving_siege_righthanded
			AnimationName = IUUrukahi_BRNC
			AnimationMode = LOOP
			AnimationSpeedFactorRange	=	0.7 0.7
		End
	End

	;;; HIGH SPEED TURNS ;;;
	AnimationState = MOVING TURN_LEFT TURN_LEFT_HIGH_SPEED PASSENGER PASSENGER_VARIATION_1 ; running with battering ram
		Animation = moving_siege_lefthanded
			AnimationName =  IUUrukahi_BRNB
			AnimationMode = LOOP
			AnimationSpeedFactorRange	=	0.6 0.6
		End
	End
	AnimationState = MOVING TURN_LEFT TURN_LEFT_HIGH_SPEED PASSENGER PASSENGER_VARIATION_2 ; running with battering ram
		Animation = moving_siege_righthanded
			AnimationName = IUUrukahi_BRNA
			AnimationMode = LOOP
			AnimationSpeedFactorRange	=	0.8 0.8
		End
	End

	AnimationState = MOVING TURN_RIGHT TURN_RIGHT_HIGH_SPEED PASSENGER PASSENGER_VARIATION_1 ; running with battering ram
		Animation = moving_siege_lefthanded
			AnimationName =  IUUrukahi_BRNB
			AnimationMode = LOOP
			AnimationSpeedFactorRange	=	0.8 0.8
		End
	End
	AnimationState = MOVING TURN_RIGHT TURN_RIGHT_HIGH_SPEED PASSENGER PASSENGER_VARIATION_2 ; running with battering ram
		Animation = moving_siege_righthanded
			AnimationName = IUUrukahi_BRNA
			AnimationMode = LOOP
			AnimationSpeedFactorRange	=	0.6 0.6
		End
	End

	;;; SLOW SPEED TURNS ;;;
	AnimationState = MOVING TURN_LEFT PASSENGER PASSENGER_VARIATION_1 ; running with battering ram
		Animation = moving_siege_lefthanded
			AnimationName =  IUUrukahi_BRND
			AnimationMode = LOOP
			AnimationSpeedFactorRange	=	0.4 0.4
		End
	End
	AnimationState = MOVING TURN_LEFT PASSENGER PASSENGER_VARIATION_2 ; running with battering ram
		Animation = moving_siege_righthanded
			AnimationName = IUUrukahi_BRNA
			AnimationMode = LOOP
			AnimationSpeedFactorRange	=	0.7 0.7
		End
	End

	AnimationState = MOVING TURN_RIGHT PASSENGER PASSENGER_VARIATION_1 ; running with battering ram
		Animation = moving_siege_lefthanded
			AnimationName =  IUUrukahi_BRNB
			AnimationMode = LOOP
			AnimationSpeedFactorRange	=	0.7 0.7
		End
	End
	AnimationState = MOVING TURN_RIGHT PASSENGER PASSENGER_VARIATION_2 ; running with battering ram
		Animation = moving_siege_righthanded
			AnimationName = IUUrukahi_BRNC
			AnimationMode = LOOP
			AnimationSpeedFactorRange	=	0.4 0.4
		End
	End

	;;; MOVING FORWARD ;;;
	AnimationState = MOVING PASSENGER PASSENGER_VARIATION_1 ; running with battering ram
		Animation = moving_siege_lefthanded
			AnimationName =  IUUrukahi_BRNB
			AnimationMode = LOOP
			AnimationSpeedFactorRange	=	0.7 0.7
		End
	End
	AnimationState = MOVING PASSENGER PASSENGER_VARIATION_2 ; running with battering ram
		Animation = moving_siege_righthanded
			AnimationName = IUUrukahi_BRNA
			AnimationMode = LOOP
			AnimationSpeedFactorRange	=	0.7 0.7
		End
	End
	  	
	;----------------------------------------------------
	;Manning battering ram - Left and right idle
	;----------------------------------------------------
	AnimationState = PASSENGER PASSENGER_VARIATION_1 ; idle with battering ram
		Animation = idle_siege_lefthanded
			AnimationName =  IUUrukahi_BIDB
			AnimationMode = LOOP
		End
	End
	AnimationState = PASSENGER PASSENGER_VARIATION_2 ; idle with battering ram
		Animation = idle_siege_righthanded
			AnimationName = IUUrukahi_BIDA
			AnimationMode = LOOP
		End
	End	
  End

	; ***DESIGN parameters ***
	Side = Isengard
	EditorSorting = UNIT
	ThreatLevel = 1.0
	ThingClass = HORDE_UNIT
	EmotionRange = 240
	CommandPoints = 0;the ram costs five points, so crew are free
	CommandSet = IsengardFighterCommandSet
	TransportSlotCount = 1

	VisionRange = VISION_STANDARD_MELEE
	ShroudClearingRange = SHROUD_CLEAR_STANDARD

  	; This is required so that the build phase lasts as long as the anim.
	BuildFadeInOnCreateTime = 2.5

	BountyValue = ISENGARD_URUKFIGHTER_BOUNTY_VALUE
	DisplayName = OBJECT:IsengardFighter
	CrushableLevel = 0  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
	CrusherLevel = 0 ;What can I crush?: 0 = small animals, 1 = infantry, 2 = trees, 3 = vehicles
  	CrushRevengeWeapon = BasicInfantryCrushRevenge

	WeaponSet
		Conditions = None 
		Weapon = PRIMARY    IsengardBannerSword
		AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End
	ArmorSet
		Conditions      = None
		Armor           = UrukHaiArmor
		DamageFX        = NormalDamageFX
	End


  ; *** AUDIO Parameters ***;

   	VoiceAmbushed				= UrukWarriorVoiceAmbushed
	VoiceAttack					= UrukWarriorVoiceAttack
	VoiceAttack2				= OrcVoiceAttack2
	VoiceAttackStructure			= UrukWarriorVoiceAttackBuilding
	VoiceAttackMachine			= UrukWarriorVoiceAttack
	VoiceAttackCharge				= UrukWarriorVoiceAttackCharge
	VoiceEnterStateAttack			= UrukWarriorVoiceEnterStateAttack
	VoiceEnterStateAttackStructure	= UrukWarriorVoiceEnterStateAttackBuilding
	VoiceEnterStateAttackMachine		= UrukWarriorVoiceEnterStateAttackBuilding
	VoiceEnterStateAttackCharge		= UrukWarriorVoiceEnterStateAttackCharge
	VoiceCreated				= CampOrcCreateUrukHai
	VoiceFullyCreated 			= CampOrcCreateUrukHai
	VoiceMove					= UrukWarriorVoiceMove
	VoiceMove2					= OrcVoiceMove2
	VoiceMoveToCamp				= UrukWarriorVoiceMoveCamp
	VoiceMoveWhileAttacking			= UrukWarriorVoiceDisengage
	VoiceRetreatToCastle			= UrukPikemanVoiceRetreat
	VoiceEnterStateMove			= UrukWarriorVoiceEnterStateMove
	VoiceEnterStateMoveToCamp		= UrukWarriorVoiceEnterStateMoveCamp
	VoiceEnterStateMoveWhileAttacking	= UrukWarriorVoiceEnterStateDisengage
	VoiceEnterStateRetreatToCastle	= UrukPikemanVoiceEnterStateRetreat
	VoicePriority				= 54
	VoiceSelect					= UrukWarriorVoiceSelect
	VoiceSelectBattle 			= UrukWarriorVoiceSelectBattle
	VoiceGuard					= UrukWarriorVoiceMove

	SoundImpact					= ImpactHorse

	UnitSpecificSounds
		VoiceGarrison			= UrukWarriorVoiceGarrison
	End

	EvaEventDamagedOwner			= UnitUnderAttack 		;Eva event to trigger when unit is damaged
	;EvaEventDieOwner				= GroupUrukWarriorDie		;Eva event to trigger on unit's death. NOTICE THAT this is only for permanent deaths
										;For deaths you can respawn from, use the DeathFX

	Behavior = LargeGroupAudioUpdate ModuleTag_LGAU		; Tie into LargeGroupAudio system
		Key = Orc_Infantry UrukHai_RamCrew
	End

	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		MaxUpdateRangeCap = 800
		AnimationSound = Sound:BatteringRamFootstepDirtALoose		Animation:IUUrukahi_SKL.IUUrukahi_BRNA		Frames:0 10
		AnimationSound = Sound:BatteringRamGroupFootstep		Animation:IUUrukahi_SKL.IUUrukahi_BRNA		Frames:1 11
		AnimationSound = Sound:BatteringRamFootstepDirtALoose		Animation:IUUrukahi_SKL.IUUrukahi_BRNB		Frames:0 10
		AnimationSound = Sound:BatteringRamFootstepDirtALoose		Animation:IUUrukahi_SKL.IUUrukahi_BRNC		Frames:0 10
		AnimationSound = Sound:BatteringRamGroupFootstep		Animation:IUUrukahi_SKL.IUUrukahi_BRNC		Frames:1 11
		AnimationSound = Sound:BatteringRamFootstepDirtALoose		Animation:IUUrukahi_SKL.IUUrukahi_BRND		Frames:0 10

		AnimationSound = Sound:BatteringRamFootstepDirtALoose		Animation:IUUrukahi_SKL.IUUrukahi_UDBL		Frames:4 14 24 34 42 54 67
		AnimationSound = Sound:BatteringRamGroupFootstep		Animation:IUUrukahi_SKL.IUUrukahi_UDBL		Frames:5 15 25 35 43 55 68
		AnimationSound = Sound:BatteringRamFootstepDirtALoose		Animation:IUUrukahi_SKL.IUUrukahi_UDBR		Frames:4 14 24 34 42 54 67

		AnimationSound = Sound:BodyFallOrc					Animation:IUUrukahi_SKL.IUUrukahi_BDIA		Frames:37
		AnimationSound = Sound:BodyFallOrc					Animation:IUUrukahi_SKL.IUUrukahi_BDIB		Frames:59
		AnimationSound = Sound:BodyFallOrc					Animation:IUUrukahi_SKL.IUUrukahi_BDIC		Frames:67
	End


	; *** ENGINEERING Parameters ***
	RadarPriority = UNIT
	KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER
	 
	Body = ActiveBody ModuleTag_02
		MaxHealth         	= ISENGARD_URUKFIGHTER_HEALTH				;BALANCE Uruk Hai Health
		MaxHealthDamaged  	= ISENGARD_URUKFIGHTER_HEALTH_DAMAGED		
	End

	Behavior = AIUpdateInterface ModuleTag_03
		AutoAcquireEnemiesWhenIdle = Yes ATTACK_BUILDINGS
		AILuaEventsList			   = IsengardFighterFunctions
		MoodAttackCheckRate        = 500
		AttackPriority			   = AttackPriority_Infantry
	End
	  
	LocomotorSet
		Locomotor     = HumanLocomotor
		Condition     = SET_NORMAL
		Speed         = NORMAL_EVIL_INFANTRY_MEMBER_SPEED
	End

	Behavior = PhysicsBehavior ModuleTag_04
		GravityMult = 1.0
	End
	 
	Behavior = SlowDeathBehavior ModuleTag_05
		DeathTypes = ALL 
		SinkDelay = 3000
		SinkRate = 1.50     ; in Dist/Sec
		DestructionDelay = 10000
		Sound = INITIAL UrukVoiceDie
	End
 
	Geometry = CYLINDER
	GeometryMajorRadius = 5
	GeometryMinorRadius = 5
	GeometryHeight = 5
	GeometryIsSmall = Yes

	Shadow = SHADOW_DECAL
	ShadowSizeX = 21;
	ShadowSizeY = 21;
	ShadowTexture = ShadowI;
End

;------------------------------------------------------------------------------
Object IsengardBatteringRam
	; *** ART Parameters ***
	; This is required for garrisoned objects - please put in all objects.
	ButtonImage				= BISiegeWorks_BatteringRam
	SelectPortrait			= UPIsenguard_BatteringRam
	
	Draw = W3DScriptedModelDraw ModuleTag_01

	  OkToChangeModelColor = Yes
	  
	  StaticModelLODMode = Yes
	  
		ExtraPublicBone = CREWBONE
		ExtraPublicBone = PASSENGER
	    DependencySharedModelFlags = MOVING FIRING_OR_PREATTACK_A FIRING_OR_PREATTACK_B FIRING_OR_PREATTACK_C TURN_LEFT TURN_RIGHT BACKING_UP

		DefaultModelConditionState
			Model = IUBATTRRAM_SKN
			WeaponLaunchBone			=	PRIMARY CREWBONE07
		    Skeleton = IUBATTRRAM_SKL
			WeaponFireFXBone	PRIMARY CREWBONE07		
		End

		IdleAnimationState
			Animation = IDL
				AnimationName = IUBATTRRAM_IDLA
				AnimationMode = LOOP
			End
			StateName = Idle
		End

		AnimationState = MOVING
			Animation = Moving
				AnimationName = IUBATTRRAM_RUNA
				AnimationMode = LOOP
			End
			ParticleSysBone = None InfantryDustTrails
		End

		AnimationState = FIRING_OR_PREATTACK_A
			Animation = Attacking
				AnimationName = IUBATTRRAM_ATKA
				AnimationMode = ONCE
;				UseWeaponTiming = Yes
			End
		End

		AnimationState = FIRING_OR_PREATTACK_B
			Animation = Attacking
				AnimationName = IUBATTRRAM_ATKA
				AnimationMode = ONCE
;				UseWeaponTiming = Yes
			End
		End


		AnimationState = FIRING_OR_PREATTACK_C
			Animation = Attacking
				AnimationName = IUBATTRRAM_ATKA
				AnimationMode = ONCE
;				UseWeaponTiming = Yes
			End
		End


		AnimationState = DYING
			Animation = Dying
				AnimationName = IUBATTRRAM_DIEA
				AnimationMode = ONCE
			End
		End 
		
	    AnimationState  = JUST_BUILT
			Animation = Being_Built
				AnimationName		= IUBattrRam_BLDA
				AnimationMode		= ONCE
				AnimationBlendTime	= 0		; Must be zero.
			End
		End		
	End

	; ***DESIGN parameters ***
	Side				= Isengard
	IsTrainable		= No
	EditorSorting		= UNIT
	ThreatLevel			= 1.0
	ImmuneToShockwave	= yes
	TransportSlotCount	= 10

	ShroudClearingRange 	= SHROUD_CLEAR_STANDARD
	VisionRange		= ISENGARD_BATTERINGRAM_VISION_RANGE 

	BountyValue         = ISENGARD_BATTERINGRAM_BOUNTY_VALUE 		
	CrushableLevel		= 3  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
	; CrusherLevel		= 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
	DisplayName			= OBJECT:IsengardBatteringRam
	CommandSet			= BatteringRamCommandSet
	CommandPoints = 5
	BuildCost 			= ISENGARD_BATTERINGRAM_BUILDCOST			
	BuildTime			= ISENGARD_BATTERINGRAM_BUILDTIME			
	TransportSlotCount = 1
	WeaponSet
		Conditions  = None
		Weapon		= PRIMARY	IsengardBatteringRam
		Weapon		= SECONDARY IsengardBatteringRamGate
		OnlyAgainst = SECONDARY BLOCKING_GATE 
		Weapon      = TERTIARY  IsengardBatteringRamWall
		OnlyAgainst = TERTIARY  WALK_ON_TOP_OF_WALL
	End
	WeaponSet
		Conditions  = PASSENGER_TYPE_ONE 
		Weapon		= PRIMARY IsengardBatteringRamWithMine
	End
	
	ArmorSet
		Conditions      = None
		Armor           = BatteringRamArmor
		DamageFX          = None
	End
 
  	; This is required so that the build phase lasts as long as the anim.
	BuildFadeInOnCreateTime = 2.5
	

	; ************** AUDIO Parameters ***************;

	VoiceAttack					= BatteringRamVoiceAttack
	VoiceAttack2				= OrcVoiceAttack2
	VoiceAttackCharge				= BatteringRamVoiceAttackCharge
	VoiceAttackStructure			= BatteringRamVoiceAttackBuilding
	VoiceEnterStateAttack			= BatteringRamVoiceEnterStateAttack
	VoiceEnterStateAttackCharge		= BatteringRamVoiceEnterStateAttackCharge
	VoiceEnterStateAttackStructure	= BatteringRamVoiceEnterStateAttackBuilding
	VoiceCreated				= CampOrcCreateIsengardBatteringRam
	VoiceFullyCreated 			= CampOrcCreateIsengardBatteringRam
	VoiceGuard					= BatteringRamVoiceMove
	VoiceMove					= BatteringRamVoiceMove
	VoiceMove2					= OrcVoiceMove2
	VoiceMoveToCamp				= BatteringRamVoiceMoveCamp
	VoiceMoveWhileAttacking			= BatteringRamVoiceDisengage
	VoiceEnterStateMove			= BatteringRamVoiceEnterStateMove
	VoiceEnterStateMoveToCamp		= BatteringRamVoiceEnterStateMoveCamp
	VoiceEnterStateMoveWhileAttacking	= BatteringRamVoiceEnterStateDisengage
	VoicePriority				= 23
	VoiceSelect					= BatteringRamVoiceSelect
	VoiceSelect2				= BatteringRamVoiceSelect2
	VoiceSelectBattle 			= BatteringRamVoiceSelectBattle

	SoundImpact 				= ImpactHorse

	EvaEventDamagedOwner			= UnitUnderAttack 					;Eva event to trigger when unit is damaged

	Behavior					= LargeGroupAudioUpdate ModuleTag_LGAU		;Tie into LargeGroupAudio system
		Key = SiegeWeapon BatteringRam
	End


	; *** ENGINEERING Parameters ***

	RadarPriority = UNIT
	KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS MACHINE SCORE CAN_ATTACK PATH_THROUGH_INFANTRY CAN_ATTACK_WALLS
 
	Body = ActiveBody ModuleTag_02
		CheerRadius 	  = EMOTION_CHEER_RADIUS
		MaxHealth         = ISENGARD_BATTERINGRAM_HEALTH			;BALANCE Uruk Hai Health
		MaxHealthDamaged  = ISENGARD_BATTERINGRAM_HEALTH_DAMAGED		
		;RecoveryTime      = ISENGARD_BATTERINGRAM_HEALTH_RECOVERY_TIME	
	End
 
	Behavior = AIUpdateInterface ModuleTag_03
		AutoAcquireEnemiesWhenIdle = Yes ATTACK_BUILDINGS
		MoodAttackCheckRate        = 2500
	End

    Behavior = SiegeEngineContain ModuleTag_Contain
		ObjectStatusOfCrew		= UNSELECTABLE UNATTACKABLE
		Slots					= 1
		DamagePercentToUnits	= 100%
		PassengerFilter			= NONE +CAN_RIDE_BATTERING_RAM
		KillPassengersOnDeath	= Yes ; fling passenger out to die when siege ladder is done for
		AllowAlliesInside		= Yes
		AllowEnemiesInside		= No
		AllowNeutralInside		= No
		CrewFilter				= NONE +INFANTRY -CAN_RIDE_BATTERING_RAM    ;Crew is always checked first, then Passenger
		CrewMax					= 6
		InitialCrew				= IsengardRamCrew 6
		ExitDelay				= 500  ; half second
		NumberOfExitPaths		= 0 ; Defaults to 1.  Set 0 to not use ExitStart/ExitEnd, set higher than 1 to use ExitStart01-nn/ExitEnd01-nn
		GoAggressiveOnExit		= Yes ; AI Will tell people to set their mood to Aggressive on exiting
		TypeOneForWeaponSet		= CAN_RIDE_BATTERING_RAM
		EjectPassengersOnDeath	= Yes

		;Bone position for mine
		;PassengerBonePrefix = PassengerBone:PASSENGER   KindOf:CAN_RIDE_BATTERING_RAM         
		;I can't attach a mine to PASSENGER bone because it has 1 bone and 
		;the contained map of Uruk's already carrying the ram says there are 6. So the 
		;code that handles occupant deploy is screwed up because it doesn't account for
		;multiple bones. So the solution is to use CREWBONE07.

	    ;Bone positions for CREWBONE01-CREWBONE06
		PassengerBonePrefix = PassengerBone:CREWBONE    KindOf:INFANTRY
	    ;Left side -- so crew members use right handed animations
		BoneSpecificConditionState 1 PASSENGER_VARIATION_1
		BoneSpecificConditionState 4 PASSENGER_VARIATION_1
		BoneSpecificConditionState 6 PASSENGER_VARIATION_1
		;Right side -- so crew members use left handed animations
		BoneSpecificConditionState 2 PASSENGER_VARIATION_2
		BoneSpecificConditionState 3 PASSENGER_VARIATION_2
		BoneSpecificConditionState 5 PASSENGER_VARIATION_2

	End

	LocomotorSet
		Locomotor     = BatteringRamLocomotor
		Condition     = SET_NORMAL
		Speed         = 32 ;rto look here
	End
 
	Behavior = PhysicsBehavior ModuleTag_04
		;nothing?
		;GravityMult = 1.0
	End
 
	Behavior = SlowDeathBehavior ModuleTag_05
		DeathTypes = ALL 
		SinkDelay = 3000
		SinkRate = 2.00     ; in Dist/Sec
		DestructionDelay = 9000
		Sound = INITIAL UrukVoiceDie
	End
 
	Behavior = SquishCollide ModuleTag_06
		;nothing
	End
 
	Geometry = CYLINDER
	GeometryMajorRadius = 20.0
	GeometryMinorRadius = 20.0
	GeometryHeight = 12
	GeometryIsSmall = No
	Shadow = SHADOW_VOLUME
End

;------------------------------------------------------------------------------
; aka Siege Ladder
Object IsengardSiegeLadder

    ; This is required for garrisoned objects - please put in all objects.
    ButtonImage = BMGreatSiegeWorks_SiegeTower

    ; SelectPortrait for Heros is portrait behind skill buttons. HP = HeroPortrait.
	;SelectPortrait = BMGreatSiegeWorks_SiegeTower
	SelectPortrait         = UPIsenguard_SeigeLadder

	; *** ART Parameters ***
	Draw = W3DScriptedModelDraw ModuleTag_01
		OkToChangeModelColor = Yes
		ExtraPublicBone = Ladder01
		ExtraPublicBone = Ladder02
		ExtraPublicBone = Ladder03
		ExtraPublicBone = Ladder04
		ExtraPublicBone = Passenger
		
		StaticModelLODMode = Yes

		; day
		DefaultModelConditionState
			Model				= IUSgLdr_SKN
			Skeleton			= IUSgLdr_SKL
		End

		IdleAnimationState
			Animation
				AnimationName	= IUSgLdr_IDLA
				AnimationMode	= ONCE
			End
		End

	    AnimationState  = JUST_BUILT
			Animation = Being_Built
				AnimationName		= IUSgLdr_BLDA
				AnimationMode		= ONCE
				AnimationBlendTime	= 0		; Must be zero.
			End
		End
	    
		AnimationState			= DYING DEPLOYED
			Animation = Dying
				AnimationName   = IUSgLdr_DIEC
				AnimationMode	= ONCE
			End
		End

		AnimationState			= DYING
			Animation
				AnimationName   = IUSgLdr_DIEA
				AnimationMode	= ONCE
			End
		End

		AnimationState			= UNPACKING
			Animation
				AnimationName	= IUSgLdr_PLTA
				AnimationMode	= ONCE
			End
	;      ParticleSysBone = Ladder04 SiegeTowerDeployedDebris
	;      ParticleSysBone = Ladder04 SiegeTowerDeployedDust
		End

		AnimationState			= DEPLOYED
			Animation
				AnimationName	= IUSgLdr_IDLB
				AnimationMode	= LOOP
			End
		End

		AnimationState			= PACKING
			Animation = Close
				AnimationName	= IUSgLdr_PKPA
				AnimationMode	= ONCE
			End
		End

		AnimationState			= MOVING TURN_LEFT
			Animation
				AnimationName	= IUSgLdr_TRNL
				AnimationMode	= LOOP
			End
		End

		AnimationState			= MOVING TURN_RIGHT
			Animation
				AnimationName	= IUSgLdr_TRNR
				AnimationMode	= LOOP
			End
		End

		AnimationState			= MOVING
			Animation
				AnimationName	= IUSgLdr_RUNA
				AnimationMode	= LOOP
				Distance		= 30
			End
		End
	
    
	End

	; ***DESIGN parameters ***
	Side = Isengard
	IsTrainable		= No
	EditorSorting = UNIT
	ThreatLevel = 1.0
	ThingClass = MACHINE
	TransportSlotCount = 1

	; This is required so that the build phase lasts as long as the anim.
	BuildFadeInOnCreateTime = 2.5

	ArmorSet
		Conditions      = None
		Armor           = SiegeLadderArmor
		DamageFX        = NormalDamageFX
	End

	VisionRange = VISION_STANDARD_MELEE
	ShroudClearingRange = SHROUD_CLEAR_STANDARD

	BountyValue     = ISENGARD_SIEGELADDER_BOUNTY_VALUE		
	DisplayName		= OBJECT:IsengardSiegeLadder
	CrushableLevel	= 1  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
	CrusherLevel = 0 ;What can I crush?: 0 = small animals, 1 = infantry, 2 = trees, 3 = vehicles

	CommandSet = IsengardSiegeLadderCommandSet
	ImmuneToShockwave = Yes	
	CommandPoints = 4
  

	; ***AUDIO parameters ***

	VoiceAttack					= SiegeLadderVoiceAttack
	VoiceAttack2				= OrcVoiceAttack2
	VoiceEnterStateAttack			= SiegeLadderVoiceEnterStateAttack
	VoiceCombineWithHorde			= SiegeLadderVoiceJoin
	VoiceCreated				= CampOrcCreateSiegeLadder
	VoiceFullyCreated 			= CampOrcCreateSiegeLadder
	VoiceGuard					= SiegeLadderVoiceMove
	VoiceMove					= SiegeLadderVoiceMove
	VoiceMove2					= OrcVoiceMove2
	VoiceMoveToCamp				= SiegeLadderVoiceMoveCamp
	VoiceMoveWhileAttacking			= SiegeLadderVoiceDisengage
	VoiceEnterStateMove			= SiegeLadderVoiceEnterStateMove
	VoiceEnterStateMoveToCamp		= SiegeLadderVoiceEnterStateMoveCamp
	VoiceEnterStateMoveWhileAttacking	= SiegeLadderVoiceEnterStateDisengage
	VoicePriority				= 24
	VoiceSelect					= SiegeLadderVoiceSelect
	VoiceSelect2				= SiegeLadderVoiceSelect2
	VoiceSelectBattle 			= SiegeLadderVoiceSelect   ; Not SiegeLadderVoiceSelectBattle
	VoiceSelectBattle2 			= SiegeLadderVoiceSelect2

	EvaEventDamagedOwner			= UnitUnderAttack 				;Eva event to trigger when unit is damaged

	Behavior					= LargeGroupAudioUpdate ModuleTag_LGAU		;Tie into LargeGroupAudio system
		Key = SiegeWeapon UrukHai_SiegeLadder
	End
	
	ClientBehavior = ModelConditionSoundSelectorClientBehavior ModuleTag_MCSoundSelector
		SoundState = DEPLOYED
			; Always use VoiceSelectBattle for all selections when attached to a wall
			VoiceSelect					= SiegeLadderVoiceSelectBattle
			VoiceSelect2				= SiegeLadderVoiceSelect2
			VoiceSelectBattle				= SiegeLadderVoiceSelectBattle
			VoiceSelectBattle2 			= SiegeLadderVoiceSelect2
			VoiceMove					= BlankSoundEffect		;removes problem where VoiceMove plays when attached to a wall
			VoiceMove2					= BlankSoundEffect		;removes problem where VoiceMove plays when attached to a wall
			VoiceMoveToCamp				= BlankSoundEffect		;removes problem where VoiceMove plays when attached to a wall
			VoiceMoveWhileAttacking			= BlankSoundEffect		;removes problem where VoiceMove plays when attached to a wall
			VoiceEnterStateMove			= BlankSoundEffect		;removes problem where VoiceMove plays when attached to a wall
			VoiceEnterStateMoveToCamp		= BlankSoundEffect		;removes problem where VoiceMove plays when attached to a wall
			VoiceEnterStateMoveWhileAttacking	= BlankSoundEffect		;removes problem where VoiceMove plays when attached to a wall
		End
	End
	
	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		MaxUpdateRangeCap = 800
		AnimationSound = Sound: FootstepDirtA			Animation:IUSgLdr_SKL.IUSgLdr_BLDA Frames: 4 6 15 17 26 28 37 39 47 49 58 60 68 70 75 77

		AnimationSound = Sound: FootstepDirtA			Animation:IUSgLdr_SKL.IUSgLdr_RUNA Frames: 6 8 17 19 
		AnimationSound = Sound: FootstepDirtA			Animation:IUSgLdr_SKL.IUSgLdr_TRNL Frames: 0 11 22 33
		AnimationSound = Sound: FootstepDirtA			Animation:IUSgLdr_SKL.IUSgLdr_TRNR Frames: 0 11 22 33

		AnimationSound = Sound: ImpactLadderWall			Animation:IUSgLdr_SKL.IUSGLDR_PLTA Frames: 12

		AnimationSound = Sound: FootstepDirtA			Animation:IUSgLdr_SKL.IUSgLdr_PKPA Frames: 7 15 17 25 35 44 57 64 75
		AnimationSound = Sound: LadderDieCreak			Animation:IUSgLdr_SKL.IUSgLdr_PKPA Frames: 14

		AnimationSound = Sound: ImpactLadderDieDrop		Animation:IUSgLdr_SKL.IUSgLdr_DIEA Frames: 6
		AnimationSound = Sound: ImpactLadderDieHitGround	Animation:IUSgLdr_SKL.IUSgLdr_DIEA Frames: 22
		AnimationSound = Sound: ImpactLadderDieHitGround	Animation:IUSgLdr_SKL.IUSgLdr_DIEC Frames: 47
		AnimationSound = Sound: LadderDieCreak			Animation:IUSgLdr_SKL.IUSgLdr_DIEC Frames: 0

		AnimationSound = Sound: BodyFallGeneric2			Animation:IUSgLdr_SKL.IUSgLdr_DIEA Frames: 8
		AnimationSound = Sound: BodyFallGeneric2			Animation:IUSgLdr_SKL.IUSgLdr_DIEC Frames: 20 40
	End


	; *** ENGINEERING Parameters ***  

	RadarPriority = UNIT
	KindOf                = SELECTABLE SIEGE_TOWER PATH_THROUGH_INFANTRY MACHINE TRANSPORT SIEGE_LADDER SCORE
	ImmuneToShockwave = Yes

	Behavior = SiegeAIUpdate ModuleTag_02
		AutoAcquireEnemiesWhenIdle = No
	End

	LocomotorSet
		Locomotor = SiegeLadderLocomotor
		Condition = SET_NORMAL 
		Speed     = 32
	End

	Behavior = PhysicsBehavior ModuleTag_03
	End

	BuildCost = ISENGARD_SIEGELADDER_BUILDCOST			
	BuildTime = ISENGARD_SIEGELADDER_BUILDTIME			

	Body                  = ActiveBody ModuleTag_04
		MaxHealth         = ISENGARD_SIEGELADDER_HEALTH			;BALANCE MordorSiegeLadder Health
		MaxHealthDamaged  = ISENGARD_SIEGELADDER_HEALTH_DAMAGED		
		;;RecoveryTime      = ISENGARD_SIEGELADDER_HEALTH_RECOVERY_TIME
    		DodgePercent      = 50%	
	End

	Behavior = SlowDeathBehavior ModuleTag_05
		ProbabilityModifier = 1 ; We only want this one to apply when the directional one is blocked/unpickable
		DeathTypes = ALL 
		SinkDelay = 2500
		SinkRate = 1.0     ; in Dist/Sec
		DestructionDelay = 7500
		Sound = INITIAL UrukVoiceDie
;		FX = INITIAL FX_SiegeTowerDieInitial_N
	End
	 
	Behavior = SiegeEngineContain ModuleTag_06
		ObjectStatusOfContained = UNSELECTABLE
		Slots					= 1
		DamagePercentToUnits	= 100%
		PassengerFilter			= NONE +CAN_RIDE_SIEGE_LADDER
		AllowAlliesInside		= Yes
		KillPassengersOnDeath	= Yes ; fling passenger out to die when siege ladder is done for
		AllowEnemiesInside		= No
		AllowNeutralInside		= No
		ExitDelay				= 500  ; half second
		NumberOfExitPaths		= 0 ; Defaults to 1.  Set 0 to not use ExitStart/ExitEnd, set higher than 1 to use ExitStart01-nn/ExitEnd01-nn
		GoAggressiveOnExit		= Yes ; AI Will tell people to set their mood to Aggressive on exiting
		ShowPips				= No
;		TransferSelection		= Yes	
		PassengerBonePrefix = PassengerBone:Passenger   KindOf:CAN_RIDE_SIEGE_LADDER         
	End
  
;  The bones in the model are:
;
;                    02 ------ 03
;                    |
;                    |
;                    |
;        00 ------ 01   
;       
;        where 01 and 02 are attached to the ladder.
;
;        The waypoints are connected:
;            0 -> 2 -> 3 -> 1
;        and
;            1 -> 5 -> 4 -> 0

;
;            bone        wp
;            00         0 (walk)
;            01         1 (walk), 5 (climb)
;            02         2 (climb), 4 (walk)
;            03         3 (walk)
;
;        The waypoints are connected:
;            0 -> 1 -> 2 -> 3
;        and
;            3 -> 4 -> 5 -> 0

	Behavior = DynamicPortalBehaviour DynamicPortal
		AllowKindOf		= CAN_USE_SIEGE_TOWER
		BonePrefix		= Ladder
		NumberOfBones	= 4
		WayPoint		= Index:0	Type:PreClimb; 0
		WayPoint		= Index:1	Type:PreClimb; 1
		WayPoint		= Index:2	Type:Climb	; 2
		WayPoint		= Index:3	Type:Climb; 3
		WayPoint		= Index:2	Type:Climb; 4
		WayPoint		= Index:1	Type:Climb	; 5
		Link			= From:0 Via:4 Via:5 To:3
		Link			= From:3 Via:1 Via:2 To:0
		AboveWall		= 3	; # of waypoint which must be above wall in order to be able to 'dock'
		TopAttackPos	= X:30 Y:0 Z:52
		TopAttackRadius = 30
	End
  
	Behavior = SiegeDeploySpecialPower ModuleTag_07
		SpecialPowerTemplate = SpecialAbilitySiegeDeploy
		LowerDelay = 1200
		RaiseDelay = 2000
		EvacuatePassengersOnDeploy = Yes
		SkipAdjustPosition = Yes ; have to skip the path find adjust or it this will not go to the right docking position
		InitiateSound = SiegeLadderVoiceAttack
		InitiateSound2 = OrcVoiceAttack2
	End

	Behavior = StopSpecialPower ModuleTag_08
		SpecialPowerTemplate = SpecialAbilityStop
		StopPowerTemplate = SpecialAbilitySiegeDeploy
	End

	Behavior = SquishCollide SquishCollideModuleTag
		;nothing
	End

	Behavior = FireWeaponWhenDeadBehavior FireDeadTag1
		ExemptStatus	= DEPLOYED
		DeathTypes		= ALL
		StartsActive	= Yes
		DelayTime		= 500
		DeathWeapon		= SiegeLadderDeath
		WeaponOffset	= X:-20 Y:0 Z:0	
	End	

	Behavior = FireWeaponWhenDeadBehavior FireDeadTag2
		RequiredStatus	= DEPLOYED
		DeathTypes		= ALL
		StartsActive	= Yes
		DelayTime		= 1500
		DeathWeapon		= SiegeLadderDeath
		WeaponOffset	= X:-20 Y:0 Z:0	
	End	
	 
	Geometry              = CYLINDER
	GeometryMajorRadius   = 20.0
	GeometryMinorRadius   = 20.0
	GeometryHeight        = 70.0
	GeometryIsSmall       = No
	Shadow                = SHADOW_VOLUME

End

;------------------------------------------------------------------------------
Object IsengardExplosiveMine ; BALANCE Mine
	; *** ART Parameters ***

	; This is required for garrisoned objects - please put in all objects.
	SelectPortrait    = UPIsenguard_ExplosiveMine
        ButtonImage		= BISiegeWorks_DemoTeam
	Draw = W3DScriptedModelDraw ModuleTag_01
	
		OkToChangeModelColor = Yes
	  	StaticModelLODMode = Yes	
	  
		DefaultModelConditionState
			Model = IUDT_SKN
			Skeleton = IUDT_SKL
		End

		ModelConditionState = PASSENGER
			Model = IU_Bomb_SKN
		End

		;-----------------
		IdleAnimationState
			Animation = IDLA
				AnimationName = IUDT_IDLA
				AnimationMode = ONCE
			End
		End
	 
		AnimationState = DYING DEATH_1
			Animation = BothDyingTogether
				AnimationName = IUDT_DIEC
				AnimationMode = ONCE
			End
			ParticleSysBone   = None MinePoof FollowBone:No
		End 
	    
		AnimationState = DYING DEATH_2
			Animation = FadeAwayOnLastFrameOfDrop
				AnimationName = IUDT_DRPA
				AnimationMode = MANUAL
			End
			Flags = START_FRAME_LAST
		End 
	    
	    AnimationState = DYING DEATH_3
			Animation = DyingByFire
				AnimationName = IUDT_DIEE
				AnimationMode = ONCE
			End
		End 
	    
	    
		AnimationState = FIRING_OR_PREATTACK_A
			Animation = SettingMineDown
				AnimationName = IUDT_DRPA
				AnimationMode = ONCE
				UseWeaponTiming = Yes
			End
		End

		AnimationState = FIRING_OR_PREATTACK_B
			Animation = SettingMineDown
				AnimationName = IUDT_DRPA
				AnimationMode = ONCE
				UseWeaponTiming = Yes
			End
		End

		;;; Moving Animations ;;;
		AnimationState = MOVING ACCELERATE
			Animation = Moving
				AnimationName = IUDT_RUNA
				AnimationMode = LOOP
				AnimationBlendTime= 15
			End
		End

		AnimationState = MOVING TURN_LEFT_HIGH_SPEED
			Animation = Moving
				AnimationName = IUDT_RUNA
				AnimationMode = LOOP
				AnimationBlendTime= 5
			End
		End

		AnimationState = MOVING TURN_RIGHT_HIGH_SPEED
			Animation = Moving
				AnimationName = IUDT_RUNA
				AnimationMode = LOOP
				AnimationBlendTime= 5
			End
		End

		AnimationState				=	TURN_LEFT 
			Animation				=	TurnLeft
				AnimationName		=	IUDT_TRNL
				AnimationMode		=	LOOP
				AnimationSpeedFactorRange = 1.0 1.0		;Hack... we need a proper TurnAngle entry
				AnimationBlendTime= 10
			End
		End
		
		AnimationState				=	TURN_RIGHT 
			Animation				=	TurnRight
				AnimationName		=	IUDT_TRNR
				AnimationMode		=	LOOP
				AnimationSpeedFactorRange = 1.0 1.0		;Hack... we need a proper TurnAngle entry
				AnimationBlendTime= 10
			End
		End

		AnimationState = MOVING
			Animation = Moving
				AnimationName = IUDT_RUNA
				AnimationMode = LOOP
				AnimationBlendTime= 5
			End
		End
		
	    AnimationState  = JUST_BUILT
			Animation = Being_Built
				AnimationName		= IUDT_BLDA
				AnimationMode		= ONCE
				AnimationBlendTime	= 0		; Must be zero.
			End
		End			
	End

	; ***DESIGN parameters ***
	Side = Isengard
	IsTrainable		= No
	EditorSorting = UNIT
	ThreatLevel = 1.0
	ThingClass = HORDE_UNIT
	CommandPoints = 4
	BuildCost = ISENGARD_EXPLOSIVEMINE_BUILDCOST		
	BuildTime = ISENGARD_EXPLOSIVEMINE_BUILDTIME	
	TransportSlotCount = 1
	
	WeaponSet
		Conditions = None 
		Weapon		= PRIMARY IsengardExplosiveMineDroppingWeapon
		PreferredAgainst	= PRIMARY STRUCTURE
		AutoChooseSources	= PRIMARY FROM_PLAYER FROM_SCRIPT

		Weapon		= SECONDARY	IsengardExplosiveMineDroppingWeaponPosition
		AutoChooseSources	= SECONDARY FROM_PLAYER FROM_SCRIPT
	End

	ArmorSet
		Conditions      = None
		Armor           = ExplosiveMineArmor
		DamageFX        = NormalDamageFX
	End
 
  	; This is required so that the build phase lasts as long as the anim.
	BuildFadeInOnCreateTime = 2.0
	
	ShroudClearingRange = SHROUD_CLEAR_STANDARD
	VisionRange			= VISION_STANDARD_SHORT

	BountyValue = ISENGARD_EXPLOSIVEMINE_BOUNTY_VALUE
	DisplayName = OBJECT:IsengardExplosiveMine
	CrushableLevel = 1  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
	CrusherLevel = 0 ;What can I crush?: 0 = small animals, 1 = infantry, 2 = trees, 3 = vehicles
	ImmuneToShockwave = Yes
	CommandSet = IsengardExplosiveMineCommandSet
 

	; ************** AUDIO Parameters ***************;
	
	VoiceAttack					= ExplosiveMineVoiceAttack
	VoiceAttack2				= OrcVoiceAttack2
	VoiceCreated				= CampOrcCreateExplosiveMine
	VoiceFullyCreated 			= CampOrcCreateExplosiveMine
	VoiceMove					= ExplosiveMineVoiceMove
	VoiceMove2					= OrcVoiceMove2
	VoiceMoveWhileAttacking			= ExplosiveMineVoiceDisengage
	VoiceMoveToCamp				= ExplosiveMineVoiceMoveCamp
	VoicePriority				= 25
	VoiceSelectBattle				= ExplosiveMineVoiceSelectBattle
	VoiceSelect					= ExplosiveMineVoiceSelect
	VoiceSelect2				= ExplosiveMineVoiceSelect2
	
	VoiceEnterStateAttack			= ExplosiveMineVoiceEnterStateAttack
	VoiceEnterStateMove			= ExplosiveMineVoiceEnterStateMove
	VoiceEnterStateMoveWhileAttacking	= ExplosiveMineVoiceEnterStateDisengage
	VoiceEnterStateMoveToCamp		= ExplosiveMineVoiceEnterStateMoveCamp
	VoiceGuard					= ExplosiveMineVoiceMove
	  
	EvaEventDamagedOwner			= UnitUnderAttack 				;Eva event to trigger when unit is damaged

	;UnitSpecificSounds
	;	VoiceSecondaryWeaponMode	= ExplosiveMineVoiceDeploy			;this didn't work
	;End

	Behavior = LargeGroupAudioUpdate ModuleTag_LGAU						;Tie into LargeGroupAudio system
		Key = UrukHai_ExplosiveMine
	End

	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		MaxUpdateRangeCap = 800
		AnimationSound = Sound:ExplosiveMineDrop			Animation:IUDT_SKL.IUDT_DRPA	Frames: 40
		AnimationSound = Sound:ExplosiveMineEffort1		Animation:IUDT_SKL.IUDT_DRPA	Frames: 0
		AnimationSound = Sound:ExplosiveMineEffort2		Animation:IUDT_SKL.IUDT_DRPA	Frames: 13
		AnimationSound = Sound:FootstepDirtA			Animation:IUDT_SKL.IUDT_RUNA	Frames: 2 8 12 18
		AnimationSound = Sound:FootstepDirtA			Animation:IUDT_SKL.IUDT_BLDA	Frames: 2 8 12 18 22 28 32 37 42 45 52 54 60 61 
		AnimationSound = Sound:FootstepDirtA			Animation:IUDT_SKL.IUDT_TRNL	Frames: 10 13 23 30 38 43 53 60
		AnimationSound = Sound:FootstepDirtA			Animation:IUDT_SKL.IUDT_TRNR	Frames: 10 13 23 30 38 43 53 60
		AnimationSound = Sound:BodyFallOrc				Animation:IUDT_SKL.IUDT_DIEC	Frames: 25 58
	End


	; *** ENGINEERING Parameters ***

	RadarPriority = UNIT
	KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE CAN_USE_SIEGE_TOWER MINE PATH_THROUGH_INFANTRY 
	 
	Body = ActiveBody ModuleTag_02
		MaxHealth         = ISENGARD_EXPLOSIVEMINE_HEALTH				;BALANCE Mine Health
		MaxHealthDamaged  = ISENGARD_EXPLOSIVEMINE_HEALTH_DAMAGED		
		;RecoveryTime      = ISENGARD_EXPLOSIVEMINE_HEALTH_RECOVERY_TIME	
		DodgePercent      = 33
	End
	 
	Behavior = AIUpdateInterface ModuleTag_03
		AutoAcquireEnemiesWhenIdle = No ; We don't want to mine unit to deploy by himself
		SpecialContactPoints	   = Bomb
	End

	LocomotorSet
		Locomotor     = ExplosiveMineLocomotor
		Condition     = SET_NORMAL
		Speed         = 33 ;12
	End

	Behavior = PhysicsBehavior ModuleTag_04
		GravityMult = 1.0
	End
 
	Behavior = SlowDeathBehavior ModuleTag_ExplosiveDeath
		DeathTypes = NONE +BURNED 
		DeathFlags = DEATH_3
		SinkDelay = 3000
		SinkRate = 1.40     ; in Dist/Sec
		DestructionDelay = 10000
		Sound = INITIAL UrukVoiceDie
		Weapon = INITIAL IsengardExplosiveMineExplosionWeapon
	End

	Behavior = SlowDeathBehavior ModuleTag_FizzleDeath
		DeathTypes = ALL -BURNED -FADED
		DeathFlags = DEATH_1
		SinkDelay = 3000
		SinkRate = 1.40     ; in Dist/Sec
		DestructionDelay = 10000
		Sound = INITIAL UrukVoiceDie
	End
 
	Behavior = SlowDeathBehavior ModuleTag_DeployedDeath
		DeathTypes = NONE +FADED
		DeathFlags = DEATH_2
		FadeDelay = 0
		FadeTime = 3000
		DestructionDelay = 3000	; Hmm...seems like you become totally transparent at about 25-30%, so kill earlier than fade time
		Sound = INITIAL UrukVoiceDie	;ExplosiveMineVoiceDeploy
	End
	
	Behavior = SquishCollide ModuleTag_06
		;nothing
	End
	 
	Geometry = CYLINDER
	GeometryMajorRadius = 8.0
	GeometryMinorRadius = 8.0
	GeometryHeight = 19.2
	GeometryIsSmall = Yes
	Shadow = SHADOW_DECAL
	ShadowSizeX = 11;
	ShadowSizeY = 11;
	ShadowTexture = ShadowI;
End

;------------------------------------------------------------------------------
; When an ExplosiveMine attacks, it transforms in to this.  This lets Design have total script control of 
; these guys, and it gets all of the desired behaviors like immobilization for free as side effects.
Object IsengardDeployedExplosiveMine ; BALANCE Mine
	; *** ART Parameters ***

	; This is required for garrisoned objects - please put in all objects.
	SelectPortrait    = UPIsenguard_ExplosiveMine
  
	Draw = W3DScriptedModelDraw ModuleTag_01
		OkToChangeModelColor = Yes
		DefaultModelConditionState
			Model = IU_Bomb_SKN
		End

		;-----------------
		IdleAnimationState
			Animation = IDLA
				AnimationName = IU_Bomb_SKN.IU_Bomb_SKN
				AnimationMode = MANUAL
			End
		End
	 
		;-----------------
		AnimationState = DYING
			Animation = BothDyingTogether
				AnimationName = IU_Bomb_SKN.IU_Bomb_SKN
				AnimationMode = ONCE
			End
		End 
	End

	; ***DESIGN parameters ***
	Side = Isengard
	EditorSorting = UNIT
	ThreatLevel = 1.0
	ThingClass = HORDE_UNIT
	CommandPoints = 1

	TransportSlotCount = 1
	ArmorSet
		Conditions      = None
		Armor           = DroppedMineArmor
		DamageFX        = NormalDamageFX
	End
	VisionRange = 120.0
	DisplayName = OBJECT:IsengardExplosiveMine
	CrushableLevel = 0  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
	CommandSet = EmptyCommandSet
 
	; ************** AUDIO Parameters ***************;

	;SoundImpact = HumanVoiceDie
  
	EvaEventDamagedOwner = UnitUnderAttack 		;Eva event to trigger when unit is damaged


	; *** ENGINEERING Parameters ***
	RadarPriority = UNIT
	KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY SCORE MINE IMMOBILE STRUCTURE NOT_AUTOACQUIRABLE DEPLOYED_MINE
	 
	Body = ActiveBody ModuleTag_02
		MaxHealth         = 150                  ;BALANCE Mine Health
		MaxHealthDamaged  = 75		
	End
	 
	Behavior = PhysicsBehavior ModuleTag_04
		GravityMult = 1.0
	End
 
	Behavior = SlowDeathBehavior ModuleTag_ExplosiveDeath
		DeathTypes = NONE +BURNED 
		DeathFlags = DEATH_1
		DestructionDelay = 1
		Weapon = FINAL IsengardExplosiveMineExplosionWeapon
		Sound = INITIAL ImpactHorse
	End

	Behavior = SlowDeathBehavior ModuleTag_FizzleDeath
		DeathTypes = ALL -BURNED 
		DeathFlags = DEATH_1
		SinkDelay = 1
		SinkRate = 3.0     ; in Dist/Sec
		DestructionDelay = 5000
		Sound = INITIAL ImpactHorse
	End
 
	Behavior = SquishCollide ModuleTag_06
		;nothing
	End
	 
	Geometry = BOX
	GeometryMinorRadius = 12.0
	GeometryMajorRadius = 12.0
	GeometryHeight = 8.0
	GeometryIsSmall = No
	Shadow = SHADOW_DECAL
	ShadowSizeX = 11;
	ShadowSizeY = 11;
	ShadowTexture = ShadowI;
End

;------------------------------------------------------------------------------
Object IsengardExplosivePileOfLeaves ; BALANCE Mine (concealed)
	; *** ART Parameters ***

	; This is required for garrisoned objects - please put in all objects.
	SelectPortrait    = UPIsenguard_ExplosiveMine
  
	Draw = W3DScriptedModelDraw ModuleTag_01
		DefaultModelConditionState
			Model = MUPileDebris2
		End
	End

	; ***DESIGN parameters ***
	Side = Isengard
	EditorSorting = UNIT
	ThreatLevel = 1.0
	CommandPoints = 1

	TransportSlotCount = 1
	ArmorSet
		Conditions      = None
		Armor           = SoldierArmor
		DamageFX        = NormalDamageFX
	End
	VisionRange = 40.0
	DisplayName = OBJECT:IsengardExplosiveMine
	CrushableLevel = 0  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
	 
	; *** AUDIO Parameters ***;

	; *** ENGINEERING Parameters ***
	RadarPriority = UNIT
	KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY MINE

	;Total hack to get unit to work. STRUCTURE units still have problems getting targeted.	
	Behavior = AIUpdateInterface ModuleTag_03
	End
	Behavior = PhysicsBehavior ModuleTag_Physics
		GravityMult = 1.0
	End
	LocomotorSet
		Locomotor     = HumanLocomotor
		Condition     = SET_NORMAL
		Speed         = 0
	End
	;End hack
	 
	Body = ActiveBody ModuleTag_02
		MaxHealth         = 150                  ;BALANCE Mine Health
		MaxHealthDamaged  = 75
		;RecoveryTime      = 5000
		UseDefaultDamageSettings = No			; Don't add damage states that I don't explicitly ask for.
		EnteringDamagedTransitionTime = 6000	; I am paralyzed for this long when I become damaged, because I have a really cool transition anim to play
	End
	 
	Behavior = SlowDeathBehavior ModuleTag_ExplosiveDeath
		DeathTypes = NONE +BURNED 
		DestructionDelay = 1
		Weapon = FINAL IsengardBurningPileofLeavesWeapon
		;Sound = INITIAL UrukVoiceDie
	End
	 
	Behavior = SlowDeathBehavior ModuleTag_FizzleDeath
		DeathTypes = ALL -BURNED
		SinkDelay = 3000
		SinkRate = 0.40     ; in Dist/Sec
		DestructionDelay = 8000
		;Sound = INITIAL UrukVoiceDie
	End
	 
	Geometry = CYLINDER
	GeometryMajorRadius = 18.0
	GeometryMinorRadius = 18.0
	GeometryHeight = 19.2
	GeometryIsSmall = Yes
	Shadow = SHADOW_DECAL
	ShadowSizeX = 11;
	ShadowSizeY = 11;
	ShadowTexture = ShadowI;
End

;------------------------------------------------------------------------------
; aka Berzerker, Berserker, BeserkerIsengard
Object IsengardBeserker
	; *** ART Parameters ***

	; This is required for garrisoned objects - please put in all objects.
	ButtonImage				= BIBerserker
	SelectPortrait			= UPIsenguard_Beserker


	  
	Draw = W3DScriptedModelDraw ModuleTag_01

	  OkToChangeModelColor = Yes
	  	StaticModelLODMode = Yes	
		
		DefaultModelConditionState
			Model = IUBerserkr_SKN
			Skeleton = IUUrukahi_SKL
		End

;; TAKEN OUT BY DESIGN... DON"T PUT THIS BACK. ;; 10/2004
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;		ModelConditionState = DAMAGED
;			Model = IUBerserkr_SKN
;			Skeleton = IUUrukahi_SKL
;			FXEvent = Name:FX_BerserkerDamaged
;		End
;		
;		ModelConditionState = REALLYDAMAGED
;			Model = IUBerserkr_SKN
;			Skeleton = IUUrukahi_SKL
;			FXEvent = Name:FX_BerserkerReallyDamaged
;		End
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
	
		IdleAnimationState
			Animation = IDLA
				AnimationName = IUUrukahi_IDLA
				AnimationMode = ONCE
				AnimationBlendTime = 10
			End
			StateName = Idle
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Jump"		then CurDrawableSetTransitionAnimState("Trans_Jump_To_Ready") return end
				if Prev == "selected"	then CurDrawableSetTransitionAnimState("Trans_Selected_To_Idle") return end
			EndScript
		End
		
		AnimationState        = THROWN_PROJECTILE
			Animation           = FLYA
				AnimationName     = IUUrukahi_FLYA
				AnimationMode     = LOOP
			End
		End
		
		AnimationState						= PASSENGER FREEFALL
			Animation						= FLLA
				AnimationName				= IUUrukahi_FLLA
				AnimationMode				= LOOP
			End
		End

		AnimationState						= FREEFALL
			Animation						= Falling
				AnimationName				= IUUrukahi_FLYA
				AnimationMode				= LOOP
				AnimationBlendTime			= 10
				AnimationSpeedFactorRange	= 0.5	0.5
			End
		End
		
		AnimationState						= SPLATTED
			Animation						= LNDA
				AnimationName				= IUUrukahi_LNDA
				AnimationMode				= ONCE
			End
		End

		; -- Stunned Anims		
		AnimationState        = STUNNED_FLAILING
			Animation           = StunFlail
				AnimationName     = IUUrukahi_FLYA
				AnimationMode      = LOOP
			End
			Flags               = RANDOMSTART
		End

		; -- Dying Anims		
		AnimationState = DYING SPLATTED
			Animation = Dying
				AnimationName = IUUrukahi_LNDA
				AnimationMode = ONCE
			End
		End 

		AnimationState = DYING
			Animation = Dying
				AnimationName = IUUrukahi_DIEA
				AnimationMode = ONCE
			End
		End 
		
		AnimationState        = STUNNED_STANDING_UP
			Animation           = GTPA
				AnimationName     = IUUrukahi_GTPA
				AnimationMode     = ONCE
				AnimationSpeedFactorRange = 1.5 1.5
			End
		End
		
		AnimationState        = STUNNED
			Animation           = LNDA
				AnimationName     = IUUrukahi_LNDA
				AnimationMode     = ONCE
			End
		End

		; Jumping off the siege ladder	    
		AnimationState = UNPACKING
			Animation = Unpacking_Passenger
				AnimationName = IUBzrkLadr_PLTA
				AnimationMode = ONCE
			End
			StateName = Jump
		End
		
		; -- ladder climbing animations
		AnimationState = MOVING CLIMBING BACKING_UP WEAPONSET_TOGGLE_1
			Animation = Climbing_Down
				AnimationName = IUUrukahi_CLMA
				AnimationMode = LOOP_BACKWARDS
				AnimationSpeedFactorRange = 2.0 2.0
			End
			ParticleSysBone           = FLAME01 OrcBerserkerFlare FollowBone:Yes
            ParticleSysBone           = FLAME01 OrcBerserkerSparks FollowBone:Yes
			ParticleSysBone           = FLAME01 OrcBerserkerSmoke FollowBone:Yes
		End		
		
		AnimationState = MOVING CLIMBING BACKING_UP
			Animation = Climbing_Down
				AnimationName = IUUrukahi_CLMA
				AnimationMode = LOOP_BACKWARDS
				AnimationSpeedFactorRange = 2.0 2.0
			End
		End

		AnimationState = MOVING WEAPONSET_TOGGLE_1 BACKING_UP
			Animation = MovingTorch
				AnimationName = IUUrukahi_BAKA; 
				AnimationMode = LOOP
			End
			Flags = RANDOMSTART
			ParticleSysBone = None InfantryDustTrails
			ParticleSysBone           = FLAME01 OrcBerserkerFlare FollowBone:Yes
            ParticleSysBone           = FLAME01 OrcBerserkerSparks FollowBone:Yes
			ParticleSysBone           = FLAME01 OrcBerserkerSmoke FollowBone:Yes
		End

		AnimationState = MOVING EMOTION_TERROR
			Animation = TERRORIZED
				AnimationName = IUUrukahi_RUNC
				;AnimationMode = LOOP_BACKWARDS
				AnimationMode = LOOP
			End
			Flags = RANDOMSTART
			ParticleSysBone = None InfantryDustTrails
		End		
			    
		AnimationState = MOVING BACKING_UP
			Animation = BackingUp
				AnimationName = IUUrukahi_BAKA
				AnimationMode = LOOP
			End
			Flags = RANDOMSTART
		End

		AnimationState = MOVING CLIMBING WEAPONSET_TOGGLE_1
			Animation = Climbing_Up
				AnimationName = IUUrukahi_CLMA
				AnimationMode = LOOP
				AnimationSpeedFactorRange = 2.0 2.0
			End
			ParticleSysBone           = FLAME01 OrcBerserkerFlare FollowBone:Yes
            ParticleSysBone           = FLAME01 OrcBerserkerSparks FollowBone:Yes
			ParticleSysBone           = FLAME01 OrcBerserkerSmoke FollowBone:Yes
		End

		AnimationState = MOVING CLIMBING
			Animation = Climbing_Up
				AnimationName = IUUrukahi_CLMA
				AnimationMode = LOOP
				AnimationSpeedFactorRange = 2.0 2.0
			End
		End
		
		; -- Moving on the siege ladder
		AnimationState = TRANSPORT_MOVING PASSENGER WEAPONSET_TOGGLE_1
			Animation = Moving
				AnimationName = IUBzrkLadr_RUNA
				AnimationMode = LOOP
			End
			ParticleSysBone           = FLAME01 OrcBerserkerFlare FollowBone:Yes
            ParticleSysBone           = FLAME01 OrcBerserkerSparks FollowBone:Yes
			ParticleSysBone           = FLAME01 OrcBerserkerSmoke FollowBone:Yes
			Flags = RANDOMSTART
			ParticleSysBone = None InfantryDustTrails
		End
		
		AnimationState = TRANSPORT_MOVING PASSENGER
			Animation = Moving
				AnimationName = IUBzrkLadr_RUNA
				AnimationMode = LOOP
			End
			Flags = RANDOMSTART
			ParticleSysBone = None InfantryDustTrails
		End

		; -- Passenger on siege ladder
		AnimationState = PASSENGER WEAPONSET_TOGGLE_1
			Animation = IdlePassenger
				AnimationName = IUBzrkLadr_IDLA
				AnimationMode = LOOP
			End
			ParticleSysBone           = FLAME01 OrcBerserkerFlare FollowBone:Yes
            ParticleSysBone           = FLAME01 OrcBerserkerSparks FollowBone:Yes
			ParticleSysBone           = FLAME01 OrcBerserkerSmoke FollowBone:Yes
			Flags = RANDOMSTART

			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Idle"	then CurDrawableSetTransitionAnimState("TRANS_Torch_Passenger") return end
				if Prev == "selected" then CurDrawableSetTransitionAnimState("TRANS_Torch_Passenger") return end
				if Prev == "selected_torch" then CurDrawableSetTransitionAnimState("TRANS_Torch_Passenger") return end
				if Prev == "Emotion" then CurDrawableSetTransitionAnimState("TRANS_Torch_Passenger") return end
				if Prev == "Moving" then CurDrawableSetTransitionAnimState("TRANS_Torch_Passenger") return end
				if Prev == "MovingTorch" then CurDrawableSetTransitionAnimState("TRANS_Torch_Passenger") return end
				if Prev == "nonTorchState" then CurDrawableSetTransitionAnimState("TRANS_Torch_Passenger") return end
			EndScript
		End

		AnimationState = PASSENGER
			Animation = IdlePassenger
				AnimationName = IUBzrkLadr_IDLA
				AnimationMode = LOOP
			End

			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Idle"	then CurDrawableSetTransitionAnimState("TRANS_To_Passenger") return end
				if Prev == "selected" then CurDrawableSetTransitionAnimState("TRANS_To_Passenger") return end
				if Prev == "Emotion" then CurDrawableSetTransitionAnimState("TRANS_To_Passenger") return end
				if Prev == "Moving" then CurDrawableSetTransitionAnimState("TRANS_To_Passenger") return end
				if Prev == "MovingTorch" then CurDrawableSetTransitionAnimState("TRANS_To_Passenger") return end
				if Prev == "nonTorchState" then CurDrawableSetTransitionAnimState("TRANS_To_Passenger") return end
			EndScript
		End
		
		; -- Attacking Animations
		AnimationState        = MOVING FIRING_OR_PREATTACK_A
			ShareAnimation		= Yes
			Animation           = RunAndFire
				AnimationName       = IUUrukAhi_ATRA
				AnimationMode       = LOOP
			End
			Flags               = RANDOMSTART  
		End
		

		; Moving with torch
		AnimationState = MOVING WEAPONSET_TOGGLE_1 REALLYDAMAGED
			StateName	= Moving
			Animation = MovingTorch
				AnimationName = IUBzrkr_RUNB; 
				AnimationMode = LOOP
				AnimationSpeedFactorRange = 1.5 1.5
			End
			Flags = RANDOMSTART
			ParticleSysBone = None InfantryDustTrails
			ParticleSysBone           = FLAME01 OrcBerserkerFlare FollowBone:Yes
            ParticleSysBone           = FLAME01 OrcBerserkerSparks FollowBone:Yes
			ParticleSysBone           = FLAME01 OrcBerserkerSmoke FollowBone:Yes
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Jump"	then CurDrawableSetTransitionAnimState("Trans_Jump_To_Ready") return end
			EndScript
		End

		AnimationState = MOVING REALLYDAMAGED
			StateName	= Moving
			Animation = Moving
				AnimationName = IUUrukahi_RUNA ;IUBzrkr_RUNB; 
				AnimationMode = LOOP
				AnimationSpeedFactorRange = 1.5 1.5
			End
			Flags = RANDOMSTART
			ParticleSysBone = None InfantryDustTrails
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Jump"	then CurDrawableSetTransitionAnimState("Trans_Jump_To_Ready") return end
			EndScript
		End

		AnimationState = MOVING WEAPONSET_TOGGLE_1 DAMAGED
			StateName	= Moving
			Animation = MovingTorch
				AnimationName = IUBzrkr_RUNB; 
				AnimationMode = LOOP
				AnimationSpeedFactorRange = 1.1 1.1
			End
			Flags = RANDOMSTART
			ParticleSysBone = None InfantryDustTrails
			ParticleSysBone           = FLAME01 OrcBerserkerFlare FollowBone:Yes
            ParticleSysBone           = FLAME01 OrcBerserkerSparks FollowBone:Yes
			ParticleSysBone           = FLAME01 OrcBerserkerSmoke FollowBone:Yes
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Jump"	then CurDrawableSetTransitionAnimState("Trans_Jump_To_Ready") return end
			EndScript
		End

		AnimationState = MOVING DAMAGED
			StateName	= Moving
			Animation = Moving
				AnimationName = IUUrukahi_RUNA ;IUBzrkr_RUNB; 
				AnimationMode = LOOP
				AnimationSpeedFactorRange = 1.1 1.1
			End
			Flags = RANDOMSTART
			ParticleSysBone = None InfantryDustTrails
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Jump"	then CurDrawableSetTransitionAnimState("Trans_Jump_To_Ready") return end
			EndScript
		End

		AnimationState = MOVING WEAPONSET_TOGGLE_1
			StateName	= Moving
			Animation = MovingTorch
				AnimationName = IUBzrkr_RUNB
				AnimationMode = LOOP
			End
			Flags = RANDOMSTART
			ParticleSysBone = None InfantryDustTrails
			ParticleSysBone           = FLAME01 OrcBerserkerFlare FollowBone:Yes
        	ParticleSysBone           = FLAME01 OrcBerserkerSparks FollowBone:Yes
			ParticleSysBone           = FLAME01 OrcBerserkerSmoke FollowBone:Yes
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Jump"	then CurDrawableSetTransitionAnimState("Trans_Jump_To_Ready") return end
			EndScript
		End

		AnimationState = MOVING
			StateName	= Moving
			Animation = Moving
				AnimationName = IUUrukahi_RUNA ;IUBzrkr_RUNB; 
				AnimationMode = LOOP
			End
			Flags = RANDOMSTART
			ParticleSysBone = None InfantryDustTrails
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Jump"	then CurDrawableSetTransitionAnimState("Trans_Jump_To_Ready") return end
			EndScript
		End

		; -- Toggling the torch on		
		AnimationState = WEAPON_TOGGLING
			Animation			= Salute
				AnimationName	= IUBZRKR_LITA
				AnimationMode	= ONCE
			End
			ParticleSysBone           = FLAME01 OrcBerserkerFlare99 FollowBone:Yes
			ParticleSysBone           = FLAME01 OrcBerserkerSparks99 FollowBone:Yes
			ParticleSysBone           = FLAME01 OrcBerserkerSmoke99 FollowBone:Yes
		End
		
		AnimationState = FIRING_OR_PREATTACK_A WEAPONSET_TOGGLE_1
			StateName	= Attacking
 			Animation = ATKA
				AnimationName = IUUrukAhi_ATKC
				AnimationMode = ONCE
				UseWeaponTiming	= Yes
			End
			ParticleSysBone           = FLAME01 OrcBerserkerFlare FollowBone:Yes
            ParticleSysBone           = FLAME01 OrcBerserkerSparks FollowBone:Yes
			ParticleSysBone           = FLAME01 OrcBerserkerSmoke FollowBone:Yes
		End
		

		AnimationState = FIRING_OR_PREATTACK_b WEAPONSET_TOGGLE_1
			StateName	= Attacking
 			Animation = ATKA
				AnimationName = IUBzrkr_LITB
				AnimationMode = ONCE
				UseWeaponTiming	= Yes
			End
			ParticleSysBone           = FLAME01 OrcBerserkerFlare FollowBone:Yes
            ParticleSysBone           = FLAME01 OrcBerserkerSparks FollowBone:Yes
			ParticleSysBone           = FLAME01 OrcBerserkerSmoke FollowBone:Yes
		End
		
		AnimationState = FIRING_OR_PREATTACK_A
			StateName = nonTorchState
 			Animation = ATKA
				AnimationName = IUUrukAhi_ATKC
				AnimationMode = ONCE
				UseWeaponTiming	= Yes
			End
		End
			
		TransitionState = Trans_Jump_To_Ready
			Animation = Transition
				AnimationName = IUBzrkLadr_PLTB
				AnimationMode = ONCE
				AnimationBlendTime = 0
			End
		End

		TransitionState = TRANS_Torch_Passenger
			Animation = Transition_to_passenger_with_torch
				AnimationName = IUBzrkLadr_CLMB
				AnimationMode = ONCE
				AnimationBlendTime = 0
			End
			ParticleSysBone           = FLAME01 OrcBerserkerFlare FollowBone:Yes
           	ParticleSysBone           = FLAME01 OrcBerserkerSparks FollowBone:Yes
			ParticleSysBone           = FLAME01 OrcBerserkerSmoke FollowBone:Yes
		End

		TransitionState = TRANS_To_Passenger
			Animation = Transition_to_passenger
				AnimationName = IUBzrkLadr_CLMB
				AnimationMode = ONCE
				AnimationBlendTime = 0
			End
		End

	    AnimationState = WEAPONSET_TOGGLE_1
			StateName	= selected_torch
 			Animation = Selected(ATNA)
				AnimationName	= IUUrukahi_IDLA
				AnimationMode	= LOOP
			End
			ParticleSysBone           = FLAME01 OrcBerserkerFlare FollowBone:Yes
			ParticleSysBone           = FLAME01 OrcBerserkerSparks FollowBone:Yes
			ParticleSysBone           = FLAME01 OrcBerserkerSmoke FollowBone:Yes			
		End

		; This Selected is important, so make it go higher than emotions
		AnimationState = SELECTED
			StateName	= selected
			Flags		= RESTART_ANIM_WHEN_COMPLETE RANDOMSTART
 			Animation = Selected(ATNA)
				AnimationName	= IUUrukahi_ATNB
				AnimationMode	= LOOP
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Idle"	then CurDrawableSetTransitionAnimState("TRANS_Idle_to_Selected") return end
			EndScript
		End
	    			    
		;-emotions--		
		; Should be before selected (if uncontrollable..)      
		AnimationState							= EMOTION_AFRAID
			StateName = Emotion
			Animation							= FERA
				AnimationName					= IUUrukahi_FERA
				AnimationMode					= LOOP
			End
			Flags = RANDOMSTART
		End
		
		AnimationState							= EMOTION_TAUNTING
			StateName = Emotion
			Animation							= TNTA
				AnimationName					= IUUrukahi_TNTA
				AnimationMode					= LOOP
			End
		End
		AnimationState							= EMOTION_POINTING
			StateName = Emotion
			Animation							= Pointing1
				AnimationName					= IUUrukahi_PNTA
				AnimationMode					= LOOP
			End
		End
		AnimationState							= EMOTION_CELEBRATING
			StateName = Emotion
			Animation                           = CHRA
				AnimationName					= IUUrukahi_CHRA
				AnimationMode					= ONCE
			End
		End
	    
		AnimationState							= WAR_CHANT
			Animation                           = CHRA
				AnimationName					= IUUrukahi_CHRA
				AnimationMode					= LOOP
			End
		End

		TransitionState = Trans_Selected_To_Idle
			Animation
				AnimationName	= IUUrukahi_ATNC
				AnimationMode	= ONCE
			End
		End	
	    		
		TransitionState = TRANS_Idle_to_Selected
			Animation
				AnimationName	= IUUrukahi_ATNA
				AnimationMode	= ONCE
			End
		End		

End

	Draw = W3DScriptedModelDraw ModuleTag_Light	

		DefaultModelConditionState
			Model = None
		End
				
		ModelConditionState = WEAPONSET_TOGGLE_1
			Model = Invisible
            Shadow						= SHADOW_ADDITIVE_DECAL_DYNAMIC
            ShadowSizeX					= 60;
            ShadowSizeY					= 60;
            ShadowTexture				= EXFrodoStingGlow;
			ShadowOpacityStart			= 0
			ShadowOpacityFadeInTime		= 7000
			ShadowOpacityPeak			= 255
			ShadowOpacityFadeOutTime	= 200
			ShadowOpacityEnd			= 0
			ShadowOverrideLODVisibility = yes
		End
	End

	; ***DESIGN parameters ***
	Side = Isengard
	IsTrainable		= No
	EditorSorting = UNIT
	ThreatLevel = 1.0
	ThingClass = HORDE_UNIT
	CommandPoints = 4
	BuildCost = ISENGARD_BERSERKER_BUILDCOST			
	BuildTime = ISENGARD_BERSERKER_BUILDTIME
				
	TransportSlotCount = 1
	WeaponSet
		Conditions = None 
		Weapon = PRIMARY    IsengardBerserkerSword
	End
	
	WeaponSet
		Conditions = WEAPONSET_TOGGLE_1
		Weapon = PRIMARY	IsengardBerserkerSword
		Weapon = SECONDARY	IsengardBerserkerTorch
		OnlyAgainst = SECONDARY MINE
	End
	
	ArmorSet
		Conditions      = None
		Armor           = BerserkerArmor
		DamageFX        = NormalDamageFX
	End
  	
  	; This is required so that the build phase lasts as long as the anim.
	BuildFadeInOnCreateTime = 2.0
	
	VisionRange = ISENGARD_BERSERKER_VISION_RANGE  
	ShroudClearingRange = SHROUD_CLEAR_STANDARD

	BountyValue = ISENGARD_BERSERKER_BOUNTY_VALUE 		
	DisplayName = OBJECT:IsengardBeserker
	CrushableLevel = 0  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
	CrusherLevel = 0 ;What can I crush?: 0 = small animals, 1 = infantry, 2 = trees, 3 = vehicles
	CrushRevengeWeapon = BasicInfantryCrushRevenge

	CommandSet = IsengardBeserkerCommandSet
 

	; *** AUDIO Parameters ***;

	VoiceAttack				= BerserkerVoiceAttack
	VoiceAttack2			= OrcVoiceAttack2
	VoiceAttackCharge			= BerserkerVoiceAttackCharge
	;VoiceCombineWithHorde		= BerserkerVoiceMove
	VoiceCreated			= CampOrcCreateBerserker
	VoiceFullyCreated 		= CampOrcCreateBerserker
	VoiceMove				= BerserkerVoiceMove
	VoiceMove2				= OrcVoiceMove2
	VoicePriority			= 14
	VoiceSelect				= BerserkerVoiceSelect
	VoiceSelect2			= SiegeLadderVoiceSelect2
	VoiceSelectBattle 		= BerserkerVoiceSelectBattle
	VoiceGuard				= BerserkerVoiceMove
	
	VoiceEnterStateAttack		= BerserkerVoiceEnterStateAttack
	VoiceEnterStateAttackCharge	= BerserkerVoiceEnterStateAttackCharge	
	
	UnitSpecificSounds
		VoiceEnter			= BerserkerVoiceMove				;for entering SiegeLadder
	End

	EvaEventDamagedOwner		= UnitUnderAttack 				;Eva event to trigger when unit is damaged

	Behavior = LargeGroupAudioUpdate ModuleTag_LGAU					;Tie into LargeGroupAudio system
		Key = Orc_Infantry UrukHai_Berserker
	End

	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		MaxUpdateRangeCap = 800
		AnimationSound = Sound:SwordIntoGround		Animation:IUUrukahi_SKL.IUBZRKR_LITA	Frames:21
		AnimationSound = Sound:TorchIgniteFalseStart	Animation:IUUrukahi_SKL.IUBZRKR_LITA	Frames:77				;false start
		AnimationSound = Sound:TorchIgnite			Animation:IUUrukahi_SKL.IUBZRKR_LITA	Frames:98
		;AnimationSound = Sound:TorchSizzleLoop		Animation:IUUrukahi_SKL.IUBZRKR_LITA	Frames:99
		AnimationSound = Sound:BerserkerSnarl		Animation:IUUrukahi_SKL.IUBZRKR_LITA	Frames:103

		AnimationSound = Sound:BerserkerSuicideYell	Animation:IUUrukahi_SKL.IUBZRKR_LITB	Frames:0				;ignites mine
		AnimationSound = Sound:TorchIgnite			Animation:IUUrukahi_SKL.IUBZRKR_LITB	Frames:1				;ignites mine

		AnimationSound = Sound:FootstepDirtA		Animation:IUUrukahi_SKL.IUUrukahi_RUNA	Frames:10 22			;running ignited
		AnimationSound = Sound:FootstepDirtA		Animation:IUUrukahi_SKL.IUBzrkr_RUNB	Frames:10 22			;running ignited
		AnimationSound = Sound:FootstepDirtA		Animation:IUUrukahi_SKL.IUUrukahi_RUNC	Frames:5 13				;running terrified

		AnimationSound = Sound:FootstepDirtA		Animation:IUUrukahi_SKL.IUBzrkLadr_CLMB	Frames:14 20 43 45 79 84	;climb ladder
		AnimationSound = Sound:FootstepDirtA		Animation:IUUrukahi_SKL.IUUrukahi_CLMA	Frames:0 15
		AnimationSound = Sound:FootstepDirtA		Animation:IUUrukahi_SKL.IUBzrkLadr_PLTA	Frames:23				;jump off ladder

		AnimationSound = Sound:BodyFallOrc			Animation:IUUrukahi_SKL.IUUrukahi_LNDA	Frames:2
		AnimationSound = Sound:BodyFallOrc			Animation:IUUrukahi_SKL.IUUrukahi_DIEA	Frames:23
	End


	; *** ENGINEERING Parameters ***

	RadarPriority = UNIT
	KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY SCORE CAN_USE_SIEGE_TOWER CAN_RIDE_SIEGE_LADDER MINE_TRIGGER ARMY_SUMMARY GRAB_AND_DROP URUK
 
	Body = ActiveBody ModuleTag_02
		MaxHealth         = ISENGARD_BERSERKER_HEALTH				;BALANCE Uruk Hai Health
		MaxHealthDamaged  = ISENGARD_BERSERKER_HEALTH_DAMAGED		
		;RecoveryTime      = ISENGARD_BERSERKER_HEALTH_RECOVERY_TIME
    	DodgePercent      = 80%		

;; TAKEN OUT BY DESIGN... DON'T PUT THIS BACK...10/2004    	
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;    	DamagedAttributeModifier = BerserkerDamagedAttributeModifier
;   	ReallyDamagedAttributeModifier = BerserkerReallyDamagedAttributeModifier
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

	End
	 
	Behavior = AIUpdateInterface ModuleTag_03
		AutoAcquireEnemiesWhenIdle = Yes ATTACK_BUILDINGS
		MoodAttackCheckRate        = 500
		AILuaEventsList				=	InfantryFunctions
		AttackPriority				= 	AttackPriority_Infantry
	End
	
	Behavior = EmotionTrackerUpdate	Module_EmotionTracker
		TauntAndPointDistance		=	400		; max distance to taunted/pointed objet
		TauntAndPointUpdateDelay	=	1000	; how often scan (milliseconds)
		TauntAndPointExcluded		=	NONE
		AfraidOf					=	NONE +RohanTreeBerd +GondorGwaihir +RohanEntFir +RohanEntAsh +RohanEntBirch +MordorCaveTroll +MordorMountainTroll +MordorDrummerTroll +MordorFellBeast +MordorMumakil;Must be SCARY kindof as well.
		AlwaysAfraidOf				=	NONE +MordorBalrog +RohanOathbreaker ;+MordorWitchKing +MordorWitchKingOnFellBeast
		PointAt						=	NONE +GondorGwaihir 

		HeroScanDistance			=	150
		FearScanDistance			=	200

		AddEmotion	=	Terror_Base
		AddEmotion	=	Doom_Base
		AddEmotion	=	UncontrollableFear_Base_Evil
		AddEmotion	=	FearIdle_Base
		AddEmotion	=	FearBusy_Base
		AddEmotion	=	Point_Base
		AddEmotion	=	Taunt_Base	
		AddEmotion	=	CheerIdle_Base
		AddEmotion	=	CheerBusy_Base
		AddEmotion	=	HeroCheerIdle_Base
		AddEmotion	=	HeroCheerBusy_Base
		AddEmotion	=	Alert_Base
	End	
	
	LocomotorSet
		Locomotor     = BerserkerLocomotor ; HumanLocomotor
		Condition     = SET_NORMAL
		Speed         = NORMAL_EVIL_FAST_MEMBER_SPEED
	End

	LocomotorSet
		Locomotor     = BerserkerLocomotor 
		Condition     = SET_WANDER
		Speed         = 45 ;32
	End
	 
	Behavior = PhysicsBehavior ModuleTag_04
		GravityMult = 1.0
	End

	;;; TOGGLE TORCH WEAPON SPECAIL POWER ;;;
	Behavior = WeaponChangeSpecialPowerModule THING
		SpecialPowerTemplate = SpecialAbilityBerserkerLightTorch
		FlagsUsedForToggle		= WEAPONSET_TOGGLE_1
		ToggleOnSleepFrames = 25
		ToggleOffSleepFrames = 0
		ToggleOnAttributeModifier = BerserkerTorchLightingPenalty
	End
		 
	Behavior = SlowDeathBehavior ModuleTag_05
		DeathTypes = ALL 
		SinkDelay = 4000
		SinkRate = 1.0     ; in Dist/Sec
		DestructionDelay = 10000
		Sound = INITIAL UrukVoiceDie			;BerserkerVoiceDie
	End
	 
	Behavior = SquishCollide ModuleTag_06
		;nothing
	End
	 
	Geometry = CYLINDER
	GeometryMajorRadius = 8.0
	GeometryMinorRadius = 8.0
	GeometryHeight = 19.2
	GeometryIsSmall = Yes
	Shadow = SHADOW_DECAL
	ShadowSizeX = 19;
	ShadowSizeY = 19;
	ShadowTexture = ShadowI;
End

;------------------------------------------------------------------------------
; aka WildmanIsengard, Dunland
Object IsengardWildman
  ; *** ART Parameters ***

  ; This is required for garrisoned objects - please put in all objects.
  ButtonImage = BIUrukPit_Warriors
  
  Draw = W3DHordeModelDraw ModuleTag_01

	OkToChangeModelColor = Yes	  
	StaticModelLODMode = Yes
	; specify options for static LODs
	LodOptions	= LOW
		AllowMultipleModels		=	ALLOW_MULTIPLE_MODELS_LOW
		MaxRandomTextures		=	MAX_RANDOM_TEXTURES_LOW
		MaxRandomAnimations		=	MAX_RANDOM_ANIMATIONS_LOW
		MaxAnimFrameDelta		=	MAX_ANIM_FRAME_DELTA_LOW
	End
	
	LodOptions	= MEDIUM
		AllowMultipleModels		=	ALLOW_MULTIPLE_MODELS_MED
		MaxRandomTextures		=	MAX_RANDOM_TEXTURES_MED
		MaxRandomAnimations		=	MAX_RANDOM_ANIMATIONS_MED
		MaxAnimFrameDelta		=	MAX_ANIM_FRAME_DELTA_MED
	End
	
	LodOptions	= HIGH
		AllowMultipleModels		=	ALLOW_MULTIPLE_MODELS_HIGH
		MaxRandomTextures		=	MAX_RANDOM_TEXTURES_HIGH
		MaxRandomAnimations		=	MAX_RANDOM_ANIMATIONS_HIGH
		MaxAnimFrameDelta		=	MAX_ANIM_FRAME_DELTA_HIGH
	End
	
    DefaultModelConditionState
      Model = IUUrukahi_SKN
    End

		IdleAnimationState
			Animation = IDL
	      AnimationName = IUUrukahi_SKL.IUUrukahi_IDL
	      AnimationMode = ONCE
			End
			StateName = Idle
		End

	AnimationState = MOVING BACKING_UP
		Animation = BackingUp
			AnimationName = IUUrukahi_SKL.IUUrukahi_BAKA
			AnimationMode = LOOP
		End
		Flags = RANDOMSTART
	End
	
	AnimationState = MOVING EMOTION_TERROR
		Animation = Moving
			AnimationName = IUUrukahi_SKL.IUUrukahi_RUNC
			AnimationMode = LOOP
		End
		Flags = RANDOMSTART
		ParticleSysBone = None InfantryDustTrails
    End
	
    AnimationState = MOVING DAMAGED
			Animation = Moving
	      AnimationName = IUUrukahi_SKL.IUUrukahi_WLK
		    AnimationMode = LOOP
			End
			Flags = RANDOMSTART
			ParticleSysBone = None InfantryDustTrails
    End
 
    AnimationState = MOVING
			Animation = Moving
	      AnimationName = IUUrukahi_SKL.IUUrukahi_RUN
		    AnimationMode = LOOP
			End
			Flags = RANDOMSTART
			ParticleSysBone = None InfantryDustTrails
    End
    
	AnimationState							= EMOTION_UNCONTROLLABLY_AFRAID
		Animation							= FERA
			AnimationName					= IUUrukahi_SKL.IUUrukahi_FERA
			AnimationMode					= LOOP
		End
		Flags = RANDOMSTART
	End

    AnimationState = ATTACKING
			Animation = Attacking
	      AnimationName = IUUrukahi_SKL.IUUrukahi_ATA
		    AnimationMode = LOOP
			End
    End

    AnimationState = DYING
			Animation = Dying
	      AnimationName = IUUrukahi_SKL.IUUrukahi_DIEA
		    AnimationMode = ONCE
			End
    End
    
    AnimationState = WAR_CHANT
		Animation = Chant
			AnimationName = IUUrukahi_SKL.IUUrukahi_TNTA
			AnimationMode = LOOP
		End
	End

			
	;-emotions--
	
	AnimationState							= EMOTION_AFRAID
		Animation							= FERA
			AnimationName					= IUUrukahi_SKL.IUUrukahi_FERA
			AnimationMode					= LOOP
		End
		Flags = RANDOMSTART
	End
	AnimationState							= EMOTION_TAUNTING
		Animation							= TNTA
			AnimationName					= IUUrukahi_SKL.IUUrukahi_TNTA
			AnimationMode					= LOOP
		End
	End
	AnimationState							= EMOTION_POINTING
		Animation							= Pointing1
			AnimationName					= IUUrukahi_SKL.IUUrukahi_PNTA
			AnimationMode					= LOOP
		End
	End
	AnimationState							= EMOTION_CELEBRATING
		Animation                           = CHRA
			AnimationName					= IUUrukahi_SKL.IUUrukahi_CHRA
			AnimationMode					= ONCE
		End
	End
	
	AnimationState							= EMOTION_ALERT
		Animation							= ALERT
			AnimationName					= IUUrukahi_SKL.IUUrukahi_IDLA
			AnimationMode					= LOOP
		End
		Flags								= RESTART_ANIM_WHEN_COMPLETE RANDOMSTART
	End
    
    
  End

  ; ***DESIGN parameters ***
  Side = Isengard
  EditorSorting = UNIT
	ThreatLevel = 1.0
  ThingClass = HORDE_UNIT
  CommandPoints = 1

  TransportSlotCount = 1
  WeaponSet
    Conditions = None 
    Weapon = PRIMARY    IsengardBannerSword
    AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
  End
  ArmorSet
    Conditions      = None
    Armor           = NoArmor
    DamageFX        = NormalDamageFX
  End
  VisionRange = 120.0
  DisplayName = OBJECT:IsengardWildman
  CrushableLevel = 0  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CrusherLevel = 0 ;What can I crush?: 0 = small animals, 1 = infantry, 2 = trees, 3 = vehicles
 

  ; *** AUDIO Parameters ***;

	;VoiceSelect = NoSound
	;VoiceMove = NoSound
	;VoiceAttack = NoSound
	;VoiceFear = NoSound
	;VoiceGuard = NoSound
  
	;UnitSpecificSounds
	;  VoiceGarrison         = NoSound
	;  VoiceEnter            = NoSound
	;  VoiceEnterHostile     = NoSound
	;  VoiceGetHealed        = NoSound
	;End

	EvaEventDamagedOwner = UnitUnderAttack 		;Eva event to trigger when unit is damaged

	Behavior = LargeGroupAudioUpdate ModuleTag_LGAU	;Tie into LargeGroupAudio system
		Key = Orc_Infantry
	End


  ; *** ENGINEERING Parameters ***

  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE CAN_USE_SIEGE_TOWER ARMY_SUMMARY
 
  Body = ActiveBody ModuleTag_02
    MaxHealth         = 10                  ;BALANCE Uruk Hai Health
    MaxHealthDamaged  = 5
    ;RecoveryTime      = 5000
  End
 
  Behavior = AIUpdateInterface ModuleTag_03
    AutoAcquireEnemiesWhenIdle = Yes ATTACK_BUILDINGS
    MoodAttackCheckRate        = 500
  End

  LocomotorSet
    Locomotor     = HumanLocomotor
    Condition     = SET_NORMAL
    Speed         = NORMAL_EVIL_INFANTRY_MEMBER_SPEED
  End

  Behavior = PhysicsBehavior ModuleTag_04
    GravityMult = 1.0
  End
 
  Behavior = SlowDeathBehavior ModuleTag_05
    DeathTypes = ALL 
    SinkDelay = 3000
    SinkRate = 0.40     ; in Dist/Sec
    DestructionDelay = 8000
    ;Sound = INITIAL UrukVoiceDie
  End
 
  Behavior = SquishCollide ModuleTag_06
    ;nothing
  End

  Behavior = HordeMemberCollide ModuleTag_HMC
    ;nothing
  End 
 
  Geometry = CYLINDER
  GeometryMajorRadius = 8.0
  GeometryMinorRadius = 8.0
  GeometryHeight = 19.2
  GeometryIsSmall = Yes
  Shadow = SHADOW_DECAL
  ShadowSizeX = 19;
  ShadowSizeY = 19;
  ShadowTexture = ShadowI;
End

;------------------------------------------------------------------------------
;Isengard Archer Isengard Uruk Crossbow UrukHaiCrossbowman
Object IsengardUrukCrossbow
	; *** ART Parameters ***

	; This is required for garrisoned objects - please put in all objects.
	ButtonImage = BIUrukPit_Crossbowmen
	SelectPortrait         = UPIsenguard_UrukCrossbow

	UpgradeCameo1           = Upgrade_FireArrows

	Draw = W3DHordeModelDraw ModuleTag_01

		OkToChangeModelColor = Yes
	  
		StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD
	
		; specify options for static LODs
		LodOptions	= LOW
			AllowMultipleModels		=	ALLOW_MULTIPLE_MODELS_LOW
			MaxRandomTextures		=	MAX_RANDOM_TEXTURES_LOW
			MaxRandomAnimations		=	MAX_RANDOM_ANIMATIONS_LOW
			MaxAnimFrameDelta		=	MAX_ANIM_FRAME_DELTA_LOW
		End
		
		LodOptions	= MEDIUM
			AllowMultipleModels		=	ALLOW_MULTIPLE_MODELS_MED
			MaxRandomTextures		=	MAX_RANDOM_TEXTURES_MED
			MaxRandomAnimations		=	MAX_RANDOM_ANIMATIONS_MED
			MaxAnimFrameDelta		=	MAX_ANIM_FRAME_DELTA_MED
		End
		
		LodOptions	= HIGH
			AllowMultipleModels		=	ALLOW_MULTIPLE_MODELS_HIGH
			MaxRandomTextures		=	MAX_RANDOM_TEXTURES_HIGH
			MaxRandomAnimations		=	MAX_RANDOM_ANIMATIONS_HIGH
			MaxAnimFrameDelta		=	MAX_ANIM_FRAME_DELTA_HIGH
		End
	
		; --------- With Bow ------------
		
		DefaultModelConditionState
			Model = IUCrsbowmn_SKN
			Skeleton = IUCrsbowmn_SKL
			WeaponLaunchBone			=	PRIMARY B_CRSBOW
			WeaponLaunchBone			=	SECONDARY ARROWNOCK	; when upgraded to flaming arrow
		End

		; --------- With Bow Upgrade  ------------
		
		ModelConditionState WEAPONSET_PLAYER_UPGRADE
			Model = IUCrsbowmn_SKN
			WeaponLaunchBone			=	PRIMARY B_CRSBOW
			WeaponLaunchBone			=	SECONDARY ARROWNOCK	; when upgraded to flaming arrow
			;ParticleSysBone	=	FireArowTip arrowFire FollowBone:Yes
			;ParticleSysBone	=	FireArowTip arrowFire FollowBone:Yes
		End

	
	;-------- Default Idle animations -------
		IdleAnimationState
			StateName = STATE_Idle
			Animation = IDLB
				AnimationName		= IUCrsbowmn_IDLB
				AnimationMode		= ONCE
				AnimationPriority	= 14
				AnimationSpeedFactorRange = 0.8 1.2
				AnimationBlendTime  = 15
			End
			;*** Repeat IDLB because animation priorities will not choose same animation twice so it can alternate between first two mostly.
			Animation = IDLB
				AnimationName		= IUCrsbowmn_IDLB
				AnimationMode		= ONCE
				AnimationPriority	= 14
				AnimationSpeedFactorRange = 0.8 1.2
				AnimationBlendTime  = 15
			End
			Animation = IDLC
				AnimationName		= IUCrsbowmn_IDLC
				AnimationMode		= ONCE
				AnimationPriority	= 4
				AnimationSpeedFactorRange = 0.8 1.2
				AnimationBlendTime  = 15
			End
			Animation = IDLD
				AnimationName		= IUCrsbowmn_IDLD
				AnimationMode		= ONCE
				AnimationPriority	= 4
				AnimationSpeedFactorRange = 0.8 1.2
				AnimationBlendTime  = 15
			End
			Animation = IDLE
				AnimationName		= IUCrsbowmn_IDLE
				AnimationMode		= ONCE
				AnimationPriority	= 4
				AnimationSpeedFactorRange = 0.8 1.2
				AnimationBlendTime  = 15
			End
			Animation = IDLF
				AnimationName		= IUCrsbowmn_IDLF
				AnimationMode		= ONCE
				AnimationPriority	= 4
				AnimationSpeedFactorRange = 0.8 1.2
				AnimationBlendTime  = 15
			End
			Animation = IDLI
				AnimationName		= IUCrsbowmn_IDLI
				AnimationMode		= ONCE
				AnimationPriority	= 1
				AnimationSpeedFactorRange = 0.8 1.2
				AnimationBlendTime  = 15
			End
			BeginScript
;				CurDrawableHideSubObject("Box01")
				CurDrawableShowSubObject("arrownock")
			EndScript
		End

;----------- Flying through air -------
 
		AnimationState						= PASSENGER
			Animation						= Wiggling
			    AnimationName				= IUCrsbowmn_FLLA
				AnimationMode				= LOOP
			End
		End
		
		  
		AnimationState        = THROWN_PROJECTILE
			Animation           = FLYA
				AnimationName     = IUCrsbowmn_FLYA
				AnimationMode     = LOOP
			End
			BeginScript
;				CurDrawableHideSubObject("Box01")
				CurDrawableShowSubObject("arrownock")
			EndScript
		End

		AnimationState						= FREEFALL
			Animation						= Wiggling
			    AnimationName				= IUCrsbowmn_FLYA
				AnimationMode				= LOOP
				AnimationSpeedFactorRange	= 0.5	0.5
				AnimationBlendTime			= 5
			End
		End

		AnimationState        = STUNNED_FLAILING
			Animation           = StunFlail
				AnimationName     = IUCrsbowmn_FLYA
				AnimationMode      = LOOP
			End
			BeginScript
;				CurDrawableHideSubObject("Box01")
				CurDrawableShowSubObject("arrownock")
			EndScript
		End

;----------- Dying -------

		AnimationState					=	DYING SPLATTED
			Animation					=	Fire
				AnimationName			=	IUCrsbowmn_LNDA
				AnimationMode			=	ONCE
				AnimationSpeedFactorRange = 0.7 1.3
			End
            EnteringStateFX = FX_SoldierHitGround
			BeginScript
;				CurDrawableHideSubObject("Box01")
				CurDrawableShowSubObject("arrownock")
			EndScript
		End

		AnimationState					=	DYING AFLAME
			Animation					=	Fire
				AnimationName			=	GUArcher_MFDA 
				AnimationSpeedFactorRange = 0.9 1.1
			End
			BeginScript
;				CurDrawableHideSubObject("Box01")
				CurDrawableShowSubObject("arrownock")
			EndScript
		End

		AnimationState = DYING
			Animation = Dying_1
				AnimationName = IUCrsbowmn_DIEA
				AnimationMode = ONCE
			End
			Animation = Dying_2
				AnimationName = IUCrsbowmn_DIEB
				AnimationMode = ONCE
			End
			Animation = Dying_3
				AnimationName = IUCrsbowmn_DIEC
				AnimationMode = ONCE
			End
			Animation = Dying_4
				AnimationName = IUCrsbowmn_DIED
				AnimationMode = ONCE
			End
			Animation = Dying_5
				AnimationName = IUCrsbowmn_DIEE
				AnimationMode = ONCE
			End
			Animation = Dying_2
				AnimationName = IUCrsbowmn_DIEF
				AnimationMode = ONCE
			End
			BeginScript
;				CurDrawableHideSubObject("Box01")
				CurDrawableShowSubObject("arrownock")
			EndScript
		End

;---------- Stunned on ground -------
	
	AnimationState        = STUNNED_STANDING_UP
		Animation           = GTPA
			AnimationName     = IUCrsbowmn_GTPA
			AnimationMode     = ONCE
			AnimationSpeedFactorRange = 1.5 1.5
		End
		BeginScript
;			CurDrawableHideSubObject("Box01")
			CurDrawableShowSubObject("arrownock")
		EndScript
	End

	AnimationState        = STUNNED
		Animation           = LNDA
			AnimationName     = IUCrsbowmn_LNDA
			AnimationMode     = ONCE
		End
		BeginScript
			CurDrawableHideSubObject("Box01")
			CurDrawableShowSubObject("arrownock")
		EndScript
	End


;----------- Climbing -------

    AnimationState = MOVING CLIMBING BACKING_UP
		Animation = Climbing_Down
			AnimationName = IUCrsbowmn_CLMA
			AnimationMode = LOOP_BACKWARDS
			AnimationSpeedFactorRange = 2.0 2.0
		End
		BeginScript
			CurDrawableHideSubObject("arrownock")
;			CurDrawableShowSubObject("Box01")
		EndScript
    End
    
    AnimationState = MOVING CLIMBING
		Animation = Climbing_Up
			AnimationName = IUCrsbowmn_CLMA
			AnimationMode = LOOP
			AnimationSpeedFactorRange = 2.0 2.0
		End
		BeginScript
			CurDrawableHideSubObject("arrownock")
;			CurDrawableShowSubObject("Box01")
		EndScript
    End

	; --------- Click and Hit Reactions ------------
	AnimationState = HIT_REACTION HIT_LEVEL_1
		Animation = Hit_Level_1_a
			AnimationName = IUCrsbowmn_HITA
			AnimationMode = ONCE
		End
		Animation = Hit_Level_1_b
			AnimationName = IUCrsbowmn_HITB
			AnimationMode = ONCE
		End
		BeginScript
			CurDrawableHideSubObject("arrownock")
;			CurDrawableShowSubObject("Box01")
		EndScript
	End
	
	AnimationState = HIT_REACTION HIT_LEVEL_2
		Animation = Hit_Level_2_a
			AnimationName = IUCrsbowmn_HITE
			AnimationMode = ONCE
		End
		BeginScript
			CurDrawableHideSubObject("arrownock")
;			CurDrawableShowSubObject("Box01")
		EndScript
	End
		
;;========= TERROR
		AnimationState					= MOVING EMOTION_TERROR EMOTION_LOOK_TO_SKY
			Animation					= TerrorFromTheSky
				AnimationName			= IUCrsbowmn_RUND
				AnimationMode			= LOOP
			End
			BeginScript
;				CurDrawableHideSubObject("Box01")
				CurDrawableShowSubObject("arrownock")
			EndScript
		End

		AnimationState = MOVING EMOTION_TERROR
;			Animation = Moving
;				AnimationName = IUCrsbowmn_RUNC
;				AnimationMode = LOOP
;			End
			Animation = RUND
				AnimationName = IUCrsbowmn_RUND
				AnimationMode = LOOP
			End			
			Flags = RANDOMSTART
			ParticleSysBone = None InfantryDustTrails
			BeginScript
;				CurDrawableHideSubObject("Box01")
				CurDrawableShowSubObject("arrownock")
			EndScript
		End

;;========= BACKING UP

		; frightened walking backwards (about to get smashed)
		AnimationState = MOVING BACKING_UP
			Animation = Backing_Up
				AnimationName = IUCrsbowmn_BAKA
				AnimationMode = LOOP
			End
			BeginScript
;			CurDrawableHideSubObject("Box01")
			CurDrawableShowSubObject("arrownock")
			EndScript
		End
	
;;========= MOVING

    AnimationState = MOVING
		Animation = Moving
			AnimationName = IUCrsbowmn_RUNA
		    AnimationMode = LOOP
		End
		Animation = Moving_2
			AnimationName = IUCrsbowmn_RUNB
		    AnimationMode = LOOP
		End
		Flags = RANDOMSTART
		ParticleSysBone = None InfantryDustTrails
		BeginScript
;			CurDrawableHideSubObject("Box01")
			CurDrawableShowSubObject("arrownock")
		EndScript
    End

	
;------- Old Style Archery --------------------------------------------
;Note: Crossbow animations are not appropriate for using the new animation system.
;      The ready state is actually an aiming pose and they just simply shoot while
;      firing. The reloading state simply continues the firing state.

    AnimationState = PREATTACK_A
 		Animation = IDLA
			AnimationName = IUCrsbowmn_IDLA
			AnimationMode = ONCE
			UseWeaponTiming	= Yes
			AnimationBlendTime = 8
		End
		BeginScript
			CurDrawableShowSubObject("arrownock")
;			CurDrawableHideSubObject("Box01")
		EndScript
    End
    AnimationState = FIRING_OR_RELOADING_A
		StateName = STATE_Firing
 		Animation = ATKA
			AnimationName = IUCrsbowmn_ATKA
			AnimationMode = ONCE
			UseWeaponTiming	= Yes
			AnimationBlendTime = 0
		End
		FrameForPristineBonePositions = 0
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			CurDrawableShowSubObject("arrownock")
;			CurDrawableShowSubObject("Box01")
		EndScript
    End
	

	;-emotions--
	; Must go before selected so we don't become unafraid.
    AnimationState					= EMOTION_AFRAID UNCONTROLLABLE
		Animation					= FERA
			AnimationName			= IUCrsbowmn_FERA
			AnimationMode			= LOOP
		End
		BeginScript
				Prev = CurDrawablePrevAnimationState()
			if Prev == "STATE_Firing" then CurDrawableAllowToContinue() return end
;		CurDrawableHideSubObject("Box01")
			CurDrawableShowSubObject("arrownock")
		EndScript
	End
	
    AnimationState					= EMOTION_UNCONTROLLABLY_AFRAID
		Animation					= FERA
			AnimationName			= IUCrsbowmn_FERA
			AnimationMode			= LOOP
		End
		BeginScript
				Prev = CurDrawablePrevAnimationState()
			if Prev == "STATE_Firing" then CurDrawableAllowToContinue() return end
;		CurDrawableHideSubObject("Box01")
			CurDrawableShowSubObject("arrownock")
		EndScript
	End
	
	AnimationState        = ATTACKING
		Animation           = IdleAttackComesFrom
			AnimationName     = IUCrsbowmn_IDLA
			AnimationMode     = LOOP
		End
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "STATE_Firing" then CurDrawableAllowToContinue() return end
;			CurDrawableHideSubObject("Box01")
			CurDrawableShowSubObject("arrownock")
		EndScript
	End
    
	AnimationState							= EMOTION_AFRAID
		Animation							= FERA
			AnimationName					= IUCrsbowmn_FERA
			AnimationMode					= LOOP
		End
		Flags = RANDOMSTART
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "STATE_Firing" then CurDrawableAllowToContinue() return end
;			CurDrawableHideSubObject("Box01")
			CurDrawableShowSubObject("arrownock")
		EndScript
	End
	AnimationState							= EMOTION_TAUNTING
		Animation							= TNTA
			AnimationName					= IUCrsbowmn_TNTA
			AnimationSpeedFactorRange		= 0.8 1.2
			AnimationMode					= ONCE
		End
		Animation							= TNTB
			AnimationName					= IUCrsbowmn_TNTB
			AnimationSpeedFactorRange		= 0.8 1.2
			AnimationMode					= ONCE
		End
		Flags								= RANDOMSTART RESTART_ANIM_WHEN_COMPLETE
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "STATE_Firing" then CurDrawableAllowToContinue() return end
;			CurDrawableHideSubObject("Box01")
			CurDrawableShowSubObject("arrownock")
		EndScript
	End
	
	;----------- pointing emotion ----------
	; idles thrown in to break up the monotony
	AnimationState							= EMOTION_POINTING
		Animation							= Pointing1
			AnimationName					= IUCrsbowmn_PNTA
			AnimationMode					= ONCE
			AnimationPriority	= 10
		End
		Animation = IDLD
			AnimationName		= IUCrsbowmn_IDLD
			AnimationMode		= ONCE
			AnimationPriority	= 2
			AnimationSpeedFactorRange = 0.8 1.2
		End
		Animation							= Pointing1
			AnimationName					= IUCrsbowmn_PNTB
			AnimationMode					= ONCE
			AnimationPriority	= 8
		End
		Animation = IDLE
			AnimationName		= IUCrsbowmn_IDLE
			AnimationMode		= ONCE
			AnimationPriority	= 1
			AnimationSpeedFactorRange = 0.8 1.2
			AnimationPriority	= 4
		End
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "STATE_Firing" then CurDrawableAllowToContinue() return end
;			CurDrawableHideSubObject("Box01")
			CurDrawableShowSubObject("arrownock")
		EndScript
		Flags				= RESTART_ANIM_WHEN_COMPLETE
	End
	AnimationState							= EMOTION_CELEBRATING
		Animation							= CHRA
			AnimationName					= IUCrsbowmn_CHRA
			AnimationMode					= ONCE
			AnimationBlendTime				= 10
		End
		Animation							= CHRB
			AnimationName					= IUCrsbowmn_CHRB
			AnimationMode					= ONCE
			AnimationBlendTime				= 10
		End
		Animation							= TNTA
			AnimationName					= IUCrsbowmn_TNTA
			AnimationMode					= ONCE
			AnimationBlendTime				= 10
		End
		Flags				= RANDOMSTART RESTART_ANIM_WHEN_COMPLETE
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "STATE_Firing" then CurDrawableAllowToContinue() return end
;			CurDrawableHideSubObject("Box01")
			CurDrawableShowSubObject("arrownock")
		EndScript
	End
	
	AnimationState							= EMOTION_ALERT
		Animation							= ALERT
			AnimationName					= IUCrsbowmn_IDLA
			AnimationMode					= LOOP
		End
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "STATE_Firing" then CurDrawableAllowToContinue() return end
;			CurDrawableHideSubObject("Box01")
			CurDrawableShowSubObject("arrownock")
		EndScript
	End
    
	AnimationState        = ENGAGED SELECTED
		Animation           = ALERT_1
			AnimationName     = IUCrsbowmn_IDLA
			AnimationMode     = LOOP
		End
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "STATE_Firing" then CurDrawableAllowToContinue() return end
;			CurDrawableHideSubObject("Box01")
			CurDrawableShowSubObject("arrownock")
		EndScript
	End
    
    AnimationState = SELECTED
		Animation = ATNB
			AnimationName = IUCrsbowmn_ATNB
			AnimationMode = LOOP
			AnimationBlendTime = 20
		End
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "STATE_Firing" then CurDrawableAllowToContinue() return end
;			CurDrawableHideSubObject("Box01")
			CurDrawableShowSubObject("arrownock")
		EndScript
    End
    
	AnimationState = WEAPONSET_PLAYER_UPGRADE
		StateName = STATE_Idle
		Animation = IDLE
			AnimationName		= IUCrsbowmn_IDLA
			AnimationMode		= ONCE
			AnimationPriority	= 20
			AnimationSpeedFactorRange = 0.8 1.2
	        AnimationBlendTime  = 15
		End
		Animation = IDLF
			AnimationName		= IUCrsbowmn_IDLB
			AnimationMode		= ONCE
			AnimationPriority	= 20
			AnimationSpeedFactorRange = 0.8 1.2
	        AnimationBlendTime  = 15
		End
		Flags				= RESTART_ANIM_WHEN_COMPLETE
		BeginScript
				CurDrawableShowSubObject("arrownock")
		EndScript
	End

    AnimationState = WAR_CHANT
		Animation							= ALERT
			AnimationName					= IUCrsbowmn_IDLA
			AnimationMode					= LOOP
		End
		BeginScript
			CurDrawableSetTransitionAnimState("theRealWarChant")
		EndScript
	End
	
	TransitionState = theRealWarChant
		Animation = Chant
			AnimationName = IUCrsbowmn_CHRA
			AnimationMode = ONCE
		End
		Animation = Chant2
			AnimationName = IUCrsbowmn_CHRB
			AnimationMode = ONCE
		End
	End
	
 End

  ; ***DESIGN parameters ***
  Side = Isengard
  EditorSorting = UNIT
	ThreatLevel = 1.0
  ThingClass = HORDE_UNIT
  EmotionRange = 240
  CommandPoints = 3

  TransportSlotCount = 1
  	WeaponSet
		Conditions = None 
		Weapon = PRIMARY    IsengardArcherBow
		AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End
	WeaponSet
		Conditions = PLAYER_UPGRADE
		Weapon = PRIMARY	IsengardArcherBowFireArrow
		AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End
	
  ArmorSet
    Conditions      = None
    Armor           = ArcherArmor
    DamageFX        = NormalDamageFX
  End
  ArmorSet
		Conditions      = PLAYER_UPGRADE
		Armor           = ArcherHeavyArmor
		DamageFX        = NormalDamageFX	
  End
    
  	; This is required so that the build phase lasts as long as the anim.
	BuildFadeInOnCreateTime = 0 ;1.5 ;temporarily set to 0
  
  CommandSet IsengardUrukCrossbowCommandSet
  
  ShroudClearingRange = SHROUD_CLEAR_STANDARD
  VisionRange = ISENGARD_URUKCROSSBOW_VISION_RANGE

  BountyValue = ISENGARD_URUKCROSSBOW_BOUNTY_VALUE
  DisplayName = OBJECT:IsengardArcher
  CrushableLevel = 0  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CrusherLevel = 0 ;What can I crush?: 0 = small animals, 1 = infantry, 2 = trees, 3 = vehicles
 	CrushRevengeWeapon = RangedInfantryCrushRevenge


  ; *** AUDIO Parameters ***;

	VoiceAmbushed				= UrukCrossbowmanVoiceAmbushed
	VoiceAttack				= UrukCrossbowmanVoiceAttack
	VoiceAttackAir 				= UrukCrossbowmanVoiceAttack
	VoiceAttackAir2				= OrcVoiceAttack2
	VoiceAttack2				= OrcVoiceAttack2
	VoiceAttackCharge			= UrukCrossbowmanVoiceAttackCharge
	VoiceAttackStructure			= UrukCrossbowmanVoiceAttackBuilding
	VoiceAttackMachine			= UrukCrossbowmanVoiceAttack
	VoiceCreated				= CampOrcCreateUrukCrossbow
	VoiceFullyCreated 			= CampOrcCreateUrukCrossbow
	VoiceMove				= UrukCrossbowmanVoiceMove
	VoiceMove2				= OrcVoiceMove2
	VoiceMoveToCamp				= UrukCrossbowmanVoiceMoveCamp
	VoiceMoveWhileAttacking			= UrukCrossbowmanVoiceDisengage
	VoicePriority				= 50
	VoiceRetreatToCastle			= UrukCrossbowmanVoiceRetreat
	VoiceSelect				= UrukCrossbowmanVoiceSelect
	VoiceSelect2				= UrukCrossbowmanVoiceSelect2
	VoiceSelectBattle			= UrukCrossbowmanVoiceSelectBattle
	VoiceGuard			= UrukCrossbowmanVoiceMove
		
	VoiceEnterStateAttack			= UrukCrossbowmanVoiceEnterStateAttack
	VoiceEnterStateAttackCharge		= UrukCrossbowmanVoiceEnterStateAttackCharge
	VoiceEnterStateAttackStructure		= UrukCrossbowmanVoiceEnterStateAttackBuilding
	VoiceEnterStateAttackMachine		= UrukCrossbowmanVoiceEnterStateAttackBuilding
	VoiceEnterStateMove			= UrukCrossbowmanVoiceEnterStateMove
	VoiceEnterStateMoveToCamp		= UrukCrossbowmanVoiceEnterStateMoveCamp
	VoiceEnterStateMoveWhileAttacking	= UrukCrossbowmanVoiceEnterStateDisengage
	VoiceEnterStateRetreatToCastle		= UrukCrossbowmanVoiceEnterStateRetreat
	
	SoundImpact				= ImpactHorse

	UnitSpecificSounds
		VoiceGarrison			= UrukCrossbowmanVoiceGarrison
		VoiceEnterUnitSlaughterHouse	= UrukCrossbowmanVoiceGarrisonSlaughterHouse
	End

	EvaEventDamagedOwner			= UnitUnderAttack 		;Eva event to trigger when unit is damaged
	;EvaEventDieOwner			= GroupUrukCrossbowmanDie	;Eva event to trigger on unit's death. NOTICE THAT this is only for permanent deaths
										;For deaths you can respawn from, use the DeathFX

	Behavior = LargeGroupAudioUpdate ModuleTag_LGAU				;Tie into LargeGroupAudio system
		Key = UrukHai_Crossbowman
	End

	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		MaxUpdateRangeCap = 800
		AnimationSound = Sound:BodyFallOrc			Animation:IUCrsbowmn_SKL.IUCrsbowmn_DIEA		Frames:23
		AnimationSound = Sound:BodyFallOrc			Animation:IUCrsbowmn_SKL.IUCrsbowmn_DIEB		Frames:29
		AnimationSound = Sound:BodyFallOrc			Animation:IUCrsbowmn_SKL.IUCrsbowmn_DIEC		Frames:76
		AnimationSound = Sound:BodyFallOrc			Animation:IUCrsbowmn_SKL.IUCrsbowmn_DIED		Frames:38
		AnimationSound = Sound:BodyFallOrc			Animation:IUCrsbowmn_SKL.IUCrsbowmn_DIEE		Frames:57
		AnimationSound = Sound:BodyFallOrc			Animation:IUCrsbowmn_SKL.IUCrsbowmn_LNDA		Frames:4
	End


  ; *** ENGINEERING Parameters ***

  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER CAN_USE_SIEGE_TOWER SCORE THROWN_OBJECT URUK ARCHER ATTACK_NEEDS_LINE_OF_SIGHT GRAB_AND_DROP
 
  Body = ActiveBody ModuleTag_02
    CheerRadius       = EMOTION_CHEER_RADIUS
    MaxHealth         = ISENGARD_URUKCROSSBOW_HEALTH				;BALANCE Isengard Crossbowman Health
    MaxHealthDamaged  = ISENGARD_URUKCROSSBOW_HEALTH_DAMAGED		
    ;RecoveryTime      = ISENGARD_URUKCROSSBOW_HEALTH_RECOVERY_TIME	
  End

	; Fire arrow upgrade
	Behavior = WeaponSetUpgrade ModuleTag_WeaponSetUpgradeTag
		TriggeredBy = Upgrade_IsengardFireArrows
	End
  	
  	Behavior = SubObjectsUpgrade FireArrows_Upgrade
  		TriggeredBy		= Upgrade_IsengardFireArrows
  		ShowSubObjects	= FireArowTip ArrowNock			; yes, it's a typo.
  		HideSubObjects	= arrow
  	End
  		
	 ;Heavy Armor
	Behavior = ArmorUpgrade ArmorUpgradeModuleTag
		TriggeredBy = Upgrade_IsengardHeavyArmor
		ArmorSetFlag			= PLAYER_UPGRADE
	End

	Behavior = SubObjectsUpgrade Armor_Upgrade
		TriggeredBy		= Upgrade_IsengardHeavyArmor
		UpgradeTexture	= IUUrukahi.tga 0 IUUrukahi_HA.tga
		UpgradeTexture	= IUCrsbowmn_l.tga 0 IUUrukahi_HA.tga
		RecolorHouse			= Yes
		ExcludeSubobjects		= Forged_Blade
	End	
	
	Behavior = HitReactionBehavior HitReactionBehaviorModuleTag
		HitReactionLifeTimer1 = 2800 ; level 1 (light  damage)  hit reaction animations in ms
		HitReactionLifeTimer2 = 3600 ; level 2 (medium damage)  hit reaction animations in ms

		HitReactionThreshold1 = 0.0   ; level 1 (light  damage) threshold trigger
		HitReactionThreshold2 = 50.0  ; level 2 (medium damage) threshold trigger
	End
	
  Behavior = AIUpdateInterface ModuleTag_03
    AutoAcquireEnemiesWhenIdle	=	Yes ATTACK_BUILDINGS
    CanAttackWhileContained		=	Yes
    AILuaEventsList				=	IsengardArcherFunctions
    MaxCowerTime				=	5000
    MinCowerTime				=	3000
    AttackPriority				= 	AttackPriority_Archer
  End
  
  LocomotorSet
    Locomotor   = HumanLocomotor
    Condition   = SET_NORMAL
    Speed       = NORMAL_EVIL_FAST_MEMBER_SPEED
  End

  Behavior = PhysicsBehavior ModuleTag_04
    GravityMult = 1.0
    ShockStandingTime = 1200	;msec
  End 
  
;  Behavior = StealthUpdate ModuleTag_Stealth
;	StealthDelay                = 0 ; msec
;	StealthForbiddenConditions  = ATTACKING
;	HintDetectableConditions    = IS_FIRING_WEAPON 
;	FriendlyOpacityMin          = 10.0%
;	FriendlyOpacityMax          = 60.0%
;	PulseFrequency              = 750   ; msec
;	OrderIdleEnemiesToAttackMeUponReveal  = Yes
;	StartsActive				= No
;	InnateStealth				= No
; End
  
  Behavior = SlowDeathBehavior ModuleTag_05
    DeathTypes = ALL -KNOCKBACK
    SinkDelay = 3000
    SinkRate = 1.40     ; in Dist/Sec
    DestructionDelay = 8000
    Sound = INITIAL UrukVoiceDie			;UrukCrossbowmanVoiceDie
  End
 
  Behavior = SquishCollide ModuleTag_06
    ;nothing
  End
 
  Behavior = SlowDeathBehavior ModuleTag_07
    ; Same as normal death, but no sound (sound already played by SoundImpact = ... )
    DeathTypes = NONE +KNOCKBACK
    SinkDelay = 3000
    SinkRate = 1.40     ; in Dist/Sec
    DestructionDelay = 8000
    Sound = INITIAL UrukVoiceDie
  End
  
  ; IsengardUrukCrossbow
  Behavior = HordeMemberCollide ModuleTag_HMC
    ;nothing
  End
 
  Behavior = BezierProjectileBehavior ModuleTag_08 ; Module starts asleep, and wakes up when thrown.
    ; 
    FirstHeight = 24  ; Height of Bezier control points above highest intervening terrain
    SecondHeight = 24
    FirstPercentIndent = 30% ; Percentage of shot distance control points are placed
    SecondPercentIndent = 70%
    TumbleRandomly = Yes

    CrushStyle = Yes ; I don't detonate, I just hit
    DieOnImpact = Yes
    BounceCount = 1   ; When I hit the ground, I'll arc again
    BounceDistance = 40 ; this far
    BounceFirstHeight = 24  ; Height of Bezier control points above highest intervening terrain
    BounceSecondHeight = 24
    BounceFirstPercentIndent = 20% ; Percentage of shot distance control points are placed
    BounceSecondPercentIndent = 80%

    GroundHitFX       = FX_ThrownRockGroundHit
    GroundBounceFX    = FX_ThrownRockBounceHit
  End

  Geometry = CYLINDER
  GeometryMajorRadius = 8.0
  GeometryMinorRadius = 8.0
  GeometryHeight = 19.2
  GeometryIsSmall = Yes
  Shadow = SHADOW_DECAL
  ShadowSizeX = 19;
  ShadowSizeY = 19;
  ShadowTexture = ShadowI;
End


;------------------------------------------------------------------------------
; aka Overseer, IsengardOverseer,
Object IsengardOrcOverseer
  ; *** ART Parameters ***

  ; This is required for garrisoned objects - please put in all objects.
  ButtonImage = BuildingNoArt
  SelectPortrait = BuildingNoArt
  
  Draw = W3DScriptedModelDraw ModuleTag_01

	  OkToChangeModelColor = Yes
	  
    DefaultModelConditionState
      Model = IUOvrseer_SKN
    End

	IdleAnimationState
		Animation = IDLA
	    AnimationName = IUOvrseer_SKL.IUOvrseer_IDLA
	    AnimationMode = ONCE
			AnimationPriority = 15
		End
		StateName = Idle
	End
 
	AnimationState = MOVING BACKING_UP
		Animation = BackingUp
			AnimationName = IUOvrSeer_SKL.IUOvrSeer_BAKA
			AnimationMode = LOOP
		End
		Flags = RANDOMSTART
	End
	
	AnimationState = MOVING EMOTION_TERROR
		Animation = Moving
			AnimationName = IUOvrseer_SKL.IUOvrseer_RUNA
		    AnimationMode = LOOP
		End
		Flags = RANDOMSTART
		ParticleSysBone = None InfantryDustTrails
    End
 
    AnimationState = MOVING
			Animation = Moving
	      AnimationName = IUOvrseer_SKL.IUOvrseer_RUNA
		    AnimationMode = LOOP
			End
			Flags = RANDOMSTART
			ParticleSysBone = None InfantryDustTrails
    End

	AnimationState							= EMOTION_UNCONTROLLABLY_AFRAID
		Animation							= FERA
			AnimationName					= IUOvrseer_SKL.IUOvrseer_FERA
			AnimationMode					= LOOP
		End
		Flags = RANDOMSTART
	End
	
    AnimationState = ATTACKING
			Animation = Attacking
	      AnimationName = IUOvrseer_SKL.IUOvrseer_ATKA
		    AnimationMode = LOOP
			End
    End

    AnimationState = DYING
			Animation = Dying
	      AnimationName = IUOvrseer_SKL.IUOvrseer_DIEA
		    AnimationMode = ONCE
			End
    End
    
    AnimationState = WAR_CHANT
		Animation = Chant
			AnimationName = IUOvrseer_SKL.IUOvrseer_IDLA
			AnimationMode = LOOP
		End
	End
	
			
	;-emotions--
	AnimationState							= EMOTION_AFRAID
		Animation							= FERA
			AnimationName					= IUOvrseer_SKL.IUOvrseer_FERA
			AnimationMode					= LOOP
		End
		Flags = RANDOMSTART
	End
	AnimationState							= EMOTION_TAUNTING
		Animation							= TNTA
			AnimationName					= IUOvrseer_SKL.IUOvrseer_TNTA
			AnimationMode					= LOOP
		End
	End
	AnimationState							= EMOTION_POINTING
		Animation							= Pointing1
			AnimationName					= IUOvrseer_SKL.IUOvrseer_PNTA
			AnimationMode					= LOOP
		End
	End
	AnimationState							= EMOTION_CELEBRATING
		Animation                           = CHRA
			AnimationName					= IUOvrseer_SKL.IUOvrseer_CHRA
			AnimationMode					= ONCE
		End
	End
  End
 

  ; ***DESIGN parameters ***
  Side = Isengard
  EditorSorting = UNIT
	ThreatLevel = 1.0
  ThingClass = HORDE_UNIT
  CommandPoints = 1

  TransportSlotCount = 1
  ArmorSet
    Conditions      = None
    Armor           = NoArmor
    DamageFX        = None
  End
  VisionRange = 120.0
  DisplayName = OBJECT:IsengardOrcOverseer
  CrushableLevel = 0  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CrusherLevel = 0 ;What can I crush?: 0 = small animals, 1 = infantry, 2 = trees, 3 = vehicles
 

  ; *** AUDIO Parameters ***;

	;VoiceSelect 	= NoSound
	;VoiceMove 	= NoSound
	;VoiceAttack 	= NoSound
	;VoiceFear 	= NoSound
	;VoiceGuard 	= NoSound
  
	;UnitSpecificSounds
	;	VoiceGarrison			= NoSound
	;	VoiceEnter			= NoSound
	;	VoiceEnterHostile		= NoSound
	;	VoiceGetHealed			= NoSound
	;End

	EvaEventDamagedOwner = UnitUnderAttack 			;Eva event to trigger when unit is damaged

  	Behavior = LargeGroupAudioUpdate ModuleTag_LGAU		;Tie into LargeGroupAudio system
		Key = Orc_Infantry
	End


  ; *** ENGINEERING Parameters ***

  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER CAN_USE_SIEGE_TOWER SCORE ARMY_SUMMARY
 
  Body = ActiveBody ModuleTag_02
    MaxHealth         = 10                  ;BALANCE Laborer Health
    MaxHealthDamaged  = 5
    ;RecoveryTime      = 5000
  End
 
  Behavior = AIUpdateInterface ModuleTag_03
  End

  LocomotorSet
    Locomotor     = HumanLocomotor
    Condition     = SET_NORMAL
    Speed         = 32
  End

  LocomotorSet
    Locomotor     = HumanWanderLocomotor
    Condition     = SET_WANDER
    Speed         = 32
  End
 
  Behavior = PhysicsBehavior ModuleTag_04
    GravityMult = 1.0
  End
 
  Behavior = SlowDeathBehavior ModuleTag_05
    DeathTypes = ALL 
    SinkDelay = 3000
    SinkRate = 0.40     ; in Dist/Sec
    DestructionDelay = 8000
    Sound = INITIAL UrukVoiceDie
  End
 
  Behavior = SquishCollide ModuleTag_06
    ;nothing
  End
 
  Geometry = CYLINDER
  GeometryMajorRadius = 8.0
  GeometryMinorRadius = 8.0
  GeometryHeight = 19.2
  GeometryIsSmall = Yes
  Shadow = SHADOW_DECAL
  ShadowSizeX = 11;
  ShadowSizeY = 11;
  ShadowTexture = ShadowI;
End


;------------------------------------------------------------------------------
; aka Isengard Pike Man UrukPikeman UrukHaiPikeman
Object IsengardPikeman              ;BALANCE Isengard Pikeman
  ; *** ART Parameters ***

  ; This is required for garrisoned objects - please put in all objects.
  ButtonImage = BIUrukPit_Pikemen
  SelectPortrait         = UPIsenguard_UrukPikeman
  
  ;SelectPortrait         = SP_OrcAxe

  Draw = W3DHordeModelDraw ModuleTag_01

	OkToChangeModelColor = Yes
	  
	StaticModelLODMode = Yes
	
	; specify options for static LODs
	LodOptions	= LOW
		AllowMultipleModels		=	ALLOW_MULTIPLE_MODELS_LOW
		MaxRandomTextures		=	MAX_RANDOM_TEXTURES_LOW
		MaxRandomAnimations		=	MAX_RANDOM_ANIMATIONS_LOW
		MaxAnimFrameDelta		=	MAX_ANIM_FRAME_DELTA_LOW
	End
	
	LodOptions	= MEDIUM
		AllowMultipleModels		=	ALLOW_MULTIPLE_MODELS_MED
		MaxRandomTextures		=	MAX_RANDOM_TEXTURES_MED
		MaxRandomAnimations		=	MAX_RANDOM_ANIMATIONS_MED
		MaxAnimFrameDelta		=	MAX_ANIM_FRAME_DELTA_MED
	End
	
	LodOptions	= HIGH
		AllowMultipleModels		=	ALLOW_MULTIPLE_MODELS_HIGH
		MaxRandomTextures		=	MAX_RANDOM_TEXTURES_HIGH
		MaxRandomAnimations		=	MAX_RANDOM_ANIMATIONS_HIGH
		MaxAnimFrameDelta		=	MAX_ANIM_FRAME_DELTA_HIGH
	End
	
    DefaultModelConditionState
      Model = IUPikeman_SKN
    End

	ModelConditionState = COMING_OUT_OF_FACTORY
		Model = IUPikeman_SKN
	End

   	
	IdleAnimationState
		Animation = IDLA
			AnimationName		= IUPikeman_SKL.IUPikeman_IDLA
			AnimationMode		= ONCE
			AnimationPriority	= 30
			AnimationBlendTime	= 15
		End
		Animation = IDLB
			AnimationName		= IUPikeman_SKL.IUPikeman_IDLB
			AnimationMode		= ONCE
			AnimationPriority	= 10
			AnimationBlendTime	= 15
		End
		Animation = IDLC
			AnimationName		= IUPikeman_SKL.IUPikeman_IDLC
			AnimationMode		= ONCE
			AnimationBlendTime	= 15
		End
		StateName = Bored
	BeginScript
		Prev = CurDrawablePrevAnimationState()
		if Prev == "PikeDown"	then CurDrawableSetTransitionAnimState("Trans_Down_To_Up") return end
		if Prev == "Selected" or Prev == "Trans_Down_To_Up" then CurDrawableSetTransitionAnimState("TRANS_SB_Normal") end
	EndScript
	End

    		
	AnimationState						= PASSENGER
		Animation						= Grabbed
			AnimationName				= IUPikeman_SKL.IUPikeman_FLLA
			AnimationMode				= LOOP
		End
	End
	
	AnimationState						= FREEFALL
		StateName						= STATE_Falling
		Animation						= Falling
			AnimationName				= IUPikeman_SKL.IUPikeman_FLYD
			AnimationMode				= LOOP
			AnimationBlendTime			= 10
		End
	End
	
	
		
		
;------special pikeman porcupine formation animations-----------------------------------	
	
	AnimationState = ALTERNATE_FORMATION FIRING_OR_PREATTACK_A
	 	Animation = ATKC
			AnimationName		= IUPikeman_SKL.IUPikeman_ATKA
			AnimationMode		= LOOP
			UseWeaponTiming		= Yes	
		End
		StateName = PikeDown
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "PikeUp"	or Prev == "Selected" then CurDrawableSetTransitionAnimState("Trans_Up_To_Down") return end
		EndScript
	End
	
	AnimationState = ALTERNATE_FORMATION FIRING_OR_PREATTACK_A WEAPONSTATE_CLOSE_RANGE ;TEMP
		Animation = ATKC
			AnimationName		= IUPikeman_SKL.IUPikeman_ATKA
			AnimationMode		= ONCE
			UseWeaponTiming		= Yes
		End
		StateName = PikeUp
	End
	
    AnimationState = ALTERNATE_FORMATION MOVING BACKING_UP
		Animation = Moving_Back
			AnimationName = IUPikeman_SKL.IUPikeman_BAKA	
		    AnimationMode = LOOP
		End	
    End
	
	AnimationState = ALTERNATE_FORMATION MOVING
	 	Animation = ATKC
			AnimationName		= IUPikeman_SKL.IUPikeman_RUNB
			AnimationMode		= LOOP
		End
		StateName = PikeDown
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "PikeUp"	or Prev == "Selected" then CurDrawableSetTransitionAnimState("Trans_Up_To_Down") return end
		EndScript
	End
	
	    AnimationState = ALTERNATE_FORMATION STUNNED_FLAILING
 		Animation = Flying_1
			AnimationName = IUPikeman_SKL.IUPikeman_FLYD
			AnimationMode = LOOP
		End
		Flags							= MAINTAIN_FRAME_ACROSS_STATES2
    End
	
	
	AnimationState						= ALTERNATE_FORMATION DYING SPLATTED
 		Animation						= Splat
			AnimationName				= IUPikeman_SKL.IUPikeman_LNDD
			AnimationMode				= ONCE
		End
    End

     AnimationState = ALTERNATE_FORMATION DYING AFLAME
		Animation = Flaming_Death
			AnimationName = IUPikeman_SKL.IUPikeman_MFDA
		    AnimationMode = ONCE
		End
    End

    AnimationState =  ALTERNATE_FORMATION DYING 
		Animation = Dying_1
			AnimationName = IUPikeman_SKL.IUPikeman_DIEC
			AnimationMode = ONCE
		End
    End
 
    ; --- stunned anims
    AnimationState = ALTERNATE_FORMATION STUNNED_STANDING_UP
 		Animation = Standing_Back_Up
			AnimationName = IUPikeman_SKL.IUPikeman_GTPA
			AnimationMode = ONCE
			AnimationSpeedFactorRange = 1.5 1.5
		End
    End


    AnimationState = ALTERNATE_FORMATION STUNNED
 		Animation = Splattered_On_Ground
			AnimationName = IUPikeman_SKL.IUPikeman_LNDD
			AnimationMode = ONCE
		End
    End

    
	
	 AnimationState = ALTERNATE_FORMATION
	 	Animation = ATKC
			AnimationName		= IUPikeman_SKL.IUPikeman_IDLD
			AnimationMode		= LOOP
		End
		StateName = PikeDown
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "PikeUp"	or Prev == "Selected" or Prev == "Bored" then CurDrawableSetTransitionAnimState("Trans_Up_To_Down") return end
		EndScript
	End
	

 ;--------------------normal animations---------------------------

    
    
    
    
    
    
    ; --- stunned anims --- ;
    
    AnimationState = STUNNED_FLAILING
		Animation = Flying_1
			AnimationName = IUPikeman_SKL.IUPikeman_FLYD
			AnimationMode = LOOP
		End
		Flags							= MAINTAIN_FRAME_ACROSS_STATES2
    End
    
     AnimationState = DYING SPLATTED
 		Animation = Splat
			AnimationName = IUPikeman_SKL.IUPikeman_LNDD
			AnimationMode = ONCE
		End
	End
    
    
	; --- death anims --- ;

     AnimationState = DYING AFLAME
		Animation = Flaming_Death
			AnimationName = IUPikeman_SKL.IUPikeman_MFDA
		    AnimationMode = ONCE
		End
	End
    
    AnimationState = DYING EMOTION_ALERT
		Animation = Dying_2
			AnimationName = IUPikeman_SKL.IUPikeman_DIEC
			AnimationMode = ONCE
		End
    End

    AnimationState = DYING
		Animation = Dying_2
			AnimationName = IUPikeman_SKL.IUPikeman_DTHA
			AnimationMode = ONCE
		End
		Animation = Dying_2
			AnimationName = IUPikeman_SKL.IUPikeman_DTHB
		    AnimationMode = ONCE
		End
	End


    AnimationState = STUNNED_STANDING_UP
		Animation = Standing_Back_Up
			AnimationName = IUPikeman_SKL.IUPikeman_GTPA
			AnimationMode = ONCE
			AnimationSpeedFactorRange = 1.5 1.5
		End
    End

    AnimationState						= STUNNED
		StateName						= STATE_Stunned
		Animation						= Splattered_On_Ground
			AnimationName				= IUPikeman_SKL.IUPikeman_LNDD
			AnimationMode				= ONCE
		End
    End

	
	AnimationState  = COMING_OUT_OF_FACTORY
		Animation = Being_Built
			AnimationName		= IUPikeman_SKL.IUPikeman_RUNB
			AnimationMode		= LOOP
			AnimationBlendTime	= 0
		End
	End	
	
	
	AnimationState = MOVING FIRING_OR_PREATTACK_A
		Animation = TrotAndFire
			AnimationName = IUPikeman_SKL.IUPikeman_ATRA
		    AnimationMode = LOOP
		End
		Flags = RANDOMSTART
		;ParticleSysBone = None InfantryDustTrails
    End
    	
		
    AnimationState = MOVING BACKING_UP
		Animation = Moving_Back
			AnimationName = IUPikeman_SKL.IUPikeman_BAKA
		    AnimationMode = LOOP
		End	
    End
    
    AnimationState = MOVING EMOTION_AFRAID
		Animation = Moving_1
			AnimationName = IUPikeman_SKL.IUPikeman_RUNB
		    AnimationMode = LOOP
		End
		Flags = MAINTAIN_FRAME_ACROSS_STATES
		ParticleSysBone = None InfantryDustTrails
    End
    
    AnimationState = MOVING EMOTION_ALERT
		Animation = Moving_1
			AnimationName = IUPikeman_SKL.IUPikeman_RUNB
		    AnimationMode = LOOP
		End
		Flags = MAINTAIN_FRAME_ACROSS_STATES
		ParticleSysBone = None InfantryDustTrails
    End
    
    AnimationState = MOVING ATTACKING
		Animation = Moving_1
			AnimationName = IUPikeman_SKL.IUPikeman_RUNB
		    AnimationMode = LOOP
		End
		Flags = MAINTAIN_FRAME_ACROSS_STATES
		ParticleSysBone = None InfantryDustTrails
    End
    
    AnimationState = MOVING ENGAGED
		Animation = Moving_1
			AnimationName = IUPikeman_SKL.IUPikeman_RUNB
		    AnimationMode = LOOP
		End
		Flags = MAINTAIN_FRAME_ACROSS_STATES
		ParticleSysBone = None InfantryDustTrails
    End

    AnimationState = MOVING
		Animation = Moving_1
			AnimationName = IUPikeman_SKL.IUPikeman_RUNA
		    AnimationMode = LOOP
		End
		ParticleSysBone = None InfantryDustTrails
    End
    

    ; --- Attacking --- ;

	AnimationState =  FIRING_OR_PREATTACK_A
		Animation = KickSinceWeAreMelee
			AnimationName		= IUPikeman_SKL.IUPikeman_ATKC
			AnimationMode		= ONCE
			UseWeaponTiming		= Yes	
		End
	End

	; --- emotions --- ;

    AnimationState							= WAR_CHANT
		Animation							= Chant
			AnimationName					= IUPikeman_SKL.IUPikeman_IDLC
			AnimationMode					= LOOP
		End
	End			

	AnimationState							= EMOTION_AFRAID
		Animation							= FERA
			AnimationName					= IUPikeman_SKL.IUPikeman_FERA
			AnimationMode					= LOOP
		End
		Flags = RANDOMSTART
	End
	
	AnimationState							= EMOTION_CELEBRATING
		Animation							= CHRA
			AnimationName					= IUPikeman_SKL.IUPikeman_CHRA
			AnimationMode					= ONCE
			AnimationBlendTime				= 10
		End
		Animation							= CHRB
			AnimationName					= IUPikeman_SKL.IUPikeman_CHRB
			AnimationMode					= ONCE
			AnimationBlendTime				= 10
		End
		Animation							= TNTA
			AnimationName					= IUPikeman_SKL.IUPikeman_TNTA
			AnimationMode					= ONCE
			AnimationBlendTime				= 10
		End
		Flags				= RESTART_ANIM_WHEN_COMPLETE
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "PikeDown"	then CurDrawableSetTransitionAnimState("Trans_Down_To_Up") return end
		EndScript
	End
	
	AnimationState							= EMOTION_TAUNTING
		Animation							= TNTA
			AnimationName					= IUPikeman_SKL.IUPikeman_TNTA
			AnimationMode					= ONCE
			AnimationSpeedFactorRange		= 0.8 1.2
		End
		Animation							= TNTB
			AnimationName					= IUPikeman_SKL.IUPikeman_TNTB
			AnimationMode					= ONCE
			AnimationSpeedFactorRange		= 0.8 1.2
		End
		Flags								= RANDOMSTART RESTART_ANIM_WHEN_COMPLETE
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "PikeDown"	then CurDrawableSetTransitionAnimState("Trans_Down_To_Up") return end
		EndScript
	End
	
	AnimationState							= EMOTION_POINTING
		Animation							= Pointing1
			AnimationName					= IUPikeman_SKL.IUPikeman_PNTA
			AnimationMode					= LOOP
		End
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "PikeDown"	then CurDrawableSetTransitionAnimState("Trans_Down_To_Up") return end
		EndScript
	End

	AnimationState							= EMOTION_ALERT
		Animation							= ALERT
			AnimationName					= IUPikeman_SKL.IUPikeman_IDLE
			AnimationMode					= LOOP
		End
		Flags								= RESTART_ANIM_WHEN_COMPLETE MAINTAIN_FRAME_ACROSS_STATES2
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "PikeDown"	then CurDrawableSetTransitionAnimState("Trans_Down_To_Up") return end
		EndScript
	End
		
	AnimationState							= ATTACKING
		Animation							= ALERT
			AnimationName					= IUPikeman_SKL.IUPikeman_IDLE
			AnimationMode					= LOOP
		End
		Flags								= RESTART_ANIM_WHEN_COMPLETE MAINTAIN_FRAME_ACROSS_STATES2
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "PikeDown"	then CurDrawableSetTransitionAnimState("Trans_Down_To_Up") return end
		EndScript
	End
	
	AnimationState							= ENGAGED
		Animation							= ALERT
			AnimationName					= IUPikeman_SKL.IUPikeman_IDLE
			AnimationMode					= LOOP
		End
		Flags								= RESTART_ANIM_WHEN_COMPLETE MAINTAIN_FRAME_ACROSS_STATES2
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "PikeDown"	then CurDrawableSetTransitionAnimState("Trans_Down_To_Up") return end
		EndScript
	End
	
    AnimationState  = JUST_BUILT
      Animation = Being_Built
        AnimationName		= IUPikeman_SKL.IUPikeman_BLDA
        AnimationMode		= ONCE
        AnimationBlendTime	= 0
      End
    End

	AnimationState = SELECTED
		Animation				= Selected_Loop
			AnimationName		= IUPikeman_SKL.IUPikeman_IDLA
			AnimationMode		= LOOP
			AnimationBlendTime	= 10
		End
		StateName				= Selected
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "PikeDown"	then CurDrawableSetTransitionAnimState("Trans_Down_To_Up") return end			
			if Prev == "Bored" then CurDrawableSetTransitionAnimState("TRANS_BS_Normal") end
		EndScript
		Flags = RESTART_ANIM_WHEN_COMPLETE
	End
	

	; --- transition states --- ;
	
    TransitionState = Trans_Down_To_Up
		Animation = Transition
			AnimationName = IUPikeman_SKL.IUPikeman_PLTB
			AnimationMode = ONCE
		End
    End
    
    TransitionState = Trans_Up_To_Down
		Animation = Transition
			AnimationName = IUPikeman_SKL.IUPikeman_PLTA
			AnimationMode = ONCE
		End
    End
    
    TransitionState = TRANS_MovingToDown_Alt
		Animation = Transition
			AnimationName = IUPikeman_SKL.IUPikeman_PLTC
			AnimationMode = ONCE
		End
    End
    
    TransitionState = TRANS_SR_Normal
		Animation = Transition
			AnimationName = IUPikeman_SKL.IUPikeman_IDLF
			AnimationMode = ONCE
		End
    End
    
    TransitionState = TRANS_RS_Normal
		Animation = Transition
			AnimationName = IUPikeman_SKL.IUPikeman_IDLF
			AnimationMode = ONCE_BACKWARDS
		End
		Flags = START_FRAME_LAST
    End
        
    TransitionState = TRANS_BS_Normal
		Animation = Transition
			AnimationName				= IUPikeman_SKL.IUPikeman_IDLC
			AnimationMode				= ONCE
			AnimationBlendTime			= 20
			AnimationMustCompleteBlend	= yes
		End
    End
    
    TransitionState = TRANS_SB_Normal
		Animation = Transition
			AnimationName				= IUPikeman_SKL.IUPikeman_IDLA
			AnimationMode				= ONCE
			AnimationBlendTime			= 10
			AnimationMustCompleteBlend	= yes
		End
    End
    
    TransitionState = TRANS_BR_Normal
		Animation = Transition
			AnimationName = IUPikeman_SKL.IUPikeman_IDLF
			AnimationMode = ONCE
		End
    End
    
    TransitionState = TRANS_RB_Normal
		Animation = Transition
			AnimationName = IUPikeman_SKL.IUPikeman_IDLF
			AnimationMode = ONCE_BACKWARDS
		End
		Flags = START_FRAME_LAST
    End
    
    
    
    TransitionState = TRANS_SR_Alt
    End
    
    TransitionState = TRANS_RS_Alt
    End
    
    TransitionState = TRANS_BS_Alt
    End
    
    TransitionState = TRANS_SB_Alt
    End
    
    TransitionState = TRANS_BR_Alt
    End
    
    TransitionState = TRANS_RB_Alt
    End
    
 End
  

  ; ***DESIGN parameters ***

  Side = Isengard
  EditorSorting = UNIT
	ThreatLevel = 1.0
  ThingClass = HORDE_UNIT
  CommandPoints = 2

  TransportSlotCount = 1
  
	WeaponSet
		Conditions = None 
		Weapon = PRIMARY    IsengardPikemanPike ;BALANCE Isengard Pikeman Weapon
	End
	
  ArmorSet
    Conditions      = None
    Armor           = PikemenArmor
    DamageFX        = NormalDamageFX
  End
  ArmorSet
		Conditions      = PLAYER_UPGRADE
		Armor           = PikemenHeavyArmor
		DamageFX        = NormalDamageFX	
  End

  	; This is required so that the build phase lasts as long as the anim.
	BuildFadeInOnCreateTime = 0 ; 2.0 ;temporarily set to 0

  VisionRange = VISION_STANDARD_MELEE
  ShroudClearingRange = SHROUD_CLEAR_STANDARD

  BountyValue = ISENGARD_URUKPIKEMAN_BOUNTY_VALUE
  DisplayName = OBJECT:IsengardPikeman
  CrushableLevel = 0  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CrusherLevel = 0 ;What can I crush?: 0 = small animals, 1 = infantry, 2 = trees, 3 = vehicles
 	CrushRevengeWeapon = AntiCavalryInfantryCrushRevenge

  CommandSet = IsengardPikemanCommandSet

 
  ; *** AUDIO Parameters ***;

	VoiceAmbushed				= UrukWarriorVoiceAmbushed
	VoiceAttack				= UrukPikemanVoiceAttack
	VoiceAttack2				= OrcVoiceAttack2
	VoiceAttackCharge			= UrukPikemanVoiceAttackCharge
	VoiceAttackStructure			= UrukPikemanVoiceAttackBuilding
	VoiceAttackMachine			= UrukPikemanVoiceAttack
	VoiceCreated				= CampOrcCreateUrukPikeman
	VoiceFullyCreated 			= CampOrcCreateUrukPikeman
	VoiceMove				= UrukPikemanVoiceMove
	VoiceMove2				= OrcVoiceMove2
	VoiceMoveToCamp				= UrukPikemanVoiceMoveCamp
	VoiceMoveWhileAttacking			= UrukPikemanVoiceDisengage
	VoicePriority				= 52
	VoiceRetreatToCastle			= UrukPikemanVoiceRetreat
	VoiceSelect				= UrukPikemanVoiceSelect
	VoiceSelect2				= UrukPikemanVoiceSelect2
	VoiceSelectBattle 			= UrukPikemanVoiceSelectBattle
	VoiceGuard			= UrukPikemanVoiceMove
	
	VoiceEnterStateAttack			= UrukPikemanVoiceEnterStateAttack
	VoiceEnterStateAttackCharge		= UrukPikemanVoiceEnterStateAttackCharge
	VoiceEnterStateAttackStructure		= UrukPikemanVoiceEnterStateAttackBuilding
	VoiceEnterStateAttackMachine		= UrukPikemanVoiceEnterStateAttackBuilding
	VoiceEnterStateMove			= UrukPikemanVoiceEnterStateMove
	VoiceEnterStateMoveToCamp		= UrukPikemanVoiceEnterStateMoveCamp
	VoiceEnterStateMoveWhileAttacking	= UrukPikemanVoiceEnterStateDisengage
	VoiceEnterStateRetreatToCastle		= UrukPikemanVoiceEnterStateRetreat
	
  UnitSpecificSounds
	VoiceGarrison        			= UrukPikemanVoiceGarrison
      VoiceEnterUnitSlaughterHouse	= UrukPikemanVoiceGarrisonSlaughterHouse
  End

	EvaEventDamagedOwner			= UnitUnderAttack 		;Eva event to trigger when unit is damaged
	;EvaEventDieOwner			= GroupPikemanDie		;Eva event to trigger on unit's death. NOTICE THAT this is only for permanent deaths
										;For deaths you can respawn from, use the DeathFX

	Behavior = LargeGroupAudioUpdate ModuleTag_LGAU				;Tie into LargeGroupAudio system
		Key = Orc_Infantry UrukHai_Pikeman
	End

	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		MaxUpdateRangeCap = 800
		AnimationSound = Sound:BodyFallOrc			Animation:IUPikeman_SKL.IUPikeman_DIEC		Frames:56
		AnimationSound = Sound:BodyFallOrc			Animation:IUPikeman_SKL.IUPikeman_DTHA		Frames:23
		AnimationSound = Sound:BodyFallOrc			Animation:IUPikeman_SKL.IUPikeman_DTHB		Frames:34
		AnimationSound = Sound:BodyFallOrc			Animation:IUPikeman_SKL.IUPikeman_LNDD		Frames:2
	End


  ; *** ENGINEERING Parameters ***

  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE THROWN_OBJECT GRAB_AND_DROP URUK ATTACK_NEEDS_LINE_OF_SIGHT
 

	Body					=	PorcupineFormationBodyModule ModuleTag_porcupineFormation
		CheerRadius 			= EMOTION_CHEER_RADIUS
		MaxHealth			=	ISENGARD_URUKPIKEMAN_HEALTH				;BALANCE Isengard Pikeman Health
		MaxHealthDamaged		=	ISENGARD_URUKPIKEMAN_HEALTH_DAMAGED		
		;RecoveryTime			=	ISENGARD_URUKPIKEMAN_HEALTH_RECOVERY_TIME	
		DamageWeaponTemplate		=	PikemenPorcupineDamage
		CrushDamageWeaponTemplate	=	PikemenPorcupineCrushDamage
		
	End

  	;Heavy Armor
	Behavior = ArmorUpgrade ArmorUpgradeModuleTag
		TriggeredBy = Upgrade_IsengardHeavyArmor
		ArmorSetFlag			= PLAYER_UPGRADE
	End

	Behavior = SubObjectsUpgrade Armor_Upgrade
		TriggeredBy		= Upgrade_IsengardHeavyArmor
		UpgradeTexture	= IUUrukahi.tga 0 IUUrukahi_HA.tga
		UpgradeTexture	= IUUrukahi_L.tga 0 IUUrukahi_HA.tga
		UpgradeTexture	= IUUrukahi_M.tga 0 IUUrukahi_HA.tga
		RecolorHouse			= Yes
		ExcludeSubobjects		= Forged_Blade
	End
		
	Behavior = SubObjectsUpgrade ForgedBlades_Upgrade
		TriggeredBy		= Upgrade_IsengardForgedBlades
		ShowSubObjects	= Forged_Blade
	End
	
	Behavior = StatusBitsUpgrade ForgedBlades_UpgradeDetection
		TriggeredBy		= Upgrade_IsengardForgedBlades
	End
	
  Behavior = AIUpdateInterface ModuleTag_03
    AutoAcquireEnemiesWhenIdle = Yes ATTACK_BUILDINGS
	AILuaEventsList			   = IsengardFighterFunctions    
    MoodAttackCheckRate        = 500
    HoldGroundCloseRangeDistance = 80
    AttackPriority				= 	AttackPriority_Spearman
  End

  LocomotorSet
    Locomotor     = HumanLocomotor
    Condition     = SET_NORMAL
    Speed         = NORMAL_EVIL_FAST_MEMBER_SPEED		
  End

  Behavior = PhysicsBehavior ModuleTag_04
    GravityMult				= 1.0
    ShockStunnedTimeLow		= 1400  ;msec
    ShockStunnedTimeHigh	= 2400 ;msec
    ShockStandingTime		= 2133 ;msec
  End
  
 ; Doesn't work.  We are a melee horde now.  So we are just gonna have one weapon
;  Behavior = AimWeaponBehavior AimWeaponModuleTag
;		AimHighThreshold =  0.15
;	End
 
  Behavior = SlowDeathBehavior ModuleTag_05
    DeathTypes = ALL -KNOCKBACK
    SinkDelay = 3000
    SinkRate = 0.40     ; in Dist/Sec
    DestructionDelay = 8000
    Sound = INITIAL UrukVoiceDie			;UrukWarriorVoiceDie
  End
 
  Behavior = SquishCollide ModuleTag_06
    ;nothing
  End
 
  Behavior = SlowDeathBehavior ModuleTag_07
    ; Same as normal death, but no sound (sound already played by SoundImpact = ... )
    DeathTypes = NONE +KNOCKBACK
    SinkDelay = 3000
    SinkRate = 0.40     ; in Dist/Sec
    DestructionDelay = 8000
    Sound = INITIAL UrukVoiceDie
  End
 
  Behavior = BezierProjectileBehavior ModuleTag_08 ; Module starts asleep, and wakes up when thrown.
    ; 
    FirstHeight = 24  ; Height of Bezier control points above highest intervening terrain
    SecondHeight = 24
    FirstPercentIndent = 30% ; Percentage of shot distance control points are placed
    SecondPercentIndent = 70%
    TumbleRandomly = Yes

    CrushStyle = Yes ; I don't detonate, I just hit
    DieOnImpact = Yes
    BounceCount = 1   ; When I hit the ground, I'll arc again
    BounceDistance = 40 ; this far
    BounceFirstHeight = 24  ; Height of Bezier control points above highest intervening terrain
    BounceSecondHeight = 24
    BounceFirstPercentIndent = 20% ; Percentage of shot distance control points are placed
    BounceSecondPercentIndent = 80%

    GroundHitFX       = FX_ThrownRockGroundHit
    GroundBounceFX    = FX_ThrownRockBounceHit
  End

  Behavior = HordeMemberCollide ModuleTag_HMC
    ;nothing
  End
 
 ; Doesn't work.  We are a melee horde now.  So we are just gonna have one weapon
;  Behavior = DualWeaponBehavior ModuleTag_09
 ;   SwitchWeaponOnCloseRangeDistance = 40
  ;End

  Geometry = CYLINDER
  GeometryMajorRadius = 8.0
  GeometryMinorRadius = 8.0
  GeometryHeight = 19.2
  GeometryIsSmall = Yes

  Shadow = SHADOW_DECAL
  ShadowSizeX = 21;
  ShadowSizeY = 21;
  ShadowTexture = ShadowI;
End

;------------------------------------------------------------------------------
; aka Isengard Banner Orc, WhiteHandBanner
; Used with Uruk Hai, Urik Pikeman, Uruk Crossbowmen
Object IsengardBannerOrc
  ; *** ART Parameters ***

  ; This is required for garrisoned objects - please put in all objects.
  ButtonImage = BIArmory_WhiteHandBanner
  
  SelectPortrait         = UPIsengard_banner

  Draw = W3DScriptedModelDraw ModuleTag_01
  
		OkToChangeModelColor = Yes  
		StaticModelLODMode = Yes
  
    DefaultModelConditionState
      Model = IUBanner_SKN
    End

		; morph for regular banner. Probably won't use. ( see BannerCarrierUpdate below for reference )
		ModelConditionState = USER_1
			Model = IUBanner_SKN
		End
		
		; morph for Warg Riders ( see BannerCarrierUpdate below for reference )
		ModelConditionState = USER_2
			Model = IUWargBnr_SKN
			Skeleton = IUWargBnr_SKL
		End

		ModelConditionState COMING_OUT_OF_FACTORY
			Model = IUBanner_SKN
		End
										
		; these lines allow the adornment hide/show to work correctly
		; for reasons currently unknown to most
		ExtraPublicBone = Glow
		ExtraPublicBone = Adornment
		ExtraPublicBone = Streamers
		
		;-------------------------------BEGIN Warg Rider Section--------------------------------------
				
		
		
		AnimationState				=	PASSENGER USER_2
			Animation				=	Grabbed
				AnimationName		=	IUWargBnr_GBDA
				AnimationMode		=	LOOP
			End
		End
		
		AnimationState				=	FREEFALL USER_2
			Animation				=	Falling
				AnimationName		=	IUWargBnr_FLYB
				AnimationMode		=	LOOP
				AnimationBlendTime	=	20
			End
		End

		AnimationState				=	STUNNED_FLAILING USER_2
			Animation				=	JustDie
				AnimationName       =	IUWargBnr_FLYB
				AnimationMode       =	LOOP
			End
		End
		
		AnimationState				=	DYING SPLATTED USER_2
			Animation				=	splatted
				AnimationName		=	IUWargBnr_LNDA
				AnimationMode		=	ONCE
			End
		End
		
		; This is the no-spawn-horse type of death
		AnimationState				=	DYING USER_2    ; normal Death
			Animation				=	JustDie
				AnimationName		=	IUWargBnr_DIEB
				AnimationMode		=	ONCE
			End
		End

                AnimationState				=	STUNNED_STANDING_UP USER_2
			Animation				=	StandUp
				AnimationName       =	IUWargBnr_GTPA
				AnimationMode       =	ONCE
				AnimationSpeedFactorRange = 1.5 1.5
			End
		End

		AnimationState				=	STUNNED USER_2
			Animation				=	Land
				AnimationName       =	IUWargBnr_LNDA
				AnimationMode       =	ONCE
			End
		End

		
		AnimationState = MOVING FIRING_OR_PREATTACK_A USER_2
			Animation = TrotAndFire
				AnimationName = IUWargBnr_ATRA
				AnimationMode = LOOP
			End
			Flags = RANDOMSTART
			;ParticleSysBone = None InfantryDustTrails
	    End
		
		
		AnimationState				=	TURN_LEFT_HIGH_SPEED USER_2
			Animation				=	MTurnLeft
				AnimationName		=	IUWargBnr_TNL1
				AnimationMode		=	LOOP
			End
		End

		AnimationState				=	TURN_RIGHT_HIGH_SPEED USER_2 
			Animation				=	MTurnRight
				AnimationName		=	IUWargBnr_TNR1
				AnimationMode		=	LOOP
			End
		End
		
		AnimationState				=	TURN_LEFT USER_2  
			Animation				=	TurnRight
				AnimationName		=	IUWargBnr_TRNL
				AnimationMode		=	LOOP
			End
			BeginScript
				CurDrawableHideSubObject("Forged_Blade")
			EndScript
		End

		AnimationState				=	TURN_RIGHT USER_2 
			Animation				=	TurnRight
				AnimationName		=	IUWargBnr_TRNR
				AnimationMode		=	LOOP
			End
			BeginScript
				CurDrawableHideSubObject("Forged_Blade")
			EndScript
		End

		AnimationState				=	MOVING ACCELERATE USER_2 
			ShareAnimation			=	Yes
			Animation				=	Accelerate
				AnimationName		=	IUWargBnr_ACCL
				AnimationMode		=	ONCE
			End
;            		ParticleSysBone                 = None GenericSiegeTrailDust
		End
	
		AnimationState				=	MOVING DECELERATE USER_2
			ShareAnimation			=	Yes
			Animation				=	Decelerate
				AnimationName		=	IUWargBnr_DECL
				AnimationMode		=	ONCE
			End
 ;           		ParticleSysBone                 = None GenericSiegeTrailDust
		End
		
		AnimationState				= MOVING BACKING_UP USER_2
			Animation				= BackingUp
				AnimationName		= IUWargBnr_BAKA
				AnimationMode		= LOOP
			End
			Flags = RANDOMSTART
		End
		
		AnimationState				=	MOVING USER_2
			ShareAnimation			=	Yes
			Animation				=	RunA
				AnimationName		=	IUWargBnr_RUNA
				AnimationMode		=	LOOP
			End
			BeginScript
				CurDrawableHideSubObject("Forged_Blade")
			EndScript
			;ParticleSysBone			=	None CalvaryDustTrails  
		End
		
		AnimationState				=   FIRING_OR_PREATTACK_A USER_2
			Animation				=	AttackA3
				AnimationName		=	IUWargBnr_ATA3
				AnimationMode		=	ONCE
				UseWeaponTiming		=   Yes
			End
			Flags					=	RESTART_ANIM_WHEN_COMPLETE
		End
		
		AnimationState				=	ATTACKING USER_2
			Animation				=	AttackA3
				AnimationName		=	IUWargBnr_ATA2
				AnimationMode		=	LOOP
			End
			;Flags					=	RESTART_ANIM_WHEN_COMPLETE
		End


		AnimationState = WAR_CHANT USER_2
			Animation = Chant
				AnimationName			= IUWargBnr_TNTA
				AnimationMode			= LOOP
			End
		End
				
		AnimationState					=	EMOTION_ALERT EMOTION_AFRAID USER_2
			Animation					=	Apprehensive
				AnimationName			=	IUWargBnr_APPA
				AnimationMode			=	LOOP	;Change this to ONCE if adding additional anims
			End
		End
		
		AnimationState					= EMOTION_AFRAID USER_2 ;coming soon
			Animation					= FERA
				AnimationName			= IUWargBnr_FERA
				AnimationMode			= LOOP
			End
		End
				
		AnimationState					= EMOTION_TAUNTING USER_2
			Animation					= TNTA
				AnimationName			= IUWargBnr_TNTA
				AnimationMode			= LOOP
			End
		End
		AnimationState					= EMOTION_POINTING USER_2
			Animation					= Pointing1
				AnimationName			= IUWargBnr_PNTA
				AnimationMode			= LOOP
			End
		End
		AnimationState					= EMOTION_CELEBRATING USER_2
			Animation                   = CHRA
				AnimationName			= IUWargBnr_CHRA
				AnimationMode			= ONCE
			End
		End
		
		AnimationState					= EMOTION_ALERT USER_2
			Animation					= ALERT
				AnimationName			= IUWargBnr_IDLA
				AnimationMode			= LOOP
			End
			BeginScript
				CurDrawableHideSubObject("Forged_Blade")
			EndScript
		End
		
		AnimationState				=	SELECTED USER_2
			;SimilarRestart			=   Yes
			Animation				=	AtAttention
				AnimationName		=	IUWargBnr_ATNB
				AnimationMode		=	LOOP
			End
			StateName           = Selected2
			BeginScript
				CurDrawableHideSubObject("Forged_Blade")
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Idle2" then CurDrawableSetTransitionAnimState("TRANS_Idle_to_Selected2") end
			EndScript
		End
		
		AnimationState = USER_2
			Animation				=	IdleC
				AnimationName		=	IUWargBnr_IDLC
				AnimationMode		=	LOOP
				AnimationBlendTime	=	10
			End
			StateName           = Idle2 
			BeginScript
				CurDrawableHideSubObject("Forged_Blade")
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Selected2" then CurDrawableSetTransitionAnimState("TRANS_Selected_to_Idle2") end
			EndScript
		End		
		
		;-------------------------------END Warg Rider Section--------------------------------------
		
		IdleAnimationState
			Animation = IDLD
				AnimationName = IUBanner_SKL.IUBanner_IDLD
				AnimationMode = ONCE
				AnimationPriority = 5
				AnimationBlendTime  = 15
			End
			Flags               = RESTART_ANIM_WHEN_COMPLETE
			StateName = Idle
		    BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "CloseRange"	then CurDrawableSetTransitionAnimState("Trans_Sword_To_Idle") return end
				if Prev == "STATE_Selected"	then CurDrawableSetTransitionAnimState("TRANS_Selected_To_Idle") return end
			EndScript
		End
		
		AnimationState							= PASSENGER
			Animation							= Grabbed
				AnimationName					= IUBanner_SKL.IUBanner_FLLA
				AnimationMode					= LOOP
			End
		End
		
		AnimationState							= FREEFALL
			Animation							= Falling
				AnimationName					= IUBanner_SKL.IUBanner_FLYB
				AnimationMode					= LOOP
				AnimationBlendTime				= 10
			End
		End
		
		AnimationState 							= STUNNED_FLAILING
 			Animation 							= Flying
				AnimationName 					= IUBanner_SKL.IUBanner_FLYB
	      			AnimationMode 					= LOOP
			End
      			Flags = RANDOMSTART
    		End
    		
    		AnimationState							= DYING SPLATTED
 			Animation						= Splattered_On_Ground_1
				AnimationName					= IUBanner_SKL.IUBanner_LNDA
				AnimationMode					= ONCE
			End
    		End
		
     AnimationState = DYING AFLAME
			Animation = Flaming_Death
	      AnimationName = IUBanner_SKL.MUHarOvr_MFDA
		    AnimationMode = ONCE
			End
    End
    
    AnimationState = DYING WEAPONSTATE_CLOSE_RANGE
			Animation = Dying_1
	      AnimationName = IUBanner_SKL.IUBanner_DIEC
		    AnimationMode = ONCE
			End
			Animation = Dying_2
	      AnimationName = IUBanner_SKL.IUBanner_DIED
		    AnimationMode = ONCE
			End
    End

    AnimationState = DYING
			Animation = Dying_1
	      AnimationName = IUBanner_SKL.IUBanner_DIEA
		    AnimationMode = ONCE
			End
			Animation = Dying_2
	      AnimationName = IUBanner_SKL.IUBanner_DIEB
		    AnimationMode = ONCE
			End
    End
 
	AnimationState  = COMING_OUT_OF_FACTORY
		Animation = Being_Built
			AnimationName		= IUBanner_SKL.IUBanner_RUNB
			AnimationMode		= LOOP
			AnimationBlendTime	= 0
		End
	End	
	
	
	
	AnimationState = MOVING FIRING_OR_PREATTACK_A
		Animation = TrotAndFire
			AnimationName = IUBanner_SKL.IUBanner_ATRA
			AnimationMode = LOOP
		End
		Flags = RANDOMSTART
		;ParticleSysBone = None InfantryDustTrails
    End
	
		
	AnimationState = MOVING BACKING_UP
		Animation				= BackingUp
			AnimationName		= IUBanner_SKL.IUBanner_BAKA
			AnimationMode		= LOOP
			AnimationSpeedFactorRange 1.5 1.5
		End
		Flags = RANDOMSTART
	End
	
	AnimationState = MOVING EMOTION_TERROR
		Animation = Moving
			AnimationName = IUBanner_SKL.IUBanner_RUNA
		    AnimationMode = LOOP
		End
		StateName = Moving
		Flags = RANDOMSTART
;		ParticleSysBone = None InfantryDustTrails
    End
		
	AnimationState				=	MOVING DAMAGED
		Flags					=	RANDOMSTART
		Animation				=	IWKA
			AnimationName		=	IUBanner_SKL.IUBanner_IWKA
			AnimationMode		=	LOOP
		End
	End
 
    AnimationState = MOVING
			Animation = Moving
	      AnimationName = IUBanner_SKL.IUBanner_RUNA
		    AnimationMode = LOOP
			End
			StateName = Moving
			Flags = RANDOMSTART
;			ParticleSysBone = None InfantryDustTrails
    End



    ; --- stunned anims
	AnimationState = STUNNED_STANDING_UP
 			Animation = Standing_Back_Up
				AnimationName = IUBanner_SKL.IUBanner_GTPA
	      AnimationMode = ONCE
	      AnimationSpeedFactorRange = 1.5 1.5
			End
    End

    AnimationState = STUNNED
 			Animation = Splattered_On_Ground_1
				AnimationName = IUBanner_SKL.IUBanner_LNDA
	      AnimationMode = ONCE
			End
; 			Animation = Splattered_On_Ground_2
;				AnimationName = IUBanner_SKL.IUBanner_LNDB			This anim does not exist.
;	      AnimationMode = ONCE
;			End
    End

    

    TransitionState = Trans_Idle_To_Sword
			Animation = Transition
	      AnimationName = IUBanner_SKL.IUBanner_STHA
		    AnimationMode = ONCE
			End
    End

    TransitionState = Trans_Moving_To_Sword
			Animation = Transition
			  AnimationName = IUBanner_SKL.IUBanner_STHC
				AnimationMode = ONCE
			End
    End

    TransitionState = Trans_Sword_To_Idle
		Animation = Transition
			AnimationName = IUBanner_SKL.IUBanner_STHB
		    AnimationMode = ONCE
		End
    End
    
    

; --------- With Sword ------------

	AnimationState = FIRING_OR_PREATTACK_A WEAPONSTATE_CLOSE_RANGE
		Animation = ATKA1
			AnimationName = IUBanner_SKL.IUBanner_ATKA
			AnimationMode = ONCE
			UseWeaponTiming		= Yes
		End
		StateName = CloseRange
	End

    AnimationState = WAR_CHANT
		Animation = Chant
			AnimationName = IUBanner_SKL.IUBanner_IDLC
			AnimationMode = LOOP
		End
	End
	
	
			
	;-emotions--
	AnimationState							= EMOTION_AFRAID
		Animation							= FERA
			AnimationName					= IUBanner_SKL.IUBanner_FERA
			AnimationMode					= LOOP
		End
		Flags = RANDOMSTART
	End
	AnimationState							= EMOTION_TAUNTING
		Animation							= TNTA
			AnimationName					= IUBanner_SKL.IUBanner_IDLC
			AnimationMode					= LOOP
		End
	End
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;  Just let the rest of his horde point.
;	AnimationState							= EMOTION_POINTING
;		Animation							= Pointing1
;			AnimationName					= IUBanner_SKL.IUBanner_PNTA
;			AnimationMode					= LOOP
;		End
;	End
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
	AnimationState							= EMOTION_CELEBRATING
		Animation                           = CHRA
			AnimationName					= IUBanner_SKL.IUBanner_CHRA
			AnimationMode					= ONCE
		End
	End
	
	AnimationState							= EMOTION_ALERT
		Animation							= ALERT
			AnimationName					= IUBanner_SKL.IUBanner_IDLB
			AnimationMode					= LOOP
		End
		Flags								= RESTART_ANIM_WHEN_COMPLETE RANDOMSTART
	End

    AnimationState = WEAPONSTATE_CLOSE_RANGE
 		Animation = Close_Range_Idle
				AnimationName = IUBanner_SKL.IUBanner_IDLB
				AnimationMode = ONCE
		End
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "Moving" then CurDrawableSetTransitionAnimState("Trans_Moving_To_Sword") return end
			if Prev == "Idle"   then CurDrawableSetTransitionAnimState("Trans_Idle_To_Sword") return end
		EndScript
		StateName = CloseRange
    End
   
   	AnimationState        = SELECTED
		StateName           = STATE_Selected
		Animation = IDLA
			AnimationName = IUBanner_SKL.IUBanner_IDLA
			AnimationMode = LOOP
		End
		;Animation = IDLC
		;	AnimationName = IUBanner_SKL.IUBanner_IDLC
		;	AnimationMode = ONCE
		;End
		;Flags               = RESTART_ANIM_WHEN_COMPLETE
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_Idle_To_Selected") end
			if Prev == "CloseRange"	then CurDrawableSetTransitionAnimState("Trans_Sword_To_Idle") return end
		EndScript
	End
	
	
	
	TransitionState					=	TRANS_Idle_to_Selected
		Animation					=	ATNA
			AnimationName			=	IUBanner_SKL.IUBanner_ATNA
			AnimationMode			=	ONCE
		End
	End
	
	TransitionState					=	TRANS_Selected_to_Idle
		Animation					=	ATNB
			AnimationName			=	IUBanner_SKL.IUBanner_ATNB
			AnimationMode			=	ONCE
		End
	End
	
	
	TransitionState					=	TRANS_Idle_to_Selected2
		Animation					=	ATNA
			AnimationName			=	IUWargBnr_ATND
			AnimationMode			=	ONCE
		End
	End
	
	TransitionState					=	TRANS_Selected_to_Idle2
		Animation					=	ATNA
			AnimationName			=	IUWargBnr_ATNE
			AnimationMode			=	ONCE
		End
	End
End

	Draw = W3DScriptedModelDraw DustEffects
	    DefaultModelConditionState
	      Model = None
	    End
	    IdleAnimationState
	    End
	    AnimationState = WADING
			ParticleSysBone = None FootstepSlash
	    End
	    AnimationState = MOVING USING_COMBO_LOCOMOTOR
	    End
	    AnimationState = MOVING ACCELERATE USER_2
			ParticleSysBone = None GenericSiegeTrailDust
	    End
	    AnimationState = MOVING DECELERATE USER_2
			ParticleSysBone = None GenericSiegeTrailDust
	    End
	    AnimationState = MOVING ACCELERATE
			ParticleSysBone = None GenericSiegeTrailDust
	    End
	    AnimationState = MOVING DECELERATE
			ParticleSysBone = None GenericSiegeTrailDust
	    End
	    AnimationState = MOVING EMOTION_TERROR
	    End
	    AnimationState = MOVING
	    End
	End
 
  ; ***DESIGN parameters ***
  Side = Isengard
  EditorSorting = UNIT
	ThreatLevel = 1.0
  TransportSlotCount = 1
  WeaponSet
    Conditions = None 
    Weapon = PRIMARY    IsengardBannerSword
    AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
  End
  WeaponSet
    Conditions = CLOSE_RANGE CONTESTING_BUILDING
    Weapon = PRIMARY    IsengardBannerSword
    AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
  End

  ArmorSet
    Conditions      = None
    Armor           = NoArmor
    DamageFX        = NormalDamageFX
  End

  VisionRange = VISION_STANDARD_MELEE
  ShroudClearingRange = SHROUD_CLEAR_STANDARD

  BountyValue = ISENGARD_BANNER_BOUNTY_VALUE 			
  DisplayName = OBJECT:IsengardBanner
	CrusherLevel = 0			;Can I crush anything?
	CrushableLevel = 0			;What am I?:        0 = for infantry, 1 = for trees, 2 = cavalry/heroes
	MountedCrusherLevel = 1		;Crush level when mounted.
	MountedCrushableLevel = 3	;Crusable level when mounted.
 	CrushRevengeWeapon = BasicInfantryCrushRevenge

;  CommandSet = GondorFighterCommandSet
  CommandSet = IsengardBannerOrcCommandSet
  CommandPoints = 0


; *** AUDIO Parameters ***;

	VoiceAttack			= UrukWarriorVoiceAttack
	VoiceAttack2			= OrcVoiceAttack2
	VoiceCombineWithHorde 		= IsengardBannerVoiceJoin
	VoiceCreated			= CampOrcCreateWhiteHandBanner
	VoiceFullyCreated 		= CampOrcCreateWhiteHandBanner
	VoiceMove			= IsengardBannerVoiceMove
	VoiceMove2			= OrcVoiceMove2
	VoicePriority			= 7
	VoiceSelect			= IsengardBannerVoiceSelect
	VoiceSelect2			= GondorBannerVoiceSelect2
	VoiceGuard			= IsengardBannerVoiceMove
	

	SoundImpact 			= ImpactHorse

	EvaEventDamagedOwner		= UnitUnderAttack 		;Eva event to trigger when unit is damaged

	Behavior = LargeGroupAudioUpdate ModuleTag_LGAU			;Tie into LargeGroupAudio system
		Key = Orc_Infantry UrukHai_Banner
	End


  ; *** ENGINEERING Parameters ***

  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER CAN_USE_SIEGE_TOWER SCORE THROWN_OBJECT BANNER GRAB_AND_DROP IGNORES_SELECT_ALL

    BuildCost           = ISENGARD_BANNER_BUILDCOST
    BuildTime           = ISENGARD_BANNER_BUILDTIME
 
  Body = ActiveBody ModuleTag_02
    MaxHealth         = ISENGARD_BANNER_HEALTH				;BALANCE Ranger Health
    MaxHealthDamaged  = ISENGARD_BANNER_HEALTH_DAMAGED			
    ;RecoveryTime      = ISENGARD_BANNER_HEALTH_RECOVERY_TIME		
  End
 
  Behavior = AIUpdateInterface ModuleTag_03
    AutoAcquireEnemiesWhenIdle = No 
    MoodAttackCheckRate        = 500
    HoldGroundCloseRangeDistance = 40
    AttackPriority				= 	AttackPriority_Infantry
    AILuaEventsList				=	IsengardFighterFunctions
    FadeOnPortals				= Yes
  End

	Behavior = EmotionTrackerUpdate	Module_EmotionTracker
		TauntAndPointDistance		=	350		; max distance to taunted/pointed objet
		TauntAndPointUpdateDelay	=	1000	; how often scan (milliseconds)
		TauntAndPointExcluded		=	NONE
		AfraidOf					=	NONE +RohanTreeBerd +GondorGwaihir +RohanEntFir +RohanEntAsh +RohanEntBirch +MordorCaveTroll +MordorMountainTroll +MordorDrummerTroll +MordorFellBeast +MordorMumakil;Must be SCARY kindof as well.
		AlwaysAfraidOf				=	NONE +MordorBalrog +RohanOathbreaker ;+MordorWitchKing +MordorWitchKingOnFellBeast 
		PointAt						=	NONE +GondorGwaihir 

		HeroScanDistance			=	150
		FearScanDistance			=	250

		AddEmotion	=	Terror_Base
		AddEmotion	=	Doom_Base
		AddEmotion	=	UncontrollableFear_Base_Evil
		AddEmotion	=	FearIdle_Base
		AddEmotion	=	FearBusy_Base
		AddEmotion	=	Point_Base
		AddEmotion	=	Taunt_Base	
		AddEmotion	=	CheerIdle_Base
		AddEmotion	=	CheerBusy_Base
		AddEmotion	=	HeroCheerIdle_Base
		AddEmotion	=	HeroCheerBusy_Base
		AddEmotion	=	Alert_Base
	End	
	
  LocomotorSet
    Locomotor     = HumanLocomotor
    Condition     = SET_NORMAL
    Speed         = NORMAL_EVIL_FAST_MEMBER_SPEED
  End
  
LocomotorSet
	Locomotor = HorseLocomotor
	Condition = SET_MOUNTED 
	Speed     = NORMAL_CAVALRY_MEMBER_SPEED
End

  Behavior = DualWeaponBehavior ModuleTag_13
    SwitchWeaponOnCloseRangeDistance = 76
  End

  Behavior = PhysicsBehavior ModuleTag_04
    GravityMult = 1.0
    ShockStunnedTimeLow		= 1400	;msec
    ShockStunnedTimeHigh	= 2400	;msec
    ShockStandingTime		= 2133	;msec
  End
 
  Behavior = SlowDeathBehavior ModuleTag_05
    DeathTypes = ALL -KNOCKBACK
    SinkDelay = 3000
    SinkRate = 0.40     ; in Dist/Sec
    DestructionDelay = 8000
    Sound = INITIAL UrukVoiceDie			
  End
 
  Behavior = SquishCollide ModuleTag_06
    ;nothing
  End
 
  Behavior = SlowDeathBehavior ModuleTag_07
    ; Same as normal death, but no sound (sound already played by SoundImpact = ... )
    DeathTypes = NONE +KNOCKBACK
    SinkDelay = 3000
    SinkRate = 0.40     ; in Dist/Sec
    DestructionDelay = 8000
    Sound = INITIAL UrukVoiceDie
  End

  Behavior = BezierProjectileBehavior ModuleTag_08 ; Module starts asleep, and wakes up when thrown.
    ; 
    FirstHeight = 24  ; Height of Bezier control points above highest intervening terrain
    SecondHeight = 24
    FirstPercentIndent = 30% ; Percentage of shot distance control points are placed
    SecondPercentIndent = 70%
    TumbleRandomly = Yes

    CrushStyle = Yes ; I don't detonate, I just hit
    DieOnImpact = Yes
    BounceCount = 1   ; When I hit the ground, I'll arc again
    BounceDistance = 40 ; this far
    BounceFirstHeight = 24  ; Height of Bezier control points above highest intervening terrain
    BounceSecondHeight = 24
    BounceFirstPercentIndent = 20% ; Percentage of shot distance control points are placed
    BounceSecondPercentIndent = 80%

    GroundHitFX       = FX_ThrownRockGroundHit
    GroundBounceFX    = FX_ThrownRockBounceHit
  End

  ; Stealths like the General's Pathfinder
  ; Not anymore
  ;Behavior = StealthUpdate ModuleTag_09
  ;  StealthDelay                = 0           ; msec
  ;  StealthForbiddenConditions  = MOVING ; stays stealthy while attacking
  ;  FriendlyOpacityMin          = 10.0%
  ;  FriendlyOpacityMax          = 60.0%
  ;  PulseFrequency              = 750   ; msec
  ;  MoveThresholdSpeed          = 3
  ;  OrderIdleEnemiesToAttackMeUponReveal  = Yes
  ;End

  ; Detects stealth like the General's Pathfinder
;  Behavior = StealthDetectorUpdate ModuleTag_10
;    DetectionRate   = 500   ; how often to rescan for stealthed things in my sight (msec)
;    ;DetectionRange = ??? ; enable this for independant balancing!
;    CanDetectWhileGarrisoned  = No ;Garrisoned means being in a structure that you units can shoot out of.
;    CanDetectWhileContained   = No ;Contained means being in a transport or tunnel network.
;  End
 
 	;;; COMBINE WITH NEAREST HORDE SPECIAL POWER ;;;
	Behavior = CombineHordeSpecialPower ModuleTag_CombineWithNearest
		SpecialPowerTemplate    = SpecialAbilityCombineWithNearest
		InitiateSound = IsengardBannerVoiceJoin
		ScanRange = 15000.0		;making it large so it scans an entire map
	End

	;/////////////////////////////////////////////////////////
	;// BannerCarrierUpdate module
	;/////////////////////////////////////////////////////////
	Behavior = BannerCarrierUpdate BannerCarrierUpdateModuleTag
		IdleSpawnRate			= 10000							; spawn a new member every n seconds when idle (in miliseconds)
		MeleeFreeUnitSpawnTime		= 20000							; n miliseconds units must not have been fighting to be able to spawn units when idle (in miliseconds)
		DiedRespawnTime			= 10000							; how much time must pass after Banner Carrier dies before horde can spawn another
		MeleeFreeBannerReSpawnTime	= 20000							; how much time since horde has been fighting before a new Banner Carrier can be respawned
		
		BannerMorphFX		= FX_BannerCarrierMorph					; name of particle FX to use when the BannerCarrier morphs into the dest unit type
		UnitSpawnFX			= FX_BannerCarrierSpawnUnit				; name of particle FX to use when the BannerCarrier spawns a new unit
		
		; Depending on the unit type selected, we will morph into one of the following 
		; unitTypes by setting the appropriate model condition state
		MorphCondition		= UnitType:IsengardWargRider		Locomotor:SET_MOUNTED	ModelState:"USER_2 MOUNTED"		
		
		; White Hand Banner - we don't morph into any other unit art, so no morph conditions are needed
		
		; show/hide subobjects based on various experience levels
		;ExpLevelDraw		= Level:1		SubObject:Hide:Adornment		SubObject:Hide:Streamers			SubObject:Hide:Glow
		;ExpLevelDraw		= Level:2		SubObject:Hide:Adornment		SubObject:Hide:Streamers			SubObject:Hide:Glow
		;ExpLevelDraw		= Level:3		SubObject:Hide:Adornment		SubObject:Hide:Streamers			SubObject:Hide:Glow
		;ExpLevelDraw		= Level:4		SubObject:Hide:Adornment		SubObject:Hide:Streamers			SubObject:Hide:Glow
		
		;ExpLevelDraw		= Level:5		SubObject:Show:Adornment		SubObject:Show:Streamers			SubObject:Hide:Glow
		;ExpLevelDraw		= Level:6		SubObject:Show:Adornment		SubObject:Show:Streamers			SubObject:Hide:Glow	
		;ExpLevelDraw		= Level:7		SubObject:Show:Adornment		SubObject:Show:Streamers			SubObject:Hide:Glow	
		;ExpLevelDraw		= Level:8		SubObject:Show:Adornment		SubObject:Show:Streamers			SubObject:Hide:Glow	
		;ExpLevelDraw		= Level:9		SubObject:Show:Adornment		SubObject:Show:Streamers			SubObject:Hide:Glow
		
		;ExpLevelDraw		= Level:10		SubObject:Show:Adornment		SubObject:Show:Streamers			SubObject:Show:Glow
	End
	
  Geometry = CYLINDER
  GeometryMajorRadius = 8.0
  GeometryMinorRadius = 8.0
  GeometryHeight = 19.2
  GeometryIsSmall = Yes
  Shadow = SHADOW_DECAL
  ShadowSizeX = 19;
  ShadowSizeY = 19;
  ShadowTexture = ShadowI;
End

;------------------------------------------------------------------------------
; Warg Rider WargRiders
Object IsengardWargRider
	; *** ART Parameters ***
    
	; This is required for garrisoned objects - please put in all objects.
	ButtonImage = BIWargPit_Riders

	SelectPortrait         = UPIsenguard_WargRiders
	;SelectPortrait         = BIWargPit_Riders;SP_Gondor_Horseman

	Draw = W3DHordeModelDraw ModuleTag_01

		WadingParticleSys = EntRipples

		OkToChangeModelColor = Yes
		  
		StaticModelLODMode = Yes
		; specify options for static LODs
		LodOptions	= LOW
			AllowMultipleModels		=	ALLOW_MULTIPLE_MODELS_LOW
			MaxRandomTextures		=	MAX_RANDOM_TEXTURES_LOW
			MaxRandomAnimations		=	MAX_RANDOM_ANIMATIONS_LOW
			MaxAnimFrameDelta		=	MAX_ANIM_FRAME_DELTA_LOW
		End
		
		LodOptions	= MEDIUM
			AllowMultipleModels		=	ALLOW_MULTIPLE_MODELS_MED
			MaxRandomTextures		=	MAX_RANDOM_TEXTURES_MED
			MaxRandomAnimations		=	MAX_RANDOM_ANIMATIONS_MED
			MaxAnimFrameDelta		=	MAX_ANIM_FRAME_DELTA_MED
		End
		
		LodOptions	= HIGH
			AllowMultipleModels		=	ALLOW_MULTIPLE_MODELS_HIGH
			MaxRandomTextures		=	MAX_RANDOM_TEXTURES_HIGH
			MaxRandomAnimations		=	MAX_RANDOM_ANIMATIONS_HIGH
			MaxAnimFrameDelta		=	MAX_ANIM_FRAME_DELTA_HIGH
		End
	

		DefaultModelConditionState
			Model					= IUWARGRIDR_SKN
			Skeleton				= IUWARGRIDR_SKL
		End

;		ModelConditionState WEAPONSET_PLAYER_UPGRADE
;			Model					= IUWARGRIDR_SKN
;			Skeleton				= IUWARGRIDR_SKL
;		End

		ModelConditionState = COMING_OUT_OF_FACTORY
			Model					= IUWARGRIDR_SKN
			Skeleton				= IUWARGRIDR_SKL
		End

		
;	    AnimationState  = JUST_BUILT
;			Animation = Being_Built
;				AnimationName		=	IUWARGRIDR_RUNA ;IUWARGRIDR_BLDB
;				AnimationMode		=	ONCE
;				AnimationBlendTime	=	0
;			End
;		End

		; -------------- STUNNED ANIMS ----------------
		AnimationState						= PASSENGER
			Animation						= Grabbed
				AnimationName				= IUWARGRIDR_GBDA
				AnimationMode				= LOOP
			End
		End
		
		AnimationState						= FREEFALL
			Animation						= freefall
				AnimationName				= IUWARGRIDR_FLYB
				AnimationMode				= LOOP
				AnimationBlendTime			= 10
			End
		End
		
		AnimationState				=	STUNNED_FLAILING 
			Animation				=	JustDie
				AnimationName       =	IUWARGRIDR_FLYB
				AnimationMode       =	LOOP
			End
		End

		AnimationState				=	DYING SPLATTED
			Animation				=	splatted
				AnimationName		=	IUWARGRIDR_LNDA
				AnimationMode		=	ONCE
			End
		End
		
		

		AnimationState				=	DYING
			Animation				=	JustDie
				AnimationName		=	IUWARGRIDR_DIEB
				AnimationMode		=	ONCE
			End
		End		
		
		AnimationState				=	STUNNED_STANDING_UP
			Animation				=	StandUp
				AnimationName       =	IUWARGRIDR_GTPA
				AnimationMode       =	ONCE
				AnimationSpeedFactorRange = 1.5 1.5
			End
		End
		
		AnimationState				=	STUNNED 
			Animation				=	Land
				AnimationName       =	IUWARGRIDR_LNDA
				AnimationMode       =	ONCE
			End
		End

		; -------------- MOVING ANIMS ---------------
		

		AnimationState  = COMING_OUT_OF_FACTORY
			Animation = Being_Built
				AnimationName		= IUWARGRIDR_RUNA
				AnimationMode		= LOOP
				AnimationBlendTime	= 0
			End
		End		
		
		AnimationState = MOVING FIRING_OR_PREATTACK_A
			Animation = TrotAndFire
				AnimationName = IUWARGRIDR_ATRA
				AnimationMode = LOOP
			End
			Flags = RANDOMSTART
			;ParticleSysBone = None InfantryDustTrails
	    End
		
		AnimationState				=	TURN_LEFT_HIGH_SPEED  
			Animation				=	MTurnLeft
				AnimationName		=	IUWARGRIDR_TNL1
				AnimationMode		=	LOOP
			End
		End

		AnimationState				=	TURN_RIGHT_HIGH_SPEED
			Animation				=	MTurnRight
				AnimationName		=	IUWARGRIDR_TNR1
				AnimationMode		=	LOOP
			End
		End
		
		AnimationState				=	TURN_LEFT  
			Animation				=	TurnRight
				AnimationName		=	IUWARGRIDR_TRNL
				AnimationMode		=	LOOP
				AnimationSpeedFactorRange = 2.0 2.0
			End
		End

		AnimationState				=	TURN_RIGHT 
			Animation				=	TurnRight
				AnimationName		=	IUWARGRIDR_TRNR
				AnimationMode		=	LOOP
				AnimationSpeedFactorRange = 2.0 2.0
			End
		End

		AnimationState				=	MOVING ACCELERATE 
			Animation				=	Accelerate
				AnimationName		=	IUWARGRIDR_ACCL
				AnimationMode		=	ONCE
			End
;            ParticleSysBone				= None GenericSiegeTrailDust
		End
	
		AnimationState				=	MOVING DECELERATE
			Animation				=	Decelerate
				AnimationName		=	IUWARGRIDR_DECL
				AnimationMode		=	ONCE
			End
;            ParticleSysBone				= None GenericSiegeTrailDust
		End
		
		AnimationState				=	MOVING BACKING_UP
			Animation				=	BackingUp
				AnimationName		=	IUWARGRIDR_BAKA
				AnimationMode		=	LOOP
			End
		End
		
		AnimationState				=	MOVING
			ShareAnimation			=	Yes
			Animation				=	RunA
				AnimationName		=	IUWARGRIDR_RUNA
				AnimationMode		=	LOOP
			End
			;ParticleSysBone			=	None CalvaryDustTrails  
		End
		
		; ----------- ATTACKING ANIMS --------------		
		AnimationState				=	BETWEEN_FIRING_SHOTS_A
			Animation				=	BetweenFiringShots
				AnimationName		=	IUWARGRIDR_IDLA
				AnimationMode		=	LOOP
				AnimationBlendTime	=   10
			End
		End

		AnimationState				=	FIRING_OR_PREATTACK_A
			Animation				=	AttackA3
				AnimationName		=	IUWARGRIDR_ATKA
				AnimationMode		=	ONCE
				UseWeaponTiming		=	Yes
				AnimationBlendTime  =	10
			End
		End
		
		AnimationState					= EMOTION_UNCONTROLLABLY_AFRAID
			Animation					= FERA
				AnimationName			= IUWARGRIDR_FERA
				AnimationMode			= LOOP
			End
		End
				
		AnimationState				=	ATTACKING
			Animation				=	AttackA3
				AnimationName		=	IUWARGRIDR_ATKA
				AnimationMode		=	MANUAL
			End
		End

		; ----------- WAR CHANT ANIMS -------------
		AnimationState = WAR_CHANT
			Animation = Chant
				AnimationName = IUWARGRIDR_TNTA
				AnimationMode = LOOP
			End
		End

		; ----------- EMOTION ANIMS ---------------
		AnimationState					= EMOTION_ALERT EMOTION_AFRAID
			Animation					= Apprehensive
				AnimationName			= IUWARGRIDR_APPA
				AnimationMode			= LOOP	;Change this to ONCE if adding additional anims
			End
		End
		
		AnimationState					= EMOTION_AFRAID ;coming soon
			Animation					= FERA
				AnimationName			= IUWARGRIDR_FERA
				AnimationMode			= LOOP
			End
		End
				
		AnimationState					= EMOTION_TAUNTING
			Animation					= TNTA
				AnimationName			= IUWARGRIDR_TNTA
				AnimationMode			= LOOP
			End
			Flags					= RANDOMSTART	
		End
		AnimationState					= EMOTION_POINTING
			Animation					= Pointing1
				AnimationName			= IUWARGRIDR_PNTA
				AnimationMode			= LOOP
			End
			Flags					= RANDOMSTART	
		End
		AnimationState					= EMOTION_CELEBRATING
			Animation                   = CHRA
				AnimationName			= IUWARGRIDR_CHRA
				AnimationMode			= ONCE
			End
			Flags					= RANDOMSTART
		End
		
		; ----------- IDLE ANIMS ---------------
		AnimationState							= EMOTION_ALERT
			StateName							= STATE_Ready 
			Animation							= ALERT
				AnimationName					= IUWargRidr_IDLA
				AnimationMode					= LOOP
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Selected" then CurDrawableSetTransitionAnimState("Selected_to_Ready") end
			EndScript	
		End
		
		; ----------- SELECTED ANIMS --------------
		AnimationState				=	SELECTED
			SimilarRestart			=   Yes
			Animation				=	AtAttention
				AnimationName		=	IUWARGRIDR_ATNB
				AnimationMode		=	LOOP
			End
			StateName				= Selected
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Idle" then CurDrawableSetTransitionAnimState("Idle_to_Selected") end
				if Prev == "STATE_Ready" then CurDrawableSetTransitionAnimState("Ready_to_Selected") end
			EndScript
		End

		IdleAnimationState
			Animation
				AnimationName		=	IUWARGRIDR_IDLC
				AnimationMode		=	ONCE
				AnimationBlendTime	=	10
				AnimationPriority   =	20
			End
			Animation
				AnimationName		=	IUWARGRIDR_IDLD
				AnimationMode		=	ONCE
				AnimationBlendTime	=	10
				AnimationPriority   =	1
			End
			Animation
				AnimationName		=	IUWARGRIDR_IDLE
				AnimationMode		=	ONCE
				AnimationBlendTime	=	10
				AnimationPriority   =	1
			End
			StateName				= Idle 
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Selected" then CurDrawableSetTransitionAnimState("Selected_to_Idle") end
			EndScript
		End

		;------------ TRANSITION ANIMS ----------------
		TransitionState       = Selected_to_Idle
			Animation           = ATNE
				AnimationName		=	IUWARGRIDR_ATNE
				AnimationMode		=	ONCE
				AnimationSpeedFactorRange = 0.7 1.3
			End
		End
		
		TransitionState       = Idle_to_Selected
			Animation           = ATND
				AnimationName     = IUWARGRIDR_ATND
				AnimationMode   =	ONCE
				AnimationSpeedFactorRange = 0.7 1.3
			End
		End

		TransitionState       = Ready_to_Selected
			Animation           = ATNC
				AnimationName     = IUWARGRIDR_ATNC
				AnimationMode   =	ONCE
				AnimationSpeedFactorRange = 0.7 1.3
			End
		End

		TransitionState       = Selected_to_Ready
			Animation           = ATNCReverse
				AnimationName     = IUWARGRIDR_ATNC
				AnimationMode   =	ONCE_BACKWARDS
				AnimationSpeedFactorRange = 0.7 1.3
			End
		End
		
	End
	
	Draw = W3DScriptedModelDraw DustEffects
	    DefaultModelConditionState
	      Model = None
	    End
	    IdleAnimationState
	    End
	    AnimationState = MOVING WADING
			ParticleSysBone = None FootstepSlash
	    End
	    AnimationState = MOVING USING_COMBO_LOCOMOTOR
	    End
	    AnimationState = MOVING ACCELERATE
			ParticleSysBone = None GenericSiegeTrailDust
	    End
	    AnimationState = MOVING DECELERATE
			ParticleSysBone = None GenericSiegeTrailDust
	    End
	    AnimationState = MOVING
	    End
	End

	; ***DESIGN parameters ***
	Side = Isengard
	EditorSorting = UNIT
	ThreatLevel = 2.0
	TransportSlotCount = 1
	
	WeaponSet
		Conditions = None 
		Weapon = PRIMARY    WargRiderWeapon
		AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End
	
	WeaponSet
		Conditions = PLAYER_UPGRADE 
		Weapon = PRIMARY    WargRiderWeaponUpgraded
		AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End
	
	ArmorSet
		Conditions      = None
		Armor           = CavalryArmor
		DamageFX        = NormalDamageFX
	End
	ArmorSet
		Conditions      = PLAYER_UPGRADE
		Armor           = CavalryHeavyArmor
		DamageFX        = NormalDamageFX	
	End

	; This is required so that the build phase lasts as long as the anim.
	BuildFadeInOnCreateTime = 0
	
  	VisionRange = VISION_STANDARD_HORSE
  	ShroudClearingRange = SHROUD_CLEAR_STANDARD

	BountyValue = ISENGARD_WARGRIDER_BOUNTY_VALUE
	DisplayName = OBJECT:IsengardWargRider
	CrushableLevel = 3  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
	CrusherLevel = 1 ;What can I crush?: 0 = small animals, 1 = infantry, 2 = trees, 3 = vehicles
	
	CrushWeapon = WargCrush

	CommandSet = WargRiderCommandSet
	CommandPoints = 4
	
	MinCrushVelocityPercent = 50 ; Has to be moving at at least 50% of full speed.
	CrushDecelerationPercent =20 ; Lose 10 percent of max velocity when crushing.
	
	RamPower = 30;
	RamZMult = 0.5;


	; ******************************************* AUDIO Parameters ***********************************;

	VoiceAttack					= WargRiderVoiceAttack
	VoiceAttack2				= OrcVoiceAttack2
	VoiceAttackStructure			= WargRiderVoiceAttackBuilding
	VoiceAttackMachine			= WargRiderVoiceAttack
	VoiceAttackCharge				= WargRiderVoiceAttackCharge
	VoiceCreated				= CampOrcCreateWargRider
	VoiceFullyCreated 			= CampOrcCreateWargRider
	VoiceMoveWhileAttacking			= WargRiderVoiceDisengage
	VoiceMove					= WargRiderVoiceMove
	VoiceMove2					= OrcVoiceMove2
	VoiceMoveToCamp				= WargRiderVoiceMoveCamp
	VoicePriority				= 44
	VoiceRetreatToCastle			= WargRiderVoiceRetreat
	VoiceSelect					= WargRiderVoiceSelect
	VoiceSelect2				= WargRiderVoiceSelect2
	VoiceSelectBattle 			= WargRiderVoiceSelectBattle
	VoiceGuard					= WargRiderVoiceMove
	

	VoiceEnterStateAttack			= WargRiderVoiceEnterStateAttack
	VoiceEnterStateAttackStructure	= WargRiderVoiceEnterStateAttackBuilding
	VoiceEnterStateAttackMachine		= WargRiderVoiceEnterStateAttackBuilding
	VoiceEnterStateAttackCharge		= WargRiderVoiceEnterStateAttackCharge
	VoiceEnterStateMoveWhileAttacking	= WargRiderVoiceEnterStateDisengage
	VoiceEnterStateMove			= WargRiderVoiceEnterStateMove
	VoiceEnterStateMoveToCamp		= WargRiderVoiceEnterStateMoveCamp
	VoiceEnterStateRetreatToCastle	= WargRiderVoiceEnterStateRetreat
	
	SoundAmbient				= WargAmbienceVOX
	SoundImpact					= ImpactHorse
	;SoundMoveLoop				= WargMoveFootsteps
	;SoundCrushing				= WargRiderCrushing 		; Sound made when crushing another unit underhoof

;WargRiderVoiceFearCower
;WargRiderVoiceFearDisperse
;WargRiderVoiceFearRegroup
;WargRiderVoiceTauntEnemy

	;UnitSpecificSounds
	;	VoiceGarrison			= NoSound
	;End

	EvaEventDamagedOwner		= UnitUnderAttack 	;Eva event to trigger when unit is damaged
	;EvaEventDieOwner		= GroupWargRiderDie	;Eva event to trigger on unit's death. NOTICE THAT this is only for permanent deaths
								;For deaths you can respawn from, use the DeathFX

	Behavior = LargeGroupAudioUpdate ModuleTag_LGAU		; Tie into LargeGroupAudio system
		Key = Warg
	End

	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		MaxUpdateRangeCap = 800
		AnimationSound = Sound:WargMoveFootsteps 		Animation:IUWARGRIDR_SKL.IUWARGRIDR_RUNA 	Frames:0
		AnimationSound = Sound:WargMoveFootsteps 		Animation:IUWARGRIDR_SKL.IUWARGRIDR_TNL1 	Frames:0
		AnimationSound = Sound:WargMoveFootsteps 		Animation:IUWARGRIDR_SKL.IUWARGRIDR_TNR1 	Frames:0
		AnimationSound = Sound:WargMoveFootsteps 		Animation:IUWARGRIDR_SKL.IUWARGRIDR_TRNL 	Frames:0
		AnimationSound = Sound:WargMoveFootsteps 		Animation:IUWARGRIDR_SKL.IUWARGRIDR_TRNR 	Frames:0
		AnimationSound = Sound:WargMoveFootsteps 		Animation:IUWARGRIDR_SKL.IUWARGRIDR_ACCL 	Frames:0

		AnimationSound = Sound:WargRiderTauntCallouts 	Animation:IUWARGRIDR_SKL.IUWARGRIDR_TNTA 	Frames:27

		AnimationSound = Sound:WargTauntCallouts 		Animation:IUWARGRIDR_SKL.IUWARGRIDR_TNTA 	Frames:26
		AnimationSound = Sound:WargTauntCallouts 		Animation:IUWARGRIDR_SKL.IUWARGRIDR_ATND 	Frames:7 
		AnimationSound = Sound:WargTauntCallouts 		Animation:IUWARGRIDR_SKL.IUWARGRIDR_HWLA 	Frames:17
		AnimationSound = Sound:WargTauntFootstep 		Animation:IUWARGRIDR_SKL.IUWARGRIDR_TNTA 	Frames:7 12 64 73

		AnimationSound = Sound:WargSaddleFoleySingles 	Animation:IUWARGRIDR_SKL.IUWARGRIDR_TNTA 	Frames:25 
		AnimationSound = Sound:WargSaddleFoleySingles 	Animation:IUWARGRIDR_SKL.IUWARGRIDR_RUNA 	Frames:5 
		AnimationSound = Sound:WargSaddleFoleySingles 	Animation:IUWARGRIDR_SKL.IUWARGRIDR_TNL1 	Frames:5 
		AnimationSound = Sound:WargSaddleFoleySingles 	Animation:IUWARGRIDR_SKL.IUWARGRIDR_TNR1 	Frames:5 
		AnimationSound = Sound:WargSaddleFoleySingles 	Animation:IUWARGRIDR_SKL.IUWARGRIDR_ACCL 	Frames:5 
		AnimationSound = Sound:WargSaddleFoleySingles 	Animation:IUWARGRIDR_SKL.IUWARGRIDR_ATNA 	Frames:5 
		AnimationSound = Sound:WargSaddleFoleySingles 	Animation:IUWARGRIDR_SKL.IUWARGRIDR_ATND 	Frames:5 
		AnimationSound = Sound:WargSaddleFoleySingles 	Animation:IUWARGRIDR_SKL.IUWARGRIDR_GTPA 	Frames:5 101 
		AnimationSound = Sound:WargSaddleFoleySingles 	Animation:IUWARGRIDR_SKL.IUWARGRIDR_HWLA 	Frames:15 
		AnimationSound = Sound:WargSaddleFoleySingles 	Animation:IUWARGRIDR_SKL.IUWARGRIDR_RDYA 	Frames:5 
		AnimationSound = Sound:WargSaddleFoleySingles 	Animation:IUWARGRIDR_SKL.IUWARGRIDR_RDYB 	Frames:5

		AnimationSound = Sound:BuildingWargPitRiderDrop	Animation:IUWARGRIDR_SKL.IUWARGRIDR_BLDB	Frames:44

		AnimationSound = Sound:BodyFallOrc		 	Animation:IUWARGRIDR_SKL.IUWARGRIDR_DIEB	Frames:10
		AnimationSound = Sound:BodyFallGenericNoArmor	Animation:IUWARGRIDR_SKL.IUWARGRIDR_DIEB	Frames:45
		AnimationSound = Sound:BodyFallOrc		 	Animation:IUWARGRIDR_SKL.IUWARGRIDR_LNDA	Frames:1 17
	End


	; *** ENGINEERING Parameters ***

	RadarPriority = UNIT
	ThingClass = CAVALRY_UNIT

	KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS CAVALRY SCORE GRAB_AND_DROP
	
	Body = ActiveBody BodyModuleTag
		CheerRadius 		= EMOTION_CHEER_RADIUS
		MaxHealth			= ISENGARD_WARGRIDER_HEALTH				;BALANCE Warg Health
		MaxHealthDamaged	= ISENGARD_WARGRIDER_HEALTH_DAMAGED		
		;RecoveryTime		= ISENGARD_WARGRIDER_HEALTH_RECOVERY_TIME		
	End

;;	In the horde.	
;   	Behavior = EmotionTrackerUpdate	Module_EmotionTracker
;		TauntAndPointDistance		=	300		; max distance to taunted/pointed objet
;		TauntAndPointUpdateDelay	=	1000	; how often scan (milliseconds)
;
;		AddEmotion	=	Terror_Base
;		AddEmotion	=	Alert_Base
;	End
	
	 ;Heavy Armor
	Behavior = ArmorUpgrade ArmorUpgradeModuleTag
		TriggeredBy = Upgrade_IsengardHeavyArmor
		ArmorSetFlag = PLAYER_UPGRADE
	End

	Behavior = SubObjectsUpgrade Armor_Upgrade
		TriggeredBy		= Upgrade_IsengardHeavyArmor
		UpgradeTexture	= IUWargRidr.tga 0 IUWargRidr_HA.tga
		UpgradeTexture	= IUWargRidr_A.tga 0 IUWargRidr_HA.tga
		UpgradeTexture	= IUWargRidr_AL.tga 0 IUWargRidr_HA.tga
		RecolorHouse	= Yes
		ExcludeSubobjects = Forged_Blade
	End	
	
	; Sword Upgrade
	Behavior = WeaponSetUpgrade ModuleTag_Fire
		TriggeredBy = Upgrade_IsengardForgedBlades
	End
	
	Behavior = SubObjectsUpgrade ForgedBlades_Upgrade
		TriggeredBy		= Upgrade_IsengardForgedBlades
		ShowSubObjects	= Forged_Blade
	End
		
	Behavior = AIUpdateInterface ModuleTag_03
		AutoAcquireEnemiesWhenIdle = Yes ATTACK_BUILDINGS
		AILuaEventsList	=	WargRiderFunctions
	End

	LocomotorSet
		Locomotor = WargLocomotor
		Condition = SET_NORMAL 
		Speed     = 100 ;80
	End	

	Behavior = PhysicsBehavior ModuleTag_04
		GravityMult = 1.0
		ShockStandingTime = 2533	;msec
	End
	
	; IsengardWargRider
	Behavior = HordeMemberCollide ModuleTag_HMC
		;nothing
	End
	
	Behavior = SquishCollide ModuleTag_06
		;nothing
	End

	Behavior = SlowDeathBehavior ModuleTag_08
		; Die and don't spawn horse
		DeathTypes = ALL 
		SinkDelay = 5000
		SinkRate = 1.50     ; in Dist/Sec
		DestructionDelay = 17000
		Sound = INITIAL WargVoxDie
	End
	
	Geometry = CYLINDER
	GeometryMajorRadius = 16
	GeometryMinorRadius = 16
	GeometryHeight = 20.0
	GeometryIsSmall = No

	Shadow = SHADOW_DECAL
	ShadowSizeX = 30;
	ShadowSizeY = 20;
	ShadowTexture = ShadowI;

End

;------------------------------------------------------------------------------
ChildObject IsengardWargBannerRider IsengardWargRider
End

;------------------------------------------------------------------------------
ChildObject IsengardWargRider_Slaved IsengardWargRider

  	EvaEnemyUnitSightedEvent = WargRiderCreepSighted ; Special event for wargs showing up. Helps distinguish the real enemies from random creeps

	KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS CAVALRY SCORE PATH_THROUGH_INFANTRY HAS_HEALTH_BAR

	DisplayName = OBJECT:GenericWargRider
	Behavior = SlavedUpdate ModuleTag_Slave
		GuardMaxRange		= 75.0
		GuardWanderRange	= 75.0
	End

	Body = ActiveBody ModuleTag_02
		MaxHealth         = 200                  
		MaxHealthDamaged  = 200
		;RecoveryTime      = 10000
	End
	
	Behavior = EmotionTrackerUpdate	Module_EmotionTracker
	End

	CrushableLevel = 1  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
	CrusherLevel = 0
	IsTrainable		= No

End


;------------------------------------------------------------------------------
; Saruman
Object IsengardSaruman
	; *** ART Parameters ***

    ; ButtonImage for Heros is button image on Hero Select UI to select hero. HI = HeroIcon or HeroImage.
	; This is required for garrisoned objects - please put in all objects.
	ButtonImage = HISaruman
    
    ; SelectPortrait for Heros is portrait behind skill buttons. HP = HeroPortrait.
	SelectPortrait = HPSaruman

	Draw = W3DScriptedModelDraw ModuleTag_DRAW
	
		OkToChangeModelColor = Yes
	
		StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD
    	
		ExtraPublicBone = STAFFFX

		DefaultModelConditionState
			Model               = IUSaruman_SKN
			WeaponLaunchBone    = PRIMARY STAFFFX 
		End
		
		; --- Idle Anims
		IdleAnimationState
			StateName = Idle
			Animation = IDLB ; Bored Idle
				AnimationName       = IUSaruman_SKL.IUSaruman_IDLB
				AnimationMode       = ONCE
				AnimationPriority   = 20
			End
			
			Animation = IDLC ; Bored Idle
				AnimationName       = IUSaruman_SKL.IUSaruman_IDLC
				AnimationMode       = ONCE
				AnimationPriority   = 3
			End
			
			Animation = IDLD ; Bored Fidget
				AnimationName       = IUSaruman_SKL.IUSaruman_IDLD
				AnimationMode       = ONCE
				AnimationPriority   = 1
			End

			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Selected" then CurDrawableSetTransitionAnimState("TRANS_Selected_To_Idle") end
			EndScript						
		End
		
		AnimationState        = STUNNED_FLAILING 
			Flags               = RANDOMSTART
			Animation           = FLYA
				AnimationName     = IUSaruman_SKL.IUSaruman_FLYA
				AnimationMode     = LOOP
			End
		End

		; --- Dying anims
		AnimationState        = DYING SPLATTED
			Animation
				AnimationName     = IUSaruman_SKL.IUSaruman_LNDA
				AnimationMode     = ONCE
			End
		End
		AnimationState        = DYING AFLAME
			Animation = DieAflame
				AnimationName     = IUSaruman_SKL.IUSaruman_MFDA
				AnimationMode     = LOOP
			End
		End
		AnimationState        = DYING
			Animation = DieB
				AnimationName     = IUSaruman_SKL.IUSaruman_DIEB
				AnimationMode     = ONCE
			End			
		End
		
		; --- Stunned anims
		
		AnimationState        = STUNNED_STANDING_UP
			Animation
				AnimationName     = IUSaruman_SKL.IUSaruman_GTPA
				AnimationMode     = ONCE
				AnimationSpeedFactorRange = 1.5 1.5
			End
		End
		AnimationState        = STUNNED 
			Animation
				AnimationName     = IUSaruman_SKL.IUSaruman_LNDA
				AnimationMode     = ONCE
			End
		End

		;;; DOMINATE SPECIAL POWER ;;;
		AnimationState				= PACKING_TYPE_1
			StateName				= Dominate
			Animation
				AnimationName		= IUSaruman_SKL.IUSaruman_TNTB
				AnimationMode		= ONCE
				AnimationBlendTime  = 5
			End
			FXEvent	= Frame:6	Name: FX_SarumanDominateAtSelf
		End
		
		;;; SPEECH CRAFT SPECIAL POWER ;;;
		AnimationState				= PACKING_TYPE_2
			StateName				= Spped_Craft
			Animation
				AnimationName		= IUSaruman_SKL.IUSaruman_TNTB
				AnimationMode		= ONCE
			End
			FXEvent	= Frame:15	Name: FX_SpeechCraft
		End

		; --- Moving Anims
		
		
 		AnimationState = MOVING FIRING_OR_PREATTACK_A
			Animation = TrotAndFire
				AnimationName = IUSaruman_SKL.IUSaruman_ATRA
				AnimationMode = LOOP
			End
			Flags = RANDOMSTART
			;ParticleSysBone = None InfantryDustTrails
	    End
		
		; This is what happens when Saruman gives uses his speech craft
 		AnimationState				= MOVING USING_SPECIAL_ABILITY
 			Flags					= RANDOMSTART
 			Animation				= IUSaruman_RUNB
 				AnimationName     = IUSaruman_SKL.IUSaruman_RUNB
 				AnimationMode     = LOOP
 			End
 		End
 		
 		
 		
 		AnimationState			= MOVING BACKING_UP
			Animation			= BackingUp
				AnimationName	= IUSaruman_SKL.IUSaruman_BAKA
				AnimationMode	= LOOP
			End
			Flags = RANDOMSTART
		End
		
		AnimationState        = MOVING ATTACKING
 			Animation			  = IUSaruman_RUNB ;RUNB
 				AnimationName     = IUSaruman_SKL.IUSaruman_RUNB
 				AnimationMode     = LOOP
 			End
		End
		
		AnimationState        = MOVING
 			Animation				= IUSaruman_RUNA
 				AnimationName     = IUSaruman_SKL.IUSaruman_RUNA
 				AnimationMode     = LOOP
 			End
		End

		;;; FIRE BALL SPECIAL POWER ;;;
		AnimationState		  = SPECIAL_WEAPON_ONE
			Animation				= Throwing Fireball
				AnimationName		= IUSaruman_SKL.IUSaruman_ATKB
				AnimationMode		= ONCE
			End
			FrameForPristineBonePositions = 27
		End
		 		 		
 		;;; WIZARD BLAST SPECIAL POWER ;;;
 		AnimationState        =  SPECIAL_WEAPON_TWO
			StateName = Attacking
			Animation
				AnimationName       = IUSaruman_SKL.IUSaruman_ATKB
				AnimationMode       = ONCE
			End
			FrameForPristineBonePositions = 27
		End
		
		; --- Attacking Anims [Weapon_A]
		AnimationState        = FIRING_OR_PREATTACK_A			
			Animation           = IUSaruman_ATKC
				AnimationName     = IUSaruman_SKL.IUSaruman_ATKC
				AnimationMode     = ONCE
				UseWeaponTiming		=	Yes	
			End
			
			Animation           = IUSaruman_ATKD
				AnimationName     = IUSaruman_SKL.IUSaruman_ATKD 
				AnimationMode     = ONCE
				UseWeaponTiming		=	Yes	
			End			
		End

		AnimationState = WAR_CHANT
			;Animation = Chant
			;	AnimationName = IUSaruman_SKL.IUSaruman_TNTA
			;	AnimationMode = ONCE
			;End
			Animation = Chant
				AnimationName = IUSaruman_SKL.IUSaruman_TNTB
				AnimationMode = LOOP
			End			
		End
		
		AnimationState = EMOTION_TAUNTING
			Animation = Chant
				AnimationName = IUSaruman_SKL.IUSaruman_TNTA
				AnimationMode = ONCE
			End
			Animation = Chant
				AnimationName = IUSaruman_SKL.IUSaruman_TNTB
				AnimationMode = ONCE
			End			
			Flags						= RANDOMSTART RESTART_ANIM_WHEN_COMPLETE
		End

		; --------- Click and Hit Reactions ------------
		AnimationState = HIT_REACTION
			Animation = Hit_Level_1_a
				AnimationName = IUSaruman_SKL.IUSaruman_HITA
				AnimationMode = ONCE
			End
		End
		
		; ATTACKING
		AnimationState        = ATTACKING
			Animation           = ALERT_1
				AnimationName     = IUSaruman_SKL.IUSaruman_IDLA
				AnimationMode     = LOOP
			End
		End
				
		TransitionState					=	TRANS_Idle_to_Selected
			Animation					=	ATNA
				AnimationName			=	IUSaruman_SKL.IUSaruman_ATNA
				AnimationMode			=	ONCE
			End
		End
		
		TransitionState					=	TRANS_Selected_To_Idle
			Animation					=	ATND
				AnimationName			=	IUSaruman_SKL.IUSaruman_ATND
				AnimationMode			=	ONCE
			End
		End

		; LEVEL Up Anim
		AnimationState        = LEVELED
			Animation = Yippee
				AnimationName       = IUSaruman_SKL.IUSaruman_TNTA
				AnimationMode       = ONCE
			End
		End

 		; READY IDLE
		AnimationState        = EMOTION_ALERT
			Animation           = ALERT_1
				AnimationName     = IUSaruman_SKL.IUSaruman_IDLA
				AnimationMode     = LOOP
			End
		End
		
		AnimationState				=	SELECTED
			StateName				=	Selected
			SimilarRestart			=   Yes			
			Animation				=	ATNB			
				AnimationName		=	IUSaruman_SKL.IUSaruman_ATNB
				AnimationMode		=	LOOP
				AnimationBlendTime  =   15
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_Idle_to_Selected") end
			EndScript
		End
	End

	; ***DESIGN parameters ***
	Side = Isengard
	EditorSorting = UNIT
	ThreatLevel = 5.0
	ThingClass = CHARACTER_UNIT
    	BuildCost           = SARUMAN_BUILDCOST				
   	BuildTime           = SARUMAN_BUILDTIME	

	DisplayMeleeDamage = SARUMAN_DAMAGE
			
	TransportSlotCount = 1
	WeaponSet
		Conditions = None 
		Weapon = PRIMARY    SarumanWeapon
		AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End
	ArmorSet
		Conditions      = None
		Armor           = HeroArmor
		DamageFX        = NormalDamageFX
	End
	
	VisionRange = VISION_STANDARD_MELEE
    ShroudClearingRange = SHROUD_CLEAR_HERO

  	BountyValue     = ISENGARD_SARUMAN_BOUNTY_VALUE
	DisplayName		= OBJECT:IsengardSaruman
	RecruitText		= CONTROLBAR:IsengardSarumanRecruit
	ReviveText		= CONTROLBAR:IsengardSarumanRevive
	Hotkey			= CONTROLBAR:IsengardSarumanHotkey
	CrushableLevel	= 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
	CrusherLevel = 0 ;What can I crush?: 0 = small animals, 1 = infantry, 2 = trees, 3 = vehicles

	CommandSet = SarumanCommandSet 
	CommandPoints = 0


	; *** AUDIO Parameters ***;

	VoiceAttack				= SarumanVoiceAttack
	VoiceAttackCharge			= SarumanVoiceAttackCharge
	;VoiceCreated			= CampOrcCreateSaruman		;this conflicts with his respawn dialogue line -- rehooked to spawn FX
	;VoiceFullyCreated 		= CampOrcCreateSaruman		;this conflicts with his respawn dialogue line -- rehooked to spawn FX
	VoiceFear 				= SarumanVoiceHelpMe
	VoiceGuard				= SarumanVoiceMove
	VoiceMove				= SarumanVoiceMove
	VoiceMoveWhileAttacking		= SarumanVoiceDisengage
	VoicePriority			= 92
	VoiceSelect				= SarumanVoiceSelect
	VoiceSelect2			= HeroVoiceSelect2
	VoiceSelectBattle 		= SarumanVoiceSelectBattle

	SoundImpact				= ImpactHorse

	EvaEventDamagedOwner		= UnitUnderAttack		;Eva event to trigger when unit is damaged
	EvaEventDieOwner			= SarumanDie		;Eva event to trigger on unit's death. NOTICE THAT this is only for permanent deaths
										;For deaths you can respawn from, use the DeathFX
	Behavior = LargeGroupAudioUpdate ModuleTag_LGAU		;Tie into LargeGroupAudio system
		Key = Hero
	End

	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		MaxUpdateRangeCap = 800
		AnimationSound = Sound:FootstepDirtA		Animation:IUSaruman_SKL.IUSaruman_ATKB	Frames:39 104
		AnimationSound = Sound:FootstepDirtA		Animation:IUSaruman_SKL.IUSaruman_ATKC 	Frames:43 92
		AnimationSound = Sound:FootstepDirtA		Animation:IUSaruman_SKL.IUSaruman_ATKD 	Frames:13 29 55
		AnimationSound = Sound:FootstepDirtA		Animation:IUSaruman_SKL.IUSaruman_ATRA	Frames:9 20 31 43 55 67
		AnimationSound = Sound:FootstepDirtA		Animation:IUSaruman_SKL.IUSaruman_DIEB	Frames:20
		AnimationSound = Sound:BodyFallGenericNoArmor	Animation:IUSaruman_SKL.IUSaruman_DIEB	Frames:34
		AnimationSound = Sound:FootstepDirtA		Animation:IUSaruman_SKL.IUSaruman_GTPA	Frames:51 75 113 139
		AnimationSound = Sound:FootstepDirtA		Animation:IUSaruman_SKL.IUSaruman_HITA	Frames:12
		AnimationSound = Sound:FootstepDirtA		Animation:IUSaruman_SKL.IUSaruman_IDLC	Frames:116 188
		AnimationSound = Sound:FootstepDirtA		Animation:IUSaruman_SKL.IUSaruman_IDLD	Frames:43
		AnimationSound = Sound:BodyFallGenericNoArmor	Animation:IUSaruman_SKL.IUSaruman_LNDA	Frames:4
		AnimationSound = Sound:FootstepDirtA		Animation:IUSaruman_SKL.IUSaruman_MFDA	Frames:10 19 29 39 48 57 66
		AnimationSound = Sound:FootstepDirtA		Animation:IUSaruman_SKL.IUSaruman_RUNA	Frames:11 22 34 46 57 69
		AnimationSound = Sound:FootstepDirtA		Animation:IUSaruman_SKL.IUSaruman_RUNB	Frames:10 23 36 49 62 75
		AnimationSound = Sound:FootstepDirtA		Animation:IUSaruman_SKL.IUSaruman_TNTA	Frames:36 49 103 123
		AnimationSound = Sound:FootstepDirtA		Animation:IUSaruman_SKL.IUSaruman_TNTB	Frames:24 111
	End


	; *** ENGINEERING Parameters ***

	RadarPriority = UNIT
	KindOf = HERO PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE NOTIFY_OF_PREATTACK ARMY_SUMMARY ATTACK_NEEDS_LINE_OF_SIGHT
	PathfindDiameter = 40.0

	Body = RespawnBody ModuleTag_RespawnBody
		CheerRadius 			= EMOTION_CHEER_RADIUS
		MaxHealth        		= SARUMAN_HEALTH		;BALANCE Saruman Health
		PermanentlyKilledByFilter	= NONE		;Who kills me permanently?
    		DodgePercent      		= HERO_DODGE_PERCENT
	End
	Behavior = RespawnUpdate ModuleTag_RespawnUpdate
		DeathAnim				= DYING
		;DeathAnim				= STUNNED			;Model condition to play when killed-to-respawn
		DeathFX				= FX_SarumanDieToRespawn	;FXList to play when killed-to-respawn
		DeathAnimationTime		= 5500 ;1133			;How long DeathAnim will take.
		InitialSpawnFX			= FX_SarumanInitialSpawn
		RespawnAnim				= LEVELED				;Animation to play when respawning.
		RespawnFX				= FX_SarumanRespawn		;FXList to play when respawning.
		RespawnAnimationTime		= 2000				;Time it takes for respawn to play.
		AutoRespawnAtObjectFilter	= NONE +CASTLE_KEEP		;Respawn at this location -- and at it's exit production point if possible.
		ButtonImage				= HISaruman
		
		;RespawnEntries determine the ruleset for how a character can be revived. Some units may automatically respawn, others
		;may require a specific revive action performed on him. You can specify different values for each level... or use Level:Any
		RespawnRules =			AutoSpawn:No	Cost:1200		Time:120000		Health:100%		;DEFAULT VALUES
		RespawnEntry =	Level:2				Cost:1400		Time:120000						;For other levels, only override what is different.
		RespawnEntry =	Level:3				Cost:1600		Time:120000
		RespawnEntry =	Level:4				Cost:1800		Time:120000
		RespawnEntry =	Level:5				Cost:2000		Time:180000
		RespawnEntry =	Level:6				Cost:2200		Time:180000
		RespawnEntry =	Level:7				Cost:2400		Time:180000
		RespawnEntry =	Level:8				Cost:2600		Time:180000
		RespawnEntry =	Level:9				Cost:2800		Time:180000
		RespawnEntry =	Level:10			Cost:3000		Time:180000
	End
	
	Behavior = AutoHealBehavior ModuleTag_SarumanHealing
		StartsActive = Yes
		HealingAmount = HERO_HEAL_AMOUNT
		HealingDelay = 1000
		StartHealingDelay = HERO_HEAL_DELAY
		HealOnlyIfNotInCombat = Yes
	End

	Behavior = AIUpdateInterface ModuleTag_03
		AutoAcquireEnemiesWhenIdle	= Yes ATTACK_BUILDINGS
		AttackPriority				= 	AttackPriority_Infantry
	End

	LocomotorSet
		Locomotor = HumanLocomotor
		Condition = SET_NORMAL 
		Speed     = NORMAL_EVIL_HERO_SPEED
	End
	
	LocomotorSet
		Locomotor = HumanWanderLocomotor
		Condition = SET_WANDER 
		Speed     = 32
	End
	
	Behavior = PhysicsBehavior ModuleTag_04
		GravityMult = 1.0
		ShockStandingTime		= 4000 ;msec
	End
	
	Behavior = SlowDeathBehavior ModuleTag_05
		DeathTypes = ALL 
		SinkDelay = 3000
		SinkRate = 0.40     ; in Dist/Sec
		DestructionDelay = 8000
		Sound = INITIAL SarumanVoiceDie
		ShadowWhenDead = No
	End
	
	Behavior = SquishCollide ModuleTag_06
		;nothing
	End
	
	Behavior = HitReactionBehavior HitReactionBehaviorModuleTag
		HitReactionLifeTimer1 = 3000	; level 1 (light  damage)  hit reaction animations in ms
		HitReactionThreshold1 = 5.0		; level 1 (light  damage) threshold trigger
	End

	;;;	FIRE BALL SPECIAL POWER ;;;
 	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_FireballEnabler
		SpecialPowerTemplate	= SpecialAbilitySarumanFireball
		TriggeredBy				= Upgrade_SarumanFireBall
	End

	Behavior = SpecialPowerModule ModuleTag_FireballStarter                      
		SpecialPowerTemplate		= SpecialAbilitySarumanFireball
		UpdateModuleStartsAttack	= Yes
		StartsPaused			= Yes
		InitiateSound			= SarumanVoiceAttackFireball
	End

	Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_FireballUpdate   
		SpecialPowerTemplate    = SpecialAbilitySarumanFireball
		WhichSpecialWeapon		= 1
		SkipContinue			= Yes

		UnpackTime             	= 800
		PreparationTime			= 1   
		PersistentPrepTime		= 1000 
		PackTime				= 100
		
		AwardXPForTriggering    = 0
		
		StartAbilityRange		= SARUMAN_FIREBALL_RANGE
		MustFinishAbility		= Yes
		SpecialWeapon			= SarumanFireball
	End

    
 	;;; DOMINATE SPECIAL POWER ;;;
 	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_DominateEnabler
		SpecialPowerTemplate		= SpecialAbilityDominateEnemy
		TriggeredBy					= Upgrade_SarumanDominate
	End

	Behavior = SpecialPowerModule ModuleTag_DominateEnemySpecialPowerModule
		SpecialPowerTemplate		= SpecialAbilityDominateEnemy 
		StartsPaused			= Yes
		UpdateModuleStartsAttack	= Yes
		InitiateSound			= SarumanVoiceDominate
	End

 	Behavior = DominateEnemySpecialPower ModuleTag_DominateEnemySpecialPower
        SpecialPowerTemplate		= SpecialAbilityDominateEnemy 
		UnpackingVariation			= 1
		StartAbilityRange			= 200.0
		
		DominateRadius				= 60 ;100 ;150
		DominatedFX					= FX_SarumanDominateTargets
		TriggerFX					= FX_SarumanDominateTrigger
		
		UnpackTime					= 2000
		PreparationTime				= 1   
		FreezeAfterTriggerDuration	= 2500 ; Hold AI for this long after we fire.		
    End
 
	;;; SPEECH CRAFT LEVEL GAIN SPECIAL POWER ;;;
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_KingsFavorEnabler
		SpecialPowerTemplate		= SpecialAbilityKingsFavor
		TriggeredBy					= Upgrade_SarumanSpeechCraft
	End

 	Behavior = SpecialPowerModule ModuleTag_KingsFavorSpecialPowerModule
        SpecialPowerTemplate		= SpecialAbilityKingsFavor
        StartsPaused				= Yes
		UpdateModuleStartsAttack	= Yes
        InitiateSound				= SarumanVoiceSpeechCraft
    End

 	Behavior = LevelGrantSpecialPower ModuleTag_KingsFavor
		SpecialPowerTemplate		= SpecialAbilityKingsFavor
		UnpackingVariation			= 2
		StartAbilityRange			= 200.0
;		LevelFX = FX_PorterDeliver

		Experience					= 50
		RadiusEffect				= 100
		AcceptanceFilter			= ANY +CAVALRY +INFANTRY -STRUCTURE -CASTLE_KEEP -BASE_FOUNDATION -HERO -MOVE_ONLY
		LevelFX						= FX_LevelUp
		
		UnpackTime					= 2000
		PreparationTime				= 1   
		FreezeAfterTriggerDuration	= 2500 ; Hold AI for this long after we fire.		
    End
	 
	;;; WIZARD BLAST SPECIAL POWER ;;;
	Behavior = SpecialPowerModule ModuleTag_WizardBlastStarter							
		SpecialPowerTemplate		= SpecialPowerTelekeneticPush
		UpdateModuleStartsAttack	= Yes
		InitiateSound			= SarumanVoiceAttackWizardBlast
	End	

	Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_WizardBlastUpdate
		SpecialPowerTemplate		= SpecialPowerTelekeneticPush
		WhichSpecialWeapon		    = 2 ;
		SkipContinue				= Yes
		UnpackTime					= 700
		PreparationTime				= 1   
		PersistentPrepTime			= 1000
		PackTime					= 100
		
		AwardXPForTriggering		= 0
		StartAbilityRange			= 80.0
		MustFinishAbility			= Yes
		SpecialWeapon				= SarumanWizardBlast
	End

	;;; AUTO ABILITY MODULE ;;;
	Behavior = AutoAbilityBehavior ModuleTag_AutoAbilityBehavior
	End		

	Behavior = ExperienceLevelCreate ModuleTag_MPLevelBonus
		LevelToGrant = 5
		MPOnly = Yes
	End

	Geometry				= CYLINDER
	GeometryMajorRadius		= 8.0
	GeometryMinorRadius		= 8.0
	GeometryHeight			= 19.2
	GeometryIsSmall			= Yes
	Shadow					= SHADOW_DECAL
	ShadowSizeX				= 19
	ShadowSizeY				= 19
	ShadowTexture			= ShadowI
End

;------------------------------------------------------------------------------
; Lurtz
Object IsengardLurtz
	; *** ART Parameters ***

    ; ButtonImage for Heros is button image on Hero Select UI to select hero. HI = HeroIcon or HeroImage.
	; This is required for garrisoned objects - please put in all objects.
	ButtonImage = HILurtz

    ; SelectPortrait for Heros is portrait behind skill buttons. HP = HeroPortrait.
	SelectPortrait = HPLurtz
   
	Draw = W3DScriptedModelDraw ModuleTag_DRAW

    StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD
		
		OkToChangeModelColor = Yes
		
		ExtraPublicBone = arrrow
		
		DefaultModelConditionState
			Model               = IULurtz_SKN
			WeaponLaunchBone    = PRIMARY arrrow
		End
		
		; --- Idle Anims
		IdleAnimationState
			Animation           = IDLI
				AnimationName     = IULurtz_SKL.IULurtz_IDLI
				AnimationMode     = ONCE
				AnimationPriority = 2
			End
			;this is his bow out idle
			Animation           = IDLH
				AnimationName     = IULurtz_SKL.IULurtz_IDLH
				AnimationMode     = ONCE
				AnimationPriority = 20
			End
			Animation           = IDLJ
				AnimationName     = IULurtz_SKL.IULurtz_IDLJ
				AnimationMode     = ONCE
				AnimationPriority = 2
			End
			Animation           = IDLK
				AnimationName     = IULurtz_SKL.IULurtz_IDLK
				AnimationMode     = ONCE
				AnimationPriority = 2
			End
			Animation           = IDLP
				AnimationName     = IULurtz_SKL.IULurtz_IDLP
				AnimationMode     = ONCE
				AnimationPriority = 1
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Sword" then CurDrawableSetTransitionAnimState("Trans_Sword_To_Bow") end
				if Prev == "BowReady" then CurDrawableSetTransitionAnimState("Trans_To_Bored_Bow") end
				if Prev == "RunningSword" then CurDrawableSetTransitionAnimState("Trans_Sword_To_Bow") end
				if Prev == "SwordReady" then CurDrawableSetTransitionAnimState("Trans_Sword_To_Bow") end
			EndScript

			StateName = BowIdle
		End

		TransitionState       = Trans_Bow_To_Sword

			Animation           = BtoS2
				AnimationName     = IULurtz_SKL.IULurtz_IDLM
				AnimationMode     = ONCE
			End
		End
		TransitionState       = Trans_Sword_To_Bow

			Animation           = BtoS2
				AnimationName     = IULurtz_SKL.IULurtz_IDLL
				AnimationMode     = ONCE
			End
		End
		
		TransitionState       = Trans_Sword_To_Bow_Running
		
			Animation           = BtoS3
				AnimationName     = IULurtz_SKL.IULurtz_RUNC
				AnimationMode     = ONCE
			End		
		End
		
		TransitionState       = Trans_Bow_To_Sword_Running
		
			Animation           = BtoS3
				AnimationName     = IULurtz_SKL.IULurtz_RUND
				AnimationMode     = ONCE
			End	
		End
		
		
		TransitionState       = Trans_Bow_To_Sword_Straight
			Animation           = BtoS1
				AnimationName     = IULurtz_SKL.IULurtz_IDLO
				AnimationMode     = ONCE
			End

		End
		TransitionState       = Trans_Sword_To_Bow_Straight
			Animation           = BtoS1
				AnimationName     = IULurtz_SKL.IULurtz_IDLN
				AnimationMode     = ONCE
			End
		End
		
		TransitionState       = Trans_To_Attention_Bow
			Animation           = ATNF
				AnimationName     = IULurtz_SKL.IULurtz_ATNF
				AnimationMode     = ONCE
			End
		End
	
		TransitionState       = Trans_To_Attention_Sword
			Animation           = ATNA
				AnimationName     = IULurtz_SKL.IULurtz_ATNA
				AnimationMode     = ONCE
			End
		End
		
		TransitionState		= Trans_To_Bored_Sword
			Animation			= TBoredSword
				AnimationName	= IULurtz_SKL.IULurtz_ATNC
				AnimationMode	= ONCE
			End
		End
		
		TransitionState		= Trans_To_Bored_Bow
			Animation			= TBoredBow
				AnimationName	= IULurtz_SKL.IULurtz_ATNH
				AnimationMode	= ONCE
			End
		End
		
		AnimationState        = STUNNED_FLAILING WEAPONSET_TOGGLE_1
			Flags               = RANDOMSTART
			Animation           = FLYB
				AnimationName     = IULurtz_SKL.IULurtz_FLYB	; sword
				AnimationMode     = LOOP
			End
		End

		AnimationState        = STUNNED_FLAILING 
			Flags               = RANDOMSTART
			Animation           = FLYA
				AnimationName     = IULurtz_SKL.IULurtz_FLYA	; bow
				AnimationMode     = LOOP
			End
		End

		; --- Dying anims
		AnimationState        = DYING SPLATTED WEAPONSET_TOGGLE_1
			Animation           = LNDA
				AnimationName     = IULurtz_SKL.IULurtz_LNDB	; sword
				AnimationMode     = ONCE
			End
		End

		AnimationState        = DYING SPLATTED
			Animation           = LNDA
				AnimationName     = IULurtz_SKL.IULurtz_LNDA	; bow
				AnimationMode     = ONCE
			End
		End
		
		AnimationState        = DYING WEAPONSET_TOGGLE_1
			Animation           = DIEA
				AnimationName     = IULurtz_SKL.IULurtz_DIEA	; sword
				AnimationMode     = ONCE
			End
		End

		AnimationState        = DYING
			Animation           = DIEB
				AnimationName     = IULurtz_SKL.IULurtz_DIEB	; bow
				AnimationMode     = ONCE
			End
		End

		; --- Stunned anims
		
		
		AnimationState        = STUNNED_STANDING_UP WEAPONSET_TOGGLE_1
			Animation           = GTPB
				AnimationName     = IULurtz_SKL.IULurtz_GTPB	; sword
				AnimationMode     = ONCE
				AnimationSpeedFactorRange = 1.5 1.5
			End
		End
		
		AnimationState        = STUNNED_STANDING_UP
			Animation           = GTPA
				AnimationName     = IULurtz_SKL.IULurtz_GTPA	; bow
				AnimationMode     = ONCE
				AnimationSpeedFactorRange = 1.5 1.5
			End
		End

		AnimationState        = STUNNED WEAPONSET_TOGGLE_1		; sword
			Animation           = LNDB
				AnimationName     = IULurtz_SKL.IULurtz_LNDB
				AnimationMode     = ONCE
			End
		End		

		

		AnimationState        = STUNNED 
			Animation           = LNDA
				AnimationName     = IULurtz_SKL.IULurtz_LNDA	; bow
				AnimationMode     = ONCE
			End
		End
					

		; --- Moving Anims
		
		AnimationState        = MOVING WEAPONSET_TOGGLE_1 FIRING_OR_PREATTACK_A
			Animation           = TrotAndFire
				AnimationName       = IULurtz_SKL.IULurtz_ATRA
				AnimationMode       = LOOP
			End
			Flags               = RANDOMSTART
			StateName = RunAndSwing
		End

		
		AnimationState				= MOVING BACKING_UP WEAPONSET_TOGGLE_1
			Animation				= BackingUp
				AnimationName		= IULurtz_SKL.IULurtz_BAKA
				AnimationMode		= LOOP
			End
			Flags = RANDOMSTART
			StateName = SwordReady
		End
		
		AnimationState				= MOVING BACKING_UP
			Animation				= BackingUp
				AnimationName		= IULurtz_SKL.IULurtz_BAKA
				AnimationMode		= LOOP
			End
			Flags = RANDOMSTART
			StateName = BowReady
		End
		
		AnimationState        = MOVING WEAPONSET_TOGGLE_1
			Animation				= RunWithSword
				AnimationName		= IULurtz_SKL.IULurtz_RUNA
				AnimationMode		= LOOP
				AnimationSpeedFactorRange = 1.1 1.1
			End
			Flags               = RANDOMSTART
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "RunningBow" then CurDrawableSetTransitionAnimState("Trans_Bow_To_Sword_Running") end
			EndScript
			StateName = RunningSword
		End
		
		AnimationState        = MOVING
			Animation				= RunWithBow
				AnimationName		= IULurtz_SKL.IULurtz_RUNB
				AnimationMode		= LOOP
				AnimationSpeedFactorRange = 1.1 1.1
			End
			Flags               = RANDOMSTART
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "RunningSword" then CurDrawableSetTransitionAnimState("Trans_Sword_To_Bow_Running") end
			EndScript
			StateName = RunningBow
		End
		
		; --- Crippling Special Weapon anim
		AnimationState        = SPECIAL_WEAPON_ONE
			Animation             = ATKE
				AnimationName     = IULurtz_SKL.IULurtz_CRPL 
				AnimationMode     = ONCE
			End
			FrameForPristineBonePositions = 35
			StateName = BowReady
		End
				
		; --- Attacking Anims [Weapon_A] Carnage
		AnimationState        = FIRING_OR_PREATTACK_A HERO ; Carnage Mode
			Animation             = ATKE
				AnimationName     = IULurtz_SKL.IULurtz_ATKC 
				AnimationMode     = ONCE
				UseWeaponTiming		= Yes
			End
			StateName = SwordReady
 		End
				
		; Sword - Attacking Anims [Weapon_A]
		AnimationState        = FIRING_OR_PREATTACK_A WEAPONSET_TOGGLE_1
			StateName           = WithSword
			Animation			= ATKH_CLOSE_Range3
				AnimationName	= IULurtz_SKL.IULurtz_ATKH
				AnimationMode	= ONCE
				UseWeaponTiming	= Yes
				AnimationPriority	=	5
			End
			Animation			= ATKK_CLOSE_Range4
				AnimationName	= IULurtz_SKL.IULurtz_ATKK
				AnimationMode	= ONCE
				UseWeaponTiming	= Yes
				AnimationPriority	=	1
			End			
			StateName = SwordReady
		End
		
		
		; Bow Melee - Attacking Anims [Weapon_A]
		AnimationState        = FIRING_OR_PREATTACK_B
			Animation           = ATKI
				AnimationName     = IULurtz_SKL.IULurtz_ATKI
				AnimationMode     = ONCE
				UseWeaponTiming		= Yes
			End
			Animation           = ATKJ
				AnimationName     = IULurtz_SKL.IULurtz_ATKJ
				AnimationMode     = ONCE
				UseWeaponTiming		= Yes
			End
			FrameForPristineBonePositions = 41
			StateName = BowReady
		End

;---------------------------------------------------
		;New style firing
		AnimationState						= PREATTACK_A 
			StateName						= STATE_Firing
			Animation						= ReadyToDrawn
				AnimationName				= IULurtz_SKL.IULurtz_ATKA1
				AnimationMode				= ONCE
;				UseWeaponTiming				= Yes			; UseWeaponTiming plus random weapon field equals desync.  Leaving as warning
				AnimationBlendTime			= 0				; Must be 0 blend time otherwise the arrow will linger for the duration of the blend!
;				AnimationSpeedFactorRange	= 1.5 1.5		; Therefore, this is all you get.  A slight speed up so that the animation can always finish before any possible random value Design sets the range for
			End
			StateName = BowReady
		End

		AnimationState						= FIRING_OR_RELOADING_A
			StateName						= STATE_Firing
			Animation						= OneFrameOfShooting
				AnimationName				= IULurtz_SKL.IULurtz_ATKA2
				AnimationMode				= ONCE
;				UseWeaponTiming				= Yes			; UseWeaponTiming plus random weapon field equals desync.  Leaving as warning
;				AnimationSpeedFactorRange	= 1.1 1.1		; Therefore, this is all you get.  A slight speed up so that the animation can always finish before any possible random value Design sets the range for
				AnimationBlendTime			= 10
			End
			StateName = BowReady
		End

		;--- Holding drawn bow while attacking		
		AnimationState						= CONTINUOUS_FIRE_MEAN
			StateName						= STATE_Firing
			Animation						= HangFrameWhileCoasting
				AnimationName				= IULurtz_SKL.IULurtz_ATKA2
				AnimationMode				= MANUAL
			End
			StateName = BowReady
		End
		
		AnimationState						= CONTINUOUS_FIRE_SLOW
			StateName						= STATE_Idle_Bow
			Animation						= PutAwayArrow
				AnimationName				= IULurtz_SKL.IULurtz_ATKA3
				AnimationMode				= ONCE
			End
			StateName = BowReady
		End
			
		;End New style firing
		
		; --- Engaged Anims
		
		AnimationState		= ENGAGED WEAPONSET_TOGGLE_1
			Animation           = IDLG
				AnimationName     = IULurtz_SKL.IULurtz_IDLA	; sword idle
				AnimationMode     = LOOP
				AnimationBlendTime = 15
			End
			StateName = SwordReady
		End
		
		AnimationState		= ENGAGED
			Animation           = IDLG
				AnimationName     = IULurtz_SKL.IULurtz_IDLG	; bow idle
				AnimationMode     = LOOP
				AnimationBlendTime = 15
			End
			StateName = BowReady
		End
						
		; --------- Click and Hit Reactions ------------
		AnimationState = HIT_REACTION HIT_LEVEL_1 WEAPONSET_TOGGLE_1
			Animation = Hit_Level_1_a
				AnimationName = IULurtz_SKL.IULurtz_HITA
				AnimationMode = ONCE
			End
			Animation = Hit_Level_1_b
				AnimationName = IULurtz_SKL.IULurtz_HITB
				AnimationMode = ONCE
			End
			StateName = SwordReady
		End
		
		AnimationState = HIT_REACTION HIT_LEVEL_1
			Animation = Hit_Level_1_c
				AnimationName = IULurtz_SKL.IULurtz_HITC
				AnimationMode = ONCE
			End
			StateName = BowReady
		End		
		
		AnimationState = WAR_CHANT WEAPONSET_TOGGLE_1
			Animation = Chant
				AnimationName = IULurtz_SKL.IULurtz_TNTB
				AnimationMode = LOOP
			End
			StateName = SwordReady
		End
		
		AnimationState = WAR_CHANT
			Animation = Chant
				AnimationName = IULurtz_SKL.IULurtz_CHRB
				AnimationMode = LOOP
			End
			StateName = BowReady
		End

		AnimationState			=	EMOTION_CELEBRATING WEAPONSET_TOGGLE_1
			Animation           =	CHRB
				AnimationName   =	IULurtz_SKL.IULurtz_CHRB ;do we have another?
				AnimationMode   =	LOOP
				AnimationSpeedFactorRange = 0.8 1.2
			End						
			StateName = SwordReady
			Flags				= RESTART_ANIM_WHEN_COMPLETE	
		End

		
		AnimationState			=	EMOTION_CELEBRATING
			Animation           =	CHRB
				AnimationName   =	IULurtz_SKL.IULurtz_CHRB
				AnimationMode   =	LOOP
				AnimationSpeedFactorRange = 0.8 1.2
			End						
			StateName = BowReady
			Flags				= RESTART_ANIM_WHEN_COMPLETE	
		End

		; --- Idle
		AnimationState        = WEAPONSET_TOGGLE_1 SELECTED
			Animation           = ATNB
				AnimationName     = IULurtz_SKL.IULurtz_ATNB
				AnimationMode     = LOOP
			End
			
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "SwordIdle" then CurDrawableSetTransitionAnimState("Trans_To_Attention_Sword") end
				if Prev == "RunningBow" then CurDrawableSetTransitionAnimState("Trans_Bow_To_Sword_Straight") end
				if Prev == "BowReady" then CurDrawableSetTransitionAnimState("Trans_Bow_To_Sword_Straight") end
			EndScript
			StateName = SwordReady
		End
		
		; --- Idle
		AnimationState        = SELECTED
			Animation           = ATNB
				AnimationName     = IULurtz_SKL.IULurtz_ATNG
				AnimationMode     = LOOP
			End
			
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "BowIdle" then CurDrawableSetTransitionAnimState("Trans_To_Attention_Bow") end
				if Prev == "RunningSword" then CurDrawableSetTransitionAnimState("Trans_Sword_To_Bow_Straight") end
				if Prev == "SwordReady" then CurDrawableSetTransitionAnimState("Trans_Sword_To_Bow_Straight") end
			EndScript
			StateName = BowReady
		End
		
		; --- Idle
		AnimationState        = WEAPONSET_TOGGLE_1
			Animation           = IDLF
				AnimationName     = IULurtz_SKL.IULurtz_IDLF
				AnimationMode     = ONCE
			End
			Animation           = IDLB
				AnimationName     = IULurtz_SKL.IULurtz_IDLB
				AnimationMode     = ONCE
			End
			Animation           = IDLC
				AnimationName     = IULurtz_SKL.IULurtz_IDLC
				AnimationMode     = ONCE
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "BowReady" then CurDrawableSetTransitionAnimState("Trans_Bow_To_Sword_Straight") end
				if Prev == "RunningBow" then CurDrawableSetTransitionAnimState("Trans_Bow_To_Sword_Straight") end
				if Prev == "SwordReady" then CurDrawableSetTransitionAnimState("Trans_To_Bored_Sword") end
			EndScript
			Flags               = RESTART_ANIM_WHEN_COMPLETE
			StateName = SwordIdle
		End			
	End

	; ***DESIGN parameters ***
	Side = Isengard
	EditorSorting = UNIT
	ThreatLevel = 4.0
	ThingClass = CHARACTER_UNIT
	BuildCost         = LURTZ_BUILDCOST
	BuildTime         = LURTZ_BUILDTIME

	DisplayMeleeDamage = LURTZ_DAMAGE
	DisplayRangedDamage = LURTZ_BOW_DAMAGE

	MaxSimultaneousOfType = 1
  
	TransportSlotCount = 1
	WeaponSet
		Conditions = None
		Weapon = PRIMARY    IsenguardLurtzBow
	End
	WeaponSet
		Conditions = WEAPONSET_TOGGLE_1 CLOSE_RANGE
		Weapon = PRIMARY    LurtzWeapon
	End
	WeaponSet
		Conditions = CLOSE_RANGE
		Weapon = PRIMARY    IsenguardLurtzBow
		Weapon = SECONDARY  IsenguardLurtzBowMelee
		OnlyAgainst = PRIMARY STRUCTURE
	End
	WeaponSet
		Conditions = WEAPONSET_TOGGLE_1
		Weapon = PRIMARY    LurtzWeapon
	End
	
	;;; SPECIAL CARNAGE MODE, MAKE SURE IT"S THE CARNAGE WEAPON NO MATTER WHAT ;;;
	WeaponSet
		Conditions = WEAPONSET_HERO_MODE
		Weapon = PRIMARY    LurtzCarnageWeapon
	End
	WeaponSet
		Conditions = WEAPONSET_HERO_MODE CLOSE_RANGE
		Weapon = PRIMARY    LurtzCarnageWeapon
	End
	WeaponSet
		Conditions = WEAPONSET_HERO_MODE WEAPONSET_TOGGLE_1
		Weapon = PRIMARY    LurtzCarnageWeapon
	End
	WeaponSet
		Conditions = WEAPONSET_HERO_MODE WEAPONSET_TOGGLE_1 CLOSE_RANGE
		Weapon = PRIMARY    LurtzCarnageWeapon
	End
	
	;HERO
	
	ArmorSet
		Conditions      = None
		Armor           = HeroArmor
		DamageFX        = NormalDamageFX
	End

	VisionRange = VISION_HERO_RANGED
	ShroudClearingRange = SHROUD_CLEAR_RANGED_HERO

	DisplayName = OBJECT:IsengardLurtz
	RecruitText		= CONTROLBAR:IsengardLurtzRecruit
	ReviveText		= CONTROLBAR:IsengardLurtzRevive
	Hotkey			= CONTROLBAR:IsengardLurtzHotkey
	CrushableLevel = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
	CrusherLevel = 0 ;What can I crush?: 0 = small animals, 1 = infantry, 2 = trees, 3 = vehicles

	CommandSet = LurtzCommandSet
	CommandPoints = 0


	; *** AUDIO Parameters ***;

	VoiceAttack				= LurtzVoiceAttack
	VoiceAttack2			= OrcVoiceAttack2
	VoiceAttackAir				= LurtzVoiceAttack
	VoiceAttackAir2				= OrcVoiceAttack2
	VoiceAttackCharge			= LurtzVoiceAttackCharge
	VoiceAttackMachine		= LurtzVoiceAttack
	VoiceAttackStructure		= LurtzVoiceAttackBuilding
	VoiceFear 				= LurtzVoiceHelpMe
	;VoiceCreated			= CampOrcCreateLurtz	;LurtzVoiceSalute		;this conflicts with his respawn dialogue line -- rehooked to spawn FX
	;VoiceFullyCreated 		= CampOrcCreateLurtz	;LurtzVoiceSalute		;this conflicts with his respawn dialogue line -- rehooked to spawn FX
	VoiceGuard				= LurtzVoiceMove
	VoiceMove				= LurtzVoiceMove
	VoiceMove2				= OrcVoiceMove2
	VoiceMoveToCamp			= LurtzVoiceMoveCamp
	VoiceMoveWhileAttacking		= LurtzVoiceMove
	VoicePriority			= 66
	VoiceSelect				= LurtzVoiceSelect
	VoiceSelect2			= HeroVoiceSelect2
	VoiceSelectBattle 		= LurtzVoiceSelectBattle
	
	VoiceEnterStateAttackCharge	= LurtzVoiceEnterStateAttackCharge
	
	SoundImpact				= ImpactHorse

	EvaEventDamagedOwner		= UnitUnderAttack 		;Eva event to trigger when unit is damaged
	EvaEventDieOwner			= LurtzDie				;Eva event to trigger on unit's death. NOTICE THAT this is only for permanent deaths

	Behavior = LargeGroupAudioUpdate ModuleTag_LGAU	;Tie into LargeGroupAudio system
		Key = Hero
	End

	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		MaxUpdateRangeCap = 800
		AnimationSound = Sound: ArrowDrawBow		Animation: IULurtz_SKL.IULurtz_CRPL		Frames: 0
		AnimationSound = Sound: ArrowDrawBow		Animation: IULurtz_SKL.IULurtz_ATKA1	Frames: 4
		AnimationSound = Sound: ArrowDrawBow		Animation: IULurtz_SKL.IULurtz_ATKA2	Frames: 17
		AnimationSound = Sound: ImpactSword02		Animation: IULurtz_SKL.IULurtz_ATKC		Frames: 21 37
		AnimationSound = Sound: ImpactSword02		Animation: IULurtz_SKL.IULurtz_ATKI		Frames: 28 49
		AnimationSound = Sound: ImpactSword02		Animation: IULurtz_SKL.IULurtz_ATKJ		Frames: 19 39
		AnimationSound = Sound: FootstepDirtA		Animation: IULurtz_SKL.IULurtz_RUNA		Frames: 10 20
		AnimationSound = Sound: FootstepDirtA		Animation: IULurtz_SKL.IULurtz_RUNB		Frames: 8 18
		AnimationSound = Sound: FootstepDirtA		Animation: IULurtz_SKL.IULurtz_RUNC		Frames: 10 20 31 41
		AnimationSound = Sound: FootstepDirtA		Animation: IULurtz_SKL.IULurtz_RUND		Frames: 8 18 27 37
		AnimationSound = Sound: BodyFallOrc			Animation: IULurtz_SKL.IULurtz_DIEA		Frames: 43
		AnimationSound = Sound: BodyFallOrc			Animation: IULurtz_SKL.IULurtz_LNDA		Frames: 3
		AnimationSound = Sound: BodyFallOrc			Animation: IULurtz_SKL.IULurtz_LNDB		Frames: 3
		AnimationSound = Sound: BodyFallGeneric2		Animation: IULurtz_SKL.IULurtz_DIEB		Frames: 82

		AnimationSound = Sound: WeaponSwitchBow		Animation: IULurtz_SKL.IULurtz_IDLL		Frames: 59
		AnimationSound = Sound: SwordShingDirty1		Animation: IULurtz_SKL.IULurtz_IDLM		Frames: 56

		AnimationSound = Sound: WeaponSwitchBow		Animation: IULurtz_SKL.IULurtz_IDLN		Frames: 10
		AnimationSound = Sound: SwordShingDirty1		Animation: IULurtz_SKL.IULurtz_IDLO		Frames: 3

		;AnimationSound = Sound: ??????			Animation: IULurtz_SKL.IULurtz_TNTB		Frames: 28
	End


	; *** ENGINEERING Parameters ***

	RadarPriority = UNIT
	KindOf = HERO PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE ARMY_SUMMARY ARCHER CAN_USE_SIEGE_TOWER ATTACK_NEEDS_LINE_OF_SIGHT URUK
	PathfindDiameter = 40.0

  	Body = RespawnBody ModuleTag_RespawnBody
		CheerRadius 			= EMOTION_CHEER_RADIUS
   		MaxHealth         		= LURTZ_HEALTH	;BALANCE Lurtz Health
  		PermanentlyKilledByFilter	= NONE		;Who kills me permanently?
   		DodgePercent     		= HERO_DODGE_PERCENT
  	End

	Behavior = RespawnUpdate ModuleTag_RespawnUpdate
		DeathAnim				= DYING ;STUNNED			;Model condition to play when killed-to-respawn
		DeathFX				= FX_LurtzDieToRespawn		;FXList to play when killed-to-respawn
		DeathAnimationTime		= 6033 ; 1133			;How long DeathAnim will take.
		InitialSpawnFX			= FX_LurtzInitialSpawn
		RespawnAnim				= LEVELED				;Animation to play when respawning.
		RespawnFX				= FX_LurtzRespawn			;FXList to play when respawning.
		RespawnAnimationTime		= 2000				;Time it takes for respawn to play.
		AutoRespawnAtObjectFilter	= NONE +CASTLE_KEEP		;Respawn at this location -- and at it's exit production point if possible.
		ButtonImage				= HILurtz
	
	;RespawnEntries determine the ruleset for how a character can be revived. Some units may automatically respawn, others
	;may require a specific revive action performed on him. You can specify different values for each level... or use Level:Any
		RespawnRules =	AutoSpawn:No	Cost:600		Time:90000		Health:100%		;DEFAULT VALUES
		RespawnEntry =	Level:2		Cost:700		Time:90000					;For other levels, only override what is different.
		RespawnEntry =	Level:3		Cost:800		Time:90000
		RespawnEntry =	Level:4		Cost:900		Time:90000
		RespawnEntry =	Level:5		Cost:1000		Time:120000
		RespawnEntry =	Level:6		Cost:1100		Time:120000
		RespawnEntry =	Level:7		Cost:1200		Time:120000
		RespawnEntry =	Level:8		Cost:1300		Time:120000
		RespawnEntry =	Level:9		Cost:1400		Time:120000
		RespawnEntry =	Level:10	Cost:1500		Time:120000
	End

	Behavior = AutoHealBehavior ModuleTag_LurtzHealing
		StartsActive = Yes
		HealingAmount = HERO_HEAL_AMOUNT
		HealingDelay = 1000
		StartHealingDelay = HERO_HEAL_DELAY
		HealOnlyIfNotInCombat = Yes
	End

	Behavior = AIUpdateInterface ModuleTag_03
		AutoAcquireEnemiesWhenIdle = Yes ATTACK_BUILDINGS
		MoodAttackCheckRate        = 500
;		HoldGroundCloseRangeDistance = 50
		AttackPriority				= 	AttackPriority_Archer
	End

	LocomotorSet
		Locomotor = IsengardLurtzLocomotor
		Condition = SET_NORMAL 
		Speed     = NORMAL_EVIL_HERO_SPEED
	End
	
	LocomotorSet
		Locomotor = HumanWanderLocomotor
		Condition = SET_WANDER 
		Speed     = 55
	End

	Behavior = PhysicsBehavior ModuleTag_04
		GravityMult = 1.0
		ShockStandingTime = 2000 ; (2 secs)
	End
	
	Behavior = DualWeaponBehavior ModuleTag_09
		SwitchWeaponOnCloseRangeDistance = 40
	End
	
	Behavior = SlowDeathBehavior ModuleTag_05
		DeathTypes		= ALL 
		SinkDelay		= 6000
		SinkRate		= 1.5     ; in Dist/Sec
		DestructionDelay	= 11000
		Sound			= INITIAL LurtzVoiceDie
	End
	
	Behavior = SquishCollide ModuleTag_06
		;nothing
	End

	;;; AUTO ABILITY MODULE ;;;
	Behavior = AutoAbilityBehavior ModuleTag_AutoAbilityBehavior
	End		
	
	Behavior = HitReactionBehavior HitReactionBehaviorModuleTag
		HitReactionLifeTimer1 = 2500 ; level 1 (light  damage)  hit reaction animations in frames (5 per sec)
		HitReactionThreshold1 = 0.0   ; level 1 (light  damage) threshold trigger
	End
	
	;;; LURTZ PASSIVE LEADERSHIP ABILITY ;;;	
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_TheodenLeadership
		SpecialPowerTemplate = SpecialAbilityFakeLeadership
		TriggeredBy = Upgrade_LurtzLeadership
	End
	Behavior = SpecialPowerModule ModuleTag_TheodenLeadershipUpdate   
		SpecialPowerTemplate      = SpecialAbilityFakeLeadership
		UpdateModuleStartsAttack  = No
		StartsPaused = Yes
	End	
	Behavior = AttributeModifierAuraUpdate ModuleTag_Leadership
		StartsActive	= No ;If no, requires upgrade to turn on.
		BonusName		= LurtzPassiveLeadership
		TriggeredBy		= Upgrade_LurtzLeadership
		RefreshDelay	= 2000
		Range			= 200
		ObjectFilter	= ANY +INFANTRY +CAVALRY -STRUCTURE -BASE_FOUNDATION -HERO
	End	
	
	;;; LURTZ PILLAGE ABILITY ;;;	
 	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_TheodenLeadership2
		SpecialPowerTemplate = SpecialAbilityFakeLeadership2
		TriggeredBy = Upgrade_LurtzPillage
	End
	Behavior = SpecialPowerModule ModuleTag_TheodenLeadershipUpdate2 
		SpecialPowerTemplate      = SpecialAbilityFakeLeadership2
		UpdateModuleStartsAttack  = No
		StartsPaused = Yes
	End
	Behavior = AttributeModifierAuraUpdate ModuleTag_Leadership2
		StartsActive	= No ;If no, requires upgrade to turn on.
		BonusName		= LurtzPassiveOutlawLeadership
		TriggeredBy		= Upgrade_LurtzPillage
		RefreshDelay	= 2000
		Range			= 200
		AllowSelf		= Yes
		ObjectFilter	= ANY +INFANTRY +CAVALRY -STRUCTURE -BASE_FOUNDATION -HERO
	End	

	;;; LURTZ CRIPPLING STRIKE ;;;	
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_LeapEnabler
		SpecialPowerTemplate = SpecialAbilityLurtzCripple
		TriggeredBy = Upgrade_LurtzCrippleTrigger
	End 
	
	Behavior = SpecialPowerModule ModuleTag_LeapStarter                      
		SpecialPowerTemplate      = SpecialAbilityLurtzCripple
		UpdateModuleStartsAttack  = Yes
		StartsPaused = Yes
		InitiateSound = LurtzVoiceAttackCripplingStrike
	End
	Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_LeapUpdate   
		SpecialPowerTemplate    = SpecialAbilityLurtzCripple
		SkipContinue			= Yes

		UnpackTime				= 1100 ; Pull out arrow
		PreparationTime			= 1 ; Quick shot
		PersistentPrepTime		= 500 ; looping the quick shot
		PackTime				= 500 ; back to idle
		MustFinishAbility		= Yes
		
		AwardXPForTriggering		= 0		
		StartAbilityRange			= 325.0
		
		SpecialWeapon				= IsenguardLurtzBowStun
		WhichSpecialWeapon			= 1
		RejectedConditions			= WEAPON_TOGGLE
	End
	
	;;; LURTZ CARNAGE (aka rampage) ;;;
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_LurtzCarnage
		SpecialPowerTemplate	= SpecialAbilityLurtzCarnage
		TriggeredBy				= Upgrade_LurtzCarnage
	End
  	Behavior = SpecialPowerModule ModuleTag_LurtzCarnageStarter                ; SpecialAbility is a SpecialPower, SpecialPower is anyting special
		SpecialPowerTemplate    = SpecialAbilityLurtzCarnage
		StartsPaused			= Yes
		AttributeModifier		= LurtzCarnage
		AttributeModifierAffectsSelf = Yes
;		TriggerFX				= FX_LurtzBloodRage
	End
	Behavior = HeroModeSpecialAbilityUpdate ModuleTag_CarnageUpdate   ; So the difference in SpecialAbility is that it takes timing from this Update, instead of simply firing.
		SpecialPowerTemplate    = SpecialAbilityLurtzCarnage
		HeroEffectDuration		= 10000
		UnpackTime              = 1 ;how long the weaponset is active
		RequiredConditions		= WEAPON_TOGGLE
	End	

	Geometry = CYLINDER
	GeometryMajorRadius = 8.0
	GeometryMinorRadius = 8.0
	GeometryHeight = 19.2
	GeometryIsSmall = Yes
	Shadow = SHADOW_DECAL
	ShadowSizeX = 19;
	ShadowSizeY = 19;
	ShadowTexture = ShadowI;
End

;------------------------------------------------------------------------------
; Grima
Object IsengardGrima
	; *** ART Parameters ***

	Draw = W3DScriptedModelDraw ModuleTag_DRAW

   StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD


		DefaultModelConditionState
			Model               = GUBoromir_SKN
		End
		; --- Idle Anims
		IdleAnimationState
			Animation           = IDLA
				AnimationName     = GUBoromir_SKL.GUBoromir_IDLA 0 15
				AnimationMode     = ONCE
			End
		End

		TransitionState       = Trans_None_To_Sword
			Animation           = GUBoromir_STHA
				AnimationName     = GUBoromir_SKL.GUBoromir_STHA
				AnimationMode     = ONCE
			End
		End
		TransitionState       = Trans_Sword_To_None
			Animation           = GUBoromir_STHB
				AnimationName     = GUBoromir_SKL.GUBoromir_STHB
				AnimationMode     = ONCE
			End
		End



		; --- Moving Anims
		AnimationState        = MOVING DAMAGED WEAPONSTATE_CLOSE_RANGE
			StateName           = WithSword
			Flags               = RANDOMSTART
			ParticleSysBone     = None InfantryDustTrails
			Animation           = GUBoromir_IWKA
				AnimationName     = GUBoromir_SKL.GUBoromir_IWKA
				AnimationMode     = LOOP
			End
		End
		AnimationState        = MOVING WANDER WEAPONSTATE_CLOSE_RANGE
			StateName           = WithSword
			ParticleSysBone     = None InfantryDustTrails
			Animation           = GUBoromir_WLKA
				AnimationName     = GUBoromir_SKL.GUBoromir_WLKA
				AnimationMode     = LOOP
			End
		End
		AnimationState        = MOVING WEAPONSTATE_CLOSE_RANGE
			StateName           = WithSword
			Flags               = RANDOMSTART
			ParticleSysBone     = None InfantryDustTrails
			Animation           = GUBoromir_RUNB
				AnimationName     = GUBoromir_SKL.GUBoromir_RUNB
				AnimationMode     = LOOP
			End
		End
		AnimationState        = MOVING DAMAGED
			Flags               = RANDOMSTART
			ParticleSysBone     = None InfantryDustTrails
			Animation           = GUBoromir_IWKA
				AnimationName     = GUBoromir_SKL.GUBoromir_IWKA
				AnimationMode     = LOOP
			End
		End
		AnimationState        = MOVING WANDER
			ParticleSysBone     = None InfantryDustTrails
			Animation           = GUBoromir_WLKA
				AnimationName     = GUBoromir_SKL.GUBoromir_WLKA
				AnimationMode     = LOOP
			End
		End
		AnimationState        = MOVING
			ParticleSysBone     = None InfantryDustTrails
			Flags               = RANDOMSTART
			Animation           = GUBoromir_RUNB
				AnimationName     = GUBoromir_SKL.GUBoromir_RUNA
				AnimationMode     = LOOP
			End
		End

		; Attacking Anims [Weapon_A]
		AnimationState        = FIRING_OR_PREATTACK_A WEAPONSTATE_CLOSE_RANGE
			StateName           = WithSword
			Animation           = ATKA
				AnimationName     = GUBoromir_SKL.GUBoromir_ATKA
				AnimationMode     = ONCE
				UseWeaponTiming		= Yes
			End
			Animation           = ATKB
				AnimationName    = GUBoromir_SKL.GUBoromir_ATKB
				AnimationMode     = ONCE
				UseWeaponTiming		= Yes
			End
		End

		AnimationState        = FIRING_OR_PREATTACK_A
			Animation           = GUBoromir_ATD1
				AnimationName     = GUBoromir_SKL.GUBoromir_ATKB 
				AnimationMode     = ONCE
				UseWeaponTiming		= Yes
			End
		End

		; --- Dying anims
		AnimationState        = DYING SPLATTED
			Animation           = GUBoromir_LNDA
				AnimationName     = GUBoromir_SKL.GUBoromir_LNDA
				AnimationMode     = ONCE
			End
		End
		AnimationState        = DYING
			Animation           = GUBoromir_DIEB
				AnimationName     = GUBoromir_SKL.GUBoromir_DIEB
				AnimationMode     = ONCE
			End
		End



		; --- Stunned anims
		AnimationState        = STUNNED_FLAILING 
			Flags               = RANDOMSTART
			Animation           = GUBoromir_FLYA
				AnimationName     = GUBoromir_SKL.GUBoromir_FLYA
				AnimationMode     = LOOP
			End
		End
		AnimationState        = STUNNED_STANDING_UP
			Animation           = GUBoromir_GTPA
				AnimationName     = GUBoromir_SKL.GUBoromir_GTPA
				AnimationMode     = ONCE
				AnimationSpeedFactorRange = 1.5 1.5
			End
		End
		AnimationState        = STUNNED 
			Animation           = GUBoromir_LNDA
				AnimationName     = GUBoromir_SKL.GUBoromir_LNDA
				AnimationMode     = ONCE
			End
		End

;		AnimationState = WAR_CHANT
;			Animation = Chant
;				AnimationName = GUBoromir_SKL.GUBoromir_TNTA
;				AnimationMode = ONCE
;			End
;			Flags						= RANDOMSTART RESTART_ANIM_WHEN_COMPLETE
;		End


		; --------- Idle Anims
		AnimationState        = WEAPONSTATE_CLOSE_RANGE
			StateName           = WithSword
			Animation           = GUBoromir_IDLC
				AnimationName     = GUBoromir_SKL.GUBoromir_IDLC
				AnimationMode     = ONCE
			End
		End
		
		; --------- Click and Hit Reactions ------------
		AnimationState = HIT_REACTION HIT_LEVEL_1
			Animation = Hit_Level_1_a
				AnimationName = GUBoromir_SKL.GUBoromir_HITA
				AnimationMode = ONCE
			End
    End
		
		

	End



	; ***DESIGN parameters ***
	Side = Isengard
	EditorSorting = UNIT
	ThreatLevel = 4.0
	ThingClass = CHARACTER_UNIT

	TransportSlotCount = 1
	WeaponSet
		Conditions = None 
		Weapon = PRIMARY    HobbitPunch
		AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End
	WeaponSet
		Conditions = CLOSE_RANGE CONTESTING_BUILDING
		Weapon = PRIMARY    BoromirSword
		AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End
	ArmorSet
		Conditions      = None
		Armor           = NoArmor
		DamageFX        = NormalDamageFX
	End
	VisionRange = 120.0
	DisplayName = OBJECT:IsengardGrima
	CrushableLevel = 0  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
	CrusherLevel = 0 ;What can I crush?: 0 = small animals, 1 = infantry, 2 = trees, 3 = vehicles

	CommandSet = GenericCommandSet 
	CommandPoints = 1


	; *** AUDIO Parameters ***;

	;VoiceSelect	= NoSound
	;VoiceMove	= NoSound
	;VoiceAttack	= NoSound
	;VoiceFear	= NoSound
	;VoiceGuard	= NoSound

	SoundImpact	= ImpactHorse
	
	;UnitSpecificSounds
	;	VoiceGarrison         = NoSound
	;	VoiceEnter            = NoSound
	;	VoiceEnterHostile     = NoSound
	;	VoiceGetHealed        = NoSound
	;End

	EvaEventDamagedOwner = UnitUnderAttack 		;Eva event to trigger when unit is damaged


	; *** ENGINEERING Parameters ***

	RadarPriority = UNIT
	KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE ARMY_SUMMARY

	Body = ActiveBody ModuleTag_02
		MaxHealth         = 10                  ;BALANCE Man at Arms Health
		MaxHealthDamaged  = 5
		;RecoveryTime      = 5000
	End
	
	Behavior = AIUpdateInterface ModuleTag_03
		AutoAcquireEnemiesWhenIdle = Yes ATTACK_BUILDINGS
		MoodAttackCheckRate        = 500
;    HoldGroundCloseRangeDistance = 50
	End

	LocomotorSet
		Locomotor = HumanLocomotor
		Condition = SET_NORMAL 
		Speed     = 32
	End
	
	LocomotorSet
		Locomotor = HumanWanderLocomotor
		Condition = SET_WANDER 
		Speed     = 32
	End
	
	Behavior = DualWeaponBehavior ModuleTag_13
		SwitchWeaponOnCloseRangeDistance = 160
	End

	Behavior = PhysicsBehavior ModuleTag_04
		GravityMult = 1.0
	End
	
	Behavior = SlowDeathBehavior ModuleTag_05
		DeathTypes = ALL 
		SinkDelay = 3000
		SinkRate = 0.40     ; in Dist/Sec
		DestructionDelay = 8000
		Sound = INITIAL UrukVoiceDie
	End
	
	Behavior = SquishCollide ModuleTag_06
		;nothing
	End
	
	Behavior = HitReactionBehavior HitReactionBehaviorModuleTag
		HitReactionLifeTimer1 = 7 ; level 1 (light  damage)  hit reaction animations in frames (5 per sec)
		HitReactionLifeTimer2 = 15 ; level 2 (medium damage)  hit reaction animations in frames (5 per sec)
		HitReactionLifeTimer3 = 10 ; level 3 (heavy  damage)  hit reaction animations in frames (5 per sec)

		HitReactionThreshold1 = 0.0   ; level 1 (light  damage) threshold trigger
		HitReactionThreshold2 = 25.0  ; level 2 (medium damage) threshold trigger
		HitReactionThreshold3 = 50.0  ; level 3 (heavy  damage) threshold trigger
	End
	

	Geometry = CYLINDER
	GeometryMajorRadius = 8.0
	GeometryMinorRadius = 8.0
	GeometryHeight = 19.2
	GeometryIsSmall = Yes
	Shadow = SHADOW_DECAL
	ShadowSizeX = 11;
	ShadowSizeY = 11;
	ShadowTexture = ShadowI;
End

;------------------------------------------------------------------------------
;------------------------------------------------------------------------------
;------------------------------------------------------------------------------
;------------------------------------------------------------------------------
;
;  Mordor
;
;------------------------------------------------------------------------------
;------------------------------------------------------------------------------
;------------------------------------------------------------------------------
;------------------------------------------------------------------------------
; aka Goblin Swordsman
Object MordorGoblinSwordsman
  ; *** ART Parameters ***

	; This is required for garrisoned objects - please put in all objects.
	ButtonImage = BuildingNoArt
  
  Draw = W3DHordeModelDraw ModuleTag_01

	OkToChangeModelColor = Yes
	  
	StaticModelLODMode = Yes
	; specify options for static LODs
	LodOptions	= LOW
		AllowMultipleModels		=	ALLOW_MULTIPLE_MODELS_LOW
		MaxRandomTextures		=	MAX_RANDOM_TEXTURES_LOW
		MaxRandomAnimations		=	MAX_RANDOM_ANIMATIONS_LOW
		MaxAnimFrameDelta		=	0 ;These guys are out of a horde more often than in, so they need permission to diverge.
	End
	
	LodOptions	= MEDIUM
		AllowMultipleModels		=	ALLOW_MULTIPLE_MODELS_MED
		MaxRandomTextures		=	MAX_RANDOM_TEXTURES_MED
		MaxRandomAnimations		=	MAX_RANDOM_ANIMATIONS_MED
		MaxAnimFrameDelta		=	0 ;These guys are out of a horde more often than in, so they need permission to diverge.
	End
	
	LodOptions	= HIGH
		AllowMultipleModels		=	ALLOW_MULTIPLE_MODELS_HIGH
		MaxRandomTextures		=	MAX_RANDOM_TEXTURES_HIGH
		MaxRandomAnimations		=	MAX_RANDOM_ANIMATIONS_HIGH
		MaxAnimFrameDelta		=	0 ;These guys are out of a horde more often than in, so they need permission to diverge.
	End
		
		RandomTexture = MUGblnSwrd.tga 0 MUGblnSwrd.tga
		RandomTexture = MUGblnSwrd2.tga 0 MUGblnSwrd.tga
		RandomTexture = MUGblnSwrd3.tga 0 MUGblnSwrd.tga

    DefaultModelConditionState
      Model = MUGblnSwrd_SKN
      Skeleton = MUGblnSwrd_SKL
    End
;;==================== ANIMATIONS ================================================================
;;-------------------- FLYING & DYING ------------------------------------------------------------
;;======= FALLING

		AnimationState						= PASSENGER
			Animation						= Wiggling
				AnimationName				= MUGblnSwrd_FLLA
				AnimationMode				= LOOP
			End
		End
		
		AnimationState						= THROWN_PROJECTILE
			StateName						= STATE_Flying
			Animation						= Thrown
				AnimationName				= MUGblnSwrd_FLYA
				AnimationMode				= LOOP
			End
		End
		
		AnimationState						= FREEFALL
			Animation						= Falling
				AnimationName				= MUGblnSwrd_FLYB
				AnimationMode				= LOOP
				AnimationBlendTime			= 10
				AnimationSpeedFactorRange	= 0.7	0.7
			End
		End
		
		AnimationState						= STUNNED_FLAILING
			StateName						= STATE_Flying
			Animation						= ready_for_sweet_landing
				AnimationName				= MUGblnSwrd_FLYA
				AnimationMode				= LOOP
				AnimationSpeedFactorRange	= 0.9 1.1
				AnimationBlendTime			= 0
			End
			Animation						= flying
				AnimationName				= MUGblnSwrd_FLYB
				AnimationMode				= LOOP
				AnimationPriority			= 10
				AnimationSpeedFactorRange	= 0.9 1.1
				AnimationBlendTime			= 0
			End
			Flags							= RANDOMSTART
		End
		
		AnimationState						= DYING SPLATTED
			Animation						= splat
				AnimationName				= MUGblnSwrd_LNDB
				AnimationMode				= ONCE
			End
		End


		
;;======= DYING

		AnimationState						= DYING AFLAME
			StateName						= STATE_Dead.
			Animation						= Flaming_Death
				AnimationName				= MUGblnSwrd_MFDA
				AnimationMode				= LOOP
			End
		End

		AnimationState						= DYING
			StateName						= STATE_Dead.
			Animation						= Dying_1
				AnimationName				= MUGblnSwrd_DIEA
				AnimationMode				= ONCE
			End
			Animation						= Dying_2
				AnimationName				= MUGblnSwrd_DIEB
				AnimationMode				= ONCE
			End
			Animation						= landb
				AnimationName				= MUGblnSwrd_LNDB
				AnimationMode				= ONCE
			End
			Animation						= landc
				AnimationName				= MUGblnSwrd_LNDC
				AnimationMode				= ONCE
			End
			BeginScript
				Preva = CurDrawablePrevAnimation()
				if Preva == "ready_for_sweet_landing" then return "landc" 
				elseif Preva == "flying" then return "landb"
				elseif GetClientRandomNumberReal(0,1) > 0.50 then return "Dying_1"
				else return "Dying_2" end
			EndScript
		End
		
		AnimationState						= STUNNED_STANDING_UP
			StateName						= STATE_Ready
			Animation						= standing_back_up
				AnimationName				= MUGblnSwrd_GTPA
				AnimationMode				= ONCE
				
			End
			Animation						= already_up
				AnimationName				= MUGblnSwrd_IDLB
				AnimationMode				= LOOP
				AnimationBlendTime			= 20
			End
			BeginScript
				if CurDrawablePrevAnimation() == "sweet_landing"
				then
					return "already_up"
				else
					return "standing_back_up"
				end
			EndScript
		End
				
		AnimationState						= STUNNED
			StateName						= STATE_Stunned
			Animation						= splatted_on_ground
				AnimationName				= MUGblnSwrd_LNDC
				AnimationMode				= ONCE
			End
			Animation						= sweet_landing
				AnimationName				= MUGblnSwrd_LNDA
				AnimationMode				= ONCE
			End
			BeginScript
				if CurDrawablePrevAnimation() == "ready_for_sweet_landing"
				then
					return "sweet_landing"
				else
					return "splatted_on_ground"
				end
			EndScript
		End

		

  ;;------------------ MOVING -----------------------------------------------------------------------
  
  
  
		AnimationState = MOVING FIRING_OR_PREATTACK_A
			Animation = TrotAndFire
				AnimationName = MUGblnSwrd_ATRA
				AnimationMode = LOOP
			End
			Flags = RANDOMSTART
			;ParticleSysBone = None InfantryDustTrails
		End
    
		AnimationState						= MOVING BACKING_UP
			Animation						= BackingUp
				AnimationName				= MUGblnSwrd_BAKA
				AnimationMode				= LOOP
				AnimationSpeedFactorRange	= 0.9 1.1
			End
			Animation						= BackingUp
				AnimationName				= MUGblnSwrd_BAKB
				AnimationMode				= LOOP
				AnimationSpeedFactorRange	= 0.9 1.1
			End
			Flags							= RANDOMSTART
		End
		
		AnimationState						= MOVING EMOTION_TERROR
			ShareAnimation					= Yes
			Animation						= Moving_1
				AnimationName				= MUGblnSwrd_RUNA
				AnimationMode				= LOOP
				AnimationSpeedFactorRange	= 0.9 1.1
				Distance					= 20
			End
;			Animation						= Moving_3
;				AnimationName				= MUGblnSwrd_RUNC
;				AnimationMode				= LOOP
;				AnimationSpeedFactorRange	= 0.9 1.1
;			End
			Flags							= RANDOMSTART
			ParticleSysBone					= None InfantryDustTrails
		End
		
		AnimationState						= MOVING
			StateName						= STATE_Running
			ShareAnimation					= Yes
			Animation						= Moving_1
				AnimationName				= MUGblnSwrd_RUNA
				AnimationMode				= LOOP
				AnimationSpeedFactorRange	= 0.9 1.1
				Distance					= 20
			End
;			Animation						= Moving_3
;				AnimationName				= MUGblnSwrd_RUNC
;				AnimationMode				= LOOP
;				AnimationSpeedFactorRange	= 0.9 1.1
;				Distance					= 10
;			End
			Flags							= RANDOMSTART
			ParticleSysBone					= None InfantryDustTrails
		End
		
;;------------------ ATTACKING ------------------------------------------------------------
		
		AnimationState						= FIRING_OR_PREATTACK_A
			StateName						= STATE_Ready
			Animation						= ATKA
				AnimationName				= MUGblnSwrd_ATKA
				AnimationMode				= ONCE
				UseWeaponTiming				= Yes	
			End
		End
		
;;------------------ EMOTIONS ------------------------------------------------------------

		AnimationState						= EMOTION_AFRAID
			Animation						= FERA
				AnimationName				= MUGblnSwrd_FERA
				AnimationMode				= LOOP
				AnimationSpeedFactorRange	= 0.9 1.1
			End
			;Flags							= RANDOMSTART RESTART_ANIM_WHEN_COMPLETE
		End
		AnimationState						= EMOTION_TAUNTING
			Animation						= TNTA
				AnimationName				= MUGblnSwrd_TNTA
				AnimationMode				= LOOP
				AnimationSpeedFactorRange	= 0.9 1.1
			End
			;Flags							= RESTART_ANIM_WHEN_COMPLETE
		End
		AnimationState						= EMOTION_POINTING
			Animation						= Pointing1
				AnimationName				= MUGblnSwrd_PNTA
				AnimationMode				= LOOP
				AnimationSpeedFactorRange	= 0.9 1.1
			End
		End
		AnimationState						= EMOTION_CELEBRATING
			Animation						= CHRA
				AnimationName				= MUGblnSwrd_CHRA
				AnimationMode				= LOOP
				AnimationSpeedFactorRange	= 0.9 1.1
			End
		End
		AnimationState						= EMOTION_ALERT
			Animation						= IDLB
				AnimationName				= MUGblnSwrd_IDLB
				AnimationMode				= LOOP
			End
		End
		
;;------------------ SELECTED STATE --------------------------------------------------------


;;------------------ IDLE STATE ------------------------------------------------------------
		
		IdleAnimationState
			StateName						= Idle
			Animation						= IDLA
				AnimationName				= MUGblnSwrd_IDLA
				AnimationMode				= ONCE
				AnimationSpeedFactorRange	= 0.9 1.1
				AnimationPriority			= 20
			End
			Animation						= IDLC
				AnimationName				= MUGblnSwrd_IDLC
				AnimationMode				= ONCE
				AnimationSpeedFactorRange	= 0.9 1.1
			End
		End
		
;;-------------------- TRANSITIONS ---------------------------------------------------------
 
;;------------------------------------------------------------------------------------------    
  End

  ; ***DESIGN parameters ***
  Side = Mordor
	IsTrainable		= No
  EditorSorting = UNIT
	ThreatLevel = 1.0
  ThingClass = HORDE_UNIT
  CommandPoints = 1

  TransportSlotCount = 1
  WeaponSet
    Conditions = None 
    Weapon = PRIMARY    MordorGoblinSword
    AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
  End
  ArmorSet
    Conditions      = None
    Armor           = CreepArmor
    DamageFX        = NormalDamageFX
  End
  VisionRange = VISION_STANDARD_MELEE
  DisplayName = OBJECT:GoblinSwordsman
  CrushableLevel = 0  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CrusherLevel = 0 ;What can I crush?: 0 = small animals, 1 = infantry, 2 = trees, 3 = vehicles
  BountyValue = MORDOR_FIGHTER_BOUNTY_VALUE
	CrushRevengeWeapon = BasicInfantryCrushRevenge

  CommandSet = MordorFighterCommandSet


	; *** AUDIO Parameters ***;

	VoiceSelect			= UrukVoiceSelect	; MordorOrcHordeVoiceSelect
	VoiceMove			= UrukVoiceMove		; MordorOrcHordeVoiceMove
	VoiceMove2			= OrcVoiceMove2
	VoiceAttack			= UrukVoiceAttack	; MordorOrcHordeVoiceAttack
	VoiceAttack2			= OrcVoiceAttack2

	SoundImpact 			= ImpactHorse
 
	;UnitSpecificSounds
	;End

	EvaEventDamagedOwner		= UnitUnderAttack 	;Eva event to trigger when unit is damaged

	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
      	MaxUpdateRangeCap = 800
			AnimationSound = Sound:BodyFallGeneric2	Animation:MUGblnSwrd_SKL.MUGblnSwrd_DIEA	Frames:10
			AnimationSound = Sound:BodyFallGeneric2	Animation:MUGblnSwrd_SKL.MUGblnSwrd_DIEB	Frames:7
			AnimationSound = Sound:BodyFallOrc		Animation:MUGblnSwrd_SKL.MUGblnSwrd_LNDB	Frames:3
			AnimationSound = Sound:BodyFallOrc		Animation:MUGblnSwrd_SKL.MUGblnSwrd_LNDB	Frames:0
	End

	Behavior = LargeGroupAudioUpdate ModuleTag_LGAU		;Tie into LargeGroupAudio system
		Key = Goblin
	End


  ; *** ENGINEERING Parameters ***

  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER CAN_USE_SIEGE_TOWER SCORE THROWN_OBJECT ARMY_SUMMARY ORC GRAB_AND_DROP
 
  Body = ActiveBody ModuleTag_02
    MaxHealth         = MORDOR_GOBLIN_SWORDSMAN_HEALTH			;BALANCE Orc Warrior Health
    MaxHealthDamaged  = 5
    ;RecoveryTime      = 5000
  End
 
  Behavior = AIUpdateInterface ModuleTag_03
    AutoAcquireEnemiesWhenIdle = Yes ATTACK_BUILDINGS
    MoodAttackCheckRate        = 500
	AILuaEventsList				=	MordorFighterFunctions
    AttackPriority				= 	AttackPriority_Infantry
  End

  LocomotorSet
    Locomotor     = HumanLocomotor
    Condition     = SET_NORMAL
    Speed         = 32
  End

  LocomotorSet
    Locomotor     = HumanWanderLocomotor
    Condition     = SET_WANDER
    Speed         = 32
  End

  Behavior = PhysicsBehavior ModuleTag_04
    GravityMult = 1.0
    ShockStunnedTimeLow		= 800	;msec
    ShockStunnedTimeHigh	= 1000	;msec
    ShockStandingTime		= 2133	;msec
  End
 
  Behavior = SlowDeathBehavior ModuleTag_05
    DeathTypes = ALL -KNOCKBACK
    SinkDelay = 3000
    SinkRate = 0.40     ; in Dist/Sec
    DestructionDelay = 8000
    Sound = INITIAL GoblinVoiceDie			;UrukDie
  End
 
  Behavior = SquishCollide ModuleTag_06
    ;nothing
  End
 
  Behavior = HordeMemberCollide ModuleTag_HMC
    ;nothing
  End 
 
  Behavior = SlowDeathBehavior ModuleTag_07
    ; Same as normal death, but no sound (sound already played by SoundImpact = ... )
    DeathTypes = NONE +KNOCKBACK
    SinkDelay = 3000
    SinkRate = 0.40     ; in Dist/Sec
    DestructionDelay = 8000
    Sound = INITIAL GoblinVoiceDie
  End
 
  Behavior = BezierProjectileBehavior ModuleTag_08 ; Module starts asleep, and wakes up when thrown.
    ; 
    FirstHeight = 24  ; Height of Bezier control points above highest intervening terrain
    SecondHeight = 24
    FirstPercentIndent = 30% ; Percentage of shot distance control points are placed
    SecondPercentIndent = 70%
    TumbleRandomly = Yes

    CrushStyle = Yes ; I don't detonate, I just hit
    DieOnImpact = Yes
    BounceCount = 1   ; When I hit the ground, I'll arc again
    BounceDistance = 40 ; this far
    BounceFirstHeight = 24  ; Height of Bezier control points above highest intervening terrain
    BounceSecondHeight = 24
    BounceFirstPercentIndent = 20% ; Percentage of shot distance control points are placed
    BounceSecondPercentIndent = 80%

    GroundHitFX       = FX_ThrownRockGroundHit
    GroundBounceFX    = FX_ThrownRockBounceHit
  End		
	
 	Behavior = EmotionTrackerUpdate	Module_EmotionTracker
		TauntAndPointDistance		=	INFANTRY_TAUNT_POINT_RADIUS		; max distance to taunted/pointed objet
		TauntAndPointUpdateDelay	=	1000	; how often scan (milliseconds)
		TauntAndPointExcluded		=	NONE
		AfraidOf			=	NONE +RohanOathbreakerHordeSmall +RohanTreeBerd +RohanEntFir +RohanEntAsh +RohanEntBirch +MordorFellBeast +MordorWitchKingOnFellBeast +MordorBalrog +MordorCaveTroll +MordorMountainTroll +MordorDrummerTroll +MordorMumakil ;Must be SCARY kindof as well.
		AlwaysAfraidOf				=	NONE +MordorBalrog +RohanOathbreaker; +MordorWitchKing +MordorWitchKingOnFellBeast
		PointAt				=	NONE +GondorGwaihir 
		HeroScanDistance		=	150
		FearScanDistance		=	INFANTRY_FEAR_SCAN_RADIUS

		AddEmotion	=	Terror_Base
		AddEmotion	=	Doom_Base
		AddEmotion	=	UncontrollableFear_Base_Evil
		AddEmotion	=	FearIdle_Base
		AddEmotion	=	FearBusy_Base
		AddEmotion	=	Point_Base
		AddEmotion	=	Taunt_Base	
		AddEmotion	=	CheerIdle_Base
		AddEmotion	=	CheerBusy_Base
		AddEmotion	=	HeroCheerIdle_Base
		AddEmotion	=	HeroCheerBusy_Base
		AddEmotion	=	Alert_Base
	End		
    
  Geometry = CYLINDER
  GeometryMajorRadius = 8.0
  GeometryMinorRadius = 8.0
  GeometryHeight = 19.2
  GeometryIsSmall = Yes
  Shadow = SHADOW_DECAL
  ShadowSizeX = 11;
  ShadowSizeY = 11;
  ShadowTexture = ShadowI;
End

;------------------------------------------------------------------------------
;
;	This child object is used in the neutral lair.
;
ChildObject MordorGoblinSwordsman_Slaved MordorGoblinSwordsman

  	EvaEnemyUnitSightedEvent = GoblinCreepSighted ; Special event for goblins showing up. Helps distinguish the real enemies from random creeps

	; Should be the same as MordorGoblinSwordsman but with CREEP
	KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER CAN_USE_SIEGE_TOWER THROWN_OBJECT ARMY_SUMMARY ORC GRAB_AND_DROP CREEP SCORE

	VisionRange = CREEP_VISION
	DisplayName = OBJECT:GenericGoblinSwordsman
	Behavior = SlavedUpdate ModuleTag_Slave
		GuardMaxRange		= 250
		GuardWanderRange	= 40
	End
	
 	Behavior = EmotionTrackerUpdate	Module_EmotionTracker
		TauntAndPointDistance		=	350		; max distance to taunted/pointed objet
		TauntAndPointUpdateDelay	=	1000	; how often scan (milliseconds)
		TauntAndPointExcluded		=	NONE
		AfraidOf			=	NONE +RohanOathbreakerHordeSmall +RohanTreeBerd +RohanEntFir +RohanEntAsh +RohanEntBirch +MordorFellBeast +MordorWitchKingOnFellBeast +MordorBalrog +MordorCaveTroll +MordorMountainTroll +MordorDrummerTroll +MordorMumakil ;Must be SCARY kindof as well.
		AlwaysAfraidOf				=	NONE +MordorBalrog +RohanOathbreaker; +MordorWitchKing +MordorWitchKingOnFellBeast
		PointAt				=	NONE +GondorGwaihir 
		HeroScanDistance		=	150
		FearScanDistance		=	250

		AddEmotion	=	Terror_Base
		AddEmotion	=	Doom_Base
		AddEmotion	=	UncontrollableFear_Base_Evil
		AddEmotion	=	FearIdle_Base
		AddEmotion	=	FearBusy_Base
		AddEmotion	=	Point_Base
		AddEmotion	=	Taunt_Base	
		AddEmotion	=	CheerIdle_Base
		AddEmotion	=	CheerBusy_Base
		AddEmotion	=	HeroCheerIdle_Base
		AddEmotion	=	HeroCheerBusy_Base
		AddEmotion	=	Alert_Base
	End
End


;------------------------------------------------------------------------------
; aka Orc Warrior, MordorOrcWarrior, FighterMordor, OrcFighter, OrcHorde
Object MordorFighter
  ; *** ART Parameters ***

  	; This is required for garrisoned objects - please put in all objects.
	ButtonImage = BMOrcPit_Horde
  
  Draw = W3DHordeModelDraw ModuleTag_01

	OkToChangeModelColor = Yes
	  
	StaticModelLODMode = Yes
	; specify options for static LODs
	LodOptions	= LOW
		AllowMultipleModels		=	ALLOW_MULTIPLE_MODELS_LOW
		MaxRandomTextures		=	MAX_RANDOM_TEXTURES_LOW
		MaxRandomAnimations		=	MAX_RANDOM_ANIMATIONS_LOW
		MaxAnimFrameDelta		=	MAX_ANIM_FRAME_DELTA_LOW
	End
	
	LodOptions	= MEDIUM
		AllowMultipleModels		=	ALLOW_MULTIPLE_MODELS_MED
		MaxRandomTextures		=	MAX_RANDOM_TEXTURES_MED
		MaxRandomAnimations		=	MAX_RANDOM_ANIMATIONS_MED
		MaxAnimFrameDelta		=	MAX_ANIM_FRAME_DELTA_MED
	End
	
	LodOptions	= HIGH
		AllowMultipleModels		=	ALLOW_MULTIPLE_MODELS_HIGH
		MaxRandomTextures		=	MAX_RANDOM_TEXTURES_HIGH
		MaxRandomAnimations		=	MAX_RANDOM_ANIMATIONS_HIGH
		MaxAnimFrameDelta		=	MAX_ANIM_FRAME_DELTA_HIGH
	End
	
    
	WadingParticleSys = WaterRipplesTrail  ; used when the unit is wading in shallow water.

    DefaultModelConditionState
      Model               = MUOrcWar_SKN
      Model               = MUOrcWar_D_SKN  ExtraMesh:Yes
      Model               = MUOrcWar_E_SKN	ExtraMesh:Yes
      Model               = MUOrcWar_F_SKN  ExtraMesh:Yes
      Model               = MUOrcBrute_SKN  ExtraMesh:Yes
    End

	IdleAnimationState
		StateName = STATE_Idle
		Animation = IDLB ; bored
			AnimationName = MUOrcWarr_SKL.MUOrcWarr_IDLB
			AnimationPriority = 4
			AnimationMode		=	ONCE
			AnimationBlendTime	= 15
		End
		Animation = IDLO
			AnimationName = MUOrcWarr_SKL.MUOrcWarr_IDLO
			AnimationPriority = 1
			AnimationMode		=	ONCE
			AnimationBlendTime	= 15
		End		
		Animation = IDLP
			AnimationName = MUOrcWarr_SKL.MUOrcWarr_IDLP
			AnimationPriority = 1
			AnimationMode		=	ONCE
			AnimationBlendTime	= 15
		End		
		Animation = IDLQ
			AnimationName = MUOrcWarr_SKL.MUOrcWarr_IDLQ
			AnimationPriority = 1
			AnimationMode		=	ONCE
			AnimationBlendTime	= 15
		End		
		Animation = IDLR
			AnimationName = MUOrcWarr_SKL.MUOrcWarr_IDLR
			AnimationPriority = 1
			AnimationMode		=	ONCE
			AnimationBlendTime	= 15
		End		
		Animation = IDLS
			AnimationName = MUOrcWarr_SKL.MUOrcWarr_IDLS
			AnimationPriority = 1
			AnimationMode		=	ONCE
			AnimationBlendTime	= 15
		End
		Animation = IDLM
			AnimationName = MUOrcWarr_SKL.MUOrcWarr_IDLM
			AnimationPriority = 1
			AnimationMode		=	ONCE
			AnimationBlendTime	= 15
		End
		Animation = IDLL
			AnimationName = MUOrcWarr_SKL.MUOrcWarr_IDLL
			AnimationPriority = 1
			AnimationMode		=	ONCE
			AnimationBlendTime	= 15
		End
		Flags				=	RESTART_ANIM_WHEN_COMPLETE								
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "STATE_Selected" then CurDrawableSetTransitionAnimState("TRANS_Selected_to_Idle") end
		EndScript		
	End
	
    AnimationState = THROWN_PROJECTILE
                ; - McCarthy says this anim sucks, so its cut
		;Animation = Thrown
		;	AnimationName = MUOrcWarr_SKL.MUOrcWarr_FLYA
		;    AnimationMode = LOOP
		;End
		Animation = Thrown
			AnimationName = MUOrcWarr_SKL.MUOrcWarr_FLYB
		    AnimationMode = LOOP
		End
		Animation = Thrown
			AnimationName = MUOrcWarr_SKL.MUOrcWarr_FLYC
		    AnimationMode = LOOP
		End
    End

	AnimationState						= PASSENGER FREEFALL
		Animation						= gettingGrabbed
			AnimationName				= MUOrcWarr_SKL.MUOrcWarr_FLLA
			AnimationMode				= LOOP
		End
	End
    
	AnimationState						= FREEFALL
		Animation						= Falling
			AnimationName				= MUOrcWarr_SKL.MUOrcWarr_FLYC
			AnimationMode				= LOOP
			AnimationSpeedFactorRange	= 0.45	0.45
			AnimationBlendTime			= 5
		End
    End

    AnimationState						= PASSENGER EATING
		Animation						= being eaten
			AnimationName				= MUOrcWarr_SKL.MUOrcWarr_EATA
			AnimationMode				= ONCE
		End
    End
  
	AnimationState						= PASSENGER SIEGE_CONTAIN
		Animation						= IDLP
			AnimationName				= MUOrcWarr_SKL.MUOrcWarr_IDLB ;<- gentle crouch----------------
			AnimationBlendTime			= 5
			AnimationMode				= LOOP
		End
	End
	
	
	
	AnimationState = MOVING FIRING_OR_PREATTACK_A
			Animation = TrotAndFire
				AnimationName = MUOrcWarr_SKL.MUOrcWarr_ATRA
				AnimationMode = LOOP
			End
			Flags = RANDOMSTART
			;ParticleSysBone = None InfantryDustTrails
		End
    
     AnimationState = MOVING CLIMBING BACKING_UP
		ShareAnimation = Yes
		Animation = Climbing_Down
			AnimationName = MUOrcWarr_SKL.MUOrcWarr_CLMA
			AnimationMode = LOOP_BACKWARDS
		End
    End

    AnimationState = MOVING CLIMBING
		ShareAnimation = Yes
		Animation = Climbing_Up
			AnimationName = MUOrcWarr_SKL.MUOrcWarr_CLMA
			AnimationMode = LOOP
		End
    End

   AnimationState				=	MOVING BACKING_UP
		Animation				=	BackingUpA
			AnimationName		=	MUOrcWarr_SKL.MUOrcWarr_BAKA
			AnimationMode		=	LOOP
		End
		Animation				=	BackingUpB
			AnimationName		=	MUOrcWarr_SKL.MUOrcWarr_BAKB
			AnimationMode		=	LOOP
		End
		Flags					=	RANDOMSTART 
	End

	AnimationState					= MOVING EMOTION_TERROR
		ShareAnimation = Yes
		Animation					= Terror1
			AnimationName			= MUOrcWarr_SKL.MUOrcWarr_RUND
			AnimationMode			= LOOP
		End
		Animation					= Terror2
			AnimationName			= MUOrcWarr_SKL.MUOrcWarr_RUNE
			AnimationMode			= LOOP
		End
	End
	
	AnimationState = MOVING ATTACKING
		ShareAnimation = Yes
		Animation = RUNA
			AnimationName = MUOrcWarr_SKL.MUOrcWarr_RUNA 
			AnimationMode = LOOP
			AnimationPriority = 7
		End
		Animation = RUNB
			AnimationName = MUOrcWarr_SKL.MUOrcWarr_RUNB 
			AnimationMode = LOOP
		End
		Animation = RUNC
			AnimationName = MUOrcWarr_SKL.MUOrcWarr_RUNC
			AnimationMode = LOOP
			AnimationPriority = 2
		End
	End

    AnimationState = MOVING
		ShareAnimation = Yes
		Animation = RUNB
			AnimationName = MUOrcWarr_SKL.MUOrcWarr_RUNB 
			AnimationMode = LOOP
		End
		Animation = RUNC
			AnimationName = MUOrcWarr_SKL.MUOrcWarr_RUNC
			AnimationMode = LOOP
			AnimationPriority = 2
		End
		ParticleSysBone = None InfantryDustTrails
    End

    ; --- stunned anims
    AnimationState = STUNNED_FLAILING
		Animation = Flying_2
			AnimationName = MUOrcWarr_SKL.MUOrcWarr_FLYC
			AnimationMode = LOOP
			AnimationPriority = 10
		End
		Animation = Flying_3
			AnimationName = MUOrcWarr_SKL.MUOrcWarr_FLYB
			AnimationMode = LOOP
			AnimationPriority = 2
		End
    End

	; --------- Click and Hit Reactions ------------
	AnimationState = HIT_REACTION HIT_LEVEL_1
		Animation = Hit_Level_1_a
			AnimationName = MUOrcWarr_SKL.MUOrcWarr_HITA
			AnimationMode = ONCE
		End
	End
	AnimationState = HIT_REACTION HIT_LEVEL_2
		Animation = Hit_Level_2_a
			AnimationName = MUOrcWarr_SKL.MUOrcWarr_HITB
			AnimationMode = ONCE
		End
	End
	AnimationState = HIT_REACTION
		Animation = Hit_Level_1_a
			AnimationName = MUOrcWarr_SKL.MUOrcWarr_HITA
			AnimationMode = ONCE
		End
		Animation = Hit_Level_2_a
			AnimationName = MUOrcWarr_SKL.MUOrcWarr_HITB
			AnimationMode = ONCE
		End
	End			

    AnimationState = FIRING_OR_PREATTACK_A
		Animation = ATKA
			AnimationName = MUOrcWarr_SKL.MUOrcWarr_ATKA
			AnimationMode = LOOP
			UseWeaponTiming		= Yes
		End
		Animation = ATKB
			AnimationName = MUOrcWarr_SKL.MUOrcWarr_ATKB
			AnimationMode = LOOP
			UseWeaponTiming		= Yes
		End
		Animation = ATKC
			AnimationName = MUOrcWarr_SKL.MUOrcWarr_ATKC
			AnimationMode = LOOP
			UseWeaponTiming		= Yes
		End
		Animation = ATKD
			AnimationName = MUOrcWarr_SKL.MUOrcWarr_ATKD
			AnimationMode = LOOP
			UseWeaponTiming		= Yes
		End
    End

    AnimationState = DYING SPLATTED
		Animation = Splatted_On_Ground
			AnimationName = MUOrcWarr_SKL.MUOrcWarr_LNDA
			AnimationMode = ONCE
		End
		EnteringStateFX = FX_OrcHitGround
    End

    AnimationState = DYING AFLAME
		Animation = Flaming_Death
			AnimationName = MUOrcWarr_SKL.MUOrcWarr_MFDA
			AnimationMode = LOOP
		End
    End

    AnimationState = DYING
		Animation = Dying_1
			AnimationName = MUOrcWarr_SKL.MUOrcWarr_DIEA
			AnimationMode = ONCE
			AnimationPriority = 1
		End
		Animation = Dying_2
			AnimationName = MUOrcWarr_SKL.MUOrcWarr_DIEB
			AnimationMode = ONCE
			AnimationPriority = 20
		End
		Animation = Dying_3
			AnimationName = MUOrcWarr_SKL.MUOrcWarr_DIEC
			AnimationMode = ONCE
			AnimationPriority = 6
		End
		Animation = Dying_4
			AnimationName = MUOrcWarr_SKL.MUOrcWarr_DIED
			AnimationMode = ONCE
			AnimationPriority = 20
		End
		Animation = Dying_5
			AnimationName = MUOrcWarr_SKL.MUOrcWarr_DIEE
			AnimationMode = ONCE
			AnimationPriority = 20
		End
		Animation = Dying_6
			AnimationName = MUOrcWarr_SKL.MUOrcWarr_DIEF
			AnimationMode = ONCE
			AnimationPriority = 4
		End
    End
    
    AnimationState = STUNNED_STANDING_UP  
		Animation = Standing_Back_Up
			AnimationName = MUOrcWarr_SKL.MUOrcWarr_GTPA
			AnimationMode = ONCE
			AnimationSpeedFactorRange = 1.5 1.5
		End
    End

    AnimationState = STUNNED
		Animation = Splatted_On_Ground
			AnimationName = MUOrcWarr_SKL.MUOrcWarr_LNDA
			AnimationMode = ONCE
		End
		EnteringStateFX = FX_OrcHitGround
    End

    
    
    AnimationState = WAR_CHANT
		Animation = ChantA
			AnimationName = MUOrcWarr_SKL.MUOrcWarr_CHRA
			AnimationMode = ONCE
		End
		Animation = ChantB
			AnimationName = MUOrcWarr_SKL.MUOrcWarr_CHRB
			AnimationMode = ONCE
		End
		Animation = ChantC
			AnimationName = MUOrcWarr_SKL.MUOrcWarr_CHRC
			AnimationMode = ONCE
		End
		Animation = ChantD
			AnimationName = MUOrcWarr_SKL.MUOrcWarr_CHRD
			AnimationMode = ONCE
		End
		Animation = IDLH
			AnimationName = MUOrcWarr_SKL.MUOrcWarr_IDLH
			AnimationMode = ONCE
		End
		Animation = IDLI
			AnimationName = MUOrcWarr_SKL.MUOrcWarr_IDLI
			AnimationMode = ONCE
		End
		Flags						= RANDOMSTART RESTART_ANIM_WHEN_COMPLETE
	End
    
    ; Must go before selected so we don't become unafraid.
    AnimationState					= EMOTION_AFRAID UNCONTROLLABLE
		Animation					= FERA
			AnimationName			= MUOrcWarr_SKL.MUOrcWarr_FERA
			AnimationMode			= LOOP
		End
		Animation					= FERB
			AnimationName			= MUOrcWarr_SKL.MUOrcWarr_FERB
			AnimationMode			= LOOP
		End
		Animation					= FERC
			AnimationName			= MUOrcWarr_SKL.MUOrcWarr_FERC
			AnimationMode			= LOOP
		End
	End
	
	;-emotions--
	AnimationState					= EMOTION_AFRAID
		Animation					= FERA
			AnimationName			= MUOrcWarr_SKL.MUOrcWarr_FERA
			AnimationMode			= LOOP
		End
		Animation					= FERB
			AnimationName			= MUOrcWarr_SKL.MUOrcWarr_FERB
			AnimationMode			= LOOP
		End
		Animation					= FERC
			AnimationName			= MUOrcWarr_SKL.MUOrcWarr_FERC
			AnimationMode			= LOOP
		End
	End
	
	AnimationState							= EMOTION_TAUNTING
		Animation							= TNTA
			AnimationName					= MUOrcWarr_SKL.MUOrcWarr_TNTA
			AnimationMode					= ONCE
			AnimationSpeedFactorRange		= 0.8 1.2
		End
		Animation							= TNTA
			AnimationName					= MUOrcWarr_SKL.MUOrcWarr_TNTC
			AnimationMode					= ONCE
			AnimationSpeedFactorRange		= 0.8 1.2
		End
		Flags								= RANDOMSTART RESTART_ANIM_WHEN_COMPLETE
	End
	
	AnimationState							= EMOTION_POINTING
		Animation							= Pointing1
			AnimationName					= MUOrcWarr_SKL.MUOrcWarr_PNTA
			AnimationMode					= LOOP
		End
		Animation							= Pointing1
			AnimationName					= MUOrcWarr_SKL.MUOrcWarr_PNTB
			AnimationMode					= LOOP
		End
	End
	
	AnimationState							= EMOTION_CELEBRATING
		Animation							= ChantA
			AnimationName					= MUOrcWarr_SKL.MUOrcWarr_CHRA
			AnimationMode					= ONCE
		End
		Animation							= ChantB
			AnimationName					= MUOrcWarr_SKL.MUOrcWarr_CHRB
			AnimationMode					= ONCE
		End
		Animation							= ChantC
			AnimationName					= MUOrcWarr_SKL.MUOrcWarr_CHRC
			AnimationMode					= ONCE
		End
		Animation							= ChantD
			AnimationName					= MUOrcWarr_SKL.MUOrcWarr_CHRD
			AnimationMode					= ONCE
		End
		Flags				=	RESTART_ANIM_WHEN_COMPLETE	
	End
	
	AnimationState							= EMOTION_ALERT
		Animation							= ALERT
			AnimationName					= MUOrcWarr_SKL.MUOrcWarr_IDLA
			AnimationMode					= LOOP
		End
		Flags								= RESTART_ANIM_WHEN_COMPLETE RANDOMSTART
	End
    
    AnimationState = SELECTED
		StateName			= STATE_Selected
		SimilarRestart		=   Yes
		Flags				= RESTART_ANIM_WHEN_COMPLETE 

		Animation = IDLA
			AnimationName		= MUOrcWarr_SKL.MUOrcWarr_IDLA
			AnimationMode		= ONCE
			AnimationPriority	= 4
			AnimationBlendTime	= 10
		End
		Animation = IDLC
			AnimationName		= MUOrcWarr_SKL.MUOrcWarr_IDLC
			AnimationMode		= ONCE
			AnimationPriority	= 10
			AnimationBlendTime	= 10
		End
		Animation = IDLE
			AnimationName		= MUOrcWarr_SKL.MUOrcWarr_IDLE
			AnimationMode		= ONCE
			AnimationPriority	= 2
			AnimationBlendTime	= 10
		End
		Animation = IDLZ
			AnimationName		= MUOrcWarr_SKL.MUOrcWarr_IDLZ
			AnimationMode		= ONCE
			AnimationPriority	= 8
			AnimationBlendTime	= 10
		End
		
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "STATE_Idle" then CurDrawableSetTransitionAnimState("TRANS_Idle_to_Selected") end
		EndScript
    End
    
    TransitionState = TRANS_Idle_to_Selected
		Animation = ATNA
			AnimationName		= MUOrcWarr_SKL.MUOrcWarr_ATNA
			AnimationMode		= ONCE
			AnimationBlendTime	= 10
		End
    End
    
    TransitionState = TRANS_Selected_to_Idle
		Animation = ATNF
			AnimationName		= MUOrcWarr_SKL.MUOrcWarr_ATNF
			AnimationMode		= ONCE
			AnimationBlendTime	= 10
		End
    End
    
    ;-emotions--    
    AnimationState = QUARRELSOME_FIGHTING
		StateName = SomeState
		Animation = ATKB
			AnimationName = MUOrcWarr_SKL.MUOrcWarr_ATKB
			AnimationMode = ONCE
		End
		Animation = ATKC
			AnimationName = MUOrcWarr_SKL.MUOrcWarr_ATKC
			AnimationMode = ONCE
		End
		Flags				= RESTART_ANIM_WHEN_COMPLETE
    End
    
    AnimationState = EMOTION_QUARRELSOME
		SimilarRestart = Yes
		StateName = Quarrel
  		Animation = Chant;
			AnimationName = MUOrcWarr_SKL.MUOrcWarr_CHRA
			AnimationMode = ONCE
			AnimationPriority = 500
		End
		Animation = Chant1
			AnimationName = MUOrcWarr_SKL.MUOrcWarr_IDLB
			AnimationMode = ONCE
			AnimationPriority = 500
		End
		Animation = Chant2
			AnimationName = MUOrcWarr_SKL.MUOrcWarr_IDLF
			AnimationMode = ONCE
			AnimationPriority = 500
		End
		Animation = Chant3
			AnimationName = MUOrcWarr_SKL.MUOrcWarr_IDLG
			AnimationMode = ONCE
			AnimationPriority = 500
		End
		Animation = Chant4
			AnimationName = MUOrcWarr_SKL.MUOrcWarr_IDLJ
			AnimationMode = ONCE
			AnimationPriority = 500
		End
		Animation = BIG_BLEND_QUARREL
			AnimationName = MUOrcWarr_SKL.MUOrcWarr_CHRA
			AnimationMode = ONCE
			AnimationBlendTime	= 15
			AnimationPriority = 1
		End
		Flags = RESTART_ANIM_WHEN_COMPLETE RANDOMSTART
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev ~= "Quarrel"
			then
				return "BIG_BLEND_QUARREL"
			end
		EndScript

    End
  End

	; ***DESIGN parameters ***
	Side = Mordor
	EditorSorting = UNIT
	ThreatLevel = 1.0
	ThingClass = HORDE_UNIT
	CommandPoints = 2 
	TransportSlotCount = 1
	EmotionRange = 240

  	VisionRange = VISION_STANDARD_MELEE
  	ShroudClearingRange = SHROUD_CLEAR_STANDARD

	BountyValue = MORDOR_FIGHTER_BOUNTY_VALUE
	DisplayName = OBJECT:MordorFighter
	CrushableLevel = 0  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
	CrusherLevel = 0 ;What can I crush?: 0 = small animals, 1 = infantry, 2 = trees, 3 = vehicles
	CrushRevengeWeapon = BasicInfantryCrushRevenge
	CommandSet = MordorFighterCommandSet
  
	WeaponSet
		Conditions = None 
		Weapon = PRIMARY    MordorWarriorAxe
		AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End
	ArmorSet
		Conditions      = None
		Armor           = MordorOrcArmor
		DamageFX        = NormalDamageFX
	End


	; *** AUDIO Parameters ***;

	VoiceAttack					= OrcFighterVoiceAttack					;UrukVoiceAttack		;MordorOrcHordeVoiceAttack
	VoiceAttack2				= OrcVoiceAttack2
 	VoiceAttackCharge				= OrcFighterVoiceAttackCharge				;MordorOrcHordeVoiceAttackCharge
	VoiceAttackStructure			= OrcFighterVoiceAttackBuilding
	VoiceCreated				= CampOrcCreateOrcHorde
	VoiceFullyCreated 			= CampOrcCreateOrcHorde
	VoiceMove					= OrcFighterVoiceMove					;UrukVoiceMove			;MordorOrcHordeVoiceMove
	VoiceMove2					= OrcVoiceMove2
	VoiceMoveToCamp				= OrcFighterVoiceMoveCamp
	VoicePriority				= 15
	VoiceRetreatToCastle			= OrcFighterVoiceRetreat
	VoiceSelect					= OrcFighterVoiceSelect					;UrukVoiceSelect		;MordorOrcHordeVoiceSelect
	VoiceSelect2				= UrukSwordmanVoiceSelect2
	VoiceSelectBattle				= OrcFighterVoiceSelectBattle

	VoiceEnterStateAttack			= OrcFighterVoiceEnterStateAttack			;UrukVoiceAttack		;MordorOrcHordeVoiceAttack
 	VoiceEnterStateAttackCharge		= OrcFighterVoiceEnterStateAttackCharge		;MordorOrcHordeVoiceAttackCharge
	VoiceEnterStateAttackStructure	= OrcFighterVoiceEnterStateAttackBuilding
	VoiceEnterStateMove			= OrcFighterVoiceEnterStateMove			;UrukVoiceMove			;MordorOrcHordeVoiceMove
	VoiceEnterStateMoveToCamp		= OrcFighterVoiceEnterStateMoveCamp
	VoiceEnterStateRetreatToCastle	= OrcFighterVoiceEnterStateRetreat
	VoiceGuard					= OrcFighterVoiceMove

	SoundImpact					= ImpactHorse						;UrukDie

	UnitSpecificSounds
		VoiceGarrison			= OrcFighterVoiceGarrison
		VoiceEnterUnitMordorMumakil	= OrcFighterVoiceEnterMumakil
		VoiceEnterUnitSlaughterHouse	= OrcFighterVoiceGarrisonSlaughterHouse
	End

	EvaEventDamagedOwner			= UnitUnderAttack 	;Eva event to trigger when unit is damaged
	;EvaEventDieOwner				= GroupOrcHordeDie	;Eva event to trigger on unit's death. NOTICE THAT this is only for permanent deaths
											;For deaths you can respawn from, use the DeathFX

	Behavior = LargeGroupAudioUpdate ModuleTag_LGAU		  	; Tie into LargeGroupAudio system
		Key = Orc_Infantry Orc_Swordman
	End

	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
      	MaxUpdateRangeCap = 800
			;AnimationSound = Sound:OrcEatenVox		Animation:MUOrcWarr_SKL.MUOrcWarr_EATA	Frames: 29	;too much delay
			AnimationSound = Sound:BodyFallGeneric2	Animation:MUOrcWarr_SKL.MUOrcWarr_DIEA	Frames: 63
			AnimationSound = Sound:BodyFallGeneric2	Animation:MUOrcWarr_SKL.MUOrcWarr_DIEB	Frames: 31
			AnimationSound = Sound:BodyFallOrc		Animation:MUOrcWarr_SKL.MUOrcWarr_DIEC	Frames: 23
			AnimationSound = Sound:BodyFallGeneric2	Animation:MUOrcWarr_SKL.MUOrcWarr_DIED	Frames: 69
			AnimationSound = Sound:BodyFallGeneric2	Animation:MUOrcWarr_SKL.MUOrcWarr_DIEE	Frames: 56
			AnimationSound = Sound:BodyFallGeneric2	Animation:MUOrcWarr_SKL.MUOrcWarr_DIEF	Frames: 157
			AnimationSound = Sound:BodyFallOrc		Animation:MUOrcWarr_SKL.MUOrcWarr_LNDA	Frames: 1
	End


  ; *** ENGINEERING Parameters ***

  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER CAN_USE_SIEGE_TOWER SCORE THROWN_OBJECT ATTACK_NEEDS_LINE_OF_SIGHT ORC GRAB_AND_DROP
 
	Body = ActiveBody ModuleTag_02
		CheerRadius 	  = EMOTION_CHEER_RADIUS
		MaxHealth         = MORDOR_FIGHTER_HEALTH
		MaxHealthDamaged  = MORDOR_FIGHTER_HEALTH_DAMAGED
		;RecoveryTime      = MORDOR_FIGHTER_HEALTH_RECOVERY_TIME
	End
 
  Behavior = AIUpdateInterface ModuleTag_03
    AutoAcquireEnemiesWhenIdle	=	Yes
    MoodAttackCheckRate			=	20
	AILuaEventsList				=	MordorFighterFunctions
    MaxCowerTime				=	10000
    MinCowerTime				=	3000
    AttackPriority				= 	AttackPriority_Infantry
  End
  
  LocomotorSet
    Locomotor     = HumanLocomotor
    Condition     = SET_NORMAL
    Speed         = NORMAL_EVIL_INFANTRY_MEMBER_SPEED
  End

	Behavior = PhysicsBehavior ModuleTag_04
		GravityMult = 1.0
		ShockStunnedTimeLow		= 1400	;msec
		ShockStunnedTimeHigh	= 2400	;msec
		ShockStandingTime		= 933	;msec
	End
	
	Behavior = AttributeModifierUpgrade ModuleTag_AMU
		TriggeredBy = Upgrade_MordorFighterFearless
		AttributeModifier = FearlessForever
	End
	 
	Behavior = SlowDeathBehavior ModuleTag_05
		DeathTypes = ALL -KNOCKBACK
		SinkDelay = 3000
		SinkRate = 0.60     ; in Dist/Sec
		DestructionDelay = 10000
		Sound = INITIAL OrcVoiceDie				;UrukDie
	End
	 
	Behavior = SquishCollide ModuleTag_06
		;nothing
	End
 
  Behavior = SlowDeathBehavior ModuleTag_07
    ; Same as normal death, but no sound (sound already played by SoundImpact = ... )
    DeathTypes = NONE +KNOCKBACK
	SinkDelay = 3000
	SinkRate = 0.60     ; in Dist/Sec
	DestructionDelay = 10000
	Sound = INITIAL OrcVoiceDie					;UrukDie
  End
 
  Behavior = BezierProjectileBehavior ModuleTag_08 ; Module starts asleep, and wakes up when thrown.
    ; 
    FirstHeight = 25  ; Height of Bezier control points above highest intervening terrain
    SecondHeight = 25
    FirstPercentIndent = 30% ; Percentage of shot distance control points are placed
    SecondPercentIndent = 70%
    TumbleRandomly = Yes

    CrushStyle = Yes ; I don't detonate, I just hit
    DieOnImpact = Yes
    BounceCount = 1   ; When I hit the ground, I'll arc again
    BounceDistance = 41 ; this far
    BounceFirstHeight = 25  ; Height of Bezier control points above highest intervening terrain
    BounceSecondHeight = 25
    BounceFirstPercentIndent = 20% ; Percentage of shot distance control points are placed
    BounceSecondPercentIndent = 80%

		GroundHitFX       = FX_ThrownRockGroundHit
		GroundBounceFX    = FX_ThrownRockBounceHit
	End

  Behavior = HordeMemberCollide ModuleTag_HMC
    ;nothing
  End
 
  Geometry = CYLINDER
  GeometryMajorRadius = 6.80	    ; reduced this from 10.0 to 8.5 in order to decrease collision
  GeometryMinorRadius = 6.80	    ; count between fighters in hordes
  GeometryHeight = 19.2
  GeometryIsSmall = No

    Shadow = SHADOW_DECAL
    ShadowSizeX = 21;
    ShadowSizeY = 21;
    ShadowTexture = ShadowI;
End

;------------------------------------------------------------------------------
; aka Orc Archer, MordorOrcArcher, ArcherMordor, OrcArcher
Object MordorArcher
	; *** ART Parameters ***

	; This is required for garrisoned objects - please put in all objects.
	ButtonImage = BMOrcPit_Archers
	SelectPortrait         = UPMordor_OrcArcher
	UpgradeCameo1           = Upgrade_FireArrows

	Draw = W3DHordeModelDraw ModuleTag_01

		OkToChangeModelColor = Yes
		StaticModelLODMode = Yes
		ParticlesAttachedToAnimatedBones = yes

		; specify options for static LODs
		LodOptions	= LOW
			AllowMultipleModels		=	ALLOW_MULTIPLE_MODELS_LOW
			MaxRandomTextures		=	MAX_RANDOM_TEXTURES_LOW
			MaxRandomAnimations		=	MAX_RANDOM_ANIMATIONS_LOW
			MaxAnimFrameDelta		=	MAX_ANIM_FRAME_DELTA_LOW
		End
	
		LodOptions	= MEDIUM
			AllowMultipleModels		=	ALLOW_MULTIPLE_MODELS_MED
			MaxRandomTextures		=	MAX_RANDOM_TEXTURES_MED
			MaxRandomAnimations		=	MAX_RANDOM_ANIMATIONS_MED
			MaxAnimFrameDelta		=	MAX_ANIM_FRAME_DELTA_MED
		End
		
		LodOptions	= HIGH
			AllowMultipleModels		=	ALLOW_MULTIPLE_MODELS_HIGH
			MaxRandomTextures		=	MAX_RANDOM_TEXTURES_HIGH
			MaxRandomAnimations		=	MAX_RANDOM_ANIMATIONS_HIGH
			MaxAnimFrameDelta		=	MAX_ANIM_FRAME_DELTA_HIGH
		End

;========= WITH BOW

		DefaultModelConditionState
			Model						= MUOrcArchr_SKN
			Skeleton					= MUOrcArchr_SKL
			WeaponLaunchBone			= PRIMARY ARRROW
		End
	
;========= WITH BOW UPGRADE

		ModelConditionState			WEAPONSET_PLAYER_UPGRADE
			Model						= MUOrcArchr_SKN
			Skeleton					= MUOrcArchr_SKL
			WeaponLaunchBone			= PRIMARY ARRROW
			;ParticleSysBone				= arrowFire arrowFire FollowBone:Yes
		End

;========= DEFAULT IDLE ANIMATIONS

		IdleAnimationState
			StateName = STATE_Idle
				Animation = IDLA
				AnimationName		= MUOrcArchr_IDLA
				AnimationMode		= ONCE
				AnimationPriority	= 6
				AnimationSpeedFactorRange = 0.8 1.2
				AnimationBlendTime  = 15
			End
			;*** Repeat IDLA because animation priorities will not choose same animation twice so it can alternate between first two mostly.
			StateName = STATE_Idle
				Animation = IDLA
				AnimationName		= MUOrcArchr_IDLA
				AnimationMode		= ONCE
				AnimationPriority	= 6
				AnimationSpeedFactorRange = 0.8 1.2
				AnimationBlendTime  = 15
			End
			Animation = IDLC
				AnimationName		= MUOrcArchr_IDLC
				AnimationMode		= ONCE
				AnimationPriority	= 1
				AnimationSpeedFactorRange = 0.8 1.2
				AnimationBlendTime  = 15
			End
			Animation = IDLD
				AnimationName		= MUOrcArchr_IDLD
				AnimationMode		= ONCE
				AnimationPriority	= 1
				AnimationSpeedFactorRange = 0.8 1.2
				AnimationBlendTime  = 15
			End
;			Animation = IDLE
;				AnimationName		= MUOrcArchr_IDLE
;				AnimationMode		= ONCE
;				AnimationPriority	= 1
;				AnimationSpeedFactorRange = 0.8 1.2
;				AnimationBlendTime  = 15
;			End
;			Animation = IDLF
;				AnimationName		= MUOrcArchr_IDLF
;				AnimationMode		= ONCE
;				AnimationPriority	= 1
;				AnimationSpeedFactorRange = 0.8 1.2
;				AnimationBlendTime  = 15
;			End
			BeginScript
				CurDrawableShowSubObject("arrownock") ;Circumvents blend issues when the arrow is being shown...
				CurDrawableHideSubObject("arrrow")

				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Selected"	then CurDrawableSetTransitionAnimState("TRANS_Selected_to_Idle") return end
			EndScript
		End
 
;========= PASSENGER ANIMS
    AnimationState						= PASSENGER EATING
		Animation						= being_eaten
			AnimationName				= MUOrcArchr_EATA
			AnimationMode				= ONCE
		End
    End
 
    AnimationState						= PASSENGER
		Animation						= Wiggling
			AnimationName				= MUOrcArchr_FLLA
			AnimationMode				= LOOP
		End
    End

    AnimationState						= THROWN_PROJECTILE
		Animation						= Thrown
			AnimationName				= MUOrcArchr_FLYA
			AnimationMode				= LOOP
		End
    End

;========= FLYING THROUGH AIR

	AnimationState						= FREEFALL
		Animation						= Flying_1
			AnimationName				= MUORCARCHR_FLYA
			AnimationMode				= LOOP
			AnimationSpeedFactorRange	= 0.5	0.5
			AnimationBlendTime			= 10
		End
    End
 
;========= STUNNED ANIMS

    AnimationState = STUNNED_FLAILING
 		Animation = Flying
			AnimationName = MUOrcArchr_FLYA
			AnimationMode = LOOP
		End
		Flags = RANDOMSTART
    End
    
    ;========= DYING

    ; smashed
    AnimationState						= USER_1 DYING
		Animation						= Moving
			AnimationName				= MUOrcArchr_DIEC
			AnimationMode				= ONCE
		End
    End
    
    AnimationState						= DYING SPLATTED
 		Animation						= Splattered_On_Ground
			AnimationName				= MUOrcArchr_LNDA
			AnimationMode				= ONCE
		End
		EnteringStateFX					= FX_OrcHitGround
    End

    AnimationState = DYING AFLAME
 		Animation = Flaming_Death
			AnimationName = MUOrcArchr_MFDA
			AnimationMode = LOOP
		End
		Animation = Flaming_Death2
			AnimationName = MUOrcArchr_MFDB
			AnimationMode = LOOP
		End
    End

    AnimationState = DYING
 		Animation = Dying1
			AnimationName = MUOrcArchr_DIEA
			AnimationMode = ONCE
			AnimationPriority = 20
		End
		Animation = Dying2
			AnimationName = MUOrcArchr_DIEB
			AnimationMode = ONCE
			AnimationPriority = 1
		End
		Animation = Dying3
			AnimationName = MUOrcArchr_DIEC
			AnimationMode = ONCE
			AnimationPriority = 5
		End
		Animation = Dying4
			AnimationName = MUOrcArchr_DIED
			AnimationMode = ONCE
			AnimationPriority = 15
		End
    End
    
    ;========= STUNNED ANIMS

    AnimationState = STUNNED_STANDING_UP
 		Animation = Standing_Back_Up
			AnimationName = MUOrcArchr_GTPA
			AnimationMode = ONCE
			AnimationSpeedFactorRange = 1.5 1.5
		End
    End
    
    AnimationState = STUNNED
 		Animation = Splattered_On_Ground
			AnimationName = MUOrcArchr_LNDA
			AnimationMode = ONCE
		End
		EnteringStateFX = FX_OrcHitGround
    End


 


;========= CLIMBING

	AnimationState				= MOVING CLIMBING BACKING_UP
		Animation				= ClimbingDown
			AnimationName		= MUOrcArchr_CLMA
			AnimationMode		= LOOP_BACKWARDS
		End
    End

	AnimationState				= MOVING CLIMBING
		Animation				= ClimbingUp
			AnimationName		= MUOrcArchr_CLMA
			AnimationMode		= LOOP
		End
    End

;========= TERROR

	AnimationState					= MOVING EMOTION_TERROR EMOTION_LOOK_TO_SKY
		ShareAnimation = Yes
		Animation					= TerrorFromTheSky
			AnimationName			= MUOrcArchr_RUNG
			AnimationMode			= LOOP
		End
	End
	AnimationState					= MOVING EMOTION_TERROR
		ShareAnimation = Yes
		Animation					= Terror
			AnimationName			= MUOrcArchr_RUNF
			AnimationMode			= LOOP
		End
	End

;========= BACKING UP

	AnimationState = MOVING BACKING_UP
		ShareAnimation = Yes
		;Animation = Backing_Up_1
		;	AnimationName = MUOrcArchr_BAKA
		;	AnimationMode = LOOP
		;End
 		;Animation = Backing_Up_2
		;	AnimationName = MUOrcArchr_BAKB
		;	AnimationMode = LOOP
		;End
 		Animation = Backing_Up_3
			AnimationName = MUOrcArchr_BAKC
			AnimationMode = LOOP
		End
	End    
       
;========= MOVING

	AnimationState					=	MOVING WANDER
		ShareAnimation = Yes
		Animation					=	Wander1
			AnimationName			=	MUOrcArchr_WLKA 
		End
		Animation					=	Wander2
			AnimationName			=	MUOrcArchr_WLKB ;20
		End
		Flags						=	RANDOMSTART
	End

	AnimationState = MOVING
		ShareAnimation = Yes
		Animation = Moving
			AnimationName = MUOrcArchr_RUNB
			AnimationMode = LOOP
			AnimationSpeedFactorRange = 0.8 0.8
		End
		Animation = Moving
			AnimationName = MUOrcArchr_RUNC
			AnimationMode = LOOP
			AnimationSpeedFactorRange = 0.8 0.8
		End
		Animation = Moving
			AnimationName = MUOrcArchr_RUND
			AnimationMode = LOOP
			AnimationSpeedFactorRange = 0.8 0.8
		End
		ParticleSysBone = None InfantryDustTrails
		BeginScript
			CurDrawableShowSubObject("arrownock") ;Circumvents blend issues when the arrow is being shown...
		EndScript
	End
	
	
	AnimationState					=	FIRING_OR_PREATTACK_A WEAPONSTATE_CLOSE_RANGE
  		Animation					=	BowPunchWhenClose
  			AnimationName			=	MUOrcArchr_ATKD 
  			AnimationMode			=	ONCE
  			UseWeaponTiming			=	Yes
  		End
 		BeginScript
			CurDrawableHideSubObject("arrow") ;Circumvents blend issues when the arrow is being shown...
		EndScript
 	End
	

;========= NEW STYLE ARCHERY 

	AnimationState					=	PREATTACK_A 
		StateName					=	STATE_PreFiring
		Animation					=	ReadyToDrawn
			AnimationName			=	MUOrcArchr_ATA1
			AnimationMode			=	ONCE
;				UseWeaponTiming			=	NoNONONOO!!!	; UseWeaponTiming plus random weapon field equals desync.  Leaving as warning
			AnimationBlendTime		=	10
		End
		BeginScript
			CurDrawableShowSubObject("arrrow") ;Circumvents blend issues when the arrow is being shown...
		EndScript
	End

	AnimationState					=	FIRING_OR_RELOADING_A 
		StateName					=	STATE_Firing
		Animation					=	OneFrameOfShooting
			AnimationName			=	MUOrcArchr_ATA2
			AnimationMode			=	ONCE
;				UseWeaponTiming			=	NoNONONOO!!!	; Left in as reminder why not to use: UseWeaponTiming does not work for archers. Do not attempt to use this!
			AnimationSpeedFactorRange = 1.1 1.1			; Therefore, this is all you get.  A slight speed up so that the animation can always finish before any possible random value Design sets the range for
			AnimationBlendTime		=	0				; Blend time needs to be zero or else the arrow subobject lingers length of blend.
		End
		BeginScript
			CurDrawableShowSubObject("arrrow") ;Circumvents blend issues when the arrow is being shown...
		EndScript
	End

;========= PERSISTANT FIRING (KEEP BOW DRAWN )

	AnimationState					= CONTINUOUS_FIRE_MEAN
		StateName					=	STATE_Coasting
		Animation					=	HangFrameWhileCoasting
			AnimationName			=	MUOrcArchr_ATA2
			AnimationMode			=	MANUAL
		End
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "STATE_Firing" then CurDrawableAllowToContinue() return end
			CurDrawableShowSubObject("arrrow") ;Circumvents blend issues when the arrow is being shown...
		EndScript
	End
	
	AnimationState					= CONTINUOUS_FIRE_SLOW
		StateName					= STATE_Idle
		Animation					= PutAwayArrow
			AnimationName			= MUOrcArchr_ATA3
			AnimationMode			= ONCE
		End
		BeginScript
			CurDrawableShowSubObject("arrrow") ;Circumvents blend issues when the arrow is being shown...
		EndScript
	End

;========= HIT REACTION

	AnimationState = HIT_REACTION
		Animation = Hit_Level_1_a
			AnimationName = MUOrcArchr_HITA
			AnimationMode = ONCE
		End
	End
	
;========= WAR CHANT 

	AnimationState = WAR_CHANT
;		Animation = Chant
;			AnimationName = MUOrcArchr_TNTA ; This looks bad here.
;			AnimationMode = ONCE
;		End
		Animation					= TauntingA
			AnimationName			= MUOrcArchr_TNTA
			AnimationMode			= ONCE
		End
		Animation					= TauntingB
			AnimationName			= MUOrcArchr_TNTB
			AnimationMode			= ONCE
		End
		Animation					= TauntingC
			AnimationName			= MUOrcArchr_TNTC
			AnimationMode			= ONCE
		End
		Animation					= TauntingD
			AnimationName			= MUOrcArchr_TNTD
			AnimationMode			= ONCE
		End	
		Flags						= RANDOMSTART RESTART_ANIM_WHEN_COMPLETE
	End

;========= EMOTIONS ===================================
		
;;======= TERROR

		AnimationState							= EMOTION_AFRAID
			ShareAnimation						= Yes
			Animation							= FERA
				AnimationName					= MUOrcArchr_FERA
				AnimationMode					= LOOP
			End
			Animation							= FERB
				AnimationName					= MUOrcArchr_FERB
				AnimationMode					= LOOP
			End
			Animation							= FERC
				AnimationName					= MUOrcArchr_FERC
				AnimationMode					= LOOP
			End
		End	

;;======= TAUNTING

		AnimationState							= EMOTION_TAUNTING
			Animation							= TNTA
				AnimationName					= MUOrcArchr_TNTA
				AnimationMode					= ONCE
				AnimationSpeedFactorRange		= 0.8 1.2
			End
			Animation							= TNTB
				AnimationName					= MUOrcArchr_TNTB
				AnimationMode					= ONCE
				AnimationSpeedFactorRange		= 0.8 1.2
			End
			Animation							= TNTC
				AnimationName					= MUOrcArchr_TNTC
				AnimationMode					= ONCE
				AnimationSpeedFactorRange		= 0.8 1.2
			End
			Animation							= TNTD
				AnimationName					= MUOrcArchr_TNTD
				AnimationMode					= ONCE
				AnimationSpeedFactorRange		= 0.8 1.2
			End
			Flags								= RANDOMSTART RESTART_ANIM_WHEN_COMPLETE
		End
		AnimationState							= EMOTION_POINTING
			Animation							= Pointing1
				AnimationName					= MUOrcArchr_PNTA
				AnimationMode					= LOOP
			End
		End

;;======= CELEBRATING
		AnimationState							= EMOTION_CELEBRATING
			Animation							= CHRA1
				AnimationName					= MUOrcArchr_CHRA
				AnimationMode					= Once
				AnimationSpeedFactorRange		= 0.8 1.2
			End
			Animation							= CHRA2
				AnimationName					= MUOrcArchr_CHRB
				AnimationMode					= Once
				AnimationSpeedFactorRange		= 0.8 1.2
			End
			Animation							= CHRA3
				AnimationName					= MUOrcArchr_CHRC
				AnimationMode					= Once
				AnimationSpeedFactorRange		= 0.8 1.2
			End
			Flags								= RESTART_ANIM_WHEN_COMPLETE
		End
	
;;======= ALERT

		AnimationState							= EMOTION_ALERT
			Animation							= ALERT
				AnimationName					= MUOrcArchr_IDLB
				AnimationMode					= LOOP
			End
			Flags								= RANDOMSTART
		End

;;======= SELECTED

		AnimationState = SELECTED
			StateName			= STATE_Selected
 			Animation			= Selected
				AnimationName	= MUOrcArchr_ATNB
				AnimationMode	= LOOP
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Idle"	then CurDrawableSetTransitionAnimState("TRANS_Idle_to_Selected") return end
			EndScript
		End

;;======= TRANSITIONS

		TransitionState = TRANS_Idle_to_Selected
			Animation			= Salute
				AnimationName	= MUOrcArchr_ATNA
				AnimationMode	= ONCE
			End		
		End
		
		TransitionState = TRANS_Selected_to_Idle
			Animation			= ATNC
				AnimationName	= MUOrcArchr_ATNC
				AnimationMode	= ONCE
			End		
		End		
	End

	; ***DESIGN parameters ***
	Side = Mordor
	EditorSorting = UNIT
	ThreatLevel = 1.0
	ThingClass = HORDE_UNIT
	EmotionRange = 240
	CommandPoints = 3

	TransportSlotCount = 1
	WeaponSet
		Conditions = None 
		Weapon = PRIMARY    MordorArcherBow
		AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End
;	WeaponSet
;		Conditions = CLOSE_RANGE CONTESTING_BUILDING
;		Weapon = PRIMARY   MordorArcherBowMelee
;		AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
;	End
	ArmorSet
		Conditions      = None
		Armor           = ArcherArmor
		DamageFX        = NormalDamageFX
	End

	ShroudClearingRange = SHROUD_CLEAR_STANDARD
	VisionRange = MORDOR_ARCHER_VISION_RANGE

	BountyValue = MORDOR_ARCHER_BOUNTY_VALUE
	DisplayName = OBJECT:MordorArcher
	CrushableLevel = 0  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
	CrusherLevel = 0 ;What can I crush?: 0 = small animals, 1 = infantry, 2 = trees, 3 = vehicles
	CrushRevengeWeapon = RangedInfantryCrushRevenge
	  
	CommandSet = MordorArcherCommandSet
 
	; *** AUDIO Parameters ***;

	VoiceAmbushed				= OrcArcherVoiceAmbushed
	VoiceAttack 				= OrcArcherVoiceAttack	
	VoiceAttack2				= OrcVoiceAttack2
	VoiceAttackAir				= OrcArcherVoiceAttack
	VoiceAttackAir2				= OrcVoiceAttack2
	VoiceAttackStructure			= OrcArcherVoiceAttackBuilding
	VoiceAttackCharge			= OrcArcherVoiceAttackCharge
	VoiceCreated				= CampOrcCreateOrcArchers
	VoiceFullyCreated 			= CampOrcCreateOrcArchers
	VoiceGuard				= OrcArcherVoiceMove
	VoiceMove 				= OrcArcherVoiceMove		
	VoiceMove2				= OrcVoiceMove2
	VoiceMoveWhileAttacking			= OrcArcherVoiceDisengage
	VoicePriority				= 46
	VoiceRetreatToCastle			= OrcArcherVoiceRetreat
	VoiceSelect 				= OrcArcherVoiceSelect
	VoiceSelect2 				= UrukCrossbowmanVoiceSelect2
	VoiceSelectBattle			= OrcArcherVoiceSelectBattle

	VoiceEnterStateAttack 			= OrcArcherVoiceEnterStateAttack		
	VoiceEnterStateAttackStructure		= OrcArcherVoiceEnterStateAttackBuilding
	VoiceEnterStateAttackCharge		= OrcArcherVoiceEnterStateAttackCharge
	VoiceEnterStateMove 			= OrcArcherVoiceEnterStateMove		
	VoiceEnterStateMoveWhileAttacking	= OrcArcherVoiceEnterStateDisengage
	VoiceEnterStateRetreatToCastle		= OrcArcherVoiceEnterStateRetreat
	
	SoundImpact 				= ImpactHorse					;UrukDie

	UnitSpecificSounds
		VoiceGarrison			= OrcArcherVoiceGarrison
		VoiceEnterUnitSlaughterHouse	= OrcArcherVoiceGarrisonSlaughterHouse
		VoiceEnterUnitMordorMumakil	= OrcArcherVoiceEnterMumakil
	End

	EvaEventDamagedOwner			= UnitUnderAttack 		;Eva event to trigger when unit is damaged
	;EvaEventDieOwner			= GroupOrcArcherDie		;Eva event to trigger on unit's death. NOTICE THAT this is only for permanent deaths
										;For deaths you can respawn from, use the DeathFX

	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		MaxUpdateRangeCap = 800
		AnimationSound = Sound:BodyFallOrc			Animation:MUOrcArchr_SKL.MUOrcArchr_DIEA	Frames:20
		AnimationSound = Sound:BodyFallOrc			Animation:MUOrcArchr_SKL.MUOrcArchr_DIEB	Frames:22
		AnimationSound = Sound:BodyFallGeneric2		Animation:MUOrcArchr_SKL.MUOrcArchr_DIEB	Frames:80
		AnimationSound = Sound:BodyFallOrc			Animation:MUOrcArchr_SKL.MUOrcArchr_DIEC	Frames:48
		AnimationSound = Sound:BodyFallOrc			Animation:MUOrcArchr_SKL.MUOrcArchr_DIED	Frames:33
	End


	; *** ENGINEERING Parameters ***
	RadarPriority = UNIT
	KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER CAN_USE_SIEGE_TOWER SCORE THROWN_OBJECT ORC ATTACK_NEEDS_LINE_OF_SIGHT ARCHER GRAB_AND_DROP
	 
	Body = ActiveBody ModuleTag_02
		CheerRadius 	= EMOTION_CHEER_RADIUS
		MaxHealth         	= MORDOR_ARCHER_HEALTH
		MaxHealthDamaged  	= MORDOR_ARCHER_HEALTH_DAMAGED
		;RecoveryTime      	= MORDOR_ARCHER_HEALTH_RECOVERY_TIME
	End
 
	Behavior = AIUpdateInterface ModuleTag_03
		AutoAcquireEnemiesWhenIdle	=	Yes ATTACK_BUILDINGS
		CanAttackWhileContained		=	Yes
		AILuaEventsList				=	MordorArcherFunctions
		MaxCowerTime				=	5000
		MinCowerTime				=	3000
		AttackPriority				= 	AttackPriority_Archer
	End
	  
	LocomotorSet
		Locomotor   = HumanLocomotor
		Condition   = SET_NORMAL
		Speed       = NORMAL_EVIL_INFANTRY_MEMBER_SPEED
	End

	; Fire arrow upgrade
	Behavior = WeaponSetUpgrade ModuleTag_Fire
		TriggeredBy = Upgrade_MordorFireArrows
	End

  	Behavior = SubObjectsUpgrade FireArrows_Upgrade
  		TriggeredBy		= Upgrade_MordorFireArrows
  		ShowSubObjects	= ARROWFIRE
  		HideSubObjects	= arrrow			; yes, it's a typo.
  	End
  	
	Behavior = PhysicsBehavior ModuleTag_04
		GravityMult = 1.0
		ShockStandingTime = 1200	;msec
	End
  
	Behavior = SlowDeathBehavior ModuleTag_05
		DeathTypes = ALL -KNOCKBACK
		SinkDelay = 3000
		SinkRate = 0.60     ; in Dist/Sec
		DestructionDelay = 10000
		Sound = INITIAL OrcVoiceDie				;UrukDie
	End
	 
	Behavior = SquishCollide ModuleTag_06
		;nothing
	End
	
	; MordorArcher
	Behavior = HordeMemberCollide ModuleTag_HMC
		;nothing
	End
	 
	Behavior = SlowDeathBehavior ModuleTag_07
		; Same as normal death, but no sound (sound already played by SoundImpact = ... )
		DeathTypes = NONE +KNOCKBACK
		SinkDelay = 3000
		SinkRate = 0.60     ; in Dist/Sec
		DestructionDelay = 10000
		Sound = INITIAL OrcVoiceDie
	End
 
	Behavior = BezierProjectileBehavior ModuleTag_08 ; Module starts asleep, and wakes up when thrown.
		FirstHeight = 24  ; Height of Bezier control points above highest intervening terrain
		SecondHeight = 24
		FirstPercentIndent = 30% ; Percentage of shot distance control points are placed
		SecondPercentIndent = 70%
		TumbleRandomly = Yes

		CrushStyle = Yes ; I don't detonate, I just hit
		DieOnImpact = Yes
		BounceCount = 1   ; When I hit the ground, I'll arc again
		BounceDistance = 40 ; this far
		BounceFirstHeight = 24  ; Height of Bezier control points above highest intervening terrain
		BounceSecondHeight = 24
		BounceFirstPercentIndent = 20% ; Percentage of shot distance control points are placed
		BounceSecondPercentIndent = 80%

		GroundHitFX       = FX_ThrownRockGroundHit
		GroundBounceFX    = FX_ThrownRockBounceHit
	End

	; Tie into LargeGroupAudio system
	Behavior = LargeGroupAudioUpdate ModuleTag_LGAU
		Key = Orc_Archer
	End


; 	Behavior = DualWeaponBehavior ModuleTag_10
;		SwitchWeaponOnCloseRangeDistance = 40
;	End
	
	Behavior = HitReactionBehavior HitReactionBehaviorModuleTag
		HitReactionLifeTimer1 = 1800 ; level 1 (light  damage)  hit reaction animations in frames (5 per sec)
		HitReactionLifeTimer2 = 1800 ; level 2 (medium damage)  hit reaction animations in frames (5 per sec)
		HitReactionLifeTimer3 = 1800 ; level 3 (heavy  damage)  hit reaction animations in frames (5 per sec)

		HitReactionThreshold1 = 0.0   ; level 1 (light  damage) threshold trigger
		HitReactionThreshold2 = 25.0  ; level 2 (medium damage) threshold trigger
		HitReactionThreshold3 = 50.0  ; level 3 (heavy  damage) threshold trigger
	End
 
	Geometry = CYLINDER
	GeometryMajorRadius = 8.0
	GeometryMinorRadius = 8.0
	GeometryHeight = 19.2
	GeometryIsSmall = Yes

    Shadow = SHADOW_DECAL
    ShadowSizeX = 21;
    ShadowSizeY = 21;
    ShadowTexture = ShadowI;
End


ChildObject MordorArcherForBlackGate MordorArcher
  
	LocomotorSet
		Locomotor   = HumanLocomotor
		Condition   = SET_NORMAL
		Speed       = 0
	End
End

;------------------------------------------------------------------------------
; aka Goblin Archer, 
Object MordorGoblinArcher
  ; *** ART Parameters ***

	; This is required for garrisoned objects - please put in all objects.
	ButtonImage = BMOrcPit_Archers
  
  SelectPortrait         = SP_OrcArcher

  UpgradeCameo1         = Upgrade_FireArrows
  Draw = W3DHordeModelDraw ModuleTag_01

	OkToChangeModelColor = Yes
		
	StaticModelLODMode = Yes
	; specify options for static LODs
	LodOptions	= LOW
		AllowMultipleModels		=	ALLOW_MULTIPLE_MODELS_LOW
		MaxRandomTextures		=	MAX_RANDOM_TEXTURES_LOW
		MaxRandomAnimations		=	MAX_RANDOM_ANIMATIONS_LOW
		MaxAnimFrameDelta		=	0 ;These guys are out of a horde more often than in, so they need permission to diverge.
	End
	
	LodOptions	= MEDIUM
		AllowMultipleModels		=	ALLOW_MULTIPLE_MODELS_MED
		MaxRandomTextures		=	MAX_RANDOM_TEXTURES_MED
		MaxRandomAnimations		=	MAX_RANDOM_ANIMATIONS_MED
		MaxAnimFrameDelta		=	0 ;These guys are out of a horde more often than in, so they need permission to diverge.
	End
	
	LodOptions	= HIGH
		AllowMultipleModels		=	ALLOW_MULTIPLE_MODELS_HIGH
		MaxRandomTextures		=	MAX_RANDOM_TEXTURES_HIGH
		MaxRandomAnimations		=	MAX_RANDOM_ANIMATIONS_HIGH
		MaxAnimFrameDelta		=	0 ;These guys are out of a horde more often than in, so they need permission to diverge.
	End

		RandomTexture = MUGobArch.tga 0 MUGobArch.tga
		RandomTexture = MUGobArch2.tga 0 MUGobArch.tga
		RandomTexture = MUGobArch3.tga 0 MUGobArch.tga

    DefaultModelConditionState
      Model = MUGobArch_SKN
      WeaponLaunchBone = PRIMARY ARRROW
    End

;;=================== ANIMATIONS ==================================================================
;;------------------- FLYING & DYING --------------------------------------------------------------
;;======= FLYING

	AnimationState						= PASSENGER
		Animation						= Wiggling
			AnimationName				= MUGobArch_SKL.MUGobArch_FLLA
			AnimationMode				= LOOP
		End
	End
	
	AnimationState						= THROWN_PROJECTILE
		Animation						= Thrown
			AnimationName				= MUGobArch_SKL.MUGobArch_FLYA
			AnimationMode				= LOOP
		End
        End

	AnimationState						= FREEFALL
		Animation						= Falling
			AnimationName				= MUGobArch_SKL.MUGobArch_FLYB
			AnimationMode				= LOOP
			AnimationSpeedFactorRange	= 0.5	0.5
			AnimationBlendTime			= 10
		End
	End
	
	AnimationState						= STUNNED_FLAILING
 		Animation						= flying
			AnimationName				= MUGobArch_SKL.MUGobArch_FLYB
			AnimationMode				= LOOP
			AnimationPriority			= 10
		End
		Animation						= ready_for_sweet_landing
			AnimationName				= MUGobArch_SKL.MUGobArch_FLYA
			AnimationMode				= LOOP
		End
		Flags							= RANDOMSTART
	End
	
	AnimationState						= DYING SPLATTED
		Animation						= splat
			AnimationName				= MUGobArch_SKL.MUGobArch_LNDB
			AnimationMode				= ONCE
		End
	End
	
	;;======= DYING

	AnimationState						= DYING AFLAME
		Animation						= Flaming_Death
			AnimationName				= MUGobArch_SKL.MUGobArch_MFDA
			AnimationMode				= ONCE
		End
    End

    AnimationState						= DYING
		Animation						= Dying_1
			AnimationName				= MUGobArch_SKL.MUGobArch_DIEA
			AnimationMode				= ONCE
		End
		Animation						= Dying_2
			AnimationName				= MUGobArch_SKL.MUGobArch_DIEB
			AnimationMode				= ONCE
		End
		Animation						= landb
			AnimationName				= MUGobArch_SKL.MUGobArch_LNDB
			AnimationMode				= ONCE
		End
		Animation						= landc
			AnimationName				= MUGobArch_SKL.MUGobArch_LNDC
			AnimationMode				= ONCE
		End
		BeginScript
			Preva = CurDrawablePrevAnimation()
			if Preva == "ready_for_sweet_landing" then return "landc" 
			elseif Preva == "flying" then return "landb"
			elseif GetClientRandomNumberReal(0,1) > 0.50 then return "Dying_1"
			else return "Dying_2" end
		EndScript
    End
	

	AnimationState						= STUNNED_STANDING_UP
 		Animation						= standing_back_up
			AnimationName				= MUGobArch_SKL.MUGobArch_GTPA
			AnimationMode				= ONCE
			AnimationSpeedFactorRange = 1.5 1.5
		End
		Animation						= already_up
			AnimationName				= MUGobArch_SKL.MUGobArch_IDLA
			AnimationMode				= ONCE
		End
		BeginScript
			if CurDrawablePrevAnimation() == "sweet_landing" then return "already_up" else return "standing_back_up" end
		EndScript
	End
	
	AnimationState						= STUNNED
 		Animation						= splattered_on_ground
			AnimationName				= MUGobArch_SKL.MUGobArch_LNDC
			AnimationMode				= ONCE
		End
		Animation						= sweet_landing
			AnimationName				= MUGobArch_SKL.MUGobArch_LNDA
			AnimationMode				= ONCE
		End
		BeginScript
			if CurDrawablePrevAnimation() == "ready_for_sweet_landing" then return "sweet_landing" else return "splattered_on_ground" end
		EndScript
	End
	


;;------------------------ MOVING --------------------------------------------------------------------

	AnimationState						= MOVING BACKING_UP
		Animation						= BackingUp
			AnimationName				= MUGobArch_SKL.MUGobArch_BAKA
			AnimationMode				= LOOP
			AnimationSpeedFactorRange	= 0.9 1.1
		End
		Animation						= BackingUp2
			AnimationName				= MUGobArch_SKL.MUGobArch_BAKB
			AnimationMode				= LOOP
			AnimationSpeedFactorRange	= 0.9 1.1
		End
		Flags							= RANDOMSTART
	End
    
	AnimationState						= MOVING EMOTION_TERROR
		ShareAnimation					= Yes
		Animation						= Moving_1
			AnimationName				= MUGobArch_SKL.MUGobArch_RUNA
			AnimationMode				= LOOP
			AnimationSpeedFactorRange	= 0.9 1.1
			Distance					= 20
		End
		Animation						= Moving_2
			AnimationName				= MUGobArch_SKL.MUGobArch_RUNB
			AnimationMode				= LOOP
			AnimationSpeedFactorRange	= 0.9 1.1
			Distance					= 20
		End
		Flags							= RANDOMSTART
;		ParticleSysBone					= None InfantryDustTrails
	End

	AnimationState						= MOVING
		ShareAnimation					= Yes
		Animation						= Moving_1
			AnimationName				= MUGobArch_SKL.MUGobArch_RUNA
			AnimationMode				= LOOP
			AnimationSpeedFactorRange	= 0.9 1.1
			Distance					= 20
		End
		Animation						= Moving_2
			AnimationName				= MUGobArch_SKL.MUGobArch_RUNB
			AnimationMode				= LOOP
			AnimationSpeedFactorRange	= 0.9 1.1
			Distance					= 20
		End
		Flags							= RANDOMSTART
;		ParticleSysBone					= None InfantryDustTrails
    End
    
 ;;------------------- ATTACKING --------------------------------------------------------------------
 
	AnimationState						= FIRING_OR_PREATTACK_B
		Animation						= ATKB
			AnimationName				= MUGobArch_SKL.MUGobArch_ATKB
			AnimationMode				= ONCE
			UseWeaponTiming				= Yes
		End
;		FrameForPristineBonePositions	= 21
	End
	
;	AnimationState						= FIRING_OR_PREATTACK_A
;		Animation						= ATKA
;			AnimationName				= MUGobArch_SKL.MUGobArch_ATKA
;			AnimationMode				= LOOP
;			UseWeaponTiming				= Yes
;		End
;		FrameForPristineBonePositions	= 21
;	End

	AnimationState						= PREATTACK_A 
		Animation						= ReadyToDrawn
			AnimationName				= MUGobArch_SKL.MUGobArch_ATKF1
			AnimationMode				= ONCE
			AnimationSpeedFactorRange	= 0.9 1.1
;			UseWeaponTiming				= Yes
			AnimationBlendTime			= 0
		End
	End

	AnimationState						= FIRING_OR_RELOADING_A 
		Animation						= LooseReloadDraw
			AnimationName				= MUGobArch_SKL.MUGobArch_ATKF2
			AnimationMode				= ONCE
;			UseWeaponTiming				= Yes
			AnimationBlendTime			= 0
		End
	End
	
	AnimationState						= CONTINUOUS_FIRE_MEAN
		Animation						= HangFrameWhileCoasting
			AnimationName				= MUGobArch_SKL.MUGobArch_ATKF2
			AnimationMode				= MANUAL
		End
	End
	
	AnimationState						= CONTINUOUS_FIRE_SLOW
		Animation						= put_bow_away
			AnimationName				= MUGobArch_SKL.MUGobArch_ATKF3
			AnimationMode				= Once
		End
	End
 
;;------------------------ EMOTIONS ----------------------------------------------------
 
	AnimationState						= WAR_CHANT
		Animation						= Chant
			AnimationName				= MUGobArch_SKL.MUGobArch_IDLA
			AnimationMode				= LOOP
			AnimationSpeedFactorRange	= 0.9 1.1
		End
		Flags							= RANDOMSTART RESTART_ANIM_WHEN_COMPLETE
	End

	AnimationState						= EMOTION_AFRAID
		Animation						= FERA
			AnimationName				= MUGobArch_SKL.MUGobArch_FERA
			AnimationMode				= LOOP
			AnimationSpeedFactorRange	= 0.9 1.1
		End
		Flags							= RANDOMSTART
	End
	AnimationState						= EMOTION_TAUNTING
		Animation						= TNTA
			AnimationName				= MUGobArch_SKL.MUGobArch_TNTA
			AnimationMode				= LOOP
			AnimationSpeedFactorRange	= 0.9 1.1
		End
	End
	AnimationState						= EMOTION_POINTING
		Animation						= Pointing1
			AnimationName				= MUGobArch_SKL.MUGobArch_PNTA
			AnimationMode				= LOOP
			AnimationSpeedFactorRange	= 0.9 1.1
		End
	End
	AnimationState						= EMOTION_CELEBRATING
		Animation						= CHRA
			AnimationName				= MUGobArch_SKL.MUGobArch_CHRA
			AnimationMode				= LOOP
			AnimationSpeedFactorRange	= 0.9 1.1
		End
	End
	AnimationState						= EMOTION_ALERT
		Animation						= Alert
			AnimationName				= MUGobArch_SKL.MUGobArch_IDLA
			AnimationMode				= LOOP
		End
	End
	

	IdleAnimationState
		StateName						= STATE_Idle
		Animation						= IDLB
			AnimationName				= MUGobArch_SKL.MUGobArch_IDLB
			AnimationMode				= ONCE
			AnimationSpeedFactorRange	= 0.9 1.1
			AnimationPriority			= 20
		End
		Animation						= IDLC
			AnimationName				= MUGobArch_SKL.MUGobArch_IDLC
			AnimationMode				= ONCE
			AnimationSpeedFactorRange	= 0.9 1.1
		End
	End
  End

  ; ***DESIGN parameters ***
	Side = Mordor
	IsTrainable		= No
	EditorSorting = UNIT
	ThreatLevel = 1.0
	ThingClass = HORDE_UNIT
    CommandPoints = 1

	TransportSlotCount = 1
	WeaponSet
		Conditions = None 
		Weapon = PRIMARY    MordorArcherBow
	End
  
	WeaponSet
		Conditions = CLOSE_RANGE CONTESTING_BUILDING
		Weapon = PRIMARY    MordorArcherBow
		Weapon = SECONDARY MordorArcherBowMelee
		OnlyAgainst = PRIMARY STRUCTURE
	End
    
	ArmorSet
		Conditions      = None
		Armor           = CreepArmor
		DamageFX        = NormalDamageFX
	End
	VisionRange = 300.0
	DisplayName = OBJECT:MordorGoblinArcher
	CrushableLevel = 0  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
	CrusherLevel = 0 ;What can I crush?: 0 = small animals, 1 = infantry, 2 = trees, 3 = vehicles
	CrushRevengeWeapon = RangedInfantryCrushRevenge
	BountyValue = MORDOR_FIGHTER_BOUNTY_VALUE 

  ; *** AUDIO Parameters ***;

	VoiceSelect				= UrukVoiceSelect
	VoiceMove				= UrukVoiceMove
	VoiceMove2				= OrcVoiceMove2
	VoiceAttack				= UrukVoiceAttack
	VoiceAttack2				= OrcVoiceAttack2

	SoundImpact				= ImpactHorse
	
	;UnitSpecificSounds
	;End

	EvaEventDamagedOwner			= UnitUnderAttack 		;Eva event to trigger when unit is damaged

	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
      	MaxUpdateRangeCap = 800
			AnimationSound = Sound:ArrowDrawBow 	Animation:MUGobArch_SKL.MUGobArch_ATKF2 	Frames:29 
			AnimationSound = Sound:BodyFallGeneric2	Animation:MUGobArch_SKL.MUGobArch_DIEA	Frames:10
			AnimationSound = Sound:BodyFallGeneric2	Animation:MUGobArch_SKL.MUGobArch_DIEB	Frames:7
			AnimationSound = Sound:BodyFallOrc		Animation:MUGobArch_SKL.MUGobArch_LNDB	Frames:3
			AnimationSound = Sound:BodyFallOrc		Animation:MUGobArch_SKL.MUGobArch_LNDC	Frames:0
	End

	Behavior = LargeGroupAudioUpdate ModuleTag_LGAU				;Tie into LargeGroupAudio system
		Key = Goblin_Archer
	End


  ; *** ENGINEERING Parameters ***

  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER CAN_USE_SIEGE_TOWER SCORE THROWN_OBJECT ARCHER ORC GRAB_AND_DROP ATTACK_NEEDS_LINE_OF_SIGHT
 
  Body = ActiveBody ModuleTag_02
    MaxHealth         = MORDOR_GOBLIN_SWORDSMAN_HEALTH		;BALANCE Orc Archer Health
    MaxHealthDamaged  = 5
    ;RecoveryTime      = 5000
  End
 
  Behavior = AIUpdateInterface ModuleTag_03
    AutoAcquireEnemiesWhenIdle = Yes ATTACK_BUILDINGS
    CanAttackWhileContained = Yes
	AILuaEventsList				=	MordorFighterFunctions    
    AttackPriority				= 	AttackPriority_Archer
  End

  LocomotorSet
    Locomotor = HumanLocomotor
    Condition = SET_NORMAL
    Speed     = NORMAL_EVIL_INFANTRY_MEMBER_SPEED
  End

  Behavior = PhysicsBehavior ModuleTag_04
    GravityMult = 1.0
    ShockStandingTime = 2000	;msec
  End
 
  Behavior = SlowDeathBehavior ModuleTag_05
    DeathTypes = ALL -KNOCKBACK
    SinkDelay = 3000
    SinkRate = 0.40     ; in Dist/Sec
    DestructionDelay = 8000
    Sound = INITIAL GoblinVoiceDie			;UrukDie
  End
 
  Behavior = SquishCollide ModuleTag_06
    ;nothing
  End
  
  ; MordorGoblinArcher
  Behavior = HordeMemberCollide ModuleTag_HMC
    ;nothing
  End
 
  Behavior = SlowDeathBehavior ModuleTag_07
    ; Same as normal death, but no sound (sound already played by SoundImpact = ... )
    DeathTypes = NONE +KNOCKBACK
    SinkDelay = 3000
    SinkRate = 0.40     ; in Dist/Sec
    DestructionDelay = 8000
    Sound = INITIAL GoblinVoiceDie
  End
 
  Behavior = BezierProjectileBehavior ModuleTag_08 ; Module starts asleep, and wakes up when thrown.
    FirstHeight = 24  ; Height of Bezier control points above highest intervening terrain
    SecondHeight = 24
    FirstPercentIndent = 30% ; Percentage of shot distance control points are placed
    SecondPercentIndent = 70%
    TumbleRandomly = Yes

    CrushStyle = Yes ; I don't detonate, I just hit
    DieOnImpact = Yes
    BounceCount = 1   ; When I hit the ground, I'll arc again
    BounceDistance = 40 ; this far
    BounceFirstHeight = 24  ; Height of Bezier control points above highest intervening terrain
    BounceSecondHeight = 24
    BounceFirstPercentIndent = 20% ; Percentage of shot distance control points are placed
    BounceSecondPercentIndent = 80%

    GroundHitFX       = FX_ThrownRockGroundHit
    GroundBounceFX    = FX_ThrownRockBounceHit
  End

  ; Fire arrow upgrade
  Behavior = WeaponSetUpgrade ModuleTag_09
    TriggeredBy = Upgrade_MordorFireArrows
  End

	Behavior = DualWeaponBehavior ModuleTag_10
		SwitchWeaponOnCloseRangeDistance = 20
	End

 	Behavior = EmotionTrackerUpdate	Module_EmotionTracker
		TauntAndPointDistance		=	INFANTRY_TAUNT_POINT_RADIUS		; max distance to taunted/pointed objet
		TauntAndPointUpdateDelay	=	1000	; how often scan (milliseconds)
		TauntAndPointExcluded		=	NONE
		AfraidOf			=	NONE +RohanOathbreakerHordeSmall +GondorGwaihir +RohanTreeBerd +RohanEntFir +RohanEntAsh +RohanEntBirch +MordorFellBeast +MordorWitchKingOnFellBeast +MordorBalrog +MordorCaveTroll +MordorMountainTroll +MordorDrummerTroll +MordorMumakil ;Must be SCARY kindof as well.
		AlwaysAfraidOf				=	NONE +MordorBalrog +RohanOathbreaker; +MordorWitchKing +MordorWitchKingOnFellBeast
		PointAt				=	NONE +GondorGwaihir
		HeroScanDistance		=	150
		FearScanDistance		=	ARCHER_FEAR_SCAN_RADIUS ;250

		AddEmotion	=	Terror_Base
		AddEmotion	=	Doom_Base
		AddEmotion	=	UncontrollableFear_Base_Evil
		AddEmotion	=	FearIdle_Base
		AddEmotion	=	FearBusy_Base
		AddEmotion	=	Point_Base
		AddEmotion	=	Taunt_Base	
		AddEmotion	=	CheerIdle_Base
		AddEmotion	=	CheerBusy_Base
		AddEmotion	=	HeroCheerIdle_Base
		AddEmotion	=	HeroCheerBusy_Base
		AddEmotion	=	Alert_Base
	End		

  Geometry = CYLINDER
  GeometryMajorRadius = 8.0
  GeometryMinorRadius = 8.0
  GeometryHeight = 19.2
  GeometryIsSmall = Yes
  Shadow = SHADOW_DECAL
  ShadowSizeX = 11;
  ShadowSizeY = 11;
  ShadowTexture = ShadowI;
End

;------------------------------------------------------------------------------
;
;	This child object is used in the neutral lair.
;
ChildObject MordorGoblinArcher_Slaved MordorGoblinArcher

  	EvaEnemyUnitSightedEvent = GoblinCreepSighted ; Special event for goblins showing up. Helps distinguish the real enemies from random creeps

	; Should be the same as MordorGoblinArcher but with CREEP.
	KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER CAN_USE_SIEGE_TOWER THROWN_OBJECT ARCHER ORC GRAB_AND_DROP ATTACK_NEEDS_LINE_OF_SIGHT CREEP SCORE

	VisionRange = CREEP_VISION
	DisplayName = OBJECT:GenericGoblinArcher
	Behavior = SlavedUpdate ModuleTag_Slave
		GuardMaxRange		= 250
		GuardWanderRange	= 40
	End
	
 	Behavior = EmotionTrackerUpdate	Module_EmotionTracker
		TauntAndPointDistance		=	350		; max distance to taunted/pointed objet
		TauntAndPointUpdateDelay	=	1000	; how often scan (milliseconds)
		TauntAndPointExcluded		=	NONE
		AfraidOf			=	NONE +RohanOathbreakerHordeSmall +RohanTreeBerd +RohanEntFir +RohanEntAsh +RohanEntBirch +MordorFellBeast +MordorWitchKingOnFellBeast +MordorBalrog +MordorCaveTroll +MordorMountainTroll +MordorDrummerTroll +MordorMumakil ;Must be SCARY kindof as well.
		AlwaysAfraidOf				=	NONE +MordorBalrog +RohanOathbreaker; +MordorWitchKing +MordorWitchKingOnFellBeast
		PointAt				=	NONE +GondorGwaihir 
		HeroScanDistance		=	150
		FearScanDistance		=	250

		AddEmotion	=	Terror_Base
		AddEmotion	=	Doom_Base
		AddEmotion	=	UncontrollableFear_Base_Evil
		AddEmotion	=	FearIdle_Base
		AddEmotion	=	FearBusy_Base
		AddEmotion	=	Point_Base
		AddEmotion	=	Taunt_Base	
		AddEmotion	=	CheerIdle_Base
		AddEmotion	=	CheerBusy_Base
		AddEmotion	=	HeroCheerIdle_Base
		AddEmotion	=	HeroCheerBusy_Base
		AddEmotion	=	Alert_Base
	End	
End

;------------------------------------------------------------------------------
; 
Object MordorHaradrimArcher

	; This is required for garrisoned objects - please put in all objects.
	ButtonImage = BMHaradrimPalace_Haradrim

	SelectPortrait         = UPMordor_Haradrim
  ;SelectPortrait         = SP_Haradrim

  ; *** ART Parameters ***
   ;note all file names are MUHaradim, not MUHaradrim, so as not to exceed character limits
  Draw = W3DScriptedModelDraw ModuleTag_01
    StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD

	  OkToChangeModelColor = Yes
	  
    DefaultModelConditionState
      Model = MUHaradim_SKN
      WeaponLaunchBone = PRIMARY ARRROW
    End

		IdleAnimationState
			Animation = IDLA
				AnimationName = MUHaradim_SKL.MUHaradim_IDLA
				AnimationMode = ONCE
	    		AnimationBlendTime = 10
				AnimationPriority = 25
			End
			Animation = IDLB
			    AnimationName = MUHaradim_SKL.MUHaradim_IDLB
				AnimationMode = ONCE
	    		AnimationBlendTime = 10
			End
			Animation = IDLC
				AnimationName = MUHaradim_SKL.MUHaradim_IDLC
				AnimationMode = ONCE
	    		AnimationBlendTime = 10
			End
			StateName = Idle
			BeginScript
				CurDrawableShowSubObject("arrrow")
			EndScript
		End
 
    AnimationState = THROWN_PROJECTILE
		Animation = Thrown
			AnimationName = MUHaradim_SKL.MUHaradim_FLYA
		    AnimationMode = LOOP
		End
    End

    AnimationState = MOVING DAMAGED AFLAME
		Animation = Moving_Damaged
			AnimationName = MUHaradim_SKL.MUHaradim_MFDA
		    AnimationMode = LOOP
		End
		Flags               = RANDOMSTART
		ParticleSysBone     = BAT_HEAD FireBuildingLargeSmoke FollowBone:yes
		ParticleSysBone     = BAT_HEAD FireSmall FollowBone:yes
		ParticleSysBone     = BAT_SPINE1 FireBuildingLargeSmoke FollowBone:yes
		ParticleSysBone     = BAT_SPINE1 FireSmall FollowBone:yes
		ParticleSysBone     = BAT_SPINE2 FireBuildingLargeSmoke FollowBone:yes
		ParticleSysBone     = BAT_SPINE2 FireSmall FollowBone:yes
    End

    AnimationState = MOVING AFLAME
		Animation = Moving
			AnimationName = MUHaradim_SKL.MUHaradim_MFDA
		AnimationMode = LOOP
		End
		Flags               = RANDOMSTART
		ParticleSysBone     = BAT_HEAD FireBuildingLargeSmoke FollowBone:yes
		ParticleSysBone     = BAT_HEAD FireSmall FollowBone:yes
		ParticleSysBone     = BAT_SPINE1 FireBuildingLargeSmoke FollowBone:yes
		ParticleSysBone     = BAT_SPINE1 FireSmall FollowBone:yes
		ParticleSysBone     = BAT_SPINE2 FireBuildingLargeSmoke FollowBone:yes
		ParticleSysBone     = BAT_SPINE2 FireSmall FollowBone:yes
    End

;    AnimationState = MOVING DAMAGED
;			Animation = Moving_Damaged
;	      AnimationName = MUHaradim_SKL.MUHaradim_IWKA
;		    AnimationMode = LOOP
;			End
 ;     Flags               = RANDOMSTART
  ;    ParticleSysBone     = None InfantryDustTrails
  ;  End
    
    AnimationState        = MOVING WANDER
		Animation           = WLKA
			AnimationName     = MUHaradim_SKL.MUHaradim_WLKA
			AnimationMode     = LOOP
		End
		Animation           = WLKB
			AnimationName     = MUHaradim_SKL.MUHaradim_WLKB
			AnimationMode     = LOOP
		End
	End
	
	AnimationState				= MOVING BACKING_UP
		Animation				= BackingUp
			AnimationName		= MUHaradim_SKL.MUHaradim_BAKA
			AnimationMode		= LOOP
		End
		Flags = RANDOMSTART
	End
	
    AnimationState = MOVING
			Animation = MovingA
				AnimationName = MUHaradim_SKL.MUHaradim_RUNA
				AnimationMode = LOOP
			End
			Animation = MovingB
				AnimationName = MUHaradim_SKL.MUHaradim_RUNB
				AnimationMode = LOOP
			End
      Flags               = RANDOMSTART
      ParticleSysBone     = None InfantryDustTrails
    End
    
    
    AnimationState					=	FIRING_OR_PREATTACK_A AIM_HIGH
		Animation					=	ATKB
			AnimationName			=	MUHaradim_SKL.MUHaradim_ATKC 
			AnimationMode			=	LOOP
			UseWeaponTiming			=	Yes
		End
	End


	AnimationState					=	FIRING_OR_PREATTACK_A AIM_LOW
		Animation					=	ATKC
			AnimationName			=	MUHaradim_SKL.MUHaradim_ATKB 
			AnimationMode			=	LOOP
			UseWeaponTiming			=	Yes
		End
	End
	
	AnimationState					=	 FIRING_OR_PREATTACK_A WEAPONSTATE_CLOSE_RANGE
		Animation					=	ATKD
			AnimationName			=	MUHaradim_SKL.MUHaradim_ATKD 
			AnimationMode			=	ONCE
			UseWeaponTiming			=	Yes
		End
	End
 
    AnimationState = FIRING_OR_PREATTACK_A
 		Animation = Attacking
			AnimationName = MUHaradim_SKL.MUHaradim_ATKA
			AnimationMode = LOOP
			UseWeaponTiming		= Yes
		End
		FrameForPristineBonePositions = 64
    End


    AnimationState = PASSENGER
			Animation = Wiggling
	      AnimationName = MUHaradim_SKL.MUHaradim_FLLA
		    AnimationMode = LOOP
			End
   End
   
   AnimationState = STUNNED_FLAILING
 			Animation = Flying
				AnimationName = MUHaradim_SKL.MUHaradim_FLYA
	      AnimationMode = LOOP
			End
      Flags = RANDOMSTART
    End

    AnimationState = DYING SPLATTED
 			Animation = Splattered_On_Ground
				AnimationName = MUHaradim_SKL.MUHaradim_LNDA
				AnimationMode = ONCE
			End
			EnteringStateFX = FX_HaradrimHitGround
    End

    AnimationState = DYING AFLAME
		Animation = Flaming_Death_1
			AnimationName = MUHaradim_SKL.MUHaradim_DIEA
			AnimationMode = ONCE
		End
		Animation = Flaming_Death_2
			AnimationName = MUHaradim_SKL.MUHaradim_DIEB
		    AnimationMode = ONCE
		End
		ParticleSysBone     = BAT_HEAD FireBuildingLargeSmoke FollowBone:yes
		ParticleSysBone     = BAT_HEAD FireSmall FollowBone:yes
		ParticleSysBone     = BAT_SPINE1 FireBuildingLargeSmoke FollowBone:yes
		ParticleSysBone     = BAT_SPINE1 FireSmall FollowBone:yes
		ParticleSysBone     = BAT_SPINE2 FireBuildingLargeSmoke FollowBone:yes
		ParticleSysBone     = BAT_SPINE2 FireSmall FollowBone:yes
    End

    AnimationState = AFLAME
		Animation = Flaming_Death
			AnimationName = MUHaradim_SKL.MUHaradim_FLLA
			AnimationMode = LOOP
		End
		ParticleSysBone     = BAT_HEAD FireBuildingLargeSmoke FollowBone:yes
		ParticleSysBone     = BAT_HEAD FireSmall FollowBone:yes
		ParticleSysBone     = BAT_SPINE1 FireBuildingLargeSmoke FollowBone:yes
		ParticleSysBone     = BAT_SPINE1 FireSmall FollowBone:yes
		ParticleSysBone     = BAT_SPINE2 FireBuildingLargeSmoke FollowBone:yes
		ParticleSysBone     = BAT_SPINE2 FireSmall FollowBone:yes
    End

    AnimationState = DYING
		Animation = Dying_1
			AnimationName = MUHaradim_SKL.MUHaradim_DIEA
			AnimationMode = ONCE
		End
		Animation = Dying_2
			AnimationName = MUHaradim_SKL.MUHaradim_DIEB
		    AnimationMode = ONCE
		End
    End

    AnimationState = TRANSPORT_MOVING
		Animation = wobbling_on_transport
			AnimationName = MUHaradim_SKL.MUHaradim_IDLD
		    AnimationMode = LOOP
	        AnimationBlendTime  = 15
		End
    End
    
    ; --- stunned anims
    
     AnimationState = STUNNED_STANDING_UP
 			Animation = Standing_Back_Up
				AnimationName = MUHaradim_SKL.MUHaradim_GTPA
	      AnimationMode = ONCE_BACKWARDS
	      AnimationSpeedFactorRange = 1.5 1.5
			End
    End
    

    AnimationState = STUNNED
 			Animation = Splattered_On_Ground
				AnimationName = MUHaradim_SKL.MUHaradim_LNDA
				AnimationMode = ONCE
			End
			EnteringStateFX = FX_HaradrimHitGround
    End

   
    
    AnimationState = WAR_CHANT
		Animation = Chant
			AnimationName = MUHaradim_SKL.MUHaradim_IDLA  ; change to TNTA
			AnimationMode = LOOP
		End
	End
			
	;-emotions--
	AnimationState							= EMOTION_AFRAID
		Animation							= FERA
			AnimationName					= MUHaradim_SKL.MUHaradim_FERA
			AnimationMode					= LOOP
		End
		Flags = RANDOMSTART
	End
	AnimationState							= EMOTION_TAUNTING
		Animation							= TNTA
			AnimationName					= MUHaradim_SKL.MUHaradim_TNTA
			AnimationMode					= LOOP
		End
	End
	AnimationState							= EMOTION_POINTING
		Animation							= Pointing1
			AnimationName					= MUHaradim_SKL.MUHaradim_PNTA
			AnimationMode					= LOOP
		End
	End
	AnimationState							= EMOTION_CELEBRATING
		Animation                           = CHRA
			AnimationName					= MUHaradim_SKL.MUHaradim_CHRA
			AnimationMode					= ONCE
		End
	End
  End

  ; ***DESIGN parameters ***
  Side = Mordor
  EditorSorting = UNIT
	ThreatLevel = 1.0
  EmotionRange = 240
 
  TransportSlotCount = 1
  WeaponSet
    Conditions = None 
    Weapon = PRIMARY    HaradrimBow
    AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
  End
  
  WeaponSet
	Conditions = CLOSE_RANGE CONTESTING_BUILDING
	Weapon = PRIMARY   MordorArcherBowMelee  
	AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
  End
  
  ArmorSet
    Conditions      = None
    Armor           = ArcherArmor
    DamageFX        = NormalDamageFX
  End
  VisionRange = 400 ;336.0
  DisplayName = OBJECT:MordorHaradrimArcher
  CrushableLevel = 0  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CrusherLevel = 0 ;What can I crush?: 0 = small animals, 1 = infantry, 2 = trees, 3 = vehicles
	CrushRevengeWeapon = RangedInfantryCrushRevenge
  CommandSet = MordorHaradrimArcherCommandSet
  CommandPoints = 2
 

  ; *** AUDIO Parameters ***;

	VoiceAttack				= HaradrimVoiceAttack
	VoiceAttackAir				= HaradrimVoiceAttack
	VoiceAttackCharge			= HaradrimVoiceAttackCharge
	VoiceAttackMachine			= HaradrimVoiceAttack
	VoiceAttackStructure			= HaradrimVoiceAttackBuilding
	VoiceCreated				= CampOrcCreateHaradrim
	VoiceFullyCreated 			= CampOrcCreateHaradrim
	VoiceMove				= HaradrimVoiceMove
	VoiceMoveToCamp				= HaradrimVoiceMoveCamp
	VoicePriority				= 34
	VoiceRetreatToCastle			= HaradrimVoiceRetreat
	VoiceSelect				= HaradrimVoiceSelect
	VoiceSelect2				= YeomanArcherVoiceSelect2
	VoiceSelectBattle 			= HaradrimVoiceSelectBattle
	VoiceGuard			= HaradrimVoiceMove
	

	VoiceEnterStateAttack			= HaradrimVoiceEnterStateAttack
	VoiceEnterStateAttackCharge		= HaradrimVoiceEnterStateAttackCharge
	VoiceEnterStateAttackMachine		= HaradrimVoiceEnterStateAttackBuilding
	VoiceEnterStateAttackStructure		= HaradrimVoiceEnterStateAttackBuilding
	VoiceEnterStateMove			= HaradrimVoiceEnterStateMove
	VoiceEnterStateMoveToCamp		= HaradrimVoiceEnterStateMoveCamp
	VoiceEnterStateRetreatToCastle		= HaradrimVoiceEnterStateRetreat
	
	UnitSpecificSounds
		VoiceEnter			= HaradrimVoiceGarrison
		VoiceEnterHostile		= HaradrimVoiceGarrison
		VoiceGarrison			= HaradrimVoiceGarrison
		VoiceEnterUnitSlaughterHouse	= HaradrimVoiceGarrisonSlaughterHouse			
		VoiceEnterUnitMordorMumakil	= HaradrimVoiceGarrisonMumakil		
	End

	EvaEventDamagedOwner			= UnitUnderAttack 		;Eva event to trigger when unit is damaged
	;EvaEventDieOwner			= GroupHaradrimDie		;Eva event to trigger on unit's death. NOTICE THAT this is only for permanent deaths
										;For deaths you can respawn from, use the DeathFX

	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
	      MaxUpdateRangeCap = 800
			AnimationSound = Sound:ArrowDrawBow			Animation:MUHARADIM_SKL.MUHARADIM_ATKA	Frames:34 
			AnimationSound = Sound:ArrowDrawBow 		Animation:MUHARADIM_SKL.MUHARADIM_ATKB	Frames:34
			AnimationSound = Sound:ArrowDrawBow			Animation:MUHARADIM_SKL.MUHARADIM_ATKC	Frames:34

			AnimationSound = Sound:BodyFallSoldier 		Animation:MUHaraLnc_SKL.MUHaraLnc_LNDA 	Frames:0
			AnimationSound = Sound:BodyFallGeneric1 		Animation:MUHaradim_SKL.MUHaradim_DIEA 	Frames:57
			AnimationSound = Sound:BodyFallGeneric1 		Animation:MUHaradim_SKL.MUHaradim_DIEB 	Frames:78
	End

	Behavior = LargeGroupAudioUpdate ModuleTag_LGAU			  ; Tie into LargeGroupAudio system
		Key = Haradrim_Archer
	End


  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER CAN_USE_SIEGE_TOWER SCORE THROWN_OBJECT ARCHER ATTACK_NEEDS_LINE_OF_SIGHT
 
  Body = ActiveBody ModuleTag_02
    MaxHealth         = 150                  ;BALANCE Orc Archer Health
    MaxHealthDamaged  = 75
    ;RecoveryTime      = 5000
  End
 
  Behavior = AIUpdateInterface ModuleTag_03
    AutoAcquireEnemiesWhenIdle = Yes ATTACK_BUILDINGS
    CanAttackWhileContained = Yes
    MaxCowerTime	= 5000
    MinCowerTime	= 3000
    AttackPriority	= 	AttackPriority_Archer
  End

  LocomotorSet
    Locomotor     = HumanLocomotor
    Condition     = SET_NORMAL
    Speed         = NORMAL_EVIL_INFANTRY_MEMBER_SPEED
  End

  Behavior = PhysicsBehavior ModuleTag_04
    GravityMult = 1.0
  End
  
  	Behavior = AimWeaponBehavior AimWeaponModuleTag
		AimLowThreshold  = -0.15
		AimHighThreshold =  0.15
	End
 
  Behavior = SlowDeathBehavior ModuleTag_05
	DeathTypes = ALL -KNOCKBACK
	SinkDelay = 3000
	SinkRate = 0.60     ; in Dist/Sec
	DestructionDelay = 10000
	Sound = INITIAL HaradrimVoiceDie		;CivMaleDie
  End
 
  Behavior = SquishCollide ModuleTag_06
    ;nothing
  End
 
  Behavior = FlammableUpdate ModuleTag_03a
    AflameDuration		= 100000	;If I catch fire, I'll burn for this long...
    AflameDamageAmount	= 1	; taking this much damage...
    AflameDamageDelay	= 1000   ; this often.
    FlameDamageLimit	= 1
  End
 
  Behavior = SlowDeathBehavior ModuleTag_07
    ; Same as normal death, but no sound (sound already played by SoundImpact = ... )
    DeathTypes = NONE +KNOCKBACK
	SinkDelay = 3000
	SinkRate = 0.80     ; in Dist/Sec
	DestructionDelay = 10000
	Sound = INITIAL HaradrimVoiceDie
  End
 
  Behavior = BezierProjectileBehavior ModuleTag_08 ; Module starts asleep, and wakes up when thrown.
    FirstHeight = 24  ; Height of Bezier control points above highest intervening terrain
    SecondHeight = 24
    FirstPercentIndent = 30% ; Percentage of shot distance control points are placed
    SecondPercentIndent = 70%
    TumbleRandomly = Yes

    CrushStyle = Yes ; I don't detonate, I just hit
    DieOnImpact = Yes
    BounceCount = 1   ; When I hit the ground, I'll arc again
    BounceDistance = 40 ; this far
    BounceFirstHeight = 16  ; Height of Bezier control points above highest intervening terrain
    BounceSecondHeight = 16
    BounceFirstPercentIndent = 20% ; Percentage of shot distance control points are placed
    BounceSecondPercentIndent = 80%

    GroundHitFX       = FX_ThrownRockGroundHit
    GroundBounceFX    = FX_ThrownRockBounceHit
  End
  
	Behavior = DualWeaponBehavior ModuleTag_09
		SwitchWeaponOnCloseRangeDistance = 56
	End

  Geometry = CYLINDER
  GeometryMajorRadius = 8.0
  GeometryMinorRadius = 8.0
  GeometryHeight = 19.2
  GeometryIsSmall = Yes
;  Shadow = SHADOW_DECAL
;  ShadowSizeX = 14;
;  ShadowSizeY = 14;
;  ShadowTexture = ShadowI;
End

;------------------------------------------------------------------------------
;Haradrim Lancer, HaradrimLancer, HaradrimSpearmen, HaradrimSpears, HaradrimSpearman
Object MordorHaradrim

  SelectPortrait         = SP_Haradrim

	; This is required for garrisoned objects - please put in all objects.
	ButtonImage = BMHaradrimPalace_Haradrim
  
  ; *** ART Parameters ***
  Draw = W3DHordeModelDraw ModuleTag_01

	OkToChangeModelColor = Yes
		
	StaticModelLODMode = Yes
	;specify options for static LODs
	LodOptions	= LOW
		AllowMultipleModels		=	ALLOW_MULTIPLE_MODELS_LOW
		MaxRandomTextures		=	MAX_RANDOM_TEXTURES_LOW
		MaxRandomAnimations		=	MAX_RANDOM_ANIMATIONS_LOW
		MaxAnimFrameDelta		=	MAX_ANIM_FRAME_DELTA_LOW
	End
	
	LodOptions	= MEDIUM
		AllowMultipleModels		=	ALLOW_MULTIPLE_MODELS_MED
		MaxRandomTextures		=	MAX_RANDOM_TEXTURES_MED
		MaxRandomAnimations		=	MAX_RANDOM_ANIMATIONS_MED
		MaxAnimFrameDelta		=	MAX_ANIM_FRAME_DELTA_MED
	End
	
	LodOptions	= HIGH
		AllowMultipleModels		=	ALLOW_MULTIPLE_MODELS_HIGH
		MaxRandomTextures		=	MAX_RANDOM_TEXTURES_HIGH
		MaxRandomAnimations		=	MAX_RANDOM_ANIMATIONS_HIGH
		MaxAnimFrameDelta		=	MAX_ANIM_FRAME_DELTA_HIGH
	End
	

    DefaultModelConditionState
      Model = MUHaraLnc_SKN
      WeaponLaunchBone = PRIMARY LANCEBONE
    End

	IdleAnimationState
		StateName				=	Idle
		Animation = IDLC
			AnimationName = MUHaraLnc_SKL.MUHaraLnc_IDLC
			AnimationMode = ONCE
			AnimationPriority = 25
			AnimationBlendTime	=	15
		End
		
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "STATE_Selected"  then CurDrawableSetTransitionAnimState("TRANS_Selected_to_Idle") return end
			if Prev == "STATE_Emotion"; or Prev == "CloseRange" or Prev == "FarRange"
			then
				CurDrawableAllowToContinue();
			end
			CurDrawableSetTransitionAnimState("TRANS_Selected_NoHitch")		
		EndScript
		StateName = Idle
	End
 
	;-- CONTAINED ANIMATIONS
	ModelConditionState = WEAPONSTATE_CONTAINED
		Model = MUHaradim_SKN
		WeaponLaunchBone = PRIMARY ARRROW
	End

	AnimationState					=	FIRING_OR_PREATTACK_A AIM_HIGH WEAPONSTATE_CONTAINED
		Animation					=	ATKB
			AnimationName			=	MUHaradim_SKL.MUHaradim_ATKC 
			AnimationMode			=	ONCE
			UseWeaponTiming			=	Yes
		End
	End

	AnimationState					=	FIRING_OR_PREATTACK_A AIM_LOW WEAPONSTATE_CONTAINED
		Animation					=	ATKC
			AnimationName			=	MUHaradim_SKL.MUHaradim_ATKB 
			AnimationMode			=	ONCE
			UseWeaponTiming			=	Yes
		End
	End
	
	AnimationState = FIRING_OR_PREATTACK_A WEAPONSTATE_CONTAINED
 		Animation = Attacking
			AnimationName = MUHaradim_SKL.MUHaradim_ATKA
			AnimationMode = ONCE
			UseWeaponTiming		= Yes
		End
		FrameForPristineBonePositions = 64
	End

	AnimationState = AFLAME WEAPONSTATE_CONTAINED
		Animation = Flaming_Death
			AnimationName = MUHaradim_SKL.MUHaradim_FLLA
			AnimationMode = LOOP
		End
		ParticleSysBone     = BAT_HEAD FireBuildingLargeSmoke FollowBone:yes
		ParticleSysBone     = BAT_HEAD FireSmall FollowBone:yes
		ParticleSysBone     = BAT_SPINE1 FireBuildingLargeSmoke FollowBone:yes
		ParticleSysBone     = BAT_SPINE1 FireSmall FollowBone:yes
		ParticleSysBone     = BAT_SPINE2 FireBuildingLargeSmoke FollowBone:yes
		ParticleSysBone     = BAT_SPINE2 FireSmall FollowBone:yes
	End

	AnimationState = WEAPONSTATE_CONTAINED
		Animation = IDLA
			AnimationName = MUHaradim_SKL.MUHaradim_IDLA
			AnimationMode = ONCE
	    	AnimationBlendTime = 10
			AnimationPriority = 25
		End
		Animation = IDLB
			AnimationName = MUHaradim_SKL.MUHaradim_IDLB
			AnimationMode = ONCE
	    	AnimationBlendTime = 10
		End
		Animation = IDLC
			AnimationName = MUHaradim_SKL.MUHaradim_IDLC
			AnimationMode = ONCE
	    	AnimationBlendTime = 10
		End
		Flags =	RESTART_ANIM_WHEN_COMPLETE	
		StateName = Idle
		BeginScript
			CurDrawableShowSubObject("arrrow")
		EndScript
	End

	;-- ON THE GROUND ANIMATIONS
	
	AnimationState = THROWN_PROJECTILE
			Animation = Thrown
	      AnimationName = MUHaraLnc_SKL.MUHaraLnc_FLYA
		    AnimationMode = LOOP
			End
    End
	
	AnimationState				= PASSENGER FREEFALL
		Animation				= Wiggling
			AnimationName		= MUHaraLnc_SKL.MUHaraLnc_FLLA
		    AnimationMode		= LOOP
		End
		EnteringStateFX			= FX_ThrownRockPickUp
	 End
	 
	 AnimationState						= FREEFALL
		Animation						= Falling
			AnimationName				= MUHaraLnc_SKL.MUHaraLnc_FLYA
			AnimationMode				= LOOP
			AnimationBlendTime			= 10
			AnimationSpeedFactorRange	= 0.4	0.4
		End
	End
	
	; --- stunned anims
    AnimationState				= STUNNED_FLAILING
		Animation				= Flying
			AnimationName		= MUHaraLnc_SKL.MUHaraLnc_FLYA
			AnimationMode		= LOOP
		End
    End
	
	AnimationState = DYING SPLATTED
 		Animation = Splattered_On_Ground
			AnimationName = MUHaraLnc_SKL.MUHaraLnc_LNDA
			AnimationMode = ONCE
		End
		EnteringStateFX = FX_HaradrimHitGround
    End
	
	AnimationState			= DYING STUNNED_FLAILING
 		Animation			= Flying
			AnimationName	= MUHaraLnc_SKL.MUHaraLnc_FLYA
			AnimationMode	= LOOP
		End
    End  

    AnimationState = DYING AFLAME
		Animation = Flaming_Death
			AnimationName = MUHaraLnc_SKL.MUHaraLnc_DIEA
			AnimationMode = ONCE
		End
		ParticleSysBone     = BAT_HEAD FireBuildingLargeSmoke FollowBone:yes
		ParticleSysBone     = BAT_HEAD FireSmall FollowBone:yes
		ParticleSysBone     = BAT_SPINE1 FireBuildingLargeSmoke FollowBone:yes
		ParticleSysBone     = BAT_SPINE1 FireSmall FollowBone:yes
		ParticleSysBone     = BAT_SPINE2 FireBuildingLargeSmoke FollowBone:yes
		ParticleSysBone     = BAT_SPINE2 FireSmall FollowBone:yes
    End

    AnimationState = AFLAME
		Animation = Flaming_Death
			AnimationName = MUHaraLnc_SKL.MUHaraLnc_FLLA
			AnimationMode = LOOP
		End
		ParticleSysBone     = BAT_HEAD FireBuildingLargeSmoke FollowBone:yes
		ParticleSysBone     = BAT_HEAD FireSmall FollowBone:yes
		ParticleSysBone     = BAT_SPINE1 FireBuildingLargeSmoke FollowBone:yes
		ParticleSysBone     = BAT_SPINE1 FireSmall FollowBone:yes
		ParticleSysBone     = BAT_SPINE2 FireBuildingLargeSmoke FollowBone:yes
		ParticleSysBone     = BAT_SPINE2 FireSmall FollowBone:yes
    End

    AnimationState = DYING
		StateName			= STATE_Dying
		Animation = dead
			AnimationName = MUHaraLnc_SKL.MUHaraLnc_DIEA
			AnimationMode = MANUAL
		End
		Animation = dead_landed
			AnimationName = MUHaraLnc_SKL.MUHaraLnc_LNDA
			AnimationMode = MANUAL
		End
		Flags = START_FRAME_LAST
		BeginScript
			CurDrawableShowSubObject("LANCE")
			Prev = CurDrawablePrevAnimation()
			if Prev == "DyingTrans"
			then
				return "dead"
			elseif Prev == "Flying"
			then
				CurDrawableSetTransitionAnimState("DIE_LAND")
			elseif Prev == "Die_Land"
			then
				return "dead_landed"
			end
			
			CurDrawableSetTransitionAnimState("DIE_TRANSITION")
			
		EndScript
    End
    
    TransitionState = DIE_TRANSITION
   		Animation = DyingTrans
			AnimationName = MUHaraLnc_SKL.MUHaraLnc_DIEA
			AnimationMode = ONCE
		End
	End
	
	TransitionState = DIE_LAND
   		Animation = Die_Land
			AnimationName = MUHaraLnc_SKL.MUHaraLnc_LNDA
			AnimationMode = ONCE
		End
	End

	 
    
    
	AnimationState				= MOVING CLIMBING
		Animation				= Climbing
			AnimationName		= MUHaraLnc_SKL.MUHaraLnc_CLMA
			AnimationMode		= LOOP
		End
    End
    
    AnimationState				= MOVING DAMAGED AFLAME
		ShareAnimation			= Yes
		Animation				= Moving_Damaged
			AnimationName		= MUHaraLnc_SKL.MUHaraLnc_RUNA
		    AnimationMode		= LOOP
		End
		ParticleSysBone			= BAT_HEAD FireBuildingLargeSmoke FollowBone:yes
		ParticleSysBone			= BAT_HEAD FireSmall FollowBone:yes
		ParticleSysBone			= BAT_SPINE1 FireBuildingLargeSmoke FollowBone:yes
		ParticleSysBone			= BAT_SPINE1 FireSmall FollowBone:yes
		ParticleSysBone			= BAT_SPINE2 FireBuildingLargeSmoke FollowBone:yes
		ParticleSysBone			= BAT_SPINE2 FireSmall FollowBone:yes
    End

    AnimationState				= MOVING AFLAME
		ShareAnimation			= Yes
		Animation				= Moving
			AnimationName		= MUHaraLnc_SKL.MUHaraLnc_RUNA
			AnimationMode		= LOOP
		End
		ParticleSysBone			= BAT_HEAD FireBuildingLargeSmoke FollowBone:yes
		ParticleSysBone			= BAT_HEAD FireSmall FollowBone:yes
		ParticleSysBone			= BAT_SPINE1 FireBuildingLargeSmoke FollowBone:yes
		ParticleSysBone			= BAT_SPINE1 FireSmall FollowBone:yes
		ParticleSysBone			= BAT_SPINE2 FireBuildingLargeSmoke FollowBone:yes
		ParticleSysBone			= BAT_SPINE2 FireSmall FollowBone:yes
    End
    
    AnimationState				= MOVING PANICKING
		ShareAnimation			= Yes
		Animation				= RUNM
			AnimationName		= MUHaraLnc_SKL.MUHaraLnc_MFDA
			AnimationMode		= LOOP
		End
	End
		
	AnimationState				= MOVING BACKING_UP
		ShareAnimation			= Yes
		Animation				= BackingUp
			AnimationName		= MUHaraLnc_SKL.MUHaraLnc_BAKA
			AnimationMode		= LOOP
		End
	End
	
	AnimationState				= MOVING EMOTION_TERROR
		ShareAnimation			= Yes
		Animation				= Moving
		    AnimationName		= MUHaraLnc_SKL.MUHaraLnc_RUNA
			AnimationMode		= LOOP
		End
		ParticleSysBone			= None InfantryDustTrails
    End

    AnimationState				= MOVING
		ShareAnimation			= Yes
		Animation				= Moving
		    AnimationName		= MUHaraLnc_SKL.MUHaraLnc_RUNA
			AnimationMode		= LOOP
			AnimationSpeedFactorRange = 0.8 1.2
		End
		ParticleSysBone			= None InfantryDustTrails
    End
    
    AnimationState				= PASSENGER
		Animation				= Wiggling
			AnimationName		= MUHaraLnc_SKL.MUHaraLnc_FLLA
		    AnimationMode		= LOOP
		End
		EnteringStateFX			= FX_ThrownRockPickUp
	 End

    AnimationState				= TRANSPORT_MOVING
		Animation				= wobbling_on_transport
			AnimationName		= MUHaraLnc_SKL.MUHaraLnc_IDLB
		    AnimationMode		= LOOP
		End
    End
  
 
    
    AnimationState				= STUNNED_STANDING_UP
 		Animation				= Standing_Back_Up
			AnimationName		= MUHaraLnc_SKL.MUHaraLnc_GTPA
			AnimationMode		= ONCE
			AnimationSpeedFactorRange = 1.5 1.5
		End
    End
    
    AnimationState				= STUNNED
 		Animation				= Splattered_On_Ground
			AnimationName		= MUHaraLnc_SKL.MUHaraLnc_LNDA
			AnimationMode		= ONCE
		End
		EnteringStateFX = FX_HaradrimHitGround
    End

    
    
        AnimationState							= RELOADING_A
		StateName							= STATE_Ready
		Animation							= ALERT
			AnimationName					= MUHaraLnc_SKL.MUHaraLnc_IDLA
			AnimationMode					= LOOP
			AnimationBlendTime				= 0
		End
		BeginScript
			CurDrawableAllowToContinue()
		EndScript
	End
 
	AnimationState = FIRING_OR_PREATTACK_B
		StateName = CloseRange
		Animation = CloseAttack
			AnimationName			= MUHaraLnc_SKL.MUHaraLnc_ATKA
			AnimationMode			= ONCE
			UseWeaponTiming			= Yes
		End
		Animation = BIG_BLEND_B
			AnimationName			= MUHaraLnc_SKL.MUHaraLnc_ATKA
			AnimationMode			= ONCE
			UseWeaponTiming			= Yes
			AnimationBlendTime		= 20
		End
		
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "FarRange"
			then
				return "BIG_BLEND_B"
			else
				return "CloseAttack"
			end
		EndScript
	End
 
	AnimationState = FIRING_OR_PREATTACK_A
		StateName = FarRange
		Animation = FarAttack
			AnimationName = MUHaraLnc_SKL.MUHaraLnc_ATKB
			AnimationMode = ONCE
		End
		Animation = BIG_BLEND_A
			AnimationName = MUHaraLnc_SKL.MUHaraLnc_ATKB
			AnimationMode = ONCE
			AnimationBlendTime = 20
		End
		FrameForPristineBonePositions = 44
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "CloseRange"
			then
				return "BIG_BLEND_A"
			else
				return "FarAttack"
			end
		EndScript
	End    
    
;    AnimationState							= ATTACKING
;		StateName							= STATE_Ready
;		Animation							= ALERT
;			AnimationName					= MUHaraLnc_SKL.MUHaraLnc_IDLA
;			AnimationMode					= LOOP
;			AnimationBlendTime				= 0
;		End
;	End
    
    
    
    ; --- emotion animations --- ;
		
	AnimationState = WAR_CHANT
		Animation				= Chant
			AnimationName		= MUHaraLnc_SKL.MUHaraLnc_TNTA
			AnimationMode		= ONCE
		End
		Animation				= A
			AnimationName		= MUHaraLnc_SKL.MUHaraLnc_TNTA
			AnimationMode		= ONCE
		End
		Flags					= RESTART_ANIM_WHEN_COMPLETE
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "STATE_Emotion"
			then
				CurDrawableAllowToContinue();
			end
		EndScript
	End
	
	AnimationState							= EMOTION_UNCONTROLLABLY_AFRAID
		ShareAnimation						= Yes
		StateName							= STATE_Emotion
		Animation							= FERA
			AnimationName					= MUHaraLnc_SKL.MUHaraLnc_FERA
			AnimationMode					= ONCE
		End
		Animation							= A
			AnimationName					= MUHaraLnc_SKL.MUHaraLnc_FERA
			AnimationMode					= ONCE
		End
		Flags								= RESTART_ANIM_WHEN_COMPLETE
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "STATE_Emotion"
			then
				CurDrawableAllowToContinue();
			end
		EndScript
	End		
	
	AnimationState = ATTACKING
		Animation = IdleAllAttacksComeFrom
			AnimationName = MUHaraLnc_SKL.MUHaraLnc_IDLA
			AnimationMode = LOOP
		End
	End
    
	AnimationState							= EMOTION_AFRAID
		ShareAnimation						= Yes
		StateName							= STATE_Emotion
		Animation							= FERA
			AnimationName					= MUHaraLnc_SKL.MUHaraLnc_FERA
			AnimationMode					= ONCE
		End
		Animation							= A
			AnimationName					= MUHaraLnc_SKL.MUHaraLnc_FERA
			AnimationMode					= ONCE
		End
		Flags								= RESTART_ANIM_WHEN_COMPLETE
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "STATE_Emotion"
			then
				CurDrawableAllowToContinue();
			end
		EndScript
	End		
	
	AnimationState							= EMOTION_TAUNTING
		StateName							= STATE_Emotion
		Animation							= TNTA
			AnimationName					= MUHaraLnc_SKL.MUHaraLnc_TNTA
			AnimationMode					= ONCE
		End
		Animation							= A
			AnimationName					= MUHaraLnc_SKL.MUHaraLnc_TNTA
			AnimationMode					= ONCE
		End
		Flags								= RESTART_ANIM_WHEN_COMPLETE
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "STATE_Emotion"
			then
				CurDrawableAllowToContinue();
			end
		EndScript
	End
	
	AnimationState							= EMOTION_POINTING
		StateName							= STATE_Emotion
		Animation							= Pointing1
			AnimationName					= MUHaraLnc_SKL.MUHaraLnc_PNTA
			AnimationMode					= ONCE
		End
		Animation							= A
			AnimationName					= MUHaraLnc_SKL.MUHaraLnc_PNTA
			AnimationMode					= ONCE
		End
		Flags								= RESTART_ANIM_WHEN_COMPLETE
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "STATE_Emotion"
			then
				CurDrawableAllowToContinue();
			end
		EndScript
	End
	
	AnimationState							= EMOTION_CELEBRATING
		StateName							= STATE_Emotion
		Animation							= CHRA
			AnimationName					= MUHaraLnc_SKL.MUHaraLnc_CHRA
			AnimationMode					= ONCE
			AnimationPriority				= 10
		End
		Animation							= CHRB
			AnimationName					= MUHaraLnc_SKL.MUHaraLnc_CHRA
			AnimationMode					= ONCE
			AnimationPriority				= 10
		End
		Flags								= RESTART_ANIM_WHEN_COMPLETE	
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "STATE_Emotion"
			then
				CurDrawableAllowToContinue();
			end
		EndScript
	End
	
	AnimationState							= EMOTION_ALERT
		StateName							= STATE_Emotion
		Animation							= ALERT
			AnimationName					= MUHaraLnc_SKL.MUHaraLnc_IDLA
			AnimationMode					= ONCE
		End
		Animation							= A
			AnimationName					= MUHaraLnc_SKL.MUHaraLnc_IDLA
			AnimationMode					= ONCE
		End
		Flags								= RESTART_ANIM_WHEN_COMPLETE
		BeginScript
			Prev = CurDrawablePrevAnimationState()			
			if Prev == "STATE_Emotion"
			then
				CurDrawableAllowToContinue();
			end		
		EndScript
	End
	
	    ; --- hit reactions
    AnimationState = HIT_REACTION HIT_LEVEL_1
		Animation = GotHit
			AnimationName = MUHaraLnc_SKL.MUHaraLnc_HITA
			AnimationMode = ONCE
		End
    End    

			
	AnimationState							= SELECTED
		StateName							= STATE_Selected
		SimilarRestart						= Yes
		Animation							= AtAttention
			AnimationName					= MUHaraLnc_SKL.MUHaraLnc_ATNB
			AnimationMode					= LOOP
		End
		Animation							= BIG_BLEND_Selected
			AnimationName					= MUHaraLnc_SKL.MUHaraLnc_ATNB
			AnimationMode					= LOOP
			AnimationBlendTime				= 20
		End
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			CurDrawableShowSubObject("LANCE")
			if Prev == "Idle"  then CurDrawableSetTransitionAnimState("TRANS_Idle_to_Selected") return end
			if Prev == "STATE_Emotion"; or Prev == "CloseRange" or Prev == "FarRange"
			then
				CurDrawableAllowToContinue();
			end
			if Prev == "GotHit"
			then
				return "BIG_BLEND_Selected"
			end
			return "AtAttention"
		EndScript
	End
	
		TransitionState					=	TRANS_Idle_to_Selected
			Animation					=	ATNA
				AnimationName			=	MUHaraLnc_SKL.MUHaraLnc_ATNA
				AnimationMode			=	ONCE
			End
		End
		
		TransitionState					=	TRANS_Selected_to_Idle
			Animation					=	ATNA
				AnimationName			=	MUHaraLnc_SKL.MUHaraLnc_ATNC
				AnimationMode			=	ONCE
			End
		End
	
	
  End

  ; ***DESIGN parameters ***
  Side = Mordor
  EditorSorting = UNIT
	ThreatLevel = 1.0
  TransportSlotCount = 1
  CommandPoints = 2
  
  WeaponSet
   Conditions = None 
    Weapon = PRIMARY MordorLanceThrown
  End
  WeaponSet
    Conditions = CONTAINED
    Weapon = PRIMARY HaradrimBow
  End
  WeaponSet
    Conditions = CLOSE_RANGE
    Weapon = PRIMARY MordorLanceThrown
    Weapon = SECONDARY MordorLance
    OnlyAgainst = PRIMARY STRUCTURE
  End
  
  ArmorSet
    Conditions      = None
    Armor           = HaradrimArmor
    DamageFX        = NormalDamageFX
  End

  ShroudClearingRange = SHROUD_CLEAR_STANDARD
  VisionRange = MORDOR_HARADRIM_VISION_RANGE

  BountyValue = MORDOR_HARADRIM_BOUNTY_VALUE
  DisplayName = OBJECT:MordorHaradrimLancer
  CrushableLevel = 0  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CrusherLevel = 0 ;What can I crush?: 0 = small animals, 1 = infantry, 2 = trees, 3 = vehicles
 	CrushRevengeWeapon = RangedInfantryCrushRevenge

  CommandSet = MordorHaradrimLancerCommandSet


  ; *** AUDIO Parameters ***;

	VoiceAttack				= HaradrimVoiceAttack
	VoiceAttackAir				= HaradrimVoiceAttack
	VoiceAttackCharge			= HaradrimVoiceAttackCharge
	VoiceAttackMachine			= HaradrimVoiceAttack
	VoiceAttackStructure			= HaradrimVoiceAttackBuilding
	VoiceCreated				= CampOrcCreateHaradrim
	VoiceFullyCreated 			= CampOrcCreateHaradrim
	VoiceGuard				= HaradrimVoiceMove
	VoiceMove				= HaradrimVoiceMove
	VoiceMoveToCamp				= HaradrimVoiceMoveCamp
	VoicePriority				= 34
	VoiceRetreatToCastle			= HaradrimVoiceRetreat
	VoiceSelect				= HaradrimVoiceSelect
	VoiceSelect2				= YeomanArcherVoiceSelect2
	VoiceSelectBattle 			= HaradrimVoiceSelectBattle

	VoiceEnterStateAttack			= HaradrimVoiceEnterStateAttack
	VoiceEnterStateAttackCharge		= HaradrimVoiceEnterStateAttackCharge
	VoiceEnterStateAttackMachine		= HaradrimVoiceEnterStateAttackBuilding
	VoiceEnterStateAttackStructure		= HaradrimVoiceEnterStateAttackBuilding
	VoiceEnterStateMove			= HaradrimVoiceEnterStateMove
	VoiceEnterStateMoveToCamp		= HaradrimVoiceEnterStateMoveCamp
	VoiceEnterStateRetreatToCastle		= HaradrimVoiceEnterStateRetreat
	
	UnitSpecificSounds
		VoiceEnter				= HaradrimVoiceGarrison
		VoiceEnterHostile			= HaradrimVoiceGarrison
		VoiceGarrison			= HaradrimVoiceGarrison			
		VoiceEnterUnitMordorMumakil	= HaradrimVoiceGarrisonMumakil		
	End

	EvaEventDamagedOwner = UnitUnderAttack 		;Eva event to trigger when unit is damaged
	;EvaEventDieOwner = GroupHaradrimDie		;Eva event to trigger on unit's death. NOTICE THAT this is only for permanent deaths
							;For deaths you can respawn from, use the DeathFX

	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
      	MaxUpdateRangeCap = 800
			AnimationSound = Sound:BodyFallSoldier 		Animation:MUHaraLnc_SKL.MUHaraLnc_LNDA 	Frames:3
			AnimationSound = Sound:BodyFallGeneric1 		Animation:MUHaraLnc_SKL.MUHaraLnc_DIEA 	Frames:47
	End


  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER CAN_USE_SIEGE_TOWER SCORE GRAB_AND_DROP ATTACK_NEEDS_LINE_OF_SIGHT ;THROWN_OBJECT
 
  Body = ActiveBody ModuleTag_porcupineFormation
    CheerRadius       = EMOTION_CHEER_RADIUS
    MaxHealth         = MORDOR_HARADRIM_HEALTH
    MaxHealthDamaged  = MORDOR_HARADRIM_HEALTH_DAMAGED
    ;RecoveryTime      = MORDOR_HARADRIM_HEALTH_RECOVERY_TIME
  End
 
  Behavior = DeflectSpecialPower ModuleTag_02b
    SpecialPowerTemplate = SpecialAbilityDeflectProjectiles
  End

  Behavior = AIUpdateInterface ModuleTag_03
    AutoAcquireEnemiesWhenIdle = Yes ATTACK_BUILDINGS
	StopChaseDistance = 674
    CanAttackWhileContained = Yes
    AttackPriority				= 	AttackPriority_Archer
  End

	Behavior = HitReactionBehavior HitReactionBehaviorModuleTag
		HitReactionLifeTimer1 = 1500	; level 1 (light  damage)  hit reaction animations in frames (5 per sec)
		HitReactionLifeTimer2 = 1500	; level 2 (medium damage)  hit reaction animations in frames (5 per sec)
		HitReactionLifeTimer3 = 1500	; level 3 (heavy  damage)  hit reaction animations in frames (5 per sec)

		HitReactionThreshold1 = 0.0		; level 1 (light  damage) threshold trigger
		HitReactionThreshold2 = 9999.0	; level 2 (medium damage) threshold trigger
		HitReactionThreshold3 = 9999.0	; level 3 (heavy  damage) threshold trigger
	End
	
	
  LocomotorSet
    Locomotor = HumanLocomotor
    Condition = SET_NORMAL
    Speed     = NORMAL_EVIL_INFANTRY_MEMBER_SPEED
  End

  Behavior = DualWeaponBehavior ModuleTag_13
  		SwitchWeaponOnCloseRangeDistance = 40
  End

;  Behavior = FlammableUpdate FlameModuleTag_03a
;    AflameDuration		= 100000	;If I catch fire, I'll burn for this long...
;    AflameDamageAmount	= 1	; taking this much damage...
;    AflameDamageDelay	= 1000   ; this often.
;    FlameDamageLimit	= 1
;  End

  Behavior = PhysicsBehavior ModuleTag_04
    GravityMult = 1.0
  End
 
  Behavior = SlowDeathBehavior ModuleTag_05
	DeathTypes = ALL -KNOCKBACK
	SinkDelay = 5000
	SinkRate = 1.0     ; in Dist/Sec
	DestructionDelay = 17000
	Sound = INITIAL HaradrimVoiceDie		;CivMaleDie
  End
 
  Behavior = SquishCollide ModuleTag_06
    ;nothing
  End
 
  Behavior = HordeMemberCollide ModuleTag_HMC
    ;nothing
  End
 
  Behavior = SlowDeathBehavior ModuleTag_07
    ; Same as normal death, but no sound (sound already played by SoundImpact = ... )
    DeathTypes = NONE +KNOCKBACK
    SinkDelay = 3000
    SinkRate = 0.8     ; in Dist/Sec
    DestructionDelay = 13000
    Sound = INITIAL HaradrimVoiceDie			;CivMaleDie
  End
 
;  Behavior = BezierProjectileBehavior ModuleTag_08 ; Module starts asleep, and wakes up when thrown.
;    FirstHeight = 30  ; Height of Bezier control points above highest intervening terrain
;    SecondHeight = 30
;    FirstPercentIndent = 30% ; Percentage of shot distance control points are placed
;    SecondPercentIndent = 70%
;    TumbleRandomly = Yes
;
;    CrushStyle = Yes ; I don't detonate, I just hit
;    DieOnImpact = Yes
;    BounceCount = 1   ; When I hit the ground, I'll arc again
;    BounceDistance = 50 ; this far
;    BounceFirstHeight = 20  ; Height of Bezier control points above highest intervening terrain
;    BounceSecondHeight = 20
;    BounceFirstPercentIndent = 20% ; Percentage of shot distance control points are placed
;    BounceSecondPercentIndent = 80%
;
;    GroundHitFX       = FX_ThrownRockGroundHit
;    GroundBounceFX    = FX_ThrownRockBounceHit
;  End

  ; Tie into LargeGroupAudio system
  Behavior = LargeGroupAudioUpdate ModuleTag_LGAU
	Key = Haradrim_Lancer
  End
  
	Behavior = FireWeaponWhenDeadBehavior FireDeadTag
		DeathTypes	= NONE +CRUSHED
		StartsActive	= Yes
		DelayTime		= 0
		DeathWeapon		= HaradrimCrushedWeapon
		WeaponOffset	= X:0 Y:0 Z:0	
	End	

  Geometry = CYLINDER
  GeometryMajorRadius = 8.0
  GeometryMinorRadius = 8.0
  GeometryHeight = 19.2
  GeometryIsSmall = Yes
  Shadow = SHADOW_DECAL
  ShadowSizeX = 11;
  ShadowSizeY = 11;
  ShadowTexture = ShadowI;
End

;------------------------------------------------------------------------------
; 
Object MordorHaradrimOverlord                 ;BALANCE Overlord

  SelectPortrait         = SP_Haradrim

	; This is required for garrisoned objects - please put in all objects.
	ButtonImage = BMHaradrimPalace_Haradrim
  
  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
		  
		  OkToChangeModelColor = Yes
		  
    StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD

    DefaultModelConditionState
      Model = MUHarOvr_SKN
    End

		IdleAnimationState
			Animation = IDLA
	      AnimationName = MUHarOvr_SKL.MUHarOvr_IDLA
	      AnimationMode = ONCE
				AnimationPriority = 25
			End
			StateName = Idle
		End
 

    AnimationState = THROWN_PROJECTILE
			Animation = Thrown
	      AnimationName = MUHarOvr_SKL.MUHarOvr_FLYA
		    AnimationMode = LOOP
			End
    End
    
    AnimationState = MOVING FIRING_OR_PREATTACK_A
		Animation = TrotAndFire
			AnimationName = MUHarOvr_SKL.MUHarOvr_ATRA
			AnimationMode = LOOP
		End
		Flags = RANDOMSTART
		;ParticleSysBone = None InfantryDustTrails
	End
    
    AnimationState = MOVING BACKING_UP
		Animation = BackingUp
			AnimationName = MUHarOvr_SKL.MUHarOvr_BAKA
			AnimationMode = LOOP
		End
		Flags = RANDOMSTART
	End

    AnimationState = MOVING EMOTION_TERROR
			Animation = Moving
	      AnimationName = MUHarOvr_SKL.MUHarOvr_RUNA
		    AnimationMode = LOOP
			End
      Flags = RANDOMSTART
      ParticleSysBone = None InfantryDustTrails
    End

    AnimationState = MOVING
			Animation = Moving
	      AnimationName = MUHarOvr_SKL.MUHarOvr_RUNA
		    AnimationMode = LOOP
			End
      Flags = RANDOMSTART
      ParticleSysBone = None InfantryDustTrails
    End
 
	AnimationState = FIRING_OR_PREATTACK_A
		Animation = ATKA
			AnimationName = MUHarOvr_SKL.MUHarOvr_ATKA
			AnimationMode = ONCE
			UseWeaponTiming		= Yes
		End
	End
    
    AnimationState = STUNNED_FLAILING
 			Animation = Flying
				AnimationName = MUHarOvr_SKL.MUHarOvr_FLYA
	      AnimationMode = LOOP
			End
      Flags = RANDOMSTART
    End

    AnimationState = DYING SPLATTED
 			Animation = Splattered_On_Ground
				AnimationName = MUHarOvr_SKL.MUHarOvr_LNDA
				AnimationMode = ONCE
			End
			EnteringStateFX = FX_HaradrimHitGround
    End


    AnimationState = DYING
			Animation = Dying
	      AnimationName = MUHarOvr_SKL.MUHarOvr_DIEA
		    AnimationMode = ONCE
			End
    End
 
    ; --- stunned anims
    
    
    AnimationState = STUNNED_STANDING_UP
 			Animation = Standing_Back_Up
				AnimationName = MUHarOvr_SKL.MUHarOvr_GTPA
	      AnimationMode = ONCE
	      AnimationSpeedFactorRange = 1.5 1.5
			End
    End

    AnimationState = STUNNED
 			Animation = Splattered_On_Ground
				AnimationName = MUHarOvr_SKL.MUHarOvr_LNDA
			    AnimationMode = ONCE
			End
			EnteringStateFX = FX_HaradrimHitGround
    End
    
    
    
   	AnimationState = WAR_CHANT
		Animation = Chant
			AnimationName = MUHarOvr_SKL.MUHarOvr_IDLA ;_TNTA if we get it
			AnimationMode = LOOP
		End
	End
	
			
	;-emotions--
	AnimationState							= EMOTION_AFRAID
		Animation							= FERA
			AnimationName					= MUHarOvr_SKL.MUHarOvr_FERA
			AnimationMode					= LOOP
		End
		Flags = RANDOMSTART
	End
	AnimationState							= EMOTION_TAUNTING
		Animation							= TNTA
			AnimationName					= MUHarOvr_SKL.MUHarOvr_TNTA
			AnimationMode					= LOOP
		End
	End
	AnimationState							= EMOTION_POINTING
		Animation							= Pointing1
			AnimationName					= MUHarOvr_SKL.MUHarOvr_PNTA
			AnimationMode					= LOOP
		End
	End
	AnimationState							= EMOTION_CELEBRATING
		Animation                           = CHRA
			AnimationName					= MUHarOvr_SKL.MUHarOvr_CHRA
			AnimationMode					= ONCE
		End
	End	
  End

  ; ***DESIGN parameters ***
  Side = Mordor
  EditorSorting = UNIT
	ThreatLevel = 1.0
  TransportSlotCount = 1
  WeaponSet
    Conditions = None 
    Weapon = PRIMARY  MordorLance                               ;BALANCE Overlord Weapon
    AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
  End
  ArmorSet
    Conditions      = None
    Armor           = NoArmor
    DamageFX        = NormalDamageFX
  End
  VisionRange = 120.0
  DisplayName = OBJECT:MordorHaradrimOverlord
  CrushableLevel = 0  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CrusherLevel = 0 ;What can I crush?: 0 = small animals, 1 = infantry, 2 = trees, 3 = vehicles
 	CrushRevengeWeapon = BasicInfantryCrushRevenge

  CommandSet = GenericCommandSet
  CommandPoints = 1


  ; *** AUDIO Parameters ***;

	VoiceAttack				= HaradrimVoiceAttack
	VoiceAttackAir				= HaradrimVoiceAttack
	VoiceAttackCharge			= HaradrimVoiceAttackCharge
	VoiceAttackMachine			= HaradrimVoiceAttack
	VoiceAttackStructure			= HaradrimVoiceAttackBuilding
	VoiceCreated				= CampOrcCreateHaradrim
	VoiceFullyCreated 			= CampOrcCreateHaradrim
	VoiceMove				= HaradrimVoiceMove
	VoiceMoveToCamp				= HaradrimVoiceMoveCamp
	VoicePriority				= 34
	VoiceRetreatToCastle			= HaradrimVoiceRetreat
	VoiceSelect				= HaradrimVoiceSelect
	VoiceSelectBattle 			= HaradrimVoiceSelectBattle
	VoiceGuard			= HaradrimVoiceMove
	


	UnitSpecificSounds
		VoiceEnter			= HaradrimVoiceGarrison
		VoiceEnterHostile		= HaradrimVoiceGarrison
		VoiceGarrison			= HaradrimVoiceGarrison			;TEMP_HaradrimVoiceEnter_TEMP
		VoiceEnterUnitMordorMumakil	= HaradrimVoiceGarrisonMumakil		;TEMP_HaradrimVoiceEnterMumakil_TEMP
	End

	EvaEventDamagedOwner = UnitUnderAttack 		;Eva event to trigger when unit is damaged


  ; *** ENGINEERING Parameters ***

  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER CAN_USE_SIEGE_TOWER SCORE THROWN_OBJECT
 
  Body = ActiveBody ModuleTag_02
    MaxHealth         = 10                  ;BALANCE Overlord Health
    MaxHealthDamaged  = 5
    ;RecoveryTime      = 5000
  End
 
  Behavior = AIUpdateInterface ModuleTag_03
    AutoAcquireEnemiesWhenIdle = Yes ATTACK_BUILDINGS
    CanAttackWhileContained = Yes
    HoldGroundCloseRangeDistance = 80
    AttackPriority				= 	AttackPriority_Archer
  End

  LocomotorSet
    Locomotor = HumanLocomotor
    Condition = SET_NORMAL
    Speed     = 32
  End

  LocomotorSet
    Locomotor = HumanWanderLocomotor
    Condition = SET_WANDER
    Speed     = 32
  End 

  Behavior = PhysicsBehavior ModuleTag_04
    GravityMult = 1.0
  End
 
  Behavior = SlowDeathBehavior ModuleTag_05
    DeathTypes = ALL -KNOCKBACK
    SinkDelay = 3000
    SinkRate = 0.8     ; in Dist/Sec
    DestructionDelay = 8000
    Sound = INITIAL HaradrimVoiceDie			;CivMaleDie
  End
 
  Behavior = SquishCollide ModuleTag_06
    ;nothing
  End
 
  Behavior = SlowDeathBehavior ModuleTag_07
    ; Same as normal death, but no sound (sound already played by SoundImpact = ... )
    DeathTypes = NONE +KNOCKBACK
    SinkDelay = 3000
    SinkRate = 0.8     ; in Dist/Sec
    DestructionDelay = 8000
    Sound = INITIAL HaradrimVoiceDie			;CivMaleDie
  End
 
  Behavior = BezierProjectileBehavior ModuleTag_08 ; Module starts asleep, and wakes up when thrown.
    FirstHeight = 24  ; Height of Bezier control points above highest intervening terrain
    SecondHeight = 24
    FirstPercentIndent = 30% ; Percentage of shot distance control points are placed
    SecondPercentIndent = 70%
    TumbleRandomly = Yes

    CrushStyle = Yes ; I don't detonate, I just hit
    DieOnImpact = Yes
    BounceCount = 1   ; When I hit the ground, I'll arc again
    BounceDistance = 40 ; this far
    BounceFirstHeight = 16  ; Height of Bezier control points above highest intervening terrain
    BounceSecondHeight = 16
    BounceFirstPercentIndent = 20% ; Percentage of shot distance control points are placed
    BounceSecondPercentIndent = 80%

    GroundHitFX       = FX_ThrownRockGroundHit
    GroundBounceFX    = FX_ThrownRockBounceHit
  End

  ; Tie into LargeGroupAudio system
  Behavior = LargeGroupAudioUpdate ModuleTag_LGAU
	Key = Haradrim_Lancer
  End

  Geometry = CYLINDER
  GeometryMajorRadius = 8.0
  GeometryMinorRadius = 8.0
  GeometryHeight = 19.2
  GeometryIsSmall = Yes
  Shadow = SHADOW_DECAL
  ShadowSizeX = 11;
  ShadowSizeY = 11;
  ShadowTexture = ShadowI;
End

;------------------------------------------------------------------------------
; 
Object MordorCorsair


  ;SelectPortrait         = SP_Corsair

  ; *** ART Parameters ***
	; This is required for garrisoned objects - please put in all objects.
	ButtonImage = BuildingNoArt
  
   ;note all file names are MUHaradim, not MUHaradrim, so as not to exceed character limits
  Draw = W3DHordeModelDraw ModuleTag_01

	OkToChangeModelColor = Yes
		
	StaticModelLODMode = Yes
	; specify options for static LODs
	LodOptions	= LOW
		AllowMultipleModels		=	ALLOW_MULTIPLE_MODELS_LOW
		MaxRandomTextures		=	MAX_RANDOM_TEXTURES_LOW
		MaxRandomAnimations		=	MAX_RANDOM_ANIMATIONS_LOW
		MaxAnimFrameDelta		=	MAX_ANIM_FRAME_DELTA_LOW
	End
	
	LodOptions	= MEDIUM
		AllowMultipleModels		=	ALLOW_MULTIPLE_MODELS_MED
		MaxRandomTextures		=	MAX_RANDOM_TEXTURES_MED
		MaxRandomAnimations		=	MAX_RANDOM_ANIMATIONS_MED
		MaxAnimFrameDelta		=	MAX_ANIM_FRAME_DELTA_MED
	End
	
	LodOptions	= HIGH
		AllowMultipleModels		=	ALLOW_MULTIPLE_MODELS_HIGH
		MaxRandomTextures		=	MAX_RANDOM_TEXTURES_HIGH
		MaxRandomAnimations		=	MAX_RANDOM_ANIMATIONS_HIGH
		MaxAnimFrameDelta		=	MAX_ANIM_FRAME_DELTA_HIGH
	End


    DefaultModelConditionState
      Model = MUHaradim_SKN
      WeaponLaunchBone = PRIMARY ARRROW
    End

		IdleAnimationState
			Animation = IDLA
				AnimationName = MUHaradim_SKL.MUHaradim_IDLA
				AnimationMode = ONCE
	    		AnimationBlendTime = 10
				AnimationPriority = 25
			End
			Animation = IDLB
			    AnimationName = MUHaradim_SKL.MUHaradim_IDLB
				AnimationMode = ONCE
	    		AnimationBlendTime = 10
			End
			Animation = IDLC
				AnimationName = MUHaradim_SKL.MUHaradim_IDLC
				AnimationMode = ONCE
	    		AnimationBlendTime = 10
			End
			StateName = Idle
			BeginScript
				CurDrawableShowSubObject("arrrow")
			EndScript
		End
 
    AnimationState = THROWN_PROJECTILE
		Animation = Thrown
			AnimationName = MUHaradim_SKL.MUHaradim_FLYA
		    AnimationMode = LOOP
		End
    End

    AnimationState = MOVING DAMAGED AFLAME
		Animation = Moving_Damaged
			AnimationName = MUHaradim_SKL.MUHaradim_MFDA
		    AnimationMode = LOOP
		End
		Flags               = RANDOMSTART
		ParticleSysBone     = BAT_HEAD FireBuildingLargeSmoke FollowBone:yes
		ParticleSysBone     = BAT_HEAD FireSmall FollowBone:yes
		ParticleSysBone     = BAT_SPINE1 FireBuildingLargeSmoke FollowBone:yes
		ParticleSysBone     = BAT_SPINE1 FireSmall FollowBone:yes
		ParticleSysBone     = BAT_SPINE2 FireBuildingLargeSmoke FollowBone:yes
		ParticleSysBone     = BAT_SPINE2 FireSmall FollowBone:yes
    End

    AnimationState = MOVING AFLAME
		Animation = Moving
			AnimationName = MUHaradim_SKL.MUHaradim_MFDA
		AnimationMode = LOOP
		End
		Flags               = RANDOMSTART
		ParticleSysBone     = BAT_HEAD FireBuildingLargeSmoke FollowBone:yes
		ParticleSysBone     = BAT_HEAD FireSmall FollowBone:yes
		ParticleSysBone     = BAT_SPINE1 FireBuildingLargeSmoke FollowBone:yes
		ParticleSysBone     = BAT_SPINE1 FireSmall FollowBone:yes
		ParticleSysBone     = BAT_SPINE2 FireBuildingLargeSmoke FollowBone:yes
		ParticleSysBone     = BAT_SPINE2 FireSmall FollowBone:yes
    End
    
    AnimationState			= MOVING BACKING_UP
		Animation			= BackingUp
			AnimationName	= MUHaradim_SKL.MUHaradim_BAKA
			AnimationMode	= LOOP
		End
		Flags = RANDOMSTART
	End
	
	AnimationState = MOVING EMOTION_TERROR
		ShareAnimation = Yes
		Animation = Moving
			AnimationName = MUHaradim_SKL.MUHaradim_RUNA
		    AnimationMode = LOOP
		End
		Flags               = RANDOMSTART
		ParticleSysBone     = None InfantryDustTrails
    End

;    AnimationState = MOVING DAMAGED
;			Animation = Moving_Damaged
;	      AnimationName = MUHaradim_SKL.MUHaradim_IWKA
;		    AnimationMode = LOOP
;			End
 ;     Flags               = RANDOMSTART
 ;     ParticleSysBone     = None InfantryDustTrails
 ;   End

    AnimationState = MOVING
		ShareAnimation = Yes
			Animation = Moving
	      AnimationName = MUHaradim_SKL.MUHaradim_RUNA
		    AnimationMode = LOOP
			End
      Flags               = RANDOMSTART
      ParticleSysBone     = None InfantryDustTrails
    End
 
    AnimationState = FIRING_OR_PREATTACK_A
 		Animation = Attacking
			AnimationName = MUHaradim_SKL.MUHaradim_ATKA
			AnimationMode = LOOP
			UseWeaponTiming		= Yes
		End
		FrameForPristineBonePositions = 64
    End


    AnimationState = DYING SPLATTED
 			Animation = Splattered_On_Ground
				AnimationName = MUHaradim_SKL.MUHaradim_LNDA
				AnimationMode = ONCE
			End
			EnteringStateFX = FX_HaradrimHitGround
    End

    AnimationState = DYING AFLAME
		Animation = Flaming_Death_1
			AnimationName = MUHaradim_SKL.MUHaradim_DIEA
			AnimationMode = ONCE
		End
		Animation = Flaming_Death_2
			AnimationName = MUHaradim_SKL.MUHaradim_DIEB
		    AnimationMode = ONCE
		End
		ParticleSysBone     = BAT_HEAD FireBuildingLargeSmoke FollowBone:yes
		ParticleSysBone     = BAT_HEAD FireSmall FollowBone:yes
		ParticleSysBone     = BAT_SPINE1 FireBuildingLargeSmoke FollowBone:yes
		ParticleSysBone     = BAT_SPINE1 FireSmall FollowBone:yes
		ParticleSysBone     = BAT_SPINE2 FireBuildingLargeSmoke FollowBone:yes
		ParticleSysBone     = BAT_SPINE2 FireSmall FollowBone:yes
    End

    AnimationState = AFLAME
		Animation = Flaming_Death
			AnimationName = MUHaradim_SKL.MUHaradim_FLLA
			AnimationMode = LOOP
		End
		ParticleSysBone     = BAT_HEAD FireBuildingLargeSmoke FollowBone:yes
		ParticleSysBone     = BAT_HEAD FireSmall FollowBone:yes
		ParticleSysBone     = BAT_SPINE1 FireBuildingLargeSmoke FollowBone:yes
		ParticleSysBone     = BAT_SPINE1 FireSmall FollowBone:yes
		ParticleSysBone     = BAT_SPINE2 FireBuildingLargeSmoke FollowBone:yes
		ParticleSysBone     = BAT_SPINE2 FireSmall FollowBone:yes
    End

    AnimationState = DYING
		Animation = Dying_1
			AnimationName = MUHaradim_SKL.MUHaradim_DIEA
			AnimationMode = ONCE
		End
		Animation = Dying_2
			AnimationName = MUHaradim_SKL.MUHaradim_DIEB
		    AnimationMode = ONCE
		End
    End

    AnimationState = TRANSPORT_MOVING
		ShareAnimation = Yes
		Animation = wobbling_on_transport
			AnimationName = MUHaradim_SKL.MUHaradim_IDLD
		    AnimationMode = LOOP
	        AnimationBlendTime  = 15
		End
    End
    
 ;   AnimationState = TRANSPORT_STOPPED
;		Animation = wobbling_on_transport
;			AnimationName = MUHaradim_SKL.MUHaradim_IDLD
;		    AnimationMode = LOOP
;		End
 ;   End
    
    
  
    ; --- stunned anims
    AnimationState = STUNNED_FLAILING
 			Animation = Flying
				AnimationName = MUHaradim_SKL.MUHaradim_FLYA
	      AnimationMode = LOOP
			End
      Flags = RANDOMSTART
    End

    AnimationState = STUNNED
 			Animation = Splattered_On_Ground
				AnimationName = MUHaradim_SKL.MUHaradim_LNDA
				AnimationMode = ONCE
			End
			EnteringStateFX = FX_HaradrimHitGround
    End

    AnimationState = STUNNED_STANDING_UP
 			Animation = Standing_Back_Up
				AnimationName = MUHaradim_SKL.MUHaradim_LNDA
	      AnimationMode = ONCE_BACKWARDS
	      AnimationSpeedFactorRange = 1.5 1.5
			End
    End
    
    AnimationState = WAR_CHANT
		Animation = Chant
			AnimationName = MUHaradim_SKL.MUHaradim_IDLA ;TNTA if we get it
			AnimationMode = LOOP
		End
	End
	
			
	;-emotions--
	AnimationState							= EMOTION_AFRAID
		Animation							= FERA
			AnimationName					= MUHaradim_SKL.MUHaradim_FERA
			AnimationMode					= LOOP
		End
		Flags = RANDOMSTART
	End
	AnimationState							= EMOTION_TAUNTING
		Animation							= TNTA
			AnimationName					= MUHaradim_SKL.MUHaradim_TNTA
			AnimationMode					= LOOP
		End
	End
	AnimationState							= EMOTION_POINTING
		Animation							= Pointing1
			AnimationName					= MUHaradim_SKL.MUHaradim_PNTA
			AnimationMode					= LOOP
		End
	End
	AnimationState							= EMOTION_CELEBRATING
		Animation                           = CHRA
			AnimationName					= MUHaradim_SKL.MUHaradim_CHRA
			AnimationMode					= ONCE
		End
	End
  End

  ; ***DESIGN parameters ***
  Side = Mordor
  EditorSorting = UNIT
	ThreatLevel = 1.0
  EmotionRange = 240
 
  TransportSlotCount = 1
  WeaponSet
    Conditions = None 
    Weapon = PRIMARY    MordorArcherBowNoFire
    AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
  End
  
  WeaponSet
	Conditions = CLOSE_RANGE CONTESTING_BUILDING
	Weapon = PRIMARY   MordorArcherBowMelee  
	AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
  End
  
  ArmorSet
    Conditions      = None
    Armor           = NoArmor
    DamageFX        = NormalDamageFX
  End
  VisionRange = 120.0
  DisplayName = OBJECT:MordorCorsair
  CrushableLevel = 0  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CrusherLevel = 0 ;What can I crush?: 0 = small animals, 1 = infantry, 2 = trees, 3 = vehicles
  	CrushRevengeWeapon = RangedInfantryCrushRevenge

  CommandPoints = 1

 
  ; *** AUDIO Parameters ***;

	VoiceAttack			= HaradrimVoiceAttack
	VoiceAttackAir			= HaradrimVoiceAttack
	VoiceAttackCharge		= HaradrimVoiceAttackCharge
	VoiceAttackMachine		= HaradrimVoiceAttack
	VoiceAttackStructure		= HaradrimVoiceAttackBuilding
	VoiceCreated			= CampOrcCreateHaradrim
	VoiceFullyCreated 		= CampOrcCreateHaradrim
	VoiceMove			= HaradrimVoiceMove
	VoiceMoveToCamp			= HaradrimVoiceMoveCamp
	VoicePriority			= 34
	VoiceRetreatToCastle		= HaradrimVoiceRetreat
	VoiceSelect			= HaradrimVoiceSelect
	VoiceSelectBattle 		= HaradrimVoiceSelectBattle
	VoiceGuard			= HaradrimVoiceMove


	;UnitSpecificSounds
		;VoiceEnter			= HaradrimVoiceGarrison
		;VoiceEnterHostile		= HaradrimVoiceGarrison
		;VoiceGarrison			= HaradrimVoiceGarrison			;TEMP_HaradrimVoiceEnter_TEMP
		;VoiceEnterUnitMordorMumakil	= HaradrimVoiceGarrisonMumakil		;TEMP_HaradrimVoiceEnterMumakil_TEMP
	;End

	EvaEventDamagedOwner = UnitUnderAttack 		;Eva event to trigger when unit is damaged


  ; *** ENGINEERING Parameters ***

  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER CAN_USE_SIEGE_TOWER SCORE THROWN_OBJECT
 
  Body = ActiveBody ModuleTag_02
    MaxHealth         = 10                  ;BALANCE Orc Archer Health
    MaxHealthDamaged  = 5
    ;RecoveryTime      = 5000
  End
 
  Behavior = AIUpdateInterface ModuleTag_03
    AutoAcquireEnemiesWhenIdle = Yes ATTACK_BUILDINGS
    CanAttackWhileContained = Yes
    MaxCowerTime	= 5000
    MinCowerTime	= 3000
  End

  LocomotorSet
    Locomotor     = HumanLocomotor
    Condition     = SET_NORMAL
    Speed         = NORMAL_EVIL_INFANTRY_MEMBER_SPEED
  End

  Behavior = PhysicsBehavior ModuleTag_04
    GravityMult = 1.0
  End
  
  	Behavior = AimWeaponBehavior AimWeaponModuleTag
		AimLowThreshold  = -0.15
		AimHighThreshold =  0.15
	End
 
  Behavior = SlowDeathBehavior ModuleTag_05
    DeathTypes = ALL -KNOCKBACK
    SinkDelay = 3000
    SinkRate = 0.40     ; in Dist/Sec
    DestructionDelay = 8000
    Sound = INITIAL HaradrimVoiceDie				;UrukDie
  End
 
  Behavior = SquishCollide ModuleTag_06
    ;nothing
  End
 
  Behavior = HordeMemberCollide ModuleTag_HMC
    ;nothing
  End
 
  Behavior = FlammableUpdate ModuleTag_03a
    AflameDuration		= 100000	;If I catch fire, I'll burn for this long...
    AflameDamageAmount	= 1	; taking this much damage...
    AflameDamageDelay	= 1000   ; this often.
    FlameDamageLimit	= 1
  End
 
  Behavior = SlowDeathBehavior ModuleTag_07
    ; Same as normal death, but no sound (sound already played by SoundImpact = ... )
    DeathTypes = NONE +KNOCKBACK
    SinkDelay = 3000
    SinkRate = 0.40     ; in Dist/Sec
    DestructionDelay = 8000
    Sound = INITIAL HaradrimVoiceDie
  End
 
  Behavior = BezierProjectileBehavior ModuleTag_08 ; Module starts asleep, and wakes up when thrown.
    FirstHeight = 24  ; Height of Bezier control points above highest intervening terrain
    SecondHeight = 24
    FirstPercentIndent = 30% ; Percentage of shot distance control points are placed
    SecondPercentIndent = 70%
    TumbleRandomly = Yes

    CrushStyle = Yes ; I don't detonate, I just hit
    DieOnImpact = Yes
    BounceCount = 1   ; When I hit the ground, I'll arc again
    BounceDistance = 40 ; this far
    BounceFirstHeight = 16  ; Height of Bezier control points above highest intervening terrain
    BounceSecondHeight = 16
    BounceFirstPercentIndent = 20% ; Percentage of shot distance control points are placed
    BounceSecondPercentIndent = 80%

    GroundHitFX       = FX_ThrownRockGroundHit
    GroundBounceFX    = FX_ThrownRockBounceHit
  End

  
	Behavior = DualWeaponBehavior ModuleTag_09
		SwitchWeaponOnCloseRangeDistance = 56
	End

 
  Geometry = CYLINDER
  GeometryMajorRadius = 8.0
  GeometryMinorRadius = 8.0
  GeometryHeight = 19.2
  GeometryIsSmall = Yes
  Shadow = SHADOW_DECAL
  ShadowSizeX = 11;
  ShadowSizeY = 11;
  ShadowTexture = ShadowI;
End

;------------------------------------------------------------------------------
; aka Mordor Banner Orc
; Used for Orcs, orc archers, Haradrim, Soldiers of Rhun
Object MordorBannerOrc
  ; *** ART Parameters ***

	SelectPortrait         = UPMordor_Banner
  
	; This is required for garrisoned objects - please put in all objects.
	ButtonImage = BMOrcPit_RedEyeBanner

  Draw = W3DScriptedModelDraw ModuleTag_01

	  OkToChangeModelColor = Yes
	  
	  StaticModelLODMode = Yes
	  
		DefaultModelConditionState
			Model = MUOrcBanr_SKN
			Skeleton = IUBanner_SKL			
		End

		; morph for Haradrim ( see BannerCarrierUpdate below for reference )
		ModelConditionState = USER_2
			Model = MUHaraBanr_SKN
			Skeleton = GUBanner_SKL
		End
								
		; morph for Solders of Rhun ( see BannerCarrierUpdate below for reference )
		ModelConditionState = USER_3
			Model = MUEastBan_SKN
			Skeleton = IUBanner_SKL				
		End

		; ------------------------- Haradrim Anims ------------------------------------
		
		AnimationState							= PASSENGER USER_2
			Animation							= ATKA
				AnimationName					= GUBanner_FLLA
				AnimationMode					= LOOP
			End
		End
		
		AnimationState							= FREEFALL USER_2
			Animation							= ATKA
				AnimationName					= GUBanner_FLYA
				AnimationMode					= LOOP
				AnimationBlendTime				= 5
				AnimationSpeedFactorRange		= 0.5	0.5
			End
		End
		
			
		AnimationState = MOVING FIRING_OR_PREATTACK_A USER_2
			Animation = TrotAndFire
				AnimationName = GUBanner_ATRA
				AnimationMode = LOOP
			End
			Flags = RANDOMSTART
			;ParticleSysBone = None InfantryDustTrails
		End
		
				
		AnimationState        = FIRING_OR_PREATTACK_A USER_2
			Animation           = ATKA
				AnimationName     = GUBanner_ATKA
				AnimationMode     = ONCE
				UseWeaponTiming	  = Yes
			End
			StateName           = Attack
		End
		
		AnimationState				=	MOVING BACKING_UP USER_2
			Animation				=	BackingUp
				AnimationName		= GUBanner_BAKA
				AnimationMode		=	LOOP
				AnimationBlendTime  = 15
			End
			Flags					=	RANDOMSTART
		End
		
		AnimationState        = MOVING USER_2 EMOTION_TERROR
			Animation           = RUNA
				AnimationName     = GUBanner_RUNB
				AnimationMode     = LOOP
                               ; AnimationSpeedFactorRange = .8 .8 ;--- JGS
			End
			Flags               = RANDOMSTART
			;ParticleSysBone     = None InfantryDustTrails
		End

		AnimationState        = MOVING USER_2
			Animation           = RUNA
				AnimationName     = GUBanner_RUNA
				AnimationMode     = LOOP
                                AnimationSpeedFactorRange = .8 .8 ;--- JGS
			End
			Flags               = RANDOMSTART
			;ParticleSysBone     = None InfantryDustTrails
		End
		
		AnimationState        = STUNNED_FLAILING USER_2
			Animation           = StunFlail
				AnimationName     = GUBanner_FLYA
				AnimationMode      = LOOP
			End
			Flags               = RANDOMSTART
		End
		
		AnimationState							= SPLATTED USER_2
			Animation							= ATKA
				AnimationName					= GUBanner_LNDA
				AnimationMode					= ONCE
			End
		End


		AnimationState = DYING AFLAME USER_2
			Animation = Flaming_Death
			AnimationName = GUBanner_MFDA
				AnimationMode = ONCE
			End
		End

		AnimationState        = DYING USER_2
			Animation           = DIEA
				AnimationName     = GUBanner_DIEA
				AnimationMode     = ONCE
			End
		End
		
		AnimationState        = STUNNED_STANDING_UP USER_2
			Animation           = GTPA
				AnimationName     = GUBanner_GTPA
				AnimationMode     = ONCE
				AnimationSpeedFactorRange = 1.5 1.5
			End
		End

		AnimationState        = STUNNED USER_2
			Animation           = LNDA
				AnimationName     = GUBanner_LNDA
				AnimationMode     = ONCE
			End
		End

		
		
		AnimationState = MOVING CLIMBING BACKING_UP
			Animation = Climb Up
				AnimationName = GUBanner_FLLA
				AnimationMode = LOOP_BACKWARDS
			End
		End
		
		AnimationState = MOVING CLIMBING
			Animation = Climb Down
				AnimationName = GUBanner_FLLA
				AnimationMode = LOOP
			End
		End
		
		AnimationState = PASSENGER USER_2
			Animation = Wiggle
				AnimationName = GUBanner_FLLA
				AnimationMode = LOOP
			End
		End
		
		AnimationState = HIT_REACTION HIT_LEVEL_1 USER_2
			Animation = Hit_Level_1_a
				AnimationName = GUBanner_HITA
				AnimationMode = ONCE
			End
		End
		
	AnimationState = WAR_CHANT USER_2
		Animation = Chant
			AnimationName = GUBanner_TNTA
			AnimationMode = LOOP
		End
	End
		
;---emotion animations

		
		AnimationState					=	EMOTION_ALERT EMOTION_AFRAID USER_2
			Animation					=	Apprehensive
				AnimationName			= GUBanner_APPA
				AnimationMode			=	LOOP	;Change this to ONCE if adding additional anims
			End
		End	
		AnimationState					= EMOTION_AFRAID USER_2
			Animation					= FERA
				AnimationName			= GUBanner_FERA
				AnimationMode			= LOOP
			End
		End
				

		
		AnimationState					= MOVING EMOTION_TERROR EMOTION_LOOK_TO_SKY USER_2
			Animation					= TerrorFromTheSky
				AnimationName			= GUBanner_RUNB
				AnimationMode			= LOOP
			End
		End

		AnimationState							= EMOTION_TAUNTING USER_2
			Animation							= TNTA
				AnimationName					= GUBanner_TNTA
				AnimationMode					= LOOP
			End
		End
; No Pointing Anim
;		AnimationState							= EMOTION_POINTING USER_2
;			Animation							= Pointing1
;				AnimationName					= GUBanner_PNTA
;				AnimationMode					= LOOP
;			End
;		End
		AnimationState							= EMOTION_CELEBRATING USER_2
			Animation                           = CHRA
				AnimationName					= GUBanner_CHRA
				AnimationMode					= LOOP
			End
			;Flags								= RESTART_ANIM_WHEN_COMPLETE
		End
		
			
		
		
		AnimationState							= EMOTION_ALERT USER_2
			Animation							= ALERT
				AnimationName					= GUBanner_IDLA
				AnimationMode					= LOOP
			End
			Flags								= RESTART_ANIM_WHEN_COMPLETE RANDOMSTART
		End
	
	
	
	
		
		AnimationState				=	SELECTED USER_2
			StateName				=	STATE_Selected2
			Animation				=	ATNB
				AnimationName		=	GUBanner_ATNB
				AnimationMode		=	LOOP
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Idle2"   then CurDrawableSetTransitionAnimState("TRANS_Idle_to_Selected2") return end
			EndScript
		End
	
	
		AnimationState				=	USER_2
			StateName				=	Idle2
			Animation				=	IdleB
				AnimationName		=	GUBanner_IDLB
				AnimationMode		=	LOOP
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Selected2"  then CurDrawableSetTransitionAnimState("TRANS_Selected_to_Idle2") return end
			EndScript		
		End
	

	
		
		
		
			    

		
		
		
		; ------------------------- End Haradrim Anims ------------------------------------	
		
		AnimationState							= PASSENGER
			Animation							= FLLA
				AnimationName					= IUBanner_FLLA
				AnimationMode					= LOOP
			End
		End
		
		AnimationState							= FREEFALL
			Animation							= FLYA
				AnimationName					= IUBanner_FLYA
				AnimationMode					= LOOP
				AnimationBlendTime				= 10
				AnimationSpeedFactorRange		= 0.5	0.5
			End
		End
		
		IdleAnimationState
			Animation = IDLD
				AnimationName = IUBanner_IDLD
				AnimationMode = ONCE
				AnimationPriority = 5
				AnimationBlendTime  = 15
			End
			Flags               = RESTART_ANIM_WHEN_COMPLETE
			StateName = Idle
		    BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "CloseRange"	then CurDrawableSetTransitionAnimState("Trans_Sword_To_Idle") return end
				if Prev == "STATE_Selected"   then CurDrawableSetTransitionAnimState("TRANS_Selected_to_Idle") return end
			EndScript
		End
		
;		AnimationState				=	MOVING BACKING_UP
;			Animation				=	BackingUp
;				AnimationName		= IUBanner_BAKA
;				AnimationMode		=	LOOP
;			End
;			Flags = RANDOMSTART
;		End


		AnimationState = MOVING FIRING_OR_PREATTACK_A
			Animation = TrotAndFire
				AnimationName = IUBanner_ATRA
				AnimationMode = LOOP
			End
			Flags = RANDOMSTART
			;ParticleSysBone = None InfantryDustTrails
		End
		
		AnimationState = MOVING BACKING_UP EMOTION_TERROR
			Animation = Moving
				AnimationName = IUBanner_BAKA
				AnimationMode = LOOP
				AnimationSpeedFactorRange 1.4 1.4
			End
			StateName = Moving
			Flags = RANDOMSTART
;			ParticleSysBone = None InfantryDustTrails
		End

		AnimationState = MOVING EMOTION_TERROR
			Animation = Moving
				AnimationName = IUBanner_RUNA
				AnimationMode = LOOP
			End
			StateName = Moving
			Flags = RANDOMSTART
;			ParticleSysBone = None InfantryDustTrails
		End
		
		AnimationState = MOVING USER_3 ALTERNATE_FORMATION
			Animation = MovingSlowInPorcupine
				AnimationName = IUBanner_RUNA
				AnimationMode = LOOP
                AnimationSpeedFactorRange = .5 .5
			End
			StateName = Moving
			Flags = RANDOMSTART
;			ParticleSysBone = None InfantryDustTrails
		End
		
		AnimationState = MOVING
			Animation = Moving
				AnimationName = IUBanner_RUNA
				AnimationMode = LOOP
			End
			StateName = Moving
			Flags = RANDOMSTART
;			ParticleSysBone = None InfantryDustTrails
		End
		
    AnimationState = STUNNED_FLAILING
 			Animation = Flying
				AnimationName = IUBanner_FLYB
	      AnimationMode = LOOP
			End
      Flags = RANDOMSTART
    End


    AnimationState = DYING SPLATTED
 			Animation = Splattered_On_Ground_1
				AnimationName = IUBanner_LNDA
	      AnimationMode = ONCE
			End
    End

     AnimationState = DYING AFLAME
			Animation = Flaming_Death
	      AnimationName = MUHarOvr_MFDA
		    AnimationMode = ONCE
			End
    End
    
    AnimationState = DYING WEAPONSTATE_CLOSE_RANGE
			Animation = Dying_1
	      AnimationName = IUBanner_DIEC
		    AnimationMode = ONCE
			End
			Animation = Dying_2
	      AnimationName = IUBanner_DIED
		    AnimationMode = ONCE
			End
    End

    AnimationState = DYING
			Animation = Dying_1
	      AnimationName = IUBanner_DIEA
		    AnimationMode = ONCE
			End
			Animation = Dying_2
	      AnimationName = IUBanner_DIEB
		    AnimationMode = ONCE
			End
    End
 
    ; --- stunned anims
    AnimationState = STUNNED_STANDING_UP
 			Animation = Standing_Back_Up
				AnimationName = IUBanner_GTPA
	      AnimationMode = ONCE
	      AnimationSpeedFactorRange = 1.5 1.5
			End
    End
    AnimationState = STUNNED
 			Animation = Splattered_On_Ground_1
				AnimationName = IUBanner_LNDA
	      AnimationMode = ONCE
			End
    End

    TransitionState = Trans_Idle_To_Sword
			Animation = Transition
	      AnimationName = IUBanner_STHA
		    AnimationMode = ONCE
			End
    End

    TransitionState = Trans_Moving_To_Sword
			Animation = Transition
			  AnimationName = IUBanner_STHC
				AnimationMode = ONCE
			End
    End

    TransitionState = Trans_Sword_To_Idle
		Animation = Transition
			AnimationName = IUBanner_STHB
		    AnimationMode = ONCE
		End
    End
    
    
    
    

; --------- With Sword ------------

	AnimationState = FIRING_OR_PREATTACK_A WEAPONSTATE_CLOSE_RANGE
		Animation = ATKA1
			AnimationName = IUBanner_ATKA
			AnimationMode = ONCE
			UseWeaponTiming		= Yes
		End
		StateName = CloseRange
	End
	
	AnimationState				=	SELECTED
		StateName				=	STATE_Selected
		Animation				=	ATNB
			AnimationName		=	IUBanner_IDLA
			AnimationMode		=	LOOP
		End
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "Idle"   then CurDrawableSetTransitionAnimState("TRANS_Idle_to_Selected") return end
		EndScript
	End
 
    
    
    TransitionState					=	TRANS_Idle_to_Selected
		Animation					=	ATNA
			AnimationName			=	IUBanner_ATNA
			AnimationMode			=	ONCE
		End
	End
	
	
	TransitionState					=	TRANS_Selected_to_Idle
		Animation					=	ATNB
			AnimationName			=	IUBanner_ATNB
			AnimationMode			=	ONCE
		End
	End
	
	AnimationState = WAR_CHANT
		Animation = Chant
			AnimationName = IUBanner_IDLC ;maybe TNTA
			AnimationMode = LOOP
		End
	End
	
	;-emotions--
	AnimationState							= EMOTION_AFRAID
		Animation							= FERA
			AnimationName					= IUBanner_FERA
			AnimationMode					= LOOP
		End
		Flags = RANDOMSTART
	End

    AnimationState							= EMOTION_TAUNTING
		Animation							= TNTA
			AnimationName					= IUBanner_IDLC
			AnimationMode					= LOOP
		End
	End
	
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
; Just let the rest of his horde point
;	AnimationState							= EMOTION_POINTING
;		Animation							= Pointing1
;			AnimationName					= IUBanner_PNTA
;			AnimationMode					= LOOP
;		End
;	End
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

	AnimationState							= EMOTION_CELEBRATING
		Animation                           = CHRA
			AnimationName					= IUBanner_CHRA
			AnimationMode					= ONCE
		End
	End
	
	AnimationState							= EMOTION_ALERT
		Animation							= ALERT
			AnimationName					= IUBanner_IDLB
			AnimationMode					= LOOP
		End
		Flags								= RESTART_ANIM_WHEN_COMPLETE RANDOMSTART
	End
	
	AnimationState = WEAPONSTATE_CLOSE_RANGE
 		Animation = Close_Range_Idle
				AnimationName = IUBanner_IDLB
				AnimationMode = ONCE
		End
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "Moving" then CurDrawableSetTransitionAnimState("Trans_Moving_To_Sword") return end
			if Prev == "Idle"   then CurDrawableSetTransitionAnimState("Trans_Idle_To_Sword") return end
		EndScript
		StateName = CloseRange
    End
   
   	;	AnimationState        = SELECTED
	;		StateName           = STATE_Selected
	;		Animation = IDLA
	;			AnimationName = IUBanner_IDLA
	;			AnimationMode = ONCE
	;		End
	;		Animation = IDLC
	;			AnimationName = IUBanner_IDLC
	;			AnimationMode = ONCE
	;		End
	;		Flags               = RESTART_ANIM_WHEN_COMPLETE
	;		BeginScript
	;			Prev = CurDrawablePrevAnimationState()
	;			if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_Idle_To_Selected") end
	;			if Prev == "CloseRange"	then CurDrawableSetTransitionAnimState("Trans_Sword_To_Idle") return end
	;		EndScript
	;	End
    
    

    
    
  End
 
  ; ***DESIGN parameters ***
  Side = Mordor
  EditorSorting = UNIT
	ThreatLevel = 1.0
  TransportSlotCount = 1
  WeaponSet
    Conditions = None 
    Weapon = PRIMARY    MordorWarriorAxe
    AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
  End

  ArmorSet
    Conditions      = None
    Armor           = SoldierArmor
    DamageFX        = NormalDamageFX
  End
  BuildCost 		= MORDOR_BANNER_BUILDCOST
  BuildTime			= MORDOR_BANNER_BUILDTIME
  
  VisionRange = VISION_STANDARD_MELEE
  ShroudClearingRange = SHROUD_CLEAR_STANDARD
  
  BountyValue       = MORDOR_BANNER_BOUNTY_VALUE
  DisplayName = OBJECT:MordorBanner
  CrushableLevel = 0  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CrusherLevel = 0 ;What can I crush?: 0 = small animals, 1 = infantry, 2 = trees, 3 = vehicles
 	CrushRevengeWeapon = BasicInfantryCrushRevenge

;  CommandSet = GondorFighterCommandSet
  CommandSet = MordorBannerOrcCommandSet
  CommandPoints = 0


	; *** AUDIO Parameters ***;

	VoiceAttack				= MordorBannerOrcVoiceAttack
	VoiceAttack2			= OrcVoiceAttack2
	VoiceAttackStructure		= MordorBannerOrcVoiceAttack
	VoiceAttackMachine		= MordorBannerOrcVoiceAttack
	VoiceAttackCharge			= MordorBannerOrcVoiceAttack
	VoiceCombineWithHorde 		= IsengardBannerVoiceJoin
	VoiceCreated			= CampOrcCreateRedEyeBanner
	VoiceFullyCreated 		= CampOrcCreateRedEyeBanner
	VoiceMove				= MordorBannerOrcVoiceMove
	VoiceMove2				= OrcVoiceMove2
	VoiceMoveWhileAttacking		= MordorBannerOrcVoiceMove
	VoiceMoveToCamp			= MordorBannerOrcVoiceMove
	VoicePriority			= 9
	VoiceSelect				= MordorBannerOrcVoiceSelect
	VoiceSelect2			= RohanBannerVoiceSelect2
	VoiceGuard				= MordorBannerOrcVoiceMove
	

	SoundImpact				= ImpactHorse

	EvaEventDamagedOwner		= UnitUnderAttack 			;Eva event to trigger when unit is damaged

	Behavior = LargeGroupAudioUpdate ModuleTag_LGAU				; Tie into LargeGroupAudio system
		Key = Orc_Infantry Mordor_Banner
	End


  ; *** ENGINEERING Parameters ***

  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER CAN_USE_SIEGE_TOWER SCORE THROWN_OBJECT BANNER GRAB_AND_DROP IGNORES_SELECT_ALL
 
  Body = ActiveBody ModuleTag_02
    MaxHealth         = MORDOR_BANNER_HEALTH
    MaxHealthDamaged  = MORDOR_BANNER_HEALTH_DAMAGED
    ;RecoveryTime      = MORDOR_BANNER_HEALTH_RECOVERY_TIME
  End
 
  Behavior = AIUpdateInterface ModuleTag_03
    AutoAcquireEnemiesWhenIdle = No
    MoodAttackCheckRate        = 500
    HoldGroundCloseRangeDistance = 40
    AttackPriority				= 	AttackPriority_Infantry
    AILuaEventsList				=	MordorFighterFunctions
	FadeOnPortals				= Yes
  End

	Behavior = EmotionTrackerUpdate	Module_EmotionTracker
		TauntAndPointDistance		=	350		; max distance to taunted/pointed objet
		TauntAndPointUpdateDelay	=	1000	; how often scan (milliseconds)
		TauntAndPointExcluded		=	NONE
		AfraidOf					=	NONE +RohanTreeBerd +GondorGwaihir +RohanEntFir +RohanEntAsh +RohanEntBirch +MordorCaveTroll +MordorMountainTroll +MordorDrummerTroll +MordorFellBeast +MordorMumakil;Must be SCARY kindof as well.
		AlwaysAfraidOf				=	NONE +MordorBalrog +RohanOathbreaker ;+MordorWitchKing +MordorWitchKingOnFellBeast 
		PointAt						=	NONE +GondorGwaihir 

		HeroScanDistance			=	150
		FearScanDistance			=	250

		AddEmotion	=	Terror_Base
		AddEmotion	=	Doom_Base
		AddEmotion	=	UncontrollableFear_Base_Evil
		AddEmotion	=	FearIdle_Base
		AddEmotion	=	FearBusy_Base
		AddEmotion	=	Point_Base
		AddEmotion	=	Taunt_Base	
		AddEmotion	=	CheerIdle_Base
		AddEmotion	=	CheerBusy_Base
		AddEmotion	=	HeroCheerIdle_Base
		AddEmotion	=	HeroCheerBusy_Base
		AddEmotion	=	Alert_Base
	End	
  
  LocomotorSet
    Locomotor = HumanLocomotor
    Condition = SET_NORMAL
    Speed     = NORMAL_EVIL_INFANTRY_MEMBER_SPEED
  End

  Behavior = PhysicsBehavior ModuleTag_04
    GravityMult = 1.0
	ShockStunnedTimeLow		= 1400	;msec
	ShockStunnedTimeHigh	= 2400	;msec
	ShockStandingTime		= 2133	;msec
  End
 
  Behavior = SlowDeathBehavior ModuleTag_05
    DeathTypes = ALL -KNOCKBACK
    SinkDelay = 3000
    SinkRate = 0.40     ; in Dist/Sec
    DestructionDelay = 8000
    Sound = INITIAL OrcVoiceDie				;MordorBannerOrcVoiceDie
  End
 
  Behavior = SquishCollide ModuleTag_06
    ;nothing
  End
 
  Behavior = SlowDeathBehavior ModuleTag_07
    ; Same as normal death, but no sound (sound already played by SoundImpact = ... )
    DeathTypes = NONE +KNOCKBACK
    SinkDelay = 3000
    SinkRate = 0.40     ; in Dist/Sec
    DestructionDelay = 8000
    Sound = INITIAL OrcVoiceDie				;MordorBannerOrcVoiceDie
  End

  Behavior = BezierProjectileBehavior ModuleTag_08 ; Module starts asleep, and wakes up when thrown.
    FirstHeight = 24  ; Height of Bezier control points above highest intervening terrain
    SecondHeight = 24
    FirstPercentIndent = 30% ; Percentage of shot distance control points are placed
    SecondPercentIndent = 70%
    TumbleRandomly = Yes

    CrushStyle = Yes ; I don't detonate, I just hit
    DieOnImpact = Yes
    BounceCount = 1   ; When I hit the ground, I'll arc again
    BounceDistance = 40 ; this far
    BounceFirstHeight = 24  ; Height of Bezier control points above highest intervening terrain
    BounceSecondHeight = 24
    BounceFirstPercentIndent = 20% ; Percentage of shot distance control points are placed
    BounceSecondPercentIndent = 80%

    GroundHitFX       = FX_ThrownRockGroundHit
    GroundBounceFX    = FX_ThrownRockBounceHit
  End

  ; Stealths like the General's Pathfinder
  ; Well, now it doesn't
  ;Behavior = StealthUpdate ModuleTag_09
  ;  StealthDelay                = 0           ; msec
  ;  StealthForbiddenConditions  = MOVING ; stays stealthy while attacking
  ;  FriendlyOpacityMin          = 10.0%
  ;  FriendlyOpacityMax          = 60.0%
  ;	 PulseFrequency              = 750   ; msec
  ;  MoveThresholdSpeed          = 3
  ;  OrderIdleEnemiesToAttackMeUponReveal  = Yes
  ;End

  ; Detects stealth like the General's Pathfinder
;  Behavior = StealthDetectorUpdate ModuleTag_10
;    DetectionRate   = 500   ; how often to rescan for stealthed things in my sight (msec)
;    ;DetectionRange = ??? ; enable this for independant balancing!
;    CanDetectWhileGarrisoned  = No ;Garrisoned means being in a structure that you units can shoot out of.
;    CanDetectWhileContained   = No ;Contained means being in a transport or tunnel network.
;  End
 
	;;; COMBINE WITH NEAREST HORDE SPECIAL POWER ;;;
	Behavior = CombineHordeSpecialPower ModuleTag_CombineWithNearest
		SpecialPowerTemplate    = SpecialAbilityCombineWithNearest
		InitiateSound = MordorBannerOrcVoiceJoin
		ScanRange = 15000.0			;making it large so it scans an entire map
	End
 
	;/////////////////////////////////////////////////////////
	;// BannerCarrierUpdate module
	;/////////////////////////////////////////////////////////
	Behavior = BannerCarrierUpdate BannerCarrierUpdateModuleTag
		IdleSpawnRate			= 10000							; spawn a new member every n seconds when idle (in miliseconds)
		MeleeFreeUnitSpawnTime		= 20000							; n miliseconds units must not have been fighting to be able to spawn units when idle (in miliseconds)
		DiedRespawnTime			= 10000							; how much time must pass after Banner Carrier dies before horde can spawn another
		MeleeFreeBannerReSpawnTime	= 20000							; how much time since horde has been fighting before a new Banner Carrier can be respawned
		
		BannerMorphFX		= FX_BannerCarrierMorph					; name of particle FX to use when the BannerCarrier morphs into the dest unit type
		UnitSpawnFX			= FX_BannerCarrierSpawnUnit				; name of particle FX to use when the BannerCarrier spawns a new unit
		
		; Depending on the unit type selected, we will morph into one of the following 
		; unitTypes by setting the appropriate model condition state
		
		; Red Eye Banner - no morph needed
		;MorphCondition		= UnitType:MordorFighter				ModelState:"USER_1"
		;MorphCondition		= UnitType:MordorArcher					ModelState:"USER_2"
		
		; Harad Banner
		MorphCondition		= UnitType:MordorHaradrimArcher			ModelState:"USER_2"
		MorphCondition		= UnitType:MordorHaradrim				ModelState:"USER_2"

		; Rhun Banner
		MorphCondition		= UnitType:MordorEasterling				ModelState:"USER_3"
		
		; show/hide subobjects based on various experience levels
		;ExpLevelDraw		= Level:1		SubObject:Hide:Adornment		SubObject:Hide:Streamers			SubObject:Hide:Glow
		;ExpLevelDraw		= Level:2		SubObject:Hide:Adornment		SubObject:Hide:Streamers			SubObject:Hide:Glow
		;ExpLevelDraw		= Level:3		SubObject:Hide:Adornment		SubObject:Hide:Streamers			SubObject:Hide:Glow
		;ExpLevelDraw		= Level:4		SubObject:Hide:Adornment		SubObject:Hide:Streamers			SubObject:Hide:Glow
		
		;ExpLevelDraw		= Level:5		SubObject:Show:Adornment		SubObject:Show:Streamers			SubObject:Hide:Glow
		;ExpLevelDraw		= Level:6		SubObject:Show:Adornment		SubObject:Show:Streamers			SubObject:Hide:Glow	
		;ExpLevelDraw		= Level:7		SubObject:Show:Adornment		SubObject:Show:Streamers			SubObject:Hide:Glow	
		;ExpLevelDraw		= Level:8		SubObject:Show:Adornment		SubObject:Show:Streamers			SubObject:Hide:Glow	
		;ExpLevelDraw		= Level:9		SubObject:Show:Adornment		SubObject:Show:Streamers			SubObject:Hide:Glow
		
		;ExpLevelDraw		= Level:10		SubObject:Show:Adornment		SubObject:Show:Streamers			SubObject:Show:Glow
	End
	
  Geometry = CYLINDER
  GeometryMajorRadius = 8.0
  GeometryMinorRadius = 8.0
  GeometryHeight = 19.2
  GeometryIsSmall = Yes
  Shadow = SHADOW_DECAL
  ShadowSizeX = 19;
  ShadowSizeY = 19;
  ShadowTexture = ShadowI;
End

;------------------------------------------------------------------------------
; aka Tribute Cart
Object MordorPorter
  ; *** ART Parameters ***
  SelectPortrait         = UPMordor_Porter
  ButtonImage = BIArmory_Porter
	Draw = W3DTruckDraw ModuleTag_01

	  OkToChangeModelColor = Yes
	  
;   StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD
		
    DefaultModelConditionState
      Model             = MUOrcPrtr_SKN
      Skeleton			= MUOrcPrtr_SKL
    End

		IdleAnimationState
			Animation				= IDLA
				AnimationName		= MUOrcPrtr_IDLA
				AnimationMode		= ONCE
				AnimationPriority   = 10
			End
			Animation				= IDLB ; fidget. Search animation
				AnimationName		= MUOrcPrtr_IDLB
				AnimationMode		= ONCE
				AnimationPriority   = 1
			End
			Flags					= RESTART_ANIM_WHEN_COMPLETE			
		End
		AnimationState				= MOVING WANDER
			Animation				= WLKA
				AnimationName		= MUOrcPrtr_WLKA
				AnimationMode		= LOOP
			End
			Flags					= RANDOMSTART
			;ParticleSysBone			= None InfantryDustTrails
		End
	
		AnimationState				= MOVING
			Animation				= RUNNING
				AnimationName		= MUOrcPrtr_RUNA
				AnimationMode		= LOOP
			End
			Flags					= RANDOMSTART
			;ParticleSysBone			= None InfantryDustTrails
		End

		AnimationState				= DYING
			Animation				= DIEA
				AnimationName		= MUOrcPrtr_DIEA
				AnimationMode		= ONCE
			End
		End
				
		LeftFrontTireBone			= Wheel_L01
		RightFrontTireBone			= Wheel_R01
		;LeftRearTireBone			= WHEEL_L01
		;RightRearTireBone			= WHEEL_R01
		TireRotationMultiplier		= 0.2
	End

	; ***DESIGN parameters ***
	Side = Mordor
	EditorSorting					=	UNIT
	ThingClass						= HORDE_UNIT
	CommandPoints = 1

	TransportSlotCount = 1
	ArmorSet
		Conditions					= None
		Armor						= NoArmor
		DamageFX					= NormalDamageFX
	End
	VisionRange = 120.0
	DisplayName = OBJECT:MordorPorter
	CrushableLevel = 0  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
	CrusherLevel = 0 ;What can I crush?: 0 = small animals, 1 = infantry, 2 = trees, 3 = vehicles
	
	CommandSet = PorterCommandSet


	; *** AUDIO Parameters ***;

	;VoiceAmbushed			= 
	VoiceCreated			= OrcPorterGenericVoiceSalute		;GondorPorterFlameVoiceCreateFlame
	VoiceFullyCreated 		= OrcPorterGenericVoiceSalute
	;VoiceFear 			= 
	VoiceMove			= OrcPorterGenericVoiceMove		;OrcPorterVoiceMove
	VoiceMove2			= OrcVoiceMove2
	VoiceMoveToCamp			= OrcPorterGenericVoiceMove
	VoicePriority			= 5
	;VoiceRetreatToCastle		= 
	VoiceSelect			= OrcPorterGenericVoiceSelect		;OrcPorterVoiceSelect
	VoiceGuard			= OrcPorterGenericVoiceMove
	

	SoundImpact			= ImpactHorse

;OrcPorterGenericVoiceDeliver

	;UnitSpecificSounds
	;End

	EvaEventDamagedOwner = PorterUnderAttack 	;Eva event to trigger when unit is damaged
	EvaEventDieOwner = PorterMordorDie		;Eva event to trigger on unit's death. NOTICE THAT this is only for permanent deaths
							;For deaths you can respawn from, use the DeathFX


	; *** ENGINEERING Parameters ***
	RadarPriority = UNIT
	KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE THROWN_OBJECT DOZER PORTER
	
	Body = ActiveBody ModuleTag_02
		MaxHealth         = 10                  ;BALANCE Townsman Health
		MaxHealthDamaged  = 5
		;RecoveryTime      = 5000
	End
	
	Behavior = WorkerAIUpdate ModuleTag_10
		RepairHealthPercentPerSecond	= 0.2%    ; % of max health to repair each second
		BoredTime						= 5000  ; in milliseconds
		BoredRange						= 120   ; when bored, we look this far away to do something 
		AILuaEventsList					= OrcPorterFunctions
		SpecialContactPoints		   = Repair
	End

	LocomotorSet
		Locomotor = PorterLocomotor
		Condition = SET_NORMAL 
		Speed     = 32
	End

	LocomotorSet
		Locomotor = PorterLocomotor
		Condition = SET_WANDER
		Speed     = 32
	End 

	Behavior = PhysicsBehavior ModuleTag_04
		GravityMult = 1.0
	End
	
	Behavior = SlowDeathBehavior ModuleTag_05
		DeathTypes = ALL -CRUSHED
		SinkDelay = 3000
		SinkRate = 0.40     ; in Dist/Sec
		DestructionDelay = 8000
		DeathFlags = DEATH_1
		Sound = INITIAL OrcVoiceDie			;GondorPorterDie
	End
	
	Behavior = SlowDeathBehavior ModuleTag_05b
		DeathTypes = NONE +CRUSHED
		SinkDelay = 3000
		SinkRate = 0.40     ; in Dist/Sec
		DestructionDelay = 8000
		DeathFlags = DEATH_2
		Sound = INITIAL OrcVoiceDie
	End
	
	Behavior = SquishCollide ModuleTag_06
		;nothing
	End
	
	Behavior = BezierProjectileBehavior ModuleTag_08 ; Module starts asleep, and wakes up when thrown.
		FirstHeight = 24  ; Height of Bezier control points above highest intervening terrain
		SecondHeight = 24
		FirstPercentIndent = 30% ; Percentage of shot distance control points are placed
		SecondPercentIndent = 70%
		TumbleRandomly = Yes

		CrushStyle = Yes ; I don't detonate, I just hit
		DieOnImpact = Yes
		BounceCount = 1   ; When I hit the ground, I'll arc again
		BounceDistance = 40 ; this far
		BounceFirstHeight = 16  ; Height of Bezier control points above highest intervening terrain
		BounceSecondHeight = 16
		BounceFirstPercentIndent = 20% ; Percentage of shot distance control points are placed
		BounceSecondPercentIndent = 80%

		GroundHitFX       = FX_ThrownRockGroundHit
		GroundBounceFX    = FX_ThrownRockBounceHit
	End
	
	Behavior				= SpecialPowerModule ModuleTag_09
		SpecialPowerTemplate		= SpecialAbilityGiveUpgrade
		UpdateModuleStartsAttack	= Yes
		InitiateSound			= OrcPorterGenericVoiceDeliver				;GondorPorterFlameVoiceDeliverFlame
	End
	
	Behavior = SubObjectsUpgrade Arrow_Upgrade
		TriggeredBy		= Upgrade_IsengardFlamingArrows
		HideSubObjects	= Forged_Blade
		ShowSubObjects	= ARROW_UPGRADE FireArowTip
	End
	Behavior = SubObjectsUpgrade Sword_Upgrade
		TriggeredBy		= Upgrade_IsengardForgedBlades
		HideSubObjects	= FireArowTip 
		ShowSubObjects	= SWORD_UPGRADES Forged_Blade
	End
	Behavior = SubObjectsUpgrade Armor_Upgrade
		TriggeredBy		= Upgrade_IsengardHeavyArmor
		HideSubObjects	= FireArowTip Forged_Blade
		ShowSubObjects	= ARMOR_UPGRADE
	End

	Behavior					= GiveUpgradeUpdate ModuleTag_11
		SpecialPowerTemplate	= SpecialAbilityGiveUpgrade
		StartAbilityRange		= 8.0
		UnpackTime				= 700 ; Pull out arrow
		PreparationTime			= 100 ; Quick shot
		PersistentPrepTime		= 500 ; looping the quick shot
		PackTime				= 233 ; back to idle
		ApproachRequiresLOS		= No
		SpawnOutFX				=	FX_RampageDust
	End

	Geometry = BOX
	GeometryMajorRadius = 20.0
	GeometryMinorRadius = 6.00
	GeometryHeight = 20.0
	GeometryIsSmall = Yes
	Shadow = SHADOW_DECAL
	ShadowSizeX = 27;
	ShadowSizeY = 27;
	ShadowTexture = ShadowI;
End


;------------------------------------------------------------------------------
Object IsengardPorterInterface
	; *** ART Parameters ***
	SelectPortrait         = UPMordor_Porter

    ; ButtonImage for Porter
    ButtonImage = BIArmory_Porter ; temp!!
	
	Draw = W3DTruckDraw ModuleTag_01

		;StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD
	
		OkToChangeModelColor = Yes
		  
		DefaultModelConditionState
			Model					= MUOrcPrtr_SKN
			Skeleton				= MUOrcPrtr_SKL
		End

		IdleAnimationState
			Animation				= IDLA
				AnimationName		= MUOrcPrtr_IDLA
				AnimationMode		= ONCE
				AnimationPriority	= 10
			End
			Animation				= IDLB
				AnimationName		= MUOrcPrtr_IDLB
				AnimationMode		= ONCE
				AnimationPriority	= 1
			End
			Flags					= RESTART_ANIM_WHEN_COMPLETE			
		End

		AnimationState				= DYING DEATH_1
			Animation				= DIEB
				AnimationName		= MUOrcPrtr_DIEB
				AnimationMode		= MANUAL
			End
		End

		AnimationState				= DYING
			Animation				= DIEA
				AnimationName		= MUOrcPrtr_DIEA
				AnimationMode		= ONCE
			End
		End

		AnimationState				= MOVING WANDER
			Animation				= WLKA
				AnimationName		= MUOrcPrtr_WLKA
				AnimationMode		= LOOP
			End
			Flags					= RANDOMSTART
			;ParticleSysBone			= None InfantryDustTrails
		End
		
		AnimationState				= MOVING BACKING_UP
			Animation				= BackingUp
				AnimationName		= MUOrcPrtr_SKL.MUOrcPrtr_BAKA
				AnimationMode		= LOOP
			End
			Flags = RANDOMSTART
		End
	
		AnimationState				= MOVING
			Animation				= RUNNING
				AnimationName		= MUOrcPrtr_RUNA
				AnimationMode		= LOOP
			End
			Flags					= RANDOMSTART
			;ParticleSysBone		= None InfantryDustTrails
		End		
				
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;  NO FEAR
;		;-emotions--
;		AnimationState							= EMOTION_AFRAID
;			Animation							= FERA
;				AnimationName					= MUOrcPrtr_SKL.MUOrcPrtr_FERA
;				AnimationMode					= LOOP
;			End
;			Flags = RANDOMSTART
;		End
;		AnimationState							= EMOTION_TAUNTING
;			Animation							= TNTA
;				AnimationName					= MUOrcPrtr_SKL.MUOrcPrtr_TNTA
;				AnimationMode					= LOOP
;			End
;		End
;		AnimationState							= EMOTION_POINTING
;			Animation							= Pointing1
;				AnimationName					= MUOrcPrtr_SKL.MUOrcPrtr_PNTA
;				AnimationMode					= LOOP
;			End
;		End
;		AnimationState							= EMOTION_CELEBRATING
;			Animation                           = CHRA
;				AnimationName					= MUOrcPrtr_SKL.MUOrcPrtr_CHRA
;				AnimationMode					= ONCE
;			End
;		End
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
		
		LeftFrontTireBone			= Wheel_L01
		RightFrontTireBone			= Wheel_R01
		;LeftRearTireBone			= WHEEL_L01
		;RightRearTireBone			= WHEEL_R01
		TireRotationMultiplier		= 0.2
	End

	; ***DESIGN parameters ***
	Side = Isengard
	EditorSorting					=	UNIT
	ThingClass						= HORDE_UNIT
	CommandPoints = 0
	TransportSlotCount = 1
	
	ArmorSet
		Conditions					= None
		Armor						= NoArmor
		DamageFX					= NormalDamageFX
	End

	VisionRange = GONDOR_PORTER_VISION_RANGE
	DisplayName = OBJECT:IsengardPorter
	CrushableLevel = 0  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
	CrusherLevel = 0 ;What can I crush?: 0 = small animals, 1 = infantry, 2 = trees, 3 = vehicles
	ImmuneToShockwave = yes
	IsTrainable = No
	
	CommandSet = PorterCommandSet


	; *** AUDIO Parameters ***;

	;VoiceAmbushed			= 
	VoiceCreated			= OrcPorterGenericVoiceSalute		;GondorPorterFlameVoiceCreateFlame
	VoiceFullyCreated 		= OrcPorterGenericVoiceSalute
	;VoiceFear 			= 
	VoiceMove			= OrcPorterGenericVoiceMove		;GondorPorterFlameVoiceMove
	VoiceMove2			= OrcVoiceMove2
	VoiceMoveToCamp			= OrcPorterGenericVoiceMove
	VoicePriority			= 5
	;VoiceRetreatToCastle		= 
	VoiceSelect			= OrcPorterGenericVoiceSelect		;GondorPorterFlameVoiceSelect
	VoiceSelect2			= OrcPorterVoiceSelect2
	VoiceGuard			= OrcPorterGenericVoiceMove
	

	SoundImpact			= ImpactHorse

	;UnitSpecificSounds
	;End

	EvaEventDamagedOwner = PorterUnderAttack 	;Eva event to trigger when unit is damaged
	EvaEventDieOwner = PorterIsengardDie		;Eva event to trigger on unit's death. NOTICE THAT this is only for permanent deaths
							;For deaths you can respawn from, use the DeathFX


	; *** ENGINEERING Parameters ***
	RadarPriority = UNIT
	KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE THROWN_OBJECT PORTER IGNORES_SELECT_ALL
	
	Body = ActiveBody ModuleTag_02
		MaxHealth         = GONDOR_PORTER_HEALTH                  ;BALANCE Townsman Health
		MaxHealthDamaged  = GONDOR_PORTER_HEALTH_DAMAGED
		;RecoveryTime      = GONDOR_PORTER_HEALTH_RECOVERY_TIME
	End
	
  	Behavior = AIUpdateInterface ModuleTag_10
		AILuaEventsList					= OrcPorterFunctions
	End

	LocomotorSet
		Locomotor = PorterLocomotor
		Condition = SET_NORMAL 
		Speed     = 32
	End

	LocomotorSet
		Locomotor = PorterLocomotor
		Condition = SET_WANDER
		Speed     = 32
	End 

	Behavior = PhysicsBehavior ModuleTag_04
		GravityMult = 1.0
	End
	
	Behavior = SlowDeathBehavior SlowDeathBehaviorModuleTag_1
		DeathTypes = ALL -CRUSHED -EXPLODED -KNOCKBACK -DETONATED -SPLATTED
		SinkDelay = 3000
		SinkRate = 1.40     ; in Dist/Sec
		DestructionDelay = 13000
		Sound = INITIAL OrcVoiceDie		;MordorBannerOrcVoiceDie
	End

	Behavior = SlowDeathBehavior SlowDeathBehaviorModuleTag_2
		DeathTypes = NONE +CRUSHED +EXPLODED +KNOCKBACK +DETONATED +SPLATTED
		SinkDelay = 3000
		SinkRate = 1.4     ; in Dist/Sec
		DestructionDelay = 13000
		DeathFlags = DEATH_1
		FX = INITIAL FX_CatapultDieExplosion
		Sound = INITIAL OrcVoiceDie		;MordorBannerOrcVoiceDie
	End
	
	Behavior = SquishCollide ModuleTag_06
		;nothing
	End
	
	Behavior = BezierProjectileBehavior ModuleTag_08 ; Module starts asleep, and wakes up when thrown.
		; 
		FirstHeight = 24  ; Height of Bezier control points above highest intervening terrain
		SecondHeight = 24
		FirstPercentIndent = 30% ; Percentage of shot distance control points are placed
		SecondPercentIndent = 70%
		TumbleRandomly = Yes

		CrushStyle = Yes ; I don't detonate, I just hit
		DieOnImpact = Yes
		BounceCount = 1   ; When I hit the ground, I'll arc again
		BounceDistance = 40 ; this far
		BounceFirstHeight = 16  ; Height of Bezier control points above highest intervening terrain
		BounceSecondHeight = 16
		BounceFirstPercentIndent = 20% ; Percentage of shot distance control points are placed
		BounceSecondPercentIndent = 80%

		GroundHitFX       = FX_ThrownRockGroundHit
		GroundBounceFX    = FX_ThrownRockBounceHit
	End

	Behavior = ProductionUpdate ModuleTag_WhateverThisDoesNothing
		; yep - nothing
	End

	;--------------------------------------------------------------------
	; Sub object revealing.
	;--------------------------------------------------------------------
	Behavior = SubObjectsUpgrade Arrow_Upgrade
		TriggeredBy		= Upgrade_IsengardFlamingArrows
		ShowSubObjects	= ARROW_UPGRADE FireArowTip
		SkipFadeOnCreate = Yes
	End
	Behavior = SubObjectsUpgrade Sword_Upgrade
		TriggeredBy		= Upgrade_IsengardForgedBlades
		ShowSubObjects	= SWORD_UPGRADES Forged_Blade
		SkipFadeOnCreate = Yes
	End
	Behavior = SubObjectsUpgrade Armor_Upgrade
		TriggeredBy		= Upgrade_IsengardHeavyArmor
		ShowSubObjects	= ARMOR_UPGRADE
		SkipFadeOnCreate = Yes
	End
	;--------------------------------------------------------------------
	
	;--------------------------------------------------------------------
	; Delivering and upgrading.
	;--------------------------------------------------------------------
	Behavior = SpecialPowerModule ModuleTag_UpgradeNearest
		SpecialPowerTemplate		= SpecialAbilityGiveUpgradeNearest
		UpdateModuleStartsAttack	= Yes
		;InitiateSound		= OrcPorterGenericVoiceDeliver
	End

	Behavior = SpecialPowerModule ModuleTag_09
		SpecialPowerTemplate		= SpecialAbilityGiveUpgrade
		UpdateModuleStartsAttack	= Yes
		InitiateSound				= PorterGenericVoiceDeliver
	End

	Behavior = GiveUpgradeUpdate ModuleTag_UpgradeNearestUpdate
		SpecialPowerTemplate	= SpecialAbilityGiveUpgradeNearest
		StartAbilityRange	= 15.0
		UnpackTime		= 700		; Pull out arrow
		PreparationTime		= 100		; Quick shot
		PersistentPrepTime	= 500		; looping the quick shot
		PackTime		= 233		; back to idle
		ApproachRequiresLOS	= No
		DeliverUpgrade		= Yes
		FadeOutSpeed		= 0.1
		SpawnOutFX		= FX_PorterDeliver
	End

	Behavior = GiveUpgradeUpdate ModuleTag_11
		SpecialPowerTemplate	= SpecialAbilityGiveUpgrade
		StartAbilityRange	= 15.0
		UnpackTime		= 700		; Pull out arrow
		PreparationTime		= 100		; Quick shot
		PersistentPrepTime	= 500		; looping the quick shot
		PackTime		= 233		; back to idle
		ApproachRequiresLOS	= No
		FadeOutSpeed		= 0.1
		SpawnOutFX		= FX_PorterDeliver
	End

	;--------------------------------------------------------------------
	; Emotion Tracker for the Terror state
	;--------------------------------------------------------------------
	Behavior = EmotionTrackerUpdate	Module_EmotionTracker
		AfraidOf					=	NONE +RohanTreeBerd +RohanEntFir +RohanEntAsh +RohanEntBirch +MordorBalrog +MordorCaveTroll +MordorMountainTroll +MordorDrummerTroll +MordorFellBeast +MordorMumakil;Must be SCARY kindof as well.
		AlwaysAfraidOf				=	NONE +MordorWitchKing +MordorWitchKingOnFellBeast +MordorBalrog +RohanOathbreaker

		FearScanDistance			=	250

		AddEmotion	=	Terror_Base
	End	

	;--------------------------------------------------------------------
	; Don't make it any bigger or try making it a box or this unit will not make it up onto walls to deliver it's goods.
	Geometry = CYLINDER	
	GeometryMajorRadius = 8.0
	GeometryMinorRadius = 8.0
	GeometryHeight = 16.0
	GeometryIsSmall = Yes
	
	Shadow = SHADOW_DECAL
	ShadowSizeX = 27;
	ShadowSizeY = 27;
	ShadowTexture = ShadowI;
End

;-------------------------- FlamingArrowsPorter FireArrowsPorter ------------------------------

ChildObject IsengardFlamingArrowsPorter IsengardPorterInterface
	DisplayName = OBJECT:IsengardPorterFlamingArrows
	BuildCost = ISENGARD_FIREARROWPORTER_BUILDCOST	
	BuildTime = ISENGARD_FIREARROWPORTER_BUILDTIME	
	Behavior = GrantUpgradeCreate ModuleTag_GrantUpdateCreate
		UpgradeToGrant = Upgrade_IsengardFlamingArrows

	End

	; *** AUDIO Parameters ***;

	;VoiceAmbushed			= 
	VoiceCreated			= OrcPorterFireArrowsVoiceSalute
	VoiceFullyCreated 		= OrcPorterFireArrowsVoiceSalute
	;VoiceFear 			= 
	VoiceMove			= OrcPorterGenericVoiceMove
	VoiceMoveToCamp			= OrcPorterGenericVoiceMove
	VoicePriority			= 5
	;VoiceRetreatToCastle		= 
	VoiceSelect			= OrcPorterFireArrowsVoiceSelect
	VoiceGuard			= OrcPorterGenericVoiceMove
	

	SoundImpact			= ImpactHorse

	;UnitSpecificSounds
	;End

	EvaEventDamagedOwner = PorterUnderAttack 	;Eva event to trigger when unit is damaged
	EvaEventDieOwner = PorterIsengardDie		;Eva event to trigger on unit's death. NOTICE THAT this is only for permanent deaths
							;For deaths you can respawn from, use the DeathFX

	;--------------

	Behavior				= SpecialPowerModule ModuleTag_09
		SpecialPowerTemplate		= SpecialAbilityGiveUpgrade
		UpdateModuleStartsAttack	= Yes
		InitiateSound			= OrcPorterFireArrowsVoiceDeliver
	End

	Behavior = GiveUpgradeUpdate ModuleTag_UpgradeNearestUpdate
		SpecialPowerTemplate	= SpecialAbilityGiveUpgradeNearest
		StartAbilityRange	= 15.0
		UnpackTime		= 700		; Pull out arrow
		PreparationTime		= 100		; Quick shot
		PersistentPrepTime	= 500		; looping the quick shot
		PackTime		= 233		; back to idle
		ApproachRequiresLOS	= No
		DeliverUpgrade		= Yes
		FadeOutSpeed		= 0.1
		SpawnOutFX		= FX_PorterDeliverFlamingArrows
	End

	Behavior = GiveUpgradeUpdate ModuleTag_11
		SpecialPowerTemplate	= SpecialAbilityGiveUpgrade
		StartAbilityRange	= 15.0
		UnpackTime		= 700		; Pull out arrow
		PreparationTime		= 100		; Quick shot
		PersistentPrepTime	= 500		; looping the quick shot
		PackTime		= 233		; back to idle
		ApproachRequiresLOS	= No
		FadeOutSpeed		= 0.1
		SpawnOutFX		= FX_PorterDeliverFlamingArrows
	End
End	


;-------------------------- ForgedBladesPorter ------------------------------

ChildObject IsengardForgedBladesPorter IsengardPorterInterface
	DisplayName = OBJECT:IsengardPorterForgedBlades
	BuildCost = ISENGARD_FORGEDBLADES_BUILDCOST		
	BuildTime = ISENGARD_FORGEDBLADES_BUILDTIME
	Behavior = GrantUpgradeCreate ModuleTag_GrantUpdateCreate
		UpgradeToGrant = Upgrade_IsengardForgedBlades
	
	End


	; *** AUDIO Parameters ***;

	;VoiceAmbushed			= 
	VoiceCreated			= OrcPorterForgedBladesVoiceSalute
	VoiceFullyCreated 		= OrcPorterForgedBladesVoiceSalute
	;VoiceFear 			= 
	VoiceMove			= OrcPorterGenericVoiceMove
	VoiceMoveToCamp			= OrcPorterGenericVoiceMove
	VoicePriority			= 5
	;VoiceRetreatToCastle		= 
	VoiceSelect			= OrcPorterForgedBladesVoiceSelect
	VoiceGuard			= OrcPorterGenericVoiceMove
	

	SoundImpact			= ImpactHorse

;OrcPorterForgedBladesVoiceDeliver

	;UnitSpecificSounds
	;End

	EvaEventDamagedOwner = PorterUnderAttack 	;Eva event to trigger when unit is damaged
	EvaEventDieOwner = PorterIsengardDie		;Eva event to trigger on unit's death. NOTICE THAT this is only for permanent deaths
							;For deaths you can respawn from, use the DeathFX

	;----------------

	Behavior				= SpecialPowerModule ModuleTag_09
		SpecialPowerTemplate		= SpecialAbilityGiveUpgrade
		UpdateModuleStartsAttack	= Yes
		InitiateSound			= OrcPorterForgedBladesVoiceDeliver
	End

	Behavior = GiveUpgradeUpdate ModuleTag_UpgradeNearestUpdate
		SpecialPowerTemplate	= SpecialAbilityGiveUpgradeNearest
		StartAbilityRange	= 15.0
		UnpackTime		= 700		; Pull out arrow
		PreparationTime		= 100		; Quick shot
		PersistentPrepTime	= 500		; looping the quick shot
		PackTime		= 233		; back to idle
		ApproachRequiresLOS	= No
		DeliverUpgrade		= Yes
		FadeOutSpeed		= 0.1
		SpawnOutFX		= FX_PorterDeliverForgedBlades
	End

	Behavior = GiveUpgradeUpdate ModuleTag_11
		SpecialPowerTemplate	= SpecialAbilityGiveUpgrade
		StartAbilityRange	= 15.0
		UnpackTime		= 700		; Pull out arrow
		PreparationTime		= 100		; Quick shot
		PersistentPrepTime	= 500		; looping the quick shot
		PackTime		= 233		; back to idle
		ApproachRequiresLOS	= No
		FadeOutSpeed		= 0.1
		SpawnOutFX		= FX_PorterDeliverForgedBlades
	End
End	


;-------------------------- HeavyArmorPorter ------------------------------

ChildObject IsengardHeavyArmorPorter IsengardPorterInterface
	DisplayName = OBJECT:IsengardPorterHeavyArmor
	BuildCost = ISENGARD_HEAVYARMOR_BUILDCOST		
	BuildTime = ISENGARD_HEAVYARMOR_BUILDTIME
	Behavior = GrantUpgradeCreate ModuleTag_GrantUpdateCreate
		UpgradeToGrant = Upgrade_IsengardHeavyArmor
	
	End


	; *** AUDIO Parameters ***;

	;VoiceAmbushed			= 
	VoiceCreated			= OrcPorterHeavyArmorVoiceSalute
	VoiceFullyCreated 		= OrcPorterHeavyArmorVoiceSalute
	;VoiceFear 			= 
	VoiceMove			= OrcPorterGenericVoiceMove
	VoiceMoveToCamp			= OrcPorterGenericVoiceMove
	VoicePriority			= 5
	;VoiceRetreatToCastle		= 
	VoiceSelect			= OrcPorterHeavyArmorVoiceSelect
	VoiceGuard			= OrcPorterGenericVoiceMove

	SoundImpact			= ImpactHorse

	;UnitSpecificSounds
	;End

	EvaEventDamagedOwner = PorterUnderAttack 	;Eva event to trigger when unit is damaged
	EvaEventDieOwner = PorterIsengardDie		;Eva event to trigger on unit's death. NOTICE THAT this is only for permanent deaths
							;For deaths you can respawn from, use the DeathFX

	;-------------------

	Behavior				= SpecialPowerModule ModuleTag_09
		SpecialPowerTemplate		= SpecialAbilityGiveUpgrade
		UpdateModuleStartsAttack	= Yes
		InitiateSound			= OrcPorterHeavyArmorVoiceDeliver
	End

	Behavior = GiveUpgradeUpdate ModuleTag_UpgradeNearestUpdate
		SpecialPowerTemplate	= SpecialAbilityGiveUpgradeNearest
		StartAbilityRange	= 15.0
		UnpackTime		= 700		; Pull out arrow
		PreparationTime		= 100		; Quick shot
		PersistentPrepTime	= 500		; looping the quick shot
		PackTime		= 233		; back to idle
		ApproachRequiresLOS	= No
		DeliverUpgrade		= Yes
		FadeOutSpeed		= 0.1
		SpawnOutFX		= FX_PorterDeliverHeavyArmor
	End

	Behavior = GiveUpgradeUpdate ModuleTag_11
		SpecialPowerTemplate	= SpecialAbilityGiveUpgrade
		StartAbilityRange	= 15.0
		UnpackTime		= 700		; Pull out arrow
		PreparationTime		= 100		; Quick shot
		PersistentPrepTime	= 500		; looping the quick shot
		PackTime		= 233		; back to idle
		ApproachRequiresLOS	= No
		FadeOutSpeed		= 0.1
		SpawnOutFX		= FX_PorterDeliverHeavyArmor
	End
End	


;------------------------------------------------------------------------------
; aka Ballista, BallistaIsengard
Object IsengardBallista                         ;BALANCE Ballista 

	; *** ART Parameters ***
  	; This is required for garrisoned objects - please put in all objects.
	ButtonImage		= BISiegeWorks_SeigeBallista
	SelectPortrait	= UPIsenguard_SeigeBalista

	Draw = W3DTruckDraw ModuleTag_01
    
    	OkToChangeModelColor = Yes
    	
    	StaticModelLODMode = Yes
    		
		DefaultModelConditionState
			Model               = IUSiegBall_SKN
			WeaponLaunchBone    = PRIMARY MINEDARROW
		End

		IdleAnimationState
			StateName           = Stand
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "TurningLeft" then CurDrawableSetTransitionAnimState("TRANS_Left_To_Stand") end
				if Prev == "TurningRight" then CurDrawableSetTransitionAnimState("TRANS_Right_To_Stand") end
				if Prev == "JUST_BUILT" then CurDrawableSetTransitionAnimState("TRANS_FROM_JUST_BUILT") end
			EndScript
			Animation = IDLES
				AnimationName     = IUSiegBall_SKL.IUSiegBall_IDLA
				AnimationMode       = ONCE
				AnimationBlendTime  = 15
			End
		End

		ModelConditionState =DYING
			Model               = IUSiegBall_DSKN
		End
			
		ModelConditionState = JUST_BUILT
			Model               = IUSiegBall_SKN ; CHANGE THIS WHEN WE GET A BUILD ANIMATION
		End

		;build the unit in the workshop
		AnimationState      = JUST_BUILT
			Animation         = IUSiegBall_BLDA
				AnimationName   = IUSiegBall_SKL.IUSiegBall_IDLA; BLDA ; CHANGE THIS WHEN WE GET A BUILD ANIMATION
				AnimationMode   = ONCE
				AnimationBlendTime= 0
			End
			StateName           = JUST_BUILT
		End	

		;Die - ground unit destroys the trebuchet
		AnimationState      = DYING 
			Animation         = IUSiegBall_DIEB
				AnimationName   = IUSiegBall_DSKL.IUSiegBall_DIEB
				AnimationMode   = ONCE
			End
		End		
		
		; Moving and Firing Anims
		AnimationState        = TURN_LEFT FIRING_OR_PREATTACK_A
			StateName           = TurningLeft
			Animation           = IUSiegBall_TRNL
				AnimationName     = IUSiegBall_SKL.IUSiegBall_ATNL
				AnimationMode     = ONCE
				AnimationBlendTime= 5
			End
			Flags = MAINTAIN_FRAME_ACROSS_STATES
		End
		
		AnimationState        = TURN_RIGHT FIRING_OR_PREATTACK_A
			StateName           = TurningRight
			Animation           = IUSiegBall_TRNR
				AnimationName     = IUSiegBall_SKL.IUSiegBall_ATNR
				AnimationMode     = ONCE
				AnimationBlendTime= 5
			End
			Flags = MAINTAIN_FRAME_ACROSS_STATES
		End
		
		AnimationState        = MOVING FIRING_OR_PREATTACK_A
			Animation = Move
				AnimationName       = IUSiegBall_SKL.IUSiegBall_ATWK
				AnimationMode       = ONCE
				AnimationBlendTime= 5
			End
			Flags = MAINTAIN_FRAME_ACROSS_STATES
		End

		
		; --- Turning Anims 
		AnimationState        = TURN_LEFT 
			StateName           = TurningLeft
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Stand" then CurDrawableSetTransitionAnimState("Trans_Stand_To_Left")
				elseif Prev == "JUST_BUILT" then CurDrawableSetTransitionAnimState("TRANS_FROM_JUST_BUILT")
				;elseif Prev == "Attack"		then CurDrawableSetTransitionAnimState("BlendToTurnLeft")
				end
			EndScript
			Animation           = IUSiegBall_TRNL
				AnimationName     = IUSiegBall_SKL.IUSiegBall_TRNL
				AnimationMode     = LOOP
				AnimationBlendTime= 15
				AnimationSpeedFactorRange = 3.0 3.0		;Hack... we need a proper TurnAngle entry
			End
		End
		
		TransitionState = BlendToTurnLeft
			Animation           = IUSiegBall_TRNL
				AnimationName     = IUSiegBall_SKL.IUSiegBall_TRNL
				AnimationMode     = ONCE
				AnimationBlendTime= 30
				AnimationSpeedFactorRange = 3.0 3.0		;Hack... we need a proper TurnAngle entry
			End
		End

		AnimationState        = TURN_RIGHT 
			StateName           = TurningRight
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Stand" then CurDrawableSetTransitionAnimState("Trans_Stand_To_Right")
				elseif Prev == "JUST_BUILT" then CurDrawableSetTransitionAnimState("TRANS_FROM_JUST_BUILT")
				;elseif Prev == "Attack"		then CurDrawableSetTransitionAnimState("BlendToTurnRight")
				end
			EndScript
			ParticleSysBone     = WheelL01 GenericSiegeTrailDust
			ParticleSysBone     = WheelR01 GenericSiegeTrailDust
			Animation           = IUSiegBall_TRNR
				AnimationName     = IUSiegBall_SKL.IUSiegBall_TRNR
				AnimationMode     = LOOP
				AnimationBlendTime= 15
				AnimationSpeedFactorRange = 3.0 3.0		;Hack... we need a proper TurnAngle entry
			End
		End
		
		TransitionState = BlendToTurnRight
			Animation           = IUSiegBall_TRNR
				AnimationName     = IUSiegBall_SKL.IUSiegBall_TRNR
				AnimationMode     = ONCE
				AnimationBlendTime= 30
				AnimationSpeedFactorRange = 3.0 3.0		;Hack... we need a proper TurnAngle entry
			End
		End

		AnimationState        = MOVING
			Animation = Move
				AnimationName           = IUSiegBall_SKL.IUSiegBall_WLKA
				AnimationMode       = LOOP
				AnimationBlendTime= 15
				Distance = 15
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Stand" then CurDrawableSetTransitionAnimState("Trans_Stand_To_Move")
				elseif Prev == "JUST_BUILT" then CurDrawableSetTransitionAnimState("TRANS_FROM_JUST_BUILT")
				;elseif Prev == "Attack" then CurDrawableSetTransitionAnimState("BlendToMove")
				end
			EndScript
		End
		
		TransitionState = BlendToMove
			Animation           = IUSiegBall_WLKA
				AnimationName     = IUSiegBall_SKL.IUSiegBall_WLKA
				AnimationMode     = ONCE
				AnimationBlendTime= 30
				AnimationSpeedFactorRange = 3.0 3.0		;Hack... we need a proper TurnAngle entry
			End
		End

		AnimationState			=	 FIRING_OR_PREATTACK_A 
			Animation			=	Normal
				AnimationName	=	IUSiegBall_SKL.IUSiegBall_ATKA
				AnimationMode	=	ONCE
				;UseWeaponTiming	=	Yes
			End
			Animation			=	NoBlend
				AnimationName	=	IUSiegBall_SKL.IUSiegBall_ATKA
				AnimationMode	=	ONCE
				;UseWeaponTiming	=	Yes
			End
			Flags = MAINTAIN_FRAME_ACROSS_STATES
			StateName			=	Attack
			FrameForPristineBonePositions = 31
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Stand" or Prev == "Attack"
				then 
					return "NoBlend"
				else
					return "Normal"
				end
			EndScript
		End		
		
		
		; --------- Click and Hit Reactions ------------	
		AnimationState = HIT_REACTION HIT_LEVEL_1
			Animation = Hit_Level_1_a
				AnimationName = IUSiegBall_SKL.IUSiegBall_HITA
				AnimationMode = ONCE
			End
		End
					

	    TrackMarks					= EXTireTrack2_Temp.tga
	    TrackMarksLeftBone			= WheelL02
	    TrackMarksRightBone			= WheelR02
	    
		; These parameters are only used if the model has a separate suspension,
		; and the locomotor has HasSuspension = Yes.
		LeftFrontTireBone           = WheelL01
		RightFrontTireBone          = WheelR01
		LeftRearTireBone            = WheelL02
		RightRearTireBone           = WheelR02
		TireRotationMultiplier      = 0.2   ; this * speed = rotation.
		PowerslideRotationAddition  = 2.5   ; This speed is added to the rotation speed when powersliding.

		ParticlesAttachedToAnimatedBones = Yes
	End


	Draw = W3DScriptedModelDraw DustEffects
	    DefaultModelConditionState
	      Model = None
	    End
	    IdleAnimationState
	    End
	    AnimationState = MOVING WADING
			ParticleSysBone     = WheelL02 FootstepSlash
			ParticleSysBone     = WheelR02 FootstepSlash
	    End
	    AnimationState        = TURN_RIGHT
			ParticleSysBone     = WheelL02 GenericSiegeTrailDust
			ParticleSysBone     = WheelR02 GenericSiegeTrailDust
	    End
	    AnimationState        = TURN_LEFT
			ParticleSysBone     = WheelL02 GenericSiegeTrailDust
			ParticleSysBone     = WheelR02 GenericSiegeTrailDust
	    End
	    AnimationState = MOVING
			ParticleSysBone     = WheelL02 GenericSiegeTrailDust
			ParticleSysBone     = WheelR02 GenericSiegeTrailDust
	    End
	    AnimationState        = TURN_RIGHT FIRING_OR_PREATTACK_A
			ParticleSysBone     = WheelL02 GenericSiegeTrailDust
			ParticleSysBone     = WheelR02 GenericSiegeTrailDust
	    End
	    AnimationState        = TURN_LEFT FIRING_OR_PREATTACK_A
			ParticleSysBone     = WheelL02 GenericSiegeTrailDust
			ParticleSysBone     = WheelR02 GenericSiegeTrailDust
	    End
	End
 
	; ***DESIGN parameters ***
	Side = Isengard
	EditorSorting = UNIT
	ThreatLevel = 2.0
	TransportSlotCount = 1
	ThingClass = MACHINE

	VisionRange = ISENGARD_BALLISTA_VISION_RANGE
	ShroudClearingRange = SHROUD_CLEAR_ARTILLERY

	BountyValue = ISENGARD_BALLISTA_BOUNTY_VALUE 			
	ShroudClearingRange = 360
	DisplayName = OBJECT:IsengardBallista
	CrushableLevel = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
	CrusherLevel   = 2  ;What can I crush?: 0 = small animals, 1 = infantry, 2 = trees, 3 = vehicles
	ImmuneToShockwave = Yes
	CommandSet = IsengardBallistaCommandSet
	CommandPoints = 5

	WeaponSet
		Conditions          = None 
		Weapon              = PRIMARY     IsengardBallistaWeapon
	End
	ArmorSet
		Conditions      = None
		Armor           = SiegeEngineArmor
		DamageFX        = None
	End
  
  	; This is required so that the build phase lasts as long as the anim.
	BuildFadeInOnCreateTime = 2.5
  

	; *** AUDIO Parameters ***;

	VoiceAttack					= BallistaVoiceAttackBuilding
	VoiceAttack2				= BallistaVoiceAttack
	VoiceMoveWhileAttacking			= BallistaVoiceDisengage
	VoiceMove					= BallistaVoiceMove
	VoiceMove2					= OrcVoiceMove2
	VoicePriority				= 26
	VoiceCreated				= CampOrcCreateBallista
	VoiceFullyCreated				= CampOrcCreateBallista
	VoiceSelect					= BallistaVoiceSelect
	VoiceSelect2				= BallistaVoiceSelect2
	VoiceGuard					= BallistaVoiceMove

	VoiceEnterStateAttack			= BallistaVoiceEnterStateAttackBuilding
	VoiceEnterStateAttack			= BallistaVoiceEnterStateAttack
	VoiceEnterStateMoveWhileAttacking	= BallistaVoiceEnterStateDisengage
	VoiceEnterStateMove			= BallistaVoiceEnterStateMove
	
	SoundMoveLoop				= CatapultMoveLoop
	SoundMoveStart				= BallistaMoveStart

	;UnitSpecificSounds
	;	VoiceGarrison         		= NoSound
	;End

	EvaEventDamagedOwner			= UnitUnderAttack 		;Eva event to trigger when unit is damaged

	Behavior = LargeGroupAudioUpdate ModuleTag_LGAU				; Tie into LargeGroupAudio system
		Key = SiegeWeapon Ballista
	End

	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		MaxUpdateRangeCap = 800
		AnimationSound = Sound:BallistaCrank		Animation:IUSiegBall_SKL.IUSiegBall_ATKA	Frames:72
		AnimationSound = Sound:BallistaLock			Animation:IUSiegBall_SKL.IUSiegBall_ATKA	Frames:137 160 200
		AnimationSound = Sound:BallistaCrewVoxWave	Animation:IUSiegBall_SKL.IUSiegBall_ATKA	Frames:120

		AnimationSound = Sound:BallistaCrank		Animation:IUSiegBall_SKL.IUSiegBall_ATNL	Frames:72
		AnimationSound = Sound:BallistaLock			Animation:IUSiegBall_SKL.IUSiegBall_ATNL	Frames:137 165 205

		AnimationSound = Sound:BallistaCrank		Animation:IUSiegBall_SKL.IUSiegBall_ATNR	Frames:72
		AnimationSound = Sound:BallistaLock			Animation:IUSiegBall_SKL.IUSiegBall_ATNR	Frames:137 165 205

		AnimationSound = Sound:BallistaCrank		Animation:IUSiegBall_SKL.IUSiegBall_ATWK	Frames:72
		AnimationSound = Sound:BallistaLock			Animation:IUSiegBall_SKL.IUSiegBall_ATWK	Frames:137 162 200

		AnimationSound = Sound:BodyFallOrc			Animation:IUSiegBall_DSKL.IUSiegBall_DIEB	Frames:14
	End
    

	; *** ENGINEERING Parameters ***

	RadarPriority = UNIT
	KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS MACHINE SCORE CAN_ATTACK CAN_ATTACK_WALLS ATTACK_NEEDS_LINE_OF_SIGHT
    BuildCost = ISENGARD_BALLISTA_BUILDCOST			
    BuildTime = ISENGARD_BALLISTA_BUILDTIME			

	Body = ActiveBody ModuleTag_02
		CheerRadius 	  = EMOTION_CHEER_RADIUS
		MaxHealth         = ISENGARD_BALLISTA_HEALTH				;BALANCE Ballista Health
		MaxHealthDamaged  = ISENGARD_BALLISTA_HEALTH_DAMAGED		
		;;RecoveryTime      = ISENGARD_BALLISTA_HEALTH_RECOVERY_TIME		
	End
 
	Behavior = AIUpdateInterface ModuleTag_03
		AutoAcquireEnemiesWhenIdle = Yes ATTACK_BUILDINGS ;Yes
		AILuaEventsList	=	BallistaFunctions
	End

	LocomotorSet
		Locomotor = CatapultLocomotor
		Condition = SET_NORMAL
		Speed     = 30
	End
 
	Behavior = PhysicsBehavior ModuleTag_04
	End
	
	Behavior = TransportContain ModuleTag_MineAmmoContain
		ObjectStatusOfContained = UNSELECTABLE ENCLOSED
		Slots					= 1
		DamagePercentToUnits	= 100%
		PassengerFilter			= NONE +CAN_RIDE_SIEGE_LADDER +CAN_USE_SIEGE_TOWER +CAN_RIDE_BATTERING_RAM
		AllowAlliesInside		= Yes
		KillPassengersOnDeath	= Yes ; fling passenger out to die when siege ladder is done for
		AllowEnemiesInside		= No
		AllowNeutralInside		= No
		NumberOfExitPaths		= 0 ; Defaults to 1.  Set 0 to not use ExitStart/ExitEnd, set higher than 1 to use ExitStart01-nn/ExitEnd01-nn
	End
 
	Behavior = SlowDeathBehavior ModuleTag_05
		DeathTypes = NONE +EXPLODED +BURNED
		SinkDelay = 6000
		SinkRate = 1.0     ; in Dist/Sec
		DestructionDelay = 22000  ;8000
		;OCL = FINAL OCL_MordorCatapultExplodeDeath
		FX = INITIAL FX_CatapultDieExplosion
		Sound = INITIAL	UrukVoiceDie
	End

	Behavior = SlowDeathBehavior ModuleTag_06 
		DeathTypes = ALL -EXPLODED -BURNED
		SinkDelay = 5000
		SinkRate = 1.0     ; in Dist/Sec
		DestructionDelay = 18000  ;8000
		;OCL = FINAL OCL_MordorCatapultDeath
		FX = INITIAL FX_CatapultDie
		Sound = INITIAL	UrukVoiceDie
	End

	Behavior = SquishCollide ModuleTag_07
		;nothing
	End

	Behavior = TransitionDamageFX ModuleTag_8
	;    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:FireBuildingLarge         ; persistant damage effect
		ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_GondorCatapultTransitionMedium     ; damage impact particle effect
	;   ReallyDamagedOCL1 = Loc: X:0 Y:0 Z:0 OCL:OCL_FireFieldSmall                           ; spawn debris and splinters
	End

	Behavior = HitReactionBehavior HitReactionBehaviorModuleTag
		HitReactionLifeTimer1 = 2000 ; level 1 (light  damage)  hit reaction animations in frames (5 per sec)
		HitReactionLifeTimer2 = 15 ; level 2 (medium damage)  hit reaction animations in frames (5 per sec)
		HitReactionLifeTimer3 = 10 ; level 3 (heavy  damage)  hit reaction animations in frames (5 per sec)

		HitReactionThreshold1 = 10.0   ; level 1 (light  damage) threshold trigger
		HitReactionThreshold2 = 25000.0  ; level 2 (medium damage) threshold trigger
		HitReactionThreshold3 = 50000.0  ; level 3 (heavy  damage) threshold trigger
	End
	
	Geometry              = BOX
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 15.0
	GeometryHeight        = 30.0
	GeometryOffset		  = X:-22.5 Y:0 Z:0
	
	GeometryIsSmall = No
	Shadow = SHADOW_VOLUME
End

;------------------------------------------------------------------------------
; aka Easterling, Soldier of Rhun, SoldierOfRhun, SoldiersOfRhun, Soldiers of Rhun
Object MordorEasterling
	; *** ART Parameters ***

	; This is required for garrisoned objects - please put in all objects.
	ButtonImage		= BMHaradrimPalace_SoldiersRhun
	SelectPortrait	= UPMordor_Eastering
  
	Draw = W3DHordeModelDraw ModuleTag_01

		OkToChangeModelColor = Yes
		  
		StaticModelLODMode = Yes
		; specify options for static LODs
		LodOptions	= LOW
			AllowMultipleModels		=	ALLOW_MULTIPLE_MODELS_LOW
			MaxRandomTextures		=	MAX_RANDOM_TEXTURES_LOW
			MaxRandomAnimations		=	MAX_RANDOM_ANIMATIONS_LOW
			MaxAnimFrameDelta		=	MAX_ANIM_FRAME_DELTA_LOW
		End
		
		LodOptions	= MEDIUM
			AllowMultipleModels		=	ALLOW_MULTIPLE_MODELS_MED
			MaxRandomTextures		=	MAX_RANDOM_TEXTURES_MED
			MaxRandomAnimations		=	MAX_RANDOM_ANIMATIONS_MED
			MaxAnimFrameDelta		=	MAX_ANIM_FRAME_DELTA_MED
		End
		
		LodOptions	= HIGH
			AllowMultipleModels		=	ALLOW_MULTIPLE_MODELS_HIGH
			MaxRandomTextures		=	MAX_RANDOM_TEXTURES_HIGH
			MaxRandomAnimations		=	MAX_RANDOM_ANIMATIONS_HIGH
			MaxAnimFrameDelta		=	MAX_ANIM_FRAME_DELTA_HIGH
		End
	
		  
		DefaultModelConditionState
			Model = MUEastern_SKN 
		End

		; ---------------------- IDLE ANIMATIONS ------------------------------
		IdleAnimationState
			Animation = IDLEA
				AnimationName			=	MUEastern_SKL.MUEastern_IDLB
				AnimationMode			=	LOOP
				AnimationBlendTime		=	10
				AnimationSpeedFactorRange	= 0.8 1.2
			End
			Flags							=	RANDOMSTART
			StateName = Idle
			BeginScript
				Prev =	CurDrawablePrevAnimationState()
				if Prev == "Selected" then CurDrawableSetTransitionAnimState("TransitionFromAttention") end
			EndScript			
		End
		
		;---------------------- THROWN ANIMATION -------------------------------
		
		AnimationState					=	THROWN_PROJECTILE
			Animation					=	THROWN
				AnimationName			=	MUEastern_SKL.MUEastern_FLYA
				AnimationMode			=	LOOP
			End
		End

		;--------------------- Giant Bird Stuff ---------------------------------------		
		AnimationState						=	PASSENGER FREEFALL
			Animation						=	Grabbed
				AnimationName				=	MUEastern_SKL.MUEastern_FLLA
				AnimationMode				=	LOOP
			End
		End
		
		AnimationState						=	FREEFALL
			Animation						=	Falling
				AnimationName				=	MUEastern_SKL.MUEastern_FLYA
				AnimationMode				=	LOOP
				AnimationBlendTime			=	10
				AnimationSpeedFactorRange	=	0.5	0.5
			End
		End
		
		;------------------------ STUNNED ANIMATIONS ---------------------------
		AnimationState						=	STUNNED_FLAILING
			Animation						=	StunnedFlailing
				AnimationName				=	MUEastern_SKL.MUEastern_FLYA
				AnimationMode				=	LOOP
			End
			Flags							=	RANDOMSTART
		End
		
		;-------------------------- DYING ANIMS ---------------------------------
		AnimationState						=	DYING SPLATTED
			Animation						=	Splattered_On_Ground
				AnimationName				=	MUEastern_SKL.MUEastern_LNDA
				AnimationMode				=	ONCE
			End
			EnteringStateFX					=	FX_HaradrimHitGround
		End

		AnimationState						=	DYING AFLAME
			Animation						=	Flaming_Death
				AnimationName				=	MUEastern_SKL.MUEastern_DIEA
				AnimationMode				=	ONCE
			End
			ParticleSysBone					=	BAT_HEAD FireBuildingLargeSmoke FollowBone:yes
			ParticleSysBone					=	BAT_HEAD FireSmall FollowBone:yes
			ParticleSysBone					=	BAT_RIBS FireBuildingLargeSmoke FollowBone:yes
			ParticleSysBone					=	BAT_RIBS FireSmall FollowBone:yes
		End
		
		AnimationState						=	DYING
			Animation						=	Dying
				AnimationName				=	MUEastern_SKL.MUEastern_DIEA
				AnimationMode				=	ONCE
			End
		End
		
		;------------------------ STUNNED ANIMATIONS ---------------------------

		AnimationState						=	STUNNED_STANDING_UP
			Animation						=	Standing_Back_Up
				AnimationName				=	MUEastern_SKL.MUEastern_GTPA
				AnimationMode				=	ONCE
				AnimationSpeedFactorRange = 1.5 1.5
			End
		End

		AnimationState						=	STUNNED
			Animation						=	Stunned
				AnimationName				=	MUEastern_SKL.MUEastern_LNDA
				AnimationMode				=	ONCE
			End
			EnteringStateFX					=	FX_HaradrimHitGround
		End
		
		;---------------------- PASSENGER ANIMATION -----------------------------
		AnimationState					=	PASSENGER
			Animation					=	Grabbed
				AnimationName			=	MUEastern_SKL.MUEastern_FLLA
				AnimationMode			=	LOOP
			End
		End
				
		;--------------------- MOVING ANIMATIONS -----------------------------------
		
		AnimationState = MOVING FIRING_OR_PREATTACK_A
			Animation = TrotAndFire
				AnimationName = MUEastern_SKL.MUEastern_ATRA
				AnimationMode = LOOP
			End
			Flags = RANDOMSTART
			;ParticleSysBone = None InfantryDustTrails
		End
		
		
		AnimationState					= MOVING CLIMBING BACKING_UP
			Animation					= ClimbingBackwards
				AnimationName			= MUEastern_SKL.MUEastern_CLMA
				AnimationMode			= LOOP_BACKWARDS
			End
		End
		
		AnimationState					= MOVING CLIMBING
			Animation					= Climbing
				AnimationName			= MUEastern_SKL.MUEastern_CLMA
				AnimationMode			= LOOP
			End
		End
		
		AnimationState					=	MOVING PANICKING
			ShareAnimation				=	Yes
			Animation					=	PANICKING
				AnimationName			=	MUEastern_SKL.MUEastern_MFDA
				AnimationMode			=	LOOP
			End
			Flags						=	RANDOMSTART
		End
		
		AnimationState					=	MOVING BACKING_UP
			ShareAnimation				=	Yes
			Animation					=	BACKINUP
				AnimationName			=	MUEastern_SKL.MUEastern_BAKA
				AnimationMode			=	LOOP
			End
			;Flags						=	RANDOMSTART
		End		
		
		AnimationState					=	MOVING ALTERNATE_FORMATION AFLAME
			Animation					=	MovingWithAlternateFormationOnFire
				AnimationName			=	MUEastern_SKL.MUEastern_RUNA
				AnimationMode			=	LOOP
			End
			Flags						=	RANDOMSTART
			ParticleSysBone				=	None InfantryDustTrails
			ParticleSysBone				=	BAT_HEAD FireBuildingLargeSmoke FollowBone:yes
			ParticleSysBone				=	BAT_HEAD FireSmall FollowBone:yes
			ParticleSysBone				=	BAT_RIBS FireBuildingLargeSmoke FollowBone:yes
			ParticleSysBone				=	BAT_RIBS FireSmall FollowBone:yes
			;Flags						=	RANDOMSTART
		End
				
		AnimationState					=	MOVING ALTERNATE_FORMATION
			ShareAnimation				=	Yes
			Animation					=	MovingWithAlternateFormation
				AnimationName			=	MUEastern_SKL.MUEastern_WLKA
				AnimationMode			=	LOOP
			End
			ParticleSysBone				=	None InfantryDustTrails
			;Flags						=	RANDOMSTART
		End				
		
		AnimationState					=	MOVING AFLAME
			ShareAnimation				=	Yes
			Animation					=	MovingOnFire
				AnimationName			=	MUEastern_SKL.MUEastern_RUNA
				AnimationMode			=	LOOP
			End
			
			ParticleSysBone				=	BAT_HEAD FireBuildingLargeSmoke FollowBone:yes
			ParticleSysBone				=	BAT_HEAD FireSmall FollowBone:yes
			ParticleSysBone				=	BAT_RIBS FireBuildingLargeSmoke FollowBone:yes
			ParticleSysBone				=	BAT_RIBS FireSmall FollowBone:yes
		End
		
		AnimationState					=	MOVING EMOTION_TERROR
			ShareAnimation				=	Yes
			Animation					=	Moving
				AnimationName			=	MUEastern_SKL.MUEastern_RUNA
				AnimationMode			=	LOOP
			End
			ParticleSysBone				=	None InfantryDustTrails
			;Flags						=	RANDOMSTART
		End	

		AnimationState					=	MOVING
			ShareAnimation				=	Yes
			Animation					=	Moving
				AnimationName			=	MUEastern_SKL.MUEastern_RUNA
				AnimationMode			=	LOOP
				Distance				=   50
			End
			ParticleSysBone				=	None InfantryDustTrails
			;Flags						=	RANDOMSTART
		End	
		
		;---------------------- ATTACKING ANIMATIONS ---------------------------
		AnimationState					=	FIRING_OR_PREATTACK_A
			Animation					=	ATTACKA
				AnimationName			=	MUEastern_SKL.MUEastern_ATKA
				AnimationMode			=	ONCE
			End
		End
		
		AnimationState					=	BETWEEN_FIRING_SHOTS_A
			Animation					=	between
				AnimationName			=	MUEastern_SKL.MUEastern_IDLA
				AnimationMode			=	LOOP
			End
		End

		AnimationState						=	EMOTION_UNCONTROLLABLY_AFRAID
			ShareAnimation					=	Yes
			Animation						=	Cower
				AnimationName				=	MUEastern_SKL.MUEastern_FERA
				AnimationMode				=	LOOP
			End
		End		
				
		AnimationState					=	ATTACKING
			Animation					=	AttackingReady
				AnimationName			=	MUEastern_SKL.MUEastern_IDLA
				AnimationMode			=	LOOP
			End
		End
		
		;---------------------- EMOTION ANIMATIONS ---------------------------
		AnimationState						=	EMOTION_ALERT EMOTION_AFRAID
			ShareAnimation					=	Yes
			Animation						=	Apprehensive
				AnimationName				=	MUEastern_SKL.MUEastern_APPA
				AnimationMode				=	LOOP	;Change this to ONCE if adding additional anims
			End
		End
			
		AnimationState						=	EMOTION_AFRAID
			ShareAnimation					=	Yes
			Animation						=	Cower
				AnimationName				=	MUEastern_SKL.MUEastern_FERA
				AnimationMode				=	LOOP
			End
		End		
				
		AnimationState						= EMOTION_TAUNTING
			Animation						= TNTA
				AnimationName				= MUEastern_SKL.MUEastern_TNTA
				AnimationMode				= ONCE
				AnimationBlendTime			= 15
				AnimationSpeedFactorRange	= 0.8 1.2
			End
			Animation						= TNTB
				AnimationName				= MUEastern_SKL.MUEastern_TNTB
				AnimationMode				= ONCE
				AnimationBlendTime			= 15
				AnimationSpeedFactorRange	= 0.8 1.2
			End
			Flags							= RANDOMSTART RESTART_ANIM_WHEN_COMPLETE
		End
		
		AnimationState						= EMOTION_POINTING
			Animation						= Pointing1
				AnimationName				= MUEastern_SKL.MUEastern_PNTA
				AnimationMode				= LOOP
			End
		End
		
		AnimationState						=	EMOTION_CELEBRATING
			Animation						=	Celebrating
				AnimationName				=	MUEastern_SKL.MUEastern_CHRA
				AnimationMode				=	ONCE
			End
			
			Animation						=	CelebratingB
				AnimationName				=	MUEastern_SKL.MUEastern_CHRB
				AnimationMode				=	ONCE
			End
			
			Flags							=	RESTART_ANIM_WHEN_COMPLETE	
		End
		
		AnimationState						=	EMOTION_ALERT
			Animation						=	ALERT
				AnimationName				=	MUEastern_SKL.MUEastern_IDLA
				AnimationMode				=	LOOP
			End
			Flags							=	RANDOMSTART
		End

		AnimationState = WAR_CHANT
			Animation = Chant
				AnimationName = MUEastern_SKL.MUEastern_CHRB
				AnimationMode = LOOP
			End
		End

		;--------------------- HIT REACTIONS -----------------------------------
		AnimationState						=	HIT_REACTION HIT_LEVEL_1
			Animation						=	HitReaction1
				AnimationName				=	MUEastern_SKL.MUEastern_HITA
				AnimationMode				=	ONCE
			End
		End    

		AnimationState						=	HIT_REACTION HIT_LEVEL_2
			Animation						=	HitReaction2
				AnimationName				=	MUEastern_SKL.MUEastern_HITA
				AnimationMode				=	ONCE
			End
		End

		AnimationState						=	HIT_REACTION HIT_LEVEL_3
			Animation						=	HitReaction3
				AnimationName				=	MUEastern_SKL.MUEastern_HITA
				AnimationMode				=	ONCE
			End
		End
					
		AnimationState						=	SELECTED
			ShareAnimation					=	Yes
			Animation						=	AtAttention
				AnimationName				=	MUEastern_SKL.MUEastern_ATNB
				AnimationMode				=	LOOP
			End
					
			StateName						=	Selected
			
			BeginScript
				Prev =	CurDrawablePrevAnimationState()
				if Prev == "Idle" then CurDrawableSetTransitionAnimState("TransitionToAttention") end
			EndScript
		End

		;-------------------------------------- TRANSITIONS ----------------------------------------------
		TransitionState						=	TransitionToAttention
			Animation						=	ToAttentionTransition
				AnimationName				=	MUEastern_SKL.MUEastern_ATNA
				AnimationMode				=	ONCE
				AnimationSpeedFactorRange	=	1.0 1.4
				AnimationBlendTime			=	10
			End
		End
		
		TransitionState						=	TransitionFromAttention
			Animation						=	FromAttentionTransition
				AnimationName				=	MUEastern_SKL.MUEastern_ATNC
				AnimationMode				=	ONCE
				AnimationSpeedFactorRange	=	1.0 1.4
				AnimationBlendTime			=	10
			End
		End
	End
;;--@END
	;----------------------------------- DESIGN parameters ----------------------------------------------------
	Side							=	Mordor
	EditorSorting					=	UNIT
	ThreatLevel						=	1.0
	ThingClass						=	HORDE_UNIT
	CommandPoints					=	3
	TransportSlotCount				=	1

	ArmorSet
		Conditions					=	None
		Armor						=	RhunArmor
		DamageFX					=	None
	End

	WeaponSet
		Conditions					=	None 
		Weapon						=	PRIMARY MordorEasterlingPike
		AutoChooseSources			=	PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End

  	VisionRange 					= 	VISION_STANDARD_MELEE
  	ShroudClearingRange 			= 	SHROUD_CLEAR_STANDARD

	BountyValue						=   MORDOR_SOLDIERRHUN_BOUNTY_VALUE
	DisplayName						=	OBJECT:MordorEasterling
	CrushableLevel					=	0  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
	CrusherLevel = 0 ;What can I crush?: 0 = small animals, 1 = infantry, 2 = trees, 3 = vehicles
	CrushRevengeWeapon = AntiCavalryInfantryCrushRevenge
	
	CommandSet = MordorEasterlingCommandSet

 
	;----------------------------------- AUDIO parameters ----------------------------------------------------

	VoiceAmbushed				= SoldierOfRhunVoiceAmbushed
	VoiceAttack				= SoldierOfRhunVoiceAttack
	VoiceAttackCharge			= SoldierOfRhunVoiceAttackCharge
	VoiceAttackMachine			= SoldierOfRhunVoiceAttack
	VoiceAttackStructure			= SoldierOfRhunVoiceAttackBuilding
	VoiceCreated				= CampOrcCreateSoldiersOfRhun
	VoiceFullyCreated 			= CampOrcCreateSoldiersOfRhun
	VoiceMove				= SoldierOfRhunVoiceMove
	VoiceMoveToCamp				= SoldierOfRhunVoiceMoveCamp
	VoiceMoveWhileAttacking			= SoldierOfRhunVoiceDisengage
	VoicePriority				= 55
	VoiceRetreatToCastle			= SoldierOfRhunVoiceRetreat
	VoiceSelect				= SoldierOfRhunVoiceSelect
	VoiceSelect2				= ElvenWarriorVoiceSelect2
	VoiceSelectBattle 			= SoldierOfRhunVoiceSelectBattle
	VoiceGuard				= SoldierOfRhunVoiceMove
	
	VoiceEnterStateAttack			= SoldierOfRhunVoiceEnterStateAttack
	VoiceEnterStateAttackCharge		= SoldierOfRhunVoiceEnterStateAttackCharge
	VoiceEnterStateAttackMachine		= SoldierOfRhunVoiceEnterStateAttackBuilding
	VoiceEnterStateAttackStructure		= SoldierOfRhunVoiceEnterStateAttackBuilding
	VoiceEnterStateMove			= SoldierOfRhunVoiceEnterStateMove
	VoiceEnterStateMoveToCamp		= SoldierOfRhunVoiceEnterStateMoveCamp
	VoiceEnterStateMoveWhileAttacking	= SoldierOfRhunVoiceEnterStateDisengage
	VoiceEnterStateRetreatToCastle		= SoldierOfRhunVoiceEnterStateRetreat
	
	UnitSpecificSounds
		VoiceEnterUnitMordorMumakil	= SoldierOfRhunVoiceGarrison 
		VoiceEnterUnitSlaughterHouse	= SoldierOfRhunVoiceGarrisonSlaughterHouse	             
		VoiceGarrison			= SoldierOfRhunVoiceGarrison
	End

	EvaEventDamagedOwner			= UnitUnderAttack 		;Eva event to trigger when unit is damaged
	;EvaEventDieOwner			= GroupSoldiersOfRhunDie	;Eva event to trigger on unit's death. NOTICE THAT this is only for permanent deaths
										;For deaths you can respawn from, use the DeathFX

	Behavior						=	LargeGroupAudioUpdate ModuleTag_LGAU		; Tie into LargeGroupAudio system
		Key						=	Easterling_Infantry
	End


	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
	      MaxUpdateRangeCap = 800
			AnimationSound = Sound:BodyFallSoldier 		Animation:MUEastern_SKL.MUEastern_LNDA 	Frames:2
			AnimationSound = Sound:BodyFallGeneric1 		Animation:MUEastern_SKL.MUEastern_DIEA 	Frames:52
	End


	;----------------------------------- ENGINEERING parameters ----------------------------------------------------
	RadarPriority				=	UNIT
	KindOf					=	PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER CAN_USE_SIEGE_TOWER SCORE GRAB_AND_DROP

	Body					=	PorcupineFormationBodyModule ModuleTag_porcupineFormation
		CheerRadius 			= 	EMOTION_CHEER_RADIUS	
		MaxHealth			=	MORDOR_SOLDIERRHUN_HEALTH
		MaxHealthDamaged		=	MORDOR_SOLDIERRHUN_HEALTH_DAMAGED
		;RecoveryTime			=	MORDOR_SOLDIERRHUN_HEALTH_RECOVERY_TIME
		DamageWeaponTemplate		=	EasterlingPorcupineDamage
		CrushDamageWeaponTemplate	=	EasterlingPorcupineCrushDamage
	End
 
	Behavior						=	AIUpdateInterface ModuleTag_03
		AutoAcquireEnemiesWhenIdle	=	Yes ATTACK_BUILDINGS
		CanAttackWhileContained		=	Yes
		HoldGroundCloseRangeDistance=	80
		AttackPriority			= 	AttackPriority_Spearman
	End

	LocomotorSet
		Locomotor			=	HumanLocomotor
		Condition			=	SET_NORMAL 
		Speed				=	NORMAL_EVIL_INFANTRY_MEMBER_SPEED
	End

	Behavior				=	PhysicsBehavior ModuleTag_04
		GravityMult			=	1.0
		ShockStandingTime		=	1333	;msec
	End
 
	Behavior				=	SlowDeathBehavior ModuleTag_05
		DeathTypes			=	ALL 
		SinkDelay			=	3000
		SinkRate			=	1.20     ; in Dist/Sec
		DestructionDelay		=	10000
		Sound				=	INITIAL SoldierOfRhunVoiceDie
	End
 
  	Behavior						=	HitReactionBehavior HitReactionBehaviorModuleTag
		HitReactionLifeTimer1		=	1000 ; level 1
		HitReactionLifeTimer2		=	1000 ; level 2
		HitReactionLifeTimer3		=	1000 ; level 3

		HitReactionThreshold1		=	0.0   ; level 1 (light  damage) threshold trigger
		HitReactionThreshold2		=	25.0  ; level 2 (medium damage) threshold trigger
		HitReactionThreshold3		=	50.0  ; level 3 (heavy  damage) threshold trigger
	End	
	
	Behavior						=	SquishCollide ModuleTag_06
		;nothing
	End
	 
	Behavior						=	HordeMemberCollide ModuleTag_HMC
		;nothing
	End
	 
	Geometry						=	CYLINDER
	GeometryMajorRadius				=	8.0
	GeometryMinorRadius				=	8.0
	GeometryHeight					=	19.2
	GeometryIsSmall					=	Yes

    Shadow							=	SHADOW_DECAL
    ShadowSizeX						=	21;
    ShadowSizeY						=	21;
    ShadowTexture					=	ShadowI;
End

;------------------------------------------------------------------------------
; aka Catapult, MordorCatapult, CatapultMordor
Object MordorCatapult                         ;BALANCE Catapult 
  ; *** ART Parameters ***

  ; This is required for garrisoned objects - please put in all objects.
  ButtonImage = BMGreatSiegeWorks_Catapult
  
  SelectPortrait         = UPMordor_Catapult

  Draw = W3DTruckDraw ModuleTag_01
  
	WadingParticleSys = EntRipples

  	  OkToChangeModelColor = Yes
  	  
  	  StaticModelLODMode = Yes
  
     DefaultModelConditionState
      Model               = MUCatapult_SKN
      WeaponLaunchBone    = PRIMARY Projectile
      WeaponLaunchBone	  = SECONDARY Projectile
	  End
	  IdleAnimationState
	    Animation = Idle1
        AnimationName       = MUCatapult_SKL.MUCatapult_IDLA
        AnimationMode       = ONCE
        AnimationBlendTime  = 15
      End
	    Animation = Idle1
        AnimationName       = MUCatapult_SKL.MUCatapult_IDLB
        AnimationMode       = ONCE
        AnimationBlendTime  = 15
      End
	    Animation = Idle1
        AnimationName       = MUCatapult_SKL.MUCatapult_IDLC
        AnimationMode       = ONCE
        AnimationBlendTime  = 15
      End
      BeginScript
        CurDrawableHideSubObject("ProjectileRock")
        ;;;;CurDrawableHideSubObject("BoneProjectile");; no such bone
      EndScript
    End
    
    ModelConditionState = DYING
			Model               = MUCatapltD_SKN
			WeaponLaunchBone    = PRIMARY Projectile
		End
    
    AnimationState      = DYING
			Animation         = MUCataplt_DIEA
				AnimationName   = MUCatapltD_SKL.MUCatapltD_ANM
				AnimationMode   = ONCE
			End
		End		
    
    ModelConditionState =JUST_BUILT
		Model	=  MUCatapult_A
    End
    
    AnimationState  = JUST_BUILT
      Animation			= Being_Built
        AnimationName		= MUCatapult_A.MUCatapult_A
        AnimationMode		= ONCE
      End
    End
    
    AnimationState				=	MOVING BACKING_UP WADING
		Animation				=	BackingUp
			AnimationName           = MUCatapult_SKL.MUCatapult_BAKA
			AnimationMode       = LOOP
			AnimationSpeedFactorRange = 2.0 2.0           ; get those legs pumping!
		End
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "Attack" then
				CurDrawableSetTransitionAnimState("TransToBackUp")
			end
		EndScript
    End

    AnimationState        = TURN_LEFT WADING
		Animation = TurningLeft
			AnimationName           = MUCatapult_SKL.MUCatapult_TRNL
			AnimationMode       = LOOP
			AnimationSpeedFactorRange = 1.5 1.5
			AnimationBlendTime	= 15
		End
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "Attack" then
				CurDrawableSetTransitionAnimState("TransToTurnLeft")
			end
		EndScript
    End

    AnimationState        = TURN_RIGHT WADING
		Animation = TurningRight
			AnimationName           = MUCatapult_SKL.MUCatapult_TRNR
			AnimationSpeedFactorRange = 1.5 1.5
			AnimationMode       = LOOP
			AnimationBlendTime	= 15
		End
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "Attack" then
				CurDrawableSetTransitionAnimState("TransToTurnRight")
			end
		EndScript
    End
    
	AnimationState						= MOVING WADING
		Animation						= Move
		    AnimationName				= MUCatapult_SKL.MUCatapult_MOVA
	        AnimationMode				= LOOP
			AnimationSpeedFactorRange	= 2.0 2.0           ; get those legs pumping!
			AnimationBlendTime			= 15
		End
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "Attack" then
				CurDrawableSetTransitionAnimState("TransToMove")
			end
		EndScript
    End

    AnimationState				=	MOVING BACKING_UP
		Animation				=	BackingUp
			AnimationName           = MUCatapult_SKL.MUCatapult_BAKA
			AnimationMode       = LOOP
			AnimationSpeedFactorRange = 2.0 2.0           ; get those legs pumping!
		End
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "Attack" then
				CurDrawableSetTransitionAnimState("TransToBackUp")
			end
		EndScript
    End

    AnimationState        = TURN_LEFT 
		Animation = TurningLeft
			AnimationName           = MUCatapult_SKL.MUCatapult_TRNL
			AnimationMode       = LOOP
			AnimationSpeedFactorRange = 1.5 1.5
			AnimationBlendTime	= 15
		End
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "Attack" then
				CurDrawableSetTransitionAnimState("TransToTurnLeft")
			end
		EndScript
    End

    AnimationState        = TURN_RIGHT 
		Animation = TurningRight
			AnimationName           = MUCatapult_SKL.MUCatapult_TRNR
			AnimationSpeedFactorRange = 1.5 1.5
			AnimationMode       = LOOP
			AnimationBlendTime	= 15
		End
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "Attack" then
				CurDrawableSetTransitionAnimState("TransToTurnRight")
			end
		EndScript
    End
    
	AnimationState						= MOVING
		Animation						= Move
		    AnimationName				= MUCatapult_SKL.MUCatapult_MOVA
	        AnimationMode				= LOOP
			AnimationSpeedFactorRange	= 2.0 2.0           ; get those legs pumping!
			AnimationBlendTime			= 15
		End
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "Attack" then
				CurDrawableSetTransitionAnimState("TransToMove")
			end
		EndScript
    End

   	AnimationState		= FIRING_OR_PREATTACK_A 
		StateName			= Attack
		Animation			= ATKA
			AnimationName           = MUCatapult_SKL.MUCatapult_ATKA
			AnimationMode       = ONCE
			UseWeaponTiming	= Yes
		End
		FrameForPristineBonePositions = 24
		ParticleSysBone     = Projectile FlamingRockStart FollowBone:Yes 
		ParticleSysBone     = Projectile FlamingRockLenzflareStart FollowBone:Yes 
	End

	AnimationState			= FIRING_OR_PREATTACK_B
		StateName			= Attack
		Animation			= ATKB
			AnimationName   = MUCatapult_SKL.MUCatapult_ATKA
			AnimationMode   = ONCE
			UseWeaponTiming	= Yes
		End
		BeginScript
			CurDrawableShowSubObject("BoneProjectile")
		EndScript
		FrameForPristineBonePositions = 24
	End
    
    ; --------- Click and Hit Reactions ------------	
		AnimationState = HIT_REACTION HIT_LEVEL_1
			Animation = Hit_Level_1_a
				AnimationName = MUCatapult_SKL.MUCatapult_HITA
				AnimationMode = ONCE
			End
		End
		
		
		TransitionState = TransToBackUp
			Animation = BAKA
				AnimationName = MUCatapult_SKL.MUCatapult_BAKA
				AnimationMode = ONCE
				AnimationSpeedFactorRange = 2.0 2.0
				AnimationBlendTime	=	30
			End
		End
		
		TransitionState = TransToMove
			Animation = MOVA
				AnimationName = MUCatapult_SKL.MUCatapult_MOVA
				AnimationMode = ONCE
				AnimationSpeedFactorRange = 2.0 2.0
				AnimationBlendTime	=	30
			End
		End
		
		TransitionState = TransToTurnLeft
			Animation = TRNL
				AnimationName = MUCatapult_SKL.MUCatapult_TRNL
				AnimationMode = ONCE
				AnimationSpeedFactorRange = 1.5 1.5
				AnimationBlendTime	=	30
			End
		End
		
		TransitionState = TransToTurnRight
			Animation = TRNR
				AnimationName = MUCatapult_SKL.MUCatapult_TRNR
				AnimationMode = ONCE
				AnimationSpeedFactorRange = 1.5 1.5
				AnimationBlendTime	=	30
			End
		End

;;;;;;;;;; SUDDEN DEMO FIX ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;;;;;;;;; Taken out due to missing animations associated with the MUCatpD ;;;;;;;;;;;;
;    ModelConditionState        = DAMAGED
;      Model               = MUCatpD
;    End
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

    TrackMarks = EXTireTrack2_Temp.tga
    TrackMarksLeftBone = WheelL02
    TrackMarksRightBone = WheelR02



    ; These parameters are only used if the model has a separate suspension,
    ; and the locomotor has HasSuspension = Yes.
    LeftFrontTireBone           = WheelL01
    RightFrontTireBone          = WheelR01
    LeftRearTireBone            = WheelL02
    RightRearTireBone           = WheelR02
    TireRotationMultiplier      = 0.2   ; this * speed = rotation.
    PowerslideRotationAddition  = 2.5   ; This speed is added to the rotation speed when powersliding.

    ParticlesAttachedToAnimatedBones = Yes

 End

	Draw = W3DScriptedModelDraw DustEffects
	    DefaultModelConditionState
	      Model = None
	    End
	    IdleAnimationState
	    End
	    AnimationState = MOVING WADING
			ParticleSysBone     = WheelL02 FootstepSlash
			ParticleSysBone     = WheelR02 FootstepSlash
	    End
	    AnimationState        = TURN_RIGHT
			ParticleSysBone     = WheelL02 GenericSiegeTrailDust
			ParticleSysBone     = WheelR02 GenericSiegeTrailDust
	    End
	    AnimationState        = TURN_LEFT
			ParticleSysBone     = WheelL02 GenericSiegeTrailDust
			ParticleSysBone     = WheelR02 GenericSiegeTrailDust
	    End
	    AnimationState = MOVING
			ParticleSysBone     = WheelL02 GenericSiegeTrailDust
			ParticleSysBone     = WheelR02 GenericSiegeTrailDust
	    End
	End
 
 
	; ***DESIGN parameters ***
	Side					= Mordor
	EditorSorting			= UNIT
	ThreatLevel				= 2.0
	TransportSlotCount		= 1
	ShowHealthInSelectionDecal = Yes
	ThingClass				= MACHINE
	
	CommandSet				= MordorCatapultCommandSet
	CommandPoints = 5

 
	WeaponSet
		Conditions          = None
		Weapon              = PRIMARY     MordorCatapultRock
		AutoChooseSources	= PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
		Weapon				= SECONDARY	MordorCatapultHumanHeads
		AutoChooseSources	= SECONDARY NONE

	End
  
	ArmorSet
		Conditions      = None
		Armor           = SiegeEngineArmor
		DamageFX        = None
	End
    
    ; This is required so that the build phase lasts as long as the anim.
	BuildFadeInOnCreateTime = 16.0
	
  VisionRange = MORDOR_CATAPULT_VISION_RANGE 
  ShroudClearingRange = SHROUD_CLEAR_ARTILLERY
  
  BountyValue = MORDOR_CATAPULT_BOUNTY_VALUE 
  DisplayName = OBJECT:MordorCatapult
  CrushableLevel = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CrusherLevel   = 0  ;What can I crush?: 0 = small animals, 1 = infantry, 2 = trees, 3 = vehicles
  ImmuneToShockwave = Yes


	; *** AUDIO Parameters ***;

	VoiceAttack					= CatapultVoiceAttack
	VoiceAttack2				= OrcVoiceAttack2
	VoiceAttackMachine			= CatapultVoiceAttack
	VoiceAttackStructure			= CatapultVoiceAttackBuilding
	VoiceCreated				= CampOrcCreateCatapult
	VoiceFullyCreated 			= CampOrcCreateCatapult
	VoiceMove					= CatapultVoiceMove
	VoiceMove2					= OrcVoiceMove2
	VoiceMoveToCamp				= CatapultVoiceMove
	VoicePriority				= 28				;55
	VoiceSelect					= CatapultVoiceSelect
	VoiceSelect2				= CatapultVoiceSelect2
	VoiceSelectBattle 			= CatapultVoiceSelectBattle
	VoiceGuard					= CatapultVoiceMove
	

	VoiceEnterStateAttack			= CatapultVoiceEnterStateAttack
	VoiceEnterStateAttackMachine		= CatapultVoiceEnterStateAttackBuilding
	VoiceEnterStateAttackStructure	= CatapultVoiceEnterStateAttackBuilding
	VoiceEnterStateMove			= CatapultVoiceEnterStateMove
	VoiceEnterStateMoveToCamp		= CatapultVoiceEnterStateMove
	
	SoundMoveLoop				= CatapultMoveLoop
	SoundMoveStart				= CatapultMoveStart
	
	;UnitSpecificSounds
	;End

	EvaEventDamagedOwner			= UnitUnderAttack 			;Eva event to trigger when unit is damaged

	Behavior = LargeGroupAudioUpdate ModuleTag_LGAU					; Tie into LargeGroupAudio system
		Key = SiegeWeapon Catapult
	End

	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		MaxUpdateRangeCap = 800
		AnimationSound = Sound:CatapultCreate	Animation:MUCatapult_A.MUCatapult_A		Frames:130
		AnimationSound = Sound:BodyFallOrc		Animation:MUCatapltD_SKL.MUCatapltD_ANM	Frames:35
	End


	; *** ENGINEERING Parameters ***

	RadarPriority = UNIT
	KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS MACHINE SCORE CAN_ATTACK CAN_ATTACK_WALLS

	Body = ActiveBody ModuleTag_02
		CheerRadius 	  = EMOTION_CHEER_RADIUS
		MaxHealth         = MORDOR_CATAPULT_HEALTH
		MaxHealthDamaged  = MORDOR_CATAPULT_HEALTH
	End
 
    BuildCost = MORDOR_CATAPULT_BUILDCOST
    BuildTime = MORDOR_CATAPULT_BUILDTIME


	Behavior = GrantUpgradeCreate ModuleTag_HumanHeads
		UpgradeToGrant = Upgrade_CatapultHumanHeads
	End

; 	Behavior = WeaponSetUpgrade ModuleTag_HumanHeadsUpgrade
;		TriggeredBy = Upgrade_CatapultHumanHeads
;	End

	Behavior = AIUpdateInterface ModuleTag_03
		AutoAcquireEnemiesWhenIdle = Yes ATTACK_BUILDINGS ;Yes
		AILuaEventsList	=	CatapultFunctions
	End

	LocomotorSet
		Locomotor = CatapultLocomotor
		Condition = SET_NORMAL
		Speed     = 30 ;16
	End

	Behavior = PhysicsBehavior ModuleTag_04
	End

	;Behavior = SlowDeathBehavior ModuleTag_05
	;	DeathTypes = ALL +EXPLODED +BURNED
	;	SinkDelay = 3000
	;	SinkRate = 0.40     ; in Dist/Sec
	;	DestructionDelay = 8000  ;8000
	;	;OCL = FINAL OCL_MordorCatapultExplodeDeath
	;	;FX = INITIAL FX_CatapultDieExplosion
	;	Sound = INITIAL	OrcVoiceDie
	;End

	Behavior = SlowDeathBehavior ModuleTag_06 
		DeathTypes = ALL
		SinkDelay = 3000
		SinkRate = 1.20     ; in Dist/Sec
		DestructionDelay = 28000  ;8000
		;OCL = FINAL OCL_MordorCatapultDeath
		FX = INITIAL FX_CatapultDie
		Sound = INITIAL	OrcVoiceDie
	End

	Behavior = SquishCollide ModuleTag_07
		;nothing
	End

	Behavior = TransitionDamageFX ModuleTag_8
	;    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:FireBuildingLarge         ; persistant damage effect
		ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_GondorCatapultTransitionMedium     ; damage impact particle effect
	;   ReallyDamagedOCL1 = Loc: X:0 Y:0 Z:0 OCL:OCL_FireFieldSmall                           ; spawn debris and splinters
	End

  	Behavior = HitReactionBehavior HitReactionBehaviorModuleTag
		HitReactionLifeTimer1 = 2000 ; level 1 (light  damage)  hit reaction animations in frames (5 per sec)
		HitReactionLifeTimer2 = 15 ; level 2 (medium damage)  hit reaction animations in frames (5 per sec)
		HitReactionLifeTimer3 = 10 ; level 3 (heavy  damage)  hit reaction animations in frames (5 per sec)

		HitReactionThreshold1 = 10.0   ; level 1 (light  damage) threshold trigger
		HitReactionThreshold2 = 25000.0  ; level 2 (medium damage) threshold trigger
		HitReactionThreshold3 = 50000.0  ; level 3 (heavy  damage) threshold trigger
	End
 
  Geometry = BOX
  GeometryMajorRadius = 29.0
  GeometryMinorRadius = 15.0	
  GeometryHeight = 18.4
  GeometryIsSmall = No
  Shadow = SHADOW_VOLUME
  HealthBoxHeightOffset		= 20.0
End

;------------------------------------------------------------------------------
Object MordorCatapultDeadHulk
  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
    DefaultModelConditionState
      Model = MUCatpDMG
    End
  End

  ; ***DESIGN parameters ***
  Side = Mordor
  EditorSorting   = DEBRIS

  ; *** ENGINEERING Parameters ***
  KindOf =  CAN_CAST_REFLECTIONS IMMOBILE NO_COLLIDE HULK

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 1.0
  End

;  Behavior = PhysicsBehavior ModuleTag_03
;    AllowBouncing = Yes
;    KillWhenRestingOnGround = Yes
;  End

  Behavior = LifetimeUpdate ModuleTag_04
    MinLifetime = 0.0        ; min lifetime in msec
    MaxLifetime = 0.0        ; max lifetime in msec
  End

  Behavior = SlowDeathBehavior ModuleTag_05
    SinkDelay                 = 3000
    SinkRate                  = 1.6     ; in Dist/Sec
    DestructionDelay          = 15000
    ;Sound			= INITIAL	OrcVoiceDie
  End

End
;------------------------------------------------------------------------------
; aka Oliphant, MordorOliphant, OliphantMordor, Mumakil, MordorMumakil, MumakilMordor
Object MordorMumakil                         ;BALANCE Mumakil 
  ; *** ART Parameters ***
  
  ; This is required for garrisoned objects - please put in all objects.
  ButtonImage		= BMMumakilPen_Mumakil
  SelectPortrait	= UPIsenguard_Mumakil

  Draw = W3DQuadrupedDraw ModuleTag_01
  
  	  OkToChangeModelColor = Yes
  	  
    StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD
    ExtraPublicBone            = e_FrontLeft
    ExtraPublicBone            = e_FrontRight
    ExtraPublicBone            = e_BackLeft
    ExtraPublicBone            = e_BackRight
    ExtraPublicBone            = B_CARGO0
    ExtraPublicBone            = B_BANNER
    ExtraPublicBone            = B_LLLID

    DefaultModelConditionState
      Model               =  MUMumakil_SKN
    End
    
    ExtraPublicBone = DockWaiting01
    ExtraPublicBone = DockStart
;    ExtraPublicBone = DockExit			; No longer used
    ExtraPublicBone = DockAction
    
    ;-------------------------------------------------------------------
     
	; THE VETERAN/UPGRADED MODEL IS DEFINED BELOW ALL THE ANIMATIONS... DON'T MOVE IT !

    IdleAnimationState 

      Animation = IDLA ; 
        AnimationName = MUMumakil_SKL.MUMumakil_IDLA ; 
        AnimationPriority = 5 ; // will be chosen 5 times more often than a default (1) priority animation.
      End
      Animation = IDLB 
        AnimationName = MUMumakil_SKL.MUMumakil_IDLB ; 
      End
      
      BeginScript
        Prev = CurDrawablePrevAnimationState()
        if Prev == "Charging" then CurDrawableSetTransitionAnimState("TRANS_StopCharge") return end
        if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.66 then CurDrawableSetTransitionAnimState("TRANS_Stop66") return end
        if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.33 then CurDrawableSetTransitionAnimState("TRANS_Stop33") return end
        if Prev == "Moving" then CurDrawableSetTransitionAnimState("TRANS_Stop00") return end
      EndScript
      StateName = Idle
    End
        
	;; SPECIAL HACK CASE FOR RUNNING OFF THE MAP, SUPERCEEDS ANY OTHER ANIMS ;;;
    ; moving off map  - potentially E3 HACK
    AnimationState        = MOVING AFLAME RUNNING_OFF_MAP
      Animation           = MoveIt
        AnimationName		= MUMumakil_SKL.MUMumakil_RUNA
        AnimationMode       = LOOP
        AnimationBlendTime  = 15
      End
      ParticleSysBone     = BN_TENT_01 OliphantFire1 FollowBone:yes
      ParticleSysBone     = BN_TENT_01 OliphantSmoke1 FollowBone:yes
      ParticleSysBone     = BN_TENT_01 OliphantEmbers FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantFire2 FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantSmoke2 FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantEmbers FollowBone:yes
      ParticleSysBone     = B_CARGO001 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone     = B_CARGO001 FireSmall FollowBone:yes
      ParticleSysBone     = B_CARGO002 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone     = B_CARGO002 FireSmall FollowBone:yes
    End

	;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
	;;;; DYING VETERAN AFLAME ANIMS ;;;;
	;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;	
;-----------veteran
    ; Decay when dead flat for the VETERAN UPGRADED VERSION
    ModelConditionState    = WEAPONSET_PLAYER_UPGRADE DYING DECAY DEATH_1 AFLAME
      Model                = MUMumakilVDIBF
    End;

    AnimationState         = WEAPONSET_PLAYER_UPGRADE DYING DECAY DEATH_1 AFLAME 
      Animation            = dead1
        AnimationName       = MUMumakilVDIBFS.MUMumakilVDIBFA
        AnimationMode      = ONCE
      End
    End
    
    ; Decay when dead on the right side for the VETERAN UPGRADED VERSION
    ModelConditionState    = WEAPONSET_PLAYER_UPGRADE DYING DECAY DEATH_2 AFLAME 
      Model                = MUMumakilVDIAF
    End;

    AnimationState         = WEAPONSET_PLAYER_UPGRADE DYING DECAY DEATH_2 AFLAME 
      Animation            = dead2
        AnimationName      = MUMumakilVDIAFS.MUMumakilVDIAFA
        AnimationMode      = ONCE
      End
    End

    ; Decay when dead on the left side for the VETERAN UPGRADED VERSION
    ModelConditionState    = WEAPONSET_PLAYER_UPGRADE DYING DECAY DEATH_3 AFLAME 
      Model                = MUMumakilVDICF
    End;

    AnimationState         = WEAPONSET_PLAYER_UPGRADE DYING DECAY DEATH_3 AFLAME 
      Animation            = dead3
        AnimationName      = MUMumakilVDICFS.MUMumakilVDICFA
        AnimationMode      = ONCE
      End
    End
;-----------veteran

	;;;;;;;;;;;;;;;;;;;;;;;;;;;;
	;;;; DYING AFLAME ANIMS ;;;;
	;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    ; Decay when dead flat 
    ModelConditionState    = DYING DECAY DEATH_1 AFLAME
      Model                = MUMumakilDIEBF
    End;

    AnimationState         = DYING DECAY DEATH_1 AFLAME
      Animation            = dead1
        AnimationName       = MUMumakilDIEBFS.MUMumakilDIEBA
        AnimationMode      = ONCE
      End
    End
    
    ; Decay when dead on the right side
    ModelConditionState    = DYING DECAY DEATH_2 AFLAME
      Model                = MUMumakilDIEAF
    End;

    AnimationState         = DYING DECAY DEATH_2 AFLAME
      Animation            = dead2
        AnimationName      = MUMumakilDIEAFS.MUMumakilDIEAA
        AnimationMode      = ONCE
      End
    End

    ; Decay when dead on the left side
    ModelConditionState    = DYING DECAY DEATH_3 AFLAME
      Model                = MUMumakilDIECF
    End;
    
    AnimationState         = DYING DECAY DEATH_3 AFLAME
      Animation            = dead3
        AnimationName      = MUMumakilDIECFS.MUMumakilDIECA
        AnimationMode      = ONCE
      End
    End
    
    ; Die - Fall flat
    AnimationState         = DYING DEATH_1 AFLAME
      Animation            = Die1
        AnimationName      = MUMumakil_SKL.MUMumakil_DIEB
        AnimationMode      = ONCE
      End
      ParticleSysBone     = BN_TENT_01 OliphantFire1 FollowBone:yes
      ParticleSysBone     = BN_TENT_01 OliphantSmoke1 FollowBone:yes
      ParticleSysBone     = BN_TENT_01 OliphantEmbers FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantFire2 FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantSmoke2 FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantEmbers FollowBone:yes
      ParticleSysBone     = B_CARGO001 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone     = B_CARGO001 FireSmall FollowBone:yes
      ParticleSysBone     = B_CARGO002 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone     = B_CARGO002 FireSmall FollowBone:yes            
    End
    
    ; Fall to right side aflame
    AnimationState         = DYING DEATH_2 AFLAME
      Animation            = Die1
        AnimationName      = MUMumakil_SKL.MUMumakil_DIEA
        AnimationMode      = ONCE
      End
      ParticleSysBone     = BN_TENT_01 OliphantFire1 FollowBone:yes
      ParticleSysBone     = BN_TENT_01 OliphantSmoke1 FollowBone:yes
      ParticleSysBone     = BN_TENT_01 OliphantEmbers FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantFire2 FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantSmoke2 FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantEmbers FollowBone:yes
      ParticleSysBone     = B_CARGO001 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone     = B_CARGO001 FireSmall FollowBone:yes
      ParticleSysBone     = B_CARGO002 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone     = B_CARGO002 FireSmall FollowBone:yes            
    End

    ; Fall to left side aflame
    AnimationState         = DYING DEATH_3 AFLAME
      Animation            = Die2
        AnimationName      = MUMumakil_SKL.MUMumakil_DIEC
        AnimationMode      = ONCE
      End
      ParticleSysBone     = BN_TENT_01 OliphantFire1 FollowBone:yes
      ParticleSysBone     = BN_TENT_01 OliphantSmoke1 FollowBone:yes
      ParticleSysBone     = BN_TENT_01 OliphantEmbers FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantFire2 FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantSmoke2 FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantEmbers FollowBone:yes
      ParticleSysBone     = B_CARGO001 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone     = B_CARGO001 FireSmall FollowBone:yes
      ParticleSysBone     = B_CARGO002 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone     = B_CARGO002 FireSmall FollowBone:yes            
    End

	;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
	;;;; DYING VETERAN ANIMS ;;;;
	;;;;;;;;;;;;;;;;;;;;;;;;;;;;;	
;-----------veteran
       ; Decay when dead flat for VETERAN UPGRADED UNITS
    ModelConditionState    = WEAPONSET_PLAYER_UPGRADE DYING DEATH_1 DECAY 
      Model                = MUMumakilVDIBF
    End

    AnimationState         = WEAPONSET_PLAYER_UPGRADE DYING DEATH_1 DECAY 
      Animation            = dead1
        AnimationName       = MUMumakilVDIBFS.MUMUMAKILVDIBFA
        AnimationMode      = ONCE
        AnimationBlendTime  = 0
      End
    End
     
    ; Decay when dead on the right side for VETERAN UPGRADED UNITS
    ModelConditionState    = WEAPONSET_PLAYER_UPGRADE DYING DEATH_2 DECAY
      Model                = MUMumakilVDIAF
    End;

    AnimationState         = WEAPONSET_PLAYER_UPGRADE DYING DEATH_2 DECAY
      Animation            = dead2
        AnimationName      = MUMumakilVDIAFS.MUMUMAKILVDIAFA
        AnimationMode      = ONCE
        AnimationBlendTime  = 0
      End
    End

    ; Decay when dead on the left side for VETERAN UPGRADED UNITS
    ModelConditionState    = WEAPONSET_PLAYER_UPGRADE DYING DEATH_3 DECAY
      Model                = MUMumakilVDICF
    End;

    AnimationState         = WEAPONSET_PLAYER_UPGRADE DYING DEATH_3 DECAY
      Animation            = dead3
        AnimationName      = MUMumakilVDICFS.MUMUMAKILVDICFA
        AnimationMode      = ONCE
        AnimationBlendTime  = 0
      End
    End
;-----------veteran

    ModelConditionState WEAPONSET_PLAYER_UPGRADE
		Model						= MUMumakilUP
	End
    
	;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
	;;;; DYING REGUALR ANIMS ;;;;
	;;;;;;;;;;;;;;;;;;;;;;;;;;;;;	
    ; Decay when dead flat 
    ModelConditionState    = DYING DECAY DEATH_1
      Model                = MUMumakilDIEBF
    End;

    AnimationState         = DYING DECAY DEATH_1
      Animation            = dead1
        AnimationName       = MUMumakilDIEBFS.MUMumakilDIEBA
        AnimationMode      = ONCE
        AnimationBlendTime  = 0
      End
    End
   
    AnimationState         = DYING DEATH_1
      Animation            = Die1
        AnimationName      = MUMumakil_SKL.MUMumakil_DIEB
        AnimationMode      = ONCE
        AnimationBlendTime  = 0
      End
    End

    ; Decay when dead on the right side
    ModelConditionState    = DYING DECAY DEATH_2
      Model                = MUMumakilDIEAF
    End;

    AnimationState         = DYING DECAY DEATH_2
      Animation            = dead2
        AnimationName      = MUMumakilDIEAFS.MUMumakilDIEAA
        AnimationMode      = ONCE
        AnimationBlendTime  = 0
      End
    End

    ; Decay when dead on the left side
    ModelConditionState    = DYING DECAY DEATH_3
      Model                = MUMumakilDIECF
    End;

    AnimationState         = DYING DECAY DEATH_3
      Animation            = dead3
        AnimationName      = MUMumakilDIECFS.MUMumakilDIECA
        AnimationMode      = ONCE
        AnimationBlendTime  = 0
      End
    End

    ; Fall to right side
    AnimationState         = DYING DEATH_2
      Animation            = Die1
        AnimationName      = MUMumakil_SKL.MUMumakil_DIEA
        AnimationMode      = ONCE
		
      End
		ParticleSysBone     = NONE NazgulSplatDust FollowBone:yes
		ParticleSysBone     = BN_TENT_01 OliphantSplatDust FollowBone:yes
    End

    ; Fall to left side
    AnimationState         = DYING DEATH_3
      Animation            = Die2
        AnimationName      = MUMumakil_SKL.MUMumakil_DIEC
        AnimationMode      = ONCE
      End
		ParticleSysBone     = NONE NazgulSplatDust FollowBone:yes
		ParticleSysBone     = BN_TENT_01 OliphantSplatDust FollowBone:yes
    End
    
    AnimationState         = DYING DEATH_4
      Animation            = Die4
        AnimationName      = MUMumakil_SKL.MUMumakil_DIED
        AnimationMode      = ONCE
      End
		ParticleSysBone     = NONE NazgulSplatDust FollowBone:yes
		ParticleSysBone     = BN_TENT_01 OliphantSplatDust FollowBone:yes
    End

	;;;;;;;;;;;;;;;;;;;
	; JUST BUILT ANIM ;
	;;;;;;;;;;;;;;;;;;;
    AnimationState  = JUST_BUILT
      Animation = Being_Built
        AnimationName		= MuMumakil_skl.MuMumakil_BLDA
        AnimationMode		= ONCE
        AnimationBlendTime	= 0 ; must be zero.
      End
    End
   
	;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
	; BEING MUMAKIL AFALME REALLYDAMAGED ANIMATION STATES ;
	;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    AnimationState      = MOVING TURN_LEFT_HIGH_SPEED AFLAME REALLYDAMAGED
      Animation = Turn
        AnimationName = MUMumakil_SKL.MUMumakil_TRNLB
        AnimationMode       = LOOP
        AnimationBlendTime  = 5
      End
      ParticleSysBone     = BN_TENT_01 OliphantFire1 FollowBone:yes
      ParticleSysBone     = BN_TENT_01 OliphantSmoke1 FollowBone:yes
      ParticleSysBone     = BN_TENT_01 OliphantEmbers FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantFire2 FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantSmoke2 FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantEmbers FollowBone:yes
      ParticleSysBone     = B_CARGO001 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone     = B_CARGO001 FireSmall FollowBone:yes
      ParticleSysBone     = B_CARGO002 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone     = B_CARGO002 FireSmall FollowBone:yes

      FXEvent	= Frame:7 Name: FX_MUMLeftRearFootStep
	FXEvent	= Frame:28 Name: FX_MUMLeftFrontFootStep	  
	FXEvent	= Frame:44 Name: FX_MUMRightRearFootStep
	FXEvent	= Frame:50 Name: FX_MUMRightFrontFootStep

      StateName           = Turn_Left_High_Speed_Damaged
      BeginScript
        Prev = CurDrawablePrevAnimationState()
        if Prev == "Moving" or Prev == "Turn_Right_High_Speed_Damaged" then CurDrawableAllowToContinue() return end
      EndScript
    End

    AnimationState        = MOVING TURN_RIGHT_HIGH_SPEED AFLAME REALLYDAMAGED
      Animation = Turn
        AnimationName = MUMumakil_SKL.MUMumakil_TRNRB
        AnimationMode       = LOOP
        AnimationBlendTime  = 5
      End
      ParticleSysBone     = BN_TENT_01 OliphantFire1 FollowBone:yes
      ParticleSysBone     = BN_TENT_01 OliphantSmoke1 FollowBone:yes
      ParticleSysBone     = BN_TENT_01 OliphantEmbers FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantFire2 FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantSmoke2 FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantEmbers FollowBone:yes
      ParticleSysBone     = B_CARGO001 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone     = B_CARGO001 FireSmall FollowBone:yes
      ParticleSysBone     = B_CARGO002 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone     = B_CARGO002 FireSmall FollowBone:yes

	  FXEvent	= Frame:7 Name: FX_MUMLeftRearFootStep
	  FXEvent	= Frame:28 Name: FX_MUMLeftFrontFootStep	  
	  FXEvent	= Frame:44 Name: FX_MUMRightRearFootStep
	  FXEvent	= Frame:50 Name: FX_MUMRightFrontFootStep

      StateName           = Turn_Right_High_Speed_Damaged
      BeginScript
        Prev = CurDrawablePrevAnimationState()
        if Prev == "Moving" or Prev == "Turn_Left_High_Speed_Damaged" then CurDrawableAllowToContinue() return end
      EndScript
    End
	
    AnimationState        = MOVING TURN_LEFT AFLAME REALLYDAMAGED
      Animation           = Turn
        AnimationName = MUMumakil_SKL.MUMumakil_TRNL
        AnimationMode       = LOOP
        AnimationBlendTime  = 20
      End
      ParticleSysBone     = BN_TENT_01 OliphantFire1 FollowBone:yes
      ParticleSysBone     = BN_TENT_01 OliphantSmoke1 FollowBone:yes
      ParticleSysBone     = BN_TENT_01 OliphantEmbers FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantFire2 FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantSmoke2 FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantEmbers FollowBone:yes
      ParticleSysBone     = B_CARGO001 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone     = B_CARGO001 FireSmall FollowBone:yes
      ParticleSysBone     = B_CARGO002 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone     = B_CARGO002 FireSmall FollowBone:yes

	  FXEvent	= Frame:01 Name: FX_MUMRightRearFootStep
	  FXEvent	= Frame:40 Name: FX_MUMRightFrontFootStep
	  FXEvent	= Frame:42 Name: FX_MUMLeftRearFootStep
	  FXEvent	= Frame:44 Name: FX_MUMLeftFrontFootStep
	  FXEvent	= Frame:45 Name: FX_MUMRightRearFootStep
	  FXEvent	= Frame:85 Name: FX_MUMLeftRearFootStep
	  FXEvent	= Frame:88 Name: FX_MUMRightFrontFootStep
	  FXEvent	= Frame:89 Name: FX_MUMLeftFrontFootStep

      StateName       = Turn_Slow
    End

    AnimationState        = MOVING TURN_RIGHT AFLAME REALLYDAMAGED
      Animation           = Turn
        AnimationName = MUMumakil_SKL.MUMumakil_TRNR
        AnimationMode       = LOOP
        AnimationBlendTime  = 20
      End
      ParticleSysBone     = BN_TENT_01 OliphantFire1 FollowBone:yes
      ParticleSysBone     = BN_TENT_01 OliphantSmoke1 FollowBone:yes
      ParticleSysBone     = BN_TENT_01 OliphantEmbers FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantFire2 FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantSmoke2 FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantEmbers FollowBone:yes
      ParticleSysBone     = B_CARGO001 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone     = B_CARGO001 FireSmall FollowBone:yes
      ParticleSysBone     = B_CARGO002 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone     = B_CARGO002 FireSmall FollowBone:yes

	  FXEvent	= Frame:01 Name: FX_MUMRightRearFootStep
	  FXEvent	= Frame:40 Name: FX_MUMRightFrontFootStep
	  FXEvent	= Frame:42 Name: FX_MUMLeftRearFootStep
	  FXEvent	= Frame:44 Name: FX_MUMLeftFrontFootStep
	  FXEvent	= Frame:45 Name: FX_MUMRightRearFootStep
	  FXEvent	= Frame:85 Name: FX_MUMLeftRearFootStep
	  FXEvent	= Frame:88 Name: FX_MUMRightFrontFootStep
	  FXEvent	= Frame:89 Name: FX_MUMLeftFrontFootStep

      StateName       = Turn_Slow
    End

   AnimationState         = MOVING WEAPONSET_RAMPAGE AFLAME
      Animation = Walk
        AnimationName = MUMumakil_SKL.MUMumakil_RPGA
        AnimationMode       = LOOP
        AnimationBlendTime  = 15
      End
      ParticleSysBone     = BN_TENT_01 OliphantFire1 FollowBone:yes
      ParticleSysBone     = BN_TENT_01 OliphantSmoke1 FollowBone:yes
      ParticleSysBone     = BN_TENT_01 OliphantEmbers FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantFire2 FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantSmoke2 FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantEmbers FollowBone:yes
      ParticleSysBone     = B_CARGO001 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone     = B_CARGO001 FireSmall FollowBone:yes
      ParticleSysBone     = B_CARGO002 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone     = B_CARGO002 FireSmall FollowBone:yes   
      
	  FXEvent	= Frame:41 Name: FX_MUMLeftFrontFootStep
	  FXEvent	= Frame:43 Name: FX_MUMRightFrontFootStep
	  FXEvent	= Frame:69 Name: FX_MUMRightRearFootStep
	  FXEvent	= Frame:89 Name: FX_MUMLeftFrontFootStep
	  FXEvent	= Frame:101 Name: FX_MUMRightFrontFootStep
	  FXEvent	= Frame:110 Name: FX_MUMRightRearFootStep
	  FXEvent	= Frame:111 Name: FX_MUMLeftFrontFootStep
	  FXEvent	= Frame:123 Name: FX_MUMRightRearFootStep
	  FXEvent	= Frame:127 Name: FX_MUMRightFrontFootStep
	  FXEvent	= Frame:133 Name: FX_MUMLeftFrontFootStep
	  FXEvent	= Frame:149 Name: FX_MUMLeftRearFootStep
	  FXEvent	= Frame:185 Name: FX_MUMLeftFrontFootStep
	  FXEvent	= Frame:195 Name: FX_MUMRightFrontFootStep
	  FXEvent	= Frame:211 Name: FX_MUMRightRearFootStep
	  FXEvent	= Frame:216 Name: FX_MUMRightFrontFootStep
	  FXEvent	= Frame:235 Name: FX_MUMLeftRearFootStep
               
      StateName           = Moving
      BeginScript
        Prev = CurDrawablePrevAnimationState()
        if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_Accelerate1_aflame") end
      EndScript
    End

    AnimationState			= WEAPONSET_RAMPAGE AFLAME
      Animation				= Rampage
        AnimationName		= MUMumakil_SKL.MUMumakil_RPGA
        AnimationMode       = LOOP
        ;AnimationBlendTime  = 5
      End
      ParticleSysBone     = BN_TENT_01 OliphantFire1 FollowBone:yes
      ParticleSysBone     = BN_TENT_01 OliphantSmoke1 FollowBone:yes
      ParticleSysBone     = BN_TENT_01 OliphantEmbers FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantFire2 FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantSmoke2 FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantEmbers FollowBone:yes
      ParticleSysBone     = B_CARGO001 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone     = B_CARGO001 FireSmall FollowBone:yes
      ParticleSysBone     = B_CARGO002 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone     = B_CARGO002 FireSmall FollowBone:yes

	  FXEvent	= Frame:41 Name: FX_MUMLeftFrontFootStep
	  FXEvent	= Frame:43 Name: FX_MUMRightFrontFootStep
	  FXEvent	= Frame:69 Name: FX_MUMRightRearFootStep
	  FXEvent	= Frame:89 Name: FX_MUMLeftFrontFootStep
	  FXEvent	= Frame:101 Name: FX_MUMRightFrontFootStep
	  FXEvent	= Frame:110 Name: FX_MUMRightRearFootStep
	  FXEvent	= Frame:111 Name: FX_MUMLeftFrontFootStep
	  FXEvent	= Frame:123 Name: FX_MUMRightRearFootStep
	  FXEvent	= Frame:127 Name: FX_MUMRightFrontFootStep
	  FXEvent	= Frame:133 Name: FX_MUMLeftFrontFootStep
	  FXEvent	= Frame:149 Name: FX_MUMLeftRearFootStep
	  FXEvent	= Frame:185 Name: FX_MUMLeftFrontFootStep
	  FXEvent	= Frame:195 Name: FX_MUMRightFrontFootStep
	  FXEvent	= Frame:211 Name: FX_MUMRightRearFootStep
	  FXEvent	= Frame:216 Name: FX_MUMRightFrontFootStep
	  FXEvent	= Frame:235 Name: FX_MUMLeftRearFootStep
    End
    
	;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
	; END MUMAKIL AFALME REALLYDAMAGED ANIMATION STATES ;
	;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    


;;;;;;;;;;;;;;;;;;;;;;;;;;
; Attacking Animations
;;;;;;;;;;;;;;;;;;;;;;;;;;
    AnimationState				= TURN_LEFT ATTACKING
		Animation				= Turn
			AnimationName		= MUMumakil_SKL.MUMumakil_TRNLB
			AnimationMode       = LOOP
			AnimationBlendTime  = 5
		End

	  FXEvent	= Frame:7 Name: FX_MUMLeftRearFootStep
	  FXEvent	= Frame:28 Name: FX_MUMLeftFrontFootStep	  
	  FXEvent	= Frame:44 Name: FX_MUMRightRearFootStep
	  FXEvent	= Frame:50 Name: FX_MUMRightFrontFootStep

	End
	
    AnimationState			= TURN_RIGHT ATTACKING
      Animation				= Turn
        AnimationName		= MUMumakil_SKL.MUMumakil_TRNRB
        AnimationMode       = LOOP
        AnimationBlendTime  = 5
      End

	  FXEvent	= Frame:7 Name: FX_MUMLeftRearFootStep
	  FXEvent	= Frame:28 Name: FX_MUMLeftFrontFootStep	  
	  FXEvent	= Frame:44 Name: FX_MUMRightRearFootStep
	  FXEvent	= Frame:50 Name: FX_MUMRightFrontFootStep

	End	

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
; Charging animations
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
     AnimationState        = MOVING TURN_LEFT_HIGH_SPEED CHARGING
      Animation = Turn
        AnimationName = MUMumakil_SKL.MUMumakil_WLKB1
        AnimationMode       = LOOP
        AnimationBlendTime  = 15
      End

	  FXEvent	= Frame:2 Name: FX_MUMLeftRearFootStep
	  FXEvent	= Frame:27 Name: FX_MUMLeftFrontFootStep	  
	  FXEvent	= Frame:43 Name: FX_MUMRightRearFootStep
	  FXEvent	= Frame:68 Name: FX_MUMRightFrontFootStep

      StateName           = Turn_Left_High_Speed
      BeginScript
        Prev = CurDrawablePrevAnimationState()
        if Prev == "Moving" or Prev == "Turn_Right_High_Speed" then CurDrawableAllowToContinue() return end
      EndScript
    End

    AnimationState         = MOVING TURN_RIGHT_HIGH_SPEED CHARGING
      Animation = Turn
        AnimationName = MUMumakil_SKL.MUMumakil_WLKB2
        AnimationMode       = LOOP
        AnimationBlendTime  = 15
      End

	  FXEvent	= Frame:2 Name: FX_MUMLeftRearFootStep
	  FXEvent	= Frame:27 Name: FX_MUMLeftFrontFootStep	  
	  FXEvent	= Frame:43 Name: FX_MUMRightRearFootStep
	  FXEvent	= Frame:68 Name: FX_MUMRightFrontFootStep

      StateName           = Turn_Right_High_Speed
      BeginScript
        Prev = CurDrawablePrevAnimationState()
        if Prev == "Moving" or Prev == "Turn_Left_High_Speed" then CurDrawableAllowToContinue() return end
      EndScript
    End
        
    AnimationState			= MOVING TURN_LEFT CHARGING
		Animation			= Turn
			AnimationName		= MUMumakil_SKL.MUMumakil_TRNLB
			AnimationMode       = LOOP
			AnimationBlendTime  = 5
		End

	  FXEvent	= Frame:2 Name: FX_MUMLeftRearFootStep
	  FXEvent	= Frame:30 Name: FX_MUMLeftFrontFootStep
	  FXEvent	= Frame:42 Name: FX_MUMRightRearFootStep
	  FXEvent	= Frame:50 Name: FX_MUMRightFrontFootStep

	End
	
    AnimationState          = MOVING TURN_RIGHT CHARGING
      Animation = Turn
        AnimationName = MUMumakil_SKL.MUMumakil_TRNRB
        AnimationMode       = LOOP
        AnimationBlendTime  = 5
      End

	  FXEvent	= Frame:2 Name: FX_MUMLeftRearFootStep
	  FXEvent	= Frame:30 Name: FX_MUMLeftFrontFootStep
	  FXEvent	= Frame:42 Name: FX_MUMRightRearFootStep
	  FXEvent	= Frame:50 Name: FX_MUMRightFrontFootStep

	End	

    AnimationState          = MOVING CHARGING
      Animation = Charge
        AnimationName = MUMumakil_SKL.MUMumakil_MFDA
        AnimationMode       = LOOP
        AnimationBlendTime  = 15
;       AnimationSpeedFactorRange = 0.5 0.5
      End

	  FXEvent	= Frame:2 Name: FX_MUMLeftRearFootStep
	  FXEvent	= Frame:7 Name: FX_MUMLeftFrontFootStep
	  FXEvent	= Frame:14 Name: FX_MUMRightRearFootStep
	  FXEvent	= Frame:20 Name: FX_MUMRightFrontFootStep

      StateName           = Charging
      BeginScript
        Prev = CurDrawablePrevAnimationState()
        if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_Accelerate2") end
      EndScript

    End

   AnimationState				=	FIRING_OR_PREATTACK_B
		Animation				= Stomp
				AnimationName	= MUMumakil_SKL.MUMumakil_ATKA
				AnimationMode   = ONCE
				UseWeaponTiming	= Yes
		End
		Animation				= SwipeLeft
				AnimationName	= MUMumakil_SKL.MUMumakil_ATKB
				AnimationMode   = ONCE
				UseWeaponTiming	= Yes
		End
		Animation				= SwipeRight
				AnimationName	= MUMumakil_SKL.MUMumakil_ATKC
				AnimationMode   = ONCE
				UseWeaponTiming	= Yes
		End
		Animation				= Lunge
				AnimationName	= MUMumakil_SKL.MUMumakil_ATKD
				AnimationMode   = ONCE
				UseWeaponTiming	= Yes
		End
		BeginScript
			if CurDrawableIsCurrentTargetKindof("STRUCTURE") then
				return ("Lunge")
			else
				if GetClientRandomNumberReal(0,1) > 0.33 then
					return ("Stomp")
				else 
					if GetClientRandomNumberReal(0,1) > 0.50 then	; that's 50% of remaining 2/3 chance.
						return ("SwipeLeft")
					else
						return ("SwipeRight")
					end
				end
			end
		EndScript
	End

    AnimationState          = MOVING TURN_LEFT_HIGH_SPEED REALLYDAMAGED
      Animation = Turn
        AnimationName = MUMumakil_SKL.MUMumakil_TRNLB
        AnimationMode       = LOOP
        AnimationBlendTime  = 5
      End

	  FXEvent	= Frame:7 Name: FX_MUMLeftRearFootStep
	  FXEvent	= Frame:28 Name: FX_MUMLeftFrontFootStep	  
	  FXEvent	= Frame:44 Name: FX_MUMRightRearFootStep
	  FXEvent	= Frame:50 Name: FX_MUMRightFrontFootStep

      StateName           = Turn_Left_High_Speed_Damaged
      BeginScript
        Prev = CurDrawablePrevAnimationState()
        if Prev == "Moving" or Prev == "Turn_Right_High_Speed_Damaged" then CurDrawableAllowToContinue() return end
      EndScript
    End

    AnimationState        = MOVING TURN_RIGHT_HIGH_SPEED REALLYDAMAGED
      Animation = Turn
        AnimationName = MUMumakil_SKL.MUMumakil_TRNRB
        AnimationMode       = LOOP
        AnimationBlendTime  = 5
      End

	  FXEvent	= Frame:7 Name: FX_MUMLeftRearFootStep
	  FXEvent	= Frame:28 Name: FX_MUMLeftFrontFootStep	  
	  FXEvent	= Frame:44 Name: FX_MUMRightRearFootStep
	  FXEvent	= Frame:50 Name: FX_MUMRightFrontFootStep

      StateName           = Turn_Right_High_Speed_Damaged
      BeginScript
        Prev = CurDrawablePrevAnimationState()
        if Prev == "Moving" or Prev == "Turn_Left_High_Speed_Damaged" then CurDrawableAllowToContinue() return end
      EndScript
    End

	;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
	; BEING MUMAKIL AFALME ANIMATION STATES ;
	;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
     AnimationState         = MOVING TURN_LEFT_HIGH_SPEED AFLAME
      Animation = Turn
        AnimationName = MUMumakil_SKL.MUMumakil_TRNLA
        AnimationMode       = LOOP
        AnimationBlendTime  = 15
      End
      ParticleSysBone     = BN_TENT_01 OliphantFire1 FollowBone:yes
      ParticleSysBone     = BN_TENT_01 OliphantSmoke1 FollowBone:yes
      ParticleSysBone     = BN_TENT_01 OliphantEmbers FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantFire2 FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantSmoke2 FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantEmbers FollowBone:yes
      ParticleSysBone     = B_CARGO001 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone     = B_CARGO001 FireSmall FollowBone:yes
      ParticleSysBone     = B_CARGO002 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone     = B_CARGO002 FireSmall FollowBone:yes  
      
	  FXEvent	= Frame:1 Name: FX_MUMLeftRearFootStep
	  FXEvent	= Frame:8 Name: FX_MUMLeftFrontFootStep
	  FXEvent	= Frame:13 Name: FX_MUMRightRearFootStep	  
	  FXEvent	= Frame:20 Name: FX_MUMRightFrontFootStep
                
      StateName           = Turn_Left_High_Speed
      BeginScript
        Prev = CurDrawablePrevAnimationState()
        if Prev == "Moving" or Prev == "Turn_Right_High_Speed" then CurDrawableAllowToContinue() return end
      EndScript
    End

    AnimationState        = MOVING TURN_RIGHT_HIGH_SPEED AFLAME
      Animation = Turn
        AnimationName = MUMumakil_SKL.MUMumakil_TRNRA
        AnimationMode       = LOOP
        AnimationBlendTime  = 15
      End
      ParticleSysBone     = BN_TENT_01 OliphantFire1 FollowBone:yes
      ParticleSysBone     = BN_TENT_01 OliphantSmoke1 FollowBone:yes
      ParticleSysBone     = BN_TENT_01 OliphantEmbers FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantFire2 FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantSmoke2 FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantEmbers FollowBone:yes
      ParticleSysBone     = B_CARGO001 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone     = B_CARGO001 FireSmall FollowBone:yes
      ParticleSysBone     = B_CARGO002 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone     = B_CARGO002 FireSmall FollowBone:yes 
      
	  FXEvent	= Frame:1 Name: FX_MUMLeftRearFootStep
	  FXEvent	= Frame:8 Name: FX_MUMLeftFrontFootStep
	  FXEvent	= Frame:13 Name: FX_MUMRightRearFootStep	  
	  FXEvent	= Frame:20 Name: FX_MUMRightFrontFootStep      
                 
      StateName           = Turn_Right_High_Speed
      BeginScript
        Prev = CurDrawablePrevAnimationState()
        if Prev == "Moving" or Prev == "Turn_Left_High_Speed" then CurDrawableAllowToContinue() return end
      EndScript
    End

    AnimationState        = MOVING TURN_LEFT AFLAME
      Animation           = Turn
        AnimationName = MUMumakil_SKL.MUMumakil_TRNL
        AnimationMode       = LOOP
        AnimationBlendTime  = 15
      End
      ParticleSysBone     = BN_TENT_01 OliphantFire1 FollowBone:yes
      ParticleSysBone     = BN_TENT_01 OliphantSmoke1 FollowBone:yes
      ParticleSysBone     = BN_TENT_01 OliphantEmbers FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantFire2 FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantSmoke2 FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantEmbers FollowBone:yes
      ParticleSysBone     = B_CARGO001 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone     = B_CARGO001 FireSmall FollowBone:yes
      ParticleSysBone     = B_CARGO002 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone     = B_CARGO002 FireSmall FollowBone:yes  
      
	  FXEvent	= Frame:01 Name: FX_MUMRightRearFootStep
	  FXEvent	= Frame:40 Name: FX_MUMRightFrontFootStep
	  FXEvent	= Frame:42 Name: FX_MUMLeftRearFootStep
	  FXEvent	= Frame:44 Name: FX_MUMLeftFrontFootStep
	  FXEvent	= Frame:45 Name: FX_MUMRightRearFootStep
	  FXEvent	= Frame:85 Name: FX_MUMLeftRearFootStep
	  FXEvent	= Frame:88 Name: FX_MUMRightFrontFootStep
	  FXEvent	= Frame:89 Name: FX_MUMLeftFrontFootStep      
                
      StateName       = Turn_Slow
    End

    AnimationState        = MOVING TURN_RIGHT AFLAME
      Animation           = Turn
        AnimationName = MUMumakil_SKL.MUMumakil_TRNR
        AnimationMode       = LOOP
        AnimationBlendTime  = 15
      End
      ParticleSysBone     = BN_TENT_01 OliphantFire1 FollowBone:yes
      ParticleSysBone     = BN_TENT_01 OliphantSmoke1 FollowBone:yes
      ParticleSysBone     = BN_TENT_01 OliphantEmbers FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantFire2 FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantSmoke2 FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantEmbers FollowBone:yes
      ParticleSysBone     = B_CARGO001 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone     = B_CARGO001 FireSmall FollowBone:yes
      ParticleSysBone     = B_CARGO002 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone     = B_CARGO002 FireSmall FollowBone:yes  
      
	  FXEvent	= Frame:01 Name: FX_MUMRightRearFootStep
	  FXEvent	= Frame:40 Name: FX_MUMRightFrontFootStep
	  FXEvent	= Frame:42 Name: FX_MUMLeftRearFootStep
	  FXEvent	= Frame:44 Name: FX_MUMLeftFrontFootStep
	  FXEvent	= Frame:45 Name: FX_MUMRightRearFootStep
	  FXEvent	= Frame:85 Name: FX_MUMLeftRearFootStep
	  FXEvent	= Frame:88 Name: FX_MUMRightFrontFootStep
	  FXEvent	= Frame:89 Name: FX_MUMLeftFrontFootStep      
                
      StateName       = Turn_Slow
    End

    AnimationState          = MOVING AFLAME
      Animation = Walk
        AnimationName       = MUMumakil_SKL.MUMumakil_RUNA
        AnimationMode       = LOOP
        AnimationBlendTime  = 5
      End
      ParticleSysBone     = BN_TENT_01 OliphantFire1 FollowBone:yes
      ParticleSysBone     = BN_TENT_01 OliphantSmoke1 FollowBone:yes
      ParticleSysBone     = BN_TENT_01 OliphantEmbers FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantFire2 FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantSmoke2 FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantEmbers FollowBone:yes
      ParticleSysBone     = B_CARGO001 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone     = B_CARGO001 FireSmall FollowBone:yes
      ParticleSysBone     = B_CARGO002 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone     = B_CARGO002 FireSmall FollowBone:yes  
      
	  FXEvent	= Frame:1 Name: FX_MUMLeftRearFootStep
	  FXEvent	= Frame:8 Name: FX_MUMLeftFrontFootStep
	  FXEvent	= Frame:11 Name: FX_MUMRightRearFootStep
	  FXEvent	= Frame:20 Name: FX_MUMRightFrontFootStep      
                
      StateName           = Moving
      BeginScript
        Prev = CurDrawablePrevAnimationState()
        if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_Accelerate1_aflame") end
      EndScript
    End

    TransitionState = TRANS_Accelerate1_aflame
      Animation = Transition
        ; TRANS_Stand TRANS_Moving00     ; transition from the standing into the moving animation
        ;TRANS_Turn_Slow TRANS_Moving00 ; transition from the slow turn into the moving animation
        AnimationName = MUMumakil_SKL.MUMumakil_ACCL1
        AnimationMode       = ONCE
        AnimationBlendTime  = 10
      End
      ParticleSysBone     = BN_TENT_01 OliphantFire1 FollowBone:yes
      ParticleSysBone     = BN_TENT_01 OliphantSmoke1 FollowBone:yes
      ParticleSysBone     = BN_TENT_01 OliphantEmbers FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantFire2 FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantSmoke2 FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantEmbers FollowBone:yes
      ParticleSysBone     = B_CARGO001 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone     = B_CARGO001 FireSmall FollowBone:yes
      ParticleSysBone     = B_CARGO002 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone     = B_CARGO002 FireSmall FollowBone:yes 

	  FXEvent	= Frame:27 Name: FX_MUMRightRearFootStep
	  FXEvent	= Frame:48 Name: FX_MUMRightFrontFootStep
	  FXEvent	= Frame:50 Name: FX_MUMLeftRearFootStep	  
    
    End

    TransitionState = TRANS_Accelerate2_aflame
      Animation = Transition
        AnimationName = MUMumakil_SKL.MUMumakil_ACCL2
        AnimationMode       = ONCE
        AnimationBlendTime  = 10
      End
      
      ParticleSysBone     = BN_TENT_01 OliphantFire1 FollowBone:yes
      ParticleSysBone     = BN_TENT_01 OliphantSmoke1 FollowBone:yes
      ParticleSysBone     = BN_TENT_01 OliphantEmbers FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantFire2 FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantSmoke2 FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantEmbers FollowBone:yes
      ParticleSysBone     = B_CARGO001 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone     = B_CARGO001 FireSmall FollowBone:yes
      ParticleSysBone     = B_CARGO002 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone     = B_CARGO002 FireSmall FollowBone:yes 

	  FXEvent	= Frame:21 Name: FX_MUMRightFrontFootStep
	  FXEvent	= Frame:25 Name: FX_MUMRightRearFootStep    
    End

    TransitionState    = TRANS_StopCharge_aflame
      Animation = Transition
        ;TRANS_Charging TRANS_Stand     ; transition from charging anim to the stop anim
        AnimationName = MUMumakil_SKL.MUMumakil_DECL4
        AnimationMode       = ONCE
        AnimationBlendTime  = 10
      End
      ParticleSysBone     = BN_TENT_01 OliphantFire1 FollowBone:yes
      ParticleSysBone     = BN_TENT_01 OliphantSmoke1 FollowBone:yes
      ParticleSysBone     = BN_TENT_01 OliphantEmbers FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantFire2 FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantSmoke2 FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantEmbers FollowBone:yes
      ParticleSysBone     = B_CARGO001 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone     = B_CARGO001 FireSmall FollowBone:yes
      ParticleSysBone     = B_CARGO002 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone     = B_CARGO002 FireSmall FollowBone:yes 

	  FXEvent	= Frame:1 Name: FX_MUMRightFrontFootStep
	  FXEvent	= Frame:1 Name: FX_MUMLeftRearFootStep
	  FXEvent	= Frame:11 Name: FX_MUMLeftFrontFootStep
	  FXEvent	= Frame:18 Name: FX_MUMRightRearFootStep    
	  FXEvent	= Frame:59 Name: FX_MUMRightFrontFootStep
	  FXEvent	= Frame:59 Name: FX_MUMRightRearFootStep
	  FXEvent	= Frame:68 Name: FX_MUMLeftFrontFootStep
	  FXEvent	= Frame:75 Name: FX_MUMLeftRearFootStep
    
    End

    TransitionState = TRANS_Stop66_aflame
      Animation = Transition
        ;TRANS_Moving66 TRANS_Stand     ; transition from between 66% - 100% of the moving animation
        AnimationName           = MUMumakil_SKL.MUMumakil_DECL3
        AnimationMode       = ONCE
        AnimationBlendTime  = 10
      End
      ParticleSysBone     = BN_TENT_01 OliphantFire1 FollowBone:yes
      ParticleSysBone     = BN_TENT_01 OliphantSmoke1 FollowBone:yes
      ParticleSysBone     = BN_TENT_01 OliphantEmbers FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantFire2 FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantSmoke2 FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantEmbers FollowBone:yes
      ParticleSysBone     = B_CARGO001 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone     = B_CARGO001 FireSmall FollowBone:yes
      ParticleSysBone     = B_CARGO002 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone     = B_CARGO002 FireSmall FollowBone:yes      
    End

    TransitionState = TRANS_Stop33_aflame
      Animation = Transition
        ;TRANS_Moving33 TRANS_Stand     ; transition from between 33% - 66% of the moving animation
        AnimationName = MUMumakil_SKL.MUMumakil_DECL2
        AnimationMode       = ONCE
        AnimationBlendTime  = 10
      End
      ParticleSysBone     = BN_TENT_01 OliphantFire1 FollowBone:yes
      ParticleSysBone     = BN_TENT_01 OliphantSmoke1 FollowBone:yes
      ParticleSysBone     = BN_TENT_01 OliphantEmbers FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantFire2 FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantSmoke2 FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantEmbers FollowBone:yes
      ParticleSysBone     = B_CARGO001 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone     = B_CARGO001 FireSmall FollowBone:yes
      ParticleSysBone     = B_CARGO002 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone     = B_CARGO002 FireSmall FollowBone:yes      
    End

    TransitionState = TRANS_Stop00_aflame
      Animation = Transition
        ;TRANS_Moving33 TRANS_Stand     ; transition from between 33% - 66% of the moving animation
        AnimationName = MUMumakil_SKL.MUMumakil_DECL1
        AnimationMode       = ONCE
        AnimationBlendTime  = 10
      End
      ParticleSysBone     = BN_TENT_01 OliphantFire1 FollowBone:yes
      ParticleSysBone     = BN_TENT_01 OliphantSmoke1 FollowBone:yes
      ParticleSysBone     = BN_TENT_01 OliphantEmbers FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantFire2 FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantSmoke2 FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantEmbers FollowBone:yes
      ParticleSysBone     = B_CARGO001 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone     = B_CARGO001 FireSmall FollowBone:yes
      ParticleSysBone     = B_CARGO002 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone     = B_CARGO002 FireSmall FollowBone:yes      
    End    
    
    
	;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
	; END MUMAKIL AFALME ANIMATION STATES ;
	;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

     AnimationState        = MOVING TURN_LEFT_HIGH_SPEED
      Animation = Turn
        AnimationName = MUMumakil_SKL.MUMumakil_WLKB1
        AnimationMode       = LOOP
        AnimationBlendTime  = 15
      End

	  FXEvent	= Frame:2 Name: FX_MUMLeftRearFootStep
	  FXEvent	= Frame:27 Name: FX_MUMLeftFrontFootStep	  
	  FXEvent	= Frame:43 Name: FX_MUMRightRearFootStep
	  FXEvent	= Frame:68 Name: FX_MUMRightFrontFootStep

      StateName           = Turn_Left_High_Speed
      BeginScript
        Prev = CurDrawablePrevAnimationState()
        if Prev == "Moving" or Prev == "Turn_Right_High_Speed" then CurDrawableAllowToContinue() return end
      EndScript
    End

    AnimationState        = MOVING TURN_RIGHT_HIGH_SPEED
      Animation = Turn
        AnimationName = MUMumakil_SKL.MUMumakil_WLKB2
        AnimationMode       = LOOP
        AnimationBlendTime  = 15
      End

	  FXEvent	= Frame:2 Name: FX_MUMLeftRearFootStep
	  FXEvent	= Frame:27 Name: FX_MUMLeftFrontFootStep	  
	  FXEvent	= Frame:43 Name: FX_MUMRightRearFootStep
	  FXEvent	= Frame:68 Name: FX_MUMRightFrontFootStep

      StateName           = Turn_Right_High_Speed
      BeginScript
        Prev = CurDrawablePrevAnimationState()
        if Prev == "Moving" or Prev == "Turn_Left_High_Speed" then CurDrawableAllowToContinue() return end
      EndScript
    End
    
    AnimationState				=	MOVING BACKING_UP
		Animation				=	BackingUp
			AnimationName		=	MUMumakil_SKL.MUMumakil_BAKA
			AnimationMode		=	LOOP
		End
		Flags					=	RANDOMSTART
	End

    AnimationState        = MOVING TURN_LEFT
      Animation           = Turn
        AnimationName = MUMumakil_SKL.MUMumakil_TRNL
        AnimationMode       = LOOP
        AnimationBlendTime  = 30
      End

	  FXEvent	= Frame:01 Name: FX_MUMRightRearFootStep
	  FXEvent	= Frame:40 Name: FX_MUMRightFrontFootStep
	  FXEvent	= Frame:42 Name: FX_MUMLeftRearFootStep
	  FXEvent	= Frame:44 Name: FX_MUMLeftFrontFootStep
	  FXEvent	= Frame:45 Name: FX_MUMRightRearFootStep
	  FXEvent	= Frame:85 Name: FX_MUMLeftRearFootStep
	  FXEvent	= Frame:88 Name: FX_MUMRightFrontFootStep
	  FXEvent	= Frame:89 Name: FX_MUMLeftFrontFootStep

      StateName       = Turn_Slow
    End

    AnimationState        = MOVING TURN_RIGHT
      Animation           = Turn
        AnimationName = MUMumakil_SKL.MUMumakil_TRNR
        AnimationMode       = LOOP
        AnimationBlendTime  = 30
      End

	  FXEvent	= Frame:01 Name: FX_MUMRightRearFootStep
	  FXEvent	= Frame:40 Name: FX_MUMRightFrontFootStep
	  FXEvent	= Frame:42 Name: FX_MUMLeftRearFootStep
	  FXEvent	= Frame:44 Name: FX_MUMLeftFrontFootStep
	  FXEvent	= Frame:45 Name: FX_MUMRightRearFootStep
	  FXEvent	= Frame:85 Name: FX_MUMLeftRearFootStep
	  FXEvent	= Frame:88 Name: FX_MUMRightFrontFootStep
	  FXEvent	= Frame:89 Name: FX_MUMLeftFrontFootStep

      StateName       = Turn_Slow
    End


   AnimationState        = MOVING REALLYDAMAGED
      Animation = Walk
        AnimationName = MUMumakil_SKL.MUMumakil_WLKC
        AnimationMode       = LOOP
        AnimationBlendTime  = 15
      End

	  FXEvent	= Frame:8 Name: FX_MUMLeftRearFootStep
	  FXEvent	= Frame:31 Name: FX_MUMLeftFrontFootStep
	  FXEvent	= Frame:46 Name: FX_MUMRightRearFootStep
	  FXEvent	= Frame:55 Name: FX_MUMRightFrontFootStep

      StateName           = Moving
      BeginScript
        Prev = CurDrawablePrevAnimationState()
        ;if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_Accelerate1") end
      EndScript
    End   

    AnimationState        = MOVING
      Animation = Walk
        ;AnimationName       = MUMumakil_SKL.MUMumakil_RUNB
        AnimationName       = MUMumakil_SKL.MUMumakil_WLKA
        AnimationMode       = LOOP
        AnimationBlendTime  = 10
      End

	  FXEvent	= Frame:9 Name: FX_MUMLeftRearFootStep
	  FXEvent	= Frame:31 Name: FX_MUMLeftFrontFootStep
	  FXEvent	= Frame:44 Name: FX_MUMRightRearFootStep
	  FXEvent	= Frame:74 Name: FX_MUMRightFrontFootStep

      StateName           = Moving
      BeginScript
        Prev = CurDrawablePrevAnimationState()
        ;if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_Accelerate1") end
      EndScript
    End

    TransitionState = TRANS_Accelerate1
      Animation = Transition
        AnimationName		= MUMumakil_SKL.MUMumakil_ACCL1
        AnimationMode       = ONCE
        AnimationBlendTime	= 10
      End

	  FXEvent	= Frame:27 Name: FX_MUMRightRearFootStep
	  FXEvent	= Frame:48 Name: FX_MUMRightFrontFootStep
	  FXEvent	= Frame:50 Name: FX_MUMLeftRearFootStep	

    End

    TransitionState = TRANS_Accelerate2
      Animation = Transition
        AnimationName		= MUMumakil_SKL.MUMumakil_ACCL2
        AnimationMode       = ONCE
        AnimationBlendTime  = 10
      End

	  FXEvent	= Frame:21 Name: FX_MUMRightFrontFootStep
	  FXEvent	= Frame:25 Name: FX_MUMRightRearFootStep 

    End

    TransitionState = TRANS_StopCharge
      Animation = Transition
        ;TRANS_Charging TRANS_Stand     ; transition from charging anim to the stop anim
        AnimationName = MUMumakil_SKL.MUMumakil_DECL4
        AnimationMode       = ONCE
        ;AnimationBlendTime  = 10
      End

	  FXEvent	= Frame:1 Name: FX_MUMRightFrontFootStep
	  FXEvent	= Frame:1 Name: FX_MUMLeftRearFootStep
	  FXEvent	= Frame:11 Name: FX_MUMLeftFrontFootStep
	  FXEvent	= Frame:18 Name: FX_MUMRightRearFootStep    
	  FXEvent	= Frame:59 Name: FX_MUMRightFrontFootStep
	  FXEvent	= Frame:59 Name: FX_MUMRightRearFootStep
	  FXEvent	= Frame:68 Name: FX_MUMLeftFrontFootStep
	  FXEvent	= Frame:75 Name: FX_MUMLeftRearFootStep

    End

    TransitionState = TRANS_Stop66
      Animation = Transition
        ;TRANS_Moving66 TRANS_Stand     ; transition from between 66% - 100% of the moving animation
        AnimationName           = MUMumakil_SKL.MUMumakil_DECL3
        AnimationMode       = ONCE
        ;AnimationBlendTime  = 10
      End
    End

    TransitionState = TRANS_Stop33
      Animation = Transition
        ;TRANS_Moving33 TRANS_Stand     ; transition from between 33% - 66% of the moving animation
        AnimationName = MUMumakil_SKL.MUMumakil_DECL2
        AnimationMode       = ONCE
        ;AnimationBlendTime  = 10
      End
    End

    TransitionState = TRANS_Stop00
      Animation = Transition
        ;TRANS_Moving33 TRANS_Stand     ; transition from between 33% - 66% of the moving animation
        AnimationName = MUMumakil_SKL.MUMumakil_DECL1
        AnimationMode       = ONCE
        ;AnimationBlendTime  = 10
      End
    End


    AnimationState			= AFLAME
      Animation = IDLA ; 
        AnimationName = MUMumakil_SKL.MUMumakil_IDLA ; 
        AnimationPriority = 5 ; // will be chosen 5 times more often than a default (1) priority animation.
        AnimationBlendTime  = 10
      End
      Animation = IDLB 
        AnimationName = MUMumakil_SKL.MUMumakil_IDLB ; 
        AnimationBlendTime  = 10
      End
      ParticleSysBone     = BN_TENT_01 OliphantFire1 FollowBone:yes
      ParticleSysBone     = BN_TENT_01 OliphantSmoke1 FollowBone:yes
      ParticleSysBone     = BN_TENT_01 OliphantEmbers FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantFire2 FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantSmoke2 FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantEmbers FollowBone:yes
      ParticleSysBone     = B_CARGO001 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone     = B_CARGO001 FireSmall FollowBone:yes
      ParticleSysBone     = B_CARGO002 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone     = B_CARGO002 FireSmall FollowBone:yes
      BeginScript
        Prev = CurDrawablePrevAnimationState()
        if Prev == "Charging" then CurDrawableSetTransitionAnimState("TRANS_StopCharge_aflame") return end
        if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.66 then CurDrawableSetTransitionAnimState("TRANS_Stop66_aflame") return end
        if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.33 then CurDrawableSetTransitionAnimState("TRANS_Stop33_aflame") return end
        if Prev == "Moving" then CurDrawableSetTransitionAnimState("TRANS_Stop00_aflame") return end
      EndScript
      StateName = Idle
    End
    
    AnimationState = HIT_REACTION HIT_LEVEL_1
		Animation = Hit_Level_1_a
			AnimationName = MUMumakil_SKL.MUMumakil_HITA
			AnimationMode = ONCE
		End
	End

    ; Used by FOUR_LEGS_HUGE locomotor type to balance on the ground
    LeftFrontFootBone           = e_FrontLeft
    RightFrontFootBone          = e_FrontRight
    LeftRearFootBone            = e_BackLeft
    RightRearFootBone           = e_BackRight

  End
 
  ; ***DESIGN parameters ***
  Side = Mordor
  EditorSorting = UNIT
	ThreatLevel = 3.0
  ThingClass = LARGE_MONSTER

  ShowHealthInSelectionDecal = Yes

	ShroudClearingRange = 280
	TransportSlotCount = 10
	ImmuneToShockwave = yes
	
	WeaponSet
		Conditions          = None 
		Weapon				= PRIMARY	  MordorMumakilCharge
		Weapon              = SECONDARY   MordorMumakilKnockback
	    AutoChooseSources	= PRIMARY NONE
	End
	  
	WeaponSet
		Conditions          = RAMPAGE
		Weapon              = PRIMARY     MumakilRampage
	End
  
  	WeaponSet
		Conditions = SPECIAL_UPGRADE
		Weapon				= PRIMARY	  MordorMumakilChargeSpecial
		Weapon              = SECONDARY   MordorMumakilKnockback
	    AutoChooseSources	= PRIMARY NONE
	End
  
  ArmorSet
    Conditions      = None
    Armor           = MumakilArmor
    DamageFX        = MumakilDamageFX
  End
  	VisionRange = VISION_STANDARD_LARGE_ANIMAL
  	ShroudClearingRange = SHROUD_CLEAR_STANDARD

	BountyValue = MORDOR_MUMAKIL_BOUNTY_VALUE
	DisplayName = OBJECT:MordorMumakil
	CrusherLevel           = 4  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
	CrushWeapon = MumakilCrush  
	CommandSet = MordorMumakilCommandSet
	CanPathThroughGates	= No
	CommandPoints = 30

 
	; *** AUDIO Parameters ***;

	VoiceAttack				= OliphantVoiceAttack
	;VoiceAttackCharge		= OliphantVoiceAttackCharge
	;VoiceAttackChargeTimeout	= 10000 ; In msec. Wait at least this long after playing VoiceAttack/Charge before playing VoiceAttackCharge again
	VoiceGuard				= OliphantVoiceSelect
	VoiceMove				= OliphantVoiceSelect
	VoiceSelect				= OliphantVoiceSelect
	VoiceCreated			= CampOrcCreateMumakil
	VoiceCreated2			= OliphantCreatedGlobal
	VoiceFullyCreated 		= CampOrcCreateMumakil
	VoicePriority			= 20	;7

	SoundAmbient			= OliphantAmbience  
  
	UnitSpecificSounds
		VoiceStartCharging = MumakilChargeVox ; Starting the head swing right now this moment 
	End

	EvaEventDamagedOwner		= UnitUnderAttack 		;Eva event to trigger when unit is damaged

	Behavior = LargeGroupAudioUpdate ModuleTag_LGAU			; Tie into LargeGroupAudio system
		Key = Monster Unit Mumakil
		UnitWeight = 5 ; Olie counts as 5 infantry when computing group size
	End

	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		MaxUpdateRangeCap = 800

		AnimationSound = Sound:MumakilPenMumakilBuild 					Animation:MuMumakil_skl.MuMumakil_BLDA	Frames:0

		AnimationSound = Sound:OliphantIdleTrumpet 					Animation:MUMumakil_SKL.MUMumakil_IDLB	Frames:18

		AnimationSound = Sound:OliphantFall 						Animation:MUMumakil_SKL.MUMumakil_DIEA	Frames:90
		AnimationSound = Sound:OliphantFall 						Animation:MUMumakil_SKL.MUMumakil_DIEB	Frames:85
		AnimationSound = Sound:OliphantFall 						Animation:MUMumakil_SKL.MUMumakil_DIEC	Frames:85
		AnimationSound = Sound:OliphantFall 						Animation:MUMumakil_SKL.MUMumakil_DIED	Frames:117
		AnimationSound = Sound:MumakilRampageStomp 	ExcludedMC:WADING		Animation:MUMumakil_SKL.MUMumakil_DIED	Frames:117

		AnimationSound = Sound:OliphantFootStep		ExcludedMC:WADING		Animation:MUMumakil_SKL.MUMumakil_HITA	Frames:4 11 23
		AnimationSound = Sound:OliphantFootStep		ExcludedMC:WADING		Animation:MUMumakil_SKL.MUMumakil_HITB	Frames:3 8 164 177
		AnimationSound = Sound:MumakilRampageStomp 	ExcludedMC:WADING		Animation:MUMumakil_SKL.MUMumakil_HITB	Frames:48
		AnimationSound = Sound:MumakilRampageVox2 					Animation:MUMumakil_SKL.MUMumakil_HITB	Frames:1
		AnimationSound = Sound:MumakilRampageWhoosh1 					Animation:MUMumakil_SKL.MUMumakil_HITB	Frames:10
		AnimationSound = Sound:MumakilRampageWhoosh2 					Animation:MUMumakil_SKL.MUMumakil_HITB	Frames:61

		AnimationSound = Sound:MumakilRampageWhoosh1 					Animation:MUMumakil_SKL.MUMumakil_RPGA	Frames:86
		AnimationSound = Sound:MumakilRampageWhoosh2 					Animation:MUMumakil_SKL.MUMumakil_RPGA	Frames:139
		AnimationSound = Sound:MumakilRampageVox1 					Animation:MUMumakil_SKL.MUMumakil_RPGA	Frames:1
		AnimationSound = Sound:MumakilRampageVox2 					Animation:MUMumakil_SKL.MUMumakil_RPGA	Frames:103
		AnimationSound = Sound:MumakilRampageStomp 	ExcludedMC:WADING		Animation:MUMumakil_SKL.MUMumakil_RPGA	Frames:42
		AnimationSound = Sound:OliphantFootStep		ExcludedMC:WADING		Animation:MUMumakil_SKL.MUMumakil_RPGA	Frames:89 100 127 185 208
		AnimationSound = Sound:OliphantFootStep		ExcludedMC:WADING		Animation:MUMumakil_SKL.MUMumakil_RPGB	Frames:259 270 297 355 378
		AnimationSound = Sound:MumakilRampageStomp 	ExcludedMC:WADING		Animation:MUMumakil_SKL.MUMumakil_RPGB	Frames:205
		AnimationSound = Sound:MumakilRampageVox1 					Animation:MUMumakil_SKL.MUMumakil_RPGB	Frames:206
		AnimationSound = Sound:MumakilRampageVox2 					Animation:MUMumakil_SKL.MUMumakil_RPGB	Frames:360
		AnimationSound = Sound:MumakilRampageVox3 					Animation:MUMumakil_SKL.MUMumakil_RPGB	Frames:6
		AnimationSound = Sound:MumakilRampageWhoosh1 					Animation:MUMumakil_SKL.MUMumakil_RPGB	Frames:262
		AnimationSound = Sound:MumakilRampageWhoosh2 					Animation:MUMumakil_SKL.MUMumakil_RPGB	Frames:352
		AnimationSound = Sound:OliphantFootStep		ExcludedMC:WADING		Animation:MUMumakil_SKL.MUMumakil_MFDA	Frames:4 10 15 20

		AnimationSound = Sound:MumakilRampageStomp 	ExcludedMC:WADING		Animation:MUMumakil_SKL.MUMumakil_ATKA	Frames:39
		AnimationSound = Sound:OliphantFootStep		ExcludedMC:WADING		Animation:MUMumakil_SKL.MUMumakil_ATKA	Frames:103
		AnimationSound = Sound:OliphantFootStep		ExcludedMC:WADING		Animation:MUMumakil_SKL.MUMumakil_ATKB	Frames:115
		AnimationSound = Sound:OliphantFootStep		ExcludedMC:WADING		Animation:MUMumakil_SKL.MUMumakil_ATKC	Frames:36
		AnimationSound = Sound:OliphantFootStep		ExcludedMC:WADING		Animation:MUMumakil_SKL.MUMumakil_ATKD	Frames:55 63

		AnimationSound = Sound:OliphantFootStep		ExcludedMC:WADING		Animation:MuMumakil_skl.MuMumakil_BLDA	Frames:70 94 117 132 158 172

		AnimationSound = Sound:OliphantFootStep		ExcludedMC:WADING		Animation:MUMumakil_SKL.MUMumakil_ACCL1	Frames:29 51 59
		AnimationSound = Sound:OliphantFootStep		ExcludedMC:WADING		Animation:MUMumakil_SKL.MUMumakil_ACCL2	Frames:24 41
		AnimationSound = Sound:OliphantFootStep		ExcludedMC:WADING		Animation:MUMumakil_SKL.MUMumakil_BAKA	Frames:35 75
		AnimationSound = Sound:OliphantFootStep		ExcludedMC:WADING		Animation:MUMumakil_SKL.MUMumakil_WLKA	Frames:7 30 48 72
		AnimationSound = Sound:OliphantFootStep		ExcludedMC:WADING		Animation:MUMumakil_SKL.MUMumakil_WLKB1	Frames:0 40
		AnimationSound = Sound:OliphantFootStep		ExcludedMC:WADING		Animation:MUMumakil_SKL.MUMumakil_WLKB2	Frames:0 40
		AnimationSound = Sound:OliphantFootStep		ExcludedMC:WADING		Animation:MUMumakil_SKL.MUMumakil_WLKC	Frames:5 25 41 52
		AnimationSound = Sound:OliphantFootStep		ExcludedMC:WADING		Animation:MUMumakil_SKL.MUMumakil_RUNA	Frames:4 9 14 19
		AnimationSound = Sound:OliphantFootStep		ExcludedMC:WADING		Animation:MUMumakil_SKL.MUMumakil_TRNL	Frames:40 80
		AnimationSound = Sound:OliphantFootStep		ExcludedMC:WADING		Animation:MUMumakil_SKL.MUMumakil_TRNR	Frames:40 80
		AnimationSound = Sound:OliphantFootStep		ExcludedMC:WADING		Animation:MUMumakil_SKL.MUMumakil_TRNLA	Frames:7 15 20 24
		AnimationSound = Sound:OliphantFootStep		ExcludedMC:WADING		Animation:MUMumakil_SKL.MUMumakil_TRNRA	Frames:7 15 20 24
		AnimationSound = Sound:OliphantFootStep		ExcludedMC:WADING		Animation:MUMumakil_SKL.MUMumakil_TRNLB	Frames:7 22 44 50
		AnimationSound = Sound:OliphantFootStep		ExcludedMC:WADING		Animation:MUMumakil_SKL.MUMumakil_TRNRB	Frames:7 22 44 50
		AnimationSound = Sound:OliphantFootStep		ExcludedMC:WADING		Animation:MUMumakil_SKL.MUMumakil_DECL1	Frames:60
		AnimationSound = Sound:OliphantFootStep		ExcludedMC:WADING		Animation:MUMumakil_SKL.MUMumakil_DECL2	Frames:24
		AnimationSound = Sound:OliphantFootStep		ExcludedMC:WADING		Animation:MUMumakil_SKL.MUMumakil_DECL3	Frames:25
		AnimationSound = Sound:OliphantFootStep		ExcludedMC:WADING		Animation:MUMumakil_SKL.MUMumakil_DECL4	Frames:59 68

		;---------- OliphantFootstepWater --------------

		AnimationSound = Sound:OliphantFootstepWater	RequiredMC:WADING		Animation:MUMumakil_SKL.MUMumakil_DIEA	Frames:90
		AnimationSound = Sound:OliphantFootstepWater	RequiredMC:WADING		Animation:MUMumakil_SKL.MUMumakil_DIEB	Frames:85
		AnimationSound = Sound:OliphantFootstepWater	RequiredMC:WADING		Animation:MUMumakil_SKL.MUMumakil_DIEC	Frames:85
		AnimationSound = Sound:OliphantFootstepWater	RequiredMC:WADING		Animation:MUMumakil_SKL.MUMumakil_DIED	Frames:117
		AnimationSound = Sound:OliphantFootstepWater	RequiredMC:WADING		Animation:MUMumakil_SKL.MUMumakil_DIED	Frames:117

		AnimationSound = Sound:OliphantFootstepWater	RequiredMC:WADING		Animation:MUMumakil_SKL.MUMumakil_HITA	Frames:4 11 23
		AnimationSound = Sound:OliphantFootstepWater	RequiredMC:WADING		Animation:MUMumakil_SKL.MUMumakil_HITB	Frames:3 8 164 177
		AnimationSound = Sound:OliphantFootstepWater 	RequiredMC:WADING		Animation:MUMumakil_SKL.MUMumakil_HITB	Frames:48

		AnimationSound = Sound:OliphantFootstepWater 	RequiredMC:WADING		Animation:MUMumakil_SKL.MUMumakil_RPGA	Frames:42
		AnimationSound = Sound:OliphantFootstepWater	RequiredMC:WADING		Animation:MUMumakil_SKL.MUMumakil_RPGA	Frames:89 100 127 185 208
		AnimationSound = Sound:OliphantFootstepWater	RequiredMC:WADING		Animation:MUMumakil_SKL.MUMumakil_RPGB	Frames:259 270 297 355 378
		AnimationSound = Sound:OliphantFootstepWater 	RequiredMC:WADING		Animation:MUMumakil_SKL.MUMumakil_RPGB	Frames:205
		AnimationSound = Sound:OliphantFootstepWater	RequiredMC:WADING		Animation:MUMumakil_SKL.MUMumakil_MFDA	Frames:4 10 15 20

		AnimationSound = Sound:OliphantFootstepWater 	RequiredMC:WADING		Animation:MUMumakil_SKL.MUMumakil_ATKA	Frames:39
		AnimationSound = Sound:OliphantFootstepWater	RequiredMC:WADING		Animation:MUMumakil_SKL.MUMumakil_ATKA	Frames:103
		AnimationSound = Sound:OliphantFootstepWater	RequiredMC:WADING		Animation:MUMumakil_SKL.MUMumakil_ATKB	Frames:115
		AnimationSound = Sound:OliphantFootstepWater	RequiredMC:WADING		Animation:MUMumakil_SKL.MUMumakil_ATKC	Frames:36
		AnimationSound = Sound:OliphantFootstepWater	RequiredMC:WADING		Animation:MUMumakil_SKL.MUMumakil_ATKD	Frames:55 63

		AnimationSound = Sound:OliphantFootstepWater	RequiredMC:WADING		Animation:MUMumakil_SKL.MUMumakil_ACCL1	Frames:29 51 59
		AnimationSound = Sound:OliphantFootstepWater	RequiredMC:WADING		Animation:MUMumakil_SKL.MUMumakil_ACCL2	Frames:24 41
		AnimationSound = Sound:OliphantFootstepWater	RequiredMC:WADING		Animation:MUMumakil_SKL.MUMumakil_BAKA	Frames:35 75
		AnimationSound = Sound:OliphantFootstepWater	RequiredMC:WADING		Animation:MUMumakil_SKL.MUMumakil_WLKA	Frames:7 30 48 72
		AnimationSound = Sound:OliphantFootstepWater	RequiredMC:WADING		Animation:MUMumakil_SKL.MUMumakil_WLKB1	Frames:0 40
		AnimationSound = Sound:OliphantFootstepWater	RequiredMC:WADING		Animation:MUMumakil_SKL.MUMumakil_WLKB2	Frames:0 40
		AnimationSound = Sound:OliphantFootstepWater	RequiredMC:WADING		Animation:MUMumakil_SKL.MUMumakil_WLKC	Frames:5 25 41 52
		AnimationSound = Sound:OliphantFootstepWater	RequiredMC:WADING		Animation:MUMumakil_SKL.MUMumakil_RUNA	Frames:4 9 14 19
		AnimationSound = Sound:OliphantFootstepWater	RequiredMC:WADING		Animation:MUMumakil_SKL.MUMumakil_TRNL	Frames:40 80
		AnimationSound = Sound:OliphantFootstepWater	RequiredMC:WADING		Animation:MUMumakil_SKL.MUMumakil_TRNR	Frames:40 80
		AnimationSound = Sound:OliphantFootstepWater	RequiredMC:WADING		Animation:MUMumakil_SKL.MUMumakil_TRNLA	Frames:7 15 20 24
		AnimationSound = Sound:OliphantFootstepWater	RequiredMC:WADING		Animation:MUMumakil_SKL.MUMumakil_TRNRA	Frames:7 15 20 24
		AnimationSound = Sound:OliphantFootstepWater	RequiredMC:WADING		Animation:MUMumakil_SKL.MUMumakil_TRNLB	Frames:7 22 44 50
		AnimationSound = Sound:OliphantFootstepWater	RequiredMC:WADING		Animation:MUMumakil_SKL.MUMumakil_TRNRB	Frames:7 22 44 50
		AnimationSound = Sound:OliphantFootstepWater	RequiredMC:WADING		Animation:MUMumakil_SKL.MUMumakil_DECL1	Frames:60
		AnimationSound = Sound:OliphantFootstepWater	RequiredMC:WADING		Animation:MUMumakil_SKL.MUMumakil_DECL2	Frames:24
		AnimationSound = Sound:OliphantFootstepWater	RequiredMC:WADING		Animation:MUMumakil_SKL.MUMumakil_DECL3	Frames:25
		AnimationSound = Sound:OliphantFootstepWater	RequiredMC:WADING		Animation:MUMumakil_SKL.MUMumakil_DECL4	Frames:59 68

		;--------- unused animations ----------
		;AnimationSound = Sound:OliphantFall 		Animation:MUMumakil_SKL.MUMumakil_DIEF	Frames:50
		;AnimationSound = Sound:OliphantFootStep 		Animation:MUMumakil_SKL.MUMumakil_RUNB	Frames:1 8 19 37
	End


	; *** ENGINEERING Parameters ***

	RadarPriority = UNIT
	KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS MONSTER SCORE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT PATH_THROUGH_INFANTRY TRANSPORT SCARY CAN_ATTACK_WALLS BIG_MONSTER ARMY_SUMMARY

	BuildCost = MORDOR_MUMAKIL_BUILDCOST
	BuildTime = MORDOR_MUMAKIL_BUILDTIME

	; This is required so that the build phase lasts as long as the anim.
	BuildFadeInOnCreateTime = 5.5

	Body = DelayedDeathBody ModuleTag_02
		CheerRadius 				= EMOTION_CHEER_RADIUS
		MaxHealth				= MORDOR_MUMAKIL_HEALTH			; BALANCE Mumakil Health
		DoHealthCheck				= No			; Don't want to get the delayed death behaviour when we die normally.
		DelayedDeathTime			= 5000
		CanRespawn				= No			; Unit can't get revived.
		ImmortalUntilDeathTime		= No			; Not immune to damage during rampage.  So you can keep him from running stuff over.
	End

            Behavior = AutoHealBehavior ModuleTag_MumakilHealing
                        StartsActive = No
			TriggeredBy = Upgrade_MumakilLevel2
                        HealingAmount = MONSTER_HEAL_AMOUNT
                        HealingDelay = 1000
                        StartHealingDelay = MONSTER_HEAL_DELAY
                        HealOnlyIfNotInCombat = Yes
            End

	
	;Mumakil Upgrade
	Behavior = WeaponSetUpgrade ModuleTag_WeaponsetUpgrade
		TriggeredBy = Upgrade_MumakilLevel2
	End

	Behavior SubObjectsUpgrade = FadeInTheHodwah
		TriggeredBy				= Upgrade_MumakilLevel1
		ShowSubObjects			= Houda Houda01
		FadeTimeInSeconds		= 2.0
		WaitBeforeFadeInSeconds	= 4.0
	End

	Behavior = AIUpdateInterface ModuleTag_03
		AILuaEventsList	=	MumakilFunctions
		RampageTime		=	7960
		RampageRequiresAflame = Yes	; Otherwise, we just skip straight to RunOffMap
		AutoAcquireEnemiesWhenIdle = Yes
		AttackPriority				= AttackPriority_Cavalry
	End

   	Behavior = EmotionTrackerUpdate	Module_EmotionTracker
		AddEmotion	=	Terror_Base
		AddEmotion	=	Alert_Base
	End

	Behavior = FireWeaponUpdate FireWeaponUpdateModuleTag
		Weapon = MordorMumakilHeroEffect
		ChargingModeTrigger = Yes		; this will happen when in enraged mode
		AliveOnly = Yes					; this will only fire when the mumakil is alive
	End

	Behavior = FlammableUpdate ModuleTag_03a
		AflameDuration		= 999999 ;If I catch fire, I'll burn for this long...
		AflameDamageAmount	= 0	 ; Being on fire rampages us, which kills us.  So there is no need to take damage.  Don't want this module getting the kill instead of the person who lit us up.
		AflameDamageDelay	= 10000
		FlameDamageLimit	= 2700 ;1800
		FlameDamageExpiration   = 30000
		BurnContained       	= Yes
            FireFXList = FX:FX_FireStartWoosh

	End

	Behavior LifetimeUpdate LifetimeTag
		WaitForWakeUp	=	Yes
	End
   
	;Only triggered after a rampage takes place.	
	Behavior = RunOffMapBehavior ModuleTag_RunOff
		RequiresSpecificTrigger = Yes ;Triggers when DetachableRiderUpdate says so!
		RunOffMapWaypointName	= MumakilExit
		DieOnMap = Yes
	End


	; Death weapons for fall flat
	Behavior = FireWeaponWhenDeadBehavior ModuleTag_07
	  RequiredStatus = DEATH_1
	  StartsActive = Yes
	  DelayTime = 250 
	  DeathWeapon = MordorOliphantDeathStraightInitial
	End

	;Behavior = FireWeaponWhenDeadBehavior ModuleTag_08
	;	RequiredStatus = DEATH_1
	;	StartsActive = Yes
	;	DelayTime = 250 
	;	DeathWeapon = MordorOliphantDeathStraightFinal
	;End

	; Death weapons for fall to right
	Behavior = FireWeaponWhenDeadBehavior ModuleTag_09
		RequiredStatus	= DEATH_2
		StartsActive	= Yes
		DelayTime		= 3300 
		DeathWeapon		= MordorOliphantToppleFinal
		WeaponOffset	= X:0 Y:-42 Z:0
	End

	; Death weapons for fall to left
	Behavior = FireWeaponWhenDeadBehavior ModuleTag_11
		RequiredStatus	= DEATH_3
		StartsActive	= Yes
		DelayTime		=  3300
		DeathWeapon		= MordorOliphantToppleFinal 
		WeaponOffset	= X:0 Y:42 Z:0
	End

	Behavior = HordeTransportContain  ModuleTag_12
		ObjectStatusOfContained				= UNSELECTABLE CAN_ATTACK
		;PassengersTestCollisionHeight		= 80
		Slots								= 1
		EnterSound							= GarrisonEnter
		ExitSound							= GarrisonExit
		DamagePercentToUnits				= 0%
		PassengerFilter						= ANY +INFANTRY +CAVALRY +RohanLegolas
		AllowOwnPlayerInsideOverride		= Yes ; Normally, the Allies check encompasses OwnPlayer.  but we reeeeally only want our own guys.
		AllowAlliesInside					= No
		AllowEnemiesInside					= No
		AllowNeutralInside					= No
		ExitDelay							= 0
		NumberOfExitPaths					= 2 ; Defaults to 1.  Set 0 to not use ExitStart/ExitEnd, set higher than 1 to use ExitStart01-nn/ExitEnd01-nn
		ForceOrientationContainer			= No  ; otherwise contained units can't orient themselves towards their targets...
		PassengerBonePrefix					=	PassengerBone:DockAction      KindOf:HERO
		PassengerBonePrefix					= PassengerBone:B_BANNER KindOf:BANNER
		PassengerBonePrefix					= PassengerBone:B_CARGO0 KindOf:INFANTRY
		ShowPips = No
		EjectPassengersOnDeath				= Yes
		
		FadeFilter	= ALL
		FadePassengerOnEnter = Yes
		EnterFadeTime = 1000
		FadePassengerOnExit = Yes
		ExitFadeTime = 1000
	End

	LocomotorSet
		Locomotor = MumakilLocomotor
		Condition = SET_NORMAL 
		Speed     = 30
	End
  
	LocomotorSet
		Locomotor	=	MumakilPanicLocomotor
		Condition	=	SET_PANIC
		Speed		=	40
	End
 
 
	LocomotorSet
		Locomotor	=	MumakilEnragedLocomotor
		Condition	=	SET_ENRAGED
		Speed		=	80
	End
	
  Behavior = PhysicsBehavior ModuleTag_04
  End
  
  Behavior = SlowDeathBehavior ModuleTag_05
    DeathTypes			= ALL
    SinkDelay			= 25000
    SinkRate			= 2.4     ; in Dist/Sec
    DestructionDelay	= 60000
    DecayBeginTime		= 6000
    ProbabilityModifier = 10  ; Very, very unlikely unless clearance test fails
    DeathFlags			= DEATH_1      ; Controls animation and weapon choice. Sets BOTH model condition and object status bits.
    FX					= INITIAL FX_OliphantDie
    ShadowWhenDead		= Yes      ; Volumetric shadows don't look so bad when sinking into ground
  End

  Behavior = ClearanceTestingSlowDeathBehavior ModuleTag_05a
    DeathTypes			= ALL
    SinkDelay			= 25000
    SinkRate			= 2.4     ; in Dist/Sec
    DestructionDelay	= 60000
    DecayBeginTime		= 6000
    ProbabilityModifier = 490  ; Very, very likely unless clearance test fails
    DeathFlags			= DEATH_2       ; Controls animation and weapon choice. Sets BOTH model condition and object status bits.
    FX					= INITIAL FX_OliphantDie
    ShadowWhenDead		= Yes      ; Volumetric shadows don't look so bad when sinking into ground

    ; This is the area which must be clear for this slow death to go off
    ; Use Control-Shift-Alt-E in game to display this area
    ; Use debug.add l + clearancetestingslowdeathbehavior to get feedback on why test fails
    ClearanceGeometry				= Box
    ClearanceGeometryMajorRadius	= 64.0
    ClearanceGeometryMinorRadius	= 32.0
    ClearanceGeometryHeight			= 32.0
    ClearanceGeometryIsSmall		= No
    ClearanceGeometryOffset			= X:0 Y:-52 Z:0

    ClearanceMaxHeight				= 32
    ClearanceMaxHeightFraction		= 0.04 ; If more than 5% of the cells in the clearance geometry are more than 40 units above the Oliphant's base, don't fall (don't fall into cliffs)
    ClearanceMinHeight				= -32
    ClearanceMinHeightFraction		= 0.40 ; If more than 40% of the cells in the clearance geometry are more than 40 units below the Oliphant's base, don't fall (don't get left hanging over a cliff)
  End
 
  Behavior = ClearanceTestingSlowDeathBehavior ModuleTag_05b
    DeathTypes						= ALL
    SinkDelay						= 25000
    SinkRate						= 2.4     ; in Dist/Sec
    DestructionDelay				= 60000
    DecayBeginTime					= 6000
    ProbabilityModifier				= 490  ; Very, very likely unless clearance test fails
    DeathFlags						= DEATH_3       ; Controls animation and weapon choice. Sets BOTH model condition and object status bits.
    FX								= INITIAL FX_OliphantDie
    ShadowWhenDead					= Yes      ; Volumetric shadows don't look so bad when sinking into ground

    ; This is the area which must be clear for this slow death to go off
    ; Use Control-Shift-Alt-E in game to display this area
    ; Use debug.add l + clearancetestingslowdeathbehavior to get feedback on why test fails
    ClearanceGeometry				= Box
    ClearanceGeometryMajorRadius	= 64.0
    ClearanceGeometryMinorRadius	= 32.0
    ClearanceGeometryHeight			= 32.0
    ClearanceGeometryIsSmall		= No
    ClearanceGeometryOffset			= X:0 Y:52 Z:0

    ClearanceMaxHeight				= 32
    ClearanceMinHeightFraction		= 0.40 ; If more than 40% of the cells in the clearance geometry are more than 40 units below the Oliphant's base, don't fall (don't get left hanging over a cliff)
    ClearanceMinHeight				= -32
    ClearanceMinHeightFraction		= 0.40 ; If more than 40% of the cells in the clearance geometry are more than 40 units below the Oliphant's base, don't fall (don't get left hanging over a cliff)
  End

  Behavior = SquishCollide ModuleTag_06 
  End
 

  ; Extra secondary geometry to be used for crushing/squishing detection purposes
  GeometryOther = GeomType:BOX IsSmall:No Height:20 MajorRadius:25 MinorRadius:20 OffsetX:32   ; front 2 legs
  GeometryOther = GeomType:BOX IsSmall:No Height:20 MajorRadius:15 MinorRadius:20 OffsetX:-35  ; back 2 legs
  
	Behavior = HitReactionBehavior HitReactionBehaviorModuleTag
		HitReactionLifeTimer1 = 1000 ; level 1 (light  damage)  hit reaction animations in msec
		HitReactionThreshold1 = 200.0  ; level 1 (light  damage) threshold trigger
	End

  Geometry = Box
  GeometryMajorRadius = 48.0
  GeometryMinorRadius = 24.0
  GeometryHeight = 88.8
  GeometryIsSmall = No
  
  ;;swoop points
;	GeometryContactPoint		= X:48 Y:24 Z:88.8		Swoop
;	GeometryContactPoint		= X:48 Y:-24 Z:88.8		Swoop
;	GeometryContactPoint		= X:-48 Y:-24 Z:88.8	Swoop
;	GeometryContactPoint		= X:-48 Y:24 Z:88.8		Swoop
;	GeometryContactPoint		= X:48 Y:24 Z:88.8		Swoop
  
  DeadCollideSize = LARGE ; How big does the AOD consider this unit for damage fx & behavior.

  Shadow = SHADOW_VOLUME_NON_SELF_2; volumetric shadow that doesn't cast onto all objects using SHADOW_VOLUME_NON_SELF_1
  ShadowSizeX = 36; clamp the angle so shadow isn't as long.
;  ShadowSizeX = 60;
;  ShadowSizeY = 60;
;  ShadowTexture = ShadowI;
End

;------------------------------------------------------

ChildObject MordorMumakilForGI01 MordorMumakil

	Behavior = RunOffMapBehavior ModuleTag_RunOff
		RequiresSpecificTrigger = Yes ;Triggers when DetachableRiderUpdate says so!
		RunOffMapWaypointName	= Mumakil01_RunTo
		DieOnMap = Yes
	End
	
	Body = DelayedDeathBody ModuleTag_02
		CheerRadius 				= EMOTION_CHEER_RADIUS
		MaxHealth					= MORDOR_MUMAKIL_HEALTH			; BALANCE Mumakil Health
		DoHealthCheck				= No			; Don't want to get the delayed death behaviour when we die normally.
		DelayedDeathTime			= 25000
		CanRespawn					= No			; Unit can't get revived.
		ImmortalUntilDeathTime		= Yes			; Not immune to damage during rampage.  So you can keep him from running stuff over.
	End
END

;------------------------------------------------------

ChildObject MordorMumakilForGI02 MordorMumakil

	Behavior = RunOffMapBehavior ModuleTag_RunOff
		RequiresSpecificTrigger = Yes ;Triggers when DetachableRiderUpdate says so!
		RunOffMapWaypointName	= Mumakil02_RunTo
		DieOnMap = Yes
	End
	
	Body = DelayedDeathBody ModuleTag_02
		CheerRadius 				= EMOTION_CHEER_RADIUS
		MaxHealth				= MORDOR_MUMAKIL_HEALTH			; BALANCE Mumakil Health
		DoHealthCheck				= No			; Don't want to get the delayed death behaviour when we die normally.
		DelayedDeathTime			= 25000
		CanRespawn				= No			; Unit can't get revived.
		ImmortalUntilDeathTime		= Yes			; Not immune to damage during rampage.  So you can keep him from running stuff over.
	End
END

;------------------------------------------------------

ChildObject MordorMumakilForGI03 MordorMumakil

	Behavior = RunOffMapBehavior ModuleTag_RunOff
		RequiresSpecificTrigger = Yes ;Triggers when DetachableRiderUpdate says so!
		RunOffMapWaypointName	= Mumakil03_RunTo
		DieOnMap = Yes
	End
	
	Body = DelayedDeathBody ModuleTag_02
		CheerRadius 				= EMOTION_CHEER_RADIUS
		MaxHealth				= MORDOR_MUMAKIL_HEALTH			; BALANCE Mumakil Health
		DoHealthCheck				= No			; Don't want to get the delayed death behaviour when we die normally.
		DelayedDeathTime			= 25000
		CanRespawn				= No			; Unit can't get revived.
		ImmortalUntilDeathTime		= Yes			; Not immune to damage during rampage.  So you can keep him from running stuff over.
	End
END

;------------------------------------------------------

ChildObject MordorMumakilForGI04 MordorMumakil

	Behavior = RunOffMapBehavior ModuleTag_RunOff
		RequiresSpecificTrigger = Yes ;Triggers when DetachableRiderUpdate says so!
		RunOffMapWaypointName	= Mumakil04_RunTo
		DieOnMap = Yes
	End
	
	Body = DelayedDeathBody ModuleTag_02
		CheerRadius 				= EMOTION_CHEER_RADIUS
		MaxHealth				= MORDOR_MUMAKIL_HEALTH			; BALANCE Mumakil Health
		DoHealthCheck				= No			; Don't want to get the delayed death behaviour when we die normally.
		DelayedDeathTime			= 25000
		CanRespawn				= No			; Unit can't get revived.
		ImmortalUntilDeathTime		= Yes			; Not immune to damage during rampage.  So you can keep him from running stuff over.
	End
END

;------------------------------------------------------------------------------
; aka WorkerMordor, Peasant, OrcLaborer
Object MordorWorker
	; *** ART Parameters ***

	; This is required for garrisoned objects - please put in all objects.
	ButtonImage		= BCFurnace_OrcLaborer
	SelectPortrait	= UPIsenguard_OrcLaborer
    
	Draw = W3DScriptedModelDraw ModuleTag_01

	  OkToChangeModelColor = Yes
	  
	  StaticModelLODMode = Yes
	  
		DefaultModelConditionState
			Model					=	MUOrcLabor_SKN
			Skeleton				=	MUGblnSlv_SKL
		End

		IdleAnimationState
			Animation				=	Stand
				AnimationName		=	MUOrcLabor_IDLC
				AnimationMode		=	ONCE
				AnimationPriority	=	15
			End
			Animation				=	WipeNose
				AnimationName		=	MUOrcLabor_IDLD
				AnimationMode		=	ONCE
			End
			Animation				=	ScratchBack
				AnimationName		=	MUOrcLabor_IDLE
				AnimationMode		=	ONCE
			End
			BeginScript
				CurDrawableShowSubObject("AXE")
				CurDrawableHideSubObject("HAMMER")
				CurDrawableHideSubObject("LOG")
			EndScript
		End
		
;----- flying and falling animations

		AnimationState				=	PASSENGER
			Animation				=	Struggling
				AnimationName		=	MUOrcLabor_FLLA
				AnimationMode		=	LOOP
			End
			BeginScript
				CurDrawableHideSubObject("LOG")
			EndScript
		End
		
		AnimationState				=	FREEFALL
			Animation				=	Falling
				AnimationName		=	MUOrcLabor_FLYA
				AnimationMode		=	LOOP
				AnimationSpeedFactorRange	=	0.35	0.35
				AnimationBlendTime	=	10
			End
			BeginScript
				CurDrawableHideSubObject("LOG")
			EndScript
		End
		
		AnimationState				=	STUNNED_FLAILING 
			Animation				=	FLYA
				AnimationName       =	MUOrcLabor_FLYA
				AnimationMode       =	LOOP
			End
			BeginScript
				CurDrawableHideSubObject("LOG")
			EndScript
		End
		
		;----- dying animations

		AnimationState				= DYING RUNNING_OFF_MAP
			Animation				= Idle
				AnimationName		= MUOrcLabor_IDLC
				AnimationMode		= LOOP
			End
		End

		AnimationState				=	DYING SPLATTED
			Animation				=	Splatted
				AnimationName		=	MUOrcLabor_LNDA
				AnimationMode		=	ONCE
			End
			BeginScript
				CurDrawableHideSubObject("LOG")
			EndScript
		End

		AnimationState				=	DYING DEATH_1
			Animation				=	DIEA
				AnimationName		=	MUOrcLabor_DIEA 
				AnimationMode		=	ONCE
			End
			Animation				=	DIEB
				AnimationName		=	MUOrcLabor_DIEB 
				AnimationMode		=	ONCE
			End
			BeginScript
				CurDrawableShowSubObject("AXE")
				CurDrawableHideSubObject("HAMMER")
				CurDrawableHideSubObject("LOG")
			EndScript
		End
	
		AnimationState				=	DYING DEATH_2
;			Animation
;				AnimationName		=	MUOrcLabor_IDLA
;				AnimationMode		=	LOOP
;			End
			Animation				=	DIEA
				AnimationName		=	MUOrcLabor_DIEA 
				AnimationMode		=	ONCE
			End
			Animation				=	DIEB
				AnimationName		=	MUOrcLabor_DIEB 
				AnimationMode		=	ONCE
			End
			BeginScript
				CurDrawableShowSubObject("AXE")
				CurDrawableHideSubObject("HAMMER")
				CurDrawableHideSubObject("LOG")
			EndScript
		End
		
		AnimationState				=	DYING AFLAME
			Animation				=	MFDA
				AnimationName		=	MUOrcLabor_MFDA 
				AnimationMode		=	ONCE
			End
			BeginScript
				CurDrawableShowSubObject("AXE")
				CurDrawableHideSubObject("HAMMER")
				CurDrawableHideSubObject("LOG")
			EndScript
		End

; --- stunned anims
		AnimationState				=	STUNNED_STANDING_UP
			Animation				=	StandUp
				AnimationName       =	MUOrcLabor_GTPA
				AnimationMode       =	ONCE
				AnimationSpeedFactorRange = 1.5 1.5
			End
			BeginScript
				CurDrawableShowSubObject("AXE")
				CurDrawableHideSubObject("HAMMER")
				CurDrawableHideSubObject("LOG")
			EndScript
		End
		
		AnimationState				=	STUNNED 
			Animation				=	LNDA
				AnimationName       =	MUOrcLabor_LNDA
				AnimationMode       =	ONCE
			End
			BeginScript
				CurDrawableShowSubObject("AXE")
				CurDrawableHideSubObject("HAMMER")
				CurDrawableHideSubObject("LOG")
			EndScript
		End

		
		AnimationState = MOVING FIRING_OR_PREATTACK_A
			Animation = TrotAndFire
				AnimationName = MUOrcLabor_ATRA
				AnimationMode = LOOP
			End
			Flags = RANDOMSTART
			;ParticleSysBone = None InfantryDustTrails
		End

				
		;-----basic animations
;		AnimationState				=	MOVING WANDER
;			Animation				=	WLKA
;				AnimationName		=	MUOrcLabor_WLKA 
;				AnimationMode		=	LOOP
;			End
;			Animation				=	WLKB
;				AnimationName		=	MUOrcLabor_WLKB
;				AnimationMode		=	LOOP
;			End
;			BeginScript
;				CurDrawableShowSubObject("AXE")
;				CurDrawableHideSubObject("HAMMER")
;				CurDrawableHideSubObject("LOG")
;			EndScript
;		End
		
		AnimationState				=	MOVING BACKING_UP
			Animation				=	BackingUp
				AnimationName		=	MUOrcLabor_BAKA
				AnimationMode		=	LOOP
			End
			BeginScript
				CurDrawableShowSubObject("AXE")
				CurDrawableHideSubObject("HAMMER")
				CurDrawableHideSubObject("LOG")
			EndScript
		End
		
		AnimationState				=	FIRING_OR_PREATTACK_A CARRYING
			Animation				=	DoubleChop
				AnimationName		=	MUOrcLabor_ATKL
				AnimationMode		=	ONCE
				UseWeaponTiming		=	yes
			End
		End
			
		AnimationState				=	FIRING_OR_PREATTACK_A
			Animation				=	DoubleChop
				AnimationName		=	MUOrcLabor_ATKC
				AnimationMode		=	ONCE
			End
			BeginScript
				CurDrawableShowSubObject("AXE")
				CurDrawableHideSubObject("HAMMER")
				CurDrawableHideSubObject("LOG")
			EndScript
		End
		
		AnimationState				=	MOVING CARRYING
			Animation				=	WLKC
				AnimationName		=	MUOrcLabor_RUNC
				AnimationMode		=	LOOP
				Distance			=	34
			End
			BeginScript
				CurDrawableShowSubObject("LOG")
			EndScript
		End
		
		AnimationState				=	MOVING EMOTION_TERROR
			Animation				=	RUNA
				AnimationName		=	MUOrcLabor_RUNB 
				AnimationMode		=	LOOP
			End
			BeginScript
				CurDrawableShowSubObject("AXE")
				CurDrawableHideSubObject("HAMMER")
				CurDrawableHideSubObject("LOG")
			EndScript
		End
		
		AnimationState				=	MOVING
			Animation				=	RUNA
				AnimationName		=	MUOrcLabor_RUNA 
				AnimationMode		=	LOOP
				Distance			=	34
			End
			BeginScript
				CurDrawableShowSubObject("AXE")
				CurDrawableHideSubObject("HAMMER")
				CurDrawableHideSubObject("LOG")
			EndScript
		End

		AnimationState				=	HARVEST_PREPARATION
			Animation				=	SidewaysChop
				AnimationName		=	MUOrcLabor_WRKB
				AnimationMode		=	LOOP
			End
			BeginScript
				CurDrawableShowSubObject("AXE")
				CurDrawableHideSubObject("HAMMER")
				CurDrawableHideSubObject("LOG")
			EndScript
		End
		
		AnimationState				=	HARVEST_ACTION
			Animation				=	VerticalChop
				AnimationName		=	MUOrcLabor_WRKA
				AnimationMode		=	LOOP
			End
			BeginScript
				CurDrawableShowSubObject("AXE")
				CurDrawableHideSubObject("HAMMER")
				CurDrawableHideSubObject("LOG")
			EndScript
		End
		

		AnimationState				=	WAR_CHANT
			Animation				=	Chant
				AnimationName		=	MUOrcLabor_TNTB
				AnimationMode		=	LOOP
			End
		End
		
		;--emotions
		
		AnimationState				=	EMOTION_ALERT EMOTION_AFRAID
			Animation				=	APPA
				AnimationName		=	MUOrcLabor_APPA
				AnimationMode		=	LOOP	;Change this to ONCE if adding additional anims
			End
			BeginScript
				CurDrawableShowSubObject("AXE")
				CurDrawableHideSubObject("HAMMER")
				CurDrawableHideSubObject("LOG")
			EndScript
		End
		
		AnimationState				=	EMOTION_AFRAID
			Animation				=	FERA
				AnimationName		=	MUOrcLabor_FERA
				AnimationMode		=	LOOP
			End
			Animation				=	FERB
				AnimationName		=	MUOrcLabor_FERB
				AnimationMode		=	LOOP
			End
			BeginScript
				CurDrawableShowSubObject("AXE")
				CurDrawableHideSubObject("HAMMER")
				CurDrawableHideSubObject("LOG")
			EndScript
		End
		
		
		;-emotions--
		AnimationState							= EMOTION_TAUNTING
			Animation							= TNTB
				AnimationName					= MUOrcLabor_TNTB
				AnimationMode					= LOOP
			End
			BeginScript
				CurDrawableShowSubObject("AXE")
				CurDrawableHideSubObject("HAMMER")
				CurDrawableHideSubObject("LOG")
			EndScript
		End
		AnimationState							= EMOTION_CELEBRATING
			Animation							= CHRA
				AnimationName					= MUOrcLabor_CHRA
				AnimationMode					= ONCE
			End
			Animation							= CHRB
				AnimationName					= MUOrcLabor_CHRB
				AnimationMode					= ONCE
			End
			Flags								= RESTART_ANIM_WHEN_COMPLETE
			BeginScript
				CurDrawableShowSubObject("AXE")
				CurDrawableHideSubObject("HAMMER")
				CurDrawableHideSubObject("LOG")
			EndScript
		End
		
		
		AnimationState = ACTIVELY_CONSTRUCTING DEPLOYED ; building from too far to smack his hammer
			Animation				=	Stand
				AnimationName		=	MUOrcLabor_IDLG
				AnimationMode		=	LOOP
			End
			
			BeginScript
				CurDrawableHideSubObject("AXE")
				CurDrawableHideSubObject("HAMMER")
			EndScript
		End

		
		AnimationState				= 	ACTIVELY_CONSTRUCTING CARRYING
			Animation				= 	WRKL
				AnimationName		= 	MUOrcLabor_WRKL
				AnimationMode		= 	LOOP
			End
			
			BeginScript
				CurDrawableHideSubObject("AXE")
				CurDrawableShowSubObject("HAMMER")
			EndScript
		End
		
		AnimationState				= 	ACTIVELY_CONSTRUCTING
			Animation				= 	WRKA
				AnimationName		= 	MUOrcLabor_WRKA
				AnimationMode		= 	ONCE
				AnimationPriority	=	25
			End
			Animation				= 	WRKA2
				AnimationName		= 	MUOrcLabor_WRKA
				AnimationMode		= 	ONCE
				AnimationPriority	=	25
			End
			Animation				=	WipeNose
				AnimationName		=	MUOrcLabor_IDLD
				AnimationMode		=	ONCE
				AnimationPriority	=	3
			End
			Animation				=	ScratchBack
				AnimationName		=	MUOrcLabor_IDLE
				AnimationMode		=	ONCE
				AnimationPriority	=	2
			End
			Animation				=	Stand
				AnimationName		=	MUOrcLabor_IDLC
				AnimationMode		=	ONCE
				AnimationPriority	=	1
			End
			
			Flags					=	RESTART_ANIM_WHEN_COMPLETE
			
			BeginScript
				CurDrawableHideSubObject("AXE")
				CurDrawableShowSubObject("HAMMER")
				CurDrawableHideSubObject("LOG")
			EndScript
		End
		
		; --------- Click and Hit Reactions ------------
		AnimationState = HIT_REACTION HIT_LEVEL_1
			Animation = Hit_Level_1_a
				AnimationName = MUOrcLabor_HITA
				AnimationMode = ONCE
			End
			BeginScript
				CurDrawableShowSubObject("AXE")
				CurDrawableHideSubObject("HAMMER")
				CurDrawableHideSubObject("LOG")
			EndScript
		End
		
		AnimationState				=	CARRYING
			Animation				=	IDLG
				AnimationName		=	MUOrcLabor_IDLL
				AnimationMode		=	LOOP
			End
			BeginScript
				CurDrawableShowSubObject("LOG")
			EndScript
		End
		
		AnimationState				=	SELECTED
			Animation				=	ATNB
				AnimationName		=	MUOrcLabor_IDLB
				AnimationMode		=	LOOP
			End
			BeginScript
				CurDrawableShowSubObject("AXE")
				CurDrawableHideSubObject("HAMMER")
				CurDrawableHideSubObject("LOG")
			EndScript
		End
	End
	
	; ***DESIGN parameters ***
	Side = Mordor
	EditorSorting = UNIT
	ThreatLevel = 1.0
	TransportSlotCount = 1
	ArmorSet
		Conditions      = None
		Armor           = NoArmor
		DamageFX        = NormalDamageFX
	End
  
	VisionRange = VISION_STANDARD_MELEE
  	ShroudClearingRange = SHROUD_CLEAR_STANDARD

    	BuildCost = MORDOR_LABORER_BUILDCOST
    	BuildTime = MORDOR_LABORER_BUILDTIME
    	BountyValue = MORDOR_LABORER_BOUNTY_VALUE
	
	DisplayName = OBJECT:MordorWorker
	CrushableLevel = 0  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
	CrusherLevel = 0 ;What can I crush?: 0 = small animals, 1 = infantry, 2 = trees, 3 = vehicles
	CommandSet = MordorWorkerCommandSet
	CommandPoints = 1

	; *** AUDIO Parameters ***;

	VoiceAttack				= OrcLaborerVoiceAttack					;OrcWorkerVoiceAttack
	VoiceAttack2				= OrcVoiceAttack2
	VoiceAttackMachine			= OrcLaborerVoiceAttack
	VoiceAttackStructure			= OrcLaborerVoiceAttackBuilding
	VoiceCreated				= CampOrcCreateOrcLaborer
	VoiceFullyCreated 			= CampOrcCreateOrcLaborer
	VoiceMove				= OrcLaborerVoiceMove					;OrcWorkerVoiceMove
	VoiceMove2				= OrcVoiceMove2
	VoiceMoveToCamp				= OrcLaborerVoiceMoveCamp
	VoicePriority				= 12
	VoiceSelect				= OrcLaborerVoiceSelect					;OrcWorkerVoiceSelect
	VoiceSelectBattle 			= OrcLaborerVoiceSelectBattle
	VoiceGuard			= OrcLaborerVoiceMove
	

	VoiceEnterStateAttack			= OrcLaborerVoiceEnterStateAttack			;OrcWorkerVoiceAttack
	VoiceEnterStateAttackMachine		= OrcLaborerVoiceEnterStateAttackBuilding
	VoiceEnterStateAttackStructure		= OrcLaborerVoiceEnterStateAttackBuilding
	VoiceEnterStateMove			= OrcLaborerVoiceEnterStateMove				;OrcWorkerVoiceMove
	VoiceEnterStateMoveToCamp		= OrcLaborerVoiceEnterStateMoveCamp
	
	SoundImpact				= ImpactHorse


	UnitSpecificSounds
		VoiceAttackUnitRohanEntBirch	= OrcLaborerVoiceAttackEnt				
		VoiceAttackUnitRohanEntFir	= OrcLaborerVoiceAttackEnt				
		VoiceAttackUnitRohanTreeBerd	= OrcLaborerVoiceAttackEnt				
		VoiceAttackUnitRohanEntAsh	= OrcLaborerVoiceAttackEnt				
		VoiceGarrison			= OrcLaborerVoiceGarrison
		VoiceRepair			= OrcLaborerVoiceRepair	
		VoiceSupply			= OrcLaborerVoiceGather
            VoiceEnterUnitSlaughterHouse	= OrcLaborerVoiceGarrisonSlaughterHouse
	End

	;EvaEventDieOwner			= WorkerDie			;Eva event to trigger on unit's death.
	EvaEventDamagedOwner			= UnitUnderAttack 		;Eva event to trigger when unit is damaged

    ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
        MaxUpdateRangeCap = 800
		AnimationSound = Sound:MordorOrcLaborerChopping Animation:MUGblnSlv_SKL.MUOrcLabor_WRKB Frames:10
		AnimationSound = Sound:MordorOrcLaborerBuilding Animation:MUGblnSlv_SKL.MUOrcLabor_WRKA Frames:10
		AnimationSound = Sound:MordorOrcLaborerChopping Animation:MUGblnSlv_SKL.MUOrcLabor_WRKL Frames:17
		AnimationSound = Sound:BodyFallOrcLaborer Animation:MUGblnSlv_SKL.MUOrcLabor_DIEA Frames:7
		AnimationSound = Sound:BodyFallOrcLaborer Animation:MUGblnSlv_SKL.MUOrcLabor_DIEB Frames:26
    End
    

	; *** ENGINEERING Parameters ***

	RadarPriority = UNIT
	KindOf = PRELOAD SELECTABLE INFANTRY CAN_CAST_REFLECTIONS PATH_THROUGH_EACH_OTHER SCORE THROWN_OBJECT DOZER SWARM_DOZER HARVESTER GRAB_AND_DROP ORC ;CAN_ATTACK
	
	Body = ActiveBody ModuleTag_02
		MaxHealth         = MORDOR_LABORER_HEALTH                  ;BALANCE Worker Health
		MaxHealthDamaged  = MORDOR_LABORER_HEALTH_DAMAGED
		;RecoveryTime      = MORDOR_LABORER_HEALTH_RECOVERY_TIME
	End
	
	WeaponSet
		Conditions = None 
		Weapon = PRIMARY    MordorWorkerAxe
		AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End
	
	Behavior = WorkerAIUpdate ModuleTag_10
		AutoAcquireEnemiesWhenIdle = Yes ATTACK_BUILDINGS
		RepairHealthPercentPerSecond  = 0.2%    ; % of max health to repair each second
		BoredTime                     = 5000  ; in milliseconds
		BoredRange                    = 120   ; when bored, we look this far away to do something 
		SpecialContactPoints		   = Repair
		MaxBoxes						= 3		; How many abstract units of goods can I carry
		SupplyWarehouseScanDistance		= 5000	; How far to look for trees
		SupplyCenterActionDelay			= 2000 ;500	; How long it takes to drop off logs
		HarvestTrees				= Yes	; Replace the Dock-with-warehouse with Harvest-From-Point
		HarvestActivationRange			= 25	; How close to a tree counts as close enough
		HarvestPreparationTime			= 5000	; How long to knock a tree down
		HarvestActionTime			= 3000	; How long to grab a load of wood
        AILuaEventsList			    	= InfantryFunctions
	End

	Behavior = SpecialPowerModule ModuleTag_GoFishForTrees                      
		SpecialPowerTemplate      = SpecialAbilityHarvest
		UpdateModuleStartsAttack  = No
	End

	LocomotorSet
		Locomotor = HumanLocomotor
		Condition = SET_NORMAL 
		Speed     = 32
	End

	Behavior = EmotionTrackerUpdate	Module_EmotionTracker
		TauntAndPointDistance		=	400		; max distance to taunted/pointed objet
		TauntAndPointUpdateDelay	=	1000	; how often scan (milliseconds)
		TauntAndPointExcluded		=	NONE
		AfraidOf					=	NONE +RohanTreeBerd +GondorGwaihir +RohanEntFir +RohanEntAsh +RohanEntBirch +MordorCaveTroll +MordorMountainTroll +MordorDrummerTroll +MordorFellBeast +MordorMumakil;Must be SCARY kindof as well.
		AlwaysAfraidOf				=	NONE +MordorBalrog +RohanOathbreaker ;+MordorWitchKing +MordorWitchKingOnFellBeast
		PointAt						=	NONE +GondorGwaihir 

		HeroScanDistance			=	150
		FearScanDistance			=	200

		AddEmotion	=	Terror_Base
		AddEmotion	=	UncontrollableFear_Base_Evil
		AddEmotion	=	FearIdle_Base
		AddEmotion	=	FearBusy_Base
		AddEmotion	=	CheerIdle_Base
		AddEmotion	=	HeroCheerIdle_Base
		AddEmotion	=	Taunt_Base	
		AddEmotion	=	Alert_Base
	End	

	LocomotorSet
		Locomotor = HumanWanderLocomotor
		Condition = SET_WANDER
		Speed     = 32
	End
	
	Behavior = PhysicsBehavior ModuleTag_04
		GravityMult = 1.0
	End
	
	Behavior = SlowDeathBehavior ModuleTag_05
		DeathTypes = ALL -FADED
		DeathFlags = DEATH_1
		SinkDelay = 3000
		SinkRate = 0.40     ; in Dist/Sec
		DestructionDelay = 8000
		Sound = INITIAL	OrcVoiceDie
	End
	
	Behavior = SlowDeathBehavior ModuleTag_ConstructionDeath
		DeathTypes = NONE +FADED
		DeathFlags = DEATH_2
		FadeDelay = 500
		FadeTime = 3500
		DestructionDelay = 4500
		Sound = INITIAL	OrcVoiceDie
	End
	
	Behavior = SquishCollide ModuleTag_06
		;nothing
	End
	
	Behavior = BezierProjectileBehavior ModuleTag_08 ; Module starts asleep, and wakes up when thrown.
		; 
		FirstHeight = 24  ; Height of Bezier control points above highest intervening terrain
		SecondHeight = 24
		FirstPercentIndent = 30% ; Percentage of shot distance control points are placed
		SecondPercentIndent = 70%
		TumbleRandomly = Yes

		CrushStyle = Yes ; I don't detonate, I just hit
		DieOnImpact = Yes
		BounceCount = 1   ; When I hit the ground, I'll arc again
		BounceDistance = 40 ; this far
		BounceFirstHeight = 16  ; Height of Bezier control points above highest intervening terrain
		BounceSecondHeight = 16
		BounceFirstPercentIndent = 20% ; Percentage of shot distance control points are placed
		BounceSecondPercentIndent = 80%

		GroundHitFX       = FX_ThrownRockGroundHit
		GroundBounceFX    = FX_ThrownRockBounceHit
	End
	
	Behavior = HitReactionBehavior HitReactionBehaviorModuleTag
		HitReactionLifeTimer1 = 7 ; level 1 (light  damage)  hit reaction animations in frames (5 per sec)
		HitReactionLifeTimer2 = 15 ; level 2 (medium damage)  hit reaction animations in frames (5 per sec)
		HitReactionLifeTimer3 = 10 ; level 3 (heavy  damage)  hit reaction animations in frames (5 per sec)

		HitReactionThreshold1 = 0.0   ; level 1 (light  damage) threshold trigger
		HitReactionThreshold2 = 25.0  ; level 2 (medium damage) threshold trigger
		HitReactionThreshold3 = 50.0  ; level 3 (heavy  damage) threshold trigger
	End

	Geometry = CYLINDER
	GeometryMajorRadius = 8.0
	GeometryMinorRadius = 8.0
	GeometryHeight = 19.2
	GeometryIsSmall = Yes
  Shadow = SHADOW_DECAL
  ShadowSizeX = 19;
  ShadowSizeY = 19;
  ShadowTexture = ShadowI;
End

ChildObject MordorWorkerNoSelect MordorWorker

	Draw = W3DScriptedModelDraw ModuleTag_01

	  OkToChangeModelColor = Yes
	  
	  StaticModelLODMode = Yes
	  
		DefaultModelConditionState
			Model					=	MUOrcLabor_SKN
			Skeleton				=	MUGblnSlv_SKL
		End

		IdleAnimationState
			Animation				=	Stand
				AnimationName		=	MUOrcLabor_IDLC
				AnimationMode		=	ONCE
				AnimationPriority	=	15
			End
			Animation				=	WipeNose
				AnimationName		=	MUOrcLabor_IDLD
				AnimationMode		=	ONCE
			End
			Animation				=	ScratchBack
				AnimationName		=	MUOrcLabor_IDLE
				AnimationMode		=	ONCE
			End
			BeginScript
				CurDrawableShowSubObject("AXE")
				CurDrawableHideSubObject("HAMMER")
				CurDrawableHideSubObject("LOG")
			EndScript
		End
		
;----- flying and falling animations

		AnimationState				=	PASSENGER
			Animation				=	Struggling
				AnimationName		=	MUOrcLabor_FLLA
				AnimationMode		=	LOOP
			End
			BeginScript
				CurDrawableHideSubObject("LOG")
			EndScript
		End
		
		AnimationState				=	FREEFALL
			Animation				=	Falling
				AnimationName		=	MUOrcLabor_FLYA
				AnimationMode		=	LOOP
				AnimationSpeedFactorRange	=	0.35	0.35
				AnimationBlendTime	=	10
			End
			BeginScript
				CurDrawableHideSubObject("LOG")
			EndScript
		End
		
		AnimationState				=	STUNNED_FLAILING 
			Animation				=	FLYA
				AnimationName       =	MUOrcLabor_FLYA
				AnimationMode       =	LOOP
			End
			BeginScript
				CurDrawableHideSubObject("LOG")
			EndScript
		End
		
;----- dying animations

		AnimationState				= DYING RUNNING_OFF_MAP
			Animation				= Idle
				AnimationName		= MUOrcLabor_IDLC
				AnimationMode		= LOOP
			End
		End

		AnimationState				=	DYING SPLATTED
			Animation				=	Splatted
				AnimationName		=	MUOrcLabor_LNDA
				AnimationMode		=	ONCE
			End
			BeginScript
				CurDrawableHideSubObject("LOG")
			EndScript
		End

		AnimationState				=	DYING DEATH_1
			Animation				=	DIEA
				AnimationName		=	MUOrcLabor_DIEA 
				AnimationMode		=	ONCE
			End
			Animation				=	DIEB
				AnimationName		=	MUOrcLabor_DIEB 
				AnimationMode		=	ONCE
			End
			BeginScript
				CurDrawableShowSubObject("AXE")
				CurDrawableHideSubObject("HAMMER")
				CurDrawableHideSubObject("LOG")
			EndScript
		End
	
		AnimationState				=	DYING DEATH_2
;			Animation
;				AnimationName		=	MUOrcLabor_IDLA
;				AnimationMode		=	LOOP
;			End
			Animation				=	DIEA
				AnimationName		=	MUOrcLabor_DIEA 
				AnimationMode		=	ONCE
			End
			Animation				=	DIEB
				AnimationName		=	MUOrcLabor_DIEB 
				AnimationMode		=	ONCE
			End
			BeginScript
				CurDrawableShowSubObject("AXE")
				CurDrawableHideSubObject("HAMMER")
				CurDrawableHideSubObject("LOG")
			EndScript
		End
		
		AnimationState				=	DYING AFLAME
			Animation				=	MFDA
				AnimationName		=	MUOrcLabor_MFDA 
				AnimationMode		=	ONCE
			End
			BeginScript
				CurDrawableShowSubObject("AXE")
				CurDrawableHideSubObject("HAMMER")
				CurDrawableHideSubObject("LOG")
			EndScript
		End


; --- stunned anims

  		AnimationState				=	STUNNED_STANDING_UP
			Animation				=	StandUp
				AnimationName       =	MUOrcLabor_GTPA
				AnimationMode       =	ONCE
				AnimationSpeedFactorRange = 1.5 1.5
			End
			BeginScript
				CurDrawableShowSubObject("AXE")
				CurDrawableHideSubObject("HAMMER")
				CurDrawableHideSubObject("LOG")
			EndScript
		End
		
		AnimationState				=	STUNNED 
			Animation				=	LNDA
				AnimationName       =	MUOrcLabor_LNDA
				AnimationMode       =	ONCE
			End
			BeginScript
				CurDrawableShowSubObject("AXE")
				CurDrawableHideSubObject("HAMMER")
				CurDrawableHideSubObject("LOG")
			EndScript
		End

		
		

				
		;-----basic animations
		
		AnimationState				=	MOVING BACKING_UP
			Animation				=	BackingUp
				AnimationName		=	MUOrcLabor_BAKA
				AnimationMode		=	LOOP
			End
			BeginScript
				CurDrawableShowSubObject("AXE")
				CurDrawableHideSubObject("HAMMER")
				CurDrawableHideSubObject("LOG")
			EndScript
		End
		
		AnimationState				=	FIRING_OR_PREATTACK_A
			Animation				=	DoubleChop
				AnimationName		=	MUOrcLabor_ATKC
				AnimationMode		=	ONCE
			End
			BeginScript
				CurDrawableShowSubObject("AXE")
				CurDrawableHideSubObject("HAMMER")
				CurDrawableHideSubObject("LOG")
			EndScript
		End
		
		AnimationState				=	MOVING
			Animation				=	RUNA
				AnimationName		=	MUOrcLabor_RUNA 
				AnimationMode		=	LOOP
				Distance			=	34
			End
			BeginScript
				CurDrawableShowSubObject("AXE")
				CurDrawableHideSubObject("HAMMER")
				CurDrawableHideSubObject("LOG")
			EndScript
		End


		AnimationState = ACTIVELY_CONSTRUCTING DEPLOYED ; building from too far to smack his hammer
			Animation				=	Stand
				AnimationName		=	MUOrcLabor_IDLG
				AnimationMode		=	LOOP
			End
			
			BeginScript
				CurDrawableHideSubObject("AXE")
				CurDrawableHideSubObject("HAMMER")
			EndScript
		End



		AnimationState				= 	ACTIVELY_CONSTRUCTING
			Animation				= 	WRKA
				AnimationName		= 	MUOrcLabor_WRKA
				AnimationMode		= 	ONCE
				AnimationPriority	=	25
			End
			Animation				= 	WRKA2
				AnimationName		= 	MUOrcLabor_WRKA
				AnimationMode		= 	ONCE
				AnimationPriority	=	25
			End
			Animation				=	WipeNose
				AnimationName		=	MUOrcLabor_IDLD
				AnimationMode		=	ONCE
				AnimationPriority	=	3
			End
			Animation				=	ScratchBack
				AnimationName		=	MUOrcLabor_IDLE
				AnimationMode		=	ONCE
				AnimationPriority	=	2
			End
			Animation				=	Stand
				AnimationName		=	MUOrcLabor_IDLC
				AnimationMode		=	ONCE
				AnimationPriority	=	1
			End
			
			Flags					=	RESTART_ANIM_WHEN_COMPLETE
			
			BeginScript
				CurDrawableHideSubObject("AXE")
				CurDrawableShowSubObject("HAMMER")
				CurDrawableHideSubObject("LOG")
			EndScript
		End
		
		; --------- Click and Hit Reactions ------------
		AnimationState = HIT_REACTION HIT_LEVEL_1
			Animation = Hit_Level_1_a
				AnimationName = MUOrcLabor_HITA
				AnimationMode = ONCE
			End
			BeginScript
				CurDrawableShowSubObject("AXE")
				CurDrawableHideSubObject("HAMMER")
				CurDrawableHideSubObject("LOG")
			EndScript
		End
		
		AnimationState				=	SELECTED
			Animation				=	ATNB
				AnimationName		=	MUOrcLabor_IDLB
				AnimationMode		=	LOOP
			End
			BeginScript
				CurDrawableShowSubObject("AXE")
				CurDrawableHideSubObject("HAMMER")
				CurDrawableHideSubObject("LOG")
			EndScript
		End
	End

	KindOf = PRELOAD INFANTRY CAN_CAST_REFLECTIONS PATH_THROUGH_EACH_OTHER THROWN_OBJECT DOZER SWARM_DOZER NOT_AUTOACQUIRABLE
	ImmuneToShockwave = Yes
	CommandPoints = 0
	
	Body = ActiveBody ModuleTag_02
		MaxHealth         = 999999                  ;BALANCE Worker Health hige so they can't be killed.
		MaxHealthDamaged  = 999999
		;RecoveryTime      = MORDOR_LABORER_HEALTH_RECOVERY_TIME
	End
		
	WeaponSet
		Conditions = None 
	End
	
	Behavior = WorkerAIUpdate ModuleTag_10
		AutoAcquireEnemiesWhenIdle = Yes ATTACK_BUILDINGS
		RepairHealthPercentPerSecond  = 0.2%    ; % of max health to repair each second
		BoredTime                     = 5000  ; in milliseconds
		BoredRange                    = 120   ; when bored, we look this far away to do something 
		SpecialContactPoints		   = Repair
	End
	
   	Behavior = EmotionTrackerUpdate	Module_EmotionTracker
    End	
End

;------------------------------------------------------------------------------
; Aka Nazgul, MordorNazgul, FlyingNazgul
Object MordorFellBeast                         ;BALANCE FellBeast
	; *** ART Parameters ***

	; This is required for garrisoned objects - please put in all objects.
	ButtonImage = HINazgul
    
    ; SelectPortrait for Heros is portrait behind skill buttons. HP = HeroPortrait.
	SelectPortrait = HPNazgul
	
	ImmuneToShockwave = Yes

	Draw = W3DScriptedModelDraw ModuleTag_01
	    ExtraPublicBone = B_PASSENGER
	    	  
	    	  OkToChangeModelColor = Yes
	    	  
	    	  StaticModelLODMode = Yes
	    	  
		DefaultModelConditionState
			Model = MUWchKngFB_SKN	;RIDER1!
			WeaponLaunchBone = PRIMARY BAT_TOER1
		End		
		ModelConditionState = RIDER2
			Model = CUFellBst_SKN
		End
		ModelConditionState = RIDER3
			Model = CUFellWrth_SKN
		End
		
		IdleAnimationState
			StateName = Idle
			Animation = IDLA
				AnimationName = CUFellBst_SKL.CUFellBst_HVRA
				AnimationMode = LOOP
				AnimationBlendTime = 10
				AnimationSpeedFactorRange = 0.95 1.05
			End
		End

 		AnimationState	= BACKING_UP
   			StateName = backup
   			Animation = IDLA
   				AnimationName = CUFellBst_SKL.CUFellBst_HVRA
   				AnimationMode = LOOP
   				AnimationBlendTime = 10
				AnimationSpeedFactorRange = 0.95 1.05
   			End
   		End
   
   		AnimationState = DIVING
   			StateName = Diving
   			Animation = Diving
   				AnimationName = CUFellBst_SKL.CUFellBst_ATKD
   				AnimationMode = LOOP
   				AnimationBlendTime = 10
 				AnimationSpeedFactorRange = 0.95 1.05
  			End
   		End



		AnimationState = ABOUT_TO_HIT ; clawing
			StateName = Claw
			Animation = Claw
				AnimationName = CUFellBst_SKL.CUFellBst_ATKD
				AnimationMode = LOOP
				AnimationBlendTime = 10
			End
 	 		BeginScript
 				CurDrawableSetTransitionAnimState("Trans_Begin_Attacking") return 
 			EndScript
			
		End
		TransitionState = Trans_Begin_Attacking 
			StateName = Grab
			Animation = Grab
				AnimationName = CUFellBst_SKL.CUFellBst_GRBA
				AnimationMode = ONCE
				AnimationBlendTime = 10
				AnimationSpeedFactorRange = 0.4 0.4
			End
		End



	    AnimationState  STUNNED SPECIAL_DAMAGED
			StateName =  STUNNED
			Animation = HitA
				AnimationName = CUFellBst_SKL.CUFellBst_ATKH
				AnimationMode = ONCE
				AnimationBlendTime = 6
			End
		End
	    AnimationState  STUNNED
			StateName =  STUNNED
			Animation = HitA
				AnimationName = CUFellBst_SKL.CUFellBst_HITA
				AnimationMode = ONCE
				AnimationBlendTime = 6
			End
		End


		;--- HARD FLAPPING ------------------------
		AnimationState = CLIMBING
			StateName = Climbing
			Animation = Moving
				AnimationName = CUFellBst_SKL.CUFellBst_HVRB
				AnimationMode = LOOP
				AnimationBlendTime = 10
				AnimationSpeedFactorRange = 0.95 1.05
			End
		End
		AnimationState = FREEFALL
			StateName = Freefall
			Animation = Moving
				AnimationName = CUFellBst_SKL.CUFellBst_IDLA
				AnimationMode = LOOP
				AnimationBlendTime = 10
			End
		End

		AnimationState = MOVING SPECIAL_WEAPON_ONE
			StateName = Moving
			Animation = Moving
				AnimationName = CUFellBst_SKL.CUFellBst_ATKB
				AnimationMode = LOOP
				AnimationBlendTime = 10
			End
 	 		BeginScript
 				Prev = CurDrawablePrevAnimationState()
 				if Prev == "Idle"	then CurDrawableSetTransitionAnimState("Trans_Begin_Moving") return end
 				if Prev == "Climbing"	then CurDrawableSetTransitionAnimState("Trans_Begin_Moving") return end
 			EndScript
	    End
	
		AnimationState = MOVING
			StateName = Moving
			Animation = Moving
				AnimationName = CUFellBst_SKL.CUFellBst_FLYA
				AnimationMode = LOOP
				AnimationBlendTime = 10
				AnimationSpeedFactorRange = 0.9 1.1
			End
 	 		BeginScript
 				Prev = CurDrawablePrevAnimationState()
 				if Prev == "Idle"	then CurDrawableSetTransitionAnimState("Trans_Begin_Moving") return end
 				if Prev == "Climbing"	then CurDrawableSetTransitionAnimState("Trans_Begin_Moving") return end
 			EndScript
	    End

   	    TransitionState = Trans_Begin_Moving
   			Animation = Transition
   				AnimationName = CUFellBst_SKL.CUFellBst_HVRC
   				AnimationMode = ONCE
   				AnimationBlendTime = 6
   			End  
   		End

		AnimationState = RUBBLE 
			Animation = RubbleDieF

		AnimationName = CUFellBst_SKL.CUFellBst_DIVA
				AnimationMode = ONCE
				AnimationBlendTime = 4
			End
		End

  		AnimationState = DYING
 			Animation = DyingA
				AnimationName = CUFellBst_SKL.CUFellBst_HVRC
  				AnimationMode = LOOP
  				AnimationBlendTime = 10
                AnimationSpeedFactorRange = 0.5 0.5
  			End
  			StateName = DYING
		End
	    
	End ; Draw

	; ***DESIGN parameters ***
	Side = Mordor
	EditorSorting = UNIT
	ThreatLevel = 5.0
	ThingClass = LARGE_MONSTER
	TransportSlotCount = 1

	DisplayMeleeDamage = NAZGUL_PLOW_DAMAGE_INNER			

 	BuildCost         = NAZGUL_BUILDCOST				
 	BuildTime         = NAZGUL_BUILDTIME				
	WeaponSet
		Weapon			= PRIMARY		NazgulPlowAttack
		PreferredAgainst	= PRIMARY		STRUCTURE MACHINE HORDE

		Weapon			= SECONDARY		NazgulGrabAttack
		PreferredAgainst	= SECONDARY		INFANTRY THROWN_OBJECT CAVALRY

		Weapon			= TERTIARY		NazgulClawAttack
		OnlyAgainst		= TERTIARY		MONSTER
	End
	
	  ArmorSet
	    Conditions      = None
	    Armor           = NazgulArmor
	    DamageFX        = FellBeastDamageFX
	  End
	  
	  
	VisionRange = VISION_FLIER
	ShroudClearingRange = SHROUD_CLEAR_FLIER
	
	  DisplayName		= OBJECT:MordorFellBeast
	  RecruitText		= CONTROLBAR:MordorFellBeastRecruit
	  ReviveText		= CONTROLBAR:MordorFellBeastRevive
	  Hotkey			= CONTROLBAR:MordorFellBeastHotkey
	  RamPower = 45;
	  RamZMult = 0.5;
	  CrusherLevel           = 3  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
	  CrushKnockback = 50;
	  CrushZFactor = 1.0;
	  
	  ; CommandSet is overridden by Behavior Rider changes.
	  CommandSet = FellBeastCommandSet
	  CommandPoints = 0
	
	 
	; *** AUDIO Parameters ***;

	VoiceAttack			= FellBeastVoiceAttack
	VoiceAttack2		= FellBeastVox2
	;VoiceCreated		= CampOrcCreateNazgul		;this conflicts with his respawn dialogue line -- rehooked to spawn FX
	;VoiceFullyCreated 	= CampOrcCreateNazgul		;this conflicts with his respawn dialogue line -- rehooked to spawn FX
	VoiceFear			= FellBeastAlert
	VoiceMove			= FellBeastVoiceMove
	VoiceMove2			= FellBeastVox2
	VoicePriority		= 76
	VoiceSelect			= FellBeastVoiceSelect
	VoiceSelect2		= FellBeastVox2
	VoiceGuard			= FellBeastVoiceMove

	SoundAmbient		= FellBeastVoxAmbientLoop
	SoundMoveStart		= FellBeastMoveStart
	SoundImpact			= ImpactHorse			;FellBeastDie
  
	;UnitSpecificSounds
	;End

	EvaEventDamagedOwner	= UnitUnderAttack 		;Eva event to trigger when unit is damaged

	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		MaxUpdateRangeCap = 800

		AnimationSound = Sound: FellBeastWingFlaps	Animation:CUFELLBST_SKL.CUFELLBST_IDLA Frames: 33

		AnimationSound = Sound: FellBeastWingFlaps	Animation:CUFELLBST_SKL.CUFELLBST_ATKB Frames: 1 24 65 87 112
		AnimationSound = Sound: FellBeastWingFlaps	Animation:CUFELLBST_SKL.CUFELLBST_ATKD Frames: 5

		AnimationSound = Sound: FellBeastEagleAttack	Animation:CUFELLBST_SKL.CUFELLBST_ATKD Frames: 10

		AnimationSound = Sound: FellBeastHurt		Animation:CUFELLBST_SKL.CUFELLBST_ATKH Frames: 0
		AnimationSound = Sound: FellBeastHurt		Animation:CUFELLBST_SKL.CUFELLBST_HITA Frames: 0
		AnimationSound = Sound: FellBeastWingFlaps	Animation:CUFELLBST_SKL.CUFELLBST_HITA Frames: 10

		AnimationSound = Sound: FellBeastWingFlaps	Animation:CUFELLBST_SKL.CUFELLBST_FLYA Frames: 5
		AnimationSound = Sound: FellBeastWingFlaps	Animation:CUFELLBST_SKL.CUFELLBST_HVRA Frames: 7
		AnimationSound = Sound: FellBeastWingFlapsShort	Animation:CUFELLBST_SKL.CUFELLBST_HVRB Frames: 3 
		AnimationSound = Sound: FellBeastWingFlapsShort	Animation:CUFELLBST_SKL.CUFELLBST_HVRC Frames: 5 32 
		AnimationSound = Sound: FellBeastWingFlaps	Animation:CUFELLBST_SKL.CUFELLBST_HVRC Frames: 62 103

		;-------- animation unused anymore -----------
		;AnimationSound = Sound: FellBeastEagleAttack	Animation:CUFELLBST_SKL.CUFELLBST_ATKE Frames: 20
		;AnimationSound = Sound: FellBeastWingFlaps	Animation:CUFELLBST_SKL.CUFELLBST_ATKA Frames: 1 24 46
		;AnimationSound = Sound: FellBeastWingFlaps	Animation:CUFELLBST_SKL.CUFELLBST_ATKC Frames: 16
		;AnimationSound = Sound: FellBeastWingFlaps	Animation:CUFELLBST_SKL.CUFELLBST_ATKE Frames: 7
		;AnimationSound = Sound: FellBeastWingFlaps	Animation:CUFELLBST_SKL.CUFELLBST_ATKF Frames: 7 
		;AnimationSound = Sound: FellBeastDie		Animation:CUFELLBST_SKL.CUFELLBST_DIEC Frames: 5
	End


	; *** ENGINEERING Parameters ***

	RadarPriority = UNIT
	KindOf = HERO PRELOAD SELECTABLE CAN_CAST_REFLECTIONS SCORE NO_FREEWILL_ENTER SCARY MONSTER CANNOT_RETALIATE
 
	Body = RespawnBody ModuleTag_02
		CheerRadius 	  = EMOTION_CHEER_RADIUS
		MaxHealth         = NAZGUL_HEALTH	;BALANCE FellBeast Health
;		MaxHealthDamaged  = 750
;		;RecoveryTime      = 15000

		HealingBuffFx     = None
	End

	Behavior = AutoHealBehavior ModuleTag_FellbeastHealing
		StartsActive = Yes
		HealingAmount = NAZGUL_HEAL_AMOUNT
		HealingDelay = 1000
		StartHealingDelay = 15000
		HealOnlyIfNotInCombat = Yes
	End

	Behavior = RespawnUpdate ModuleTag_RespawnUpdate
		DeathAnim				= DYING
		;DeathFX				= FX_SarumanDieToRespawn	;FXList to play when killed-to-respawn
		;DeathAnimationTime		= 5500 ;1133			;How long DeathAnim will take.
		InitialSpawnFX			= FX_NazgulInitialSpawn
		RespawnFX				= FX_NazgulRespawn		;FXList to play when respawning.
		;RespawnAnim			= LEVELED				;Animation to play when respawning.
		;RespawnAnimationTime		= 2000				;Time it takes for respawn to play.
		AutoRespawnAtObjectFilter	= NONE +CASTLE_KEEP		;Respawn at this location -- and at it's exit production point if possible.
		ButtonImage				= HINazgul
		
		;RespawnEntries determine the ruleset for how a character can be revived. Some units may automatically respawn, others
		;may require a specific revive action performed on him. You can specify different values for each level... or use Level:Any
		RespawnRules =	AutoSpawn:No	Cost:0	Time:300000	Health:100%		;DEFAULT VALUES
	End
 
	 Behavior = GiantBirdAIUpdate ModuleTag_GiantBirdAI
	    AutoAcquireEnemiesWhenIdle	=	No ATTACK_BUILDINGS     ; Important that Nazgul not go swooping about on his own, UNLESS IN GUARD STATE
	    MoodAttackCheckRate			=	500
	    AILuaEventsList				=	FellBeastFunctions	
		FollowThroughDistance		=	200
		FollowThroughCheckStep		=	50
		FollowThroughGradient		=	1.0
		
		GrabTossTimeTrigger			=	2.5
		GrabTossHeightTrigger		=   100.0
		TossFX				= FX_DiebyFalling
		SpecialContactPoints		= Swoop
		
		AttackPriority = AttackPriority_FellBeast
	  End
	
	  LocomotorSet
	    Locomotor = FellBeastLocomotor ;BALANCE FellBeast
	    Condition = SET_NORMAL 
	    Speed     = 88
	  End
	  LocomotorSet
	    Locomotor = FellBeastLocomotor ; BALANCE FellBeast
	    Condition = SET_SUPERSONIC 
	    Speed     = 114
	  End
	  LocomotorSet
	    Locomotor = FellBeastLocomotor ; BALANCE FellBeast
	    Condition = SET_WANDER 
	    Speed     = 78
	  End
	  LocomotorSet
	    Locomotor = FellBeastSwoopLocomotor ; BALANCE FellBeast
	    Condition = SET_PANIC
	    Speed     = 160
	  End
	
	Behavior = PhysicsBehavior ModuleTag_04
		;;VehicleCrashesIntoBuildingWeaponTemplate = NazgulCrashingOnBuildingWeapon
		;;VehicleCrashesIntoNonBuildingWeaponTemplate = NazgulCrashingOnNonBuildingWeapon
	End
 
	Behavior = SpecialPowerModule ModuleTag_FellbeastLevelAttack                      
		SpecialPowerTemplate      = SpecialAbilityLevelAttack
		UpdateModuleStartsAttack  = Yes
		;InitiateSound           = 
	End

	Behavior = FellBeastSwoopPower ModuleTag_FellBeastSwoopPower ; special fellbeast swoop power
		SpecialPowerTemplate		= SpecialAbilityLevelAttack
		UnpackTime					= 1 ; hit the guy
		AwardXPForTriggering		= 0		
		StartAbilityRange			= 1000.0		
	End
  
 	Behavior = SpecialPowerModule ModuleTag_FellbeastScreech                      
		SpecialPowerTemplate		= SpecialAbilityScreech
		UpdateModuleStartsAttack	= Yes
	End
	Behavior = SpecialAbilityUpdate ModuleTag_FellBeastScreechSAUpdate  
		SpecialPowerTemplate		= SpecialAbilityScreech
		UnpackTime					= 0  
		AwardXPForTriggering		= 0		
		TriggerSound				= NazgulScreech
		Instant						= Yes
	End
 
	Behavior = RiderChangeContain TransportContainModuleTag
		;A list of each valid rider that is allowed to ride this object. Each rider is
		;assigned a modelcondition state, a weaponset flag, an object status bit, and
		;a commandset override. The actual object is hidden inside the container so the
		;visible rider is fluff. Also riders are deleted (not killed) when the vehicle
		;is destroyed, so all deaths must be OCLs on the vehicle.
		Rider1 = MordorWitchKing	RIDER1 WEAPON_RIDER1 RIDER1 MordorWitchKingRidingFellBeastCommandSet SET_NORMAL
		Rider2 = MordorRingWraith	RIDER2 WEAPON_RIDER1 RIDER2 MordorNazgulRidingFellBeastCommandSet	SET_NORMAL

		;ScuttleDelay = 1500    this unit doesn't scuttle
		;ScuttleStatus = TOPPLED
		KillRiderWhenVehicleDies = Yes
	
		;Crew
		ObjectStatusOfCrew	= UNSELECTABLE UNATTACKABLE ENCLOSED
		InitialCrew			= MordorRingWraith 1
		CrewFilter			= NONE +MordorRingWraith +MordorWitchKing
		CrewMax				= 1
		
		;Victim passenger
		ObjectStatusOfContained = UNSELECTABLE UNATTACKABLE
		PassengerFilter = ANY +INFANTRY +HULK +CAVALRY +GRAB_AND_DROP -HERO -PORTER
		Slots = 1
		
		ShowPips = No
		CollidePickup = No
		AllowEnemiesInside = Yes
		AllowNeutralInside = Yes
		AllowAlliesInside  = Yes
		DamagePercentToUnits = 0%
		PassengerBonePrefix = PassengerBone:B_PASSENGER       KindOf:GRAB_AND_DROP
		EjectPassengersOnDeath = No ;Let RiderChangeContain handle this
		
		GrabWeapon = FellbeastGrabWeapon ; fire this weapon when fellbeast grabs a victim
		FireGrabWeaponOnVictim = No
		
		ReleaseSnappyness = 0.05 ; 1.0 is very snappy, 0.0 is very loose
		
	End

;  	Behavior = GiantBirdSlowDeathBehavior ModuleTag_GiantBirdSlowDeath
;  		DeathTypes = ALL ;-KNOCKBACK
;  		SinkDelay = 8000
;  		SinkRate = 1.6     ; in Dist/Sec
;  		DestructionDelay = 15000;
;  		Sound = INITIAL FellBeastDie
;  		Weapon = HIT_GROUND GondorTrebuchetRockWarhead
;  		;FX = HIT_GROUND FX_NazgulLightPoint
;  		FX = HIT_GROUND FX_TrebuchetImpactHit
;  		Sound = HIT_GROUND FellBeastDieImpact
;  		CrashAvoidKindOfs = STRUCTURE
;  		CrashAvoidRadius  = 800
;  		CrashAvoidStrength = 0.2
;  		NeedToMaintainFlailingHeight = No
;  		EjectRiderIfApplicable = Yes
;    	RiderSubObjects = NAZGUL_SKN WITCHKING2
;	End

	Behavior = SlowDeathBehavior ModuleTag_SlowDeath
		DeathTypes = ALL  
		DestructionDelay = 500
;        FadeTime = 1000
;        FadeDelay = 100
		ShadowWhenDead = No
		Sound = INITIAL FellBeastDie
        FX = INITIAL FX_FellBeastDeath
   	End

	Behavior = SquishCollide ModuleTag_06
		;nothing
	End
 
	; Detects stealth like the General's Pathfinder
;	Behavior = StealthDetectorUpdate ModuleTag_10
;		DetectionRate   = 500   ; how often to rescan for stealthed things in my sight (msec)
;		;DetectionRange = ??? ; enable this for independant balancing!
;		CanDetectWhileGarrisoned  = No ;Garrisoned means being in a structure that you units can shoot out of.
;		CanDetectWhileContained   = No ;Contained means being in a transport or tunnel network.
;	End


	;;; AUTO ABILITY MODULE ;;;
	Behavior = AutoAbilityBehavior ModuleTag_AutoAbilityBehavior
	End		

	Behavior = ExperienceLevelCreate ModuleTag_LevelBonus ;fixes the helptext not being ok on command button
		LevelToGrant = 10
		MPOnly = No
	End

	Geometry = CYLINDER
	GeometryMinorRadius = 39.0
	GeometryMajorRadius = 39.0
	GeometryHeight = 40.0
	GeometryOffset = X:0 Y:0 Z:-10
	GeometryIsSmall = No
	Shadow = SHADOW_VOLUME_NON_SELF_3; volumetric shadow that doesn't cast onto all objects using SHADOW_VOLUME_NON_SELF_3
	ShadowSunAngle = 89; clamp the angle so shadow casts straight down.
	Scale = 0.80
End

;--------------------------------------------------------------------

ChildObject MordorWitchKingOnFellBeast MordorFellBeast		;Real witchking
    ; SelectPortrait for Heros is portrait behind skill buttons. HP = HeroPortrait.
	SelectPortrait = HPWitchKing
	
	DisplayName			= OBJECT:MordorWitchKingOnFellBeast
	RecruitText			= CONTROLBAR:MordorWitchKingOnFellBeastRecruit
	ReviveText			= CONTROLBAR:MordorWitchKingOnFellBeastRevive
	Hotkey				= CONTROLBAR:MordorWitchKingOnFellBeastHotkey
    
    ; ButtonImage for Heros is button image on Hero Select UI to select hero. HI = HeroIcon or HeroImage.
    ButtonImage = HIWitchKing
        
        CommandSet = MordorWitchKingRidingFellBeastCommandSet
        
	BuildCost         = WITCHKING_ON_FELLBEAST_BUILDCOST		
	BuildTime         = WITCHKING_ON_FELLBEAST_BUILDTIME		

	Body = RespawnBody ModuleTag_02
		CheerRadius 	  = EMOTION_CHEER_RADIUS
		MaxHealth         = WITCHKING_ON_FELLBEAST_HEALTH			
		HealingBuffFx     = None
	End

	Behavior = RespawnUpdate ModuleTag_RespawnUpdate
		DeathAnim				= DYING
		;DeathFX				= FX_SarumanDieToRespawn	;FXList to play when killed-to-respawn
		;DeathAnimationTime		= 5500 ;1133			;How long DeathAnim will take.
		InitialSpawnFX			= FX_WitchKingInitialSpawn
		RespawnFX				= FX_WitchKingRespawn		;FXList to play when respawning.
		;RespawnAnim			= LEVELED				;Animation to play when respawning.
		;RespawnAnimationTime		= 2000				;Time it takes for respawn to play.
		AutoRespawnAtObjectFilter	= NONE +CASTLE_KEEP		;Respawn at this location -- and at it's exit production point if possible.
		ButtonImage				= HIWitchKing
		
		;RespawnEntries determine the ruleset for how a character can be revived. Some units may automatically respawn, others
		;may require a specific revive action performed on him. You can specify different values for each level... or use Level:Any
		RespawnRules =	AutoSpawn:No	Cost:0	Time:240000	Health:100%		;DEFAULT VALUES
	End


	Behavior = RiderChangeContain TransportContainModuleTag
		;A list of each valid rider that is allowed to ride this object. Each rider is
		;assigned a modelcondition state, a weaponset flag, an object status bit, and
		;a commandset override. The actual object is hidden inside the container so the
		;visible rider is fluff. Also riders are deleted (not killed) when the vehicle
		;is destroyed, so all deaths must be OCLs on the vehicle.
		Rider1 = MordorWitchKing	RIDER1 WEAPON_RIDER1 RIDER1 MordorWitchKingRidingFellBeastCommandSet	SET_NORMAL
		Rider2 = MordorRingWraith	RIDER2 WEAPON_RIDER2 RIDER2 MordorNazgulRidingFellBeastCommandSet       SET_NORMAL
		;ScuttleDelay = 1500    this unit doesn't scuttle
		;ScuttleStatus = TOPPLED
		KillRiderWhenVehicleDies = Yes

		;Crew
		ObjectStatusOfCrew	= UNSELECTABLE UNATTACKABLE ENCLOSED
		InitialCrew			= MordorWitchKing 1
		CrewFilter			= NONE +MordorRingWraith +MordorWitchKing
		CrewMax				= 1
		
		;Victim passenger
		ObjectStatusOfContained = UNSELECTABLE UNATTACKABLE
		PassengerFilter = ANY +INFANTRY +HULK +CAVALRY +GRAB_AND_DROP -HERO -PORTER
		Slots = 1
	
		;Standard TransportContain stuff
		ShowPips = No
		CollidePickup = No
		AllowEnemiesInside = Yes
		AllowNeutralInside = Yes
		AllowAlliesInside  = Yes
		DamagePercentToUnits = 0%
		PassengerBonePrefix = PassengerBone:B_PASSENGER       KindOf:GRAB_AND_DROP
		EjectPassengersOnDeath = No
		
		GrabWeapon = FellbeastGrabWeapon ; fire this weapon when fellbeast grabs a victim
		FireGrabWeaponOnVictim = No
	End
	
	Behavior = ExperienceLevelCreate ModuleTag_LevelBonus ;fixes the helptext not being ok on command button
		LevelToGrant = 10
		MPOnly = No
	End
	
	Behavior = AttributeModifierAuraUpdate ModuleTag_Leadership
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= WitchKingPassiveLeadership
		;TriggeredBy		= Upgrade_WitchKingLeadership
		RefreshDelay	= 2000
		Range			= 200
		ObjectFilter	= ANY +INFANTRY +CAVALRY +MONSTER -STRUCTURE -BASE_FOUNDATION -HERO
	End		
End


;------------------------------------------------------------------------------
; aka Witch King, WitchKingMordor, MordorFellBeast
Object MordorWitchKing                         ;BALANCE WitchKing 
	; *** ART Parameters ***

    ; SelectPortrait for Heros is portrait behind skill buttons. HP = HeroPortrait.
	SelectPortrait = HPWitchKing
    
    ; ButtonImage for Heros is button image on Hero Select UI to select hero. HI = HeroIcon or HeroImage.
    ButtonImage = HIWitchKing

	Draw = W3DScriptedModelDraw ModuleTag_01
	
		  OkToChangeModelColor = Yes
		  
		GlowEnabled = Yes;  
		GlowEmissive = No
		DefaultModelConditionState
			Model               = MUWchKng_SKN
			Skeleton			= MUWchKng_SKL
			ParticleSysBone     = None RingWraithFlare
			ParticleSysBone     = None RingWraithWindIdle
		End

		IdleAnimationState
			StateName				= STATE_Idle
			Animation				= IDLB
				AnimationName       = MUWchKng_IDLB
				AnimationMode       = LOOP
			End
			BeginScript
				CurDrawableHideSubObject("MACE")
			EndScript
			;Animation				= IDLB
			;	AnimationName       = MUWchKng_IDLB
			;	AnimationMode       = ONCE
			;	AnimationSpeedFactorRange = 0.9 1.1
			;	AnimationBlendTime	= 20
			;End
		End

		AnimationState        = MOVING WEAPONSET_TOGGLE_1
			StateName = STATE_Mace
			Animation           = RUNA
				AnimationName     = MUWchKng_RUNB
				AnimationMode     = LOOP
			End
			BeginScript
				CurDrawableShowSubObject("MACE")
			EndScript
			Flags               = RANDOMSTART
			ParticleSysBone     = None InfantryDustTrails
		End
		
		AnimationState        = MOVING
			Animation           = RUNB
				AnimationName     = MUWchKng_RUNA
				AnimationMode     = LOOP
			End
			BeginScript
				CurDrawableHideSubObject("MACE")
			EndScript
			Flags               = RANDOMSTART
			ParticleSysBone     = None InfantryDustTrails
		End
		
		AnimationState        = USER_1 WEAPONSET_TOGGLE_1
			Animation           = DIEA
				AnimationName     = MUWchKng_DIEB
				AnimationMode     = ONCE
			End
			BeginScript
				CurDrawableHideSubObject("MACE")
			EndScript
		End
		
		AnimationState        = USER_1
			Animation           = DIEA
				AnimationName     = MUWchKng_DIEA
				AnimationMode     = ONCE
			End
			BeginScript
				CurDrawableHideSubObject("MACE")
			EndScript
		End

		AnimationState        = DYING WEAPONSET_TOGGLE_1
			Animation           = DIEA
				AnimationName     = MUWchKng_DIEB
				AnimationMode     = ONCE
			End
			BeginScript
				CurDrawableHideSubObject("MACE")
			EndScript
		End

		AnimationState        = DYING
			Animation           = DIEA
				AnimationName     = MUWchKng_DIEA
				AnimationMode     = ONCE
			End
			BeginScript
				CurDrawableHideSubObject("MACE")
			EndScript
		End

		AnimationState			= STUNNED 
			Animation           = LNDA
				AnimationName   = MUWchKng_LNDA
				AnimationMode   = ONCE
			End
		End

		AnimationState			= STUNNED_STANDING_UP
			Animation           = GTPA
				AnimationName   = MUWchKng_GTPA
				AnimationMode   = ONCE
				AnimationSpeedFactorRange = 1.5 1.5
			End
		End
		
		;War Mace

		AnimationState        =  FIRING_OR_PREATTACK_A WEAPONSET_TOGGLE_1
			StateName = STATE_Mace
			Animation           = ATA1
				AnimationName     = MUWchKng_ATKC
				AnimationMode     = ONCE
				UseWeaponTiming		= No
				AnimationSpeedFactorRange = 1.111 1.111
			End
			Animation           = ATB1
				AnimationName     = MUWchKng_ATKD
				AnimationMode     = ONCE
				UseWeaponTiming		= No
				AnimationSpeedFactorRange = 1.5 1.5
			End
			BeginScript
				CurDrawableShowSubObject("MACE")
			EndScript
			Flags = RESTART_ANIM_WHEN_COMPLETE
		End
		
		;AnimationState        = ATTACKING WEAPONSET_TOGGLE_1
		;	StateName = STATE_Mace
		;	Animation           = ALERT_1
		;		AnimationName     = MUWchKng_IDLC
		;		AnimationMode     = LOOP
		;		AnimationPriority = 10
		;	End
		;	BeginScript
		;		CurDrawableShowSubObject("MACE")
		;	EndScript
		;End

		;Morgul Blade
		AnimationState        =  FIRING_OR_PREATTACK_A
			Animation           = ATA1
				AnimationName     = MUWchKng_ATKA
				AnimationMode     = ONCE
				UseWeaponTiming		= Yes
			End
			Animation           = ATB1
				AnimationName     = MUWchKng_ATKB
				AnimationMode     = ONCE
				UseWeaponTiming		= Yes
			End
			BeginScript
				CurDrawableHideSubObject("MACE")
			EndScript
		End
		AnimationState        = BETWEEN_FIRING_SHOTS_A
			Animation           = ALERT_1
				AnimationName     = MUWchKng_IDLA
				AnimationMode     = LOOP
				AnimationPriority = 10
			End
			BeginScript
				CurDrawableHideSubObject("MACE")
			EndScript
		End



		TransitionState       = TRANS_IdleToSelected
			Animation           = ATNA
				AnimationName     = MUWchKng_ATNA
				AnimationMode     = ONCE
				AnimationSpeedFactorRange = 0.7 1.3
				
			End
		End
		
		TransitionState       = TRANS_SelectedToMace
			Animation           = ATNA
				AnimationName     = MUWchKng_STHA
				AnimationMode     = ONCE
				AnimationSpeedFactorRange = 0.7 1.3
			End
			BeginScript
					CurDrawableShowSubObject("MACE")
			EndScript
		End
		
		TransitionState       = TRANS_MaceToSelected
			Animation           = ATNA
				AnimationName     = MUWchKng_STHB
				AnimationMode     = ONCE
				AnimationSpeedFactorRange = 0.7 1.3
			End
			BeginScript
				CurDrawableShowSubObject("MACE")
			EndScript
		End
		
		AnimationState = WAR_CHANT
			Animation = Chant
				AnimationName = MUWchKng_CHRA
				AnimationMode = LOOP
			End
			BeginScript
				CurDrawableHideSubObject("MACE")
			EndScript
		End
		
				
		AnimationState			= EMOTION_CELEBRATING
			Animation           = CHRA
				AnimationName   =  MUWchKng_CHRA
				AnimationMode   = ONCE
			End
			BeginScript
				CurDrawableHideSubObject("MACE")
			EndScript
			Flags					=	RESTART_ANIM_WHEN_COMPLETE
		End
		
		AnimationState        = EMOTION_ALERT
			Animation           = ALERT_1
				AnimationName     = MUWchKng_IDLA
				AnimationMode     = ONCE
				AnimationPriority = 10
			End
			BeginScript
					CurDrawableHideSubObject("MACE")
			EndScript
			Flags               = RESTART_ANIM_WHEN_COMPLETE ; acts like an idle animation & keeps running the animations.
		End
		
		AnimationState        = SELECTED WEAPONSET_TOGGLE_1
			StateName           = STATE_Mace
			Animation           = ATNB
				AnimationName     = MUWchKng_IDLC
				AnimationMode     = LOOP
			End
			BeginScript
				CurDrawableShowSubObject("MACE")
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Selected" then CurDrawableSetTransitionAnimState("TRANS_SelectedToMace") end
			EndScript
		End
		
		
		AnimationState        = SELECTED
			StateName           = STATE_Selected
			Animation           = ATNB
				AnimationName     = MUWchKng_ATNB
				AnimationMode     = LOOP
			End
			BeginScript
				CurDrawableHideSubObject("MACE")
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Idle" then CurDrawableSetTransitionAnimState("TRANS_IdleToSelected") end
				if Prev == "STATE_Mace" then CurDrawableSetTransitionAnimState("TRANS_MaceToSelected") end
			EndScript
		End
		
		AnimationState        = WEAPONSET_TOGGLE_1
			StateName           = STATE_Mace
			Animation           = ATNB
				AnimationName     = MUWchKng_IDLC
				AnimationMode     = LOOP
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Idle" then CurDrawableSetTransitionAnimState("TRANS_IdleToSelected") end
			EndScript
		End
	End

	; ***DESIGN parameters ***
	Side = Mordor
	EditorSorting = UNIT
	ThreatLevel = 5.0
	ThingClass = MEDIUM_MONSTER
	BuildCost         = WITCHKING_ON_FELLBEAST_BUILDCOST		
	BuildTime         = WITCHKING_ON_FELLBEAST_BUILDTIME		
	TransportSlotCount = 1
	CommandSet = MordorWitchKingCommandSet
	CommandPoints = 0

	VisionRange = VISION_FLIER
	ShroudClearingRange = SHROUD_CLEAR_FLIER

	DisplayName = OBJECT:MordorWitchKing
	CrushableLevel = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
	RamPower = 30;
	RamZMult = 0.5;
    MaxSimultaneousOfType = 1
	 
	WeaponSet
		Weapon              = PRIMARY     WitchKingMorgulBlade
		Weapon				= TERTIARY	  WitchKingMorgulBladeSpecialPower
	    AutoChooseSources	= PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	    AutoChooseSources	= SECONDARY FROM_PLAYER
	    AutoChooseSources	= TERTIARY NONE
	End
	
	WeaponSet
		Conditions			= WEAPONSET_TOGGLE_1
		Weapon				= PRIMARY	  WitchKingWarMace
		Weapon				= TERTIARY	  WitchKingMorgulBladeSpecialPower
	    AutoChooseSources	= TERTIARY NONE
	End

	ArmorSet
		Conditions      = None
		Armor           = HeroArmor
		DamageFX        = None
	End


	; *** AUDIO Parameters ***;

	;VoiceAttack			= NoSound
	VoiceCreated			= CampOrcCreateWitchKing
	VoiceFullyCreated 		= CampOrcCreateWitchKing
	;VoiceMove			= NoSound
	VoicePriority			= 88
	;VoiceSelect			= NoSound

	;UnitSpecificSounds
	;End

	EvaEventDamagedOwner = UnitUnderAttack 		;Eva event to trigger when unit is damaged
	EvaEventDieOwner = WitchKingDie			;Eva event to trigger on unit's death. NOTICE THAT this is only for permanent deaths
							;For deaths you can respawn from, use the DeathFX


	; *** ENGINEERING Parameters ***
	RadarPriority = UNIT
	KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY MONSTER PATH_THROUGH_INFANTRY SCARY
	 
	Body = RespawnBody ModuleTag_02
		CheerRadius 			= EMOTION_CHEER_RADIUS
		MaxHealth         		= WITCHKING_ON_FELLBEAST_HEALTH			;BALANCE Witchking Health
		PermanentlyKilledByFilter	= NONE +RohanEowyn
	End
	Behavior = RespawnUpdate ModuleTag_RespawnUpdate
		DeathAnim			= USER_1			;Model condition to play when killed-to-respawn
		DeathFX				= FX_WitchKingDeath		;FXList to play when killed-to-respawn
		DeathAnimationTime		= 5133				;How long DeathAnim will take.
		RespawnAnim			= LEVELED		;Animation to play when respawning.
		RespawnFX			= FX_Resurrection		;FXList to play when respawning.
		RespawnAnimationTime		= 2000				;Time it takes for respawn to play.
		AutoRespawnAtObjectFilter	= NONE +CASTLE_KEEP		;Respawn at this location -- and at it's exit production point if possible.
		ButtonImage			= HIWitchKing
		RespawnAsTemplate		= MordorWitchKingOnFellBeast
		
		;RespawnEntries determine the ruleset for how a character can be revived. Some units may automatically respawn, others
		;may require a specific revive action performed on him. You can specify different values for each level... or use Level:Any
		RespawnRules =	AutoSpawn:No		Cost:2500		Time:60000		Health:100%		;DEFAULT VALUES
		RespawnEntry =	Level:2			Cost:2500		Time:60000						;For other levels, only override what is different.
		RespawnEntry =	Level:3			Cost:2500		Time:60000
		RespawnEntry =	Level:4			Cost:2500		Time:60000
		RespawnEntry =	Level:5			Cost:2500		Time:60000
		RespawnEntry =	Level:6			Cost:2500		Time:60000
		RespawnEntry =	Level:7			Cost:2500		Time:60000
		RespawnEntry =	Level:8			Cost:2500		Time:60000
		RespawnEntry =	Level:9			Cost:2500		Time:60000
		RespawnEntry =	Level:10		Cost:2500		Time:60000
	End

	Behavior = AutoHealBehavior ModuleTag_WitchKingHealing
		StartsActive = Yes
		HealingAmount = 20
		HealingDelay = 1000
		StartHealingDelay = 15000
		HealOnlyIfNotInCombat = Yes
	End
	
	Behavior = WeaponChangeSpecialPowerModule THING
		SpecialPowerTemplate = SpecialAbilityBerserkerLightTorch
		FlagsUsedForToggle		= WEAPONSET_TOGGLE_1
		ToggleOnSleepFrames = 25
		ToggleOffSleepFrames = 0

		;ToggleOnAttributeModifier = BerserkerTorchLightingPenalty
	End
	
	Behavior = AttributeModifierAuraUpdate ModuleTag_Leadership
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= WitchKingPassiveLeadership
		TriggeredBy		= Upgrade_WitchKingLeadership
		RefreshDelay	= 2000
		Range			= 600
		AllowPowerWhenAttacking = Yes
		ObjectFilter	= ANY +INFANTRY +CAVALRY +MONSTER -STRUCTURE -BASE_FOUNDATION  -HERO
	End
			
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_TheodenLeadership
		SpecialPowerTemplate = SpecialAbilityFakeLeadership
		TriggeredBy = Upgrade_WitchKingLeadership
	End
	
	Behavior = SpecialPowerModule ModuleTag_TheodenLeadershipUpdate   
		SpecialPowerTemplate      = SpecialAbilityFakeLeadership
		UpdateModuleStartsAttack  = No
		StartsPaused = Yes
	End	
	 
	Behavior = AIUpdateInterface ModuleTag_03
		AutoAcquireEnemiesWhenIdle = Yes ATTACK_BUILDINGS
		;AILuaEventsList = TrollFunctions
	End

	LocomotorSet
		Locomotor = NazgulLocomotor
		Condition = SET_NORMAL
		Speed     = 32
	End
	
	  
	Behavior = PhysicsBehavior ModuleTag_04
	End
	 
	Behavior = ReflectDamage ModuleTag_ReflectDamage
		DamageTypesToReflect = +CRUSH +SLASH ; +PIERCE -- Don't want archers and long distance pikeman that use pierce weapons to suffer reflective damage.
		ReflectDamagePercentage = 20%
		MinimumDamageToReflect = 0.2
	End

	Behavior = SlowDeathBehavior ModuleTag_05
		DeathTypes = ALL -KNOCKBACK
		SinkDelay = 3000
		SinkRate = 1.20     ; in Dist/Sec
		DestructionDelay = 15000
		;Sound = INITIAL FellBeastDie
	End
	 
	Behavior = SlowDeathBehavior ModuleTag_07
		; Same as normal death, but no sound (sound already played by SoundImpact = ... )
		DeathTypes = NONE +KNOCKBACK
		SinkDelay = 3000
		SinkRate = 1.20     ; in Dist/Sec
		DestructionDelay = 15000
	End
	 

	Geometry = CYLINDER
	GeometryMajorRadius = 16.0
	GeometryMinorRadius = 16.0
	GeometryHeight = 16.0
	GeometryIsSmall = No
  Shadow = SHADOW_DECAL
  ShadowSizeX = 19;
  ShadowSizeY = 19;
  ShadowTexture = ShadowI;
End

;------------------------------------------------------------------------------
; 
Object MordorRingWraith                         ;BALANCE Nazgul 
	; *** ART Parameters ***

    ; SelectPortrait for Heros is portrait behind skill buttons. HP = HeroPortrait.
	SelectPortrait = HPWitchKing
    
    ; ButtonImage for Heros is button image on Hero Select UI to select hero. HI = HeroIcon or HeroImage.
    ButtonImage = HIWitchKing

   

	Draw = W3DScriptedModelDraw ModuleTag_01
		GlowEnabled = Yes;  
		GlowEmissive = No;
		DefaultModelConditionState
			Model               = MURngWrath
			ParticleSysBone     = None RingWraithFlare
			ParticleSysBone     = None RingWraithWindIdle
		End
	End
 
	; ***DESIGN parameters ***
	Side = Mordor
	EditorSorting = UNIT
	ThreatLevel = 4.0
	ThingClass = MEDIUM_MONSTER
  BuildCost          = 1000
  BuildTime          = 30
	TransportSlotCount = 1
	WeaponSet
		Weapon              = PRIMARY     WitchKingMorgulBlade
	End

	ArmorSet
		Conditions      = None
		Armor           = HeroArmor
		DamageFX        = None
	End
	VisionRange = 120.0
	DisplayName = OBJECT:MordorRingWraith
	CrushableLevel = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
	CrusherLevel = 2
	RamPower = 30;
	RamZMult = 0.5;
	CommandPoints = 0
 

	; *** AUDIO Parameters ***;

	VoiceSelect		= NoSound
	VoiceMove		= NoSound
	VoiceAttack		= NoSound
	VoiceFear		= NoSound
	VoiceGuard		= NoSound

	SoundAmbient		= NoSound
	SoundMoveLoop		= NoSound
	SoundMoveStart		= NoSound
	SoundImpact		= NoSound
  
	;UnitSpecificSounds
	;	VoiceGarrison         = NoSound
	;	VoiceEnter            = NoSound
	;	VoiceEnterHostile     = NoSound
	;	VoiceGetHealed        = NoSound
	;End

	EvaEventDamagedOwner = UnitUnderAttack 		;Eva event to trigger when unit is damaged


	; *** ENGINEERING Parameters ***
	RadarPriority = UNIT
	KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY MONSTER PATH_THROUGH_INFANTRY NO_COLLIDE ARMY_SUMMARY SCARY
 
	Body = RespawnBody ModuleTag_02
		CheerRadius 			= EMOTION_CHEER_RADIUS
		MaxHealth         		= 1000                  ;BALANCE Ringwraith Health
		PermanentlyKilledByFilter	= NONE +RohanEowyn
	End
	Behavior = RespawnUpdate ModuleTag_RespawnUpdate
		DeathAnim					= STUNNED						;Model condition to play when killed-to-respawn
		DeathFX						= FX_GandalfLightningSwordHit	;FXList to play when killed-to-respawn
		DeathAnimationTime			= 1133							;How long DeathAnim will take.

		RespawnAnim					= LEVELED			;Animation to play when respawning.
		RespawnFX					= FX_Resurrection				;FXList to play when respawning.
		RespawnAnimationTime		= 2000							;Time it takes for respawn to play.
		AutoRespawnAtObjectFilter	= NONE +CASTLE_KEEP				;Respawn at this location -- and at it's exit production point if possible.
		ButtonImage					= HINazgul
		RespawnAsTemplate			= MordorFellBeast

		;RespawnEntries determine the ruleset for how a character can be revived. Some units may automatically respawn, others
		;may require a specific revive action performed on him. You can specify different values for each level... or use Level:Any
		RespawnRules =			AutoSpawn:No	Cost:2000		Time:60000		Health:100%		;DEFAULT VALUES
		RespawnEntry =	Level:2				Cost:2000		Time:60000		;For other levels, only override what is different.
		RespawnEntry =	Level:3				Cost:2000		Time:60000		
		RespawnEntry =	Level:4				Cost:2000		Time:60000		
		RespawnEntry =	Level:5				Cost:2000		Time:60000		
		RespawnEntry =	Level:6				Cost:2000		Time:60000		
		RespawnEntry =	Level:7				Cost:2000		Time:60000		
		RespawnEntry =	Level:8				Cost:2000		Time:60000		
		RespawnEntry =	Level:9				Cost:2000		Time:60000		
		RespawnEntry =	Level:10			Cost:2000		Time:60000		
	End
 
	Behavior = AIUpdateInterface ModuleTag_03
	End

	LocomotorSet
		Locomotor = NazgulLocomotor
		Condition = SET_NORMAL
		Speed     = 32
	End
  
	Behavior = PhysicsBehavior ModuleTag_04
	End

	Behavior = SlowDeathBehavior ModuleTag_05
		DeathTypes = ALL -KNOCKBACK
		SinkDelay = 3000
		SinkRate = 1.20     ; in Dist/Sec
		DestructionDelay = 15000
		;Sound = INITIAL FellBeastDie
	End
 
	Behavior = SquishCollide ModuleTag_06
		;nothing
	End
 
	Behavior = SlowDeathBehavior ModuleTag_07
		; Same as normal death, but no sound (sound already played by SoundImpact = ... )
		DeathTypes = NONE +KNOCKBACK
		SinkDelay = 3000
		SinkRate = 1.20     ; in Dist/Sec
		DestructionDelay = 15000
	End
 
	; Detects stealth like the General's Pathfinder
;	Behavior = StealthDetectorUpdate ModuleTag_10
;		DetectionRate   = 500   ; how often to rescan for stealthed things in my sight (msec)
;		;DetectionRange = ??? ; enable this for independant balancing!
;		CanDetectWhileGarrisoned  = No ;Garrisoned means being in a structure that you units can shoot out of.
;		CanDetectWhileContained   = No ;Contained means being in a transport or tunnel network.
;	End

	Geometry = CYLINDER
	GeometryMajorRadius = 16.0
	GeometryMinorRadius = 16.0
	GeometryHeight = 16.0
	GeometryIsSmall = No
  Shadow = SHADOW_DECAL
  ShadowSizeX = 19;
  ShadowSizeY = 19;
  ShadowTexture = ShadowI;
End
;------------------------------------------------------------------------------
; 
Object MordorRingWraithNoGlow                         ;BALANCE Nazgul 
  ; *** ART Parameters ***

    ; SelectPortrait for Heros is portrait behind skill buttons. HP = HeroPortrait.
	SelectPortrait = HPWitchKing
    
    ; ButtonImage for Heros is button image on Hero Select UI to select hero. HI = HeroIcon or HeroImage.
    ButtonImage = HIWitchKing

   

  Draw = W3DScriptedModelDraw ModuleTag_01
  GlowEnabled = No;
    DefaultModelConditionState
      Model = MURngWrath
    End
  End
 
  ; ***DESIGN parameters ***
  Side = Mordor
  EditorSorting = UNIT
	ThreatLevel = 4.0
  ThingClass = MEDIUM_MONSTER

  TransportSlotCount = 1
  WeaponSet
    Weapon              = PRIMARY     NazgulGrabAttack
  End

  ArmorSet
    Conditions      = None
    Armor           = NoArmor
    DamageFX        = None
  End
  VisionRange = 80.0
  DisplayName = OBJECT:MordorRingWraith
  CrushableLevel = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CrusherLevel = 2
  RamPower = 30;
  RamZMult = 0.5;
  CommandPoints = 0
 

	; *** AUDIO Parameters ***;

	VoiceSelect			= NoSound
	VoiceMove			= NoSound
	VoiceAttack			= NoSound
	VoiceFear			= NoSound
	VoiceGuard			= NoSound

	SoundAmbient			= NoSound
	SoundMoveLoop			= NoSound
	SoundMoveStart			= NoSound
	SoundImpact			= NoSound
	
	;UnitSpecificSounds
	;	VoiceGarrison		= NoSound
	;	VoiceEnter		= NoSound
	;	VoiceEnterHostile	= NoSound
	;	VoiceGetHealed		= NoSound
	;End

	EvaEventDamagedOwner = UnitUnderAttack 		;Eva event to trigger when unit is damaged


  ; *** ENGINEERING Parameters ***
 
 RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY SCORE MONSTER PATH_THROUGH_INFANTRY ARMY_SUMMARY SCARY
 
  Body = ActiveBody ModuleTag_02
    MaxHealth         = 10                  ;BALANCE Nazgul Health
    MaxHealthDamaged  = 5
    ;RecoveryTime      = 5000
  End
 
  Behavior = AIUpdateInterface ModuleTag_03
  End
  
  LocomotorSet
    Locomotor = NazgulLocomotor
    Condition = SET_NORMAL
    Speed     = 32
  End
 
  Behavior = PhysicsBehavior ModuleTag_04
  End
 

  Behavior = SlowDeathBehavior ModuleTag_05
    DeathTypes = ALL -KNOCKBACK
    SinkDelay = 3000
    SinkRate = 1.20     ; in Dist/Sec
    DestructionDelay = 15000
    ;Sound = INITIAL FellBeastDie
  End
 
  Behavior = SquishCollide ModuleTag_06
    ;nothing
  End
 
  Behavior = SlowDeathBehavior ModuleTag_07
    ; Same as normal death, but no sound (sound already played by SoundImpact = ... )
    DeathTypes = NONE +KNOCKBACK
    SinkDelay = 3000
    SinkRate = 1.20     ; in Dist/Sec
    DestructionDelay = 15000
  End

	; Detects stealth like the General's Pathfinder
	Behavior = StealthDetectorUpdate ModuleTag_10
		DetectionRate   = 500   ; how often to rescan for stealthed things in my sight (msec)
		;DetectionRange = ??? ; enable this for independant balancing!
		CanDetectWhileGarrisoned  = No ;Garrisoned means being in a structure that you units can shoot out of.
		CanDetectWhileContained   = No ;Contained means being in a transport or tunnel network.
	End
	
  Geometry = CYLINDER
  GeometryMajorRadius = 16.0
  GeometryMinorRadius = 16.0
  GeometryHeight = 16.0
  GeometryIsSmall = No
  Shadow = SHADOW_DECAL
  ShadowSizeX = 19;
  ShadowSizeY = 19;
  ShadowTexture = ShadowI;
End

;------------------------------------------------------------------------------
; aka Siege Tower, MordorSiegeTower, SiegeTowerMordor
Object MordorSiegeTower

    ; This is required for garrisoned objects - please put in all objects.
    ButtonImage		= BMGreatSiegeWorks_SiegeTower
    SelectPortrait	= UPMordor_SeigeTower

  ; *** ART Parameters ***
  Draw = W3DTruckDraw ModuleTag_01
    OkToChangeModelColor = Yes
    ExtraPublicBone = Crew
    ExtraPublicBone = Ladder01
    ExtraPublicBone = Ladder02
    ExtraPublicBone = Ladder03
    ExtraPublicBone = Ladder04
    ExtraPublicBone = Passenger    

    DependencySharedModelFlags = MOVING TURN_LEFT TURN_RIGHT BACKING_UP DYING SIEGE_CONTAIN
    
    StaticModelLODMode = Yes
  
    ; day
    DefaultModelConditionState
      Model         = MUSiegTowr
    End
    
    ModelConditionState = DYING
      Model         = MUSiegTowrDSKN
    End
            
    ModelConditionState = MOVING
		Model	=  MUSiegTowr 
      ParticleSysBone     = WheelL01 SiegeTowerTrailDust
      ParticleSysBone     = WheelR01 SiegeTowerTrailDust
      ParticleSysBone     = WheelL02 SiegeTowerTrailDust
      ParticleSysBone     = WheelR02 SiegeTowerTrailDust
    End
    
    ModelConditionState =JUST_BUILT
		Model	=  MUSiegTowr_A
    End
     
	;-----------------------------------------------anims--- 
    IdleAnimationState
		StateName = Idle
		Animation = IDLA
			AnimationName     = MUSiegTowr_skl.MUSiegTowr_OPNA
			AnimationMode = Manual
		End
		
    End
    
     AnimationState  = JUST_BUILT
		StateName = JustBuilt
		Animation = Being_Built
			AnimationName     = MUSiegTowr_A.MUSiegTowr_A
			AnimationMode =ONCE
		End
    End
    
    AnimationState  = DYING DEATH_1
      ; killer is north of us, however art is named wrong
      Animation = Dying1
        AnimationName     = MUSiegTowrDSKL.MUSiegTowrDIE_W
        AnimationMode = ONCE
      End
    End

    AnimationState  = DYING DEATH_2
      ; killer is east of us, however art is named wrong
      Animation = Dying2
        AnimationName     = MUSiegTowrDSKL.MUSiegTowrDIE_S
        AnimationMode = ONCE
      End
    End

    AnimationState  = DYING DEATH_3
      ; killer is south of us, however art is named wrong
      Animation = Dying3
        AnimationName     = MUSiegTowrDSKL.MUSiegTowrDIE_E
        AnimationMode = ONCE
      End
    End

    AnimationState  = DYING DEATH_4
      ; killer is west of us, however art is named wrong
      Animation = Dying4
        AnimationName     = MUSiegTowrDSKL.MUSiegTowrDIE_N
        AnimationMode = ONCE
      End
    End

    AnimationState  = DYING
      Animation = Dying
        AnimationName     = MUSiegTowrDSKL.MUSiegTowrDIE_C
        AnimationMode = ONCE
      End
    End

    AnimationState  = UNPACKING
      Animation = Unpack
        AnimationName     = MUSiegTowr_skl.MUSiegTowr_OPNA
        AnimationMode = ONCE
      End
      ParticleSysBone = Ladder04 SiegeTowerDeployedDebris
      ParticleSysBone = Ladder04 SiegeTowerDeployedDust
    End

    AnimationState  = DEPLOYED
      Animation = Close
        AnimationName     = MUSiegTowr_skl.MUSiegTowr_OPNB
        AnimationMode = ONCE
      End
    End

    AnimationState  = PACKING
      Animation = Close
        AnimationName     = MUSiegTowr_skl.MUSiegTowr_CLSA
        AnimationMode = ONCE
      End
    End


    TrackMarks = EXTireTrack2_Temp.tga
    TrackMarksLeftBone = WheelL02
    TrackMarksRightBone = WheelR02

    ; These parameters are only used if the model has a separate suspension,
    ; and the locomotor has HasSuspension = Yes.
    LeftFrontTireBone           = WheelL01
    RightFrontTireBone          = WheelR01
    LeftRearTireBone            = WheelL02
    RightRearTireBone           = WheelR02
    TireRotationMultiplier      = 0.2   ; this * speed = rotation.
    PowerslideRotationAddition  = 2.5   ; This speed is added to the rotation speed when powersliding.
  End

  ; ***DESIGN parameters ***
  Side = Mordor
	IsTrainable		= No
  EditorSorting = UNIT
  ThreatLevel = 1.0
  ThingClass = MACHINE
  TransportSlotCount = 1

	ArmorSet
		Conditions      = None
		Armor           = SiegeTowerArmor
		DamageFX        = SiegeTowerDamageFX
	End

    ; This is required so that the build phase lasts as long as the anim.
	BuildFadeInOnCreateTime = 16.0
	
	
	VisionRange = VISION_STANDARD_MELEE
	ShroudClearingRange = SHROUD_CLEAR_STANDARD

	BountyValue = MORDOR_SIEGETOWER_BOUNTY_VALUE
	DisplayName    = OBJECT:MordorSiegeTower
	CrusherLevel   = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
	CrushableLevel = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
	CommandSet = MordorSiegeTowerCommandSet
	CanPathThroughGates	= No
	CommandPoints = 5


	; ***AUDIO parameters ***

	VoiceAttack			= SiegeTowerVoiceAttack			;CatapultVoiceAttack
	VoiceAttack2		= SiegeTowerVoiceAttack2
	VoiceAttackCharge		= SiegeTowerVoiceAttack			;CatapultVoiceAttack
	VoiceAttackCharge2	= SiegeTowerVoiceAttack2
	VoiceAttackStructure	= SiegeTowerVoiceAttack			;CatapultVoiceAttack
	VoiceAttackStructure2	= SiegeTowerVoiceAttack2
	VoiceCombineWithHorde	= SiegeTowerVoiceMove
	VoiceCombineWithHorde2	= SiegeTowerVoiceMove2
	VoiceCreated		= CampOrcCreateSiegeTower
	VoiceFullyCreated 	= CampOrcCreateSiegeTower
	VoiceGuard			= SiegeTowerVoiceMove
	VoiceMove			= SiegeTowerVoiceMove			;CatapultVoiceMove
	VoiceMove2			= SiegeTowerVoiceMove2
	VoicePriority		= 16
	VoiceSelect			= SiegeTowerVoiceSelect			;CatapultVoiceSelect
	VoiceSelect2		= SiegeTowerVoiceSelect2
	VoiceSelectBattle		= SiegeTowerVoiceSelect			;CatapultVoiceSelect
	VoiceSelectBattle2	= SiegeTowerVoiceSelect2

	SoundAmbient		= SiegeTowerTrollVoxSinglesLoop
	SoundMoveLoop		= SiegeTowerMoveLoop			;CatapultMoveLoop

	EvaEventDamagedOwner	= UnitUnderAttack 			;Eva event to trigger when unit is damaged

	Behavior = LargeGroupAudioUpdate ModuleTag_LGAU			; Tie into LargeGroupAudio system
		Key = SiegeWeapon SiegeTower
	End
 
  ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		MaxUpdateRangeCap = 800
		AnimationSound = Sound:SiegeTowerCreatePart1 						Animation:MUSiegTowr_A.MUSiegTowr_A 		Frames:70
		AnimationSound = Sound:SiegeTowerCreatePart2 						Animation:MUSiegTowr_A.MUSiegTowr_A 		Frames:140
		AnimationSound = Sound:SiegeTowerCreatePart3 						Animation:MUSiegTowr_A.MUSiegTowr_A 		Frames:220
		AnimationSound = Sound:SiegeTowerCreatePart4 						Animation:MUSiegTowr_A.MUSiegTowr_A 		Frames:350
		AnimationSound = Sound:SiegeTowerGateLatch						Animation:MUSiegTowr_A.MUSiegTowr_A			Frames:399
		AnimationSound = Sound:LadderDieCreak							Animation:MUSiegTowr_A.MUSiegTowr_A			Frames:400
		AnimationSound = Sound:SiegeTowerGateCloseImpact					Animation:MUSiegTowr_A.MUSiegTowr_A 		Frames:445

		AnimationSound = Sound:SiegeTowerDieFall 							Animation:MUSiegTowrDSKL.MUSiegTowrDIE_W 		Frames: 50
		AnimationSound = Sound:SiegeTowerDieFall 							Animation:MUSiegTowrDSKL.MUSiegTowrDIE_C 		Frames: 1
		AnimationSound = Sound:SiegeTowerDieFall 							Animation:MUSiegTowrDSKL.MUSiegTowrDIE_E 		Frames: 45
		AnimationSound = Sound:SiegeTowerDieFall 							Animation:MUSiegTowrDSKL.MUSiegTowrDIE_M 		Frames: 1
		AnimationSound = Sound:SiegeTowerDieFall 							Animation:MUSiegTowrDSKL.MUSiegTowrDIE_N 		Frames: 50
		AnimationSound = Sound:SiegeTowerDieFall 							Animation:MUSiegTowrDSKL.MUSiegTowrDIE_S 		Frames: 49

		AnimationSound = Sound:LadderDieCreak			RequiredMC:UNPACKING	Animation:MUSiegTowr_skl.MUSiegTowr_OPNA		Frames: 0
		AnimationSound = Sound:SiegeTowerGateLatch						Animation:MUSiegTowr_skl.MUSiegTowr_OPNA		Frames: 1
		AnimationSound = Sound:SiegeTowerOpen							Animation:MUSiegTowr_skl.MUSiegTowr_OPNA		Frames: 9
		AnimationSound = Sound:SiegeTowerGateOpenImpact						Animation:MUSiegTowr_skl.MUSiegTowr_OPNA		Frames: 10
		AnimationSound = Sound:ImpactLadderWall							Animation:MUSiegTowr_skl.MUSiegTowr_OPNA		Frames: 22

		AnimationSound = Sound:SiegeTowerGateLatch	 					Animation:MUSiegTowr_skl.MUSiegTowr_CLSA		Frames: 0
		AnimationSound = Sound:LadderDieCreak							Animation:MUSiegTowr_skl.MUSiegTowr_CLSA		Frames: 1
		AnimationSound = Sound:SiegeTowerGateCloseImpact 					Animation:MUSiegTowr_skl.MUSiegTowr_CLSA		Frames: 31
  End


  ; *** ENGINEERING Parameters ***  

  RadarPriority = UNIT
  KindOf                = SELECTABLE SIEGE_TOWER MACHINE PATH_THROUGH_INFANTRY TRANSPORT SCARY SCORE
  ImmuneToShockwave = Yes

  Behavior = SiegeAIUpdate ModuleTag_02
    AutoAcquireEnemiesWhenIdle = No
    MoodAttackCheckRate        = 250
  End

  LocomotorSet
    Locomotor = SiegeTowerLocomotor
    Condition = SET_NORMAL 
    Speed     = 24
  End

  Behavior = PhysicsBehavior ModuleTag_03
  End

    BuildCost = MORDOR_SIEGETOWER_BUILDCOST
    BuildTime = MORDOR_SIEGETOWER_BUILDTIME
    
  Body                  = ActiveBody ModuleTag_04
    CheerRadius 	= EMOTION_CHEER_RADIUS
    MaxHealth        	= MORDOR_SIEGETOWER_HEALTH        ;BALANCE MordorSiegeTower Health
    MaxHealthDamaged    = MORDOR_SIEGETOWER_HEALTH_DAMAGED
  End
  
  	; Death weapons for fall to right
	Behavior = FireWeaponWhenDeadBehavior ModuleTag_Fall1
		RequiredStatus	= DEATH_1
		StartsActive	= Yes
		DelayTime		= 2000 
		DeathWeapon		= MordorSiegeTowerToppleFinal
		WeaponOffset	= X:36 Y:0 Z:0
	End

	; Death weapons for fall forward
	Behavior = FireWeaponWhenDeadBehavior ModuleTag_Fall2
		RequiredStatus	= DEATH_2
		StartsActive	= Yes
		DelayTime		= 2000
		DeathWeapon		= MordorSiegeTowerToppleFinal
		WeaponOffset	= X:0 Y:36 Z:0
	End
	
	; Death weapons for fall left
	Behavior = FireWeaponWhenDeadBehavior ModuleTag_Fall3
		RequiredStatus	= DEATH_3
		StartsActive	= Yes
		DelayTime		= 2000 
		DeathWeapon		= MordorSiegeTowerToppleFinal
		WeaponOffset	= X:-36 Y:0 Z:0
	End

	; Death weapons for fall down
	Behavior = FireWeaponWhenDeadBehavior ModuleTag_Fall4
		RequiredStatus	= DEATH_4
		StartsActive	= Yes
		DelayTime		=  2000
		DeathWeapon		= MordorSiegeTowerToppleFinal 
		WeaponOffset	= X:0 Y:-36 Z:0
	End

  Behavior = SlowDeathBehavior ModuleTag_05
    ProbabilityModifier = 1 ; We only want this one to apply when the directional one is blocked/unpickable
    DeathTypes = ALL 
    SinkDelay = 5000
    SinkRate = 4.0     ; in Dist/Sec
    DestructionDelay = 45000
    FX = INITIAL FX_SiegeTowerDieInitial_N
  End

  Behavior = ClearanceTestingSlowDeathBehavior ModuleTag_05_n
	ProbabilityModifier		  = 1000
    DeathTypes                = ALL 
    SinkDelay                 = 2200
    SinkRate                  = 4.0     ; in Dist/Sec
    DestructionDelay          = 16000
    DamageAmountRequired      = 15
    MinKillerAngle            = -46
    MaxKillerAngle            = 46
    DeathFlags                = DEATH_1 ; Sets BOTH model condition and object status bits.
    ProbabilityModifier       = 10000
    FX = INITIAL FX_SiegeTowerDieInitial_N
    ;FX = MIDPOINT FX_SiegeTowerDieMidpoint_N
    
    ; This is the area which must be clear for this slow death to go off
    ; Use Control-Shift-Alt-E in game to display this area
    ; Use debug.add l + clearancetestingslowdeathbehavior to get feedback on why test fails
    ClearanceGeometry = Box
    ClearanceGeometryMajorRadius = 32.0
    ClearanceGeometryMinorRadius = 32.0
    ClearanceGeometryHeight = 32.0
    ClearanceGeometryIsSmall = No
    ClearanceGeometryOffset = X:36 Y:0 Z:0

    ClearanceMaxHeight = 32
    ClearanceMaxHeightFraction = 0.04 ; If more than 5% of the cells in the clearance geometry are more than 40 units above the Oliphant's base, don't fall (don't fall into cliffs)
    ClearanceMinHeight = -32
    ClearanceMinHeightFraction = 0.40 ; If more than 40% of the cells in the clearance geometry are more than 40 units below the Oliphant's base, don't fall (don't get left hanging over a cliff)    
  End

  Behavior = ClearanceTestingSlowDeathBehavior ModuleTag_05_e
	ProbabilityModifier = 1000
    DeathTypes                = ALL 
    SinkDelay                 = 2200
    SinkRate                  = 4.0     ; in Dist/Sec
    DestructionDelay          = 16000
    DamageAmountRequired      = 15
    MinKillerAngle            = 44
    MaxKillerAngle            = 136
    DeathFlags                = DEATH_2 ; Sets BOTH model condition and object status bits.
    ProbabilityModifier       = 10000
    FX = INITIAL FX_SiegeTowerDieInitial_N
    ;FX = MIDPOINT FX_SiegeTowerDieMidpoint_N
    
    ; This is the area which must be clear for this slow death to go off
    ; Use Control-Shift-Alt-E in game to display this area
    ; Use debug.add l + clearancetestingslowdeathbehavior to get feedback on why test fails
    ClearanceGeometry = Box
    ClearanceGeometryMajorRadius = 32.0
    ClearanceGeometryMinorRadius = 32.0
    ClearanceGeometryHeight = 32.0
    ClearanceGeometryIsSmall = No
    ClearanceGeometryOffset = X:0 Y:36 Z:0

    ClearanceMaxHeight = 32
    ClearanceMaxHeightFraction = 0.04 ; If more than 5% of the cells in the clearance geometry are more than 40 units above the Oliphant's base, don't fall (don't fall into cliffs)
    ClearanceMinHeightFraction = 0.40 ; If more than 40% of the cells in the clearance geometry are more than 40 units below the Oliphant's base, don't fall (don't get left hanging over a cliff)        
  End

  Behavior = ClearanceTestingSlowDeathBehavior ModuleTag_05_s
	ProbabilityModifier = 1000
    DeathTypes                = ALL 
    SinkDelay                 = 2200
    SinkRate                  = 4.0     ; in Dist/Sec
    DestructionDelay          = 16000
    DamageAmountRequired      = 15
    MinKillerAngle            = 134
    MaxKillerAngle            = 226
    DeathFlags                = DEATH_3 ; Sets BOTH model condition and object status bits.
    ProbabilityModifier       = 10000
    FX = INITIAL FX_SiegeTowerDieInitial_N
    ;FX = MIDPOINT FX_SiegeTowerDieMidpoint_N
    
    ; This is the area which must be clear for this slow death to go off
    ; Use Control-Shift-Alt-E in game to display this area
    ; Use debug.add l + clearancetestingslowdeathbehavior to get feedback on why test fails
    ClearanceGeometry = Box
    ClearanceGeometryMajorRadius = 32.0
    ClearanceGeometryMinorRadius = 32.0
    ClearanceGeometryHeight = 32.0
    ClearanceGeometryIsSmall = No
    ClearanceGeometryOffset = X:-36 Y:0 Z:0

    ClearanceMaxHeight = 32
    ClearanceMaxHeightFraction = 0.04 ; If more than 5% of the cells in the clearance geometry are more than 40 units above the Oliphant's base, don't fall (don't fall into cliffs)
    ClearanceMinHeight = -32
    ClearanceMinHeightFraction = 0.40 ; If more than 40% of the cells in the clearance geometry are more than 40 units below the Oliphant's base, don't fall (don't get left hanging over a cliff)    
  End

  Behavior = ClearanceTestingSlowDeathBehavior ModuleTag_05_w
	ProbabilityModifier = 1000
    DeathTypes                = ALL 
    SinkDelay                 = 2200
    SinkRate                  = 4.0     ; in Dist/Sec
    DestructionDelay          = 16000
    DamageAmountRequired      = 15
    MinKillerAngle            = 224
    MaxKillerAngle            = 316
    DeathFlags                = DEATH_4 ; Sets BOTH model condition and object status bits.
    ProbabilityModifier       = 10000
    FX = INITIAL FX_SiegeTowerDieInitial_N
    ;FX = MIDPOINT FX_SiegeTowerDieMidpoint_N
    
    ; This is the area which must be clear for this slow death to go off
    ; Use Control-Shift-Alt-E in game to display this area
    ; Use debug.add l + clearancetestingslowdeathbehavior to get feedback on why test fails
    ClearanceGeometry = Box
    ClearanceGeometryMajorRadius = 32.0
    ClearanceGeometryMinorRadius = 32.0
    ClearanceGeometryHeight = 32.0
    ClearanceGeometryIsSmall = No
    ClearanceGeometryOffset = X:0 Y:-36 Z:0

    ClearanceMaxHeight = 32
    ClearanceMaxHeightFraction = 0.04 ; If more than 5% of the cells in the clearance geometry are more than 40 units above the Oliphant's base, don't fall (don't fall into cliffs)
    ClearanceMinHeight = -32
    ClearanceMinHeightFraction = 0.40 ; If more than 40% of the cells in the clearance geometry are more than 40 units below the Oliphant's base, don't fall (don't get left hanging over a cliff)        
  End
 
  Behavior = HordeSiegeEngineContain ModuleTag_06
    ObjectStatusOfContained	= UNSELECTABLE UNATTACKABLE
	ObjectStatusOfCrew		= UNSELECTABLE UNATTACKABLE
    Slots					= 0
	ShowPips				= No    
    DamagePercentToUnits	= 0%
    PassengerFilter			= ANY +CAN_USE_SIEGE_TOWER
    AllowAlliesInside		= Yes
    AllowEnemiesInside		= No
    AllowNeutralInside		= No
    CrewFilter				= NONE +MONSTER     ;Crew is always checked first, then Passenger
    CrewMax					= 2
    InitialCrew				= MordorSiegeTowerCrew 2
    ExitDelay				= 0  ; half second
    NumberOfExitPaths		= 0 ; Defaults to 1.  Set 0 to not use ExitStart/ExitEnd, set higher than 1 to use ExitStart01-nn/ExitEnd01-nn
    GoAggressiveOnExit		= Yes ; AI Will tell people to set their mood to Aggressive on exiting
	EnterSound				= GarrisonEnter
	ExitSound				= GarrisonExit

	FadeFilter	= ALL -MONSTER
	FadePassengerOnEnter = Yes
	EnterFadeTime = 2000
	FadePassengerOnExit = Yes
	ExitFadeTime = 1000
	FadeReverse = Yes

    PassengerBonePrefix		= PassengerBone:Passenger   KindOf:INFANTRY         
    PassengerBonePrefix		= PassengerBone:Crew        KindOf:MONSTER

	BoneSpecificConditionState 1 PASSENGER_VARIATION_1
	BoneSpecificConditionState 2 PASSENGER_VARIATION_2
  End  
  
;  The bones in the model are:
;
;                    02 ------ 03
;                    |
;                    |
;                    |
;        00 ------ 01   
;       
;        where 01 and 02 are attached to the ladder.
;
;        The waypoints are connected:
;            0 -> 2 -> 3 -> 1
;        and
;            1 -> 5 -> 4 -> 0

;
;            bone        wp
;            00         0 (walk)
;            01         1 (walk), 5 (climb)
;            02         2 (climb), 4 (walk)
;            03         3 (walk)
;
;        The waypoints are connected:
;            0 -> 1 -> 2 -> 3
;        and
;            3 -> 4 -> 5 -> 0

	Behavior = DynamicPortalBehaviour DynamicPortal
		AllowKindOf		= CAN_USE_SIEGE_TOWER
		BonePrefix		= Ladder
		NumberOfBones	= 4
		WayPoint		= Index:0	Type:PreClimb; 0
		WayPoint		= Index:1	Type:PreClimb; 1
		WayPoint		= Index:2	Type:Climb	; 2
		WayPoint		= Index:3	Type:Climb; 3
		WayPoint		= Index:2	Type:Climb; 4
		WayPoint		= Index:1	Type:Climb	; 5
		Link			= From:0 Via:4 Via:5 To:3
		Link			= From:3 Via:1 Via:2 To:0
		AboveWall		= 3	; # of waypoint which must be above wall in order to be able to 'dock'
		TopAttackPos	= X:34 Y:0 Z:52
		TopAttackRadius = 25
	End
  
  	Behavior = SiegeDeploySpecialPower ModuleTag_07
		SpecialPowerTemplate = SpecialAbilitySiegeDeploy
		LowerDelay = 2000
		RaiseDelay = 2000
		EvacuatePassengersOnDeploy = Yes
		;EvacuateCrewOnDeploy = Yes
		SkipAdjustPosition = Yes ; have to skip the path find adjust or it this will not go to the right docking position
		InitiateSound = SiegeTowerVoiceAttack
		InitiateSound2 = SiegeTowerVoiceAttack2
	End

  Behavior = StopSpecialPower ModuleTag_08
    SpecialPowerTemplate = SpecialAbilityStop
    StopPowerTemplate = SpecialAbilitySiegeDeploy
  End


	Geometry              = BOX
	GeometryMajorRadius   = 50.0
	GeometryMinorRadius   = 16.0
	GeometryHeight        = 30.0
  GeometryOffset		= X:-15 Y:0 Z:0
  
	AdditionalGeometry    = BOX
	GeometryMajorRadius   = 22.0
	GeometryMinorRadius   = 16.0
	GeometryHeight        = 100.0
  
  GeometryContactPoint    = X:10 Y:-10 Z:95 Swoop
  GeometryContactPoint    = X:5 Y:0 Z:10 
  GeometryContactPoint    = X:10 Y:10 Z:95 Swoop
  GeometryContactPoint    = X:0 Y:0 Z:30 
  GeometryContactPoint    = X:-10 Y:-10 Z:95 Swoop
  GeometryContactPoint    = X:0 Y:5 Z:10 
  GeometryContactPoint    = X:-10 Y:10 Z:95 Swoop
  
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME

End

;------------------------------------------------------------------------------
; aka Troll Pushing Grond
Object MordorGrondCrew
  ; *** ART Parameters ***

    ; This is required for garrisoned objects - please put in all objects.
    ButtonImage		= BMTrollCages_MountainTroll
    SelectPortrait	= UPMordor_MountainTroll

	Draw = W3DScriptedModelDraw ModuleTag_01
		  
	OkToChangeModelColor = Yes
		  
    ExtraPublicBone = Trunk
    ShowShadowWhileContained = Yes

    StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD

    DefaultModelConditionState
		Model = MUGrndTrl_SKN
	End

	ModelConditionState = JUST_BUILT
		Model = None
	End

	IdleAnimationState
		StateName = Idle
		Animation = IDLA
			AnimationName = MUGrndTrl_SKL.MUGrndTrl_GIDA
			AnimationMode = LOOP
			AnimationBlendTime = 10
			AnimationPriority = 40
		End
		BeginScript
			CurDrawableHideSubObjectPermanently("Trunk01")
			; Show us as soon as not JUST_BUILT
			Prev = CurDrawablePrevAnimationState()
			if Prev == "Firing_a"	then CurDrawableSetTransitionAnimState("Trans_To_Idle_1") return end	
			if Prev == "Firing_b"	then CurDrawableSetTransitionAnimState("Trans_To_Idle_2") return end	
		EndScript
	End

	AnimationState = JUST_BUILT
	End

	AnimationState = DYING DEATH_1
		Animation
			AnimationName = MUMntTroll_SKL.MUMntTroll_DIEA
			AnimationMode = ONCE
		End
		ParticleSysBone = B_PELVIS TrollSplatDust
		ParticleSysBone = BAT_HEAD TrollSplatDust
	End

	AnimationState = DYING DEATH_2
		Animation
			AnimationName = MUMntTroll_SKL.MUMntTroll_DIEB
			AnimationMode = ONCE
		End
		ParticleSysBone = BAT_SPINE1 TrollSplatDust1
		ParticleSysBone = BAT_HEAD TrollSplatDust1
	End

	AnimationState = DYING
		Animation
			AnimationName     =  MUMntTroll_SKL.MUMntTroll_DIEB
			AnimationMode     = ONCE
		End
	End
	
	; ------ SWINGING THE GROND BATTERING RAM AGAINST GATE --------
	AnimationState = FIRING_A PASSENGER_VARIATION_1 ; swinging grond
		StateName = Firing_a
		Animation = swinging_grond_lefthanded
			AnimationName = MUGrndTrl_SKL.MUGrndTrl_GAA2
			AnimationMode = ONCE
			AnimationBlendTime = 5	
			AnimationSpeedFactorRange = 1.07 1.07
		End
	End

	AnimationState = FIRING_A PASSENGER_VARIATION_2 ; swinging grond
		StateName = Firing_b
		Animation = swinging_grond_righthanded
			AnimationName = MUGrndTrl_SKL.MUGrndTrl_GAB2
			AnimationMode = ONCE
			AnimationBlendTime = 5			
			AnimationSpeedFactorRange = 1.07 1.07
		End
	End

	AnimationState = PREATTACK_A PASSENGER_VARIATION_1 ; swinging grond
		Animation = grasping_grond_lefthanded
			AnimationName =  MUGrndTrl_SKL.MUGrndTrl_GAA1
			AnimationMode = ONCE
			;AnimationBlendTime = 30				
			AnimationSpeedFactorRange 3.0 3.0
		End
	End

	AnimationState = PREATTACK_A PASSENGER_VARIATION_2 ; swinging grond
		Animation = grasping_grond_righthanded
			AnimationName = MUGrndTrl_SKL.MUGrndTrl_GAB1
			AnimationMode = ONCE
			;AnimationBlendTime = 30
			AnimationSpeedFactorRange 3.0 3.0
		End
	End

	; ------ SWINGING THE GROND BATTERING RAM AGAINST BUILDINGS ------
	AnimationState = FIRING_B PASSENGER_VARIATION_1 ; swinging grond
		StateName = Firing_a
		Animation = swinging_grond_lefthanded
			AnimationName = MUGrndTrl_SKL.MUGrndTrl_GAA2
			AnimationMode = ONCE
			AnimationBlendTime = 5	
			AnimationSpeedFactorRange = 1.07 1.07
		End
	End

	AnimationState = FIRING_B PASSENGER_VARIATION_2 ; swinging grond
		StateName = Firing_b
		Animation = swinging_grond_righthanded
			AnimationName = MUGrndTrl_SKL.MUGrndTrl_GAB2
			AnimationMode = ONCE
			AnimationBlendTime = 5			
			AnimationSpeedFactorRange = 1.07 1.07
		End
	End

	AnimationState = PREATTACK_B PASSENGER_VARIATION_1 ; swinging grond
		Animation = grasping_grond_lefthanded
			AnimationName =  MUGrndTrl_SKL.MUGrndTrl_GAA1
			AnimationMode = ONCE
			;AnimationBlendTime = 30				
			AnimationSpeedFactorRange 3.0 3.0
		End
	End

	AnimationState = PREATTACK_B PASSENGER_VARIATION_2 ; swinging grond
		Animation = grasping_grond_righthanded
			AnimationName = MUGrndTrl_SKL.MUGrndTrl_GAB1
			AnimationMode = ONCE
			;AnimationBlendTime = 30
			AnimationSpeedFactorRange 3.0 3.0
		End
	End

	TransitionState = Trans_To_Idle_1
			Animation = packing_grond_lefthanded
			AnimationName = MUGrndTrl_SKL.MUGrndTrl_GAA4
			AnimationMode = ONCE
			AnimationBlendTime = 15				
			AnimationSpeedFactorRange 3.0 3.0
		End
	End
	
	TransitionState = Trans_To_Idle_2
			Animation = packing_grond_righthanded
			AnimationName = MUGrndTrl_SKL.MUGrndTrl_GAB4
			AnimationMode = ONCE
			AnimationBlendTime = 15			
			AnimationSpeedFactorRange 3.0 3.0
		End
	End

	; --------- Moving Turning and Backing Up Animations ------------
	AnimationState = MOVING TURN_LEFT BACKING_UP PASSENGER_VARIATION_1
			Animation = Passenger_moving
			AnimationName = MUGrndTrl_SKL.MUGrndTrl_GWKA
			AnimationMode = LOOP
			AnimationBlendTime = 15
			AnimationSpeedFactorRange = 2.0 2.0
		End
		Flags = RANDOMSTART
	End
	
	AnimationState = MOVING TURN_LEFT BACKING_UP PASSENGER_VARIATION_2
			Animation = Passenger_moving
			AnimationName = MUGrndTrl_SKL.MUGrndTrl_GBKA
			AnimationMode = LOOP
			AnimationBlendTime = 15
			AnimationSpeedFactorRange = 2.0 2.0
		End
		Flags = RANDOMSTART
	End
	
	AnimationState = MOVING TURN_LEFT BACKING_UP PASSENGER_VARIATION_3
			Animation = Passenger_moving
			AnimationName = MUGrndTrl_SKL.MUGrndTrl_GWKA
			AnimationMode = LOOP
			AnimationBlendTime = 15
			AnimationSpeedFactorRange = 2.0 2.0
		End
		Flags = RANDOMSTART
	End
	
	AnimationState = MOVING TURN_LEFT BACKING_UP PASSENGER_VARIATION_4
			Animation = Passenger_moving
			AnimationName = MUGrndTrl_SKL.MUGrndTrl_GBKA
			AnimationMode = LOOP
			AnimationBlendTime = 15
			AnimationSpeedFactorRange = 2.0 2.0
		End
		Flags = RANDOMSTART
	End

	AnimationState = MOVING TURN_RIGHT BACKING_UP PASSENGER_VARIATION_1
			Animation = Passenger_moving
			AnimationName = MUGrndTrl_SKL.MUGrndTrl_GBKA
			AnimationMode = LOOP
			AnimationBlendTime = 15
			AnimationSpeedFactorRange = 2.0 2.0
		End
		Flags = RANDOMSTART
	End
	
	AnimationState = MOVING TURN_RIGHT BACKING_UP PASSENGER_VARIATION_2
			Animation = Passenger_moving
			AnimationName = MUGrndTrl_SKL.MUGrndTrl_GWKA
			AnimationMode = LOOP
			AnimationBlendTime = 15
			AnimationSpeedFactorRange = 2.0 2.0
		End
		Flags = RANDOMSTART
	End
	
	AnimationState = MOVING TURN_RIGHT BACKING_UP PASSENGER_VARIATION_3
			Animation = Passenger_moving
			AnimationName = MUGrndTrl_SKL.MUGrndTrl_GBKA
			AnimationMode = LOOP
			AnimationBlendTime = 15
			AnimationSpeedFactorRange = 2.0 2.0
		End
		Flags = RANDOMSTART
	End
	
	AnimationState = MOVING TURN_RIGHT BACKING_UP PASSENGER_VARIATION_4
			Animation = Passenger_moving
			AnimationName = MUGrndTrl_SKL.MUGrndTrl_GWKA
			AnimationMode = LOOP
			AnimationBlendTime = 15
			AnimationSpeedFactorRange = 2.0 2.0
		End
		Flags = RANDOMSTART
	End

	; --------- Moving Turning Animations ------------
	AnimationState = TURN_LEFT PASSENGER_VARIATION_1
			Animation = Passenger_moving
			AnimationName = MUGrndTrl_SKL.MUGrndTrl_GWKA
			AnimationMode = LOOP
			AnimationBlendTime = 15
			AnimationSpeedFactorRange = 2.0 2.0
		End
		Flags = RANDOMSTART
	End
	
	AnimationState = TURN_LEFT PASSENGER_VARIATION_2
			Animation = Passenger_moving
			AnimationName = MUGrndTrl_SKL.MUGrndTrl_GBKA
			AnimationMode = LOOP
			AnimationBlendTime = 15
			AnimationSpeedFactorRange = 2.0 2.0
		End
		Flags = RANDOMSTART
	End
	
	AnimationState = TURN_LEFT PASSENGER_VARIATION_3
			Animation = Passenger_moving
			AnimationName = MUGrndTrl_SKL.MUGrndTrl_GWKA
			AnimationMode = LOOP
			AnimationBlendTime = 15
			AnimationSpeedFactorRange = 2.0 2.0
		End
		Flags = RANDOMSTART
	End
	
	AnimationState = TURN_LEFT PASSENGER_VARIATION_4
			Animation = Passenger_moving
			AnimationName = MUGrndTrl_SKL.MUGrndTrl_GBKA
			AnimationMode = LOOP
			AnimationBlendTime = 15
			AnimationSpeedFactorRange = 2.0 2.0
		End
		Flags = RANDOMSTART
	End

	AnimationState = TURN_RIGHT PASSENGER_VARIATION_1
			Animation = Passenger_moving
			AnimationName = MUGrndTrl_SKL.MUGrndTrl_GBKA
			AnimationMode = LOOP
			AnimationBlendTime = 15
			AnimationSpeedFactorRange = 2.0 2.0
		End
		Flags = RANDOMSTART
	End
	
	AnimationState = TURN_RIGHT PASSENGER_VARIATION_2
			Animation = Passenger_moving
			AnimationName = MUGrndTrl_SKL.MUGrndTrl_GWKA
			AnimationMode = LOOP
			AnimationBlendTime = 15
			AnimationSpeedFactorRange = 2.0 2.0
		End
		Flags = RANDOMSTART
	End
	
	AnimationState = TURN_RIGHT PASSENGER_VARIATION_3
			Animation = Passenger_moving
			AnimationName = MUGrndTrl_SKL.MUGrndTrl_GBKA
			AnimationMode = LOOP
			AnimationBlendTime = 15
			AnimationSpeedFactorRange = 2.0 2.0
		End
		Flags = RANDOMSTART
	End
	
	AnimationState = TURN_RIGHT PASSENGER_VARIATION_4
			Animation = Passenger_moving
			AnimationName = MUGrndTrl_SKL.MUGrndTrl_GWKA
			AnimationMode = LOOP
			AnimationBlendTime = 15
			AnimationSpeedFactorRange = 2.0 2.0
		End
		Flags = RANDOMSTART
	End

	; --------- Between Firing Shots against gate ------------
	AnimationState = BETWEEN_FIRING_SHOTS_A PASSENGER_VARIATION_1 ; swinging grond
		Animation = swinging_grond_lefthanded
			AnimationName = MUGrndTrl_SKL.MUGrndTrl_GAA2
			AnimationMode = MANUAL
			AnimationBlendTime = 60
		End
	End
	
	AnimationState = BETWEEN_FIRING_SHOTS_A PASSENGER_VARIATION_2 ; swinging grond
		Animation = swinging_grond_righthanded
			AnimationName = MUGrndTrl_SKL.MUGrndTrl_GAB2
			AnimationMode = MANUAL
			AnimationBlendTime = 60
		End
	End

	; --------- Between Firing Shots Against Buildings ------------
	AnimationState = BETWEEN_FIRING_SHOTS_B PASSENGER_VARIATION_1 ; swinging grond
		Animation = swinging_grond_lefthanded
			AnimationName = MUGrndTrl_SKL.MUGrndTrl_GAA2
			AnimationMode = MANUAL
			AnimationBlendTime = 60
		End
	End
	
	AnimationState = BETWEEN_FIRING_SHOTS_B PASSENGER_VARIATION_2 ; swinging grond
		Animation = swinging_grond_righthanded
			AnimationName = MUGrndTrl_SKL.MUGrndTrl_GAB2
			AnimationMode = MANUAL
			AnimationBlendTime = 60
		End
	End
	
	; --------- Moving Straight Animations ------------
	AnimationState = MOVING BACKING_UP; pulling the seige tower or grond
			Animation = Passenger_moving
			AnimationName = MUGrndTrl_SKL.MUGrndTrl_GBKA
			AnimationMode = LOOP
			AnimationBlendTime = 15
			AnimationSpeedFactorRange = 4.0 4.0
		End
		Flags = RANDOMSTART
	End

	AnimationState = MOVING ; pushing the seige tower
			Animation = Passenger_moving
			AnimationName = MUGrndTrl_SKL.MUGrndTrl_GWKA
			AnimationMode = LOOP
			AnimationBlendTime = 15
			AnimationSpeedFactorRange = 3.5 3.5
		End
		Flags = RANDOMSTART
	End
  End
 
	; ***DESIGN parameters ***
	Side = Mordor
	EditorSorting = UNIT
		ThreatLevel = 2.0
	TransportSlotCount = 1
	ShowHealthInSelectionDecal = Yes

	ArmorSet
		Conditions      = None
		Armor           = TrollArmor
		DamageFX        = NormalDamageFX
	End

  	VisionRange = VISION_STANDARD_MELEE
  	ShroudClearingRange = SHROUD_CLEAR_STANDARD

	BountyValue = MORDOR_TROLL_BOUNTY_VALUE
	DisplayName = OBJECT:MordorMountainTroll
	CrushableLevel = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
	CrusherLevel = 0 ;What can I crush?: 0 = small animals, 1 = infantry, 2 = trees, 3 = vehicles
    
    ; Should match the grond BuildFadeInOnCreateTime
	BuildFadeInOnCreateTime = 16.0
 

	; *** AUDIO Parameters ***;

	VoiceAttack			= TrollVoiceAttack
	VoiceAttack2		= OrcVoiceAttack2
	VoiceCreated		= CampOrcCreateMountainTroll
	VoiceFullyCreated 	= CampOrcCreateMountainTroll
	VoiceMove			= TrollVoiceMove
	VoicePriority		= 19
	VoiceSelect			= TrollVoiceSelect
	VoiceGuard			= TrollVoiceMove

	SoundAmbient		= MordorGrondTrollVoxSinglesLoop
	SoundImpact			= ImpactHorse				;TrollDie

	EvaEventDamagedOwner	= UnitUnderAttack 			;Eva event to trigger when unit is damaged

	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		MaxUpdateRangeCap = 800

		AnimationSound = Sound:TrollBodyfall		Animation:MUMntTroll_SKL.MUMntTroll_DIEA		Frames:29
		AnimationSound = Sound:TrollBodyfall		Animation:MUMntTroll_SKL.MUMntTroll_DIEB		Frames:85

		AnimationSound = Sound:SiegeTowerTrollFootstep	Animation:MUGRNDTRL_SKL.MUGRNDTRL_GWKA		Frames:45 89
		AnimationSound = Sound:SiegeTowerTrollFootstep	Animation:MUGrndTrl_SKL.MUGrndTrl_GBKA		Frames:0 44

		AnimationSound = Sound:MordorGrondTrollPush 	Animation:MUGRNDTRL_SKL.MUGRNDTRL_GWKA 		Frames:41
	End

	Behavior = LargeGroupAudioUpdate ModuleTag_LGAU					; Tie into LargeGroupAudio system
  		Key = Troll
		;UnitWeight = 2 ; Trollsie counts as 2 infantry when computing group size
	End


	; *** ENGINEERING Parameters ***

	RadarPriority = UNIT
	KindOf = PRELOAD CAN_CAST_REFLECTIONS TROLL MONSTER CAN_ATTACK WORKING_PASSENGER SCARY 
 
    BuildCost = MORDOR_TROLL_BUILDCOST
    BuildTime = MORDOR_TROLL_BUILDTIME

	Body = ActiveBody ModuleTag_02
    	MaxHealth         = 10
    	MaxHealthDamaged  = 5
  	End
 
	Behavior = AIUpdateInterface ModuleTag_03
	End
	
	LocomotorSet
		Locomotor = TrollLocomotor
		Condition = SET_NORMAL 
		Speed     = 33
	End

	Behavior = PhysicsBehavior ModuleTag_04
		GravityMult = 0.0 ;1.0
	End
   
	Behavior = SlowDeathBehavior ModuleTag_50
		DeathTypes = ALL -KNOCKBACK
		DestructionDelay = 35000
		DecayBeginTime = 3000
		SinkDelay = 3000
		SinkRate = 0.64     ; in Dist/Sec
		Sound = INITIAL TrollDie
		ProbabilityModifier = 50
		DeathFlags   = DEATH_1 ; Tell model which death animation to play. Sets BOTH model condition and object status bits.
	End

	Behavior = SlowDeathBehavior ModuleTag_51
		DeathTypes = ALL -KNOCKBACK
		DestructionDelay = 35000
		DecayBeginTime = 3000
		SinkDelay = 3000
		SinkRate = 0.64     ; in Dist/Sec
		Sound = INITIAL TrollDie
		ProbabilityModifier = 50
		DeathFlags   = DEATH_2 ; Tell model which death animation to play. Sets BOTH model condition and object status bits.
	End
 
	Geometry = CYLINDER
	GeometryMajorRadius = 17.6
	GeometryHeight = 32.0
	GeometryIsSmall = No
	Shadow                = SHADOW_VOLUME
End

;----------------------------------- Grond -------------------------------------------
; aka GrondMordor
Object MordorGrond

	; *** ART Parameters ***
    ; This is required for garrisoned objects - please put in all objects.
    ButtonImage		= BMGreatSiegeWorks_Grond
    SelectPortrait	= UPMordor_Grond

	Draw = W3DTruckDraw ModuleTag_01
		  
		  OkToChangeModelColor = Yes
		  
		OkToChangeModelColor = Yes
		ExtraPublicBone = Crew
		ExtraPublicBone = B_ARCHER
		
		StaticModelLODMode = Yes
  
		DefaultModelConditionState
			Model         = MUGrond_SKN
		End

	    DependencySharedModelFlags = MOVING TURN_LEFT TURN_RIGHT PREATTACK_A PREATTACK_B FIRING_A FIRING_B BETWEEN_FIRING_SHOTS_A BETWEEN_FIRING_SHOTS_B BACKING_UP

		ModelConditionState = ATTACKING
			Model         = MUGrond_SKN
		End

		IdleAnimationState	
			Animation = IDLA
				AnimationName	= MUGROND_SKL.MUGROND_IDLA
				AnimationMode	= ONCE
			End
			Animation = IDLB
				AnimationName	= MUGROND_SKL.MUGROND_IDLB
				AnimationMode	= ONCE
			End
			Flags	=	RESTART_ANIM_WHEN_COMPLETE
			ParticleSysBone     =  BN_FIRE000 GrondSmoke FollowBone:Yes
			ParticleSysBone     =  BN_FIRE001 GrondSmoke FollowBone:Yes
			ParticleSysBone     =  BN_FIRE002 GrondSmoke FollowBone:Yes
			ParticleSysBone     =  BN_FIRE003 GrondSmoke FollowBone:Yes
			ParticleSysBone     =  BN_FIRE004 GrondSmoke FollowBone:Yes
			ParticleSysBone     =  BN_FIRE005 GrondSmoke FollowBone:Yes

			ParticleSysBone     =  BN_FIRE000 GrondFire FollowBone:Yes
			ParticleSysBone     =  BN_FIRE001 GrondFire FollowBone:Yes
			ParticleSysBone     =  BN_FIRE002 GrondFire FollowBone:Yes
			ParticleSysBone     =  BN_FIRE003 GrondFire FollowBone:Yes
			ParticleSysBone     =  BN_FIRE004 GrondFire FollowBone:Yes
			ParticleSysBone     =  BN_FIRE005 GrondFire FollowBone:Yes

			ParticleSysBone     = EYELFGLOWBONE  GrondEyeFlare FollowBone:Yes
			ParticleSysBone     = EYERTGLOWBONE  GrondEyeFlare FollowBone:Yes
			ParticleSysBone     = TEETHLFFIREBONE GrondTeethFire FollowBone:Yes
			ParticleSysBone     = TEETHRTFIREBONE GrondTeethFire FollowBone:Yes
			ParticleSysBone     = TthFtFireBone GrondTeethFire FollowBone:Yes
			ParticleSysBone     = TthFtFireBone1 GrondTeethFire FollowBone:Yes
		End

		AnimationState	= FIRING_B
			StateName = Firing
			Animation = ATKA
				AnimationName	= MUGROND_SKL.MUGROND_ATKA
				AnimationMode	= ONCE
				AnimationBlendTime  = 0
				AnimationSpeedFactorRange = 1.07 1.07
			End
			ParticleSysBone     =  BN_FIRE000 GrondSmoke FollowBone:Yes
			ParticleSysBone     =  BN_FIRE001 GrondSmoke FollowBone:Yes
			ParticleSysBone     =  BN_FIRE002 GrondSmoke FollowBone:Yes
			ParticleSysBone     =  BN_FIRE003 GrondSmoke FollowBone:Yes
			ParticleSysBone     =  BN_FIRE004 GrondSmoke FollowBone:Yes
			ParticleSysBone     =  BN_FIRE005 GrondSmoke FollowBone:Yes

			ParticleSysBone     =  BN_FIRE000 GrondFire FollowBone:Yes
			ParticleSysBone     =  BN_FIRE001 GrondFire FollowBone:Yes
			ParticleSysBone     =  BN_FIRE002 GrondFire FollowBone:Yes
			ParticleSysBone     =  BN_FIRE003 GrondFire FollowBone:Yes
			ParticleSysBone     =  BN_FIRE004 GrondFire FollowBone:Yes
			ParticleSysBone     =  BN_FIRE005 GrondFire FollowBone:Yes

			ParticleSysBone     = EYELFGLOWBONE  GrondEyeFlare FollowBone:Yes
			ParticleSysBone     = EYERTGLOWBONE  GrondEyeFlare FollowBone:Yes
			ParticleSysBone     = TEETHLFFIREBONE GrondTeethFire FollowBone:Yes
			ParticleSysBone     = TEETHRTFIREBONE GrondTeethFire FollowBone:Yes
			ParticleSysBone     = TthFtFireBone GrondTeethFire FollowBone:Yes
			ParticleSysBone     = TthFtFireBone1 GrondTeethFire FollowBone:Yes
		End
	
		AnimationState	= FIRING_A
			StateName = Firing
			Animation = ATKA
				AnimationName	= MUGROND_SKL.MUGROND_ATKA
				AnimationMode	= ONCE
				AnimationBlendTime  = 0
				AnimationSpeedFactorRange = 1.07 1.07
			End
			ParticleSysBone     =  BN_FIRE000 GrondSmoke FollowBone:Yes
			ParticleSysBone     =  BN_FIRE001 GrondSmoke FollowBone:Yes
			ParticleSysBone     =  BN_FIRE002 GrondSmoke FollowBone:Yes
			ParticleSysBone     =  BN_FIRE003 GrondSmoke FollowBone:Yes
			ParticleSysBone     =  BN_FIRE004 GrondSmoke FollowBone:Yes
			ParticleSysBone     =  BN_FIRE005 GrondSmoke FollowBone:Yes

			ParticleSysBone     =  BN_FIRE000 GrondFire FollowBone:Yes
			ParticleSysBone     =  BN_FIRE001 GrondFire FollowBone:Yes
			ParticleSysBone     =  BN_FIRE002 GrondFire FollowBone:Yes
			ParticleSysBone     =  BN_FIRE003 GrondFire FollowBone:Yes
			ParticleSysBone     =  BN_FIRE004 GrondFire FollowBone:Yes
			ParticleSysBone     =  BN_FIRE005 GrondFire FollowBone:Yes

			ParticleSysBone     = EYELFGLOWBONE  GrondEyeFlare FollowBone:Yes
			ParticleSysBone     = EYERTGLOWBONE  GrondEyeFlare FollowBone:Yes
			ParticleSysBone     = TEETHLFFIREBONE GrondTeethFire FollowBone:Yes
			ParticleSysBone     = TEETHRTFIREBONE GrondTeethFire FollowBone:Yes
			ParticleSysBone     = TthFtFireBone GrondTeethFire FollowBone:Yes
			ParticleSysBone     = TthFtFireBone1 GrondTeethFire FollowBone:Yes
		End

		ModelConditionState = JUST_BUILT
			Model	=  MUGrond_A
		End
	    
		AnimationState  = JUST_BUILT
		Animation = Being_Built
			AnimationName     = MUGrond_A.MUGrond_A
			AnimationMode =ONCE
		End
			ParticleSysBone     =  BN_FIRE000 GrondSmoke FollowBone:Yes
			ParticleSysBone     =  BN_FIRE001 GrondSmoke FollowBone:Yes
			ParticleSysBone     =  BN_FIRE002 GrondSmoke FollowBone:Yes
			ParticleSysBone     =  BN_FIRE003 GrondSmoke FollowBone:Yes
			ParticleSysBone     =  BN_FIRE004 GrondSmoke FollowBone:Yes
			ParticleSysBone     =  BN_FIRE005 GrondSmoke FollowBone:Yes

			ParticleSysBone     =  BN_FIRE000 GrondFire FollowBone:Yes
			ParticleSysBone     =  BN_FIRE001 GrondFire FollowBone:Yes
			ParticleSysBone     =  BN_FIRE002 GrondFire FollowBone:Yes
			ParticleSysBone     =  BN_FIRE003 GrondFire FollowBone:Yes
			ParticleSysBone     =  BN_FIRE004 GrondFire FollowBone:Yes
			ParticleSysBone     =  BN_FIRE005 GrondFire FollowBone:Yes

			ParticleSysBone     = EYELFGLOWBONE  GrondEyeFlare FollowBone:Yes
			ParticleSysBone     = EYERTGLOWBONE  GrondEyeFlare FollowBone:Yes
			ParticleSysBone     = TEETHLFFIREBONE GrondTeethFire FollowBone:Yes
			ParticleSysBone     = TEETHRTFIREBONE GrondTeethFire FollowBone:Yes
			ParticleSysBone     = TthFtFireBone GrondTeethFire FollowBone:Yes
			ParticleSysBone     = TthFtFireBone1 GrondTeethFire FollowBone:Yes
		End
			
		ModelConditionState = DYING
			Model         = MUGrond_DIEB
		End
		AnimationState = DYING
			Animation = CollapseDead
				AnimationName	= MUGROND_DIEB.MUGROND_DIEB
				AnimationMode	= ONCE
			End
			ParticleSysBone = GROND_BODY GrondDieDust FollowBone:Yes
		End
	
		TrackMarks = EXTireTrack2_Temp.tga
		TrackMarksLeftBone = L_WHEEL06
		TrackMarksRightBone = R_WHEEL06
	 
		LeftFrontTireBone = L_WHEEL01
		LeftFrontTireBone2 = L_WHEEL02
		MidLeftMidTireBone = L_WHEEL03
		MidLeftMidTireBone2 = L_WHEEL04
		LeftRearTireBone = L_WHEEL05
		LeftRearTireBone2 = L_WHEEL06

		RightFrontTireBone = R_WHEEL01
		RightFrontTireBone2 = R_WHEEL02
		MidRightMidTireBone = R_WHEEL03
		MidRightMidTireBone2 = R_WHEEL04
		RightRearTireBone = R_WHEEL05
		RightRearTireBone2 = R_WHEEL06

		TireRotationMultiplier = 0.1
	End

	; ***DESIGN parameters ***
	Side				= Mordor
	IsTrainable		= No
	EditorSorting		= UNIT
	ThreatLevel			= 1.0
	ImmuneToShockwave	= yes
	TransportSlotCount	= 10
	MaxSimultaneousOfType = 1

  	VisionRange = MORDOR_GROND_VISION_RANGE
  	ShroudClearingRange = SHROUD_CLEAR_ARTILLERY

	BountyValue         = MORDOR_GROND_BOUNTY_VALUE
	CrushableLevel		= 4  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
	CrusherLevel		= 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
	DisplayName			= OBJECT:MordorGrond
	CommandSet			= MordorGrondCommandSet
	CanPathThroughGates	= No
	ShouldClearShotsOnIdle = Yes
	CommandPoints = 40
  
	WeaponSet
		Weapon          = PRIMARY		MordorGrondRam
		OnlyAgainst     = PRIMARY		BLOCKING_GATE		
		Weapon          = SECONDARY		MordorGrondRamBuilding
	End

	ArmorSet
		Conditions      = None
		Armor           = GrondArmor
		DamageFX         = None
	End

    ; This is required so that the build phase lasts as long as the anim.
	BuildFadeInOnCreateTime = 16.0

	
	; ***AUDIO parameters ***

	VoiceAttack			= MordorGrondTrollAttack	;CatapultVoiceAttack
	VoiceAttack2		= GrondVoiceAttack
	VoiceAttackCharge		= MordorGrondTrollAttack	;CatapultVoiceAttack
	VoiceAttackCharge2	= GrondVoiceAttack
	VoiceAttackStructure	= MordorGrondTrollAttack	;CatapultVoiceAttack
	VoiceAttackStructure2	= GrondVoiceAttack
	VoiceCreated		= CampOrcCreateGrond
	VoiceFullyCreated 	= CampOrcCreateGrond
	VoiceMove			= GrondVoiceMove			;CatapultVoiceMove
	VoiceMove2			= GrondVoiceMove2
	VoicePriority		= 59
	VoiceSelect			= GrondVoiceSelect		;CatapultVoiceSelect
	VoiceSelect2		= GrondVoiceSelect2
	VoiceSelectBattle		= GrondVoiceSelect		;CatapultVoiceSelect
	VoiceSelectBattle2	= GrondVoiceSelect2
	VoiceGuard			= GrondVoiceMove
	
	SoundAmbient		= GrondFireAmbientLoop
	SoundMoveLoop		= GrondMoveLoop  

	EvaEventDamagedOwner	= UnitUnderAttack 		;Eva event to trigger when unit is damaged

	Behavior = LargeGroupAudioUpdate ModuleTag_LGAU		; Tie into LargeGroupAudio system
  		Key = SiegeWeapon Grond
	End

	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		MaxUpdateRangeCap = 800
		AnimationSound = Sound:GrondCreatePart1				Animation:MUGrond_A.MUGrond_A		Frames:100
		AnimationSound = Sound:GrondCreatePart2				Animation:MUGrond_A.MUGrond_A		Frames:220
		AnimationSound = Sound:GrondCreatePart5				Animation:MUGrond_A.MUGrond_A		Frames:280
		AnimationSound = Sound:GrondCreatePart6				Animation:MUGrond_A.MUGrond_A		Frames:302
		AnimationSound = Sound:GrondCreatePart3				Animation:MUGrond_A.MUGrond_A		Frames:318
		AnimationSound = Sound:GrondCreatePart4				Animation:MUGrond_A.MUGrond_A		Frames:337
		AnimationSound = Sound:GrondCreatePart5				Animation:MUGrond_A.MUGrond_A		Frames:345
		AnimationSound = Sound:GrondCreatePart6				Animation:MUGrond_A.MUGrond_A		Frames:355

		AnimationSound = Sound:GrondImpact					Animation:MUGrond_SKL.MUGrond_ATKA	Frames:82

		AnimationSound = Sound:BuildingLightDamageStone			Animation:MUGROND_DIEB.MUGROND_DIEB	Frames:0
		AnimationSound = Sound:BuildingLightDamageWood			Animation:MUGROND_DIEB.MUGROND_DIEB	Frames:7
		AnimationSound = Sound:BuildingScaffoldShatterLightQuick	Animation:MUGROND_DIEB.MUGROND_DIEB	Frames:33
	End


	; *** ENGINEERING Parameters ***  

	RadarPriority = UNIT
	KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS MACHINE SCORE CAN_ATTACK PATH_THROUGH_INFANTRY SCARY CAN_ATTACK_WALLS ;NO_FREEWILL_ENTER 
    BuildCost = MORDOR_GROND_BUILDCOST
    BuildTime = MORDOR_GROND_BUILDTIME
  
	Behavior = AIUpdateInterface ModuleTag_02
;		AutoAcquireEnemiesWhenIdle = Yes ATTACK_BUILDINGS
;		MoodAttackCheckRate        = 2500
		MoveForNoOne			   = Yes
		AILuaEventsList			  = MordorGrondFunctions        
	End

	LocomotorSet
		Locomotor = GrondLocomotor
		Condition = SET_NORMAL
		Speed     = 10
	End

	Behavior = PhysicsBehavior ModuleTag_03
		;nothing
	End

	Body                  = ActiveBody ModuleTag_04
		CheerRadius 	  = EMOTION_CHEER_RADIUS
		MaxHealth         = MORDOR_GROND_HEALTH                 
		MaxHealthDamaged  = MORDOR_GROND_HEALTH_DAMAGED
	End

	Behavior = SlowDeathBehavior ModuleTag_05
		DeathTypes = ALL 
		SinkDelay = 3000
		SinkRate = 1.20     ; in Dist/Sec
		DestructionDelay = 80000
	End
 
	Behavior = SiegeEngineContain ModuleTag_06
		ObjectStatusOfCrew		= UNSELECTABLE UNATTACKABLE
		Slots					= 0
		DamagePercentToUnits	= 100%			;DESIGN: Do we want trolls to die when the Grond is destroyed?
		PassengerFilter			= NONE
		AllowAlliesInside		= No
		AllowEnemiesInside		= No
		AllowNeutralInside		= No
		CrewFilter				= NONE +MONSTER     ;Crew is always checked first, then Passenger
		CrewMax					= 6
		SpeedPercentPerCrew		= 50%     ; Each crew member will give us this %.  Can go over 100 to show extra crew goes faster
		InitialCrew				= MordorGrondCrew 6
		ExitDelay				= 100  ; half second
		NumberOfExitPaths		= 0 ; Defaults to 1.  Set 0 to not use ExitStart/ExitEnd, set higher than 1 to use ExitStart01-nn/ExitEnd01-nn
		GoAggressiveOnExit		= Yes ; AI Will tell people to set their mood to Aggressive on exiting

		PassengerBonePrefix = PassengerBone:Crew        KindOf:MONSTER
	    
		BoneSpecificConditionState 2 PASSENGER_VARIATION_1
		BoneSpecificConditionState 4 PASSENGER_VARIATION_1
		BoneSpecificConditionState 1 PASSENGER_VARIATION_2
		BoneSpecificConditionState 3 PASSENGER_VARIATION_2
		
		BoneSpecificConditionState 6 PASSENGER_VARIATION_3
		BoneSpecificConditionState 5 PASSENGER_VARIATION_4
	End
  
	Geometry              = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryHeight        = 60.0
	GeometryIsSmall       = No
	Shadow                = SHADOW_VOLUME
End

;------------------------------------------------------------------------------
; aka Mountain Troll, MordorMountainTroll, MountainTrollMordor
Object MordorMountainTroll
  ; *** ART Parameters ***

    ; This is required for garrisoned objects - please put in all objects.
    ButtonImage		= BMTrollCages_MountainTroll
    SelectPortrait	= UPMordor_MountainTroll

	Draw = W3DScriptedModelDraw ModuleTag_01

		WadingParticleSys = EntRipples
		  
		  OkToChangeModelColor = Yes
		  
    ExtraPublicBone = Trunk
    ShowShadowWhileContained = Yes
;	BurntTexture = twwater01.tga

    StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD

    DefaultModelConditionState
		Model = MUMntTroll_SKN
		WeaponLaunchBone = PRIMARY Firepoint
	End

	IdleAnimationState
		StateName = Idle
		Animation = IDLA
			AnimationName = MUMntTroll_SKL.MUMntTroll_IDLA  ;JUST BREATHING
			AnimationMode = ONCE
			AnimationBlendTime = 10
			AnimationPriority = 40
		End
		Animation = IDLA
			AnimationName = MUMntTroll_SKL.MUMntTroll_IDLA  ;JUST BREATHING
			AnimationMode = ONCE
			AnimationBlendTime = 10
			AnimationPriority = 40
		End
		Animation = IDLC
			AnimationName = MUMntTroll_SKL.MUMntTroll_IDLC  ;BELLY SCRATCH
			AnimationMode = ONCE
			AnimationBlendTime = 10
			AnimationPriority = 10
		End
		Animation = IDLF
			AnimationName = MUMntTroll_SKL.MUMntTroll_IDLF  ;BIG ROAR
			AnimationMode = ONCE
			AnimationBlendTime = 10
			AnimationPriority = 3
		End
		Animation = IDLH
			AnimationName = MUMntTroll_SKL.MUMntTroll_IDLH  ;SHORT ROAR
			AnimationMode = ONCE
			AnimationBlendTime = 10
			AnimationPriority = 10
		End
		Animation = IDLI
			AnimationName = MUMntTroll_SKL.MUMntTroll_IDLI  ;NOSE WIPE
			AnimationMode = ONCE
			AnimationBlendTime = 10
			AnimationPriority = 10
		End
		Flags						= RESTART_ANIM_WHEN_COMPLETE		
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "Throw"	then CurDrawableSetTransitionAnimState("Trans_Throwing_To_Ready") return end	
		EndScript
	End

; Splatted death goes first, independant of death flags
	ModelConditionState    = DYING DECAY SPLATTED WEAPONSET_PLAYER_UPGRADE
		Model                = MUAtkTroll_DISC
		RetainSubObjects = Yes
	End;

	AnimationState         = DYING DECAY SPLATTED WEAPONSET_PLAYER_UPGRADE
		Animation            = dead1
			AnimationName       = MUAtkTroll_DISC.MUAtkTroll_DISC
			AnimationMode      = ONCE
		End
	End

	ModelConditionState    = DYING DECAY DEATH_1 WEAPONSET_PLAYER_UPGRADE
		Model                = MUAtkTroll_DISA
		RetainSubObjects = Yes
	End;

	AnimationState         = DYING DECAY DEATH_1 WEAPONSET_PLAYER_UPGRADE 
		Animation            = dead1
			AnimationName       = MUAtkTroll_DISA.MUAtkTroll_DISA
			AnimationMode      = ONCE
		End
	End

	ModelConditionState    = DYING DECAY DEATH_2 WEAPONSET_PLAYER_UPGRADE
		Model                = MUAtkTroll_DISB
		RetainSubObjects = Yes
	End;

	AnimationState         = DYING DECAY DEATH_2 WEAPONSET_PLAYER_UPGRADE 
		Animation            = dead1
			AnimationName       = MUAtkTroll_DISB.MUAtkTroll_DISB
			AnimationMode      = ONCE
		End
	End

	; Splatted death goes first, independant of death flags
	ModelConditionState    = DYING DECAY SPLATTED
		Model                = MUMntTroll_DISC
		RetainSubObjects = Yes
	End;

	AnimationState         = DYING DECAY SPLATTED 
		Animation            = dead1
			AnimationName       = MUMntTroll_DISC.MUMntTroll_DISC
			AnimationMode      = ONCE
		End
	End

	ModelConditionState    = DYING DECAY DEATH_1
		Model                = MUMntTroll_DISA
		RetainSubObjects = Yes
	End;

	AnimationState         = DYING DECAY DEATH_1 
		Animation            = dead1
			AnimationName       = MUMntTroll_DISA.MUMntTroll_DISA
			AnimationMode      = ONCE
		End
	End

	ModelConditionState    = DYING DECAY DEATH_2
		Model                = MUMntTroll_DISB
		RetainSubObjects = Yes
	End;

	AnimationState         = DYING DECAY DEATH_2 
		Animation            = dead1
			AnimationName       = MUMntTroll_DISB.MUMntTroll_DISB
			AnimationMode      = ONCE
		End
	End

	ModelConditionState WEAPONSET_PLAYER_UPGRADE
		Model	= MUAtkTroll_SKN
		RetainSubObjects = Yes
	End

; Flailing must go before dying in case we are dead in the air
	AnimationState = STUNNED_FLAILING
		Animation
			AnimationName = MUMntTroll_SKL.MUMntTroll_FLYA
			AnimationMode = LOOP
		End
	End

	AnimationState = DYING SPLATTED
		Animation
			AnimationName = MUMntTroll_SKL.MUMntTroll_LNDA
			AnimationMode = ONCE
		End
	End


	AnimationState = DYING DEATH_1
		Animation
			AnimationName = MUMntTroll_SKL.MUMntTroll_DIEA
			AnimationMode = ONCE
		End

			ParticleSysBone = B_PELVIS TrollSplatDust
			ParticleSysBone = BAT_HEAD TrollSplatDust
	End

	AnimationState = DYING DEATH_2
		Animation
			AnimationName = MUMntTroll_SKL.MUMntTroll_DIEB
			AnimationMode = ONCE
		End

			ParticleSysBone = BAT_SPINE1 TrollSplatDust1
			ParticleSysBone = BAT_HEAD TrollSplatDust1
	End

	AnimationState = DYING
		Animation
			AnimationName     =  MUMntTroll_SKL.MUMntTroll_DIEB
			AnimationMode     = ONCE
		End
	End
	
	AnimationState = EATING
		Animation
			AnimationName = MUMntTroll_SKL.MUMntTroll_EATA
			AnimationMode = ONCE
		End
	End
	
; Flailing must go before dying in case we are dead in the air
	AnimationState = STUNNED_FLAILING
		Animation
			AnimationName = MUMntTroll_SKL.MUMntTroll_FLYA
			AnimationMode = LOOP
		End
	End

	AnimationState				= STUNNED_STANDING_UP
		Animation				= MUMntTroll_GTPA
			AnimationName		= MUMntTroll_SKL.MUMntTroll_GTPA
			AnimationMode		= ONCE
		End
	End	

	AnimationState				= STUNNED
		Animation
			AnimationName = MUMntTroll_SKL.MUMntTroll_LNDA
			AnimationMode = ONCE
		End
		ParticleSysBone = B_PELVIS TrollSplatDust2
		ParticleSysBone = BAT_HEAD TrollSplatDust2
	End
	
	
	
	;AnimationState = MOVING FIRING_OR_PREATTACK_A
	;	Animation = TrotAndFire
	;		AnimationName = MUMntTroll_SKL.MUMntTroll_ATRB
	;	    AnimationMode = LOOP
	;	End
	;	Flags = RANDOMSTART
    ;End	
    
    
    ;AnimationState = MOVING FIRING_OR_PREATTACK_A WEAPONSTATE_ONE
	;	Animation = TrotAndFireClub
	;		AnimationName = MUMntTroll_SKL.MUMntTroll_ATRA
	;	    AnimationMode = LOOP
	;	End
	;	Flags = RANDOMSTART
    ;End	
    
	;---bop our friends on the head 
	AnimationState = SPECIAL_WEAPON_ONE
		Animation = Punch
			AnimationName = MUMntTroll_SKL.MUMntTroll_ATKH
			AnimationMode = ONCE
		End
		Animation = Backhand
			AnimationName = MUMntTroll_SKL.MUMntTroll_ATKI
			AnimationMode = ONCE
		End			
	End
		
	;--Troll is angry
	AnimationState = WEAPONSET_RAMPAGE
		Animation = GetMad
				AnimationName = MUMntTroll_SKL.MUMntTroll_RPGC
				AnimationMode = LOOP
			End
		End

    ; --------- With Club ------------

	AnimationState = FIRING_OR_PREATTACK_A WEAPONSTATE_ONE
;		Animation
;			; Taking this one out since it doesn't work with the logic of the attack, which is a 180 knockback (this one is vertical clubbing, could be used as anti-monster anim, not anti bunch of inf)
;			AnimationName = MUMntTroll_SKL.MUMntTroll_ATKB
;			AnimationMode = ONCE
;			UseWeaponTiming		= Yes
;		End
		Animation
			AnimationName = MUMntTroll_SKL.MUMntTroll_ATKC
			AnimationMode = ONCE
			UseWeaponTiming		= Yes
		End
		Animation
			AnimationName = MUMntTroll_SKL.MUMntTroll_ATKD
			AnimationMode = ONCE
			UseWeaponTiming		= Yes
		End
	End

	AnimationState = TURN_LEFT WEAPONSTATE_ONE
		Animation = Moving
			AnimationName = MUMntTroll_SKL.MUMntTroll_TRNL
			AnimationMode = LOOP
			AnimationBlendTime = 10
		End
		ParticleSysBone = None InfantryDustTrails
		BeginScript ; Here since normal Packing state can be skipped with a fast click.
			CurDrawableShowSubObjectPermanently("Trunk01")
		EndScript
	End

	AnimationState = TURN_RIGHT WEAPONSTATE_ONE
		Animation = Moving
			AnimationName = MUMntTroll_SKL.MUMntTroll_TRNR
			AnimationMode = LOOP
			AnimationBlendTime = 10
		End
		ParticleSysBone = None InfantryDustTrails
		BeginScript ; Here since normal Packing state can be skipped with a fast click.
			CurDrawableShowSubObjectPermanently("Trunk01")
		EndScript
	End

		AnimationState = MOVING WEAPONSTATE_ONE ATTACKING
			Animation
				AnimationName = MUMntTroll_SKL.MUMntTroll_RUNA  ; Running with club
				AnimationMode = LOOP
				AnimationSpeedFactorRange = 0.77 0.77
			End
			Flags               = RANDOMSTART
			ParticleSysBone     = None InfantryDustTrails
			FXEvent	= Frame:5 Name:FX_TrollRightFootStep
			FXEvent	= Frame:17 Name:FX_TrollLeftFootStep
		End

		AnimationState = MOVING WEAPONSTATE_ONE DAMAGED
			Animation
	      AnimationName = MUMntTroll_SKL.MUMntTroll_WLKB ; Walking with club
		    AnimationMode = LOOP
	      AnimationSpeedFactorRange = 1.3 1.3
			End
      Flags               = RANDOMSTART
      ParticleSysBone     = None InfantryDustTrails
			FXEvent	= Frame:22 Name:FX_TrollLeftFootStep
			FXEvent	= Frame:45 Name:FX_TrollRightFootStep
    End

	AnimationState = MOVING WEAPONSTATE_ONE
		Animation
	      		AnimationName = MUMntTroll_SKL.MUMntTroll_WLKB ; Walking with club 
			AnimationMode = LOOP
	      		AnimationSpeedFactorRange = 1.36 1.36
		End
      		Flags               = RANDOMSTART
      		ParticleSysBone     = None InfantryDustTrails
		FXEvent	= Frame:22 Name:FX_TrollLeftFootStep
		FXEvent	= Frame:45 Name:FX_TrollRightFootStep	
	
		BeginScript ; Here since normal Packing state can be skipped with a fast click.
			CurDrawableShowSubObjectPermanently("Trunk01")
		EndScript
    	End

    AnimationState = PREPARING WEAPONSTATE_ONE
			Animation
				AnimationName = MUMntTroll_SKL.MUMntTroll_GRBC
				AnimationMode = ONCE
			End
		End

    AnimationState = PACKING WEAPONSTATE_ONE
		Animation
			AnimationName = MUMntTroll_SKL.MUMntTroll_GRBD
			AnimationMode = ONCE
		End
		BeginScript
			CurDrawableShowSubObjectPermanently("Trunk01")
		EndScript
	End

	AnimationState = EMOTION_CELEBRATING WEAPONSTATE_ONE
		Animation
			AnimationName	=	MUMntTroll_SKL.MUMntTroll_IDLF
			AnimationMode	=	LOOP
		End
	End

    AnimationState = USER_2 WEAPONSTATE_ONE
		Animation = ReactToTrollPoke ; The two comes from the special TrollBored weapon
			AnimationName = MUMntTroll_SKL.MUMntTroll_HITE
			AnimationMode = ONCE
		End
    End

    AnimationState = USER_3 WEAPONSTATE_ONE
		Animation = ExpectAnotherPoke ; The three comes from the special TrollBored weapon, and lasts longer than 2
			AnimationName = MUMntTroll_SKL.MUMntTroll_IDLJ
			AnimationMode = LOOP
		End
    End

	AnimationState = WEAPONSTATE_ONE	;Idle with club
		Animation = BreathWithClub
			AnimationName = MUMntTroll_SKL.MUMntTroll_IDLB
			AnimationMode = ONCE
			AnimationPriority = 30
			AnimationSpeedFactorRange = 0.8 1.0
		End
		Animation = BreathWithClub
			AnimationName = MUMntTroll_SKL.MUMntTroll_IDLB
			AnimationMode = ONCE
			AnimationPriority = 30
			AnimationSpeedFactorRange = 0.8 1.0
		End
		Animation = IDLE
			AnimationName = MUMntTroll_SKL.MUMntTroll_IDLE  ;ROAR THEN HIT GROUND (holding club only)
			AnimationMode = ONCE
			AnimationBlendTime = 10
			AnimationPriority = 5
		End
		Animation = IDLG
			AnimationName = MUMntTroll_SKL.MUMntTroll_IDLG  ;BUTT SCRATCH THEN BURP
			AnimationMode = ONCE
			AnimationBlendTime = 10
			AnimationPriority = 10
		End
		Flags = RESTART_ANIM_WHEN_COMPLETE
		BeginScript ; Here since normal Packing state can be skipped with a fast click.
			CurDrawableShowSubObjectPermanently("Trunk01")
		EndScript
	End

; --------- With Rock or Infantry ------------

	AnimationState = MOVING WEAPONSTATE_TWO ATTACKING
		Animation
			AnimationName = MUMntTroll_SKL.MUMntTroll_RUNA 
			AnimationMode = LOOP
			AnimationSpeedFactorRange = 0.77 0.77
		End
		Flags = RANDOMSTART
		ParticleSysBone = None InfantryDustTrails
		FXEvent	= Frame:5 Name:FX_TrollRightFootStep
		FXEvent	= Frame:17 Name:FX_TrollLeftFootStep
	End

	AnimationState = MOVING WEAPONSTATE_TWO DAMAGED
		Animation
			AnimationName = MUMntTroll_SKL.MUMntTroll_WLKB 
			AnimationMode = LOOP
			AnimationSpeedFactorRange = 1.3 1.3
		End
		Flags = RANDOMSTART
		ParticleSysBone = None InfantryDustTrails
		FXEvent	= Frame:22 Name:FX_TrollLeftFootStep
		FXEvent	= Frame:45 Name:FX_TrollRightFootStep
	End

	AnimationState = MOVING WEAPONSTATE_TWO
		Animation
			AnimationName = MUMntTroll_SKL.MUMntTroll_WLKB 
			AnimationMode = LOOP
			AnimationSpeedFactorRange = 1.36 1.36
		End
		Flags = RANDOMSTART
		ParticleSysBone = None InfantryDustTrails
		FXEvent	= Frame:22 Name:FX_TrollLeftFootStep
		FXEvent	= Frame:45 Name:FX_TrollRightFootStep
	End

	AnimationState = FIRING_OR_PREATTACK_A USING_WEAPON_A
		Animation
			AnimationName = MUMntTroll_SKL.MUMntTroll_THRW
			AnimationMode = ONCE
			AnimationBlendTime = 0
			UseWeaponTiming = Yes
		End
		FrameForPristineBonePositions = 16
		StateName = Throw
	End
	
	AnimationState = FIRING_OR_PREATTACK_A WEAPONSTATE_TWO
		Animation
			AnimationName = MUMntTroll_SKL.MUMntTroll_THRW
			AnimationMode = ONCE
			AnimationBlendTime = 0
			UseWeaponTiming = Yes
		End
		FrameForPristineBonePositions = 21
		StateName = Throw
	End
	
	AnimationState = FIRING_OR_PREATTACK_B WEAPONSTATE_TWO
		Animation
			AnimationName = MUMntTroll_SKL.MUMntTroll_THRW
			AnimationMode = ONCE
			AnimationBlendTime = 0
			UseWeaponTiming = Yes
		End
		FrameForPristineBonePositions = 21
		StateName = Throw
	End

	AnimationState = PACKING WEAPONSTATE_TWO
		Animation
			AnimationName = MUMntTroll_SKL.MUMntTroll_GRBB
			AnimationMode = ONCE
		End
		ParticleSysBone	= BAT_HANDR TrollRockBounceSmall FollowBone:no
		ParticleSysBone	= BAT_HANDR TrollRockPickup FollowBone:no
	End

	;Building attack, which you can do with a rock in yo hand
	AnimationState = FIRING_OR_PREATTACK_C WEAPONSTATE_TWO
		Animation
			AnimationName = MUMntTroll_SKL.MUMntTroll_ATKF
			AnimationMode = ONCE
			UseWeaponTiming		= Yes
		End
	End

	AnimationState = TURN_LEFT WEAPONSTATE_TWO
		Animation = Moving
			AnimationName = MUMntTroll_SKL.MUMntTroll_TRNL
			AnimationMode = LOOP
			AnimationBlendTime = 10
		End
		ParticleSysBone = None InfantryDustTrails
	End

	AnimationState = TURN_RIGHT WEAPONSTATE_TWO
		Animation = Moving
			AnimationName = MUMntTroll_SKL.MUMntTroll_TRNR
			AnimationMode = LOOP
			AnimationBlendTime = 10
		End
		ParticleSysBone = None InfantryDustTrails
	End

    AnimationState = USER_2 WEAPONSTATE_TWO
		Animation = ReactToTrollPoke ; The two comes from the special TrollBored weapon
			AnimationName = MUMntTroll_SKL.MUMntTroll_HITE
			AnimationMode = ONCE
		End
    End

    AnimationState = USER_3 WEAPONSTATE_TWO
		Animation = ExpectAnotherPoke ; The three comes from the special TrollBored weapon, and lasts longer than 2
			AnimationName = MUMntTroll_SKL.MUMntTroll_IDLJ
			AnimationMode = LOOP
		End
    End

	AnimationState = WEAPONSTATE_TWO
		Animation = IDLB
			AnimationName = MUMntTroll_SKL.MUMntTroll_IDLB
			AnimationMode = LOOP
			AnimationSpeedFactorRange = 0.8 1.0
		End
	End

	
; ------ SWINGING THE GROND BATTERING RAM -----
   ModelConditionState = PASSENGER
		Model =  MUGrndTrl_SKN
	End

	AnimationState = PREATTACK_A PASSENGER PASSENGER_VARIATION_1 ; swinging grond
			Animation = grasping_grond_lefthanded
			AnimationName =  MUGrndTrl_SKL.MUGrndTrl_GAA1
			AnimationMode = ONCE
			;AnimationBlendTime = 30				
			AnimationSpeedFactorRange 3.0 3.0
		End
	End
	AnimationState = PREATTACK_A PASSENGER PASSENGER_VARIATION_2 ; swinging grond
			Animation = grasping_grond_righthanded
			AnimationName = MUGrndTrl_SKL.MUGrndTrl_GAB1
			AnimationMode = ONCE
			;AnimationBlendTime = 30
			AnimationSpeedFactorRange 3.0 3.0
		End
	End

	AnimationState = FIRING_A PASSENGER_VARIATION_1 ; swinging grond
		StateName = Firing_a
		Animation = swinging_grond_lefthanded
			AnimationName = MUGrndTrl_SKL.MUGrndTrl_GAA2
			AnimationMode = MANUAL
			AnimationBlendTime = 5	
		End
	End
	AnimationState = FIRING_A PASSENGER_VARIATION_2 ; swinging grond
		StateName = Firing_b
		Animation = swinging_grond_righthanded
			AnimationName = MUGrndTrl_SKL.MUGrndTrl_GAB2
			AnimationMode = MANUAL
			AnimationBlendTime = 5			
		End
	End

	TransitionState = Trans_Firing_Shot_A
		Animation = Transition
			AnimationName = MUGrndTrl_SKL.MUGrndTrl_GAA2
			AnimationMode = ONCE
			AnimationBlendTime  = 5
			AnimationSpeedFactorRange = 1.07 1.07
		End
	End

	TransitionState = Trans_Firing_Shot_B
		Animation = Transition
			AnimationName = MUGrndTrl_SKL.MUGrndTrl_GAB2
			AnimationMode = ONCE
			AnimationBlendTime  = 5
			AnimationSpeedFactorRange = 1.07 1.07
		End
	End

	AnimationState = BETWEEN_FIRING_SHOTS_A PASSENGER PASSENGER_VARIATION_1 ; swinging grond
		Animation = swinging_grond_lefthanded
			AnimationName = MUGrndTrl_SKL.MUGrndTrl_GAA1
			AnimationMode = MANUAL
			AnimationBlendTime = 60	
		End
		Flags = START_FRAME_LAST
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "Firing_a"	then CurDrawableSetTransitionAnimState("Trans_Firing_Shot_A") return end
		EndScript
	End
	AnimationState = BETWEEN_FIRING_SHOTS_A PASSENGER PASSENGER_VARIATION_2 ; swinging grond
		Animation = swinging_grond_righthanded
			AnimationName = MUGrndTrl_SKL.MUGrndTrl_GAB1
			AnimationMode = MANUAL
			AnimationBlendTime = 60	
		End
		Flags = START_FRAME_LAST
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "Firing_b"	then CurDrawableSetTransitionAnimState("Trans_Firing_Shot_B") return end
		EndScript
	End

	AnimationState = UNPACKING PASSENGER PASSENGER_VARIATION_1 ; swinging grond
			Animation = packing_grond_lefthanded
			AnimationName = MUGrndTrl_SKL.MUGrndTrl_GAA4
			AnimationMode = ONCE
			;AnimationBlendTime = 15				
			AnimationSpeedFactorRange 3.0 3.0
		End
		Flags = START_FRAME_LAST		
	End
	AnimationState = UNPACKING PASSENGER PASSENGER_VARIATION_2 ; swinging grond
			Animation = packing_grond_righthanded
			AnimationName = MUGrndTrl_SKL.MUGrndTrl_GAB4
			AnimationMode = ONCE
			;AnimationBlendTime = 15			
			AnimationSpeedFactorRange 3.0 3.0
		End
	End

; --------- With Bare Hands ------------
	AnimationState = PASSENGER MOVING BACKING_UP; pulling the seige tower or grond
			Animation = Passenger_moving
			AnimationName = MUGrndTrl_SKL.MUGrndTrl_GBKA
			AnimationMode = LOOP
			AnimationSpeedFactorRange = 2.0 2.0
		End
		Flags = RANDOMSTART
	End

	AnimationState = PASSENGER MOVING ; pushing the seige tower
			Animation = Passenger_moving
			AnimationName = MUGrndTrl_SKL.MUGrndTrl_GWKA
			AnimationMode = LOOP
			AnimationSpeedFactorRange = 2.5 2.5
		End
		Flags = RANDOMSTART
	End

	AnimationState = PASSENGER ; idling by the grond
		Animation = Passenger
			AnimationName = MUGrndTrl_SKL.MUGrndTrl_GIDA
			AnimationMode = LOOP
			AnimationBlendTime = 15
		End
		Flags = RANDOMSTART
	End

	
	AnimationState = UNPACKING
		Animation
			AnimationName = MUMntTroll_SKL.MUMntTroll_GRBA
			AnimationMode = ONCE
		End
	End

	AnimationState = TURN_LEFT
		Animation = Moving
			AnimationName = MUMntTroll_SKL.MUMntTroll_TRNL
			AnimationMode = LOOP
			AnimationBlendTime = 10
		End
		ParticleSysBone = None InfantryDustTrails
	End

	AnimationState = TURN_RIGHT
		Animation = Moving
			AnimationName = MUMntTroll_SKL.MUMntTroll_TRNR
			AnimationMode = LOOP
			AnimationBlendTime = 10
		End
		ParticleSysBone = None InfantryDustTrails
	End

	AnimationState = MOVING ATTACKING
		Animation = Charging
			AnimationName = MUMntTroll_SKL.MUMntTroll_RUNB
			AnimationMode = LOOP
			AnimationSpeedFactorRange = 0.8 0.8
		End
		Flags = RANDOMSTART
		ParticleSysBone = None InfantryDustTrails
		FXEvent	= Frame:6 Name:FX_TrollRightFootStep
		FXEvent	= Frame:17 Name:FX_TrollLeftFootStep
	End



	; Normal fist attacks
	AnimationState = FIRING_OR_PREATTACK_B
		Animation
			AnimationName = MUMntTroll_SKL.MUMntTroll_ATKA
			AnimationMode = ONCE
			UseWeaponTiming		= Yes
		End
		Animation
			AnimationName = MUMntTroll_SKL.MUMntTroll_ATKE
			AnimationMode = ONCE
			UseWeaponTiming		= Yes
		End
		Animation
			AnimationName = MUMntTroll_SKL.MUMntTroll_ATKG
			AnimationMode = ONCE
			UseWeaponTiming		= Yes
		End
	End

	;Building attack
	AnimationState = FIRING_OR_PREATTACK_C
		Animation
			AnimationName = MUMntTroll_SKL.MUMntTroll_ATKF
			AnimationMode = ONCE
			UseWeaponTiming		= Yes
		End
	End
	
	AnimationState				= MOVING PANICKING
		Animation				= RUNM
			AnimationName		=  MUMntTroll_SKL.MUMntTroll_MFDA
			AnimationMode		= LOOP
		End
		Flags					= RANDOMSTART
	End
	
    AnimationState = MOVING DAMAGED
		Animation = Moving_Damaged
			AnimationName = MUMntTroll_SKL.MUMntTroll_WLKA
			AnimationMode = LOOP
		End
		Flags = RANDOMSTART
		ParticleSysBone = None InfantryDustTrails
		FXEvent	= Frame:0 Name:FX_TrollRightFootStep
		FXEvent	= Frame:16 Name:FX_TrollLeftFootStep
	End

	AnimationState = MOVING
		Animation = Moving
			AnimationName = MUMntTroll_SKL.MUMntTroll_WLKA
			AnimationMode = LOOP
			AnimationBlendTime = 10
		End
		Flags = RANDOMSTART
		ParticleSysBone = None InfantryDustTrails
		FXEvent	= Frame:16 Name:FX_TrollLeftFootStep
		FXEvent	= Frame:0 Name:FX_TrollRightFootStep
	End

	AnimationState = ENGAGED
		Animation
			AnimationName = MUMntTroll_SKL.MUMntTroll_IDLA
			AnimationMode = LOOP
		End
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "Throw"	then CurDrawableSetTransitionAnimState("Trans_Throwing_To_Ready") return end	
		EndScript
	End
	
	
		AnimationState =DESTROYED_WEAPON
			Animation
				AnimationName = MUMntTroll_SKL.MUMntTroll_ATKA
				AnimationMode = ONCE
			End
		End
		
; --------- Just built ------------
		
	AnimationState = JUST_BUILT
		Animation
			AnimationName = MUMntTroll_SKL.MUMntTroll_WLKC ; temp
			AnimationMode = ONCE
			AnimationBlendTime = 0
	        AnimationSpeedFactorRange = 0.9 0.9			
		End
		FXEvent	= Frame:0 Name:FX_TrollRightFootStep
		FXEvent	= Frame:16 Name:FX_TrollLeftFootStep
		FXEvent	= Frame:30 Name:FX_TrollRightFootStep
		FXEvent	= Frame:44 Name:FX_TrollLeftFootStep
	End	

; --------- Click and Hit Reactions ------------
		
    AnimationState = HIT_REACTION HIT_LEVEL_1
			Animation = Hit_Level_1_a
	      AnimationName = MUMntTroll_SKL.MUMntTroll_HITC
		    AnimationMode = ONCE
			End
    End

    AnimationState = HIT_REACTION HIT_LEVEL_2
			Animation = Hit_Level_2
	      AnimationName = MUMntTroll_SKL.MUMntTroll_HITB
		    AnimationMode = ONCE
			End
    End

    AnimationState = HIT_REACTION HIT_LEVEL_3
			Animation = Hit_Level_3
	      AnimationName = MUMntTroll_SKL.MUMntTroll_HITA
		    AnimationMode = ONCE
			End
    End

    AnimationState = REACT_1
			Animation = Click_React_1
	      AnimationName = MUMntTroll_SKL.MUMntTroll_RCTA
		    AnimationMode = ONCE
			End
    End

    AnimationState = REACT_2
			Animation = Click_React_2
	      AnimationName = MUMntTroll_SKL.MUMntTroll_RCTB
		    AnimationMode = ONCE
			End
    End

    AnimationState = REACT_3
			Animation = Click_React_3
	      AnimationName = MUMntTroll_SKL.MUMntTroll_RCTC
		    AnimationMode = ONCE
			End
    End

    AnimationState = REACT_4
			Animation = Click_React_4
	      AnimationName = MUMntTroll_SKL.MUMntTroll_RCTD
		    AnimationMode = ONCE
			End
    End

    AnimationState = REACT_5
			Animation = Click_React_5
	      AnimationName = MUMntTroll_SKL.MUMntTroll_RCTE
		    AnimationMode = ONCE
			End
    End
    
    AnimationState = USER_2
		Animation = ReactToTrollPoke ; The two comes from the special TrollBored weapon
			AnimationName = MUMntTroll_SKL.MUMntTroll_HITE
			AnimationMode = ONCE
		End
    End

    AnimationState = USER_3 
		Animation = ExpectAnotherPoke ; The three comes from the special TrollBored weapon, and lasts longer than 2
			AnimationName = MUMntTroll_SKL.MUMntTroll_IDLJ
			AnimationMode = LOOP
		End
    End

;-----------------------------------
;Emotion

	AnimationState = EMOTION_CELEBRATING
		Animation
			AnimationName	=	MUMntTroll_SKL.MUMntTroll_IDLF
			AnimationMode	=	LOOP
		End
	End
  End
 
  ; ***DESIGN parameters ***
  Side = Mordor
  EditorSorting = UNIT
	ThreatLevel = 2.0
  TransportSlotCount = 1
  ShowHealthInSelectionDecal = Yes

	WeaponSet
		Conditions          =  None
		Weapon              =  PRIMARY    MordorCaveTrollRockThrow
		Weapon              =  SECONDARY  MordorCaveTrollPunch
		Weapon              =  TERTIARY   MordorCaveTrollBash
		PreferredAgainst	= PRIMARY STRUCTURE BLOCKING_GATE		; Preferred is more powerful than Only, so if we have a rock we will chuck it, but otherwise we will choke a building
		OnlyAgainst         =  TERTIARY   STRUCTURE BLOCKING_GATE
	End

	WeaponSet
		Conditions          = RAMPAGE
		Weapon              = PRIMARY  MordorCaveTrollRampage
	End

	WeaponSet
		Conditions          = RAMPAGE PASSENGER_TYPE_ONE
		Weapon              = PRIMARY  MordorCaveTrollTreeRampage
	End

  WeaponSet
    Conditions          = PASSENGER_TYPE_ONE 
    Weapon              = PRIMARY     MordorCaveTrollClubSwing
  End
	
  ArmorSet
    Conditions      = None
    Armor           = TrollArmor
    DamageFX        = NormalDamageFX
  End

	BuildFadeInOnCreateTime = 4.4
	
  	VisionRange = VISION_STANDARD_MELEE
  	ShroudClearingRange = SHROUD_CLEAR_STANDARD

  BountyValue = MORDOR_TROLL_BOUNTY_VALUE
  DisplayName = OBJECT:MordorMountainTroll
  CrushableLevel = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles

  CommandSet = MordorMountainTrollCommandSet
  CommandPoints = 10

	CrusherLevel = 1	
	UseCrushAttack = No  ; Don't attack using crush, just crush when you walk through. 
	CrushWeapon		= TrollCrush

	  RamPower = 20 ;45
	  RamZMult = 0.5
	  CrushKnockback = 30 ;50
	  CrushZFactor = 1.0

 
	; *** AUDIO Parameters ***;

	VoiceAttack			= TrollVoiceAttack
	VoiceAttackCharge		= TrollVoiceAttack
	VoiceAttackMachine	= TrollVoiceAttack
	VoiceAttackStructure	= TrollVoiceAttack
	VoiceCreated		= CampOrcCreateMountainTroll
	VoiceFullyCreated 	= CampOrcCreateMountainTroll
	VoiceGuard			= TrollVoiceMove
	VoiceMove			= TrollVoiceMove
	VoiceMoveToCamp		= TrollVoiceMove
	VoiceMoveWhileAttacking	= TrollVoiceMove
	VoicePriority		= 19
	VoiceSelect			= TrollVoiceSelect
	VoiceSelectBattle 	= TrollVoiceSelect

	SoundImpact			= ImpactHorse		;TrollDie

	;UnitSpecificSounds
  	;	VoiceGarrison     = NoSound
  	;End

	EvaEventDamagedOwner	= UnitUnderAttack 		;Eva event to trigger when unit is damaged

	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		MaxUpdateRangeCap = 800
		AnimationSound = Sound:ImpactTrollGrabsOrc 	Animation:MUMntTroll_SKL.MUMntTroll_GRBA	Frames:6
		;AnimationSound = Sound:OrcEatenVox 			Animation:MUMntTroll_SKL.MUMntTroll_GRBB	Frames:0
		AnimationSound = Sound:OrcEatenVox 			Animation:MUMntTroll_SKL.MUMntTroll_EATA	Frames:0
		AnimationSound = Sound:TrollChomp 			Animation:MUMntTroll_SKL.MUMntTroll_EATA	Frames:20
		AnimationSound = Sound:TrollSwallow 		Animation:MUMntTroll_SKL.MUMntTroll_EATA	Frames:72
		AnimationSound = Sound:MordorTrollCreated 	Animation:MUMntTroll_SKL.MUMntTroll_WLKC	Frames:66 
		AnimationSound = Sound:TrollBodyfall 		Animation:MUMntTroll_SKL.MUMntTroll_LNDA	Frames:3 21 
		AnimationSound = Sound:TrollBodyfall 		Animation:MUMntTroll_SKL.MUMntTroll_DIEA	Frames:31 
		AnimationSound = Sound:TrollBodyfall 		Animation:MUMntTroll_SKL.MUMntTroll_DIEB	Frames:85
		AnimationSound = Sound:MordorGrondTrollAttack 	Animation:MUGRNDTRL_SKL.MUGRNDTRL_GAA2	Frames:78 
		AnimationSound = Sound:MordorGrondTrollAttack 	Animation:MUGRNDTRL_SKL.MUGRNDTRL_GAB2	Frames:80 
		AnimationSound = Sound:MordorGrondTrollAttack 	Animation:MUGRNDTRL_SKL.MUGRNDTRL_GATA	Frames:137 
		AnimationSound = Sound:MordorTrollIdleA 		Animation:MUMntTroll_SKL.MUMntTroll_IDLA	Frames:13 
		AnimationSound = Sound:TrollTreeShakeYell 	Animation:MUMntTroll_SKL.MUMntTroll_GRBC	Frames:26 
		AnimationSound = Sound:TrollTreeShakeYell 	Animation:MUMntTroll_SKL.MUMntTroll_GRBD	Frames:28 
		;AnimationSound = Sound:TrollTreeShakeYell 	Animation:MUMntTroll_SKL.MUMntTroll_GRBA	Frames:14 
		;AnimationSound = Sound:TrollTreeShakeYell 	Animation:MUMntTroll_SKL.MUMntTroll_GRBB	Frames:12 
		AnimationSound = Sound:MordorGrondTrollPush 	Animation:MUGRNDTRL_SKL.MUGRNDTRL_GWKA	Frames:41 
		AnimationSound = Sound:MordorTrollIdleB 		Animation:MUMntTroll_SKL.MUMntTroll_IDLB	Frames:7 
		;AnimationSound = Sound:MordorTrollIdleVox 	Animation:MUMntTroll_SKL.MUMntTroll_IDLE	Frames:8 
		;AnimationSound = Sound:MordorTrollIdleVox 	Animation:MUMntTroll_SKL.MUMntTroll_IDLF	Frames:31 
		;AnimationSound = Sound:MordorTrollIdleVox 	Animation:MUMntTroll_SKL.MUMntTroll_IDLG	Frames:76 
		;AnimationSound = Sound:MordorTrollIdleVox 	Animation:MUMntTroll_SKL.MUMntTroll_IDLH	Frames:0 
		;AnimationSound = Sound:MordorTrollIdleVox 	Animation:MUMntTroll_SKL.MUMntTroll_IDLI	Frames:102 
		AnimationSound = Sound:MordorTrollIdleE 		Animation:MUMntTroll_SKL.MUMntTroll_IDLE	Frames:6 
		AnimationSound = Sound:MordorTrollIdleF 		Animation:MUMntTroll_SKL.MUMntTroll_IDLF	Frames:31 
		AnimationSound = Sound:MordorTrollIdleG 		Animation:MUMntTroll_SKL.MUMntTroll_IDLG	Frames:76
		AnimationSound = Sound:MordorTrollIdleH 		Animation:MUMntTroll_SKL.MUMntTroll_IDLH	Frames:0
		AnimationSound = Sound:MordorTrollIdleI 		Animation:MUMntTroll_SKL.MUMntTroll_IDLI	Frames:102 
		AnimationSound = Sound:TrollFootstep 		Animation:MUMntTroll_SKL.MUMntTroll_RUNA	Frames:4 17 
		AnimationSound = Sound:TrollFootstep 		Animation:MUMntTroll_SKL.MUMntTroll_RUNB	Frames:4 17
		AnimationSound = Sound:TrollFootstep 		Animation:MUMntTroll_SKL.MUMntTroll_WLKA	Frames:0 15
		AnimationSound = Sound:TrollFootstep 		Animation:MUMntTroll_SKL.MUMntTroll_WLKB	Frames:0 22
		AnimationSound = Sound:TrollFootstep 		Animation:MUMntTroll_SKL.MUMntTroll_WLKC	Frames:14 29 44 59
		AnimationSound = Sound:TrollFootstep 		Animation:MUMntTroll_SKL.MUMntTroll_TRNL	Frames:15 29
		AnimationSound = Sound:TrollFootstep 		Animation:MUMntTroll_SKL.MUMntTroll_TRNR	Frames:15 29
		AnimationSound = Sound:TrollFootstep 		Animation:MUMntTroll_SKL.MUMntTroll_GTPA	Frames:12 80 97
		AnimationSound = Sound:TrollFootstepRampage 	Animation:MUMntTroll_SKL.MUMntTroll_MFDA	Frames:4 17 29 42
		AnimationSound = Sound:TrollFootstepRampage 	Animation:MUMntTroll_SKL.MUMntTroll_RCTD	Frames:6 66
		AnimationSound = Sound:TrollFootstepRampage 	Animation:MUMntTroll_SKL.MUMntTroll_RPGC	Frames:37 43 61 77 93 100 116 123 139 149
		AnimationSound = Sound:TrollFootstepRampage 	Animation:MUMntTroll_SKL.MUMntTroll_THRW	Frames:18
		AnimationSound = Sound:TrollTreeSwingLight 	Animation:MUMntTroll_SKL.MUMntTroll_IDLE	Frames:51
		AnimationSound = Sound:TrollTreeSwingLight 	Animation:MUMntTroll_SKL.MUMntTroll_RCTB	Frames:16
		AnimationSound = Sound:TrollTreeSwingLight 	Animation:MUMntTroll_SKL.MUMntTroll_MFDA	Frames:5 22
		AnimationSound = Sound:TrollTreeSwingLight 	Animation:MUMntTroll_SKL.MUMntTroll_RPGC	Frames:28 54 89 114
		AnimationSound = Sound:TrollTreeSwingLight 	Animation:MUMntTroll_SKL.MUMntTroll_RCTC	Frames:5
		AnimationSound = Sound:TrollTreeSwingLight 	Animation:MUMntTroll_SKL.MUMntTroll_RCTD	Frames:29
		AnimationSound = Sound:TrollTreeSwingLight 	Animation:MUMntTroll_SKL.MUMntTroll_RCTE	Frames:72
		AnimationSound = Sound:TrollTreeSwingLight 	Animation:MUMntTroll_SKL.MUMntTroll_THRW	Frames:17
		AnimationSound = Sound:TrollTreeSwingLight 	Animation:MUMntTroll_SKL.MUMntTroll_GRBA	Frames:6
		AnimationSound = Sound:TrollIdleRubHeadVox 	Animation:MUMntTroll_SKL.MUMntTroll_RCTB	Frames:3
		AnimationSound = Sound:TrollGetupShakeHeadVox 	Animation:MUMntTroll_SKL.MUMntTroll_GTPA	Frames:31
		AnimationSound = Sound:ImpactTrollTreeLight 	Animation:MUMntTroll_SKL.MUMntTroll_IDLE	Frames:53
		AnimationSound = Sound:TrollGrabRock 		Animation:MUMntTroll_SKL.MUMntTroll_GRBB	Frames:0
		AnimationSound = Sound:TrollRoar 			Animation:MUMntTroll_SKL.MUMntTroll_EATA	Frames:3
		AnimationSound = Sound:TrollRoar 			Animation:MUMntTroll_SKL.MUMntTroll_GTPA	Frames:105
		AnimationSound = Sound:TrollRoar 			Animation:MUMntTroll_SKL.MUMntTroll_HITA	Frames:21
		AnimationSound = Sound:TrollRoar 			Animation:MUMntTroll_SKL.MUMntTroll_HITB	Frames:10
		AnimationSound = Sound:TrollRoar 			Animation:MUMntTroll_SKL.MUMntTroll_HITC	Frames:13
		AnimationSound = Sound:TrollRoar 			Animation:MUMntTroll_SKL.MUMntTroll_HITE	Frames:10
		AnimationSound = Sound:TrollRoar 			Animation:MUMntTroll_SKL.MUMntTroll_RCTC	Frames:6
		AnimationSound = Sound:TrollRoar 			Animation:MUMntTroll_SKL.MUMntTroll_RCTD	Frames:30
		AnimationSound = Sound:TrollRoar 			Animation:MUMntTroll_SKL.MUMntTroll_RCTE	Frames:53
		AnimationSound = Sound:TrollRoar 			Animation:MUMntTroll_SKL.MUMntTroll_RPGC	Frames:1 33 58 92 117
		AnimationSound = Sound:TrollRoar 			Animation:MUMntTroll_SKL.MUMntTroll_EATA	Frames:1
	End

	Behavior = LargeGroupAudioUpdate ModuleTag_LGAU			  ; Tie into LargeGroupAudio system
	  	Key = Troll
	     ;UnitWeight = 2 ; Trollsie counts as 2 infantry when computing group size
	End


	; *** ENGINEERING Parameters ***

	RadarPriority = UNIT
	KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS TROLL MONSTER SCORE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT WORKING_PASSENGER NO_FREEWILL_ENTER PATH_THROUGH_INFANTRY SCARY CAN_ATTACK_WALLS ARMY_SUMMARY
 
    BuildCost = MORDOR_TROLL_BUILDCOST
    BuildTime = MORDOR_TROLL_BUILDTIME

	Body = DelayedDeathBody ModuleTag_02
	CheerRadius 	  = EMOTION_CHEER_RADIUS
    	MaxHealth         = MORDOR_TROLL_HEALTH                  
    	MaxHealthDamaged  = MORDOR_TROLL_HEALTH_DAMAGED
    	MaxHealthReallyDamaged = MORDOR_TROLL_HEALTH_RAMPAGE_DAMAGED
		DoHealthCheck				= No			; Don't want to get the delayed death behaviour when we die normally.
		DelayedDeathTime			= 5000
		CanRespawn					= No			; Unit can't get revived.
  	End
 
 	Behavior LifetimeUpdate LifetimeTag
		WaitForWakeUp	=	Yes
	End

    Behavior = AutoHealBehavior ModuleTag_MountainTrollHealing
		StartsActive = No
		TriggeredBy = Upgrade_MountainTrollVeterancy
        HealingAmount = MONSTER_HEAL_AMOUNT
        HealingDelay = 1000
        StartHealingDelay = MONSTER_HEAL_DELAY
        HealOnlyIfNotInCombat = Yes
    End
   
	;MountainTroll Upgrade
	Behavior = WeaponSetUpgrade ModuleTag_WeaponsetUpgrade
		TriggeredBy = Upgrade_MountainTrollVeterancy
	End
	 
	Behavior = AIUpdateInterface ModuleTag_03
		AutoAcquireEnemiesWhenIdle = Yes ATTACK_BUILDINGS
		AILuaEventsList = TrollFunctions
		RampageTime		=	4470
		AttackPriority				= AttackPriority_Cavalry
	End

	Behavior = AutoPickUpUpdate AutoPickUpModuleTagOne ; This one is for eating nearby orcs
		ScanDelayTime = 40000
		ScanDistance = 70;		default value is 300 units 
		
		EatObjectEntry = MyHealth:80% TargetHealth:100% Filter:NONE +ORC		;When I'm below x% of my max health, I will look for an object to eat.

		Bored = Yes	; look for someone to hit with the BoredSpecialPower
		BoredFilter = NONE +MordorMountainTroll +MordorCaveTroll
	End
	
	Behavior = AutoPickUpUpdate AutoPickUpModuleTagForNoogies
		ScanDelayTime = 20000
		ScanDistance = 70;		default value is 300 units 

		Bored = Yes	; look for someone to hit with the BoredSpecialPower
		BoredFilter = NONE +MordorMountainTroll +MordorCaveTroll
	End
	
	Behavior = AutoPickUpUpdate AutoPickUpForRocks
		ScanDelayTime = 0
		ScanDistance = 600;		default value is 300 units	
		PickUpKindOf = ROCK_VENDOR ; Not Rock, because this module finds someone to hit with the GrabPassenger power, and in there is where vendor is handled
		
		RunFromButton = Yes ; No natural scanning, wakes up to run exactly once when hit with a WakeAutoPickup button
		RunFromButtonNumber = 1; In case of multiples, this lines up with the OPTION_(ONE) field in the waking button
	End

	Behavior = AutoPickUpUpdate AutoPickUpForTrees
		ScanDelayTime = 0
		ScanDistance = 600		;default value is 300 units	
		PickUpKindOf = TREE		;Slightly tricky since trees don't exist.  This will trigger the special stuff you have to do to grab a tree.
		
		RunFromButton = Yes ; No natural scanning, wakes up to run exactly once when hit with a WakeAutoPickup button
		RunFromButtonNumber = 2; In case of multiples, this lines up with the OPTION_(ONE) field in the waking button
	End

	Behavior = AutoPickUpUpdate AutoPickUpForTastyOrcs ; There is a seperate AutoPickUp that runs without a button
		ScanDelayTime = 40000
		ScanDistance = 200;		default value is 300 units 
		Bored = Yes
		EatObjectEntry = MyHealth:99% TargetHealth:100% Filter:NONE +ORC		;When I'm below x% of my max health, I will look for an object to eat.
		
		RunFromButton = Yes ; No natural scanning, wakes up to run exactly once when hit with a WakeAutoPickup button
		RunFromButtonNumber = 3; In case of multiples, this lines up with the OPTION_(ONE) field in the waking button
	End
	
   	Behavior = EmotionTrackerUpdate	Module_EmotionTracker
		AddEmotion	=	Terror_Base
		AddEmotion	=	Alert_Base
;		AddEmotion	=	Doom_Base
;		AddEmotion	=	UncontrollableFear_Base		
	End		

	LocomotorSet
		Locomotor = TrollLocomotor
		Condition = SET_NORMAL 
		Speed     = 33
	End

	Behavior = HitReactionBehavior HitReactionBehaviorModuleTag
		HitReactionLifeTimer1 = 1500 ; level 1 (light  damage)  hit reaction animations in frames (5 per sec)
		HitReactionLifeTimer2 = 1500 ; level 2 (medium damage)  hit reaction animations in frames (5 per sec)
		HitReactionLifeTimer3 = 3000 ; level 3 (heavy  damage)  hit reaction animations in frames (5 per sec)

		HitReactionThreshold1 = 0.0   ; level 1 (light  damage) threshold trigger
		HitReactionThreshold2 = 50.0  ; level 2 (medium damage) threshold trigger
		HitReactionThreshold3 = 200.0  ; level 3 (heavy  damage) threshold trigger
	End

	Behavior = ClickReactionBehavior ClickBehaviorModuleTag
		ClickReactionTimer = 600 ; 10 seconds in ticks
		ReactionFrames1 = 15  ; in frames (5 per sec)
		ReactionFrames2 = 7  ; in frames (5 per sec)
		ReactionFrames3 = 7  ; in frames (5 per sec)
		ReactionFrames4 = 15  ; in frames (5 per sec)
		ReactionFrames5 = 18 ; in frames (5 per sec)
	End

	Behavior = PhysicsBehavior ModuleTag_04
		GravityMult = 0.0 ;1.0
		ShockStandingTime = 4600 ;27800 ;msec
		FirstHeight = 0 
		SecondHeight = 0
	End
   
	Behavior = SlowDeathBehavior ModuleTag_50
		DeathTypes = ALL 
		DestructionDelay = 35000
		DecayBeginTime = 3000
		SinkDelay = 10000
		SinkRate = 0.64     ; in Dist/Sec
		Sound = INITIAL TrollDie
		ProbabilityModifier = 50
		DeathFlags   = DEATH_1 ; Tell model which death animation to play. Sets BOTH model condition and object status bits.
	End

  Behavior = SlowDeathBehavior ModuleTag_51
    DeathTypes = ALL 
    DestructionDelay = 35000
    DecayBeginTime = 4000
    SinkDelay = 11000
    SinkRate = 0.64     ; in Dist/Sec
    Sound = INITIAL TrollDie
    ProbabilityModifier = 50
    DeathFlags   = DEATH_2 ; Tell model which death animation to play. Sets BOTH model condition and object status bits.
  End

  Behavior = SquishCollide ModuleTag_06
    ;nothing
  End
 
  Behavior = GrabPassengerSpecialPower ModuleTag_07                      
    SpecialPowerTemplate      = SpecialAbilityGrabPassenger
    UpdateModuleStartsAttack  = Yes
	AllowTree				= Yes
	InitiateFX				= FX_TrollGrabInitiate   ; Evil hack so we can different voices for grab tree or grab rock
    ;InitiateSound           = 
  End
  
  Behavior = SpecialAbilityUpdate ModuleTag_08                
    SpecialPowerTemplate    = SpecialAbilityGrabPassenger
    StartAbilityRange       = 8.0

    UnpackTime              = 300 ; This does not match the animation, but looks good.
    PreparationTime         = 1   ; touching it to grabbing it
    PersistentPrepTime      = 630 ; grabbing it to whacking it on the ground (if shrubbery)
    PackTime                = 1000 ; whacking it to holding it nice
	CustomAnimAndDuration   = AnimState:EATING AnimTime:3000 TriggerTime:1400

;    PackSound               = 
;    UnpackSound             = 
;    TriggerSound            = 
;    PrepSoundLoop           = 
    AwardXPForTriggering    = 0
  End
  
 	Behavior = SpecialPowerModule ModuleTag_MordorMtTrollBoredAbility                     
		SpecialPowerTemplate      = SpecialAbilityMountainTrollBored
		UpdateModuleStartsAttack  = Yes
		;InitiateSound           = 
	End
  
  Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_MordorMtTrollBored   
		SpecialPowerTemplate    = SpecialAbilityMountainTrollBored

		UnpackTime              = 800 ; hit the guy
		PackTime				= 1200
		AwardXPForTriggering    = 0
		
		StartAbilityRange = 12.0
		
		SpecialWeapon = MordorMtTrollBored
		WhichSpecialWeapon = 1
	End

  Behavior = TransportContain ModuleTag_09
	ObjectStatusOfContained = UNSELECTABLE
    PassengerFilter			= ANY +CLUB +ORC +ROCK
    ManualPickUpFilter		= ANY +CLUB -ORC +ROCK +ROCK_VENDOR ; we do not want the user to be able to manually pick up an orc with a troll.
    Slots					= 1
    ShowPips				= No
    AllowEnemiesInside		= Yes
    AllowNeutralInside		= Yes
    AllowAlliesInside		= Yes
    DamagePercentToUnits	= 0%
    TypeOneForWeaponSet		= CLUB
;    TypeTwoForWeaponSet	= THROWN_OBJECT
    
    TypeOneForWeaponState	= CLUB
    TypeTwoForWeaponState	= ROCK

    PassengerBonePrefix = PassengerBone:Trunk       KindOf:CLUB
    PassengerBonePrefix = PassengerBone:Firepoint   KindOf:ROCK
    PassengerBonePrefix = PassengerBone:Trunk		KindOf:INFANTRY
    
    EjectPassengersOnDeath = No
  End
     
  Geometry = CYLINDER
  GeometryMajorRadius = 17.6
  GeometryHeight = 32.0
  GeometryIsSmall = No
 ; Shadow                = SHADOW_VOLUME
  Shadow = SHADOW_VOLUME_NON_SELF_2; volumetric shadow that doesn't cast onto all objects using SHADOW_VOLUME_NON_SELF_2
 ; ShadowSizeX = 45; clamp the angle so shadow isn't as long.
 ; ShadowSizeX = 14;
 ; ShadowSizeY = 14;
 ; ShadowTexture = ShadowI;
End

;------------------------------------------------------------------------------
; aka Crew Troll, MordorCrewTroll, CrewTrollMordor
Object MordorSiegeTowerCrew
	; *** ART Parameters ***

    ; This is required for garrisoned objects - please put in all objects.
	ButtonImage		= BMTrollCages_DrummerTroll
	SelectPortrait	= UPMordor_CaveTroll

	Draw = W3DScriptedModelDraw ModuleTag_01

		WadingParticleSys = EntRipples
	  	  
		OkToChangeModelColor = Yes
	  	  
		ExtraPublicBone = Trunk
		ShowShadowWhileContained = Yes

		StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD

		DefaultModelConditionState
			Model = MuCavTroll_SKN
		End
		
		ModelConditionState = JUST_BUILT
			Model = None
		End

		IdleAnimationState
			StateName = Idle
			Animation = Breathe
				AnimationName = MuCavTroll_SKL.MuCavTroll_IDLD 
				AnimationMode = LOOP
				AnimationBlendTime = 10
			End
			BeginScript
				; Show us as soon as not JUST_BUILT
				CurDrawableHideSubObject("Trunk01")
			EndScript
		End

		AnimationState = JUST_BUILT
		End

		;;; DYING ANIMATIONS ;;;	
		AnimationState = DYING DEATH_1
			Animation
				AnimationName = MuCavTroll_SKL.MuCavTroll_DIEB
				AnimationMode = ONCE
			End
			BeginScript
				CurDrawableHideSubObject("Trunk01")
			EndScript
			ParticleSysBone = B_PELVIS TrollSplatDust
			ParticleSysBone = BAT_HEAD TrollSplatDust
		End

		AnimationState = DYING
			Animation
				AnimationName     =  MuCavTroll_SKL.MuCavTroll_DIEB
				AnimationMode     = ONCE
				AnimationSpeedFactorRange = 0.8 1.2
			End
			Animation
				AnimationName     =  MuCavTroll_SKL.MuCavTroll_DIEC
				AnimationMode     = ONCE
				AnimationSpeedFactorRange = 0.8 1.2
			End
 			BeginScript
 				CurDrawableHideSubObject("Trunk01")
 			EndScript		
		End
				
		;;; PASSENGER OF SIEGE TOWER ANIMS ;;;
		; -- Turn Left Anims
		AnimationState =  TURN_LEFT PASSENGER_VARIATION_1; pushing the seige tower turning left
			Animation = Passenger_moving
				AnimationName = MuCavTroll_SKL.MuCavTroll_STNL
				AnimationMode = LOOP_BACKWARDS
				AnimationSpeedFactorRange = 1.5 1.5
				AnimationBlendTime = 15
			End
			Flags = RANDOMSTART
			BeginScript
				CurDrawableHideSubObject("Trunk01")
			EndScript
		End

		AnimationState = TURN_LEFT PASSENGER_VARIATION_2; pushing the seige tower turning left
			Animation = Passenger_moving
				AnimationName = MuCavTroll_SKL.MuCavTroll_STNL
				AnimationMode = LOOP_BACKWARDS
				AnimationSpeedFactorRange = 1.5 1.5
				AnimationBlendTime = 15
			End
			Flags = RANDOMSTART
			BeginScript
				CurDrawableHideSubObject("Trunk01")
			EndScript
		End

		; -- Turn Right Anims
		AnimationState = TURN_RIGHT PASSENGER_VARIATION_1; pushing the seige tower turning right
			Animation = Passenger_moving
				AnimationName = MuCavTroll_SKL.MUCavTroll_STNR ; MuCavTroll_PSHA
				AnimationMode = LOOP
				AnimationSpeedFactorRange = 1.5 1.5
				AnimationBlendTime = 15
			End
			Flags = RANDOMSTART
			BeginScript
				CurDrawableHideSubObject("Trunk01")
			EndScript
		End

		AnimationState = TURN_RIGHT PASSENGER_VARIATION_2; pushing the seige tower turning right
			Animation = Passenger_moving
				AnimationName = MuCavTroll_SKL.MUCavTroll_STNR ; MuCavTroll_PSHA
				AnimationMode = LOOP
				AnimationSpeedFactorRange = 1.5 1.5
				AnimationBlendTime = 15
			End
			Flags = RANDOMSTART
			BeginScript
				CurDrawableHideSubObject("Trunk01")
			EndScript
		End

		; -- Straight Backing up anim
		AnimationState = MOVING BACKING_UP ; pulling the seige tower
			Animation = Passenger_moving_back
				AnimationName = MuCavTroll_SKL.MuCavTroll_PSHA
				AnimationMode = LOOP_BACKWARDS
				AnimationSpeedFactorRange = 1.5 1.5
				AnimationBlendTime = 15
			End
			Flags = RANDOMSTART
			BeginScript
				CurDrawableHideSubObject("Trunk01")
			EndScript
		End

		; -- Straight Ahead anim
		AnimationState = MOVING ; pushing the seige tower
			Animation = Passenger_moving
				AnimationName = MuCavTroll_SKL.MuCavTroll_PSHA
				AnimationMode = LOOP
				AnimationSpeedFactorRange = 1.5 1.5
				AnimationBlendTime = 15
			End
			Flags = RANDOMSTART
			BeginScript
				CurDrawableHideSubObject("Trunk01")
			EndScript
		End

		AnimationState = PASSENGER ; idling by the grond
			Animation = Passenger
				AnimationName = MuCavTroll_SKL.MuCavTroll_IDLD
				AnimationMode = LOOP
				AnimationBlendTime = 15
			End
			Flags = RANDOMSTART
			BeginScript
				CurDrawableHideSubObject("Trunk01")
			EndScript
		End
	End

	; --------------Actual module changes--------------
	ArmorSet
		Conditions      = None
		Armor           = CavalryArmor
		DamageFX        = NormalDamageFX
	End

	Body = DelayedDeathBody ModuleTag_02
		MaxHealth				= 1000                  ;BALANCE CaveTroll Health
		;MaxHealthDamaged			= 500
		;MaxHealthReallyDamaged			= 100
		;;RecoveryTime				= 5000
		DoHealthCheck				= No			; Don't want to get the delayed death behaviour when we die normally.
		DelayedDeathTime			= 15000
		CanRespawn				= No			; Unit can't get revived.
	End

	; --------------Mountain Troll for the rest.  Can't reskin or Child since we have children.--------------
	; ***DESIGN parameters ***
	Side = Mordor
	EditorSorting = UNIT
	ThreatLevel = 2.0
	TransportSlotCount = 1
	ShowHealthInSelectionDecal = Yes

	WeaponSet
		Conditions          =  None
	End

  	VisionRange = VISION_STANDARD_MELEE
  	ShroudClearingRange = SHROUD_CLEAR_STANDARD

	BountyValue = MORDOR_TROLL_BOUNTY_VALUE
	DisplayName = OBJECT:MordorMountainTroll
	CrushableLevel = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
	CrusherLevel = 0 ;What can I crush?: 0 = small animals, 1 = infantry, 2 = trees, 3 = vehicles
	CommandPoints = 1
 

	; *** AUDIO Parameters ***;

	VoiceAttack			= TrollVoiceAttack
	VoiceCreated		= CampOrcCreateMountainTroll
	VoiceFullyCreated 	= CampOrcCreateMountainTroll
	VoiceMove			= TrollVoiceMove
	VoicePriority		= 19
	VoiceSelect			= TrollVoiceSelect
	VoiceGuard			= TrollVoiceMove
	
	SoundImpact			= ImpactHorse			;TrollDie

	;UnitSpecificSounds
  	;	VoiceGarrison        	= NoSound
  	;End

	EvaEventDamagedOwner		= UnitUnderAttack 		;Eva event to trigger when unit is damaged

	Behavior = LargeGroupAudioUpdate ModuleTag_LGAU		;Tie into LargeGroupAudio system
  		Key = Troll
		;UnitWeight = 2 ; Trollsie counts as 2 infantry when computing group size
	End

	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		MaxUpdateRangeCap = 800
		AnimationSound = Sound:TrollBodyfall		Animation:MuCavTroll_SKL.MuCavTroll_DIEB	Frames:29
		AnimationSound = Sound:TrollBodyfall		Animation:MuCavTroll_SKL.MuCavTroll_DIEC	Frames:85

		AnimationSound = Sound:SiegeTowerTrollFootstep	Animation:MuCavTroll_SKL.MuCavTroll_PSHA	Frames:20 22 43 45
		AnimationSound = Sound:SiegeTowerTrollFootstep	Animation:MuCavTroll_SKL.MuCavTroll_STNL	Frames:19 21 41 43
		AnimationSound = Sound:SiegeTowerTrollFootstep	Animation:MuCavTroll_SKL.MuCavTroll_STNR	Frames:19 21 41 43
	End


  ; *** ENGINEERING Parameters ***

	RadarPriority = UNIT
	KindOf = PRELOAD CAN_CAST_REFLECTIONS MONSTER WORKING_PASSENGER PATH_THROUGH_INFANTRY 
 
    BuildCost = MORDOR_TROLL_BUILDCOST
    BuildTime = MORDOR_TROLL_BUILDTIME

    ; Should match the siege tower value.
	BuildFadeInOnCreateTime = 16.0

 	Behavior LifetimeUpdate LifetimeTag
		WaitForWakeUp	=	Yes
	End
   
	Behavior = AIUpdateInterface ModuleTag_03
		AutoAcquireEnemiesWhenIdle = Yes ATTACK_BUILDINGS
		AILuaEventsList = TrollFunctions
	End

	LocomotorSet
		Locomotor = TrollLocomotor
		Condition = SET_NORMAL 
		Speed     = 33
	End

	Behavior = PhysicsBehavior ModuleTag_04
		GravityMult = 0.0 ;1.0
	End
  
 
	Behavior = SlowDeathBehavior ModuleTag_50
		DeathTypes = ALL
		DestructionDelay = 35000
		DecayBeginTime = 3000
		SinkDelay = 10000
		SinkRate = 0.64     ; in Dist/Sec
		Sound = INITIAL TrollDie
		ProbabilityModifier = 50
		DeathFlags   = DEATH_1 ; Tell model which death animation to play. Sets BOTH model condition and object status bits.
	End

	Behavior = SlowDeathBehavior ModuleTag_51
		DeathTypes = ALL
		DestructionDelay = 35000
		DecayBeginTime = 3000
		SinkDelay = 10000
		SinkRate = 0.64     ; in Dist/Sec
		Sound = INITIAL TrollDie
		ProbabilityModifier = 50
		DeathFlags   = DEATH_2 ; Tell model which death animation to play. Sets BOTH model condition and object status bits.
	End

	Geometry = CYLINDER
	GeometryMajorRadius = 10
	GeometryHeight = 20
	GeometryIsSmall = No
	Shadow                = SHADOW_VOLUME
End

;------------------------------------------------------------------------------
; aka Cave Troll, MordorCaveTroll, CaveTrollMordor
Object MordorCaveTroll
  ; *** ART Parameters ***

    ; This is required for garrisoned objects - please put in all objects.
	ButtonImage		= BMTrollCages_DrummerTroll
	SelectPortrait	= UPMordor_CaveTroll

  Draw = W3DScriptedModelDraw ModuleTag_01
  	  
    OkToChangeModelColor = Yes
  	  
    ExtraPublicBone = Trunk
    ShowShadowWhileContained = Yes

    StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD

    DefaultModelConditionState
		Model = MuCavTroll_SKN
		WeaponLaunchBone = PRIMARY Firepoint
	End

	IdleAnimationState
		StateName = Idle
		Animation = Breathe
			AnimationName = MuCavTroll_SKL.MuCavTroll_IDLA 
			AnimationMode = ONCE
			AnimationBlendTime = 10
			AnimationPriority = 40
		End
		Animation = BellyScratch
			AnimationName = MuCavTroll_SKL.MuCavTroll_IDLC 
			AnimationMode = ONCE
			AnimationBlendTime = 10
			AnimationPriority = 10
		End
		Animation = RubHead
			AnimationName = MuCavTroll_SKL.MuCavTroll_IDLK 
			AnimationMode = ONCE
			AnimationBlendTime = 10
			AnimationPriority = 10
		End
		Animation = LittleRoar
			AnimationName = MuCavTroll_SKL.MuCavTroll_IDLM 
			AnimationMode = ONCE
			AnimationBlendTime = 10
			AnimationPriority = 3
		End
		Animation = WipeNose
			AnimationName = MuCavTroll_SKL.MuCavTroll_IDLN 
			AnimationMode = ONCE
			AnimationBlendTime = 10
			AnimationPriority = 10
		End
		Flags						= RESTART_ANIM_WHEN_COMPLETE		
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "Throw"	then CurDrawableSetTransitionAnimState("Trans_Throwing_To_Ready") return end	
		EndScript
	End

	; Splatted death goes first, independant of death flags
	ModelConditionState    = DYING DECAY SPLATTED
		Model                = MUCavTroll_DISA
		RetainSubObjects = Yes
	End;

	AnimationState         = DYING DECAY SPLATTED 
		Animation            = dead1
			AnimationName       = MUCavTroll_DISA.MUCavTroll_DISA
			AnimationMode      = ONCE
		End
	End

	ModelConditionState    = DYING DECAY DEATH_1
		Model                = MUCavTroll_DISB
		RetainSubObjects = Yes
	End;

	AnimationState         = DYING DECAY DEATH_1 
		Animation            = dead1
			AnimationName       = MUCavTroll_DISB.MUCavTroll_DISB
			AnimationMode      = ONCE
		End
	End

	ModelConditionState    = DYING DECAY DEATH_2
		Model                = MUCavTroll_DISC
		RetainSubObjects = Yes
	End;

	AnimationState         = DYING DECAY DEATH_2 
		Animation            = dead1
			AnimationName       = MUCavTroll_DISC.MUCavTroll_DISC
			AnimationMode      = ONCE
		End
	End

	; Flailing must go before dying in case we are dead in the air
	AnimationState = STUNNED_FLAILING
		Animation
			AnimationName = MuCavTroll_SKL.MuCavTroll_FLYA
			AnimationMode = LOOP
		End
	End

	;;; DYING ANIMATIONS ;;;	
	AnimationState = DYING SPLATTED
		Animation
			AnimationName = MuCavTroll_SKL.MuCavTroll_LNDA
			AnimationMode = ONCE
		End
	End

	AnimationState = DYING DEATH_1
		Animation
			AnimationName = MuCavTroll_SKL.MuCavTroll_DIEB
			AnimationMode = ONCE
		End

			ParticleSysBone = B_PELVIS TrollSplatDust
			ParticleSysBone = BAT_HEAD TrollSplatDust
	End

	AnimationState = DYING DEATH_2
		Animation
			AnimationName = MuCavTroll_SKL.MuCavTroll_DIEC
			AnimationMode = ONCE
		End

			ParticleSysBone = BAT_SPINE1 TrollSplatDust1
			ParticleSysBone = BAT_HEAD TrollSplatDust1
	End

	AnimationState = DYING
		Animation
			AnimationName     =  MuCavTroll_SKL.MuCavTroll_DIEC
			AnimationMode     = ONCE
		End
	End
			
	AnimationState				= STUNNED_STANDING_UP
		Animation				= MuCavTroll_GTPA
			AnimationName		= MuCavTroll_SKL.MuCavTroll_GTPA
			AnimationMode		= ONCE
		End
	End	

	AnimationState				= STUNNED
		Animation
			AnimationName = MuCavTroll_SKL.MuCavTroll_LNDA
			AnimationMode = ONCE
		End
		ParticleSysBone = B_PELVIS TrollSplatDust2
		ParticleSysBone = BAT_HEAD TrollSplatDust2
	End
	
	;;; PASSENGER OF SIEGE TOWER ANIMS ;;;
	AnimationState = PASSENGER MOVING BACKING_UP; pulling the seige tower or grond
			Animation = Passenger_moving
			AnimationName = MuCavTroll_SKL.MuCavTroll_PSHA ; MuCavTroll_PSHA
			AnimationMode = LOOP_BACKWARDS
			AnimationSpeedFactorRange = 2.0 2.0
		End
		Flags = RANDOMSTART
	End

	AnimationState = PASSENGER MOVING ; pushing the seige tower
			Animation = Passenger_moving
			AnimationName = MuCavTroll_SKL.MuCavTroll_PSHA
			AnimationMode = LOOP
			AnimationSpeedFactorRange = 1.5 1.5
		End
		Flags = RANDOMSTART
	End

	AnimationState = PASSENGER ; idling by the grond
		Animation = Passenger
			AnimationName = MuCavTroll_SKL.MuCavTroll_IDLD
			AnimationMode = LOOP
			AnimationBlendTime = 15
		End
		Flags = RANDOMSTART
	End

	;--- bop our friends on the head
	AnimationState = SPECIAL_WEAPON_ONE
		Animation = Punch
			AnimationName = MuCavTroll_SKL.MuCavTroll_ATKF
			AnimationMode = ONCE
		End
		Animation = Backhand
			AnimationName = MuCavTroll_SKL.MuCavTroll_ATKG
			AnimationMode = ONCE
		End			
	End
				
	;--Troll is angry
	AnimationState = WEAPONSET_RAMPAGE
		Animation = GetMad
				AnimationName = MuCavTroll_SKL.MuCavTroll_RPGC
				AnimationMode = LOOP
			End
		End

    ; --------- With Club ------------

	AnimationState = FIRING_OR_PREATTACK_A WEAPONSTATE_ONE
;		Animation
;			; Taking this one out since it doesn't work with the logic of the attack, which is a 180 knockback (this one is vertical clubbing, could be used as anti-monster anim, not anti bunch of inf)
;			AnimationName = MuCavTroll_SKL.MuCavTroll_ATKB
;			AnimationMode = ONCE
;			UseWeaponTiming		= Yes
;		End
		Animation
			AnimationName = MuCavTroll_SKL.MuCavTroll_ATKC
			AnimationMode = ONCE
			UseWeaponTiming		= Yes
		End
		Animation
			AnimationName = MuCavTroll_SKL.MuCavTroll_ATKD
			AnimationMode = ONCE
			UseWeaponTiming		= Yes
		End
	End


	AnimationState = TURN_LEFT WEAPONSTATE_ONE
		Animation = Moving
			AnimationName = MuCavTroll_SKL.MuCavTroll_TRNL
			AnimationMode = LOOP
			AnimationBlendTime = 10
		End
		ParticleSysBone = None InfantryDustTrails
		BeginScript ; Here since normal Packing state can be skipped with a fast click.
			CurDrawableShowSubObjectPermanently("Trunk01")
		EndScript
	End

	AnimationState = TURN_RIGHT WEAPONSTATE_ONE
		Animation = Moving
			AnimationName = MuCavTroll_SKL.MuCavTroll_TRNR
			AnimationMode = LOOP
			AnimationBlendTime = 10
		End
		ParticleSysBone = None InfantryDustTrails
		BeginScript ; Here since normal Packing state can be skipped with a fast click.
			CurDrawableShowSubObjectPermanently("Trunk01")
		EndScript
	End

		AnimationState = MOVING WEAPONSTATE_ONE ATTACKING
			Animation
				AnimationName = MuCavTroll_SKL.MuCavTroll_RUNA  ; Running with club
				AnimationMode = LOOP
				AnimationSpeedFactorRange = 0.77 0.77
			End
			Flags               = RANDOMSTART
			ParticleSysBone     = None InfantryDustTrails
			FXEvent	= Frame:5 Name:FX_TrollRightFootStep
			FXEvent	= Frame:18 Name:FX_TrollLeftFootStep
		End

		AnimationState = MOVING WEAPONSTATE_ONE DAMAGED
			Animation
	AnimationName = MuCavTroll_SKL.MuCavTroll_WLKB ; Walking with club
		AnimationMode = LOOP
			AnimationSpeedFactorRange = 1.3 1.3
		End
		Flags               = RANDOMSTART
		ParticleSysBone     = None InfantryDustTrails
		FXEvent	= Frame:0 Name:FX_TrollRightFootStep
		FXEvent	= Frame:20 Name:FX_TrollLeftFootStep
	End

		AnimationState = MOVING WEAPONSTATE_ONE
			Animation
	      			AnimationName = MuCavTroll_SKL.MuCavTroll_WLKD ; Walking with club 
		    		AnimationMode = LOOP
	      			AnimationSpeedFactorRange = 1.36 1.36
			End
			Flags               = RANDOMSTART
			ParticleSysBone     = None InfantryDustTrails
			FXEvent	= Frame:0 Name:FX_TrollRightFootStep
			FXEvent	= Frame:23 Name:FX_TrollLeftFootStep


		BeginScript ; Here since normal Packing state can be skipped with a fast click.
			CurDrawableShowSubObjectPermanently("Trunk01")
		EndScript
    End

	AnimationState = FIRING_OR_PREATTACK_A WEAPONSTATE_ONE
;		Animation
;			; Taking this one out since it doesn't work with the logic of the attack, which is a 180 knockback (this one is vertical clubbing, could be used as anti-monster anim, not anti bunch of inf)
;			AnimationName = MuCavTroll_SKL.MuCavTroll_ATKB
;			AnimationMode = ONCE
;			UseWeaponTiming		= Yes
;		End
		Animation
			AnimationName = MuCavTroll_SKL.MuCavTroll_ATKC
			AnimationMode = ONCE
			UseWeaponTiming		= Yes
		End
		Animation
			AnimationName = MuCavTroll_SKL.MuCavTroll_ATKD
			AnimationMode = ONCE
			UseWeaponTiming		= Yes
		End
	End

    AnimationState = PREPARING WEAPONSTATE_ONE
			Animation
				AnimationName = MuCavTroll_SKL.MuCavTroll_GRBC
				AnimationMode = ONCE
			End
		End

    AnimationState = PACKING WEAPONSTATE_ONE
		Animation
			AnimationName = MuCavTroll_SKL.MuCavTroll_GRBD
			AnimationMode = ONCE
		End
		BeginScript 
			CurDrawableShowSubObjectPermanently("Trunk01")
		EndScript
	End

	AnimationState = EMOTION_CELEBRATING WEAPONSTATE_ONE
		Animation = DeepRoar
			AnimationName	=	MuCavTroll_SKL.MuCavTroll_IDLF
			AnimationMode	=	LOOP
		End
	End

     AnimationState = USER_2 WEAPONSTATE_ONE
 		Animation = ReactToTrollPoke ; The two comes from the special TrollBored weapon
 			AnimationName = MuCavTroll_SKL.MuCavTroll_HITD
 			AnimationMode = ONCE
 		End
     End
 
	AnimationState = WEAPONSTATE_ONE	;Idle with club
		Animation = BreathWithClub
			AnimationName = MuCavTroll_SKL.MuCavTroll_IDLB
			AnimationMode = ONCE
			AnimationPriority = 30
			AnimationSpeedFactorRange = 0.8 1.0
		End
		Animation = BreathWithClub
			AnimationName = MuCavTroll_SKL.MuCavTroll_IDLB
			AnimationMode = ONCE
			AnimationPriority = 30
			AnimationSpeedFactorRange = 0.8 1.0
		End
		Animation = RoarAndThumpClub
			AnimationName = MuCavTroll_SKL.MuCavTroll_IDLE  
			AnimationMode = ONCE
			AnimationPriority = 5
			AnimationBlendTime = 3
		End
		Animation = ScratchButt
			AnimationName = MuCavTroll_SKL.MuCavTroll_IDLG  
			AnimationMode = ONCE
			AnimationPriority = 2
			AnimationBlendTime = 3
		End
		Flags = RESTART_ANIM_WHEN_COMPLETE
		BeginScript ; Here since normal Packing state can be skipped with a fast click.
			CurDrawableShowSubObjectPermanently("Trunk01")
		EndScript
	End

; --------- With Rock or Infantry ------------

	AnimationState = MOVING WEAPONSTATE_TWO ATTACKING
		Animation
			AnimationName = MuCavTroll_SKL.MuCavTroll_RUNA 
			AnimationMode = LOOP
			AnimationSpeedFactorRange = 0.77 0.77
		End
		Flags = RANDOMSTART
		ParticleSysBone = None InfantryDustTrails
			FXEvent	= Frame:5 Name:FX_TrollRightFootStep
			FXEvent	= Frame:18 Name:FX_TrollLeftFootStep
	End

	AnimationState = MOVING WEAPONSTATE_TWO DAMAGED
		Animation
			AnimationName = MuCavTroll_SKL.MuCavTroll_WLKB 
			AnimationMode = LOOP
			AnimationSpeedFactorRange = 1.3 1.3
		End
		Flags = RANDOMSTART
		ParticleSysBone = None InfantryDustTrails
		FXEvent	= Frame:0 Name:FX_TrollRightFootStep
		FXEvent	= Frame:20 Name:FX_TrollLeftFootStep
	End

	AnimationState = MOVING WEAPONSTATE_TWO
		Animation
			AnimationName = MuCavTroll_SKL.MuCavTroll_WLKA 
			AnimationMode = LOOP
			AnimationSpeedFactorRange = 1.36 1.36
		End
		Flags = RANDOMSTART
		ParticleSysBone = None InfantryDustTrails
			FXEvent	= Frame:0 Name:FX_TrollRightFootStep
			FXEvent	= Frame:16 Name:FX_TrollLeftFootStep
	End

	AnimationState = FIRING_OR_PREATTACK_A USING_WEAPON_A
		Animation
			AnimationName = MuCavTroll_SKL.MuCavTroll_THRA
			AnimationMode = ONCE
			UseWeaponTiming = Yes
			AnimationBlendTime = 0
		End
		FrameForPristineBonePositions = 16
		StateName = Throw
	End
	
	AnimationState = FIRING_OR_PREATTACK_A WEAPONSTATE_TWO
		Animation
			AnimationName = MuCavTroll_SKL.MuCavTroll_THRA
			AnimationMode = ONCE
			UseWeaponTiming = Yes
			AnimationBlendTime = 0
		End
		FrameForPristineBonePositions = 21
		StateName = Throw
	End
	
	AnimationState = FIRING_OR_PREATTACK_B WEAPONSTATE_TWO
		Animation
			AnimationName = MuCavTroll_SKL.MuCavTroll_THRA
			AnimationMode = ONCE
			UseWeaponTiming = Yes
			AnimationBlendTime = 0
		End
		FrameForPristineBonePositions = 21
		StateName = Throw
	End

	AnimationState = PACKING WEAPONSTATE_TWO
		Animation
			AnimationName = MuCavTroll_SKL.MuCavTroll_GRBB
			AnimationMode = ONCE
		End
		ParticleSysBone	= BAT_HANDR TrollRockBounceSmall FollowBone:no
		ParticleSysBone	= BAT_HANDR TrollRockPickup FollowBone:no
	End

	;Building attack, which you can do with a rock in yo hand
	AnimationState = FIRING_OR_PREATTACK_C WEAPONSTATE_TWO
		Animation
			AnimationName = MuCavTroll_SKL.MuCavTroll_ATKJ
			AnimationMode = ONCE
			UseWeaponTiming		= Yes
		End
	End

	AnimationState = TURN_LEFT WEAPONSTATE_TWO
		Animation = Moving
			AnimationName = MUCavTroll_SKL.MUCavTroll_TRNL
			AnimationMode = LOOP
			AnimationBlendTime = 10
		End
		ParticleSysBone = None InfantryDustTrails
	End

	AnimationState = TURN_RIGHT WEAPONSTATE_TWO
		Animation = Moving
			AnimationName = MUCavTroll_SKL.MUCavTroll_TRNR
			AnimationMode = LOOP
			AnimationBlendTime = 10
		End
		ParticleSysBone = None InfantryDustTrails
	End

     AnimationState = USER_2 WEAPONSTATE_TWO
 		Animation = ReactToTrollPoke ; The two comes from the special TrollBored weapon
 			AnimationName = MuCavTroll_SKL.MuCavTroll_HITD
 			AnimationMode = ONCE
 		End
     End
 
	AnimationState = WEAPONSTATE_TWO
		Animation = BreatheWithRock
			AnimationName = MuCavTroll_SKL.MuCavTroll_IDLB
			AnimationMode = LOOP
			AnimationSpeedFactorRange = 0.8 1.0
		End
		Animation = ScratchButt
			AnimationName = MuCavTroll_SKL.MuCavTroll_IDLG  
			AnimationMode = ONCE
			AnimationPriority = 1
			AnimationBlendTime = 3
		End
		Flags = RESTART_ANIM_WHEN_COMPLETE
	End

	; --------- With Bare Hands ------------
	AnimationState = UNPACKING
		Animation
			AnimationName = MuCavTroll_SKL.MuCavTroll_GRBA
			AnimationMode = ONCE
		End
	End

	AnimationState = TURN_LEFT
		Animation = Moving
			AnimationName = MuCavTroll_SKL.MuCavTroll_TRNL
			AnimationMode = LOOP
			AnimationBlendTime = 10
		End
		ParticleSysBone = None InfantryDustTrails
	End

	AnimationState = TURN_RIGHT
		Animation = Moving
			AnimationName = MuCavTroll_SKL.MuCavTroll_TRNR
			AnimationMode = LOOP
			AnimationBlendTime = 10
		End
		ParticleSysBone = None InfantryDustTrails
	End

	AnimationState = MOVING ATTACKING
		Animation = Charging
			AnimationName = MuCavTroll_SKL.MuCavTroll_RUNB
			AnimationMode = LOOP
			AnimationSpeedFactorRange = 0.8 0.8
		End
		Flags = RANDOMSTART
		ParticleSysBone = None InfantryDustTrails
			FXEvent	= Frame:5 Name:FX_TrollRightFootStep
			FXEvent	= Frame:18 Name:FX_TrollLeftFootStep
	End

	; Normal fist attacks
	AnimationState = FIRING_OR_PREATTACK_B
		Animation
			AnimationName = MuCavTroll_SKL.MuCavTroll_ATKA
			AnimationMode = ONCE
			UseWeaponTiming		= Yes
		End
		Animation
			AnimationName = MuCavTroll_SKL.MuCavTroll_ATKE
			AnimationMode = ONCE
			UseWeaponTiming		= Yes
		End
	End

	;Building attack
	AnimationState = FIRING_OR_PREATTACK_C
		Animation
			AnimationName = MuCavTroll_SKL.MuCavTroll_ATKJ
			AnimationMode = ONCE
			UseWeaponTiming		= Yes
		End
	End
		
	AnimationState				= MOVING PANICKING
		Animation				= RUNM
			AnimationName		=  MuCavTroll_SKL.MuCavTroll_MFDA
			AnimationMode		= LOOP
		End
		Flags					= RANDOMSTART
	End
	
    AnimationState = MOVING DAMAGED
		Animation = Moving_Damaged
			AnimationName = MuCavTroll_SKL.MuCavTroll_WLKB
			AnimationMode = LOOP
		End
		Flags = RANDOMSTART
		ParticleSysBone = None InfantryDustTrails
		FXEvent	= Frame:0 Name:FX_TrollRightFootStep
		FXEvent	= Frame:20 Name:FX_TrollLeftFootStep
	End

	AnimationState = MOVING
		Animation = Moving
			AnimationName = MuCavTroll_SKL.MuCavTroll_WLKB
			AnimationMode = LOOP
			AnimationBlendTime = 10
		End
		Flags = RANDOMSTART
		ParticleSysBone = None InfantryDustTrails
		FXEvent	= Frame:0 Name:FX_TrollRightFootStep
		FXEvent	= Frame:20 Name:FX_TrollLeftFootStep
	End

	AnimationState = ENGAGED
		Animation
			AnimationName = MuCavTroll_SKL.MuCavTroll_IDLA
			AnimationMode = LOOP
		End
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "Throw"	then CurDrawableSetTransitionAnimState("Trans_Throwing_To_Ready") return end	
		EndScript
	End
	
; --------- Just built ------------
		
	AnimationState = JUST_BUILT
		Animation
			AnimationName = MuCavTroll_SKL.MuCavTroll_WLKC ; temp
			AnimationMode = ONCE
			AnimationBlendTime = 0
	        AnimationSpeedFactorRange = 0.9 0.9			
		End	
	End	

; --------- Click and Hit Reactions ------------
		
    AnimationState = HIT_REACTION HIT_LEVEL_1
			Animation = Hit_Level_1_a
	      AnimationName = MuCavTroll_SKL.MuCavTroll_HITD
		    AnimationMode = ONCE
			End
    End

    AnimationState = HIT_REACTION HIT_LEVEL_2
			Animation = Hit_Level_2
	      AnimationName = MuCavTroll_SKL.MuCavTroll_HITC
		    AnimationMode = ONCE
			End
    End

    AnimationState = HIT_REACTION HIT_LEVEL_3
			Animation = Hit_Level_3
	      AnimationName = MuCavTroll_SKL.MuCavTroll_HITA
		    AnimationMode = ONCE
			End
    End

    AnimationState = REACT_1
			Animation = Click_React_1
	      AnimationName = MuCavTroll_SKL.MuCavTroll_RCTA
		    AnimationMode = ONCE
			End
    End

    AnimationState = REACT_2
			Animation = Click_React_2
	      AnimationName = MuCavTroll_SKL.MuCavTroll_RCTB
		    AnimationMode = ONCE
			End
    End

    AnimationState = REACT_3
			Animation = Click_React_3
	      AnimationName = MuCavTroll_SKL.MuCavTroll_RCTC
		    AnimationMode = ONCE
			End
    End

    AnimationState = REACT_4
			Animation = Click_React_4
	      AnimationName = MuCavTroll_SKL.MuCavTroll_RCTD
		    AnimationMode = ONCE
			End
    End

    AnimationState = REACT_5
			Animation = Click_React_5
	      AnimationName = MuCavTroll_SKL.MuCavTroll_RCTE
		    AnimationMode = ONCE
			End
    End
    
    AnimationState = USER_2
		Animation = ReactToTrollPoke ; The two comes from the special TrollBored weapon
			AnimationName = MuCavTroll_SKL.MuCavTroll_HITA
			AnimationMode = ONCE
		End
    End

;-----------------------------------
;Emotion

	AnimationState = EMOTION_CELEBRATING
		Animation
			AnimationName	=	MuCavTroll_SKL.MuCavTroll_IDLF
			AnimationMode	=	LOOP
		End
	End
  End



; --------------Actual module changes--------------
	ArmorSet
		Conditions      = None
		Armor           = TrollArmor
		DamageFX        = NormalDamageFX
	End

	Body = DelayedDeathBody ModuleTag_02
		MaxHealth				= CAVE_TROLL_HEALTH ;BALANCE CaveTroll Health
		MaxHealthDamaged			= 250
		MaxHealthReallyDamaged			= 100
		;;RecoveryTime				= 5000
		DoHealthCheck				= No			; Don't want to get the delayed death behaviour when we die normally.
		DelayedDeathTime			= 5000
		CanRespawn				= No			; Unit can't get revived.
	End

	Behavior = AutoPickUpUpdate AutoPickUpModuleTagOne ; Removed Eating since Cave Trolls don't have eating anims
		ScanDelayTime = 40000
		ScanDistance = 70;		default value is 300 units 
		
		Bored = Yes	; look for someone to hit with the BoredSpecialPower
		BoredFilter = NONE +MordorMountainTroll +MordorCaveTroll
	End
	
; One change is the removal of:	 
;	Behavior = AutoPickUpUpdate AutoPickUpForTastyOrcs ; There is a seperate AutoPickUp that runs without a button
;		ScanDelayTime = 40000
;		ScanDistance = 70;		default value is 300 units 
;		Bored = Yes
;		EatObjectEntry = MyHealth:80% TargetHealth:100% Filter:NONE +ORC		;When I'm below x% of my max health, I will look for an object to eat.
;		
;		RunFromButton = Yes ; No natural scanning, wakes up to run exactly once when hit with a WakeAutoPickup button
;		RunFromButtonNumber = 3; In case of multiples, this lines up with the OPTION_(ONE) field in the waking button
;	End
; And replacing with the no-eat version.
	Behavior = AutoPickUpUpdate AutoPickUpForOrcsToHold
		ScanDelayTime = 0
		ScanDistance = 300		;default value is 300 units	
		PickUpKindOf = ORC
		
		RunFromButton = Yes ; No natural scanning, wakes up to run exactly once when hit with a WakeAutoPickup button
		RunFromButtonNumber = 3; In case of multiples, this lines up with the OPTION_(ONE) field in the waking button
	End

	CommandSet = CaveTrollCommandSet
  
; --------------Mountain Troll for the rest.  Can't reskin or Child since we have children.--------------
  ; ***DESIGN parameters ***
  Side = Mordor
	IsTrainable		= No
  EditorSorting = UNIT
	ThreatLevel = 2.0
	TransportSlotCount = 1
	ShowHealthInSelectionDecal = Yes

	WeaponSet
		Conditions          =  None
		Weapon              =  PRIMARY    MordorCaveTrollRockThrow
		Weapon              =  SECONDARY  MordorCaveTrollPunch
		Weapon              =  TERTIARY   MordorCaveTrollBash
		PreferredAgainst	= PRIMARY STRUCTURE BLOCKING_GATE		; Preferred is more powerful than Only, so if we have a rock we will chuck it, but otherwise we will choke a building
		OnlyAgainst         =  TERTIARY   STRUCTURE BLOCKING_GATE
	End

	WeaponSet
		Conditions          = RAMPAGE
		Weapon              = PRIMARY  MordorCaveTrollRampage
	End

	WeaponSet
		Conditions          = RAMPAGE PASSENGER_TYPE_ONE
		Weapon              = PRIMARY  MordorCaveTrollTreeRampage
	End

	WeaponSet
		Conditions          = PASSENGER_TYPE_ONE 
		Weapon              = PRIMARY     MordorCaveTrollClubSwing
	End
		
	VisionRange = VISION_STANDARD_MELEE
	ShroudClearingRange = SHROUD_CLEAR_STANDARD

	BountyValue = MORDOR_TROLL_BOUNTY_VALUE
	DisplayName = OBJECT:MordorCaveTroll
	CrushableLevel = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
	CrusherLevel = 0 ;What can I crush?: 0 = small animals, 1 = infantry, 2 = trees, 3 = vehicles
	CommandPoints = 1
 

	; *** AUDIO Parameters ***;

	VoiceAttack			= TrollVoiceAttack
	VoiceCreated			= CampOrcCreateMountainTroll
	VoiceFullyCreated 		= CampOrcCreateMountainTroll
	VoiceMove			= TrollVoiceMove
	VoicePriority			= 19
	VoiceSelect			= TrollVoiceSelect
	VoiceGuard			= TrollVoiceMove
	

	SoundImpact			= ImpactHorse			;TrollDie

	;UnitSpecificSounds
  	;	VoiceGarrison        	= NoSound
  	;End

	EvaEventDamagedOwner		= UnitUnderAttack 		;Eva event to trigger when unit is damaged

	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		MaxUpdateRangeCap = 800
		AnimationSound = Sound:TrollBodyfall		Animation:MUCavTroll_SKL.MUCavTroll_DieB Frames:33
		AnimationSound = Sound:TrollBodyfall		Animation:MUCavTroll_SKL.MUCavTroll_DieC Frames:84
		AnimationSound = Sound:TrollBodyfall		Animation:MUCavTroll_SKL.MUCavTroll_LndA Frames:3 21
		AnimationSound = Sound:TrollIdleRubHeadVox	Animation:MUCavTroll_SKL.MUCavTroll_IDLK Frames:0
		AnimationSound = Sound:TrollBodyfall		Animation:MUCavTroll_SKL.MUCavTroll_RCTB Frames:3

		AnimationSound = Sound:TrollRoar Animation:MUCavTroll_SKL.MUCavTroll_IDLE Frames:10 Animation:MUCavTroll_SKL.MUCavTroll_IDLG Frames:78 Animation:MUCavTroll_SKL.MUCavTroll_IDLK Frames:0 Animation:MUCavTroll_SKL.MUCavTroll_IDLM Frames:0 Animation:MUCavTroll_SKL.MUCavTroll_ATKA Frames:12 Animation:MUCavTroll_SKL.MUCavTroll_ATKC Frames:17 Animation:MUCavTroll_SKL.MUCavTroll_ATKD Frames:10 Animation:MUCavTroll_SKL.MUCavTroll_ATKE Frames:14 Animation:MUCavTroll_SKL.MUCavTroll_ATKF Frames:3 Animation:MUCavTroll_SKL.MUCavTroll_ATKG Frames:13 Animation:MUCavTroll_SKL.MUCavTroll_HITC Frames:21 Animation:MUCavTroll_SKL.MUCavTroll_HITD Frames:10 Animation:MUCavTroll_SKL.MUCavTroll_MFDA Frames:47 Animation:MUCavTroll_SKL.MUCavTroll_RCTD Frames:29 Animation:MUCavTroll_SKL.MUCavTroll_RCTE Frames:53 Animation:MUCavTroll_SKL.MUCavTroll_RPGC Frames:0 32 59 88
		AnimationSound = Sound:TrollIdleYell01 Animation:MUCavTroll_SKL.MUCavTroll_IDLF Frames:37
		AnimationSound = Sound:TrollTreeShakeYell Animation:MUCavTroll_SKL.MUCavTroll_GRBA Frames:14  Animation:MUCavTroll_SKL.MUCavTroll_GRBB Frames:12 
		AnimationSound = Sound:TrollTreeShakeYell Animation:MUCavTroll_SKL.MUCavTroll_GRBC Frames:26  Animation:MUCavTroll_SKL.MUCavTroll_GRBD Frames:28 
		AnimationSound = Sound:TrollFootstep Animation:MUCavTroll_SKL.MUCavTroll_RUNA Frames:4 17  Animation:MUCavTroll_SKL.MUCavTroll_RUNB Frames:4 17  Animation:MUCavTroll_SKL.MUCavTroll_WLKA Frames:0 15  Animation:MUCavTroll_SKL.MUCavTroll_WLKB Frames:0 20  Animation:MUCavTroll_SKL.MUCavTroll_WLKD Frames:0 22 Animation:MUCavTroll_SKL.MUCavTroll_TRNL Frames:15 27 Animation:MUCavTroll_SKL.MUCavTroll_TRNR Frames:15 27 Animation:MUCavTroll_SKL.MUCavTroll_RCTD Frames:7 66 Animation:MUCavTroll_SKL.MUCavTroll_GTPA Frames:12 80 97 Animation:MUCavTroll_SKL.MUCavTroll_MFDA Frames:4 17 29 42 
		AnimationSound = Sound:TrollFootstepRampage Animation:MUCavTroll_SKL.MUCavTroll_RPGC Frames:43 61 77 93 100 116 123 139 149
		AnimationSound = Sound:TrollTreeSwingLight Animation:MUCavTroll_SKL.MUCavTroll_IDLE Frames:49 Animation:MUCavTroll_SKL.MUCavTroll_RPGC Frames:112 ;Animation:MUCavTroll_SKL.MUCavTroll_THPA Frames:16 Animation:MUCavTroll_SKL.MUCavTroll_MFDA Frames:2 22
		AnimationSound = Sound:TrollGrabRock Animation:MuCavTroll_SKL.MuCavTroll_GRBB Frames:0
		AnimationSound = Sound:TrollGetupShakeHeadVox Animation:MuCavTroll_SKL.MuCavTroll_GTPA Frames:31
		AnimationSound = Sound:ImpactTrollTreeLight Animation:MUCavTroll_SKL.MUCavTroll_IDLE Frames:55
	End

	Behavior = LargeGroupAudioUpdate ModuleTag_LGAU			;Tie into LargeGroupAudio system
	  	Key = Troll
		;UnitWeight = 2 ; Trollsie counts as 2 infantry when computing group size
	End


	; *** ENGINEERING Parameters ***

	RadarPriority = UNIT
	KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS TROLL MONSTER SCORE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT WORKING_PASSENGER NO_FREEWILL_ENTER PATH_THROUGH_INFANTRY SCARY CAN_ATTACK_WALLS
 
    BuildCost = MORDOR_TROLL_BUILDCOST
    BuildTime = MORDOR_TROLL_BUILDTIME

 	Behavior LifetimeUpdate LifetimeTag
		WaitForWakeUp	=	Yes
	End
   
	Behavior = AIUpdateInterface ModuleTag_03
		AutoAcquireEnemiesWhenIdle = Yes ATTACK_BUILDINGS
		AILuaEventsList = TrollFunctions
		RampageTime		=	4470
		AttackPriority				= AttackPriority_Cavalry
	End

	Behavior = AutoPickUpUpdate AutoPickUpForRocks
		ScanDelayTime = 0
		ScanDistance = 300;		default value is 300 units	
		PickUpKindOf = ROCK_VENDOR ; Not Rock, because this module finds someone to hit with the GrabPassenger power, and in there is where vendor is handled
		
		RunFromButton = Yes ; No natural scanning, wakes up to run exactly once when hit with a WakeAutoPickup button
		RunFromButtonNumber = 1; In case of multiples, this lines up with the OPTION_(ONE) field in the waking button
	End

	Behavior = AutoPickUpUpdate AutoPickUpForTrees
		ScanDelayTime = 0
		ScanDistance = 300		;default value is 300 units	
		PickUpKindOf = TREE		;Slightly tricky since trees don't exist.  This will trigger the special stuff you have to do to grab a tree.
		
		RunFromButton = Yes ; No natural scanning, wakes up to run exactly once when hit with a WakeAutoPickup button
		RunFromButtonNumber = 2; In case of multiples, this lines up with the OPTION_(ONE) field in the waking button
	End

   	Behavior = EmotionTrackerUpdate	Module_EmotionTracker
		AddEmotion	=	Terror_Base
		AddEmotion	=	Alert_Base
;		AddEmotion	=	Doom_Base
;		AddEmotion	=	UncontrollableFear_Base		
	End		

	LocomotorSet
		Locomotor = TrollLocomotor
		Condition = SET_NORMAL 
		Speed     = 33
	End

	Behavior = HitReactionBehavior HitReactionBehaviorModuleTag
		HitReactionLifeTimer1 = 1500 ; level 1 (light  damage)  hit reaction animations in frames (5 per sec)
		HitReactionLifeTimer2 = 3000 ; level 2 (medium damage)  hit reaction animations in frames (5 per sec)
		HitReactionLifeTimer3 = 2000 ; level 3 (heavy  damage)  hit reaction animations in frames (5 per sec)

		HitReactionThreshold1 = 0.0   ; level 1 (light  damage) threshold trigger
		HitReactionThreshold2 = 50.0  ; level 2 (medium damage) threshold trigger
		HitReactionThreshold3 = 200.0  ; level 3 (heavy  damage) threshold trigger
	End

	Behavior = ClickReactionBehavior ClickBehaviorModuleTag
		ClickReactionTimer = 600 ; 10 seconds in ticks
		ReactionFrames1 = 15  ; in frames (5 per sec)
		ReactionFrames2 = 7  ; in frames (5 per sec)
		ReactionFrames3 = 7  ; in frames (5 per sec)
		ReactionFrames4 = 15  ; in frames (5 per sec)
		ReactionFrames5 = 18 ; in frames (5 per sec)
	End

  Behavior = PhysicsBehavior ModuleTag_04
    GravityMult = 0.0 ;1.0
    ShockStandingTime = 4600	;msec ;27800
    FirstHeight = 0 
    SecondHeight = 0
  End
  
 
  Behavior = SlowDeathBehavior ModuleTag_50
    DeathTypes = ALL
    DestructionDelay = 35000
    DecayBeginTime = 3000
    SinkDelay = 10000
    SinkRate = 0.64     ; in Dist/Sec
    Sound = INITIAL TrollDie
    ProbabilityModifier = 50
    DeathFlags   = DEATH_1 ; Tell model which death animation to play. Sets BOTH model condition and object status bits.
  End

  Behavior = SlowDeathBehavior ModuleTag_51
    DeathTypes = ALL
    DestructionDelay = 35000
    DecayBeginTime = 4500
    SinkDelay = 11500
    SinkRate = 0.64     ; in Dist/Sec
    Sound = INITIAL TrollDie
    ProbabilityModifier = 50
    DeathFlags   = DEATH_2 ; Tell model which death animation to play. Sets BOTH model condition and object status bits.
  End

  Behavior = SquishCollide ModuleTag_06
    ;nothing
  End
 
  Behavior = GrabPassengerSpecialPower ModuleTag_07                      
    SpecialPowerTemplate      = SpecialAbilityGrabPassenger
    UpdateModuleStartsAttack  = Yes
	AllowTree				= Yes
	InitiateFX				= FX_TrollGrabInitiate   ; Evil hack so we can different voices for grab tree or grab rock
    ;InitiateSound           = 
  End
  
  Behavior = SpecialAbilityUpdate ModuleTag_08                
    SpecialPowerTemplate    = SpecialAbilityGrabPassenger
    StartAbilityRange       = 8.0

    UnpackTime              = 300 ; This does not match the animation, but looks good.
    PreparationTime         = 1   ; touching it to grabbing it
    PersistentPrepTime      = 630 ; grabbing it to whacking it on the ground (if shrubbery)
    PackTime                = 1000 ; whacking it to holding it nice
	CustomAnimAndDuration   = AnimState:EATING AnimTime:3000 TriggerTime:1400

;    PackSound               = 
;    UnpackSound             = 
;    TriggerSound            = 
;    PrepSoundLoop           = 
    AwardXPForTriggering    = 0
  End
  
 	Behavior = SpecialPowerModule ModuleTag_MordorMtTrollBoredAbility                     
		SpecialPowerTemplate      = SpecialAbilityMountainTrollBored
		UpdateModuleStartsAttack  = Yes
		;InitiateSound           = 
	End
  
  Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_MordorMtTrollBored   
		SpecialPowerTemplate    = SpecialAbilityMountainTrollBored

		UnpackTime              = 800 ; hit the guy
		PackTime				= 1200
		AwardXPForTriggering    = 0
		
		StartAbilityRange = 12.0
		
		SpecialWeapon = MordorMtTrollBored
		WhichSpecialWeapon = 1
	End

  Behavior = TransportContain ModuleTag_09
	ObjectStatusOfContained = UNSELECTABLE
    PassengerFilter			= ANY +CLUB +ORC +ROCK
    ManualPickUpFilter		= ANY +CLUB -ORC +ROCK +ROCK_VENDOR ; we do not want the user to be able to manually pick up an orc with a troll.
    Slots					= 1
    ShowPips				= No
    AllowEnemiesInside		= Yes
    AllowNeutralInside		= Yes
    AllowAlliesInside		= Yes
    DamagePercentToUnits	= 0%
    TypeOneForWeaponSet		= CLUB
;    TypeTwoForWeaponSet	= THROWN_OBJECT
    
    TypeOneForWeaponState	= CLUB
    TypeTwoForWeaponState	= ROCK

    PassengerBonePrefix = PassengerBone:Trunk       KindOf:CLUB
    PassengerBonePrefix = PassengerBone:Firepoint   KindOf:ROCK
    PassengerBonePrefix = PassengerBone:Trunk		KindOf:INFANTRY
    
    EjectPassengersOnDeath = No
  End
     
  Geometry = CYLINDER
  GeometryMajorRadius = 17.6
  GeometryHeight = 32.0
  GeometryIsSmall = No
 ; Shadow                = SHADOW_VOLUME
  Shadow = SHADOW_VOLUME_NON_SELF_2; volumetric shadow that doesn't cast onto all objects using SHADOW_VOLUME_NON_SELF_2
 ; ShadowSizeX = 45; clamp the angle so shadow isn't as long.
 ; ShadowSizeX = 14;
 ; ShadowSizeY = 14;
 ; ShadowTexture = ShadowI;
End

;------------------------------------------------------------------------------
;
;	These child objects are used in the cave troll lair.
;
ChildObject CaveTroll_Slaved MordorCaveTroll

  	EvaEnemyUnitSightedEvent = CaveTrollCreepSighted ; Special event for cave trolls showing up. Helps distinguish the real enemies from random creeps

	; Should be the same as MordorCaveTroll except with CREEP.
	KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS TROLL MONSTER CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT WORKING_PASSENGER NO_FREEWILL_ENTER PATH_THROUGH_INFANTRY SCARY CAN_ATTACK_WALLS CREEP SCORE

	VisionRange = CREEP_VISION
	DisplayName = OBJECT:GenericCaveTroll
	Behavior = SlavedUpdate ModuleTag_Slave
		GuardMaxRange		= 350
		GuardWanderRange	= 20
	End

End

ChildObject CaveTroll_Huge MordorCaveTroll

	Scale 1.75

End


;------------------------------------------------------------------------------
; Gothmog
Object MordorGothmog
  ; *** ART Parameters ***
  
    ; This is required for garrisoned objects - please put in all objects.
    ButtonImage = BuildingNoArt


  Draw = W3DScriptedModelDraw ModuleTag_01

    StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD

    DefaultModelConditionState
      Model = MUGothMog_SKN
    End

		IdleAnimationState
			Animation = IDLA
	      AnimationName = MUSauron_SKL.MUSauron_IDLA
	      AnimationMode = ONCE
				AnimationPriority = 25
			End
			StateName = Idle
		End

    AnimationState = MOVING
			Animation = Moving
	      AnimationName = MUSauron_SKL.MUSauron_WLKA
		    AnimationMode = LOOP
	      AnimationSpeedFactorRange = 1.5 1.5
			End
      Flags = RANDOMSTART
    End

    AnimationState = MOVING TURN_LEFT
			Animation = Moving
	      AnimationName = MUSauron_SKL.MUSauron_TRNL
		    AnimationMode = LOOP
			End
    End

    AnimationState = MOVING TURN_RIGHT
			Animation = Moving
	      AnimationName = MUSauron_SKL.MUSauron_TRNR
		    AnimationMode = LOOP
			End
    End
 
	AnimationState = MOVING FIRING_OR_PREATTACK_A
		Animation = WLKB1
			AnimationName = MUSauron_SKL.MUSauron_WLKB
			AnimationMode = ONCE
			UseWeaponTiming		= Yes
		End
	End

	AnimationState = FIRING_OR_PREATTACK_A
		Animation = ATKA1
			AnimationName = MUSauron_SKL.MUSauron_ATKA
			AnimationMode = ONCE
			UseWeaponTiming		= Yes
		End
		Animation = ATKB1
			AnimationName = MUSauron_SKL.MUSauron_ATKB
			AnimationMode = ONCE
			UseWeaponTiming		= Yes
		End
	End
	
;	AnimationState = WAR_CHANT
;		Animation = Chant
;			AnimationName = MUSauron_SKL.MUSauron_TNTA
;			AnimationMode = ONCE
;		End
;		Flags						= RANDOMSTART RESTART_ANIM_WHEN_COMPLETE
;	End

  End
 
;  Draw = W3DLightDraw ModuleTag_02
;    Ambient = R:0 G:0 B:0
;    Diffuse = R:128 G:128 B:255
;    Radius = 25
;    Intensity = 10
;    AttachToBoneInAnotherModule = Staff
;  End 

  ; ***DESIGN parameters ***
  Side = Mordor
  EditorSorting = UNIT
	ThreatLevel = 3.0
  ThingClass = CHARACTER_UNIT

  TransportSlotCount = 1
  ImmuneToShockwave = yes
  WeaponSet
    Conditions = None 
    Weapon = PRIMARY    SauronMace
    AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
  End
  ArmorSet
    Conditions      = None
    Armor           = SauronArmor
    DamageFX        = NormalDamageFX
  End
  VisionRange = 280.0
  DisplayName = OBJECT:MordorGothmog
  CrushableLevel = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CrusherLevel   = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushAllies = yes

  RamPower = 25
;  RamZMult = 1.0
 
  CommandSet = MordorSpawnOrcs
  CommandPoints = 1


  ; *** AUDIO Parameters ***;

    	VoiceAmbushed		= UrukWarriorVoiceAmbushed
	VoiceAttack		= UrukWarriorVoiceAttack		;SauronVoiceMove
	VoiceAttackStructure	= UrukWarriorVoiceAttackBuilding
	VoiceAttackMachine	= UrukWarriorVoiceAttack
	VoiceAttackCharge	= UrukWarriorVoiceAttackCharge
	VoiceCreated		= NoSound
	VoiceMove		= UrukWarriorVoiceMove			;SauronVoiceMove
	VoiceMove2		= OrcVoiceMove2
	VoiceMoveToCamp		= UrukWarriorVoiceMoveCamp
	VoiceMoveWhileAttacking	= UrukWarriorVoiceDisengage
	VoiceRetreatToCastle	= UrukPikemanVoiceRetreat
	VoicePriority		= 54
	VoiceSelect		= UrukWarriorVoiceSelect		;SauronVoiceSelect
	VoiceSelectBattle 	= UrukWarriorVoiceSelectBattle
	VoiceGuard			= UrukWarriorVoiceMove

	SoundImpact		= ImpactHorse


	UnitSpecificSounds
		VoiceGarrison         = UrukWarriorVoiceGarrison
		VoiceEnterUnitSlaughterHouse	= UrukWarriorVoiceGarrisonSlaughterHouse
	End

	EvaEventDamagedOwner = UnitUnderAttack 		;Eva event to trigger when unit is damaged


  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY MONSTER SCORE PATH_THROUGH_INFANTRY
 
  Body = ActiveBody ModuleTag_03
    MaxHealth         = 10                  ;BALANCE Sauron Health
    MaxHealthDamaged  = 5
    ;RecoveryTime      = 5000
  End
 
  Behavior = AIUpdateInterface ModuleTag_04
    AutoAcquireEnemiesWhenIdle = Yes ATTACK_BUILDINGS
  End

  LocomotorSet
    Locomotor = BasicSauronLocomotor
    Condition = SET_NORMAL 
    Speed     = 32
  End
 
  Behavior = PhysicsBehavior ModuleTag_05
    GravityMult = 1.0
  End

  Behavior = SlowDeathBehavior ModuleTag_06
	DeathTypes		= ALL 
	SinkDelay		= 3000
	SinkRate		= 0.40		;in Dist/Sec
	DestructionDelay	= 8000
	Sound 			= INITIAL UrukVoiceDie
  End
 
  Behavior = SquishCollide ModuleTag_07
    ;nothing
  End
 
  Behavior = OCLSpecialPower ModuleTag_08
    SpecialPowerTemplate = SuperweaponSpawnOrcs
    OCL                  = SUPERWEAPON_SpawnOrcs
    CreateLocation       = USE_OWNER_OBJECT
  End
 
	Behavior = AttributeModifierAuraUpdate ModuleTag_Leadership
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= GothmogPassiveLeadership
		RefreshDelay	= 2000
		Range			= 120
		ObjectFilter	= ANY +INFANTRY +CAVALRY  -STRUCTURE -BASE_FOUNDATION -HERO
	End	

  Geometry = CYLINDER
  GeometryMajorRadius = 11.2
  GeometryMinorRadius = 11.2
  GeometryHeight = 32.0
  GeometryIsSmall = No
  Shadow = SHADOW_DECAL
  ShadowSizeX = 20;
  ShadowSizeY = 20;
  ShadowTexture = ShadowI;
End

;------------------------------------------------------------------------------
; Soldier of Rhun
Object MordorSoldOfRhun
  ; *** ART Parameters ***

  ; This is required for garrisoned objects - please put in all objects.
  ButtonImage = BMHaradrimPalace_SoldiersRhun
  SelectPortrait         = UPMordor_Haradrim

  Draw = W3DScriptedModelDraw ModuleTag_01

    StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD

    DefaultModelConditionState
      Model = MUSldrRhun
    End

		IdleAnimationState
			Animation = IDLA
	      AnimationName = MUSauron_SKL.MUSauron_IDLA
	      AnimationMode = ONCE
				AnimationPriority = 25
			End
			StateName = Idle
		End
		
	AnimationState = MOVING TURN_LEFT
			Animation = Moving
	      AnimationName = MUSauron_SKL.MUSauron_TRNL
		    AnimationMode = LOOP
			End
    End

    AnimationState = MOVING TURN_RIGHT
			Animation = Moving
	      AnimationName = MUSauron_SKL.MUSauron_TRNR
		    AnimationMode = LOOP
			End
    End
 
	AnimationState = MOVING FIRING_OR_PREATTACK_A
		Animation = WLKB1
			AnimationName = MUSauron_SKL.MUSauron_WLKB
			AnimationMode = ONCE
			UseWeaponTiming		= Yes
		End
	End
	
	AnimationState = MOVING BACKING_UP
		Animation = BackingUp
			AnimationName = MUSauron_SKL.MUSauron_BAKA
			AnimationMode = LOOP
		End
		Flags = RANDOMSTART
	End
    
    AnimationState = MOVING
			Animation = Moving
	      AnimationName = MUSauron_SKL.MUSauron_WLKA
		    AnimationMode = LOOP
	      AnimationSpeedFactorRange = 1.5 1.5
			End
      Flags = RANDOMSTART
    End


	AnimationState = FIRING_OR_PREATTACK_A
		Animation = ATKA1
			AnimationName = MUSauron_SKL.MUSauron_ATKA
			AnimationMode = ONCE
			UseWeaponTiming		= Yes
		End
		Animation = ATKB1
			AnimationName = MUSauron_SKL.MUSauron_ATKB
			AnimationMode = ONCE
			UseWeaponTiming		= Yes
		End
	End
	
	AnimationState = WAR_CHANT
		Animation = Chant
			AnimationName = MUSauron_SKL.MUSauron_TNTA
			AnimationMode = LOOP
		End
	End
			
	;-emotions--
	AnimationState							= EMOTION_AFRAID
		Animation							= FERA
			AnimationName					= MUSauron_SKL.MUSauron_FERA
			AnimationMode					= LOOP
		End
		Flags = RANDOMSTART
	End
	AnimationState							= EMOTION_TAUNTING
		Animation							= TNTA
			AnimationName					= MUSauron_SKL.MUSauron_TNTA
			AnimationMode					= LOOP
		End
	End
	AnimationState							= EMOTION_POINTING
		Animation							= Pointing1
			AnimationName					= MUSauron_SKL.MUSauron_PNTA
			AnimationMode					= LOOP
		End
	End
	AnimationState							= EMOTION_CELEBRATING
		Animation                           = CHRA
			AnimationName					= MUSauron_SKL.MUSauron_CHRA
			AnimationMode					= ONCE
		End
	End

  End
 
;  Draw = W3DLightDraw ModuleTag_02
;    Ambient = R:0 G:0 B:0
;    Diffuse = R:128 G:128 B:255
;    Radius = 25
;    Intensity = 10
;    AttachToBoneInAnotherModule = Staff
;  End 

  ; ***DESIGN parameters ***
  Side = Mordor
  EditorSorting = UNIT
	ThreatLevel = 1.0
  ThingClass = CHARACTER_UNIT

  TransportSlotCount = 1
  ImmuneToShockwave = yes
  WeaponSet
    Conditions = None 
    Weapon = PRIMARY    SauronMace
    AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
  End
  ArmorSet
    Conditions      = None
    Armor           = SauronArmor
    DamageFX        = NormalDamageFX
  End
  VisionRange = 280.0
  DisplayName = OBJECT:MordorGothmog
  CrushableLevel = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CrusherLevel   = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushAllies = yes

  RamPower = 25
;  RamZMult = 1.0
 
  CommandSet = MordorSpawnOrcs
  CommandPoints = 1


  ; *** AUDIO Parameters ***;

	VoiceAmbushed				= SoldierOfRhunVoiceAmbushed
	VoiceAttack				= SoldierOfRhunVoiceAttack
	VoiceAttackCharge			= SoldierOfRhunVoiceAttackCharge
	VoiceAttackMachine			= SoldierOfRhunVoiceAttack
	VoiceAttackStructure			= SoldierOfRhunVoiceAttackBuilding
	VoiceCreated				= CampOrcCreateSoldiersOfRhun
	VoiceFullyCreated 			= CampOrcCreateSoldiersOfRhun
	VoiceMove				= SoldierOfRhunVoiceMove
	VoiceMoveToCamp				= SoldierOfRhunVoiceMoveCamp
	VoiceMoveWhileAttacking			= SoldierOfRhunVoiceDisengage
	VoicePriority				= 55
	VoiceRetreatToCastle			= SoldierOfRhunVoiceRetreat
	VoiceSelect				= SoldierOfRhunVoiceSelect
	VoiceSelectBattle 			= SoldierOfRhunVoiceSelectBattle
	VoiceGuard			= SoldierOfRhunVoiceMove	

	VoiceEnterStateAttack			= SoldierOfRhunVoiceEnterStateAttack
	VoiceEnterStateAttackCharge		= SoldierOfRhunVoiceEnterStateAttackCharge
	VoiceEnterStateAttackMachine		= SoldierOfRhunVoiceEnterStateAttackBuilding
	VoiceEnterStateAttackStructure		= SoldierOfRhunVoiceEnterStateAttackBuilding
	VoiceEnterStateMove			= SoldierOfRhunVoiceEnterStateMove
	VoiceEnterStateMoveToCamp		= SoldierOfRhunVoiceEnterStateMoveCamp
	VoiceEnterStateMoveWhileAttacking	= SoldierOfRhunVoiceEnterStateDisengage
	VoiceEnterStateRetreatToCastle		= SoldierOfRhunVoiceEnterStateRetreat
	
	UnitSpecificSounds
		VoiceGarrison			= SoldierOfRhunVoiceGarrison              
	End

	EvaEventDamagedOwner			= UnitUnderAttack 		;Eva event to trigger when unit is damaged
	;EvaEventDieOwner			= GroupSoldiersOfRhunDie	;Eva event to trigger on unit's death. NOTICE THAT this is only for permanent deaths
										;For deaths you can respawn from, use the DeathFX


  ; *** ENGINEERING Parameters ***

  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY MONSTER SCORE PATH_THROUGH_INFANTRY
 
  Body = ActiveBody ModuleTag_03
    MaxHealth         = 10                  ;BALANCE Sauron Health
    MaxHealthDamaged  = 5
    ;RecoveryTime      = 5000
  End
 
  Behavior = AIUpdateInterface ModuleTag_04
    AutoAcquireEnemiesWhenIdle = Yes ATTACK_BUILDINGS
    AttackPriority				= 	AttackPriority_Spearman
  End

  LocomotorSet
    Locomotor = BasicSauronLocomotor
    Condition = SET_NORMAL 
    Speed     = 32
  End
 
  Behavior = PhysicsBehavior ModuleTag_05
    GravityMult = 1.0
  End

  Behavior = SlowDeathBehavior ModuleTag_06
	DeathTypes			= ALL 
	SinkDelay			= 3000
	SinkRate			= 0.40			;in Dist/Sec
	DestructionDelay		= 8000
	Sound				= INITIAL SoldierOfRhunVoiceDie
  End
 
  Behavior = SquishCollide ModuleTag_07
    ;nothing
  End
 
  Behavior = OCLSpecialPower ModuleTag_08
    SpecialPowerTemplate = SuperweaponSpawnOrcs
    OCL                  = SUPERWEAPON_SpawnOrcs
    CreateLocation       = USE_OWNER_OBJECT
  End

  ; Tie into LargeGroupAudio system
  Behavior = LargeGroupAudioUpdate ModuleTag_LGAU
  	Key = Easterling_Infantry
     ;UnitWeight = 2 ; Saur-head counts as 2 infantry when computing group size
  End
 
	Behavior = AttributeModifierAuraUpdate ModuleTag_Leadership
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= GothmogPassiveLeadership
		RefreshDelay	= 2000
		Range			= 120
		ObjectFilter	= ANY +INFANTRY +CAVALRY  -STRUCTURE -BASE_FOUNDATION -HERO
	End	

  Geometry = CYLINDER
  GeometryMajorRadius = 11.2
  GeometryMinorRadius = 11.2
  GeometryHeight = 32.0
  GeometryIsSmall = No
  Shadow = SHADOW_DECAL
  ShadowSizeX = 19;
  ShadowSizeY = 19;
  ShadowTexture = ShadowI;
End

;------------------------------------------------------------------------------
;------------------------------------------------------------------------------
;------------------------------------------------------------------------------
;
;  Temp and Testing
;
;------------------------------------------------------------------------------
;------------------------------------------------------------------------------
;------------------------------------------------------------------------------

;------------------------------------------------------------------------------
; Sauron
Object MordorSauron
  ; *** ART Parameters ***

    ; SelectPortrait for Heros is portrait behind skill buttons. HP = HeroPortrait.
	SelectPortrait = HPSauron
    
    ; ButtonImage for Heros is button image on Hero Select UI to select hero. HI = HeroIcon or HeroImage.
    ButtonImage = HISauron

  Draw = W3DScriptedModelDraw ModuleTag_01

	  OkToChangeModelColor = Yes
	  
    StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD

;;====================== MODELS =============================================

    DefaultModelConditionState
      Model = MUSauron_SKN
      ParticleSysBone = WEAPON SaronRingSpark FollowBone:Yes
    End

;;================== ANIMATIONS =================================================================

;;------------------ MOVING & DYING ---------------------------

;;======= DYING

	AnimationState						= DYING
		Animation						= DIEB
			AnimationName				= MUSauron_SKL.MUSauron_DIEB
			AnimationMode				= ONCE
			AnimationSpeedFactorRange = 0.5 0.5 ; slow down the death to buy some time before movie kicks in
			AnimationBlendTime			= 0
		End
		BeginScript
			CurDrawableShowSubObject("SHARD01")
			CurDrawableShowSubObject("SHARD02")
			CurDrawableShowSubObject("SHARD03")
			CurDrawableShowSubObject("SHARD04")
			CurDrawableShowSubObject("SHARD05")
			CurDrawableShowSubObject("SHARD06")
			CurDrawableShowSubObject("SHARD07")
			CurDrawableShowSubObject("SHARD08")
			CurDrawableShowSubObject("SHARD09")
			CurDrawableShowSubObject("SHARD10")
			CurDrawableShowSubObject("SHARD11")
			CurDrawableShowSubObject("SHARD12")
			CurDrawableShowSubObject("SHARD13")
			CurDrawableShowSubObject("SHARD14")
			CurDrawableShowSubObject("SHARD15")
			CurDrawableShowSubObject("SHARD16")
			CurDrawableShowSubObject("SHARD17")
			CurDrawableShowSubObject("SHARD18")
			CurDrawableShowSubObject("SHARD19")
			CurDrawableShowSubObject("SHARD20")
		EndScript
	End
		
;;======= MOVING

	AnimationState						= MOVING TURN_RIGHT_HIGH_SPEED
		StateName						= STATE_Moving
		Animation						= Moving
		    AnimationName				= MUSauron_SKL.MUSauron_WLKA
			AnimationMode				= LOOP
			Distance					= 88
		End
		Animation						= Turning
			AnimationName				= MUSauron_SKL.MUSauron_TRNR
		    AnimationMode				= LOOP
			AnimationBlendTime			= 0
		End
		Flags							= MAINTAIN_FRAME_ACROSS_STATES MAINTAIN_FRAME_ACROSS_STATES2
		BeginScript
			if CurDrawablePrevAnimationState() == "STATE_Turning" then return "Turning" else return "Moving" end
		EndScript
    End
    
    AnimationState						= MOVING TURN_LEFT_HIGH_SPEED
		StateName						= STATE_Moving
		Animation						= Moving
		    AnimationName				= MUSauron_SKL.MUSauron_WLKA
			AnimationMode				= LOOP
			Distance					= 88
		End
		Animation						= Turning
			AnimationName				= MUSauron_SKL.MUSauron_TRNL
			AnimationMode				= LOOP
			AnimationBlendTime			= 0
		End
		Flags							= MAINTAIN_FRAME_ACROSS_STATES MAINTAIN_FRAME_ACROSS_STATES2
		BeginScript
			if CurDrawablePrevAnimationState() == "STATE_Turning" then return "Turning" else return "Moving" end
		EndScript
    End

	AnimationState						= TURN_LEFT
		StateName						= STATE_Turning
		Animation						= Turning
			AnimationName				= MUSauron_SKL.MUSauron_TRNL
			AnimationMode				= LOOP
			AnimationBlendTime			= 5
		End
		Flags							= MAINTAIN_FRAME_ACROSS_STATES2
    End
    
    AnimationState						= TURN_RIGHT
		StateName						= STATE_Turning
		Animation						= Turning
			AnimationName				= MUSauron_SKL.MUSauron_TRNR
		    AnimationMode				= LOOP
		    AnimationBlendTime			= 5
		End
		Flags							= MAINTAIN_FRAME_ACROSS_STATES2
   End

    AnimationState						= MOVING
		StateName						= STATE_Moving
		Animation						= Moving
		    AnimationName				= MUSauron_SKL.MUSauron_WLKA
			AnimationMode				= LOOP
			Distance					= 88
		End
		Flags							= MAINTAIN_FRAME_ACROSS_STATES
    End
 
 ;;------------------ ATTACKING  -------------------------------

	AnimationState						= FIRING_OR_PREATTACK_A
		StateName						= STATE_Ready
		Animation						= ATKC
			AnimationName				= MUSauron_SKL.MUSauron_ATKC
			AnimationMode				= ONCE
			UseWeaponTiming				= Yes
		End
	End

;;-------------------- HIT REACTIONS --------------------------

	AnimationState						= HIT_REACTION
		StateName						= STATE_Ready
		Animation						= Hit_Level_1_a
			AnimationName				= MUSauron_SKL.MUSauron_HITA
			AnimationMode				= ONCE
		End
	End
		
;;--------------- IDLE STATES ---------------------------------

	IdleAnimationState
		StateName					= Idle
		Animation					= IDLA
			AnimationName			= MUSauron_SKL.MUSauron_IDLA
			AnimationMode			= ONCE
			AnimationPriority		= 20
		End
		Animation					= IDLA2
			AnimationName			= MUSauron_SKL.MUSauron_IDLA
			AnimationMode			= ONCE
			AnimationPriority		= 20
		End
		Animation					= IDLC
			AnimationName			= MUSauron_SKL.MUSauron_IDLC
			AnimationMode			= ONCE
			AnimationPriority		= 5
			AnimationBlendTime		= 10
		End
		BeginScript
			Prevs = CurDrawablePrevAnimationState()
			Preva = CurDrawablePrevAnimation()
			if Prevs == "STATE_Moving"
			then
				CurDrawableSetTransitionAnimState("TRANS_SmoothToIdle")
			elseif Prevs == "STATE_Ready"
			then
				CurDrawableSetTransitionAnimState("TRANS_ReallySmoothToIdle")
			end
			if Preva == "IDLC"
			then
				CurDrawableSetTransitionAnimState("TRANS_ReallySmoothToIdle")
			end
		EndScript
	End
;;--------------------- TRANSITIONS ----------------------------------------------------

	TransitionState					= TRANS_SmoothToIdle
		Animation					= IDLA
			AnimationName			= MUSauron_SKL.MUSauron_IDLA
			AnimationMode			= ONCE
			AnimationBlendTime		= 5
		End
	End
	TransitionState					= TRANS_ReallySmoothToIdle
		Animation					= IDLA
			AnimationName			= MUSauron_SKL.MUSauron_IDLA
			AnimationMode			= ONCE
			AnimationBlendTime		= 10
		End
	End
	
;;---------------------------------------------------------------------------------------
  End
 
;  Draw = W3DLightDraw ModuleTag_02
;    Ambient = R:0 G:0 B:0
;    Diffuse = R:128 G:128 B:255
;    Radius = 25
;    Intensity = 10
;    AttachToBoneInAnotherModule = Staff
;  End 

  ; ***DESIGN parameters ***
  Side = Mordor
  EditorSorting = UNIT
	ThreatLevel = 5.0
  ThingClass = CHARACTER_UNIT

  TransportSlotCount = 1
  ImmuneToShockwave = yes
  WeaponSet
    Conditions = None 
    Weapon = PRIMARY    SauronMace
    AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
  End
  ArmorSet
    Conditions      = None
    Armor           = SauronArmor
    DamageFX        = NormalDamageFX
  End
  VisionRange = 280.0
  BountyValue = MORDOR_SAURON_BOUNTY_VALUE
  DisplayName = OBJECT:MordorSauron
  CrushableLevel = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CrusherLevel   = 0  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushAllies = yes

  RamPower = 25
;  RamZMult = 1.0
 
  CommandSet = MordorSpawnOrcs
  CommandPoints = 1


	; *** AUDIO Parameters ***;

	VoiceAttack			= SauronVoiceMove
	VoiceCreated			= CampOrcCreateSauron
	VoiceFullyCreated 		= CampOrcCreateSauron
	VoiceFear			= NoSound
	VoiceGuard			= NoSound
	VoiceMove			= SauronVoiceMove
	VoicePriority			= 94
	VoiceSelect			= SauronVoiceSelect
	VoiceGuard			= SauronVoiceMove
	
	;UnitSpecificSounds
	;End

	EvaEventDamagedOwner = UnitUnderAttack 		;Eva event to trigger when unit is damaged
	EvaEventDieOwner = SauronDie			;Eva event to trigger on unit's death. NOTICE THAT this is only for permanent deaths
							;For deaths you can respawn from, use the DeathFX


  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = HERO PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY MONSTER SCORE PATH_THROUGH_INFANTRY ARMY_SUMMARY SCARY
	PathfindDiameter = 40.0
 
  Body = ActiveBody ModuleTag_03
    MaxHealth         = 1000     ;10000             BALANCE Sauron Health
    ;MaxHealthDamaged  = 5000
    ;;RecoveryTime      = 5000
  End
 
  Behavior = AIUpdateInterface ModuleTag_04
    AutoAcquireEnemiesWhenIdle = Yes ATTACK_BUILDINGS
    AILuaEventsList = SauronFunctions
  End
  
  LocomotorSet
    Locomotor = BasicSauronLocomotor
    Condition = SET_NORMAL 
    Speed     = 32
  End
 
	Behavior = HitReactionBehavior HitReactionBehaviorModuleTag
		HitReactionLifeTimer1 = 3333 ; level 1 (light  damage)  hit reaction animations in frames (5 per sec)
		HitReactionThreshold1 = 20.0   ; level 1 (light  damage) threshold trigger
	End
 
  Behavior = PhysicsBehavior ModuleTag_05
    GravityMult = 1.0
  End

  Behavior = SlowDeathBehavior ModuleTag_06
    DeathTypes = ALL 
    SinkDelay = 10000
    SinkRate = 0.025     ; in Dist/Sec
;    FX				= INITIAL	FX_SauronDeathBlast
;    FX				= INITIAL	FX_SauronFinalDeath
    DestructionDelay = 25000
  End
  
  ; Death weapons for fall to left
;	Behavior = FireWeaponWhenDeadBehavior ModuleTag_11
;	;	RequiredStatus	= DEATH_3
;		StartsActive	= Yes
;		DelayTime		=  1500
;		DeathWeapon		= MordorSauronShockwaveFinal
;		WeaponOffset	= X:0 Y:42 Z:0
; 	End
 
  Behavior = SquishCollide ModuleTag_07
    ;nothing
  End
 
  Behavior = OCLSpecialPower ModuleTag_08
    SpecialPowerTemplate = SuperweaponSpawnOrcs
    OCL                  = SUPERWEAPON_SpawnOrcs
    CreateLocation       = USE_OWNER_OBJECT
  End
 
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;  Sauron doesn't get leadership, makes the tutorial level look bad.
;
;	Behavior = AttributeModifierAuraUpdate ModuleTag_Leadership
;		StartsActive	= Yes ;If no, requires upgrade to turn on.
;		BonusName		= SauronPassiveLeadership
;		RefreshDelay	= 2000
;		Range			= 120
;		ObjectFilter	= ANY +INFANTRY +CAVALRY  -STRUCTURE -BASE_FOUNDATION -HERO
;	End	
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

  Geometry = CYLINDER
  GeometryMajorRadius = 11.2
  GeometryMinorRadius = 11.2
  GeometryHeight = 32.0
  GeometryIsSmall = No
  Shadow = SHADOW_DECAL
  ShadowSizeX = 22;
  ShadowSizeY = 22;
  ShadowTexture = ShadowI;
End

;------------------------------------------------------------------------------
; 
Object MordorHaradrimSandbox

  SelectPortrait         = SP_Haradrim

  ; *** ART Parameters ***
   ;note all file names are MUHaradim, not MUHaradrim, so as not to exceed character limits
  Draw = W3DScriptedModelDraw ModuleTag_01

    DefaultModelConditionState
      Model = MUHaradim_SKN
      WeaponLaunchBone = PRIMARY ARRROW
    End

		IdleAnimationState
			Animation = IDLA
	      AnimationName = MUHaradim_SKL.MUHaradim_IDLA
	      AnimationMode = ONCE
				AnimationPriority = 25
			End
			Animation = IDLB
	      AnimationName = MUHaradim_SKL.MUHaradim_IDLB
	      AnimationMode = ONCE
			End
			Animation = IDLC
	      AnimationName = MUHaradim_SKL.MUHaradim_IDLC
	      AnimationMode = ONCE
			End
			StateName = Idle
		End
 
; this unit has no FLLA animations... needs one --- LORENZEN 11/3/03 <<<<<<<<<<<<<<<<<<<<<<<<<<<<
;    AnimationState = PASSENGER
;			Animation = Wiggling
;	      AnimationName = MUHaradim_SKL.MUHaradim_FLLA
;		    AnimationMode = LOOP
;			End
;     EnteringStateFX = FX_ThrownRockPickUp
;   End

    AnimationState = THROWN_PROJECTILE
			Animation = Thrown
	      AnimationName = MUHaradim_SKL.MUHaradim_FLYA
		    AnimationMode = LOOP
			End
    End

;    AnimationState = MOVING DAMAGED
;			Animation = Moving_Damaged
;	      AnimationName = MUHaradim_SKL.MUHaradim_IWKA
;		    AnimationMode = LOOP
;			End
;      Flags               = RANDOMSTART
;      ParticleSysBone     = None InfantryDustTrails
;    End

    AnimationState = MOVING
			Animation = Moving
	      AnimationName = MUHaradim_SKL.MUHaradim_RUNA
		    AnimationMode = LOOP
			End
      Flags               = RANDOMSTART
      ParticleSysBone     = None InfantryDustTrails
    End
 
;    AnimationState = PREATTACK_A AIM_LOW
;			Animation = Pre_Attacking
;	      AnimationName = MUHaradim_SKL.MUHaradim_ATB1
;		    AnimationMode = ONCE
;			End
;   End

;    AnimationState = FIRING_A AIM_LOW
;			Animation = Attacking
;	      AnimationName = MUHaradim_SKL.MUHaradim_ATB2
;		    AnimationMode = ONCE
;			End
;     HideSubObject = arrrow
;   End

	AnimationState = FIRING_OR_PREATTACK_A ;AIM_STRAIGHT
		Animation = Attacking
			AnimationName = MUHaradim_SKL.MUHaradim_ATA1
			AnimationMode = ONCE
			UseWeaponTiming		= Yes
		End
		FrameForPristineBonePositions = 64
	End

;    AnimationState = PREATTACK_A AIM_HIGH
;			Animation = Pre_Attacking
;	      AnimationName = MUHaradim_SKL.MUHaradim_ATC1
;		    AnimationMode = ONCE
;			End
;   End

;    AnimationState = FIRING_A AIM_HIGH
;			Animation = Attacking
;	      AnimationName = MUHaradim_SKL.MUHaradim_ATC2
;		    AnimationMode = ONCE
;			End
;     HideSubObject = arrrow
;    End

    AnimationState = DYING SPLATTED
 			Animation = Splattered_On_Ground
				AnimationName = MUHaradim_SKL.MUHaradim_LNDA
				AnimationMode = ONCE
			End
			EnteringStateFX = FX_HaradrimHitGround
    End

     AnimationState = DYING AFLAME
			Animation = Flaming_Death
	      AnimationName = MUHaradim_SKL.MUHaradim_MFDA
		    AnimationMode = ONCE
			End
    End

    AnimationState = DYING
			Animation = Dying_1
	      AnimationName = MUHaradim_SKL.MUHaradim_DIEA
		    AnimationMode = ONCE
			End
			Animation = Dying_2
	      AnimationName = MUHaradim_SKL.MUHaradim_DIEB
		    AnimationMode = ONCE
			End
    End
 
    ; --- stunned anims
    AnimationState = STUNNED_FLAILING
 			Animation = Flying
				AnimationName = MUHaradim_SKL.MUHaradim_FLYA
	      AnimationMode = LOOP
			End
      Flags = RANDOMSTART
    End

    AnimationState = STUNNED
 			Animation = Splattered_On_Ground
				AnimationName = MUHaradim_SKL.MUHaradim_LNDA
			    AnimationMode = ONCE
			End
			EnteringStateFX = FX_HaradrimHitGround
    End

    AnimationState = STUNNED_STANDING_UP
 			Animation = Standing_Back_Up
				AnimationName = MUHaradim_SKL.MUHaradim_LNDA
	      AnimationMode = ONCE_BACKWARDS
	      AnimationSpeedFactorRange = 1.5 1.5
			End
    End
    
    AnimationState = WAR_CHANT
		Animation = Chant
			AnimationName = MUHaradim_SKL.MUHaradim_TNTA
			AnimationMode = LOOP
		End
	End
  End

  ; ***DESIGN parameters ***
  Side = Mordor
  EditorSorting = UNIT
	ThreatLevel = 1.0
  ThingClass = HORDE_UNIT
  CommandPoints = 1

  TransportSlotCount = 1
  WeaponSet
    Conditions = None 
    Weapon = PRIMARY    MordorArcherBow
    AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
  End
  ArmorSet
    Conditions      = None
    Armor           = NoArmor
    DamageFX        = NormalDamageFX
  End
  VisionRange = 120.0
  DisplayName = OBJECT:MordorHaradrimArcher
  CrushableLevel = 0  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CrusherLevel = 0 ;What can I crush?: 0 = small animals, 1 = infantry, 2 = trees, 3 = vehicles
 	CrushRevengeWeapon = RangedInfantryCrushRevenge

  ; *** AUDIO Parameters ***;

	VoiceAttack			= HaradrimVoiceAttack
	VoiceAttackCharge		= HaradrimVoiceAttackCharge
	VoiceAttackMachine		= HaradrimVoiceAttack
	VoiceAttackStructure		= HaradrimVoiceAttackBuilding
	VoiceCreated			= CampOrcCreateHaradrim
	VoiceFullyCreated 		= CampOrcCreateHaradrim
	VoiceMove			= HaradrimVoiceMove
	VoiceMoveToCamp			= HaradrimVoiceMoveCamp
	VoicePriority			= 34
	VoiceRetreatToCastle		= HaradrimVoiceRetreat
	VoiceSelect			= HaradrimVoiceSelect
	VoiceSelectBattle 		= HaradrimVoiceSelectBattle
	VoiceGuard			= HaradrimVoiceMove


	UnitSpecificSounds
		VoiceEnter			= HaradrimVoiceGarrison
		VoiceEnterHostile		= HaradrimVoiceGarrison
		VoiceGarrison			= HaradrimVoiceGarrison			;TEMP_HaradrimVoiceEnter_TEMP
		VoiceEnterUnitMordorMumakil	= HaradrimVoiceGarrisonMumakil		;TEMP_HaradrimVoiceEnterMumakil_TEMP
	End

	EvaEventDamagedOwner = UnitUnderAttack 		;Eva event to trigger when unit is damaged


  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER CAN_USE_SIEGE_TOWER SCORE THROWN_OBJECT
 
  Body = ActiveBody ModuleTag_02
    MaxHealth         = 10                  ;BALANCE Orc Archer Health
    MaxHealthDamaged  = 5
    ;RecoveryTime      = 5000
  End
 
  Behavior = AIUpdateInterface ModuleTag_03
    AutoAcquireEnemiesWhenIdle = Yes ATTACK_BUILDINGS
    CanAttackWhileContained = Yes
  End


  LocomotorSet
    Locomotor = HumanLocomotor
    Condition = SET_NORMAL 
    Speed     = 32
  End

  LocomotorSet
    Locomotor = HumanWanderLocomotor
    Condition = SET_WANDER
    Speed     = 32
  End

  Behavior = PhysicsBehavior ModuleTag_04
    GravityMult = 1.0
  End
 
  Behavior = SlowDeathBehavior ModuleTag_05
    DeathTypes = ALL -KNOCKBACK
    SinkDelay = 3000
    SinkRate = 0.40     ; in Dist/Sec
    DestructionDelay = 8000
    Sound = INITIAL HaradrimVoiceDie
  End
 
  Behavior = SquishCollide ModuleTag_06
    ;nothing
  End
 
  Behavior = SlowDeathBehavior ModuleTag_07
    ; Same as normal death, but no sound (sound already played by SoundImpact = ... )
    DeathTypes = NONE +KNOCKBACK
    SinkDelay = 3000
    SinkRate = 0.40     ; in Dist/Sec
    DestructionDelay = 8000
    Sound = INITIAL HaradrimVoiceDie
  End
 
  Behavior = BezierProjectileBehavior ModuleTag_08 ; Module starts asleep, and wakes up when thrown.
    ; 
    FirstHeight = 24  ; Height of Bezier control points above highest intervening terrain
    SecondHeight = 24
    FirstPercentIndent = 30% ; Percentage of shot distance control points are placed
    SecondPercentIndent = 70%
    TumbleRandomly = Yes

    CrushStyle = Yes ; I don't detonate, I just hit
    DieOnImpact = Yes
    BounceCount = 1   ; When I hit the ground, I'll arc again
    BounceDistance = 40 ; this far
    BounceFirstHeight = 16  ; Height of Bezier control points above highest intervening terrain
    BounceSecondHeight = 16
    BounceFirstPercentIndent = 20% ; Percentage of shot distance control points are placed
    BounceSecondPercentIndent = 80%

    GroundHitFX       = FX_ThrownRockGroundHit
    GroundBounceFX    = FX_ThrownRockBounceHit
  End

  ; Tie into LargeGroupAudio system
  Behavior = LargeGroupAudioUpdate ModuleTag_LGAU
  	Key = Human Unit Infantry
  End

  Geometry = CYLINDER
  GeometryMajorRadius = 8.0
  GeometryMinorRadius = 8.0
  GeometryHeight = 19.2
  GeometryIsSmall = Yes
  Shadow = SHADOW_DECAL
  ShadowSizeX = 11;
  ShadowSizeY = 11;
  ShadowTexture = ShadowI;
End


;------------------------------------------------------------------------------
; aka Morannan Orc
ObjectReskin MordorMoranOrc MordorFighter
  Draw = W3DScriptedModelDraw ModuleTag_01

	  OkToChangeModelColor = Yes
	  
    StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD
	ShowShadowWhileContained = No
    DefaultModelConditionState
      Model               = MUOrcMorA_SKN
    End
    IdleAnimationState
      Animation = Idle1
        AnimationName       = MUOrcWarr_SKL.MUOrcWarr_IDLA
        AnimationPriority   = 20
        AnimationBlendTime  = 15
        AnimationSpeedFactorRange = 0.8 1.2
      End
      Animation = Idle2
        AnimationName       = MUOrcWarr_SKL.MUOrcWarr_IDLL
        AnimationPriority   = 20
        AnimationBlendTime  = 15
        AnimationSpeedFactorRange = 0.8 1.2
      End
      Animation = Idle3
        AnimationName       = MUOrcWarr_SKL.MUOrcWarr_IDLM
        AnimationPriority   = 20
        AnimationBlendTime  = 15
        AnimationSpeedFactorRange = 0.8 1.2
      End
      Animation = Idle4
        AnimationName       = MUOrcWarr_SKL.MUOrcWarr_IDLN
        AnimationPriority   = 20
        AnimationBlendTime  = 15
        AnimationSpeedFactorRange = 0.8 1.2
      End
      Animation = Idle5
        AnimationName       = MUOrcWarr_SKL.MUOrcWarr_IDLO
        AnimationPriority   = 20
        AnimationBlendTime  = 15
        AnimationSpeedFactorRange = 0.8 1.2
      End
      Animation = Idle5
        AnimationName       = MUOrcWarr_SKL.MUOrcWarr_IDLB
        AnimationBlendTime  = 15
        AnimationSpeedFactorRange = 0.8 1.2
      End
      Animation = Idle5
        AnimationName       = MUOrcWarr_SKL.MUOrcWarr_IDLC
        AnimationBlendTime  = 15
        AnimationSpeedFactorRange = 0.8 1.2
      End
      Animation = Idle5
        AnimationName       = MUOrcWarr_SKL.MUOrcWarr_IDLD
        AnimationBlendTime  = 15
        AnimationSpeedFactorRange = 0.8 1.2
      End
      Animation = Idle5
        AnimationName       = MUOrcWarr_SKL.MUOrcWarr_IDLE
        AnimationBlendTime  = 15
        AnimationSpeedFactorRange = 0.8 1.2
      End
      Animation = Idle5
        AnimationName       = MUOrcWarr_SKL.MUOrcWarr_IDLF
        AnimationBlendTime  = 15
        AnimationSpeedFactorRange = 0.8 1.2
      End
      Animation = Idle5
        AnimationName       = MUOrcWarr_SKL.MUOrcWarr_IDLG
        AnimationBlendTime  = 15
        AnimationSpeedFactorRange = 0.8 1.2
      End
      Animation = Idle5
        AnimationName       = MUOrcWarr_SKL.MUOrcWarr_IDLH
        AnimationBlendTime  = 15
        AnimationSpeedFactorRange = 0.8 1.2
      End
      Animation = Idle5
        AnimationName       = MUOrcWarr_SKL.MUOrcWarr_IDLI
        AnimationBlendTime  = 15
        AnimationSpeedFactorRange = 0.8 1.2
      End
      Animation = Idle5
        AnimationName       = MUOrcWarr_SKL.MUOrcWarr_IDLJ
        AnimationBlendTime  = 15
        AnimationSpeedFactorRange = 0.8 1.2
      End
      Animation = Idle5
        AnimationName       = MUOrcWarr_SKL.MUOrcWarr_IDLK
        AnimationBlendTime  = 15
        AnimationSpeedFactorRange = 0.8 1.2
        AnimationBlendTime  = 15
        AnimationSpeedFactorRange = 0.8 1.2
      End
    End
 
    AnimationState     = PASSENGER
      Animation        = Carried
        AnimationName    = MUOrcWarr_SKL.MUOrcWarr_FLLA
        AnimationMode    = LOOP
      End
    End


    AnimationState = THROWN_PROJECTILE
      Animation        = Thrown
        AnimationName    = MUOrcWarr_SKL.MUOrcWarr_FLYB
        AnimationMode    = LOOP
      End
    End

    AnimationState        = MOVING CLIMBING BACKING_UP
      Animation         = ClimbingBackwards
        AnimationName    = MUOrcWarr_SKL.MUOrcWarr_CLMA
        AnimationMode    = LOOP_BACKWARDS
      End
    End
    
    AnimationState = MOVING BACKING_UP
    	Animation = BackingUp
    		AnimationName = MUOrcWarr_SKL.MUOrcWarr_BAKA
    		AnimationMode = LOOP
    	End
    	Flags = RANDOMSTART
    End
    
    AnimationState        = MOVING CLIMBING
      Animation         = Climbing
        AnimationName    = MUOrcWarr_SKL.MUOrcWarr_CLMA
        AnimationMode    = LOOP
      End
    End

;    AnimationState        = MOVING DAMAGED
 ;     Animation         = Moving
 ;       AnimationName    = MUOrcWarr_SKL.MUOrcWarr_IWKA
 ;       AnimationMode    = LOOP
 ;     End
 ;     Flags               = RANDOMSTART
 ;     ParticleSysBone     = None InfantryDustTrails
 ;   End

    AnimationState        = MOVING WANDER
      Animation         = Moving1
        AnimationName    = MUOrcWarr_SKL.MUOrcWarr_WLKA
        AnimationMode    = LOOP
      End
      Animation         = Moving2
        AnimationName    = MUOrcWarr_SKL.MUOrcWarr_WLKB
        AnimationMode    = LOOP
      End
      Animation         = Moving3
        AnimationName    = MUOrcWarr_SKL.MUOrcWarr_WLKC
        AnimationMode    = LOOP
      End
      Animation         = Moving4
        AnimationName    = MUOrcWarr_SKL.MUOrcWarr_WLKD
        AnimationMode    = LOOP
      End
      ParticleSysBone     = None InfantryDustTrails
    End
    
    AnimationState        = MOVING EMOTION_TERROR
      Animation         = Moving
        AnimationName    = MUOrcWarr_SKL.MUOrcWarr_RUNE
        AnimationMode    = LOOP
      End
      Animation         = Moving
        AnimationName    = MUOrcWarr_SKL.MUOrcWarr_RUND
        AnimationMode    = LOOP
      End
      Flags               = RANDOMSTART
      ParticleSysBone     = None InfantryDustTrails
    End
 
    AnimationState        = MOVING
      Animation         = Moving
        AnimationName    = MUOrcWarr_SKL.MUOrcWarr_RUNA
        AnimationMode    = LOOP
      End
      Flags               = RANDOMSTART
      ParticleSysBone     = None InfantryDustTrails
    End

	AnimationState        = FIRING_OR_PREATTACK_A
		Animation         = ATA
			AnimationName    = MUOrcWarr_SKL.MUOrcWarr_ATKA
			AnimationMode    = ONCE
			UseWeaponTiming		= Yes
		End
		Animation         = ATB1
			AnimationName    = MUOrcWarr_SKL.MUOrcWarr_ATKB
			AnimationMode    = ONCE
			UseWeaponTiming		= Yes
		End
		Animation         = ATC1
			AnimationName    = MUOrcWarr_SKL.MUOrcWarr_ATKC
			AnimationMode    = ONCE
			UseWeaponTiming		= Yes
		End
	End
 
    AnimationState      = DYING AFLAME
      Animation         = Flaming
        AnimationName    = MUOrcWarr_SKL.MUOrcWarr_MFDA
        AnimationMode    = ONCE
      End
    END
    
    AnimationState      = DYING
      Animation         = Dying1
        AnimationName    = MUOrcWarr_SKL.MUOrcWarr_DIEA
        AnimationMode    = ONCE
      End
      Animation         = Dying2
        AnimationName    = MUOrcWarr_SKL.MUOrcWarr_DIEB
        AnimationMode    = ONCE
      End
    End


    ; --- stunned anims
    AnimationState      = STUNNED_FLAILING 
      ;Animation         = Stunned1
      ;  AnimationName    = MUOrcWarr_SKL.MUOrcWarr_FLYA
      ;  AnimationMode    = LOOP
      ;End
      Animation         = Stunned2
        AnimationName    = MUOrcWarr_SKL.MUOrcWarr_FLYB
        AnimationMode    = LOOP
      End
      Animation         = Stunned3
        AnimationName    = MUOrcWarr_SKL.MUOrcWarr_FLYC
        AnimationMode    = LOOP
      End
      Flags             = RANDOMSTART
    End

    AnimationState      = STUNNED 
      Animation         = Stunned
        AnimationName    = MUOrcWarr_SKL.MUOrcWarr_LNDA
        AnimationMode    = ONCE
      End
     End

    AnimationState      = DYING SPLATTED 
      Animation         = Splatted
        AnimationName    = MUOrcWarr_SKL.MUOrcWarr_LNDA
        AnimationMode    = ONCE
      End
    End

    AnimationState      = STUNNED_STANDING_UP 
      Animation         = StunnedStandUp
        AnimationName    = MUOrcWarr_SKL.MUOrcWarr_LNDA
        AnimationMode    = ONCE_BACKWARDS
      End
      Flags             = START_FRAME_LAST
    End
    AnimationState = WAR_CHANT
		Animation = Chant
			AnimationName = MUOrcWarr_SKL.MUOrcWarr_IDLB
			AnimationMode = LOOP
		End
	End
  End
End

;------------------------------------------------------------------------------
; aka Morannan Orc Fat
ObjectReskin MordorMoranOrcFat MordorFighter
  Draw = W3DScriptedModelDraw ModuleTag_01

	  OkToChangeModelColor = Yes
	  
    DefaultModelConditionState
      Model               = MUOrcMorB_SKN
    End
    IdleAnimationState
      Animation = Idle1
        AnimationName       = MUOrcWarr_SKL.MUOrcWarr_IDLA
        AnimationPriority   = 20
        AnimationBlendTime  = 15
        AnimationSpeedFactorRange = 0.8 1.2
      End
      Animation = Idle2
        AnimationName       = MUOrcWarr_SKL.MUOrcWarr_IDLL
        AnimationPriority   = 20
        AnimationBlendTime  = 15
        AnimationSpeedFactorRange = 0.8 1.2
      End
      Animation = Idle3
        AnimationName       = MUOrcWarr_SKL.MUOrcWarr_IDLM
        AnimationPriority   = 20
        AnimationBlendTime  = 15
        AnimationSpeedFactorRange = 0.8 1.2
      End
      Animation = Idle4
        AnimationName       = MUOrcWarr_SKL.MUOrcWarr_IDLN
        AnimationPriority   = 20
        AnimationBlendTime  = 15
        AnimationSpeedFactorRange = 0.8 1.2
      End
      Animation = Idle5
        AnimationName       = MUOrcWarr_SKL.MUOrcWarr_IDLO
        AnimationPriority   = 20
        AnimationBlendTime  = 15
        AnimationSpeedFactorRange = 0.8 1.2
      End
      Animation = Idle5
        AnimationName       = MUOrcWarr_SKL.MUOrcWarr_IDLB
        AnimationBlendTime  = 15
        AnimationSpeedFactorRange = 0.8 1.2
      End
      Animation = Idle5
        AnimationName       = MUOrcWarr_SKL.MUOrcWarr_IDLC
        AnimationBlendTime  = 15
        AnimationSpeedFactorRange = 0.8 1.2
      End
      Animation = Idle5
        AnimationName       = MUOrcWarr_SKL.MUOrcWarr_IDLD
        AnimationBlendTime  = 15
        AnimationSpeedFactorRange = 0.8 1.2
      End
      Animation = Idle5
        AnimationName       = MUOrcWarr_SKL.MUOrcWarr_IDLE
        AnimationBlendTime  = 15
        AnimationSpeedFactorRange = 0.8 1.2
      End
      Animation = Idle5
        AnimationName       = MUOrcWarr_SKL.MUOrcWarr_IDLF
        AnimationBlendTime  = 15
        AnimationSpeedFactorRange = 0.8 1.2
      End
      Animation = Idle5
        AnimationName       = MUOrcWarr_SKL.MUOrcWarr_IDLG
        AnimationBlendTime  = 15
        AnimationSpeedFactorRange = 0.8 1.2
      End
      Animation = Idle5
        AnimationName       = MUOrcWarr_SKL.MUOrcWarr_IDLH
        AnimationBlendTime  = 15
        AnimationSpeedFactorRange = 0.8 1.2
      End
      Animation = Idle5
        AnimationName       = MUOrcWarr_SKL.MUOrcWarr_IDLI
        AnimationBlendTime  = 15
        AnimationSpeedFactorRange = 0.8 1.2
      End
      Animation = Idle5
        AnimationName       = MUOrcWarr_SKL.MUOrcWarr_IDLJ
        AnimationBlendTime  = 15
        AnimationSpeedFactorRange = 0.8 1.2
      End
      Animation = Idle5
        AnimationName       = MUOrcWarr_SKL.MUOrcWarr_IDLK
        AnimationBlendTime  = 15
        AnimationSpeedFactorRange = 0.8 1.2
        AnimationBlendTime  = 15
        AnimationSpeedFactorRange = 0.8 1.2
      End
    End
 
    AnimationState     = PASSENGER
      Animation        = Carried
        AnimationName    = MUOrcWarr_SKL.MUOrcWarr_FLLA
        AnimationMode    = LOOP
      End
    End


    AnimationState = THROWN_PROJECTILE
      Animation        = Thrown
        AnimationName    = MUOrcWarr_SKL.MUOrcWarr_FLYB
        AnimationMode    = LOOP
      End
    End

    AnimationState        = MOVING CLIMBING BACKING_UP
      Animation         = ClimbingBackwards
        AnimationName    = MUOrcWarr_SKL.MUOrcWarr_CLMA
        AnimationMode    = LOOP
      End
    End

    AnimationState        = MOVING CLIMBING
      Animation         = Climbing
        AnimationName    = MUOrcWarr_SKL.MUOrcWarr_CLMA
        AnimationMode    = LOOP
      End
    End

 ;   AnimationState        = MOVING DAMAGED
 ;     Animation         = Moving
 ;       AnimationName    = MUOrcWarr_SKL.MUOrcWarr_IWKA
 ;       AnimationMode    = LOOP
 ;     End
 ;     Flags               = RANDOMSTART
 ;     ParticleSysBone     = None InfantryDustTrails
 ;   End
 
	AnimationState			= MOVING BACKING_UP
		Animation			= BackingUp
			AnimationName	= MUOrcWarr_SKL.MUOrcWarr_BAKA
			AnimationMode	= LOOP
		End
		Flags = RANDOMSTART
	End

    AnimationState        = MOVING WANDER
      Animation         = Moving1
        AnimationName    = MUOrcWarr_SKL.MUOrcWarr_WLKA
        AnimationMode    = LOOP
      End
      Animation         = Moving2
        AnimationName    = MUOrcWarr_SKL.MUOrcWarr_WLKB
        AnimationMode    = LOOP
      End
      Animation         = Moving3
        AnimationName    = MUOrcWarr_SKL.MUOrcWarr_WLKC
        AnimationMode    = LOOP
      End
      Animation         = Moving4
        AnimationName    = MUOrcWarr_SKL.MUOrcWarr_WLKD
        AnimationMode    = LOOP
      End
      ParticleSysBone     = None InfantryDustTrails
    End
    
	AnimationState        = MOVING EMOTION_TERROR
		Animation         = Moving
			AnimationName    = MUOrcWarr_SKL.MUOrcWarr_RUND
			AnimationMode    = LOOP
		End
		Animation         = Moving
			AnimationName    = MUOrcWarr_SKL.MUOrcWarr_RUNE
			AnimationMode    = LOOP
		End

		Flags               = RANDOMSTART
		ParticleSysBone     = None InfantryDustTrails
    End
 
    AnimationState        = MOVING
      Animation         = Moving
        AnimationName    = MUOrcWarr_SKL.MUOrcWarr_RUNA
        AnimationMode    = LOOP
      End
      Flags               = RANDOMSTART
      ParticleSysBone     = None InfantryDustTrails
    End

    AnimationState        = FIRING_OR_PREATTACK_A
      Animation         = ATKA
        AnimationName    = MUOrcWarr_SKL.MUOrcWarr_ATKA
        AnimationMode    = ONCE
        UseWeaponTiming		= Yes
      End
      Animation         = ATKB
        AnimationName    = MUOrcWarr_SKL.MUOrcWarr_ATKB
        AnimationMode    = ONCE
        UseWeaponTiming		= Yes
      End
      Animation         = ATKC
        AnimationName    = MUOrcWarr_SKL.MUOrcWarr_ATKC
        AnimationMode    = ONCE
        UseWeaponTiming		= Yes
      End
    End

    AnimationState      = DYING AFLAME
      Animation         = Flaming
        AnimationName    = MUOrcWarr_SKL.MUOrcWarr_MFDA
        AnimationMode    = ONCE
      End
    END
    
    AnimationState      = DYING
      Animation         = Dying1
        AnimationName    = MUOrcWarr_SKL.MUOrcWarr_DIEA
        AnimationMode    = ONCE
      End
      Animation         = Dying2
        AnimationName    = MUOrcWarr_SKL.MUOrcWarr_DIEB
        AnimationMode    = ONCE
      End
    End


    ; --- stunned anims
    AnimationState      = STUNNED_FLAILING 
      ;Animation         = Stunned1
      ;  AnimationName    = MUOrcWarr_SKL.MUOrcWarr_FLYA
      ;  AnimationMode    = LOOP
      ;End
      Animation         = Stunned2
        AnimationName    = MUOrcWarr_SKL.MUOrcWarr_FLYB
        AnimationMode    = LOOP
      End
      Animation         = Stunned3
        AnimationName    = MUOrcWarr_SKL.MUOrcWarr_FLYC
        AnimationMode    = LOOP
      End
      Flags             = RANDOMSTART
    End

    AnimationState      = STUNNED 
      Animation         = Stunned
        AnimationName    = MUOrcWarr_SKL.MUOrcWarr_LNDA
        AnimationMode    = ONCE
      End
     End

    AnimationState      = DYING SPLATTED 
      Animation         = Splatted
        AnimationName    = MUOrcWarr_SKL.MUOrcWarr_LNDA
        AnimationMode    = ONCE
      End
    End

    AnimationState      = STUNNED_STANDING_UP 
      Animation         = StunnedStandUp
        AnimationName    = MUOrcWarr_SKL.MUOrcWarr_LNDA
        AnimationMode    = ONCE_BACKWARDS
      End
      Flags             = START_FRAME_LAST
    End
    AnimationState = WAR_CHANT
		Animation = Chant
			AnimationName = MUOrcWarr_SKL.MUOrcWarr_IDLB
			AnimationMode = LOOP
		End
	End

  End
End


;------------------------------------------------------------------------------
; DEMO Catapult that has a non-flaming rock
Object MordorCatapultDEMO                         ;BALANCE Catapult 
  ; *** ART Parameters ***

   ButtonImage = BMGreatSiegeWorks_Catapult

  Draw = W3DTruckDraw ModuleTag_01
	 StaticModelLODMode = Yes
     DefaultModelConditionState
      Model               = MUCatapult_SKN
      WeaponLaunchBone    = PRIMARY Projectile
	  End
	  IdleAnimationState
	    Animation = Idle1
        AnimationName       = MUCatapult_SKL.MUCatapult_IDLA
        AnimationMode       = ONCE
        AnimationBlendTime  = 15
      End
	    Animation = Idle1
        AnimationName       = MUCatapult_SKL.MUCatapult_IDLB
        AnimationMode       = ONCE
        AnimationBlendTime  = 15
      End
	    Animation = Idle1
        AnimationName       = MUCatapult_SKL.MUCatapult_IDLC
        AnimationMode       = ONCE
        AnimationBlendTime  = 15
      End
      BeginScript
        CurDrawableHideSubObject("ProjectileRock")
        CurDrawableHideSubObject("BoneProjectile")
      EndScript
    End

    AnimationState        = MOVING
      Animation = Move
        AnimationName       = MUCatapult_SKL.MUCatapult_MOVA
        AnimationMode       = LOOP
        AnimationSpeedFactorRange = 2.0 2.0           ; get those legs pumping!
      End
      ParticleSysBone     = WheelL02 GenericSiegeTrailDust
      ParticleSysBone     = WheelR02 GenericSiegeTrailDust
    End

    AnimationState        = FIRING_OR_PREATTACK_A 
      Animation			= ATKA
        AnimationName           = MUCatapult_SKL.MUCatapult_ATKA
        AnimationMode       = ONCE
      End
      ParticleSysBone     = Projectile FlamingRock FollowBone:Yes
      ParticleSysBone     = Projectile FlamingRockTrailLenzflare FollowBone:Yes
    End

    AnimationState        = TURN_LEFT 
      Animation = TurningLeft
        AnimationName           = MUCatapult_SKL.MUCatapult_TRNL
        AnimationMode       = LOOP
        AnimationSpeedFactorRange = 1.2 1.2
      End
      ParticleSysBone     = WheelL02 GenericSiegeTrailDust
      ParticleSysBone     = WheelR02 GenericSiegeTrailDust
    End

    AnimationState        = TURN_RIGHT 
      Animation = TurningRight
        AnimationName           = MUCatapult_SKL.MUCatapult_TRNR
        AnimationSpeedFactorRange = 1.2 1.2
        AnimationMode       = LOOP
      End
      ParticleSysBone     = WheelL02 GenericSiegeTrailDust
      ParticleSysBone     = WheelR02 GenericSiegeTrailDust
    End


    ModelConditionState        = DAMAGED
      Model               = MUCatpD
    End

    TrackMarks = EXTireTrack2_Temp.tga
    TrackMarksLeftBone = WheelL02
    TrackMarksRightBone = WheelR02



    ; These parameters are only used if the model has a separate suspension,
    ; and the locomotor has HasSuspension = Yes.
    LeftFrontTireBone           = WheelL01
    RightFrontTireBone          = WheelR01
    LeftRearTireBone            = WheelL02
    RightRearTireBone           = WheelR02
    TireRotationMultiplier      = 0.2   ; this * speed = rotation.
    PowerslideRotationAddition  = 2.5   ; This speed is added to the rotation speed when powersliding.

    ParticlesAttachedToAnimatedBones = Yes

 End
 
  ; ***DESIGN parameters ***
  Side = Mordor
  EditorSorting = UNIT
	ThreatLevel = 1.0
  TransportSlotCount = 1
  WeaponSet
    Conditions          = None 
    Weapon              = PRIMARY     MordorCatapultRockDemo
  End
  ArmorSet
    Conditions      = None
    Armor           = NoArmor
    DamageFX        = None
  End
  VisionRange = 360.0
  ShroudClearingRange = 360
  DisplayName = OBJECT:MordorCatapult
  CrushableLevel = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CrusherLevel   = 0  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  ImmuneToShockwave = Yes
  CommandPoints = 1


	; *** AUDIO Parameters ***;
	
	VoiceSelect		= CatapultVoiceSelect
	VoiceMove		= CatapultVoiceMove
	VoiceMove2		= OrcVoiceMove2
	VoiceAttack		= CatapultVoiceAttack

	;SoundMoveStart		= CatapultMoveStart
	SoundMoveLoop		= CatapultMoveLoop
  
	;UnitSpecificSounds
	;	VoiceGarrison			= NoSound
	;	VoiceEnter			= NoSound
	;	VoiceEnterHostile		= NoSound
	;	VoiceGetHealed			= NoSound
	;End

	EvaEventDamagedOwner = UnitUnderAttack 		;Eva event to trigger when unit is damaged


  ; *** ENGINEERING Parameters ***

  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS MACHINE SCORE CAN_ATTACK  
 
  Body = ActiveBody ModuleTag_02
    MaxHealth         = 10                  ;BALANCE Catapult Health
    MaxHealthDamaged  = 5
    ;RecoveryTime      = 5000
  End
 
  Behavior = AIUpdateInterface ModuleTag_03
  		AttackPriority				= 	AttackPriority_Infantry
  End

  LocomotorSet
    Locomotor = CatapultLocomotor
    Condition = SET_NORMAL
    Speed     = 12
  End
 
  Behavior = PhysicsBehavior ModuleTag_04
  End
 
  Behavior = SlowDeathBehavior ModuleTag_05
    DeathTypes = NONE +EXPLODED +BURNED
    SinkDelay = 3000
    SinkRate = 0.40     ; in Dist/Sec
    DestructionDelay = 0  ;8000
    OCL = FINAL OCL_MordorCatapultExplodeDeath
    FX = INITIAL FX_CatapultDieExplosion
  End

  Behavior = SlowDeathBehavior ModuleTag_06 
    DeathTypes = ALL -EXPLODED -BURNED
    SinkDelay = 3000
    SinkRate = 0.40     ; in Dist/Sec
    DestructionDelay = 0  ;8000
    OCL = FINAL OCL_MordorCatapultDeath
    FX = INITIAL FX_CatapultDie
  End

  Behavior = SquishCollide ModuleTag_07
    ;nothing
  End

  Behavior = TransitionDamageFX ModuleTag_8
;    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:FireBuildingLarge         ; persistant damage effect
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_GondorCatapultTransitionMedium     ; damage impact particle effect
;   ReallyDamagedOCL1 = Loc: X:0 Y:0 Z:0 OCL:OCL_FireFieldSmall                           ; spawn debris and splinters
  End
 
  Geometry = BOX
  GeometryMajorRadius = 24.0
  GeometryMinorRadius = 8.0
  GeometryHeight = 18.4
  GeometryIsSmall = No
  Shadow = SHADOW_VOLUME
End

;;------------------------------------------------------------------------------
; aka Drummer Troll
Object MordorDrummerTroll
	; ***ART Parameters ***
    ButtonImage		= BMTrollCages_DrummerTroll
    SelectPortrait	= UPMordor_DrummerTroll
	
	Draw = W3DScriptedModelDraw ModuleTag_01  
		  
		  OkToChangeModelColor = Yes
		  
		  StaticModelLODMode = Yes
		  
		DefaultModelConditionState
			Model               = MuDrmTroll_SKN
		End
		
		IdleAnimationState
			StateName = STATE_Idle
			
			Animation           		= SticksDownBreathe
				AnimationName     	= MuDrmTroll_SKL.MuDrmTroll_IDLB
				AnimationMode     	= ONCE
				AnimationPriority	= 10
			End
			Animation           		= SticksDownBreathe
				AnimationName     	= MuDrmTroll_SKL.MuDrmTroll_IDLB
				AnimationMode     	= ONCE
				AnimationPriority	= 10
			End
			Animation           		= ButtScratch
				AnimationName     	= MuDrmTroll_SKL.MuDrmTroll_IDLC
				AnimationMode     	= ONCE
				AnimationPriority	= 1
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Selected" then CurDrawableSetTransitionAnimState("TRANS_SelectedToIdle") end
			EndScript
		End
		
	; Splatted death goes first, independant of death flags
	ModelConditionState    = DYING DECAY SPLATTED
		Model                = MUDrmTroll_DISB
		RetainSubObjects = Yes
	End;

	AnimationState         = DYING DECAY SPLATTED 
		Animation            = dead1
			AnimationName       = MUDrmTroll_DISB.MUDrmTroll_DISB
			AnimationMode      = ONCE
		End
	End

	ModelConditionState    = DYING DECAY 
		Model                = MUDrmTroll_DISA
		RetainSubObjects = Yes
	End;

	AnimationState         = DYING DECAY  
		Animation            = dead1
			AnimationName       = MUDrmTroll_DISA.MUDrmTroll_DISA
			AnimationMode      = ONCE
		End
	End

		AnimationState        			= STUNNED_FLAILING
			Animation           		= FLYA
				AnimationName     	= MuDrmTroll_SKL.MuDrmTroll_FLYA
				AnimationMode     	= LOOP
			End
		End
		
		AnimationState = DYING SPLATTED
			Animation
				AnimationName = MuDrmTroll_SKL.MuDrmTroll_LNDA
				AnimationMode = ONCE
			End
		End

		AnimationState        			= DYING
			Animation           		= DIEA
				AnimationName     	= MuDrmTroll_SKL.MuDrmTroll_DTHA
				AnimationMode     	= ONCE
			End
			ParticleSysBone = B_PELVIS TrollDrmSplatDust FollowBone:Yes
			ParticleSysBone = BAT_HEAD TrollDrmSplatDust FollowBone:Yes
		End
		
		AnimationState        			= STUNNED_STANDING_UP
			Animation           		= GTPA
				AnimationName     	= MuDrmTroll_SKL.MuDrmTroll_GTPA
				AnimationMode     	= ONCE
			End
		End
		
		AnimationState        			= STUNNED
			Animation           		= LNDA
				AnimationName     	= MuDrmTroll_SKL.MuDrmTroll_LNDA
				AnimationMode     	= ONCE
			End
			ParticleSysBone = B_PELVIS TrollDrmFallDust FollowBone:Yes
			ParticleSysBone = BAT_HEAD TrollDrmFallDust FollowBone:Yes
		End

		AnimationState = MOVING FIRING_OR_PREATTACK_A
			Animation = TrotAndFire
				AnimationName = MuDrmTroll_SKL.MuDrmTroll_ATRA
				AnimationMode = LOOP
			End
			Flags = RANDOMSTART
			;ParticleSysBone = None InfantryDustTrails
		End
		
		
		AnimationState 				= TURN_LEFT
			Animation = Moving
				AnimationName 		= MuDrmTroll_SKL.MuDrmTroll_TRNL
				AnimationMode 		= LOOP
				AnimationBlendTime 	= 10
			End
			ParticleSysBone = None InfantryDustTrails
		End

		AnimationState 				= TURN_RIGHT
			Animation = Moving
				AnimationName 		= MuDrmTroll_SKL.MuDrmTroll_TRNR
				AnimationMode 		= LOOP
				AnimationBlendTime 	= 10
			End
			ParticleSysBone = None InfantryDustTrails
		End
		
		AnimationState				= MOVING PANICKING
			Animation			= RUNM
				AnimationName		= MuDrmTroll_SKL.MuDrmTroll_MFDA
				AnimationMode		= LOOP
			End
			Flags				= RANDOMSTART
		End
		
		AnimationState				= MOVING WANDER
			Animation			= WLKA
				AnimationName		= MuDrmTroll_SKL.MuDrmTroll_WLKA
				AnimationMode		= LOOP
			End
			FXEvent	= Frame:6 Name:FX_TrollRightFootStep
			FXEvent	= Frame:26 Name:FX_TrollLeftFootStep
			FXEvent	= Frame:45 Name:FX_TrollRightFootStep
			FXEvent	= Frame:65 Name:FX_TrollLeftFootStep
		End

		AnimationState = MOVING
			Animation = Moving
				AnimationName 		= MuDrmTroll_SKL.MuDrmTroll_WLKA
				AnimationMode 		= ONCE
				AnimationPriority = 20
				Distance = 55 
			End
			Animation = Moving
				AnimationName 		= MuDrmTroll_SKL.MuDrmTroll_WLKA
				AnimationMode 		= ONCE
				AnimationPriority = 20
				Distance = 55 
			End
			Animation = DrumCorp
				AnimationName 		= MuDrmTroll_SKL.MuDrmTroll_WLKB
				AnimationMode 		= ONCE
				AnimationPriority = 1
				Distance = 55 
			End
			Flags = RESTART_ANIM_WHEN_COMPLETE
			FXEvent	= Frame:6 Name:FX_TrollRightFootStep
			FXEvent	= Frame:26 Name:FX_TrollLeftFootStep
			FXEvent	= Frame:45 Name:FX_TrollRightFootStep
			FXEvent	= Frame:65 Name:FX_TrollLeftFootStep
		End
		
		AnimationState        			= FIRING_OR_PREATTACK_A
			Animation           		= StickSwipe
				AnimationName     	= MuDrmTroll_SKL.MuDrmTroll_ATKA
				AnimationMode = ONCE
				UseWeaponTiming = Yes
			End
			Animation           		= FrontKick
				AnimationName     	= MuDrmTroll_SKL.MuDrmTroll_ATKB
				AnimationMode = ONCE
				UseWeaponTiming = Yes
			End
;			ParticleSysBone = B_STICKR TrollDrmAtk  FollowBone:Yes        ;removed because kick has Dust Effect
			BeginScript
				if CurDrawableIsCurrentTargetKindof("STRUCTURE") or CurDrawableIsCurrentTargetKindof("MONSTER") then
					return ("FrontKick")
				else
					return ("StickSwipe")
				end
			EndScript
		End
		
    	AnimationState 				= HIT_REACTION HIT_LEVEL_1 SELECTED
			Animation 			= Hit_Level_1_a
	      			AnimationName 		= MuDrmTroll_SKL.MuDrmTroll_HITB
		    		AnimationMode = ONCE
			End
    	End

    	AnimationState 				= HIT_REACTION HIT_LEVEL_1
			Animation 			= Hit_Level_1_a
	      			AnimationName 		= MuDrmTroll_SKL.MuDrmTroll_HITA
		    		AnimationMode = ONCE
			End
    	End

    	AnimationState = WAR_CHANT
			Animation = Chant
				AnimationName = MuDrmTroll_SKL.MuDrmTroll_IDLD 
				AnimationMode = LOOP
			End
		End
		
		AnimationState        = SELECTED
			StateName           = STATE_Selected
			Animation           = SticksUpBreathe
				AnimationName     = 
				AnimationMode     = ONCE
				AnimationPriority = 10
			End
			Animation           = SticksUpBreathe
				AnimationName     = MuDrmTroll_SKL.MuDrmTroll_ATNB
				AnimationMode     = ONCE
				AnimationPriority = 10
			End
			Animation           = DrumSolo
				AnimationName     = MuDrmTroll_SKL.MuDrmTroll_IDLD
				AnimationMode     = ONCE
				AnimationPriority = 1
			End
			
			Flags = RESTART_ANIM_WHEN_COMPLETE
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Idle" then CurDrawableSetTransitionAnimState("TRANS_IdleToSelected") end
			EndScript
		End

; --------- Just built ------------
		
	AnimationState = JUST_BUILT
		Animation
			AnimationName = MuDrmTroll_SKL.MuDrmTroll_BLDA
			AnimationMode = ONCE
			AnimationBlendTime = 0
;	        AnimationSpeedFactorRange = 0.9 0.9			
		End	
	End	
			
		TransitionState       = TRANS_IdleToSelected
			Animation           = ATNA
				AnimationName     = MuDrmTroll_SKL.MuDrmTroll_ATNA
				AnimationMode     = ONCE
				AnimationSpeedFactorRange = 0.9 1.0
			End
		End
		TransitionState       = TRANS_SelectedToIdle
			Animation           = ATNA
				AnimationName     = MuDrmTroll_SKL.MuDrmTroll_ATNA
				AnimationMode     = ONCE_BACKWARDS 
				AnimationSpeedFactorRange = 0.9 1.0
			End
			Flags = START_FRAME_LAST
		End

	End
		
; ***DESIGN parameters ***
	Side = Mordor
	EditorSorting = UNIT
	ThreatLevel = 1.0
	TransportSlotCount = 1

	WeaponSet
		Conditions          =  None
		Weapon              =  PRIMARY    MordorDrummerTrollPunch
	End

	ArmorSet
		Conditions      = None
		Armor           = CavalryArmor
		DamageFX        = NormalDamageFX
	End

	BuildFadeInOnCreateTime = 4.7
	
  	VisionRange = VISION_STANDARD_MELEE
  	ShroudClearingRange = SHROUD_CLEAR_STANDARD

	BountyValue = MORDOR_DRUMMERTROLL_BOUNTY_VALUE
	DisplayName = OBJECT:MordorDrummerTroll
	CrushableLevel = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles

	CrusherLevel = 1	
	UseCrushAttack = No  ; Don't attack using crush, just crush when you walk through.  
	CrushWeapon		= TrollCrush
	
	CommandSet = MordorDrummerTrollCommandSet
	CommandPoints = 10
	

; *** AUDIO Parameters ***;

	VoiceAttack			= TrollVoiceAttack
	VoiceCreated			= CampOrcCreateDrummerTroll
	VoiceFullyCreated 		= CampOrcCreateDrummerTroll
	VoiceMove			= TrollVoiceMove
	VoicePriority			= 18
	VoiceSelect			= TrollVoiceSelect
	VoiceGuard			= TrollVoiceMove

	SoundImpact			= ImpactHorse
	
	;UnitSpecificSounds
	;	VoiceGarrison		= NoSound
	;End

	EvaEventDamagedOwner		= UnitUnderAttack 		;Eva event to trigger when unit is damaged

	Behavior = LargeGroupAudioUpdate ModuleTag_LGAU			;Tie into LargeGroupAudio system
  		Key = Troll
	End

	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		MaxUpdateRangeCap = 800
		AnimationSound = Sound:DrummerTrollWalkingVox				Animation:MUDRMTROLL_SKL.MUDRMTROLL_WLKA Frames:33 75
		AnimationSound = Sound:DrummerTrollWalkingVox				Animation:MUDRMTROLL_SKL.MUDRMTROLL_WLKB Frames:33 75
		AnimationSound = Sound:TrollRoar						Animation:MUDRMTROLL_SKL.MUDRMTROLL_IDLD Frames:0	
		AnimationSound = Sound:TrollRoar						Animation:MuDrmTroll_SKL.MuDrmTroll_MFDA Frames:30 
		AnimationSound = Sound:DrummerTrollCreatedRoar				Animation:MUDRMTROLL_SKL.MUDRMTROLL_BLDA Frames:85 
		;AnimationSound = Sound:TrollRoar	ExcludedMC:Selected		Animation:MuDrmTroll_SKL.MuDrmTroll_ATNA Frames:15
		AnimationSound = Sound:TrollRoar	ExcludedMC:Selected		Animation:MuDrmTroll_SKL.MuDrmTroll_ATNA Frames:28
		;note:  "ExcludedMC:Selected" in the above syntax prevents backwards and forwards animationsound issue
		AnimationSound = Sound:DrumHit						Animation:MUDRMTROLL_SKL.MUDRMTROLL_IDLD Frames:4 14 21 32 38 48 
		AnimationSound = Sound:DrumHit						Animation:MUDRMTROLL_SKL.MUDRMTROLL_WLKA Frames:38 41 80
		AnimationSound = Sound:DrumHit						Animation:MUDRMTROLL_SKL.MUDRMTROLL_WLKB Frames:36 40 53 67 80
		AnimationSound = Sound:DrumHit						Animation:MUDRMTROLL_SKL.MUDRMTROLL_BLDA Frames:100 104
		AnimationSound = Sound:TrollBodyfall					Animation:MUDRMTROLL_SKL.MUDRMTROLL_DTHA Frames:40
		AnimationSound = Sound:TrollBodyfall					Animation:MUDRMTROLL_SKL.MUDRMTROLL_LNDA Frames:3 21
		AnimationSound = Sound:TrollFootstep					Animation:MUDRMTROLL_SKL.MUDRMTROLL_BLDA Frames:35 49 68 80 91
		AnimationSound = Sound:TrollFootstep					Animation:MUDRMTROLL_SKL.MUDRMTROLL_WLKA Frames:2 22 42 62 
		AnimationSound = Sound:TrollFootstep					Animation:MUDRMTROLL_SKL.MUDRMTROLL_WLKB Frames:2 22 42 62 
		AnimationSound = Sound:TrollFootstep					Animation:MuDrmTroll_SKL.MuDrmTroll_GTPA Frames:19 44 78
		AnimationSound = Sound:TrollFootstep					Animation:MuDrmTroll_SKL.MuDrmTroll_MFDA Frames:10 22 35 47 
		AnimationSound = Sound:TrollFootstep					Animation:MuDrmTroll_SKL.MuDrmTroll_TRNL Frames:15 24
		AnimationSound = Sound:TrollFootstep					Animation:MuDrmTroll_SKL.MuDrmTroll_TRNR Frames:15 24 
		AnimationSound = Sound:TrollFootstep					Animation:MuDrmTroll_SKL.MuDrmTroll_DTHA Frames:11 18
		AnimationSound = Sound:TrollFootstep					Animation:MuDrmTroll_SKL.MuDrmTroll_RUNA Frames:10 22
	End
	

; *** ENGINEERING Parameters ***

  	RadarPriority = UNIT
  	KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS TROLL MONSTER SCORE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT WORKING_PASSENGER NO_FREEWILL_ENTER PATH_THROUGH_INFANTRY ARMY_SUMMARY SCARY

    BuildCost = MORDOR_DRUMMERTROLL_BUILDCOST
    BuildTime = MORDOR_DRUMMERTROLL_BUILDTIME	

  	Body = ActiveBody ModuleTag_Body
		CheerRadius 		= EMOTION_CHEER_RADIUS
   		MaxHealth         	= MORDOR_DRUMMERTROLL_HEALTH
   		MaxHealthDamaged  	= MORDOR_DRUMMERTROLL_HEALTH_DAMAGED
  	End
   
	Behavior = AIUpdateInterface ModuleTag_AIUpdateInterface
    		AutoAcquireEnemiesWhenIdle = Yes ATTACK_BUILDINGS
; Doesn't rampage, no scripts     		AILuaEventsList = TrollFunctions
     		AttackPriority				= AttackPriority_Cavalry
  	End
  	
	Behavior = AttributeModifierAuraUpdate ModuleTag_Leadership
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= DrummerTrollPassiveLeadership
		RefreshDelay	= 2000
		Range			= 200
		AllowPowerWhenAttacking = No
		ObjectFilter	= ANY +INFANTRY +CAVALRY +MONSTER -STRUCTURE -BASE_FOUNDATION -HERO
	End	

	LocomotorSet
		Locomotor = HumanLocomotor
		Condition = SET_NORMAL 
		Speed     = 32
	End

	Behavior = SlowDeathBehavior ModuleTag_SlowDeathBehavior
		DeathTypes = ALL 
		DestructionDelay = 35000
		DecayBeginTime = 3000
		SinkDelay = 13000
		SinkRate = 0.64     ; in Dist/Sec
		Sound = INITIAL TrollDie
	End

  	Behavior = PhysicsBehavior ModuleTag_PhysicsBehavior
    	GravityMult = 1.0
    	ShockStandingTime = 3000	;msec
  	End

	Behavior = SquishCollide ModuleTag_SquishCollide
		;nothing
	End
	
  Behavior = HitReactionBehavior HitReactionBehaviorModuleTag
    HitReactionLifeTimer1 = 1200 ; level 1 (light  damage)  hit reaction animations in frames (5 per sec)

    HitReactionThreshold1 = 50.0   ; level 1 (light  damage) threshold trigger
  End

	Geometry = CYLINDER
	GeometryMajorRadius = 17.6
	GeometryHeight = 32.0
	GeometryIsSmall = No
	Shadow = SHADOW_VOLUME_NON_SELF_2; volumetric shadow that doesn't cast onto all objects using SHADOW_VOLUME_NON_SELF_2
;	Shadow                = SHADOW_VOLUME

End

;;------------------------------------------------------------------------------
;;--------JDG 4/29/04 adding a new unit -- OrcScout -- Used in Evil Shelob-----
;;------------------------------------------------------------------------------

Object MordorOrcScout_Unit
  ; *** ART Parameters ***

  Draw = W3DHordeModelDraw ModuleTag_01

	OkToChangeModelColor = Yes
	  
	StaticModelLODMode = Yes
	; specify options for static LODs
	LodOptions	= LOW
		AllowMultipleModels		=	ALLOW_MULTIPLE_MODELS_LOW
		MaxRandomTextures		=	MAX_RANDOM_TEXTURES_LOW
		MaxRandomAnimations		=	MAX_RANDOM_ANIMATIONS_LOW
		MaxAnimFrameDelta		=	MAX_ANIM_FRAME_DELTA_LOW
	End
	
	LodOptions	= MEDIUM
		AllowMultipleModels		=	ALLOW_MULTIPLE_MODELS_MED
		MaxRandomTextures		=	MAX_RANDOM_TEXTURES_MED
		MaxRandomAnimations		=	MAX_RANDOM_ANIMATIONS_MED
		MaxAnimFrameDelta		=	MAX_ANIM_FRAME_DELTA_MED
	End
	
	LodOptions	= HIGH
		AllowMultipleModels		=	ALLOW_MULTIPLE_MODELS_HIGH
		MaxRandomTextures		=	MAX_RANDOM_TEXTURES_HIGH
		MaxRandomAnimations		=	MAX_RANDOM_ANIMATIONS_HIGH
		MaxAnimFrameDelta		=	MAX_ANIM_FRAME_DELTA_HIGH
	End

    DefaultModelConditionState
      Model               = MUOrcTorch_SKN
    End

    IdleAnimationState
      Animation = Idle
        AnimationName       = MUOrcTorch_SKL.MUOrcTorch_IDL
        AnimationMode       = ONCE
      End
      ParticleSysBone     = Pike FireTorch FollowBone:Yes
      ParticleSysBone     = Pike OrcTorchFlare FollowBone:Yes
    End
 
    ; --- stunned anims
    AnimationState      = STUNNED_FLAILING 
      Animation = Fly
        AnimationName     = MUOrcTorch_SKL.MUOrcTorch_FLYA
        AnimationMode     = LOOP
      End
      Flags             = RANDOMSTART
    End

    AnimationState      = STUNNED 
      Animation = StunDie
        AnimationName     = MUOrcTorch_SKL.MUOrcTorch_SPLT
        AnimationMode     = ONCE
      End
    End

    AnimationState        = MOVING
	  ShareAnimation = Yes
      Animation = March
        AnimationName       = MUOrcTorch_SKL.MUOrcTorch_MRCH 
        AnimationMode       = LOOP
        Distance            = 20
      End
      Flags               = RANDOMSTART
      ParticleSysBone     = Pike FireTorch FollowBone:Yes
      ParticleSysBone     = Pike OrcTorchFlare FollowBone:Yes
    End

    AnimationState      = DYING
      Animation = Die
        AnimationName     = MUOrcTorch_SKL.MUOrcTorch_SPLT
        AnimationMode     = ONCE
      End
    End
    
    AnimationState = WAR_CHANT
		Animation = Chant
			AnimationName = MUOrcTorch_SKL.MUOrcTorch_TNTA ;doesn't exist though...
			AnimationMode = LOOP
		End
	End
			
	;-emotions--
	AnimationState							= EMOTION_TAUNTING
		Animation							= TNTA
			AnimationName					= MUOrcTorch_SKL.MUOrcTorch_TNTA
			AnimationMode					= LOOP
		End
	End
	AnimationState							= EMOTION_POINTING
		Animation							= Pointing1
			AnimationName					= MUOrcTorch_SKL.MUOrcTorch_PNTA
			AnimationMode					= LOOP
		End
	End
	AnimationState							= EMOTION_CELEBRATING
		Animation                           = CHRA
			AnimationName					= MUOrcTorch_SKL.MUOrcTorch_CHRA
			AnimationMode					= ONCE
		End
	End
  End

  Draw = W3DLightDraw ModuleTag_02
    Ambient = R:0 G:0 B:0
    Diffuse = R:255 G:100 B:0
    Radius = 90
    Intensity = 6
    AttachToBoneInAnotherModule = Pike
  End 

  ; ***DESIGN parameters ***
  Side = Mordor
  EditorSorting = UNIT
  ;Browser = UNIT
  TransportSlotCount = 1
  ArmorSet
    Conditions      = None
    Armor           = NoArmor
    DamageFX        = None
  End
  VisionRange = 120.0
  DisplayName = OBJECT:MordorOrcTorch
  CrushableLevel = 0  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CrusherLevel = 0 ;What can I crush?: 0 = small animals, 1 = infantry, 2 = trees, 3 = vehicles
  CommandPoints = 1
 

	; *** AUDIO Parameters ***;

	VoiceAttack			= OrcFighterVoiceAttack		;UrukVoiceAttack	;MordorOrcHordeVoiceAttack
	VoiceAttack2		= OrcVoiceAttack2
 	VoiceAttackCharge		= OrcFighterVoiceAttackCharge	;MordorOrcHordeVoiceAttackCharge
	VoiceAttackStructure	= OrcFighterVoiceAttackBuilding
	VoiceCreated		= CampOrcCreateOrcHorde
	VoiceFullyCreated 	= CampOrcCreateOrcHorde
	VoiceMove			= OrcFighterVoiceMove		;UrukVoiceMove		;MordorOrcHordeVoiceMove
	VoiceMove2			= OrcVoiceMove2
	VoiceMoveToCamp		= OrcFighterVoiceMoveCamp
	VoicePriority		= 48
	VoiceRetreatToCastle	= OrcFighterVoiceRetreat
	VoiceSelect			= OrcFighterVoiceSelect		;UrukVoiceSelect	;MordorOrcHordeVoiceSelect
	VoiceSelectBattle		= OrcFighterVoiceSelectBattle
	VoiceGuard			= OrcFighterVoiceMove

	SoundImpact			= ImpactHorse			;UrukDie


	UnitSpecificSounds
		VoiceGarrison	= OrcFighterVoiceGarrison
		VoiceEnterUnitSlaughterHouse	= OrcFighterVoiceGarrisonSlaughterHouse
	End

	EvaEventDamagedOwner = UnitUnderAttack 		;Eva event to trigger when unit is damaged
	;EvaEventDieOwner = GroupOrcHordeDie		;Eva event to trigger on unit's death. NOTICE THAT this is only for permanent deaths
							;For deaths you can respawn from, use the DeathFX


  ; *** ENGINEERING Parameters ***

  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE 
 
  Body = ActiveBody ModuleTag_03
    MaxHealth       = 50.0                  ;BALANCE Orc Warrior Health
  End
 
  Behavior = AIUpdateInterface ModuleTag_04
  End
 
  LocomotorSet
    Locomotor = HumanLocomotor
    Condition = SET_NORMAL 
    Speed     = 40
  End

  LocomotorSet
    Locomotor = HumanWanderLocomotor
    Condition = SET_WANDER 
    Speed     = 16
  End

  Behavior = PhysicsBehavior ModuleTag_05
    GravityMult = 1.0
  End
 
  Behavior = SlowDeathBehavior ModuleTag_06
    DeathTypes = ALL 
    SinkDelay = 3000
    SinkRate = 0.40     ; in Dist/Sec
    DestructionDelay = 8000
    Sound = INITIAL OrcVoiceDie
  End
 
  Behavior = SquishCollide ModuleTag_07
    ;nothing
  End
 
  Geometry = CYLINDER
  GeometryMajorRadius = 8.0
  GeometryMinorRadius = 8.0
  GeometryHeight = 9.6
  GeometryIsSmall = Yes
  Shadow = SHADOW_DECAL
  ShadowSizeX = 11;
  ShadowSizeY = 11;
  ShadowTexture = ShadowI;
End

;-----------------------------------------------------------------------------------------
; Webbed humanoid that does nothing except wait until the player comes along to kill them.
; Once killed, the collapse death will play and at the end, will spawn a fresh MordorFighter
;-----------------------------------------------------------------------------------------
Object WebbedHumanoidWithMordorFighterInside
	; *** ART Parameters ***

	Draw = W3DScriptedModelDraw ModuleTag_01
		OkToChangeModelColor = Yes
		
		DefaultModelConditionState
			Model               = CUWebdVctm_SKN
			Skeleton            = CUWebdVctm_SKL
			ParticleSysBone     = None WitchKingPoison
		End
   
		IdleAnimationState
			StateName				= STATE_Idle
			Animation				= WIGA	;Medium wiggle
				AnimationName       = CUWebdVctm_WIGA
				AnimationMode       = ONCE
			End
			Animation				= WIGB	;Subtle wiggle
				AnimationName       = CUWebdVctm_WIGB
				AnimationMode       = ONCE
			End
			Animation				= WIGC	;Violent wiggle
				AnimationName       = CUWebdVctm_WIGC
				AnimationMode       = ONCE
			End
			Flags               = RESTART_ANIM_WHEN_COMPLETE
		End
		
		ModelConditionState DYING
			Model               = MUOrcWarr_SKN
			Skeleton            = MUOrcWarr_SKL
		End
   
		TransitionState       = TRANS_IdleToDying
			Animation           = LNDA
				AnimationName     = MUOrcWarr_LNDA
				AnimationMode     = ONCE
			End
		End

		AnimationState        = DYING
			Animation           = GTPA
				AnimationName     = MUOrcWarr_GTPA
				AnimationMode     = ONCE
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Idle" then CurDrawableSetTransitionAnimState("TRANS_IdleToDying") end
			EndScript
		End
	End
	
	; ***DESIGN parameters ***
	Side = Mordor
	EditorSorting = UNIT
	ThreatLevel = 1.0
	CommandPoints = 0
	CrushableLevel = 2 ;What am I?: 0 = for infantry, 1 = for trees, 2 = general vehicles

	DisplayName = OBJECT:MordorFighter
	
	ArmorSet
		Conditions      = None
		Armor           = EvilShelobsWebbedUnitArmor
		DamageFX        = NormalDamageFX
	End
	
	; *** ENGINEERING Parameters ***
	RadarPriority = UNIT
	KindOf = PRELOAD CAN_CAST_REFLECTIONS INFANTRY NOT_AUTOACQUIRABLE WEBBED
	
	;Total hack to get unit to work. STRUCTURE units still have problems getting targeted.	
	Behavior = AIUpdateInterface ModuleTag_03
	End
	Behavior = PhysicsBehavior ModuleTag_Physics
		GravityMult = 1.0
	End
	LocomotorSet
		Locomotor     = WebbedLocomotor
		Condition     = SET_NORMAL
		Speed         = 0
	End
	;End hack
	
	ImmuneToShockwave = Yes
	
	Body = ActiveBody ModuleTag_02
		MaxHealth         = 200                  ;BALANCE 
		MaxHealthDamaged  = 100
		;RecoveryTime      = 5000
	End
	
	Behavior = SlowDeathBehavior ModuleTag_05
		DeathTypes = ALL
		DestructionDelay = 2667 ;Matches length of animations of TRANS_IdleToDying + DYING states
		; Sound = INITIAL HumanVoiceDie
		OCL = FINAL OCL_CreateMordorFighter
	End

	Geometry = CYLINDER
	GeometryMajorRadius = 8.0
	GeometryMinorRadius = 8.0
	GeometryHeight = 19.2
	GeometryIsSmall = No

    Shadow = SHADOW_DECAL
    ShadowSizeX = 19;
    ShadowSizeY = 19;
    ShadowTexture = ShadowI;

End

;-----------------------------------------------------------------------------------------
; Webbed humanoid that does nothing except wait until the player comes along to kill them.
; Once killed, the collapse death will play and at the end, will spawn a fresh MordorArcher
;-----------------------------------------------------------------------------------------
Object WebbedHumanoidWithMordorArcherInside
	; *** ART Parameters ***

	Draw = W3DScriptedModelDraw ModuleTag_01
		OkToChangeModelColor = Yes
		
		DefaultModelConditionState
			Model               = CUWebdVctm_SKN
			Skeleton            = CUWebdVctm_SKL
			ParticleSysBone     = None WitchKingPoison
		End
   
		IdleAnimationState
			StateName				= STATE_Idle
			Animation				= WIGA	;Medium wiggle
				AnimationName       = CUWebdVctm_WIGA
				AnimationMode       = ONCE
			End
			Animation				= WIGB	;Subtle wiggle
				AnimationName       = CUWebdVctm_WIGB
				AnimationMode       = ONCE
			End
			Animation				= WIGC	;Violent wiggle
				AnimationName       = CUWebdVctm_WIGC
				AnimationMode       = ONCE
			End
			Flags               = RESTART_ANIM_WHEN_COMPLETE
		End
		
		ModelConditionState DYING
			Model               = MUOrcArchr_SKN
			Skeleton            = MUOrcArchr_SKL
		End
   
		TransitionState       = TRANS_IdleToDying
			Animation           = LNDA
				AnimationName     = MUOrcArchr_LNDA
				AnimationMode     = ONCE
			End
		End

		AnimationState        = DYING
			Animation           = GTPA
				AnimationName     = MUOrcArchr_GTPA
				AnimationMode     = ONCE
			End
			BeginScript
				CurDrawableHideSubObject("ARROWFIRE")
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Idle" then CurDrawableSetTransitionAnimState("TRANS_IdleToDying") end
			EndScript
		End
	End
	
	; ***DESIGN parameters ***
	Side = Mordor
	EditorSorting = UNIT
	ThreatLevel = 1.0
	CommandPoints = 0
	CrushableLevel = 2 ;What am I?: 0 = for infantry, 1 = for trees, 2 = general vehicles

	DisplayName = OBJECT:MordorArcher

	ArmorSet
		Conditions      = None
		Armor           = EvilShelobsWebbedUnitArmor
		DamageFX        = NormalDamageFX
	End
	
	; *** ENGINEERING Parameters ***
	RadarPriority = UNIT
	;This webbed unit needs to be a STRUCTURE IMMOBILE in order to be properly attacked by melee units.
	;Otherwise it is optimized out of the AI acquire system -- must be a structure or have a locomotor.
	KindOf = PRELOAD CAN_CAST_REFLECTIONS INFANTRY NOT_AUTOACQUIRABLE WEBBED

	;Total hack to get unit to work. STRUCTURE units still have problems getting targeted.	
	Behavior = AIUpdateInterface ModuleTag_03
	End
	Behavior = PhysicsBehavior ModuleTag_Physics
		GravityMult = 1.0
	End
	LocomotorSet
		Locomotor     = WebbedLocomotor
		Condition     = SET_NORMAL
		Speed         = 0
	End
	;End hack
	
	ImmuneToShockwave = Yes
	
	Body = ActiveBody ModuleTag_02
		MaxHealth         = 200                  ;BALANCE Health
		MaxHealthDamaged  = 100
		;RecoveryTime      = 5000
	End
	
	Behavior = SlowDeathBehavior ModuleTag_05
		DeathTypes = ALL
		DestructionDelay = 3033 ;Matches length of animations of TRANS_IdleToDying + DYING states
		; Sound = INITIAL HumanVoiceDie
		OCL = FINAL OCL_CreateMordorArcher
	End

	Geometry = CYLINDER
	GeometryMajorRadius = 8.0
	GeometryMinorRadius = 8.0
	GeometryHeight = 19.2
	GeometryIsSmall = No

    Shadow = SHADOW_DECAL
    ShadowSizeX = 19;
    ShadowSizeY = 19;
    ShadowTexture = ShadowI;

End

;-----------------------------------------------------------------------------------------
; Webbed humanoid that does nothing except wait until the player comes along to kill them.
; Once killed, the collapse death will play and at the end, will spawn a fresh MordorArcher
;-----------------------------------------------------------------------------------------
Object WebbedHumanoidWithIsengardBeserkerInside
	; *** ART Parameters ***

	Draw = W3DScriptedModelDraw ModuleTag_01
		OkToChangeModelColor = Yes
	
		DefaultModelConditionState
			Model               = CUWebdVctm_SKN
			Skeleton            = CUWebdVctm_SKL
			ParticleSysBone     = None WitchKingPoison
		End
   
		IdleAnimationState
			StateName				= STATE_Idle
			Animation				= WIGA	;Medium wiggle
				AnimationName       = CUWebdVctm_WIGA
				AnimationMode       = ONCE
			End
			Animation				= WIGB	;Subtle wiggle
				AnimationName       = CUWebdVctm_WIGB
				AnimationMode       = ONCE
			End
			Animation				= WIGC	;Violent wiggle
				AnimationName       = CUWebdVctm_WIGC
				AnimationMode       = ONCE
			End
			Flags               = RESTART_ANIM_WHEN_COMPLETE
		End
		
		ModelConditionState DYING
			Model = IUBerserkr_SKN
			Skeleton = IUUrukahi_SKL
		End
   
		TransitionState       = TRANS_IdleToDying
			Animation           = LNDA
				AnimationName     = IUUrukahi_LNDA
				AnimationMode     = ONCE
			End
		End

		AnimationState        = DYING
			Animation           = GTPA
				AnimationName     = IUUrukahi_GTPA
				AnimationMode     = ONCE
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Idle" then CurDrawableSetTransitionAnimState("TRANS_IdleToDying") end
			EndScript
		End
	End
	
	; ***DESIGN parameters ***
	Side = Isengard
	EditorSorting = UNIT
	ThreatLevel = 1.0
	CommandPoints = 0
	CrushableLevel = 2 ;What am I?: 0 = for infantry, 1 = for trees, 2 = general vehicles

	ArmorSet
		Conditions      = None
		Armor           = EvilShelobsWebbedUnitArmor
		DamageFX        = NormalDamageFX
	End
	
	DisplayName = OBJECT:IsengardBeserker

	; *** ENGINEERING Parameters ***
	RadarPriority = UNIT
	;This webbed unit needs to be a STRUCTURE IMMOBILE in order to be properly attacked by melee units.
	;Otherwise it is optimized out of the AI acquire system -- must be a structure or have a locomotor.
	KindOf = PRELOAD CAN_CAST_REFLECTIONS INFANTRY NOT_AUTOACQUIRABLE WEBBED

	;Total hack to get unit to work. STRUCTURE units still have problems getting targeted.	
	Behavior = AIUpdateInterface ModuleTag_03
	End
	Behavior = PhysicsBehavior ModuleTag_Physics
		GravityMult = 1.0
	End
	LocomotorSet
		Locomotor     = WebbedLocomotor
		Condition     = SET_NORMAL
		Speed         = 0
	End
	;End hack
	
	ImmuneToShockwave = Yes
	
	Body = ActiveBody ModuleTag_02
		MaxHealth         = 200                  ;BALANCE Health
		MaxHealthDamaged  = 100
		;RecoveryTime      = 5000
	End
	
	Behavior = SlowDeathBehavior ModuleTag_05
		DeathTypes = ALL
		DestructionDelay = 4700 ;Matches length of animations of TRANS_IdleToDying + DYING states
		; Sound = INITIAL 
		OCL = FINAL OCL_CreateIsengardBeserker
	End

	Behavior = FXListDie ModuleTag_06
   		DeathTypes = ALL
   		DeathFX = FX_WebBreak
	End	


	Geometry = CYLINDER
	GeometryMajorRadius = 8.0
	GeometryMinorRadius = 8.0
	GeometryHeight = 19.2
	GeometryIsSmall = No

    Shadow = SHADOW_DECAL
    ShadowSizeX = 19;
    ShadowSizeY = 19;
    ShadowTexture = ShadowI;

End



;-----------------------------------------------------------------------------------------
; Eye Of Sauron Object
;-----------------------------------------------------------------------------------------
Object EyeOfSauron
	; *** ART Parameters ***

    ; ButtonImage for Heros is button image on Hero Select UI to select hero. HI = HeroIcon or HeroImage.
    ButtonImage = SBEvil_EyeofSauron
    SelectPortrait         = HPSauron_eye
	Draw = W3DScriptedModelDraw ModuleTag_01
		OkToChangeModelColor = Yes
		NoRotate = Yes
		
		DefaultModelConditionState
			Model           = MUSauronEye
		End   
	End
	
	; ***DESIGN parameters ***
	Side			= Mordor
	EditorSorting	= UNIT
	ThreatLevel		= 0.0
	CommandPoints	= 0
	ImmuneToShockwave	= yes

	VisionRange		= 200.0
	DisplayName		= OBJECT:MordorEyeOfSauron
	
	CommandSet		= EmptyCommandSet


	; *** AUDIO Parameters ***

	EvaEnemyUnitSightedEvent = None  ; Don't bother player about this object showing up over their base -- happens too much to bother
	SoundCreated = EyeOfSauronCreated
	SoundMoveStart = EyeOfSauronMoveStart
	VoiceSelect = EyeOfSauronMoveStart


	; *** ENGINEERING Parameters ***

	RadarPriority = UNIT
	KindOf = SELECTABLE NO_COLLIDE AIRCRAFT UNATTACKABLE MOVE_ONLY CLICK_THROUGH HERO IGNORE_FOR_VICTORY IGNORE_FOR_EVA_SPEECH_POSITION NOT_AUTOACQUIRABLE IGNORES_SELECT_ALL
	
	Body = ActiveBody ModuleTag_02
		MaxHealth         = 200000
		MaxHealthDamaged  = 100000
		;RecoveryTime      = 5000
	End

	Behavior = AIUpdateInterface	ModuleTag_AIUpdateInterface
	End

	Behavior = PhysicsBehavior		ModuleTag_PhysicsBehavior
	End
	
	LocomotorSet
		Locomotor = EyeLocomotor
		Condition = SET_NORMAL 
		Speed     = 200
	End
	
	Behavior = LifetimeUpdate ModuleTag_LifetimeUpdate
		MinLifetime		= 60000
		MaxLifetime		= 60000
	End	
	
	; Gives ally trrops bonus
	Behavior = AttributeModifierAuraUpdate ModuleTag_OrcTroopBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= EyeOfSauronLeadership
		RefreshDelay	= 2500
		Range			= 150.0 ; tuned to match size of eye, since QA complained the effect range is too far
		ObjectFilter	= ANY +INFANTRY +CAVALRY +MONSTER +MACHINE -STRUCTURE -BASE_FOUNDATION -HERO
	End	
	
	Behavior = SpecialPowerModule ModuleTag_EyeStarter					
		SpecialPowerTemplate		= SpecialAbilityEyeOfSauronAntiCategory
		UpdateModuleStartsAttack	= No
		AntiCategory				= LEADERSHIP
		AttributeModifier			= EyeOfSauronAntiCategory		; Used for the anti category duration only.
		AttributeModifierRange		= 150.0
		StartsPaused				= No							
	End
	

	Behavior = AttributeModifierAuraUpdate ModuleTag_FearMe
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= EyeOfSauronFear
		RefreshDelay	= 1000
		Range			= 150.0
		ObjectFilter	= ANY +INFANTRY +CAVALRY
		TargetEnemy		= Yes
		MaxActiveRank	= 1		;Only affects level 1 rank units
	End	


	; Detects other stealth units
	Behavior = StealthDetectorUpdate StealthDetectorUpdateModuleTag
		DetectionRate		= 500   ; how often to rescan for stealthed things in my sight (msec)
		CancelOneRingEffect = Yes	; forces uses of one-ring to pop out of it
	End
	
	Behavior = SlowDeathBehavior ModuleTag_05
		DeathTypes = ALL
	End

	Geometry = CYLINDER
	GeometryMajorRadius = 1.0
	GeometryMinorRadius = 1.0
	GeometryHeight		= 1.0
	GeometryIsSmall		= Yes

    Shadow			= SHADOW_ADDITIVE_DECAL_DYNAMIC
    ShadowSizeX		= 400;
    ShadowSizeY		= 400;
    ShadowTexture	= MUSauronEye;

	ShadowOpacityStart = 0
	ShadowOpacityFadeInTime = 1000
	ShadowOpacityPeak = 255
	ShadowOpacityFadeOutTime = 1000
	ShadowOpacityEnd = 0

	ShadowOverrideLODVisibility = yes
End

;-----------------------------------------------------------------------------------------
; The normal EyeOfSauron comes from the Spell.  This one comes from the use of the ring in single player.
; It does not detect stealth or give a leadership bonus.  It is just a kind of timer for using the ring.
Object EyeOfSauronFromRing
	; *** ART Parameters ***

	Draw = W3DScriptedModelDraw ModuleTag_01
		OkToChangeModelColor = Yes
		NoRotate = Yes
		
		DefaultModelConditionState
			Model           = MUSauronEye
;			Shadow			= SHADOW_ADDITIVE_DECAL
;			ShadowSizeX		= 200;
;			ShadowSizeY		= 200;
;			ShadowTexture	= MUSauronEye;
		End
   
;		IdleAnimationState
;			StateName				= STATE_Idle
;			Animation				= IDLA
;				AnimationName       = MUOrcArchr_IDLA
;				AnimationMode       = LOOP
;			End
;		End
	End
	
	; ***DESIGN parameters ***
	Side			= Mordor
	EditorSorting	= UNIT
	ThreatLevel		= 1.0
	CommandPoints	= 0

	VisionRange		= 200.0
	DisplayName		= OBJECT:MordorEyeOfSauron
	

	; *** AUDIO Parameters ***

	EvaEnemyUnitSightedEvent = None  ; Don't bother player about this object showing up over their base -- happens too much to bother


	; *** ENGINEERING Parameters ***

	RadarPriority = UNIT
	KindOf = SELECTABLE NO_COLLIDE AIRCRAFT UNATTACKABLE MOVE_ONLY IGNORE_FOR_EVA_SPEECH_POSITION
	
	Body = ActiveBody ModuleTag_02
		MaxHealth         = 200000
		MaxHealthDamaged  = 100000
		;RecoveryTime      = 5000
	End

	Behavior = AIUpdateInterface	ModuleTag_AIUpdateInterface
	End

	Behavior = PhysicsBehavior		ModuleTag_PhysicsBehavior
	End
	
	LocomotorSet
		Locomotor = EyeLocomotor
		Condition = SET_NORMAL 
		Speed     = 200
	End
	
	Behavior = SlowDeathBehavior ModuleTag_05
		DeathTypes = ALL
		DestructionDelay = 3000
		ShadowWhenDead = Yes
	End

	Geometry = CYLINDER
	GeometryMajorRadius = 1.0
	GeometryMinorRadius = 1.0
	GeometryHeight		= 1.0
	GeometryIsSmall		= Yes

    Shadow			= SHADOW_ADDITIVE_DECAL
    ShadowSizeX		= 400;
    ShadowSizeY		= 400;
    ShadowTexture	= MUSauronEye;
	ShadowOverrideLODVisibility = yes
End


;----------------------- MordorTributeCart, OrcPorterGold ---------------------------------
Object MordorTributeCart
  ; *** ART Parameters ***
  
  SelectPortrait         = UPMordor_TrollPorter

	Draw = W3DTruckDraw ModuleTag_01
;   StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD
    DefaultModelConditionState
      Model             = MUTrollPtr_SKN
      Skeleton			= MUTrollPtr_SKL
    End
		IdleAnimationState
			Animation				= IDLA
				AnimationName		= MUTrollPtr_IDLA
				AnimationMode		= ONCE
			End
		End
		AnimationState				= DYING
			Animation				= DIEA
				AnimationName		= MUTrollPtr_DIEA
				AnimationMode		= ONCE
			End
		End
		;WLKA is old and corrupt
;		AnimationState				= MOVING WANDER
;			Animation				= WLKA
;				AnimationName		= MUTrollPtr_WLKA
;				AnimationMode		= LOOP
;			End
;			Flags					= RANDOMSTART
;			;ParticleSysBone			= None InfantryDustTrails
;		End
		AnimationState				= MOVING
			Animation				= RUNNING
				AnimationName		= MUTrollPtr_RUNA
				AnimationMode		= LOOP
			End
			Flags					= RANDOMSTART
			;ParticleSysBone			= None InfantryDustTrails
		End
		LeftFrontTireBone			= Wheel_L
		RightFrontTireBone			= Wheel_R
		;LeftRearTireBone			= WHEEL_L
		;RightRearTireBone			= WHEEL_R
		TireRotationMultiplier		= 0.2
	End

	; ***DESIGN parameters ***
	Side = Mordor
	EditorSorting					=	UNIT
	ThingClass						= HORDE_UNIT
	CommandPoints 					= 0
	BuildCost 						= 20000
	BuildTime						= 10
	TransportSlotCount = 1
	ArmorSet
		Conditions					= None
		Armor						= SoldierArmor
		DamageFX					= NormalDamageFX
	End
	VisionRange = 120.0
	DisplayName = OBJECT:MordorPorter
	CrushableLevel = 0  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
	CrusherLevel = 0 ;What can I crush?: 0 = small animals, 1 = infantry, 2 = trees, 3 = vehicles
	
	CommandSet		= EmptyCommandSet
;	CommandSet = PorterCommandSet


	; *** AUDIO Parameters ***;

	VoiceAttack			= TrollVoiceAttack
	VoiceCreated			= OrcPorterGoldVoiceSalute			
	VoiceFullyCreated 		= OrcPorterGoldVoiceSalute			
	VoiceMove			= TrollVoiceMove			
	VoicePriority			= 5
	VoiceSelect			= TrollVoiceSelect					
	VoiceSelect2			= OrcPorterVoiceSelect2
	VoiceGuard			= TrollVoiceMove
	

	SoundImpact			= ImpactHorse					;TrollDie
	SoundMoveLoop			= TributeCartMoveLoop

;OrcPorterGoldVoiceDeliver

	;UnitSpecificSounds
	;End

	EvaEventDamagedOwner = UnitUnderAttack 		;Eva event to trigger when unit is damaged

	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		MaxUpdateRangeCap = 800
		AnimationSound = Sound:TributeCartPushVox	Animation:MUTrollPtr_SKL.MUTrollPtr_RUNA Frames: 16
		AnimationSound = Sound:TributeCartMoveCreaks	Animation:MUTrollPtr_SKL.MUTrollPtr_RUNA Frames: 13
		AnimationSound = Sound:TributeCartMoveClunks	Animation:MUTrollPtr_SKL.MUTrollPtr_RUNA Frames: 25
		AnimationSound = Sound:TrollFootstep		Animation:MUTrollPtr_SKL.MUTrollPtr_RUNA Frames: 4 17
		AnimationSound = Sound:TrollFootstepRampage	Animation:MUTrollPtr_SKL.MUTrollPtr_DIEA Frames: 6 12
		AnimationSound = Sound:TrollBodyfall		Animation:MUTrollPtr_SKL.MUTrollPtr_DIEA Frames:88
		AnimationSound = Sound:TributeCartDieCreak	Animation:MUTrollPtr_SKL.MUTrollPtr_DIEA Frames:22
		AnimationSound = Sound:TributeCartDieBounce	Animation:MUTrollPtr_SKL.MUTrollPtr_DIEA Frames:45 70
		AnimationSound = Sound:TrollDie			Animation:MUTrollPtr_SKL.MUTrollPtr_DIEA Frames:21
	End

	Behavior = LargeGroupAudioUpdate ModuleTag_LGAU			;Tie into LargeGroupAudio system
	  	Key = Troll
		;UnitWeight = 2 ; Trollsie counts as 2 infantry when computing group size
	End


	; *** ENGINEERING Parameters ***

	RadarPriority = UNIT
	KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE IGNORES_SELECT_ALL HAS_HEALTH_BAR
	
	Body = ActiveBody ModuleTag_02
		MaxHealth         = 500                  ;BALANCE Townsman Health
		MaxHealthDamaged  = 250
		RecoveryTime      = 5000
	End
	
	Behavior = AIUpdateInterface ModuleTag_AIUpdate
	End

	LocomotorSet
		Locomotor = PorterLocomotor
		Condition = SET_NORMAL 
		Speed     = 32
	End

	Behavior = PhysicsBehavior ModuleTag_04
		GravityMult = 1.0
	End
	
	Behavior = SlowDeathBehavior ModuleTag_05
		DeathTypes = ALL -CRUSHED
		SinkDelay = 3000
		SinkRate = 0.40     ; in Dist/Sec
		DestructionDelay = 8000
		DeathFlags = DEATH_1
		Sound = INITIAL TrollDie		;GondorPorterDie
	End
	
	Behavior = SlowDeathBehavior ModuleTag_05b
		DeathTypes = NONE +CRUSHED
		SinkDelay = 3000
		SinkRate = 0.40     ; in Dist/Sec
		DestructionDelay = 8000
		DeathFlags = DEATH_2
		Sound = INITIAL TrollDie		;GondorPorterDie
	End
	
	Behavior = SquishCollide ModuleTag_06
		;nothing
	End

	Behavior = RefundDie ModuleTag_MoneyBackGuarantee
        RefundPercent    = 100%
    End

	Geometry = BOX
	GeometryMajorRadius = 20.0
	GeometryMinorRadius = 6.00
	GeometryHeight = 20.0
	GeometryIsSmall = Yes
	Shadow = SHADOW_DECAL
	ShadowSizeX = 27;
	ShadowSizeY = 27;
	ShadowTexture = ShadowI;
        ThreatLevel = -999;
End


;------------------------------------------------------------------------------
; aka Mordor Battering Ram Orc
ChildObject MordorRamCrew IsengardRamCrew
  ; *** ART Parameters ***

  ; This is required for garrisoned objects - please put in all objects.
  ButtonImage = BIUrukPit_Warriors
  SelectPortrait         = UPIsenguard_UrukHai
  
  Draw = W3DHordeModelDraw ModuleTag_01

	OkToChangeModelColor = Yes
	  
	StaticModelLODMode = No
	; specify options for static LODs
	LodOptions	= LOW
		AllowMultipleModels		=	ALLOW_MULTIPLE_MODELS_LOW
		MaxRandomTextures		=	MAX_RANDOM_TEXTURES_LOW
		MaxRandomAnimations		=	MAX_RANDOM_ANIMATIONS_LOW
		MaxAnimFrameDelta		=	MAX_ANIM_FRAME_DELTA_LOW
	End
	
	LodOptions	= MEDIUM
		AllowMultipleModels		=	ALLOW_MULTIPLE_MODELS_MED
		MaxRandomTextures		=	MAX_RANDOM_TEXTURES_MED
		MaxRandomAnimations		=	MAX_RANDOM_ANIMATIONS_MED
		MaxAnimFrameDelta		=	MAX_ANIM_FRAME_DELTA_MED
	End
	
	LodOptions	= HIGH
		AllowMultipleModels		=	ALLOW_MULTIPLE_MODELS_HIGH
		MaxRandomTextures		=	MAX_RANDOM_TEXTURES_HIGH
		MaxRandomAnimations		=	MAX_RANDOM_ANIMATIONS_HIGH
		MaxAnimFrameDelta		=	MAX_ANIM_FRAME_DELTA_HIGH
	End
	
    DefaultModelConditionState
		Model = MU_BRCrew_SKN
		Skeleton = IUUrukahi_SKL
    End
	IdleAnimationState
		Animation = IDLB
			AnimationName = IUUrukahi_IDLB
			AnimationMode = ONCE
			AnimationPriority = 20
		End
		Animation = IDLG
			AnimationName = IUUrukahi_IDLG
			AnimationMode = ONCE
			AnimationPriority = 1 ;2
		End
		Animation = IDLD
			AnimationName = IUUrukahi_IDLD
			AnimationMode = ONCE
			AnimationPriority = 2
		End	
		StateName = Idle
		BeginScript
			Prev = CurDrawablePrevAnimationState()
		EndScript
	End
	
    AnimationState = JUST_BUILT PASSENGER_VARIATION_1
		Animation = built
			AnimationName		= IUUrukahi_UDBL
		    AnimationMode		= ONCE
		    AnimationBlendTime	= 0		; Must be zero.
		End
	End
	
    AnimationState = JUST_BUILT PASSENGER_VARIATION_2
		Animation = built
			AnimationName		= IUUrukahi_UDBR
		    AnimationMode		= ONCE
		    AnimationBlendTime	= 0		; Must be zero.
		End
	End

    AnimationState = DYING
		Animation = DIEA
			AnimationName = IUUrukahi_BDIA
		    AnimationMode = ONCE
			AnimationSpeedFactorRange	=	0.7 1.4
		End
		Animation = DIEB
			AnimationName = IUUrukahi_BDIB
		    AnimationMode = ONCE
			AnimationSpeedFactorRange	=	0.7 1.4
		End
		Animation = DIEC
			AnimationName = IUUrukahi_BDIC
		    AnimationMode = ONCE
			AnimationSpeedFactorRange	=	0.7 1.4
		End
    End    

	;----------------------------------------------------
	;Manning battering ram - Left and right handed attack
	;----------------------------------------------------
	AnimationState = FIRING_OR_PREATTACK_A PASSENGER PASSENGER_VARIATION_1 ; attacking with battering ram
		Animation = grasping_siege_lefthanded
			AnimationName =  IUUrukahi_BATB
			AnimationMode = ONCE
;			UseWeaponTiming = Yes
		End
	End
	
	AnimationState = FIRING_OR_PREATTACK_A PASSENGER PASSENGER_VARIATION_2 ; attacking with battering ram
		Animation = grasping_siege_righthanded
			AnimationName = IUUrukahi_BATA
			AnimationMode = ONCE
;			UseWeaponTiming = Yes
		End
	End

	AnimationState = FIRING_OR_PREATTACK_B PASSENGER PASSENGER_VARIATION_1 ; attacking with battering ram
		Animation = grasping_siege_lefthanded
			AnimationName =  IUUrukahi_BATB
			AnimationMode = ONCE
;			UseWeaponTiming = Yes
		End
	End
	AnimationState = FIRING_OR_PREATTACK_B PASSENGER PASSENGER_VARIATION_2 ; attacking with battering ram
		Animation = grasping_siege_righthanded
			AnimationName = IUUrukahi_BATA
			AnimationMode = ONCE
;			UseWeaponTiming = Yes
		End
	End

	AnimationState = FIRING_OR_PREATTACK_C PASSENGER PASSENGER_VARIATION_1 ; attacking with battering ram
		Animation = grasping_siege_lefthanded
			AnimationName =  IUUrukahi_BATB
			AnimationMode = ONCE
;			UseWeaponTiming = Yes
		End
	End
	AnimationState = FIRING_OR_PREATTACK_C PASSENGER PASSENGER_VARIATION_2 ; attacking with battering ram
		Animation = grasping_siege_righthanded
			AnimationName = IUUrukahi_BATA
			AnimationMode = ONCE
;			UseWeaponTiming = Yes
		End
	End

	;----------------------------------------------------
	;Manning battering ram - Left and right movement
	;----------------------------------------------------
	AnimationState = MOVING BACKING_UP PASSENGER PASSENGER_VARIATION_1 ; running with battering ram
		Animation = moving_siege_lefthanded
			AnimationName =  IUUrukahi_BRND
			AnimationMode = LOOP
			AnimationSpeedFactorRange	=	0.7 0.7
		End
	End
	AnimationState = MOVING BACKING_UP PASSENGER PASSENGER_VARIATION_2 ; running with battering ram
		Animation = moving_siege_righthanded
			AnimationName = IUUrukahi_BRNC
			AnimationMode = LOOP
			AnimationSpeedFactorRange	=	0.7 0.7
		End
	End

	;;; HIGH SPEED TURNS ;;;
	AnimationState = MOVING TURN_LEFT TURN_LEFT_HIGH_SPEED PASSENGER PASSENGER_VARIATION_1 ; running with battering ram
		Animation = moving_siege_lefthanded
			AnimationName =  IUUrukahi_BRNB
			AnimationMode = LOOP
			AnimationSpeedFactorRange	=	0.6 0.6
		End
	End
	AnimationState = MOVING TURN_LEFT TURN_LEFT_HIGH_SPEED PASSENGER PASSENGER_VARIATION_2 ; running with battering ram
		Animation = moving_siege_righthanded
			AnimationName = IUUrukahi_BRNA
			AnimationMode = LOOP
			AnimationSpeedFactorRange	=	0.8 0.8
		End
	End

	AnimationState = MOVING TURN_RIGHT TURN_RIGHT_HIGH_SPEED PASSENGER PASSENGER_VARIATION_1 ; running with battering ram
		Animation = moving_siege_lefthanded
			AnimationName =  IUUrukahi_BRNB
			AnimationMode = LOOP
			AnimationSpeedFactorRange	=	0.8 0.8
		End
	End
	AnimationState = MOVING TURN_RIGHT TURN_RIGHT_HIGH_SPEED PASSENGER PASSENGER_VARIATION_2 ; running with battering ram
		Animation = moving_siege_righthanded
			AnimationName = IUUrukahi_BRNA
			AnimationMode = LOOP
			AnimationSpeedFactorRange	=	0.6 0.6
		End
	End

	;;; SLOW SPEED TURNS ;;;
	AnimationState = MOVING TURN_LEFT PASSENGER PASSENGER_VARIATION_1 ; running with battering ram
		Animation = moving_siege_lefthanded
			AnimationName =  IUUrukahi_BRND
			AnimationMode = LOOP
			AnimationSpeedFactorRange	=	0.4 0.4
		End
	End
	AnimationState = MOVING TURN_LEFT PASSENGER PASSENGER_VARIATION_2 ; running with battering ram
		Animation = moving_siege_righthanded
			AnimationName = IUUrukahi_BRNA
			AnimationMode = LOOP
			AnimationSpeedFactorRange	=	0.7 0.7
		End
	End

	AnimationState = MOVING TURN_RIGHT PASSENGER PASSENGER_VARIATION_1 ; running with battering ram
		Animation = moving_siege_lefthanded
			AnimationName =  IUUrukahi_BRNB
			AnimationMode = LOOP
			AnimationSpeedFactorRange	=	0.7 0.7
		End
	End
	AnimationState = MOVING TURN_RIGHT PASSENGER PASSENGER_VARIATION_2 ; running with battering ram
		Animation = moving_siege_righthanded
			AnimationName = IUUrukahi_BRNC
			AnimationMode = LOOP
			AnimationSpeedFactorRange	=	0.4 0.4
		End
	End

	;;; MOVING FORWARD ;;;
	AnimationState = MOVING PASSENGER PASSENGER_VARIATION_1 ; running with battering ram
		Animation = moving_siege_lefthanded
			AnimationName =  IUUrukahi_BRNB
			AnimationMode = LOOP
			AnimationSpeedFactorRange	=	0.7 0.7
		End
	End
	AnimationState = MOVING PASSENGER PASSENGER_VARIATION_2 ; running with battering ram
		Animation = moving_siege_righthanded
			AnimationName = IUUrukahi_BRNA
			AnimationMode = LOOP
			AnimationSpeedFactorRange	=	0.7 0.7
		End
	End
	  	
	;----------------------------------------------------
	;Manning battering ram - Left and right idle
	;----------------------------------------------------
	AnimationState = PASSENGER PASSENGER_VARIATION_1 ; idle with battering ram
		Animation = idle_siege_lefthanded
			AnimationName =  IUUrukahi_BIDB
			AnimationMode = LOOP
		End
	End
	AnimationState = PASSENGER PASSENGER_VARIATION_2 ; idle with battering ram
		Animation = idle_siege_righthanded
			AnimationName = IUUrukahi_BIDA
			AnimationMode = LOOP
		End
	End	
  End

	; ***DESIGN parameters ***
	Side = Mordor
	DisplayName = OBJECT:MordorBatRamFighter

End

;------------------------------------------------------------------------------
ChildObject MordorBatteringRam IsengardBatteringRam
	; *** ART Parameters ***
	; This is required for garrisoned objects - please put in all objects.
	ButtonImage				= BISiegeWorks_BatteringRam
	SelectPortrait			= UPMordor_BatteringRam
	
	Draw = W3DScriptedModelDraw ModuleTag_01

	  OkToChangeModelColor = Yes
	  
		ExtraPublicBone = CREWBONE
		ExtraPublicBone = PASSENGER
	    DependencySharedModelFlags = MOVING FIRING_OR_PREATTACK_A FIRING_OR_PREATTACK_B FIRING_OR_PREATTACK_C TURN_LEFT TURN_RIGHT BACKING_UP

		DefaultModelConditionState
			Model = MUBattrRam_SKN
			WeaponLaunchBone			=	PRIMARY CREWBONE07
		    Skeleton = IUBATTRRAM_SKL
			WeaponFireFXBone	PRIMARY CREWBONE07		
		End

		IdleAnimationState
			Animation = IDL
				AnimationName = IUBATTRRAM_IDLA
				AnimationMode = LOOP
			End
			StateName = Idle
		End

		AnimationState = MOVING
			Animation = Moving
				AnimationName = IUBATTRRAM_RUNA
				AnimationMode = LOOP
			End
			ParticleSysBone = None InfantryDustTrails
		End

		AnimationState = FIRING_OR_PREATTACK_A
			Animation = Attacking
				AnimationName = IUBATTRRAM_ATKA
				AnimationMode = ONCE
;				UseWeaponTiming = Yes
			End
		End

		AnimationState = FIRING_OR_PREATTACK_B
			Animation = Attacking
				AnimationName = IUBATTRRAM_ATKA
				AnimationMode = ONCE
;				UseWeaponTiming = Yes
			End
		End

		AnimationState = FIRING_OR_PREATTACK_C
			Animation = Attacking
				AnimationName = IUBATTRRAM_ATKA
				AnimationMode = ONCE
;				UseWeaponTiming = Yes
			End
		End


		AnimationState = DYING
			Animation = Dying
				AnimationName = IUBATTRRAM_DIEA
				AnimationMode = ONCE
			End
		End 
		
	    AnimationState  = JUST_BUILT
			Animation = Being_Built
				AnimationName		= IUBattrRam_BLDA
				AnimationMode		= ONCE
				AnimationBlendTime	= 0		; Must be zero.
			End
		End		
	End

	; ***DESIGN parameters ***
	Side				= Mordor
	DisplayName			= OBJECT:MordorBatteringRam


	; ************** AUDIO Parameters ***************;

	VoiceAttack					= OrcBatteringRamVoiceAttack
	VoiceAttackCharge				= OrcBatteringRamVoiceAttackCharge
	VoiceAttackStructure			= OrcBatteringRamVoiceAttackBuilding
	
	VoiceEnterStateAttack			= OrcBatteringRamVoiceEnterStateAttack
	VoiceEnterStateAttackCharge		= OrcBatteringRamVoiceEnterStateAttackCharge
	VoiceEnterStateAttackStructure	= OrcBatteringRamVoiceEnterStateAttackBuilding
	
	VoiceCreated				= CampOrcCreateMordorBatteringRam
	VoiceFullyCreated 			= CampOrcCreateMordorBatteringRam
	VoiceGuard					= OrcBatteringRamVoiceMove
	VoiceMove					= OrcBatteringRamVoiceMove
	VoiceMove2					= OrcVoiceMove2
	VoiceMoveToCamp				= OrcBatteringRamVoiceMoveCamp
	VoiceMoveWhileAttacking			= OrcBatteringRamVoiceDisengage
	
	VoiceEnterStateMove			= OrcBatteringRamVoiceEnterStateMove
	VoiceEnterStateMoveToCamp		= OrcBatteringRamVoiceEnterStateMoveCamp
	VoiceEnterStateMoveWhileAttacking	= OrcBatteringRamVoiceEnterStateDisengage
	
	VoicePriority				= 23
	VoiceSelect					= OrcBatteringRamVoiceSelect
	VoiceSelectBattle 			= OrcBatteringRamVoiceSelectBattle
	
	SoundImpact 				= ImpactHorse

	EvaEventDamagedOwner			= UnitUnderAttack 		;Eva event to trigger when unit is damaged


	; *** ENGINEERING Parameters ***

    Behavior = SiegeEngineContain ModuleTag_Contain
		ObjectStatusOfCrew		= UNSELECTABLE UNATTACKABLE
		Slots					= 1
		DamagePercentToUnits	= 100%
		PassengerFilter			= NONE +CAN_RIDE_BATTERING_RAM
		KillPassengersOnDeath	= Yes ; fling passenger out to die when siege ladder is done for
		AllowAlliesInside		= Yes
		AllowEnemiesInside		= No
		AllowNeutralInside		= No
		CrewFilter				= NONE +INFANTRY -CAN_RIDE_BATTERING_RAM    ;Crew is always checked first, then Passenger
		CrewMax					= 6
		InitialCrew				= MordorRamCrew 6
		ExitDelay				= 500  ; half second
		NumberOfExitPaths		= 0 ; Defaults to 1.  Set 0 to not use ExitStart/ExitEnd, set higher than 1 to use ExitStart01-nn/ExitEnd01-nn
		GoAggressiveOnExit		= Yes ; AI Will tell people to set their mood to Aggressive on exiting
		TypeOneForWeaponSet		= CAN_RIDE_BATTERING_RAM
		EjectPassengersOnDeath	= Yes

		;Bone position for mine
		;PassengerBonePrefix = PassengerBone:PASSENGER   KindOf:CAN_RIDE_BATTERING_RAM         
		;I can't attach a mine to PASSENGER bone because it has 1 bone and 
		;the contained map of Uruk's already carrying the ram says there are 6. So the 
		;code that handles occupant deploy is screwed up because it doesn't account for
		;multiple bones. So the solution is to use CREWBONE07.

	    ;Bone positions for CREWBONE01-CREWBONE06
		PassengerBonePrefix = PassengerBone:CREWBONE    KindOf:INFANTRY
	    ;Left side -- so crew members use right handed animations
		BoneSpecificConditionState 1 PASSENGER_VARIATION_1
		BoneSpecificConditionState 4 PASSENGER_VARIATION_1
		BoneSpecificConditionState 6 PASSENGER_VARIATION_1
		;Right side -- so crew members use left handed animations
		BoneSpecificConditionState 2 PASSENGER_VARIATION_2
		BoneSpecificConditionState 3 PASSENGER_VARIATION_2
		BoneSpecificConditionState 5 PASSENGER_VARIATION_2

	End

End
