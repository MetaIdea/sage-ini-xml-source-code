; FILE: GoodFactionBuildings.ini ///////////////////////////////////////////////////
; This file contains only buildings that are part of a player or faction.
; Typically these are the buildings that can be build by the player or
; are part of a base.  
;//////////////////////////////////////////////////////////////////////////////


;------------------------------------------------------------------------------
;
; Basic farm interface.
;
;	An instance of one of these should not be created, it's merely used as an
; object to create a child from.
;
;------------------------------------------------------------------------------
Object FarmInterface
 
  ; *** ART Parameters ***
  SelectPortrait         = BPFarm

  ;day
  Draw = W3DScriptedModelDraw ModuleTag_Draw

	ExtraPublicBone = ARROW_01
	ExtraPublicBone = ARROW_02
	ExtraPublicBone = ARROW_03
	ExtraPublicBone = ARROW_04
	ExtraPublicBone = ARROW_05
	ExtraPublicBone = ARROW_06
	ExtraPublicBone = ARROW_07
	ExtraPublicBone = ARROW_08
	ExtraPublicBone = ARROW_09
	ExtraPublicBone = ARROW_10

    OkToChangeModelColor  = Yes
	UseStandardModelNames = Yes
    StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD  
  
	DefaultModelConditionState
		Model = GBFarm_SKN
		WeaponLaunchBone = PRIMARY ARROW_
    End
    
    IdleAnimationState
		Animation = IDLE
			AnimationName		=	GBFarm_SKL.GBFarm_IDLA
			AnimationMode			=	ONCE	
			AnimationBlendTime = 0
		End		
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "BeingConstructed" then 
			    ; Don't play completed sound when canceling build-in-progress or when
			    ; destroyed halfway
			    if not CurDrawableModelcondition( "DYING" ) then 
					CurDrawablePlaySound("CampSoldierCompleteFarm")
				end
			end
		EndScript
	End	

    ;-- building being constructed
    ModelConditionState   = AWAITING_CONSTRUCTION 
      Model               = GBFarm_A
;		ParticleSysBone	  = NONE BuildingDoughnutCloud
    End;
    AnimationState        = AWAITING_CONSTRUCTION
      Animation           = GBFarm_A
        AnimationName     = GBFarm_ASKL.GBFarm_ABLD
        AnimationMode     = MANUAL
      End
	  Flags				  = START_FRAME_FIRST
    End

    ModelConditionState   = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
		Model			  = GBFarm_A
		ParticleSysBone   = DUSTBONE BuildingContructDust
    End
	AnimationState        = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
		Animation         = GBFarm_A
			AnimationName = GBFarm_ASKL.GBFarm_ABLD
			AnimationMode = MANUAL
		End
		Flags			= START_FRAME_FIRST
		StateName		= BeingConstructed
		BeginScript
			CurDrawablePlaySound("GondorBarracksBeginConstruction")
		EndScript
    End
	   
    
     ;--damaged building
	ModelConditionState  = DESTROYED_FRONT
		Model         = GBFarm_D2
		ParticleSysBone SmokeSmall01 FireBuildingLarge
		ParticleSysBone SmokeSmall02 FireBuildingLarge
		ParticleSysBone SmokeSmall03 SmokeBuildingLarge
    End

    AnimationState = DESTROYED_FRONT
      BeginScript
        CurDrawableHideSubObject("GBFarm_01")
      EndScript
    End
    
	ModelConditionState  = DESTROYED_RIGHT
		Model         = GBFarm_D2
		ParticleSysBone SmokeSmall01 FireBuildingLarge
		ParticleSysBone SmokeSmall02 FireBuildingLarge
		ParticleSysBone SmokeSmall03 SmokeBuildingLarge
    End

    AnimationState = DESTROYED_RIGHT
      BeginScript
        CurDrawableHideSubObject("GBFarm_02")
      EndScript
    End
    
	ModelConditionState  = DESTROYED_BACK
		Model         = GBFarm_D2
		ParticleSysBone SmokeSmall01 FireBuildingLarge
		ParticleSysBone SmokeSmall02 FireBuildingLarge
		ParticleSysBone SmokeSmall03 SmokeBuildingLarge
    End

    AnimationState = DESTROYED_BACK
      BeginScript
        CurDrawableHideSubObject("GBFarm_03")
      EndScript
    End

	ModelConditionState  = DESTROYED_LEFT
		Model         = GBFarm_D2
		ParticleSysBone SmokeSmall01 FireBuildingLarge
		ParticleSysBone SmokeSmall02 FireBuildingLarge
		ParticleSysBone SmokeSmall03 SmokeBuildingLarge
    End
    
    AnimationState = DESTROYED_LEFT
      BeginScript
        CurDrawableHideSubObject("GBFarm_04")
      EndScript
    End
    
    
    ModelConditionState  = DAMAGED
		Model         = GBFarm_D1
		ParticleSysBone SmokeSmall01 FireBuildingMedium
		ParticleSysBone SmokeSmall02 FireBuildingLarge
		ParticleSysBone SmokeSmall03 SmokeBuildingLarge
    End
    AnimationState = DAMAGED
	EnteringStateFX	= FX_BuildingDamaged
    End

    ModelConditionState  = REALLYDAMAGED
		Model         = GBFarm_D2
		ParticleSysBone SmokeSmall01 FireBuildingLarge
		ParticleSysBone SmokeSmall02 FireBuildingLarge
		ParticleSysBone SmokeSmall03 SmokeBuildingLarge
    End
    AnimationState = REALLYDAMAGED
		EnteringStateFX	= FX_BuildingReallyDamaged
    End

    ModelConditionState  = RUBBLE
		Model         = GBFarm_D2
		ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End
    
    AnimationState = RUBBLE
      BeginScript
        CurDrawableHideSubObject("GBFarm_01")
        CurDrawableHideSubObject("GBFarm_02")
        CurDrawableHideSubObject("GBFarm_03")
        CurDrawableHideSubObject("GBFarm_04")
      EndScript
    End

    ModelConditionState  = POST_RUBBLE
		Model         = None
		ParticleSysBone NONE SmokeBuildingMediumRubble
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
		ParticleSysBone NONE SmokeBuildingMediumRubble
    End

End

  Draw = W3DFloorDraw ModuleTag_DrawFloor    
    	StaticModelLODMode = Yes		; THIS NEEDS TO BE COMMENTED OUT WHEN ENGINEERING ENABLES LOD'S IN THE FLOOR DRAW
    	
     ModelName = GBFarm_Bib
  End

 
	; ***DESIGN parameters ***
	EditorSorting       = STRUCTURE
	ThreatLevel			= 1.0
	PlacementViewAngle  = 180
	VisionRange         = 160.0          ; Shroud clearing distance

	ArmorSet
		Conditions		= None
		Armor			= StructureArmor
	End


	; *** AUDIO Parameters ***

	VoiceSelect			= GondorFarmSelect

	SoundOnDamaged			= BuildingLightDamageWood
	SoundOnReallyDamaged		= BuildingHeavyDamageWood

	VoiceSelectUnderConstruction	= BuildingGoodVoiceSelectUnderConstruction

	UnitSpecificSounds
		UnderConstruction		= BuildingConstructionLoop  ; Built first time
		; UnderRepairFromDamage	= NoSound					; Repaired No animation on the building, so don't bother playing sound
		UnderRepairFromRubble	= BuildingConstructionLoop	; Repaired from completely destroyed (not used???)
	End

 
	; *** ENGINEERING Parameters ***

	RadarPriority       = STRUCTURE
	KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE NEED_BASE_FOUNDATION CASTLE_KEEP AUTO_RALLYPOINT FS_FACTORY ATTACK_NEEDS_LINE_OF_SIGHT CAN_ATTACK MADE_OF_STONE
	 											;MP_COUNT_FOR_VICTORY;removed so econ plots will not keep zombie games going

	Body = StructureBody ModuleTag_05
	End

	Behavior = CastleMemberBehavior ModuleTag_CMB
		; Special Eva events when attacked
		UnderAttackEvaEventIfKeep = EconPlotUnderAttack
		UnderAttackAllyEvaEventIfKeep = None
		
		; Special Eva events if an econ plot is taken down
		CampDestroyedOwnerEvaEvent = EconPlotDestroyed
		CampDestroyedAllyEvaEvent = AllyEconPlotDestroyed
		CampDestroyedAttackerEvaEvent = EnemyEconPlotDestroyed
	End 

	Behavior = AIUpdateInterface ModuleTag_SoWeCanUseWeapon
		AutoAcquireEnemiesWhenIdle	= Yes
		MoodAttackCheckRate			= 250
	End

	
	Behavior = RefundDie ModuleTag_refund
		UpgradeRequired = Upgrade_MarketplaceUpgradeDefiance
		BuildingRequired = ANY +GondorMarketPlace
		RefundPercent = 50%
	End

	Behavior = SubObjectsUpgrade ModuleTag_HideAll
		TriggeredBy		= Upgrade_StructureLevel1
		HideSubObjects	= V1 V2
		ShowSubObjects	= V1HIDE V2HIDE 
	End

 	Behavior = SubObjectsUpgrade ModuleTag_ShowWalls 
		TriggeredBy		= Upgrade_StructureLevel2
		ShowSubObjects	= V1 V2HIDE
		HideSubObjects	= V2 V1HIDE
	End

	Behavior = SubObjectsUpgrade ModuleTag_ShowPillars 
		TriggeredBy		= Upgrade_StructureLevel3
		ShowSubObjects	= V1 V2 
		HideSubObjects	= V1HIDE V2HIDE
	End
;  	Behavior = WeaponSetUpgrade ModuleTag_Weapon
;		TriggeredBy		= Upgrade_StructureLevel3
;	End
   
	Behavior                  = StructureCollapseUpdate ModuleTag_07
		MinCollapseDelay        = 000
		MaxCollapseDelay        = 000
		CollapseDamping         = .5
		MaxShudder              = 0.6
		MinBurstDelay           = 250
		MaxBurstDelay           = 800
		BigBurstFrequency       = 4
		FXList                  = INITIAL   FX_StructureMediumCollapse
		FXList                  = ALMOST_FINAL  FX_StructureAlmostCollapse
		DestroyObjectWhenDone	= Yes
		CollapseHeight			= 66
	End
	   
	Behavior                  = BuildingBehavior BuildingModuleTag
		NightWindowName         = WINDOW_N01
		FireWindowName          = WINDOW_F01
		GlowWindowName			= WINDOW_G01
	;  FireName				= FIRE01
	End
	 
	;;---modules to allow generation of peasants------------
	Behavior = ProductionUpdate ModuleTag_Production
		GiveNoXP = Yes
	End

	Behavior = QueueProductionExitUpdate ModuleTag_Exit
		UnitCreatePoint    = X: 20.0 Y:0.0 Z:0.0
		NaturalRallyPoint  = X:-60.0 Y:0.0 Z:0.0
		ExitDelay = 350
	End

	Behavior = GeometryUpgrade Geom_ModuleTag_HideAll
		TriggeredBy		= Upgrade_StructureLevel1
		ShowGeometry	= Geom_Orig
		HideGeometry	= Geom_V1 Geom_V2 
	End
	Behavior = GeometryUpgrade Geom_ModuleTag_ShowWalls 
		TriggeredBy		= Upgrade_StructureLevel2
		ShowGeometry	= Geom_V1 
		HideGeometry	= Geom_Orig Geom_V2 
	End
  	Behavior = GeometryUpgrade Geom_ModuleTag_ShowFlagsAndTower 
		TriggeredBy		= Upgrade_StructureLevel3
		ShowGeometry	= Geom_V2 
		HideGeometry	= Geom_Orig Geom_V1 
	End
		
	Geometry				= BOX
    GeometryName			= Geom_Orig
  	GeometryMajorRadius		= 28.0
	GeometryMinorRadius		= 37.5
	GeometryHeight			= 18.0
	GeometryOffset			= X:-18 Y:0 Z:0	
		
	AdditionalGeometry		= BOX
	GeometryName			= Geom_Orig
	GeometryMajorRadius		= 17.5
	GeometryMinorRadius		= 20.0
	GeometryHeight			= 40.0
	GeometryOffset			= X:22 Y:0 Z:0	
	
	AdditionalGeometry		= BOX
	GeometryName			= Geom_V1
	GeometryMajorRadius		= 45.0
	GeometryMinorRadius		= 36.0
	GeometryHeight			= 20.0
	GeometryOffset			= X:-3 Y:0 Z:0	
		
	AdditionalGeometry		= BOX
	GeometryName			= Geom_V1
	GeometryMajorRadius		= 17.5
	GeometryMinorRadius		= 20.0
	GeometryHeight			= 40.0
	GeometryOffset			= X:22 Y:0 Z:0	

	AdditionalGeometry		= BOX
	GeometryName			= Geom_V2
	GeometryMajorRadius		= 45.0
	GeometryMinorRadius		= 36.0
	GeometryHeight			= 20.0
	GeometryOffset			= X:-3 Y:0 Z:0	
		
	AdditionalGeometry		= BOX
	GeometryName			= Geom_V2
	GeometryMajorRadius		= 17.5
	GeometryMinorRadius		= 20.0
	GeometryHeight			= 65.0
	GeometryOffset			= X:22 Y:0 Z:0	
		
	GeometryIsSmall       = No
	Shadow                = SHADOW_VOLUME
	BuildCompletion     = PLACED_BY_PLAYER
	
	GeometryContactPoint = X:-40.672	Y:39.798	Z:0			Repair
	GeometryContactPoint = X:34.234		Y:-39.93	Z:0			Repair
	GeometryContactPoint = X:47.782		Y:27.677	Z:0
	GeometryContactPoint = X:-53.507	Y:-27.336	Z:0
	GeometryContactPoint = X:21.744		Y:0.19		Z:52.222	Swoop

End

;------------------------------------------------------------------------------
;------------------------------------------------------------------------------
;------------------------------------------------------------------------------
;------------------------------------------------------------------------------
;
;  Rohan
;
;------------------------------------------------------------------------------
;------------------------------------------------------------------------------
;------------------------------------------------------------------------------

;----------------------------------- secondary RohanCitadel -------------------------------------------------------
Object RohanCampKeep

	SelectPortrait = BPRCamp_Citadel

  ; *** ART Parameters ***

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes


    DefaultModelConditionState  
      Model = RBCCenter
;                    ParticleSysBone   = glowbone01 TorchGlow
;                    ParticleSysBone   = glowbone02 TorchGlow
;                    ParticleSysBone   = glowbone03 TorchGlow
;                    ParticleSysBone   = glowbone04 TorchGlow
    End
    
	IdleAnimationState
		;BeginScript
		;	Prev = CurDrawablePrevAnimationState()
		;	if Prev == "BeingConstructed" then 
			    ; Don't play completed sound when canceling build-in-progress or when
			    ; destroyed halfway
		;	    if not CurDrawableModelcondition( "DYING" ) then 
		;			CurDrawablePlaySound("CampSoldierCompleteGeneric")
		;		end
		;	end
		;EndScript
	End

;------------Build Up States
    ModelConditionState   = ACTIVELY_BEING_CONSTRUCTED
      Model               = RBCCenter_A
;      ParticleSysBone	  = NONE BuildingDoughnutCloud
      ParticleSysBone     = NONE BuildingContructDust
    End  

	AnimationState          = ACTIVELY_BEING_CONSTRUCTED
		Animation
			AnimationName	= RBCCenter_A.RBCCenter_A
			AnimationMode   = MANUAL
		End
		BeginScript
			;CurDrawableHideSubObject("FIRE02")
			CurDrawablePlaySound("GondorBarracksBeginConstruction")
			CurDrawablePlaySound("BuildingTopple")
		EndScript
	End

;------------Build Up States
    ModelConditionState   = BASE_BUILD
      Model               = RBCCenter_A
;      ParticleSysBone	  = NONE BuildingDoughnutCloud
      ParticleSysBone     = NONE BuildingContructDust
    End  

	AnimationState		  = BASE_BUILD
		Animation
			AnimationName = RBCCenter_A.RBCCenter_A
			AnimationMode = ONCE
			AnimationBlendTime = 0			
			AnimationSpeedFactorRange = 2.0 2.0 ; 300 frame anim, but need to shrink down to 5 seconds
		End
		BeginScript
			CurDrawablePlaySound("GondorBarracksBeginConstruction")
			CurDrawablePlaySound("BuildingTopple")
		EndScript
	End

    ModelConditionState   = JUST_BUILT
      Model               = RBCCenter_A
;      ParticleSysBone	  = NONE BuildingDoughnutCloud
      ParticleSysBone     = NONE BuildingContructDust
    End  

	AnimationState		  = JUST_BUILT
		Animation
			AnimationName = RBCCenter_A.RBCCenter_A
			AnimationMode = MANUAL			
			AnimationBlendTime = 0
		End
        Flags = START_FRAME_FIRST
		BeginScript
;			CurDrawableHideSubObject("FIRE02")
		EndScript
	End

    ModelConditionState  = DAMAGED
      Model         = RBCCenter_D1  
	ParticleSysBone NONE BuildingDamaged
      ParticleSysBone dustbone01 TrebuchetImpactDebris
;                    ParticleSysBone   = glowbone01 TorchGlow
;                    ParticleSysBone   = glowbone02 TorchGlow
;                    ParticleSysBone   = glowbone03 TorchGlow
;                    ParticleSysBone   = glowbone04 TorchGlow
    End
    AnimationState = DAMAGED
	EnteringStateFX	= FX_BuildingDamaged
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = RBCCenter_D2  
      ParticleSysBone dustbone01 TrebuchetImpactDebris
      ParticleSysBone NONE SmokeBuildingMediumRubble
	
    End
    AnimationState = REALLYDAMAGED
	EnteringStateFX	= FX_BuildingReallyDamaged
    End
    
    ModelConditionState  = RUBBLE
      Model         = RBCCenter_D2  
      ParticleSysBone dustbone01 BuildingChunkBitsTrail
      ParticleSysBone NONE Explosion5
    End
    AnimationState = RUBBLE
    End

  	ModelConditionState  = POST_RUBBLE
		Model         = GBGenRubble
		ParticleSysBone NONE SmokeBuildingMediumRubble
	End
    AnimationState = POST_RUBBLE
    End
	
	ModelConditionState  = POST_COLLAPSE
		Model         = GBGenRubble
		ParticleSysBone NONE SmokeBuildingMediumRubble
	End
    AnimationState = POST_COLLAPSE
    End

  End


	; *** AUDIO Parameters ***

	VoiceSelect				= RohanCitadelSelect

	SoundOnDamaged			= BuildingLightDamageWood
	SoundOnReallyDamaged		= BuildingHeavyDamageWood

	VoiceSelectUnderConstruction	= BuildingGoodVoiceSelectUnderConstruction

	UnitSpecificSounds
		UnderConstruction		= BuildingBigConstructionLoop		; Built first time
		; UnderRepairFromDamage	= NoSound					; Repaired No animation on the building, so don't bother playing sound
		UnderRepairFromRubble	= BuildingBigConstructionLoop		; Repaired from completely destroyed (not used???)
	End
	EvaEventDieOwner = CitadelDie



	; ***DESIGN parameters ***

	DisplayName      = OBJECT:RohanCampKeep
	Side = Rohan
	EditorSorting   = STRUCTURE
	ThreatLevel = 1.0
	BuildCost           = 1000
	BuildTime           = 30.0           ; in seconds
	CommandSet			= GenericKeepCommandSet

	ArmorSet
		Conditions        = None
		Armor             = CitadelArmor
		DamageFX          = None
	End

	; *** ENGINEERING Parameters ***  
	KindOf					= VITAL_FOR_BASE_SURVIVAL STRUCTURE SELECTABLE IMMOBILE CASTLE_KEEP MP_COUNT_FOR_VICTORY FS_FACTORY AUTO_RALLYPOINT MADE_OF_WOOD SCORE
	RadarPriority			= STRUCTURE
	KeepSelectableWhenDead	= Yes

	Body              = ActiveBody ModuleTag_02
		MaxHealth       = ROHAN_CENTRAL_CAMP_KEEP_HEALTH
	End

  Behavior = GettingBuiltBehavior ModuleTag_04
    SelfBuildingLoop = BuildingBigConstructionLoop			; Only played if we DON'T spawn a worker
	SelfRepairFromDamageLoop  = NoSound					; This doesn't cause an animation, so don't bother playing a sound
	SelfRepairFromRubbleLoop  = BuildingBigConstructionLoop
  End

  Behavior = CastleMemberBehavior ModuleTag_CMB
	BeingBuiltSound = BuildingBigConstructionLoop
  End 

  	;-----------------------------------------------
	;Used for hero revival and initial construction     
	Behavior = ProductionUpdate ProductionUpdateModuleTag
		; nothing, but is required if we have any Object-level Upgrades!
	End
	Behavior = QueueProductionExitUpdate ModuleTag_QueuePEU
		UnitCreatePoint   = X:0.0 Y:-20.0 Z:0.0
		NaturalRallyPoint = X:28.8 Y:-80.0 Z:0.0;NaturalRallyPointX must always match GeometryMajorRadius! 
		ExitDelay = 300 ;Handles delays between units if multiple produced at a time. 
	End  
	;-----------------------------------------------

	Behavior = AutoDepositUpdate AutoDepositModuleTag
		DepositTiming			= GENERIC_KEEP_MONEY_TIME		; in milliseconds
		DepositAmount			= GENERIC_KEEP_MONEY_AMOUNT		; cash amount to deposit every DepositTiming
		InitialCaptureBonus		= 0  ; no initial bonus
	End

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
  Behavior = KeepObjectDie ModuleTag_IWantRubble
  End
  
     Behavior                  = StructureCollapseUpdate ModuleTag_06
       MinCollapseDelay        = 000
       MaxCollapseDelay        = 000
       CollapseDamping         = .5
       MaxShudder              = 0.6
       MinBurstDelay           = 250
       MaxBurstDelay           = 800
       BigBurstFrequency       = 4
       FXList                  = INITIAL FX_StructureMediumCollapse
     End

	Behavior                  = RubbleRiseUpdate ModuleTag_07
		MinRubbleRiseDelay      = 000
		MaxRubbleRiseDelay      = 000
		;RubbleRiseDamping       = .5
		RubbleHeight            = 4.0
		MaxShudder              = 0.6
		MinBurstDelay           = 250
		MaxBurstDelay           = 800
		BigBurstFrequency       = 4
		FXList                  = INITIAL FX_StructureMediumPostCollapse		;FX_StructureMediumCollapse
	End  
  
  Geometry              = CYLINDER
  GeometryMajorRadius   = 37.0
  GeometryMinorRadius   = 0
  GeometryHeight        = 16.0
  
  AdditionalGeometry    = CYLINDER
  GeometryMajorRadius   = 12.0
  GeometryMinorRadius   = 0
  GeometryHeight        = 95.0
  
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  
  AttackContactPoint	= X:-0.489		Y:1.954		Z:133.674		Swoop
  AttackContactPoint	= X:0			Y:0			Z:0
End

;------------------------------------------------------------------------------


Object RBCampFloor

  ; *** ART Parameters ***
  Draw = W3DFloorDraw ModuleTag_01
      ModelName = RBCampFloor
      ForceToBack = Yes
  End

  ; *** AUDIO Parameters ***

	VoiceSelect		= Gui_PlotSelect


  ; ***DESIGN parameters ***

  DisplayName      = OBJECT:CampFloor
  Side = Rohan
  EditorSorting = STRUCTURE
; Browser = CINEMATICS UNIT

  ArmorSet
    Conditions        = None
    Armor             = NoArmor
    DamageFX          = None
  End

  ; *** ENGINEERING Parameters ***  
  ; The STRUCTURE KindOf is needed so this object will be given to the base
  ; owner when it's unpacked and show up in the right color on the radar map.

  KindOf                = STRUCTURE IMMOBILE NO_COLLIDE UNATTACKABLE INERT 
  RadarPriority = NOT_ON_RADAR
  Body                  = ImmortalBody ModuleTag_03
    MaxHealth       = 2000.0
  End

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
  Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 1000
  End
  
  Geometry              = BOX
  GeometryMajorRadius   = 0.8
  GeometryMinorRadius   = 0.8
  GeometryHeight        = 0.8
  GeometryIsSmall       = Yes
  ;GeometryRotationAnchorOffset = X:1037.871 Y:0
End

;------------------------------------------------------------------------------


Object RBCastleFloor

  ; *** ART Parameters ***
  Draw = W3DFloorDraw ModuleTag_01
      ModelName = RBCastFloor
      ForceToBack = Yes
  End

  ; *** AUDIO Parameters ***

	;VoiceSelect		= Gui_PlotSelect


  ; ***DESIGN parameters ***

  DisplayName      = OBJECT:CastFloor
  Side = Rohan
  EditorSorting = STRUCTURE
; Browser = CINEMATICS UNIT

  ArmorSet
    Conditions        = None
    Armor             = NoArmor
    DamageFX          = None
  End

  ; *** ENGINEERING Parameters ***  
  ; The STRUCTURE KindOf is needed so this object will be given to the base
  ; owner when it's unpacked and show up in the right color on the radar map.

  KindOf                = STRUCTURE IMMOBILE NO_COLLIDE UNATTACKABLE INERT 
  RadarPriority = NOT_ON_RADAR
  Body                  = ImmortalBody ModuleTag_03
    MaxHealth       = 2000.0
  End

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
  Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 1000
  End
  
  Geometry              = BOX
  GeometryMajorRadius   = 0.8
  GeometryMinorRadius   = 0.8
  GeometryHeight        = 0.8
  GeometryIsSmall       = Yes
  ;GeometryRotationAnchorOffset = X:1037.871 Y:0
End

;------------------------------------------------------------------------------


Object RBCampFence

SelectPortrait = BPRCampWall

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
    StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD  
    OkToChangeModelColor = Yes
    DefaultModelConditionState
      Model = RBCFence
    End

		ModelConditionState = WORLD_BUILDER
  			Model = RBCFenceW
  		End

	IdleAnimationState
		Animation
			AnimationName     = RBCFence.RBCFence
			AnimationMode     = MANUAL
			AnimationBlendTime = 0
        End
        Flags = START_FRAME_LAST
	End    

    ;------------Build Up States
    ModelConditionState   = BASE_BUILD
      Model               = RBCFence
;      ParticleSysBone	  = NONE BuildingDoughnutCloud
      ParticleSysBone     = NONE BuildingContructDust
    End  
	AnimationState		  = BASE_BUILD
		Animation
			AnimationName = RBCFence.RBCFence
			AnimationMode = ONCE
			AnimationSpeedFactorRange = 2.0 2.5 ; keep range wide to avoid lockstep anims
		End
	End

	AnimationState		  = JUST_BUILT
		Animation
			AnimationName = RBCFence.RBCFence
			AnimationMode = MANUAL
			AnimationBlendTime = 0
		End
        Flags = START_FRAME_FIRST
	End    
	
    ModelConditionState  = DAMAGED
      Model         = RBCFence_D1
      ParticleSysBone emberBone01 SmokeBuildingLarge
	
    End
    AnimationState = DAMAGED
	EnteringStateFX	= FX_BuildingDamaged
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = RBCFence_D2
      ParticleSysBone emberBone01 SmokeBuildingLarge
    End
    AnimationState = REALLYDAMAGED
	EnteringStateFX	= FX_BuildingDamaged
    End	
    
    ModelConditionState  = RUBBLE
      Model         = RBCFence_D3  
	  ParticleSysBone emberBone01 CatapultDestroyDebris
;      ParticleSysBone emberBone02 SmokeBuildingLarge
      ParticleSysBone emberBone03 PCTMediumDust
    End
    AnimationState = RUBBLE
		EnteringStateFX	= FX_WallWoodDie
;		EnteringStateFX	= FX_BuildingReallyDamaged
    End

  	ModelConditionState  = POST_RUBBLE
		Model         = None
		ParticleSysBone NONE SmokeBuildingMediumRubble
	End
	ModelConditionState  = POST_COLLAPSE
		Model         = None
		ParticleSysBone NONE SmokeBuildingMediumRubble
	End

  End

  ; *** AUDIO Parameters ***

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:RBCampFence
  Side = Rohan
  EditorSorting = STRUCTURE
; Browser = CINEMATICS UNIT

  ArmorSet
    Conditions        = None
    Armor             = RohanCampWallArmor
    DamageFX          = None
  End
  
  CommandSet = EmptyCommandSet

  ; *** ENGINEERING Parameters ***  
  KindOf                = STRUCTURE SELECTABLE IMMOBILE DEFENSIVE_WALL NOT_AUTOACQUIRABLE MADE_OF_WOOD
  RadarPriority = NOT_ON_RADAR
  Body                  = ActiveBody ModuleTag_03
    MaxHealth       = 2000.0
  End

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
;  Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
;      DestructionDelay  = 5000
;  End

	Behavior                  = StructureCollapseUpdate ModuleTag_06
		MinCollapseDelay        = 000
		MaxCollapseDelay        = 000
		CollapseDamping         = .5
		MaxShudder              = 0.6
		MinBurstDelay           = 250
		MaxBurstDelay           = 800
		BigBurstFrequency       = 4
;		FXList                  = INITIAL   FX_StructureMediumCollapse
;		FXList                  = ALMOST_FINAL  FX_StructureAlmostCollapse
		DestroyObjectWhenDone	= Yes
		CollapseHeight			= 80
	End

  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 
  
  Geometry              = BOX
  GeometryMajorRadius   = 26.0
  GeometryMinorRadius   = 4.0
  GeometryHeight        = 24.0
  GeometryOffset		= X:2 Y:0 Z:0
  
  GeometryIsSmall       = No
  ;GeometryRotationAnchorOffset = X:1037.871 Y:0
  Shadow                = SHADOW_VOLUME
End

;------------------------------------------------------------------------------


Object RBCampFence2

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
    StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD  
    OkToChangeModelColor = Yes
    DefaultModelConditionState
      Model = RBCFence2
    End

		ModelConditionState = WORLD_BUILDER
  			Model = RBCFence2
  		End

	IdleAnimationState
		Animation
			AnimationName     = RBCFence2.RBCFence2
			AnimationMode     = MANUAL
			AnimationBlendTime = 0
        End
        Flags = START_FRAME_LAST
	End    

    ;------------Build Up States
    ModelConditionState   = BASE_BUILD
      Model               = RBCFence2
;      ParticleSysBone	  = NONE BuildingDoughnutCloud
      ParticleSysBone     = NONE BuildingContructDust
    End  
	AnimationState		  = BASE_BUILD
		Animation
			AnimationName = RBCFence2.RBCFence2
			AnimationMode = ONCE
			AnimationSpeedFactorRange = 2.0 2.5 ; keep range wide to avoid lockstep anims
		End
	End

	AnimationState		  = JUST_BUILT
		Animation
			AnimationName = RBCFence2.RBCFence2
			AnimationMode = MANUAL
			AnimationBlendTime = 0
		End
        Flags = START_FRAME_FIRST
	End    
	
    ModelConditionState  = DAMAGED
      Model         = RBCFence2_D1
      ParticleSysBone emberBone01 SmokeBuildingLarge
	
    End
    AnimationState = DAMAGED
	EnteringStateFX	= FX_BuildingDamaged
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = RBCFence2_D2
      ParticleSysBone emberBone01 SmokeBuildingLarge
	
    End
    AnimationState = REALLYDAMAGED
	EnteringStateFX	= FX_BuildingReallyDamaged
    End	
    
    ModelConditionState  = RUBBLE
      Model         = RBCFence2_D2  
      ParticleSysBone emberBone01 CatapultDestroyDebris
      ParticleSysBone emberBone02 SmokeBuildingLarge
      ParticleSysBone emberBone03 PCTMediumDust
    End
    AnimationState = RUBBLE
    End

  	ModelConditionState  = POST_RUBBLE
		Model         = None
		ParticleSysBone NONE SmokeBuildingMediumRubble
	End
	ModelConditionState  = POST_COLLAPSE
		Model         = None
		ParticleSysBone NONE SmokeBuildingMediumRubble
	End

  End

  ; *** AUDIO Parameters ***

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:RBCampFence2
  Side = Rohan
  EditorSorting = STRUCTURE
; Browser = CINEMATICS UNIT

  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    DamageFX          = None
  End

  ; *** ENGINEERING Parameters ***  
  KindOf                = STRUCTURE SELECTABLE IMMOBILE DEFENSIVE_WALL NOT_AUTOACQUIRABLE MADE_OF_WOOD
  RadarPriority = STRUCTURE
  Body                  = ActiveBody ModuleTag_03
    MaxHealth       = 2000.0
  End

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
  Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 5000
  End
  
  Geometry              = BOX
  GeometryMajorRadius   = 26.0
  GeometryMinorRadius   = 4.0
  GeometryHeight        = 24.0
  GeometryOffset		= X:2 Y:0 Z:0
  
  GeometryIsSmall       = No
  ;GeometryRotationAnchorOffset = X:1037.871 Y:0
  Shadow                = SHADOW_VOLUME
End


;--------------------------------------primary RohanCitadel ----------------------------------------------------
Object RohanCastleBaseKeep

	SelectPortrait = BPRohanCastle_Citadel

   ; *** ART Parameters ***

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes

	ExtraPublicBone = ARROWBONE01
	ExtraPublicBone = ARROWBONE02
	ExtraPublicBone = ARROWBONE03
	ExtraPublicBone = ARROWBONE04
	ExtraPublicBone = ARROWBONE05
	ExtraPublicBone = ARROWBONE06
	ExtraPublicBone = ARROWBONE07
	ExtraPublicBone = ARROWBONE08
	ExtraPublicBone = ARROWBONE09
	ExtraPublicBone = ARROWBONE10
	ExtraPublicBone = ARROWBONE11
	ExtraPublicBone = ARROWBONE12

    DefaultModelConditionState  
      Model = RBCastKeep
;      ParticleSysBone   = smokebone01 TorchGlow
;      ParticleSysBone   = smokebone01 TorchSmokeBlack
;      ParticleSysBone   = smokebone02 TorchGlow
;      ParticleSysBone   = smokebone02 TorchSmokeBlack
      WeaponLaunchBone	= PRIMARY ARROW_
      WeaponFireFXBone  = PRIMARY ARROW_
     End
    
	IdleAnimationState
		StateName = STATE_None
		;BeginScript
		;	Prev = CurDrawablePrevAnimationState()
		;	if Prev == "BeingConstructed" then 
			    ; Don't play completed sound when canceling build-in-progress or when
			    ; destroyed halfway
		;	    if not CurDrawableModelcondition( "DYING" ) then 
		;			CurDrawablePlaySound("CampSoldierCompleteGeneric")
		;		end
		;	end
		;EndScript
	End

;------------Build Up States
    ModelConditionState   = ACTIVELY_BEING_CONSTRUCTED
      Model               = RBCastKeep_A
;      ParticleSysBone	  = NONE BuildingDoughnutCloud
      ParticleSysBone     = NONE BuildingContructDust
    End  

	AnimationState          = ACTIVELY_BEING_CONSTRUCTED
		StateName = STATE_Constructing
		Animation
			AnimationName	= RBCastKeep_A.RBCastKeep_A
			AnimationMode   = MANUAL
		End
		BeginScript
			CurDrawablePlaySound("GondorBarracksBeginConstruction")
			CurDrawablePlaySound("BuildingTopple")
		EndScript
	End

    ModelConditionState   = DESTROYED_WHILST_BEING_CONSTRUCTED
		Model = RBCastKeep_A
		ParticleSysBone NONE Explosion3
		ParticleSysBone NONE ExplosiveMineSmoke02
    End  
	AnimationState	= DESTROYED_WHILST_BEING_CONSTRUCTED
		StateName = STATE_DetroyedConstructing
		Animation
			AnimationName		= RBCastKeep_A.RBCastKeep_A
			AnimationMode		= ONCE_BACKWARDS
			AnimationBlendTime	= 90	; 3 seconds * 30 frames
		End
		; Specifically no start last frame flag here.
		Flags = START_FRAME_FIRST
	End
	
;------------Build Up States
    ModelConditionState   = BASE_BUILD
      Model               = RBCastKeep_A
;      ParticleSysBone	  = NONE BuildingDoughnutCloud
      ParticleSysBone     = NONE BuildingContructDust
    End  

	AnimationState		  = BASE_BUILD
		StateName = STATE_None
		Animation
			AnimationName = RBCastKeep_A.RBCastKeep_A
			AnimationMode = ONCE
			AnimationBlendTime = 0			
			AnimationSpeedFactorRange = 2.0 2.0 ; 300 frame anim, but need to shrink down to 5 seconds
		End
		BeginScript
			CurDrawablePlaySound("GondorBarracksBeginConstruction")
			CurDrawablePlaySound("BuildingTopple")
		EndScript
	End

    ModelConditionState   = JUST_BUILT
      Model               = RBCastKeep_A
;      ParticleSysBone	  = NONE BuildingDoughnutCloud
      ParticleSysBone     = NONE BuildingContructDust
    End  
	AnimationState		  = JUST_BUILT
		StateName = STATE_None
		Animation
			AnimationName = RBCastKeep_A.RBCastKeep_A
			AnimationMode = MANUAL			
			AnimationBlendTime = 0
		End
        Flags = START_FRAME_FIRST
	End
	
    ModelConditionState  = DAMAGED
      Model         = RBCastKeep_D1  
	
    End
    
    AnimationState = DAMAGED
		StateName = STATE_None
		EnteringStateFX	= FX_BuildingDamaged
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = RBCastKeep_D2
;      ParticleSysBone NONE furnaceSmoke
	
    End
	AnimationState = REALLYDAMAGED
		StateName = STATE_None
       	Animation				=	ReallyDamagedanimation
			AnimationName		=	 RBCastKeep_D2.RBCastKeep_D2
			AnimationMode		=	ONCE
		End
		EnteringStateFX	= FX_BuildingReallyDamaged
    End


	;-------RUBBLE--------------------------------------------------------------------------------
	TransitionState = TRANS_U_IntoRubble
		Animation = D3
			AnimationName		= RBCastKeep_D3.RBCastKeep_D3
			AnimationMode		= ONCE
			AnimationBlendTime = 0
		End
		ParticleSysBone NONE Explosion3
		ParticleSysBone NONE ExplosiveMineSmoke02
	End
    ModelConditionState  = RUBBLE
		Model         = RBCastKeep_D3
    End
    AnimationState = RUBBLE
		Flags = START_FRAME_LAST
		StateName = STATE_Rubble
		Animation				=	Death
			AnimationName		=	RBCastKeep_D3.RBCastKeep_D3
			AnimationMode		=	ONCE
		End
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "STATE_None"
			then
				; Only play the rubble anim if we havn't come from another rubble.
				CurDrawableSetTransitionAnimState("TRANS_U_IntoRubble")
			end
		EndScript
    End      

  End


	; *** AUDIO Parameters ***

	VoiceSelect				= RohanCitadelSelect

	SoundOnDamaged			= BuildingLightDamageWood
	SoundOnReallyDamaged		= BuildingHeavyDamageWood

	VoiceSelectUnderConstruction	= BuildingGoodVoiceSelectUnderConstruction

	UnitSpecificSounds
		UnderConstruction		= BuildingBigConstructionLoop		; Built first time
		; UnderRepairFromDamage	= NoSound					; Repaired No animation on the building, so don't bother playing sound
		UnderRepairFromRubble	= BuildingBigConstructionLoop		; Repaired from completely destroyed (not used???)
	End

	EvaEventDieOwner = CitadelDie

	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		MaxUpdateRangeCap = 800
 		AnimationSound = Sound:BuildingHeavyDamageWood	Animation:RBCastKeep_D3.RBCastKeep_D3	Frames:0
 		AnimationSound = Sound:BuildingSink			Animation:RBCastKeep_D3.RBCastKeep_D3	Frames:25
 		AnimationSound = Sound:BuildingLightDamageWood	Animation:RBCastKeep_D3.RBCastKeep_D3	Frames:105
	End


	; ***DESIGN parameters ***

	DisplayName      = OBJECT:RohanCastleBaseKeep
	Side = Rohan
	EditorSorting   = STRUCTURE
	ThreatLevel = 1.0
	BuildCost           = 1000
	BuildTime           = 30.0           ; in seconds
	CommandSet			= RohanCastleBaseKeepCommandSet

	ArmorSet
		Conditions        = None
		Armor             = CitadelArmor
		DamageFX          = RohanWallDamageFX
	End

  ; *** ENGINEERING Parameters ***  
  KindOf					= VITAL_FOR_BASE_SURVIVAL STRUCTURE SELECTABLE IMMOBILE SCORE CASTLE_KEEP MP_COUNT_FOR_VICTORY FS_FACTORY MADE_OF_WOOD CAN_ATTACK AUTO_RALLYPOINT	;  GARRISONABLE_UNTIL_DESTROYED GARRISON
  RadarPriority				= STRUCTURE
  KeepSelectableWhenDead	= Yes
  
  Body              = ActiveBody ModuleTag_02
    MaxHealth       = 4000.0
  End

  Behavior = GettingBuiltBehavior ModuleTag_04
    SelfBuildingLoop = BuildingBigConstructionLoop				; Only played if we DON'T spawn a worker
	SelfRepairFromDamageLoop  = NoSound         				; This doesn't cause an animation, so don't bother playing a sound
	SelfRepairFromRubbleLoop  = BuildingBigConstructionLoop
  End

  Behavior = CastleMemberBehavior ModuleTag_CMB
	BeingBuiltSound = BuildingBigConstructionLoop
  End 

  	;-----------------------------------------------
	;Used for hero revival and initial construction     
	Behavior = ProductionUpdate ProductionUpdateModuleTag
		; nothing, but is required if we have any Object-level Upgrades!
	End
	Behavior = QueueProductionExitUpdate ModuleTag_QueuePEU
		UnitCreatePoint   = X:0.0 Y:-20.0 Z:0.0
		NaturalRallyPoint = X:28.8 Y:-80.0 Z:0.0;NaturalRallyPointX must always match GeometryMajorRadius! 
		ExitDelay = 300 ;Handles delays between units if multiple produced at a time. 
	End  
	;-----------------------------------------------

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
  Behavior = KeepObjectDie ModuleTag_IWantRubble
  End
 
  
;  Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
;      DestructionDelay  = 6500
;  End


;  Behavior                  = StructureCollapseUpdate ModuleTag_06
;    MinCollapseDelay        = 5000
;    MaxCollapseDelay        = 5000
;    CollapseDamping         = .5
;    MaxShudder              = 0.6
;    MinBurstDelay           = 250
;    MaxBurstDelay           = 800
;    BigBurstFrequency       = 4
;    FXList                  = INITIAL   FX_StructureMediumCollapse
;  End
  
  
  
  
	Behavior       = EvacuateDamage ModuleTag_evacuateDamage
		WeaponThatCausesEvacuation  = MordorCatapultHumanHeads
	End

;	Behavior = HordeGarrisonContain ModuleTag_hordeGarrison
;		ObjectStatusOfContained	= UNSELECTABLE CAN_ATTACK
;		ContainMax              = 4
;		MaxHordeCapacity        = 4
;		DamagePercentToUnits    = 0%
;		PassengerFilter			= ANY +INFANTRY +HORDE -CAVALRY
;		AllowEnemiesInside      = Yes
;		AllowNeutralInside      = Yes
;		NumberOfExitPaths       = 1 ; Defaults to 1.  Set 0 to not use ExitStart/ExitEnd, set higher than 1 to use ExitStart01-nn/ExitEnd01-nn
;		PassengerBonePrefix     = PassengerBone:ARROWBONE KindOf:INFANTRY
;		EntryOffset				= X:0.0 Y:-45.0 Z:0.0
;		ExitOffset				= X:0.0 Y:-45.0 Z:0.0
;		
;		;PassengersTestCollisionHeight = 80
;		;Slots                         = 1
;		;EnterSound                     = GarrisonEnter
;		;ExitSound                      = GarrisonExit
;		;ExitDelay               = 250
;		;GoAggressiveOnExit      = Yes ; AI Will tell people to set their mood to Aggressive on exiting
;		;ForceOrientationContainer = No  ; otherwise contained units can't orient themselves towards their targets...
;	End 

	Behavior = AutoDepositUpdate AutoDepositModuleTag
		DepositTiming			= GENERIC_KEEP_MONEY_TIME   ; in milliseconds
		DepositAmount			= GENERIC_KEEP_MONEY_AMOUNT   ; cash amount to deposit every DepositTiming
		InitialCaptureBonus		= 0  ; no initial bonus
	End


  Behavior                  = BuildingBehavior BuildingModuleTag
    NightWindowName         = WINDOW_N01
  ;  FireWindowName          = WINDOW_F01
  ;  GlowWindowName			= WINDOW_G01
  End
  
  Geometry				= BOX
  GeometryMajorRadius   = 21.0
  GeometryMinorRadius   = 41.0
  GeometryHeight        = 51.0
  
  AdditionalGeometry    = CYLINDER
  GeometryMajorRadius   = 57.0
  GeometryMinorRadius   = 0
  GeometryHeight        = 7.0
  
  AdditionalGeometry    = BOX
  GeometryMajorRadius   = 12.0
  GeometryMinorRadius   = 12.0
  GeometryHeight        = 120.0
  GeometryOffset		= X:-1 Y:2 Z:0
  
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  
;  AttackContactPoint	= X:-1 Y:2 Z:117
;  AttackContactPoint	= X:-1 Y:2 Z:0

	GeometryContactPoint	= X:-1.538		Y:2.559		Z:149.812			Swoop
	GeometryContactPoint	= X:-1.538		Y:2.559		Z:0

End

;------------------------------------------------------------------------------------------
;Rohan Building Foundation -- the area where faction rohan buildings can be built on
Object RohanBuildingFoundation
 
	SelectPortrait = BPRCamp_Plot
  ; *** ART Parameters ***

  
	Draw = W3DScriptedModelDraw ModuleTag_Draw2
	    DefaultModelConditionState
			Model = OBBFoundationX
		End
		ModelConditionState = WORLD_BUILDER
  			Model = RBSizeTemplate
  		End
		
	End
   Draw = W3DFloorDraw ModuleTag_Draw
      ModelName = RBFoundationX
  End
 
  ;PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:RohanBuildingFoundation
  Side                = Rohan
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160

  CommandSet = RohanFoundationCommandSet

  ; *** AUDIO Parameters ***

  VoiceSelect = Gui_PlotSelect


  ; *** ENGINEERING Parameters ***

  RadarPriority       = STRUCTURE
  KindOf              = STRUCTURE SELECTABLE IMMOBILE BASE_FOUNDATION UNATTACKABLE MP_COUNT_FOR_VICTORY NO_COLLIDE DO_NOT_CLASSIFY
 
  Behavior            = FoundationAIUpdate ModuleTag_foundationAI
  End

  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  Body                = ImmortalBody ModuleTag_05
    MaxHealth         = 15000.0
  End
 
  Geometry              = BOX
  GeometryMajorRadius   = 24.0
  GeometryMinorRadius   = 24.0
  GeometryHeight        = 0.8
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  BuildCompletion		= PLACED_BY_PLAYER
End

;------------------------------------------------------------------------------



Object RohanCastleBend

  
  SelectPortrait = BRCastleWall
  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    
    WallBoundsMesh = P1
    		
    DefaultModelConditionState
      Model = RBCastBend
    End


		ModelConditionState = WORLD_BUILDER
  			Model = RBCastBendW
  		End

	IdleAnimationState
		Animation
			AnimationName     = RBCastBend.RBCastBend
			AnimationMode     = MANUAL
			AnimationBlendTime = 0
        End
        Flags = START_FRAME_LAST
	End    

    ;------------Build Up States
    ModelConditionState   = BASE_BUILD
      Model               = RBCastBend
;      ParticleSysBone	  = NONE BuildingDoughnutCloud
      ParticleSysBone     = NONE BuildingContructDust
    End  
	AnimationState		  = BASE_BUILD
		Animation
			AnimationName = RBCastBend.RBCastBend
			AnimationMode = ONCE
			AnimationSpeedFactorRange = 2.0 2.5 ; keep range wide to avoid lockstep anims
		End
	End

	AnimationState		  = JUST_BUILT
		Animation
			AnimationName = RBCastBend.RBCastBend
			AnimationMode = MANUAL
			AnimationBlendTime = 0
		End
        Flags = START_FRAME_FIRST
	End    
	
    ModelConditionState  = DAMAGED
      Model         = RBCastBend_D1  
    End
    
    AnimationState = DAMAGED
	EnteringStateFX	= FX_BuildingDamaged
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = RBCastBend_D2
    End
	AnimationState = REALLYDAMAGED
       	Animation				=	ReallyDamagedanimation
			AnimationName		=	 RBCastBend_D2.RBCastBend_D2
			AnimationMode		=	ONCE
   		End
	EnteringStateFX	= FX_BuildingReallyDamaged
    End

    ModelConditionState  = RUBBLE
      Model         = RBCastBend_D3
    End
    
    AnimationState = RUBBLE
		Animation				=	Death
			AnimationName		=	RBCastBend_D3.RBCastBend_D3
			AnimationMode		=	ONCE
		End
		EnteringStateFX = FX_WallDie
		;EnteringStateFX = FX_RohanWallRubble
    End      

    ModelConditionState  = POST_RUBBLE
		Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
    End


  End

  ; *** AUDIO Parameters ***

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone


  ; ***DESIGN parameters ***

  DisplayName      = OBJECT:RohanCastleWall
  Side = Rohan
  EditorSorting = STRUCTURE
; Browser = CINEMATICS UNIT
	BuildTime = CASTLE_WALL_REBUILD_TIME
	BuildCost = CASTLE_WALL_REBUILD_COST

  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160

  ArmorSet
    Conditions        = None
    Armor             = RohanCastleWall
    DamageFX          = RohanWallDamageFX
  End
  

  ; *** ENGINEERING Parameters ***  
	KindOf					= STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL MADE_OF_WOOD SELECTABLE NOT_AUTOACQUIRABLE
	RadarPriority			= NOT_ON_RADAR
	KeepSelectableWhenDead	= Yes
	CommandSet				= GenericSelfRepairCommandSet

  Body                = StructureBody ModuleTag_03
    MaxHealth         = ROHAN_CASTLE_WALL_HEALTH
  End

  Behavior = SiegeDockingBehavior ModuleTag_SiegeDocking
  End

 	Behavior = GettingBuiltBehavior ModuleTag_GettingBuilt
		SelfBuildingLoop = BuildingConstructionLoop ; Only played if we DON'T spawn a worker
		SelfRepairFromDamageLoop  = NoSound         ; This doesn't cause an animation, so don't bother playing a sound
		SelfRepairFromRubbleLoop  = BuildingConstructionLoop
		SpawnTimer = -1.0 ; Negative means no 'autoheal'
	End
  
  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
;  Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
;      DestructionDelay  = 5000
;  End

    Behavior = KeepObjectDie ModuleTag_IWantRubble
    End
    
  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= WallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End

    Behavior = CastleMemberBehavior ModuleTag_CMB
		CountsForEvaCastleBreached = Yes
    End 
      
 	Behavior = FireWeaponWhenDeadBehavior FireDeadTag2
		DeathTypes		= ALL
		StartsActive	= Yes
		DeathWeapon		= StandardWallDeath
		DelayTime		= 1					; Required so this happens even when constructing.
	End	
      
  Geometry              = BOX
  GeometryMajorRadius   = 55.0
  GeometryMinorRadius   = 55.0
  GeometryHeight        = 45.0

  
  GeometryIsSmall       = No
  ;GeometryRotationAnchorOffset = X:1037.871 Y:0
  Shadow                = SHADOW_VOLUME
  
  AttackContactPoint	= X:3 Y:48 Z:27.5
  AttackContactPoint	= X:3 Y:3 Z:27.5
  AttackContactPoint	= X:48 Y:3 Z:27.5
End

;------------------------------------------------------------------------------

Object RohanCastleCorn
  
  SelectPortrait = BRCastleWall
  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    
    WallBoundsMesh = P1
    		
    DefaultModelConditionState
      Model = RBCastCorn
    End

	IdleAnimationState
		Animation
			AnimationName     = RBCastCorn.RBCastCorn
			AnimationMode     = MANUAL
			AnimationBlendTime = 0
        End
        Flags = START_FRAME_LAST
	End    

    ;------------Build Up States
    ModelConditionState   = BASE_BUILD
      Model               = RBCastCorn
;      ParticleSysBone	  = NONE BuildingDoughnutCloud
      ParticleSysBone     = NONE BuildingContructDust
    End  
	AnimationState		  = BASE_BUILD
		Animation
			AnimationName = RBCastCorn.RBCastCorn
			AnimationMode = ONCE
			AnimationSpeedFactorRange = 2.0 2.5 ; keep range wide to avoid lockstep anims
		End
	End

	AnimationState		  = JUST_BUILT
		Animation
			AnimationName = RBCastCorn.RBCastCorn
			AnimationMode = MANUAL
			AnimationBlendTime = 0
		End
        Flags = START_FRAME_FIRST
	End    
	
    ModelConditionState  = DAMAGED
      Model         = RBCastCorn_D1  
    End
    
    AnimationState = DAMAGED
	EnteringStateFX	= FX_BuildingDamaged
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = RBCastCorn_D2
    End
	AnimationState = REALLYDAMAGED
       	Animation				=	ReallyDamagedanimation
			AnimationName		=	 RBCastCorn_D2.RBCastCorn_D2
			AnimationMode		=	ONCE
   		End
	EnteringStateFX	= FX_BuildingReallyDamaged
    End

    ModelConditionState  = RUBBLE
      Model         = RBCastCorn_D3
    End
    
    AnimationState = RUBBLE
		Animation				=	Death
			AnimationName		=	RBCastCorn_D3.RBCastCorn_D3
			AnimationMode		=	ONCE
		End
	EnteringStateFX = FX_WallDie
    End      

    ModelConditionState  = POST_RUBBLE
		Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
    End


  End

  ; *** AUDIO Parameters ***

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone


  ; ***DESIGN parameters ***

  DisplayName      = OBJECT:RohanCastleWall
  Side = Rohan
  EditorSorting = STRUCTURE
; Browser = CINEMATICS UNIT
	BuildTime = CASTLE_WALL_REBUILD_TIME
	BuildCost = CASTLE_WALL_REBUILD_COST

  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160

  ArmorSet
    Conditions        = None
    Armor             = RohanCastleWall
    DamageFX          = RohanWallDamageFX
  End
  

  ; *** ENGINEERING Parameters ***  
	KindOf					= STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL MADE_OF_WOOD SELECTABLE NOT_AUTOACQUIRABLE
	RadarPriority			= NOT_ON_RADAR
	KeepSelectableWhenDead	= Yes
	CommandSet				= GenericSelfRepairCommandSet

  Body                = StructureBody ModuleTag_03
    MaxHealth         = ROHAN_CASTLE_WALL_HEALTH
  End

  Behavior = SiegeDockingBehavior ModuleTag_SiegeDocking
  End

 	Behavior = GettingBuiltBehavior ModuleTag_GettingBuilt
		SelfBuildingLoop = BuildingConstructionLoop ; Only played if we DON'T spawn a worker
		SelfRepairFromDamageLoop  = NoSound         ; This doesn't cause an animation, so don't bother playing a sound
		SelfRepairFromRubbleLoop  = BuildingConstructionLoop
		SpawnTimer = -1.0 ; Negative means no 'autoheal'
		RebuildTimeSeconds = CASTLE_WALL_REBUILD_TIME
	End
  
  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
;  Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
;      DestructionDelay  = 5000
;  End

    Behavior = KeepObjectDie ModuleTag_IWantRubble
    End
    
  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= WallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End

    Behavior = CastleMemberBehavior ModuleTag_CMB
		CountsForEvaCastleBreached = Yes
    End 
      
 	Behavior = FireWeaponWhenDeadBehavior FireDeadTag2
		DeathTypes		= ALL
		StartsActive	= Yes
		DeathWeapon		= StandardWallDeath
		DelayTime		= 1					; Required so this happens even when constructing.
	End	
      
  Geometry              = BOX
  GeometryMajorRadius   = 43.0
  GeometryMinorRadius   = 43.0
  GeometryHeight        = 55.0
  GeometryOffset		= X:7 Y:7 Z:0
  
  GeometryIsSmall       = No
  ;GeometryRotationAnchorOffset = X:1037.871 Y:0
  Shadow                = SHADOW_VOLUME
  
  AttackContactPoint	= X:3 Y:48 Z:27.5
  AttackContactPoint	= X:3 Y:3 Z:27.5
  AttackContactPoint	= X:48 Y:3 Z:27.5
End

;------------------------------------------------------------------------------


Object RohanCastleTowr

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    DefaultModelConditionState
      Model = RBCastTowr
    End

	IdleAnimationState
		Animation
			AnimationName     = RBCastTowr.RBCastTowr
			AnimationMode     = MANUAL
			AnimationBlendTime = 0
        End
        Flags = START_FRAME_LAST
	End    

    ;------------Build Up States
    ModelConditionState   = BASE_BUILD
      Model               = RBCastTowr
;      ParticleSysBone	  = NONE BuildingDoughnutCloud
      ParticleSysBone     = NONE BuildingContructDust
    End  
	AnimationState		  = BASE_BUILD
		Animation
			AnimationName = RBCastTowr.RBCastTowr
			AnimationMode = ONCE
			AnimationSpeedFactorRange = 2.0 2.5 ; keep range wide to avoid lockstep anims
		End
	End

	AnimationState		  = JUST_BUILT
		Animation
			AnimationName = RBCastTowr.RBCastTowr
			AnimationMode = MANUAL
			AnimationBlendTime = 0
		End
        Flags = START_FRAME_FIRST
	End    
	
		ModelConditionState  = DAMAGED
			Model         = RBCastTOWR_D1  
		End
	    
		AnimationState = DAMAGED
			EnteringStateFX	= FX_BuildingDamaged
		End

	ModelConditionState  = REALLYDAMAGED
		Model         = RBCastTOWR_D2
	End
	AnimationState = REALLYDAMAGED
       		Animation				=	ReallyDamagedanimation
				AnimationName		=	 RBCastTOWR_D2.RBCastTOWR_D2
				AnimationMode		=	ONCE
   		End
		EnteringStateFX	= FX_BuildingReallyDamaged
	End

	ModelConditionState  = RUBBLE
		Model         = RBCastTOWR_D3
	End
	    
	AnimationState = RUBBLE
		Animation				=	Death
			AnimationName		=	RBCastTOWR_D3.RBCastTOWR_D3
			AnimationMode		=	ONCE
		End
		EnteringStateFX = FX_WallDie
	;        EnteringStateFX = FX_MinWallATransitionRubble
	End      

	ModelConditionState  = POST_RUBBLE
		Model         = None
	End

	ModelConditionState  = POST_COLLAPSE
		Model         = None
	End

  End


  ; *** AUDIO Parameters ***

	SoundOnDamaged		= BuildingLightDamageWood
	SoundOnReallyDamaged	= BuildingHeavyDamageWood


  ; ***DESIGN parameters ***

  DisplayName      = OBJECT:RohanCastleTower
  Side = Rohan
  EditorSorting = STRUCTURE
; Browser = CINEMATICS UNIT

  VisionRange         = 400.0          ; Shroud clearing distance
  ShroudClearingRange = 400

  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    DamageFX          = None
  End

  ; *** ENGINEERING Parameters ***  
  KindOf                = STRUCTURE SELECTABLE IMMOBILE MADE_OF_WOOD
  RadarPriority = STRUCTURE
  Body                  = ActiveBody ModuleTag_03
    MaxHealth       = 3000.0
  End

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
;  Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
;      DestructionDelay  = 5000
;  End
    Behavior = KeepObjectDie ModuleTag_IWantRubble
    End  
  
  Geometry              = BOX
  GeometryMajorRadius   = 22.0
  GeometryMinorRadius   = 24.0
  GeometryHeight        = 119.0
  GeometryOffset		= X:-4 Y:-39 Z:0
  
  GeometryIsSmall       = No
  ;GeometryRotationAnchorOffset = X:1037.871 Y:0
  Shadow                = SHADOW_VOLUME
  
;  AttackContactPoint	= X:-4 Y:-39 Z:116
;  AttackContactPoint	= X:-4 Y:-39 Z:0

	GeometryContactPoint	= X:-20.675		Y:-58.257	Z:108.263	Swoop
	GeometryContactPoint	= X:-20.675		Y:-58.257	Z:0
End

;------------------------------------------------------------------------------


Object RohanCastleAngl01

SelectPortrait = BRCastleWall

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
        WallBoundsMesh = P1
    DefaultModelConditionState
      Model = RBCastAngl01
    End

	IdleAnimationState
		Animation
			AnimationName     = RBCastAngl01.RBCastAngl01
			AnimationMode     = MANUAL
			AnimationBlendTime = 0
        End
        Flags = START_FRAME_LAST
	End    

    ;------------Build Up States
    ModelConditionState   = BASE_BUILD
      Model               = RBCastAngl01
;      ParticleSysBone	  = NONE BuildingDoughnutCloud
      ParticleSysBone     = NONE BuildingContructDust
    End  
	AnimationState		  = BASE_BUILD
		Animation
			AnimationName = RBCastAngl01.RBCastAngl01
			AnimationMode = ONCE
			AnimationSpeedFactorRange = 2.0 2.5 ; keep range wide to avoid lockstep anims
		End
	End

	AnimationState		  = JUST_BUILT
		Animation
			AnimationName = RBCastAngl01.RBCastAngl01
			AnimationMode = MANUAL
			AnimationBlendTime = 0
		End
        Flags = START_FRAME_FIRST
	End    

    ModelConditionState  = DAMAGED
      Model         = RBCastAngl01_D1  
    End
    
    AnimationState = DAMAGED
	EnteringStateFX	= FX_BuildingDamaged
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = RBCastAngl01_D2
    End
	AnimationState = REALLYDAMAGED
       	Animation				=	ReallyDamagedanimation
			AnimationName		=	 RBCastAngl01_D2.RBCastAngl01_D2
			AnimationMode		=	ONCE
   		End
	EnteringStateFX	= FX_BuildingReallyDamaged
    End

    ModelConditionState  = RUBBLE
      Model         = RBCastAngl01_D3
    End
    
    AnimationState = RUBBLE
		Animation				=	Death
			AnimationName		=	RBCastAngl01_D3.RBCastAngl01_D3
			AnimationMode		=	ONCE
		End
		EnteringStateFX = FX_WallDie
;        EnteringStateFX = FX_RohanWallRubble
    End      

    ModelConditionState  = POST_RUBBLE
		Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
    End

  End


  ; *** AUDIO Parameters ***

	SoundOnDamaged		= BuildingLightDamageWood
	SoundOnReallyDamaged	= BuildingHeavyDamageWood


  ; ***DESIGN parameters ***

  DisplayName      = OBJECT:RohanCastleWall
  Side = Rohan
  EditorSorting = STRUCTURE
; Browser = CINEMATICS UNIT
	BuildTime = CASTLE_WALL_REBUILD_TIME
	BuildCost = CASTLE_WALL_REBUILD_COST

  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160

  ArmorSet
    Conditions        = None
    Armor             = RohanCastleWall
    DamageFX          = RohanWallDamageFX
  End
  
	; *** ENGINEERING Parameters ***  
	KindOf					= STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL MADE_OF_WOOD SELECTABLE NOT_AUTOACQUIRABLE
	RadarPriority			= NOT_ON_RADAR
	KeepSelectableWhenDead	= Yes
	CommandSet				= GenericSelfRepairCommandSet
  
  
  Body                = StructureBody ModuleTag_03
    MaxHealth         = ROHAN_CASTLE_WALL_HEALTH
  End

  Behavior = SiegeDockingBehavior ModuleTag_SiegeDocking
  End
  
  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
;  Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
;      DestructionDelay  = 5000
;  End

   Behavior = KeepObjectDie ModuleTag_IWantRubble
   End
   
   Behavior = CastleMemberBehavior ModuleTag_CMB
	    CountsForEvaCastleBreached = Yes
   End 

 	Behavior = GettingBuiltBehavior ModuleTag_GettingBuilt
		SelfBuildingLoop = BuildingConstructionLoop ; Only played if we DON'T spawn a worker
		SelfRepairFromDamageLoop  = NoSound         ; This doesn't cause an animation, so don't bother playing a sound
		SelfRepairFromRubbleLoop  = BuildingConstructionLoop
		SpawnTimer = -1.0 ; Negative means no 'autoheal'
		RebuildTimeSeconds = CASTLE_WALL_REBUILD_TIME
	End


  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= WallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End

 	Behavior = FireWeaponWhenDeadBehavior FireDeadTag2
		DeathTypes		= ALL
		StartsActive	= Yes
		DeathWeapon		= StandardWallDeath
		DelayTime		= 1					; Required so this happens even when constructing.
	End	
  
  Geometry              = CYLINDER
  GeometryMajorRadius   = 13.0
  GeometryMinorRadius   = 0
  GeometryHeight        = 57.0
  GeometryOffset		= X:-40 Y:-20 Z:0
  
  AdditionalGeometry	= CYLINDER
  GeometryMajorRadius   = 35.0
  GeometryMinorRadius   = 0
  GeometryHeight        = 57.0
  GeometryOffset		= X:-15 Y:18 Z:0
  
  AdditionalGeometry	= CYLINDER
  GeometryMajorRadius   = 35.0
  GeometryMinorRadius   = 0
  GeometryHeight        = 57.0
  GeometryOffset		= X:17 Y:52 Z:0
  
  GeometryIsSmall       = No
  ;GeometryRotationAnchorOffset = X:1037.871 Y:0
  Shadow                = SHADOW_VOLUME
  
  AttackContactPoint	= X:27 Y:62 Z:28.5
  AttackContactPoint	= X:-40 Y:-20 Z:28.5
End

;------------------------------------------------------------------------------


Object RohanCastleAngl02

SelectPortrait = BRCastleWall
  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_02
    OkToChangeModelColor = Yes
        WallBoundsMesh = P1
    DefaultModelConditionState
      Model = RBCastAngl02
    End

	IdleAnimationState
		Animation
			AnimationName     = RBCastAngl02.RBCastAngl02
			AnimationMode     = MANUAL
			AnimationBlendTime = 0
        End
        Flags = START_FRAME_LAST
	End    

    ;------------Build Up States
    ModelConditionState   = BASE_BUILD
      Model               = RBCastAngl02
;      ParticleSysBone	  = NONE BuildingDoughnutCloud
      ParticleSysBone     = NONE BuildingContructDust
    End  
	AnimationState		  = BASE_BUILD
		Animation
			AnimationName = RBCastAngl02.RBCastAngl02
			AnimationMode = ONCE
			AnimationSpeedFactorRange = 2.0 2.5 ; keep range wide to avoid lockstep anims
		End
	End

	AnimationState		  = JUST_BUILT
		Animation
			AnimationName = RBCastAngl02.RBCastAngl02
			AnimationMode = MANUAL
			AnimationBlendTime = 0
		End
        Flags = START_FRAME_FIRST
	End    
	
    ModelConditionState  = DAMAGED
      Model         = RBCastAngl02_D1  
    End
    
    AnimationState = DAMAGED
	EnteringStateFX	= FX_BuildingDamaged
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = RBCastAngl02_D2
    End
	AnimationState = REALLYDAMAGED
       	Animation				=	ReallyDamagedanimation
			AnimationName		=	 RBCastAngl02_D2.RBCastAngl02_D2
			AnimationMode		=	ONCE
   		End
	EnteringStateFX	= FX_BuildingReallyDamaged
    End

    ModelConditionState  = RUBBLE
      Model         = RBCastAngl02_D3
    End
    
    AnimationState = RUBBLE
		Animation				=	Death
			AnimationName		=	RBCastAngl02_D3.RBCastAngl02_D3
			AnimationMode		=	ONCE
		End
		EnteringStateFX = FX_WallDie
;        EnteringStateFX = FX_RohanWallRubble
    End      

    ModelConditionState  = POST_RUBBLE
		Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
    End

  End


  ; *** AUDIO Parameters ***

	SoundOnDamaged		= BuildingLightDamageWood
	SoundOnReallyDamaged	= BuildingHeavyDamageWood


  ; ***DESIGN parameters ***

  DisplayName      = OBJECT:RohanCastleWall
  Side = Rohan
  EditorSorting = STRUCTURE
; Browser = CINEMATICS UNIT
	BuildTime = CASTLE_WALL_REBUILD_TIME
	BuildCost = CASTLE_WALL_REBUILD_COST

  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160

  ArmorSet
    Conditions        = None
    Armor             = RohanCastleWall
    DamageFX          = RohanWallDamageFX
  End
  
	; *** ENGINEERING Parameters ***  
	KindOf					= STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL MADE_OF_WOOD SELECTABLE NOT_AUTOACQUIRABLE
	RadarPriority			= NOT_ON_RADAR
	KeepSelectableWhenDead	= Yes
	CommandSet				= GenericSelfRepairCommandSet

  Body                = StructureBody ModuleTag_03
    MaxHealth         = ROHAN_CASTLE_WALL_HEALTH
  End

  Behavior = SiegeDockingBehavior ModuleTag_SiegeDocking
  End
  
  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
;  Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
;      DestructionDelay  = 5000
;  End

   Behavior = KeepObjectDie ModuleTag_IWantRubble
   End  

	Behavior = GettingBuiltBehavior ModuleTag_GettingBuilt
		SelfBuildingLoop = BuildingConstructionLoop ; Only played if we DON'T spawn a worker
		SelfRepairFromDamageLoop  = NoSound         ; This doesn't cause an animation, so don't bother playing a sound
		SelfRepairFromRubbleLoop  = BuildingConstructionLoop
		SpawnTimer = -1.0 ; Negative means no 'autoheal'
		RebuildTimeSeconds = CASTLE_WALL_REBUILD_TIME
	End
   
  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= WallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End

   Behavior = CastleMemberBehavior ModuleTag_CMB
		CountsForEvaCastleBreached = Yes
   End 

 	Behavior = FireWeaponWhenDeadBehavior FireDeadTag2
		DeathTypes		= ALL
		StartsActive	= Yes
		DeathWeapon		= StandardWallDeath
		DelayTime		= 1					; Required so this happens even when constructing.
	End	
  
  Geometry              = CYLINDER
  GeometryMajorRadius   = 13.0
  GeometryMinorRadius   = 0
  GeometryHeight        = 57.0
  GeometryOffset		= X:20 Y:40 Z:0
  
  AdditionalGeometry	= CYLINDER
  GeometryMajorRadius   = 35.0
  GeometryMinorRadius   = 0
  GeometryHeight        = 57.0
  GeometryOffset		= X:-15 Y:22 Z:0
  
  AdditionalGeometry	= CYLINDER
  GeometryMajorRadius   = 35.0
  GeometryMinorRadius   = 0
  GeometryHeight        = 57.0
  GeometryOffset		= X:-47 Y:-12 Z:0
  
  GeometryIsSmall       = No
  ;GeometryRotationAnchorOffset = X:1037.871 Y:0
  Shadow                = SHADOW_VOLUME
  
  AttackContactPoint	= X:-57 Y:-22 Z:28.5
  AttackContactPoint	= X:20 Y:40 Z:28.5
End

;------------------------------------------------------------------------------


Object RohanCastleGateR


SelectPortrait = BRCastleWall
  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    WallBoundsMesh = P02
    DefaultModelConditionState
      Model = RBCastGateR
    End

	IdleAnimationState
		Animation
			AnimationName     = RBCastGateR.RBCastGateR
			AnimationMode     = MANUAL
			AnimationBlendTime = 0
        End
        Flags = START_FRAME_LAST
	End    

    ;------------Build Up States
    ModelConditionState   = BASE_BUILD
      Model               = RBCastGateR
;      ParticleSysBone	  = NONE BuildingDoughnutCloud
      ParticleSysBone     = NONE BuildingContructDust
    End  
	AnimationState		  = BASE_BUILD
		Animation
			AnimationName = RBCastGateR.RBCastGateR
			AnimationMode = ONCE
			AnimationSpeedFactorRange = 2.0 2.5 ; keep range wide to avoid lockstep anims
		End
	End

	AnimationState		  = JUST_BUILT
		Animation
			AnimationName = RBCastGateR.RBCastGateR
			AnimationMode = MANUAL
			AnimationBlendTime = 0
		End
        Flags = START_FRAME_FIRST
	End    
	
    ModelConditionState  = DAMAGED
      Model         = RBCastGateR_D1  
    End
    
    AnimationState = DAMAGED
	EnteringStateFX	= FX_BuildingDamaged
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = RBCastGateR_D2
    End
	AnimationState = REALLYDAMAGED
       	Animation				=	ReallyDamagedanimation
			AnimationName		=	 RBCastGateR_D2.RBCastGateR_D2
			AnimationMode		=	ONCE
   		End
	EnteringStateFX	= FX_BuildingReallyDamaged
    End

    ModelConditionState  = RUBBLE
      Model         = RBCastGateR_D3
    End
    
    AnimationState = RUBBLE
		Animation				=	Death
			AnimationName		=	RBCastGateR_D3.RBCastGateR_D3
			AnimationMode		=	ONCE
		End
		EnteringStateFX = FX_WallDie
;        EnteringStateFX = FX_RohanWallRubble
    End      

    ModelConditionState  = POST_RUBBLE
		Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
    End
  End


  ; *** AUDIO Parameters ***

	SoundOnDamaged		= BuildingLightDamageWood
	SoundOnReallyDamaged	= BuildingHeavyDamageWood


  ; ***DESIGN parameters ***

  DisplayName      = OBJECT:RohanCastleGate
  Side = Rohan
  EditorSorting = STRUCTURE
; Browser = CINEMATICS UNIT

  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160

  ArmorSet
    Conditions        = None
    Armor             = RohanCastleWall
    DamageFX          = RohanWallDamageFX
  End
  
  ; *** ENGINEERING Parameters ***  
	KindOf                = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL MADE_OF_WOOD SELECTABLE NOT_AUTOACQUIRABLE
	RadarPriority = NOT_ON_RADAR
	BuildTime = CASTLE_WALL_REBUILD_TIME
	BuildCost = CASTLE_WALL_REBUILD_COST
	KeepSelectableWhenDead	= Yes
	CommandSet				= GenericSelfRepairCommandSet


  Body                  = ActiveBody ModuleTag_03
    MaxHealth       = ROHAN_CASTLE_WALL_HEALTH
  End

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
;  Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
;      DestructionDelay  = 5000
;  End

  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= WallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End

   Behavior = KeepObjectDie ModuleTag_IWantRubble
   End
 
 	Behavior = GettingBuiltBehavior ModuleTag_GettingBuilt
		SelfBuildingLoop = BuildingConstructionLoop ; Only played if we DON'T spawn a worker
		SelfRepairFromDamageLoop  = NoSound         ; This doesn't cause an animation, so don't bother playing a sound
		SelfRepairFromRubbleLoop  = BuildingConstructionLoop
		SpawnTimer = -1.0 ; Negative means no 'autoheal'
		RebuildTimeSeconds = CASTLE_WALL_REBUILD_TIME
	End
  
  Behavior = SiegeDockingBehavior ModuleTag_SiegeDocking
  End
  
  Behavior = CastleMemberBehavior ModuleTag_CMB
		CountsForEvaCastleBreached = Yes
  End 
  
  Geometry              = BOX
  GeometryMajorRadius   = 61.0
  GeometryMinorRadius   = 44.0
  GeometryHeight        = 56.0
  GeometryOffset		= X:39.0 Y:-7.0 Z:0
  
  GeometryIsSmall       = No
  ;GeometryRotationAnchorOffset = X:1037.871 Y:0
  Shadow                = SHADOW_VOLUME
  
  AttackContactPoint	= X:92 Y:8 Z:28
  AttackContactPoint	= X:3 Y:8 Z:28
  AttackContactPoint	= X:3 Y:-32 Z:28
End

;------------------------------------------------------------------------------


Object RohanCastleGateRTower

SelectPortrait = BRCastleWall

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    WallBoundsMesh = P01
    RampMesh1 = Ramp01
    DefaultModelConditionState
      Model = RBCastGateRT
    End

	IdleAnimationState
		Animation
			AnimationName     = RBCastGateRT.RBCastGateRT
			AnimationMode     = MANUAL
			AnimationBlendTime = 0
        End
        Flags = START_FRAME_LAST
	End    

    ;------------Build Up States
    ModelConditionState   = BASE_BUILD
      Model               = RBCastGateRT
;      ParticleSysBone	  = NONE BuildingDoughnutCloud
      ParticleSysBone     = NONE BuildingContructDust
    End  
	AnimationState		  = BASE_BUILD
		Animation
			AnimationName = RBCastGateRT.RBCastGateRT
			AnimationMode = ONCE
			AnimationSpeedFactorRange = 2.0 2.5 ; keep range wide to avoid lockstep anims
		End
	End

	AnimationState		  = JUST_BUILT
		Animation
			AnimationName = RBCastGateRT.RBCastGateRT
			AnimationMode = MANUAL
			AnimationBlendTime = 0
		End
        Flags = START_FRAME_FIRST
	End    
	
    ModelConditionState  = DAMAGED
      Model         = RBCastGateRT_D1  
    End
    
    AnimationState = DAMAGED
	EnteringStateFX	= FX_BuildingDamaged
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = RBCastGateRT_D2
    End
	AnimationState = REALLYDAMAGED
       	Animation				=	ReallyDamagedanimation
			AnimationName		=	 RBCastGateRT_D2.RBCastGateRT_D2
			AnimationMode		=	ONCE
   		End
	EnteringStateFX	= FX_BuildingReallyDamaged	
    End

    ModelConditionState  = RUBBLE
      Model         = RBCastGateRT_D3
    End
    
    AnimationState = RUBBLE
		Animation				=	Death
			AnimationName		=	RBCastGateRT_D3.RBCastGateRT_D3
			AnimationMode		=	ONCE
		End
		EnteringStateFX = FX_WallDie
;        EnteringStateFX = FX_RohanWallRubble
    End      

    ModelConditionState  = POST_RUBBLE
		Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
    End

  End


  ; *** AUDIO Parameters ***

	SoundOnDamaged		= BuildingLightDamageWood
	SoundOnReallyDamaged	= BuildingHeavyDamageWood


  ; ***DESIGN parameters ***

  DisplayName      = OBJECT:RohanCastleGate
  Side = Rohan
  EditorSorting = STRUCTURE
; Browser = CINEMATICS UNIT

  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160

  ArmorSet
    Conditions        = None
    Armor             = RohanCastleWall
    DamageFX          = RohanWallDamageFX
  End
  
  CommandSet = EmptyCommandSet

  ; *** ENGINEERING Parameters ***  
  KindOf                = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL MADE_OF_WOOD SELECTABLE NOT_AUTOACQUIRABLE
  RadarPriority = NOT_ON_RADAR

  Body                = StructureBody ModuleTag_03
    MaxHealth         = ROHAN_CASTLE_WALL_HEALTH
  End

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
;  Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
;      DestructionDelay  = 5000
;  End

  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= WallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End
  
    Behavior = KeepObjectDie ModuleTag_IWantRubble
    End
    
    
    Behavior = CastleMemberBehavior ModuleTag_CMB
		CountsForEvaCastleBreached = No  
    End   
  
  Geometry              = BOX
  GeometryMajorRadius   = 29.0
  GeometryMinorRadius   = 27.0
  GeometryHeight        = 79.0
  GeometryOffset		= X:6 Y:-73 Z:0
  
  AdditionalGeometry    = BOX
  GeometryMajorRadius   = 29.0
  GeometryMinorRadius   = 20.0
  GeometryHeight        = -30.0
  GeometryOffset		= X:6 Y:-29 Z:55

  GeometryFrontAngle    = -90.0    
  GeometryIsSmall       = No
  ;GeometryRotationAnchorOffset = X:1037.871 Y:0
  Shadow                = SHADOW_VOLUME
  
  AttackContactPoint	= X:6 Y:-73 Z:76
  AttackContactPoint	= X:6 Y:-73 Z:0
End


;------------------------------------------------------------------------------


Object RohanCastleGateL

SelectPortrait = BRCastleWall

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    WallBoundsMesh = P01
    DefaultModelConditionState
      Model = RBCastGateL
    End

	IdleAnimationState
		Animation
			AnimationName     = RBCastGateL.RBCastGateL
			AnimationMode     = MANUAL
			AnimationBlendTime = 0
        End
        Flags = START_FRAME_LAST
	End    

    ;------------Build Up States
    ModelConditionState   = BASE_BUILD
      Model               = RBCastGateL
;      ParticleSysBone	  = NONE BuildingDoughnutCloud
      ParticleSysBone     = NONE BuildingContructDust
    End  
	AnimationState		  = BASE_BUILD
		Animation
			AnimationName = RBCastGateL.RBCastGateL
			AnimationMode = ONCE
			AnimationSpeedFactorRange = 2.0 2.5 ; keep range wide to avoid lockstep anims
		End
	End

	AnimationState		  = JUST_BUILT
		Animation
			AnimationName = RBCastGateL.RBCastGateL
			AnimationMode = MANUAL
			AnimationBlendTime = 0
		End
        Flags = START_FRAME_FIRST
	End    
	
    ModelConditionState  = DAMAGED
      Model         = RBCastGateL_D1  
    End
    
    AnimationState = DAMAGED
	EnteringStateFX	= FX_BuildingDamaged
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = RBCastGateL_D2
    End
	AnimationState = REALLYDAMAGED
       	Animation				=	ReallyDamagedanimation
			AnimationName		=	 RBCastGateL_D2.RBCastGateL_D2
			AnimationMode		=	ONCE
   		End
	EnteringStateFX	= FX_BuildingReallyDamaged	
    End

    ModelConditionState  = RUBBLE
      Model         = RBCastGateL_D3
    End
    
    AnimationState = RUBBLE
		Animation				=	Death
			AnimationName		=	RBCastGateL_D3.RBCastGateL_D3
			AnimationMode		=	ONCE
		End
		EnteringStateFX = FX_WallDie
;        EnteringStateFX = FX_RohanWallRubble
    End      

    ModelConditionState  = POST_RUBBLE
		Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
    End

  End


  ; *** AUDIO Parameters ***

	SoundOnDamaged		= BuildingLightDamageWood
	SoundOnReallyDamaged	= BuildingHeavyDamageWood


  ; ***DESIGN parameters ***

  DisplayName      = OBJECT:RohanCastleGate
  Side = Rohan
  EditorSorting = STRUCTURE
; Browser = CINEMATICS UNIT

  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160

  ArmorSet
    Conditions        = None
    Armor             = RohanCastleWall
    DamageFX          = RohanWallDamageFX
  End
  
  CommandSet = EmptyCommandSet

  ; *** ENGINEERING Parameters ***  
	KindOf                = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL MADE_OF_WOOD SELECTABLE NOT_AUTOACQUIRABLE
	RadarPriority = NOT_ON_RADAR
	BuildTime = CASTLE_WALL_REBUILD_TIME
	BuildCost = CASTLE_WALL_REBUILD_COST
	KeepSelectableWhenDead	= Yes
	CommandSet				= GenericSelfRepairCommandSet

  Body                = StructureBody ModuleTag_03
    MaxHealth         = ROHAN_CASTLE_WALL_HEALTH
  End

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
;  Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
;      DestructionDelay  = 5000
;  End
    Behavior = KeepObjectDie ModuleTag_IWantRubble
    End
 
  	Behavior = GettingBuiltBehavior ModuleTag_GettingBuilt
		SelfBuildingLoop = BuildingConstructionLoop ; Only played if we DON'T spawn a worker
		SelfRepairFromDamageLoop  = NoSound         ; This doesn't cause an animation, so don't bother playing a sound
		SelfRepairFromRubbleLoop  = BuildingConstructionLoop
		SpawnTimer = -1.0 ; Negative means no 'autoheal'
		RebuildTimeSeconds = CASTLE_WALL_REBUILD_TIME
	End
 
  Behavior = SiegeDockingBehavior ModuleTag_SiegeDocking
  End

  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= WallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End

  Behavior = CastleMemberBehavior ModuleTag_CMB
		CountsForEvaCastleBreached = Yes
  End 

  Geometry              = BOX
  GeometryMajorRadius   = 61.0
  GeometryMinorRadius   = 44.0
  GeometryHeight        = 56.0
  GeometryOffset		= X:-40.0 Y:-7.0 Z:0
  
  GeometryIsSmall       = No
  ;GeometryRotationAnchorOffset = X:1037.871 Y:0
  Shadow                = SHADOW_VOLUME
  
  AttackContactPoint	= X:-95 Y:8 Z:28
  AttackContactPoint	= X:-5 Y:8 Z:28
  AttackContactPoint	= X:-5 Y:-46 Z:28
End

;------------------------------------------------------------------------------


Object RohanCastleGateLTower


SelectPortrait = BRCastleWall
  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    WallBoundsMesh = P02
    RampMesh1 = Ramp01
    DefaultModelConditionState
      Model = RBCastGateLT
    End

	IdleAnimationState
		Animation
			AnimationName     = RBCastGateLT.RBCastGateLT
			AnimationMode     = MANUAL
			AnimationBlendTime = 0
        End
        Flags = START_FRAME_LAST
	End    

    ;------------Build Up States
    ModelConditionState   = BASE_BUILD
      Model               = RBCastGateLT
;      ParticleSysBone	  = NONE BuildingDoughnutCloud
      ParticleSysBone     = NONE BuildingContructDust
    End  
	AnimationState		  = BASE_BUILD
		Animation
			AnimationName = RBCastGateLT.RBCastGateLT
			AnimationMode = ONCE
			AnimationSpeedFactorRange = 2.0 2.5 ; keep range wide to avoid lockstep anims
		End
	End

	AnimationState		  = JUST_BUILT
		Animation
			AnimationName = RBCastGateLT.RBCastGateLT
			AnimationMode = MANUAL
			AnimationBlendTime = 0
		End
        Flags = START_FRAME_FIRST
	End    
	
    ModelConditionState  = DAMAGED
      Model         = RBCastGateLT_D1  
    End
    
    AnimationState = DAMAGED
	EnteringStateFX	= FX_BuildingDamaged
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = RBCastGateLT_D2
    End
	AnimationState = REALLYDAMAGED
       	Animation				=	ReallyDamagedanimation
			AnimationName		=	RBCastGateLT_D2.RBCastGateLT_D2
			AnimationMode		=	ONCE
   		End
	EnteringStateFX	= FX_BuildingReallyDamaged
    End

    ModelConditionState  = RUBBLE
      Model         = RBCastGateLT_D3
    End
    
    AnimationState = RUBBLE
		Animation				=	Death
			AnimationName		=	RBCastGateLT_D3.RBCastGateLT_D3
			AnimationMode		=	ONCE
		End
		EnteringStateFX = FX_WallDie
;        EnteringStateFX = FX_RohanWallRubble
    End      

    ModelConditionState  = POST_RUBBLE
		Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
    End

  End


  ; *** AUDIO Parameters ***

	SoundOnDamaged		= BuildingLightDamageWood
	SoundOnReallyDamaged	= BuildingHeavyDamageWood


  ; ***DESIGN parameters ***

  DisplayName      = OBJECT:RohanCastleGate
  Side = Rohan
  EditorSorting = STRUCTURE
; Browser = CINEMATICS UNIT

  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160

  ArmorSet
    Conditions        = None
    Armor             = RohanCastleWall
    DamageFX          = RohanWallDamageFX
  End
  
  CommandSet = EmptyCommandSet

  ; *** ENGINEERING Parameters ***  
  KindOf                = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL MADE_OF_WOOD SELECTABLE NOT_AUTOACQUIRABLE
  RadarPriority = NOT_ON_RADAR

  Body                = StructureBody ModuleTag_03
    MaxHealth         = ROHAN_CASTLE_WALL_HEALTH
  End

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
;  Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
;      DestructionDelay  = 5000
;  End

  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= WallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End

    Behavior = KeepObjectDie ModuleTag_IWantRubble
    End  

    Behavior = CastleMemberBehavior ModuleTag_CMB
		CountsForEvaCastleBreached = No   ; Towers don't actually give access to interior of castle
    End 
  

  Geometry              = BOX
  GeometryMajorRadius   = 29.0
  GeometryMinorRadius   = 27.0
  GeometryHeight        = 79.0
  GeometryOffset		= X:-5 Y:-73 Z:0
  
  AdditionalGeometry    = BOX
  GeometryMajorRadius   = 29.0
  GeometryMinorRadius   = 20.0
  GeometryHeight        = -30.0
  GeometryOffset		= X:-5 Y:-29 Z:55

  GeometryIsSmall       = No
  ;GeometryRotationAnchorOffset = X:1037.871 Y:0
  Shadow                = SHADOW_VOLUME
  
  AttackContactPoint	= X:-5 Y:-73 Z:76
  AttackContactPoint	= X:-5 Y:-73 Z:0
End

;------------------------------------------------------------------------------

;Rohan Buildable Wall Foundation -- the area where faction rohan walls can be built on
Object RohanWallFoundation
 
  ; *** ART Parameters ***

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    
    DefaultModelConditionState
      Model = GBFoundationL
    End
    
	ModelConditionState = WORLD_BUILDER
  	  Model = RBWalls
	End
  End
  
  ;PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:RohanWallFoundation
  Side                = Rohan
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160

  CommandSet = RohanWallFoundationCommandSet


  ; *** AUDIO Parameters ***

  VoiceSelect	= Gui_PlotSelect


  ; *** ENGINEERING Parameters ***

  RadarPriority       = STRUCTURE
  KindOf              = STRUCTURE SELECTABLE IMMOBILE BASE_FOUNDATION UNATTACKABLE MP_COUNT_FOR_VICTORY NO_COLLIDE DO_NOT_CLASSIFY
 
  Behavior            = FoundationAIUpdate ModuleTag_foundationAI
  End

  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  Body                = StructureBody ModuleTag_05
    MaxHealth         = 15000.0
  End
 
  Geometry              = BOX
  GeometryMajorRadius   = 24.0
  GeometryMinorRadius   = 16.0
  GeometryHeight        = 0.8
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  BuildCompletion		= PLACED_BY_PLAYER
End

;------------------------------------------------------------------------------

;Rohan Golden Hall
Object RohanGoldenHall
 
	SelectPortrait = BPRGoldenHall
 
  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
	StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD     
    DefaultModelConditionState
      Model = RBGoldHall
;      ParticleSysBone   = glowbone01 TorchSmokeBlack
;      ParticleSysBone   = glowbone01 TorchGlow
;      ParticleSysBone   = glowbone02 TorchSmokeBlack
;      ParticleSysBone   = glowbone02 TorchGlow
    End
    
    ;------------ Build Up States -------
    ModelConditionState   = AWAITING_CONSTRUCTION 
      Model               = RBGoldHall_A
;		ParticleSysBone	  = NONE BuildingDoughnutCloud
    End;
    AnimationState        = AWAITING_CONSTRUCTION
      Animation           =  RBGoldHall_A
        AnimationName     =  RBGoldHall_ASKL.RBGoldHall_ABLD
        AnimationMode     = MANUAL
        AnimationBlendTime = 0
      End
	  Flags				  = START_FRAME_FIRST
    End

    ModelConditionState   = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
      Model               = RBGoldHall_A
		ParticleSysBone   = CONSTDUSTBONE01 BuildingContructDust FollowBone:Yes
    End;
    AnimationState        = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
		Animation           = RBGoldHall_A
			AnimationName     = RBGoldHall_ASKL.RBGoldHall_ABLD
			AnimationMode     = MANUAL
			AnimationBlendTime = 0
		End
		Flags				  = START_FRAME_FIRST
		StateName			  = BeingConstructed
		BeginScript
			CurDrawablePlaySound("GondorBarracksBeginConstruction")
		EndScript
    End
    
    
    
     ;--damaged building
      ModelConditionState  = DESTROYED_FRONT
      Model         = RBGoldHall_D2
		ParticleSysBone FireSmall01 FireBuildingLarge
		ParticleSysBone FireSmall02 FireBuildingLarge
		ParticleSysBone FireSmall03 FireBuildingLarge
		ParticleSysBone FireSmall04 FireBuildingLarge
		ParticleSysBone FireSmall05 FireBuildingLarge
		ParticleSysBone FireSmall01 SmokeBuildingLarge
		ParticleSysBone FireSmall02 SmokeBuildingLarge
		ParticleSysBone FireSmall03 SmokeBuildingLarge
		ParticleSysBone FireSmall04 SmokeBuildingLarge
		ParticleSysBone FireSmall05 SmokeBuildingLarge
    End

    AnimationState = DESTROYED_FRONT
      BeginScript
        CurDrawableHideSubObject("RBGoldHall_01")
      EndScript
    End
    
        ModelConditionState  = DESTROYED_RIGHT
      Model         = RBGoldHall_D2
		ParticleSysBone FireSmall01 FireBuildingLarge
		ParticleSysBone FireSmall02 FireBuildingLarge
		ParticleSysBone FireSmall03 FireBuildingLarge
		ParticleSysBone FireSmall04 FireBuildingLarge
		ParticleSysBone FireSmall05 FireBuildingLarge
		ParticleSysBone FireSmall01 SmokeBuildingLarge
		ParticleSysBone FireSmall02 SmokeBuildingLarge
		ParticleSysBone FireSmall03 SmokeBuildingLarge
		ParticleSysBone FireSmall04 SmokeBuildingLarge
		ParticleSysBone FireSmall05 SmokeBuildingLarge
    End

    AnimationState = DESTROYED_RIGHT
      BeginScript
        CurDrawableHideSubObject("RBGoldHall_02")
      EndScript
    End
    

    ModelConditionState  = DESTROYED_BACK
      Model         = RBGoldHall_D2
		ParticleSysBone FireSmall01 FireBuildingLarge
		ParticleSysBone FireSmall02 FireBuildingLarge
		ParticleSysBone FireSmall03 FireBuildingLarge
		ParticleSysBone FireSmall04 FireBuildingLarge
		ParticleSysBone FireSmall05 FireBuildingLarge
		ParticleSysBone FireSmall01 SmokeBuildingLarge
		ParticleSysBone FireSmall02 SmokeBuildingLarge
		ParticleSysBone FireSmall03 SmokeBuildingLarge
		ParticleSysBone FireSmall04 SmokeBuildingLarge
		ParticleSysBone FireSmall05 SmokeBuildingLarge
    End

    AnimationState = DESTROYED_BACK
      BeginScript
        CurDrawableHideSubObject("RBGoldHall_03")
      EndScript
    End

	ModelConditionState  = DESTROYED_LEFT
      Model         = RBGoldHall_D2
		ParticleSysBone FireSmall01 FireBuildingLarge
		ParticleSysBone FireSmall02 FireBuildingLarge
		ParticleSysBone FireSmall03 FireBuildingLarge
		ParticleSysBone FireSmall04 FireBuildingLarge
		ParticleSysBone FireSmall05 FireBuildingLarge
		ParticleSysBone FireSmall01 SmokeBuildingLarge
		ParticleSysBone FireSmall02 SmokeBuildingLarge
		ParticleSysBone FireSmall03 SmokeBuildingLarge
		ParticleSysBone FireSmall04 SmokeBuildingLarge
		ParticleSysBone FireSmall05 SmokeBuildingLarge
    End
    
    AnimationState = DESTROYED_LEFT
      BeginScript
        CurDrawableHideSubObject("RBGoldHall_04")
      EndScript
    End
    
    
    ModelConditionState  = DAMAGED
      Model         = RBGoldHall_D1
		ParticleSysBone FireSmall01 FireBuildingLarge
		ParticleSysBone FireSmall02 FireBuildingMedium
		ParticleSysBone FireSmall03 FireBuildingMedium
		ParticleSysBone FireSmall04 FireBuildingMedium
		ParticleSysBone FireSmall05 SmokeBuildingLarge
    End
    AnimationState = DAMAGED
		EnteringStateFX	= FX_BuildingDamaged
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = RBGoldHall_D2
		ParticleSysBone FireSmall01 FireBuildingLarge
		ParticleSysBone FireSmall02 FireBuildingLarge
		ParticleSysBone FireSmall03 FireBuildingLarge
		ParticleSysBone FireSmall04 FireBuildingLarge
		ParticleSysBone FireSmall05 FireBuildingLarge
		ParticleSysBone FireSmall01 SmokeBuildingLarge
		ParticleSysBone FireSmall02 SmokeBuildingLarge
		ParticleSysBone FireSmall03 SmokeBuildingLarge
		ParticleSysBone FireSmall04 SmokeBuildingLarge
		ParticleSysBone FireSmall05 SmokeBuildingLarge
    End
    AnimationState = REALLYDAMAGED
		EnteringStateFX	= FX_BuildingReallyDamaged
    End

    ModelConditionState  = RUBBLE
      Model         = RBGoldHall_D2
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End
    
    AnimationState = RUBBLE
      BeginScript
        CurDrawableHideSubObject("RBGoldHall_01")
        CurDrawableHideSubObject("RBGoldHall_02")
        CurDrawableHideSubObject("RBGoldHall_03")
        CurDrawableHideSubObject("RBGoldHall_04")
      EndScript
	EnteringStateFX = FX_WallDie
    End

    ModelConditionState  = POST_RUBBLE
      Model         = None
		ParticleSysBone NONE SmokeBuildingMediumRubble
    End

    ModelConditionState  = POST_COLLAPSE
      Model         = None
		ParticleSysBone NONE SmokeBuildingMediumRubble
    End  
  End
  
  PlacementViewAngle  = 90
 
	; ***DESIGN parameters ***
	DisplayName         = OBJECT:RohanGoldenHall
	Side                = Rohan
	EditorSorting       = STRUCTURE
	ThreatLevel = 1.0
	 
	BuildCost           = 2500
	BuildTime           = 60.0           ; in seconds
	VisionRange         = 160.0          ; Shroud clearing distance
	ShroudClearingRange = 160
	ArmorSet
		Conditions        = None
		Armor             = CitadelArmor
	End

	CommandSet			= GoldenHallCommandSet


; *** AUDIO Parameters ***

	SoundOnDamaged			= BuildingLightDamageWood
	SoundOnReallyDamaged		= BuildingHeavyDamageWood

	VoiceSelect				= RohanCitadelSelect
	VoiceSelectUnderConstruction	= BuildingGoodVoiceSelectUnderConstruction

	UnitSpecificSounds
		UnderConstruction		= BuildingConstructionLoop  ; Built first time
		; UnderRepairFromDamage	= NoSound					; Repaired No animation on the building, so don't bother playing sound
		UnderRepairFromRubble	= BuildingConstructionLoop	; Repaired from completely destroyed (not used???)
	End
 

  ; *** ENGINEERING Parameters ***

  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE NEED_BASE_FOUNDATION MP_COUNT_FOR_VICTORY FS_FACTORY AUTO_RALLYPOINT MADE_OF_WOOD
 
  Behavior            = GettingBuiltBehavior GetBuiltBehaviorTag
    WorkerName		  = RohanWorkerNoSelect
    RebuildTimeSeconds = CASTLE_WALL_REBUILD_TIME
  End

  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  Body                      = StructureBody ModuleTag_05
    MaxHealth               = ROHAN_CENTRAL_GOLDENHALL_HEALTH
    
	DamageCreationList = OCL_BuildingDamageList01 CATAPULT_ROCK
    
    DamageCreationList = OCL_RBGoldHall_Chunk1 CATAPULT_ROCK FRONT_DESTROYED
    DamageCreationList = OCL_RBGoldHall_Chunk2 CATAPULT_ROCK RIGHT_DESTROYED
    DamageCreationList = OCL_RBGoldHall_Chunk3 CATAPULT_ROCK BACK_DESTROYED
    DamageCreationList = OCL_RBGoldHall_Chunk4 CATAPULT_ROCK LEFT_DESTROYED
  End
 
	; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
	; never truly destroyed, even when reduced to zero health. Also note that garrisonable
	; buildings automatically stick around because GarrisonContain has it's own DieModule
	  
	Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
		DestructionDelay  = 5000
	End

	Behavior                  = StructureCollapseUpdate ModuleTag_06
		MinCollapseDelay        = 000
		MaxCollapseDelay        = 000
		CollapseDamping         = .5
		MaxShudder              = 0.6
		MinBurstDelay           = 250
		MaxBurstDelay           = 800
		BigBurstFrequency       = 4
		FXList                  = INITIAL   FX_StructureMediumCollapse

	End

  	;-----------------------------------------------
	;Used for hero revival and initial construction     
	Behavior = ProductionUpdate ProductionUpdateModuleTag
		; nothing, but is required if we have any Object-level Upgrades!
	End
	Behavior = QueueProductionExitUpdate ModuleTag_QueuePEU
		UnitCreatePoint   = X:0.0 Y:-20.0 Z:0.0
		NaturalRallyPoint = X:28.8 Y:-80.0 Z:0.0;NaturalRallyPointX must always match GeometryMajorRadius! 
		ExitDelay = 300 ;Handles delays between units if multiple produced at a time. 
	End  
	;-----------------------------------------------
  
  
;	Behavior            = HordeGarrisonContain ModuleTag_hordeGarrison
;		ObjectStatusOfContained	= UNSELECTABLE CAN_ATTACK
;		ContainMax              = 6
;		MaxHordeCapacity        = 6
;		DamagePercentToUnits    = 100%
;		PassengerFilter			= ANY +INFANTRY +HORDE +CAVALRY +HERO
;		AllowEnemiesInside      = No
;		AllowNeutralInside      = Yes
;		NumberOfExitPaths       = 1 ; Defaults to 1.  Set 0 to not use ExitStart/ExitEnd, set higher than 1 to use ExitStart01-nn/ExitEnd01-nn
;		PassengerBonePrefix     = PassengerBone:ARROWBONE KindOf:INFANTRY
;		
;		;ModifierToGiveOnExit    = GoldenHallLastChargeInvulnerability
;		
;		
;		;PassengersTestCollisionHeight = 80
;		;Slots                         = 1
;		;EnterSound                     = GarrisonEnter
;		;ExitSound                      = GarrisonExit
;		;ExitDelay               = 250
;		;GoAggressiveOnExit      = Yes ; AI Will tell people to set their mood to Aggressive on exiting
;		;ForceOrientationContainer = No  ; otherwise contained units can't orient themselves towards their targets...
;	End 
  

;  Behavior           = CreateObjectDie ModuleTag_08
;    CreationList     = OCL_SmallStructureDebris
;  End
 
;  Behavior = ProductionUpdate ModuleTag_10
;    ; nothing, but is required if we have any Object-level Upgrades!
;  End
 
;  Behavior = FlammableUpdate ModuleTag_14
;    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
;    AflameDamageAmount = 5       ; taking this much damage...
;    AflameDamageDelay = 500       ; this often.
;  End
 
;  Behavior = TransitionDamageFX ModuleTag_15
;    ;-------------DESIGNED FOR SMALL SIZED FACTION BUILDING TRANSITIONS-------------------
;    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
;    ;---------------------------------------------------------------------------------------
;    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
;    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
;    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
;  End
 
;  Behavior             = FXListDie ModuleTag_16
;    DeathFX       = FX_BuildingDie
;  End

  Behavior                  = BuildingBehavior BuildingModuleTag
    NightWindowName         = WINDOW_N01
  ;  FireWindowName          = WINDOW_F01
  ;  GlowWindowName			= WINDOW_G01
  ;  FireName				= FIRE01
  End
   
	Geometry				= BOX
	GeometryMajorRadius		= 27 
	GeometryMinorRadius		= 45 
	GeometryHeight			= 47 
	GeometryOffset			= X:0 Y:0 Z:0
  
	AdditionalGeometry		= BOX
	GeometryMajorRadius		= 60.0
	GeometryMinorRadius		= 20.0
	GeometryHeight			= 30
	
	AdditionalGeometry		= BOX
	GeometryMajorRadius		= 16.0
	GeometryMinorRadius		= 16.0
	GeometryHeight			= 100
	
	AdditionalGeometry		= BOX
	GeometryMajorRadius		= 7.0
	GeometryMinorRadius		= 7.0
	GeometryHeight			= 155
	
	GeometryIsSmall			= No
	Shadow					= SHADOW_VOLUME
	BuildCompletion			= PLACED_BY_PLAYER
	
	GeometryContactPoint	= X:-48.78		Y:31.646	Z:0			Repair
	GeometryContactPoint	= X:46.105		Y:-24.325	Z:0			Repair
	GeometryContactPoint	= X:34.019		Y:45.92		Z:0
	GeometryContactPoint	= X:-40.263		Y:-38.858	Z:0
	GeometryContactPoint	= X:-1.232		Y:-0.6		Z:153.736	Swoop

End

;------------------------------------------------------------------------------
;Rohan Armory
Object RohanArmory

	SelectPortrait = BPRArmory
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day
  
  Draw = W3DScriptedModelDraw ModuleTag_Draw
  
	ExtraPublicBone = ARROW_01
	ExtraPublicBone = ARROW_02
	ExtraPublicBone = ARROW_03
	ExtraPublicBone = ARROW_04
	ExtraPublicBone = ARROW_05
	ExtraPublicBone = ARROW_06
	ExtraPublicBone = ARROW_07
	ExtraPublicBone = ARROW_08
	ExtraPublicBone = ARROW_09
	ExtraPublicBone = ARROW_10
	ExtraPublicBone = ARROW_11
	ExtraPublicBone = ARROW_12
  
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
	StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD     
	DefaultModelConditionState
		Model = RBArmory_SKN
		WeaponLaunchBone =   PRIMARY ARROW_
    End
    
    	IdleAnimationState
			StateName				=   STATE_Idle
			Animation = IdleA
				AnimationName		=	RBArmory_SKL.RBArmory_IDLA
				AnimationMode		=	ONCE 
				AnimationPriority		=	30
			End				

			Animation = IdleB
				AnimationName		=	RBArmory_SKL.RBArmory_IDLB
				AnimationMode		=	ONCE 
				AnimationPriority		=	25
			End
			;	FXEvent				= Frame:1  Name:FX_AmorySparks
			Flags                   = RESTART_ANIM_WHEN_COMPLETE 

			;BeginScript
			;	Prev = CurDrawablePrevAnimationState()
			;	if Prev == "BeingConstructed" then
				    ; Don't play completed sound when canceling build-in-progress or when
				    ; destroyed halfway
			;	    if not CurDrawableModelcondition( "DYING" ) then 
			;			CurDrawablePlaySound("CampSoldierCompleteGeneric")
			;		end
			;	end
			;EndScript
		End  
		
	;------------ Build Up States -------
    ModelConditionState   = AWAITING_CONSTRUCTION 
      Model               = RBArmory_A
;		ParticleSysBone	  = NONE BuildingDoughnutCloud
    End;
    AnimationState        = AWAITING_CONSTRUCTION
      Animation           =  RBArmory_A
        AnimationName     =  RBArmory_ASKL.RBArmory_ABLD
        AnimationMode     = MANUAL
        AnimationBlendTime = 0
      End
	  Flags				  = START_FRAME_FIRST
    End

    ModelConditionState   = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
      Model               = RBArmory_A
		ParticleSysBone   = CONSTDUSTBONE01 BuildingContructDust FollowBone:Yes
    End;
    AnimationState        = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
		Animation           = RBArmory_A
			AnimationName     = RBArmory_ASKL.RBArmory_ABLD
			AnimationMode     = MANUAL
			AnimationBlendTime = 0
		End
		Flags				  = START_FRAME_FIRST
		StateName			  = BeingConstructed
		BeginScript
			CurDrawablePlaySound("GondorBarracksBeginConstruction")
		EndScript
    End  
    
    ;--damaged building
      ModelConditionState  = DESTROYED_FRONT
      Model         = RBArmory_D2
		ParticleSysBone FireSmall01 FireBuildingLarge
		ParticleSysBone FireSmall02 FireBuildingLarge
		ParticleSysBone FireSmall03 FireBuildingLarge
		ParticleSysBone FireSmall04 FireBuildingMedium
		ParticleSysBone FireSmall05 SmokeBuildingLarge
    End

    AnimationState = DESTROYED_FRONT
      BeginScript
        CurDrawableHideSubObject("1")
      EndScript
    End
    
        ModelConditionState  = DESTROYED_RIGHT
      Model         = RBArmory_D2
		ParticleSysBone FireSmall01 FireBuildingLarge
		ParticleSysBone FireSmall02 FireBuildingLarge
		ParticleSysBone FireSmall03 FireBuildingLarge
		ParticleSysBone FireSmall04 FireBuildingMedium
		ParticleSysBone FireSmall05 SmokeBuildingLarge
    End

    AnimationState = DESTROYED_RIGHT
      BeginScript
        CurDrawableHideSubObject("2")
      EndScript
    End
    

    ModelConditionState  = DESTROYED_BACK
      Model         = RBArmory_D2
		ParticleSysBone FireSmall01 FireBuildingLarge
		ParticleSysBone FireSmall02 FireBuildingLarge
		ParticleSysBone FireSmall03 FireBuildingLarge
		ParticleSysBone FireSmall04 FireBuildingMedium
		ParticleSysBone FireSmall05 SmokeBuildingLarge
    End

    AnimationState = DESTROYED_BACK
      BeginScript
        CurDrawableHideSubObject("3")
      EndScript
    End

	ModelConditionState  = DESTROYED_LEFT
      Model         = RBArmory_D2
		ParticleSysBone FireSmall01 FireBuildingLarge
		ParticleSysBone FireSmall02 FireBuildingLarge
		ParticleSysBone FireSmall03 FireBuildingLarge
		ParticleSysBone FireSmall04 FireBuildingMedium
		ParticleSysBone FireSmall05 SmokeBuildingLarge
    End
    
    AnimationState = DESTROYED_LEFT
      BeginScript
        CurDrawableHideSubObject("4")
      EndScript
    End
    
    
    ModelConditionState  = DAMAGED
      Model         = RBArmory_D1
		ParticleSysBone FireSmall01 FireBuildingLarge
		ParticleSysBone FireSmall02 FireBuildingMedium
		ParticleSysBone FireSmall03 FireBuildingMedium
		ParticleSysBone FireSmall04 FireBuildingMedium
		ParticleSysBone FireSmall05 SmokeBuildingLarge
    End
    
    AnimationState = DAMAGED
	EnteringStateFX	= FX_BuildingDamaged
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = RBArmory_D2
		ParticleSysBone FireSmall01 FireBuildingLarge
		ParticleSysBone FireSmall02 FireBuildingLarge
		ParticleSysBone FireSmall03 FireBuildingLarge
		ParticleSysBone FireSmall04 FireBuildingMedium
		ParticleSysBone FireSmall05 SmokeBuildingLarge
	
    End
    AnimationState = REALLYDAMAGED
	EnteringStateFX	= FX_BuildingReallyDamaged
    End

    ModelConditionState  = RUBBLE
      Model         = RBArmory_D2
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End
    
    AnimationState = RUBBLE
      BeginScript
        CurDrawableHideSubObject("RBArmory_01")
        CurDrawableHideSubObject("RBArmory_02")
        CurDrawableHideSubObject("RBArmory_03")
        CurDrawableHideSubObject("RBArmory_04")
      EndScript
    End

    ModelConditionState  = POST_RUBBLE
      Model         = None
		ParticleSysBone NONE SmokeBuildingMediumRubble
    End
    AnimationState = POST_RUBBLE
    End

    ModelConditionState  = POST_COLLAPSE
      Model         = None
		ParticleSysBone NONE SmokeBuildingMediumRubble
    End  
    AnimationState = POST_COLLAPSE
    End
  End

  Draw = W3DFloorDraw ModuleTag_DrawFloor    
		StaticModelLODMode = Yes		; THIS NEEDS TO BE COMMENTED OUT WHEN ENGINEERING ENABLES LOD'S IN THE FLOOR DRAW 
     ModelName = RBArmory_Bib
  End
  

	; ***DESIGN parameters ***
	DisplayName         = OBJECT:RohanArmory
	Description         = OBJECT:RohanArmoryDescription
	Side                = Rohan
	EditorSorting       = STRUCTURE
	ThreatLevel = 1.0
	CommandSet =  RohanArmoryCommandSet
	
	PlacementViewAngle  = 0
		 
	BuildCost           = ROHAN_ARMORY_BUILDCOST				
	BuildTime           = ROHAN_ARMORY_BUILDTIME				; in seconds
	VisionRange         = ROHAN_ARMORY_VISIONRANGE			; Shroud clearing distance
	ShroudClearingRange = ROHAN_ARMORY_SHROUDCLEAR			
	BountyValue         = ROHAN_ARMORY_BOUNTY_VALUE

	ArmorSet
		Conditions        = None
		Armor             = StructureArmor
		;DamageFX          = StructureDamageFXNoShake
	End

	WeaponSet
		Conditions			= None
	End

;	WeaponSet
;		Weapon				= PRIMARY RohanStructureBow
;		Conditions			= PLAYER_UPGRADE
;		AutoChooseSources	= PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
;	End


	; *** AUDIO Parameters ***

	SoundOnDamaged		= BuildingLightDamageWood		;BuildingDamagedStateLight
	SoundOnReallyDamaged	= BuildingHeavyDamageWood		;BuildingDestroy

	VoiceSelect		= RohanArmorySelect

	VoiceSelectUnderConstruction	= BuildingGoodVoiceSelectUnderConstruction

	UnitSpecificSounds
		UnderConstruction		= BuildingConstructionLoop  ; Built first time
		; UnderRepairFromDamage	= NoSound					; Repaired No animation on the building, so don't bother playing sound
		UnderRepairFromRubble	= BuildingConstructionLoop	; Repaired from completely destroyed (not used???)
	End


	; *** ENGINEERING Parameters ***

	RadarPriority       = STRUCTURE
	KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE NEED_BASE_FOUNDATION MP_COUNT_FOR_VICTORY FS_FACTORY ATTACK_NEEDS_LINE_OF_SIGHT CAN_ATTACK MADE_OF_WOOD ; AUTO_RALLYPOINT ;
	
	Behavior            = GettingBuiltBehavior GetBuiltBehaviorTag
		WorkerName		  = RohanWorkerNoSelect
	End

	Behavior = CastleMemberBehavior ModuleTag_CMB
	End 

	Behavior = AIUpdateInterface ModuleTag_SoWeCanUseWeapon
		AutoAcquireEnemiesWhenIdle	= Yes
		MoodAttackCheckRate			= 250
	End

	Body                      = StructureBody ModuleTag_05
		MaxHealth               = ROHAN_ARMORY_MAXHEALTH				
		MaxHealthDamaged        = ROHAN_ARMORY_MAXHEALTHDAMAGED			
		MaxHealthReallyDamaged  = ROHAN_ARMORY_MAXHEALTH_REALLYDAMAGED		
	    
		DamageCreationList = OCL_BuildingDamageList01 CATAPULT_ROCK
	    
		DamageCreationList = OCL_RBArmory_Chunk1 CATAPULT_ROCK FRONT_DESTROYED
		DamageCreationList = OCL_RBArmory_Chunk2 CATAPULT_ROCK RIGHT_DESTROYED
		DamageCreationList = OCL_RBArmory_Chunk3 CATAPULT_ROCK BACK_DESTROYED
		DamageCreationList = OCL_RBArmory_Chunk4 CATAPULT_ROCK LEFT_DESTROYED
	End
  
  
  	Behavior = SubObjectsUpgrade ModuleTag_HideAll
		TriggeredBy		= Upgrade_StructureLevel1
		ShowSubObjects	= V1HIDE V1AHIDE
		HideSubObjects	= V1 V1A V2 V2A
	End
	Behavior = GeometryUpgrade Geom_ModuleTag_HideAll
		TriggeredBy		= Upgrade_StructureLevel1
		ShowGeometry	= Geom_Orig
		HideGeometry	= Geom_V1
	End
	
 	Behavior = SubObjectsUpgrade ModuleTag_ShowWalls 
		TriggeredBy		= Upgrade_StructureLevel2
		ShowSubObjects	= V1 V1A 
		HideSubObjects	= V1HIDE V1AHIDE V2 V2A
	End
	Behavior = GeometryUpgrade Geom_ModuleTag_ShowWalls 
		TriggeredBy		= Upgrade_StructureLevel2
		ShowGeometry	= Geom_Orig Geom_V1
	End
	
	Behavior = SubObjectsUpgrade ModuleTag_ShowPillars 
		TriggeredBy		= Upgrade_StructureLevel3
		ShowSubObjects	= V2 V2A
		HideSubObjects	= V1HIDE V1AHIDE V1 V1A 
	End
  	Behavior = WeaponSetUpgrade ModuleTag_ThirdLevelBuildingArrows
		TriggeredBy		= Upgrade_StructureLevel3
		ConflictsWith	= Upgrade_EasyAIMultiPlayer
	End
  
  
	Behavior = ProductionUpdate ProductionUpdateModuleTag
	; nothing, but is required if we have any Object-level Upgrades!
	End
  
  	Behavior = QueueProductionExitUpdate ModuleTag_07
		UnitCreatePoint    = X:-42.0 Y:-31.0 Z:10.0
		NaturalRallyPoint  = X:42.5 Y:-31.0 Z:0.0
		ExitDelay = 750
	End
 
	Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
		DestructionDelay  = 4000
	End

	Behavior                  = StructureCollapseUpdate ModuleTag_06
		MinCollapseDelay        = 000
		MaxCollapseDelay        = 000
		CollapseDamping         = .5
		MaxShudder              = 0.6
		MinBurstDelay           = 250
		MaxBurstDelay           = 800
		BigBurstFrequency       = 4
		CollapseHeight			= 120
		FXList                  = INITIAL   FX_StructureMediumCollapse
	End

    Behavior                  = BuildingBehavior BuildingModuleTag
     NightWindowName         = WINDOW_N01
  ;  FireWindowName          = WINDOW_F01
  ;  GlowWindowName			= WINDOW_G01
;    FireName				= FIRE01
	End

  

;  Behavior = TransitionDamageFX ModuleTag_15
;    ;-------------DESIGNED FOR SMALL SIZED FACTION BUILDING TRANSITIONS-------------------
;    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
;    ;---------------------------------------------------------------------------------------
;    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
;    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
;    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
;  End
 
;	Behavior             = FXListDie ModuleTag_16
;		DeathFX       = FX_BuildingDie
;	End
 
	Geometry			  = BOX
	GeometryName		  = Geom_Orig
	GeometryMajorRadius   = 16.0
	GeometryMinorRadius   = 43.0
	GeometryHeight        = 46.0
	GeometryOffset		  = X:-41.5 Y:-3.5 Z:0	
	
	AdditionalGeometry    = BOX
	GeometryName		  = Geom_Orig	; Need to cover the base foundation, we can't be so L shaped that we let things interact with what we are covering.
	GeometryMajorRadius   = 25.0
	GeometryMinorRadius   = 25.0
	GeometryHeight        = 1.0
	GeometryOffset		  = X:0 Y:0 Z:0
	
	AdditionalGeometry    = BOX
	GeometryName		  = Geom_Orig
	GeometryMajorRadius   = 39.0
	GeometryMinorRadius   = 16.0
	GeometryHeight        = 46.0
	GeometryOffset		  = X:-18.5 Y:-30.5 Z:0
	
	AdditionalGeometry    = BOX
	GeometryName		  = Geom_V1
	GeometryActive		  = No
	GeometryMajorRadius   = 16.0
	GeometryMinorRadius   = 16.0
	GeometryHeight        = 97.0
	GeometryOffset		  = X:-41.5 Y:-30.5 Z:0
		
	GeometryIsSmall       = No
	Shadow                = SHADOW_VOLUME
	BuildCompletion     = PLACED_BY_PLAYER
	
;	AttackContactPoint = X:-41.5 Y:-30.5 Z:46
;	AttackContactPoint = X:-41.5 Y:-30.5 Z:24
;	AttackContactPoint = X:-41.5 Y:21.5 Z:24
;	AttackContactPoint = X:-41.5 Y:-30.5 Z:24
;	AttackContactPoint = X:-3.5 Y:-30.5 Z:24

	GeometryContactPoint	= X:-64.249		Y:29.796	Z:0			Repair
	GeometryContactPoint	= X:8.792		Y:-52.605	Z:0			Repair
	GeometryContactPoint	= X:-17.863		Y:23.491	Z:0
	GeometryContactPoint	= X:-55.373		Y:-56.524	Z:0
	GeometryContactPoint	= X:-41.324		Y:-31.028	Z:68.25		Swoop

End





;------------------------------------------------------------------------------


Object RohanCastleKeep

	SelectPortrait = BPRCamp
 
  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBGoldHall
;      ParticleSysBone   = glowbone01 TorchSmokeBlack
;      ParticleSysBone   = glowbone01 TorchGlow
;      ParticleSysBone   = glowbone02 TorchSmokeBlack
;      ParticleSysBone   = glowbone02 TorchGlow
    End

     ;--damaged building
      ModelConditionState  = DESTROYED_FRONT
      Model         = RBGoldHall_D
		ParticleSysBone FireSmall01 FireBuildingSmall
		ParticleSysBone FireSmall02 FireBuildingSmall
		ParticleSysBone FireSmall03 FireBuildingSmall
		ParticleSysBone FireSmall04 FireBuildingSmall
		ParticleSysBone FireMedium01 FireBuildingMedium
		ParticleSysBone FireMedium02 FireBuildingMedium
     	ParticleSysBone FireLarge01 FireBuildingLarge
     	ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End

    AnimationState = DESTROYED_FRONT
      BeginScript
        CurDrawableHideSubObject("RBGoldHall_01")
      EndScript
    End
    
        ModelConditionState  = DESTROYED_RIGHT
      Model         = RBGoldHall_D
		ParticleSysBone FireSmall01 FireBuildingSmall
		ParticleSysBone FireSmall02 FireBuildingSmall
		ParticleSysBone FireSmall03 FireBuildingSmall
		ParticleSysBone FireSmall04 FireBuildingSmall
		ParticleSysBone FireMedium01 FireBuildingMedium
		ParticleSysBone FireMedium02 FireBuildingMedium
		ParticleSysBone FireLarge01 FireBuildingLarge
		ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End

    AnimationState = DESTROYED_RIGHT
      BeginScript
        CurDrawableHideSubObject("RBGoldHall_02")
      EndScript
    End
    

    ModelConditionState  = DESTROYED_BACK
      Model         = RBGoldHall_D
		ParticleSysBone FireSmall01 FireBuildingSmall
		ParticleSysBone FireSmall02 FireBuildingSmall
		ParticleSysBone FireSmall03 FireBuildingSmall
		ParticleSysBone FireSmall04 FireBuildingSmall
		ParticleSysBone FireMedium01 FireBuildingMedium
		ParticleSysBone FireMedium02 FireBuildingMedium
		ParticleSysBone FireLarge01 FireBuildingLarge
		ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End

    AnimationState = DESTROYED_BACK
      BeginScript
        CurDrawableHideSubObject("RBGoldHall_03")
      EndScript
    End

	ModelConditionState  = DESTROYED_LEFT
      Model         = RBGoldHall_D
		ParticleSysBone FireSmall01 FireBuildingSmall
		ParticleSysBone FireSmall02 FireBuildingSmall
		ParticleSysBone FireSmall03 FireBuildingSmall
		ParticleSysBone FireSmall04 FireBuildingSmall
		ParticleSysBone FireMedium01 FireBuildingMedium
		ParticleSysBone FireMedium02 FireBuildingMedium
		ParticleSysBone FireLarge01 FireBuildingLarge
		ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End
    
    AnimationState = DESTROYED_LEFT
      BeginScript
        CurDrawableHideSubObject("RBGoldHall_04")
      EndScript
    End
    
    
    ModelConditionState  = DAMAGED
      Model         = RBGoldHall_D
		ParticleSysBone FireSmall01 FireBuildingSmall
		ParticleSysBone FireSmall02 FireBuildingSmall
		ParticleSysBone FireSmall03 FireBuildingSmall
		ParticleSysBone FireSmall04 FireBuildingSmall
		ParticleSysBone FireMedium01 FireBuildingMedium
		ParticleSysBone FireMedium02 FireBuildingMedium
		ParticleSysBone FireLarge01 FireBuildingLarge
		ParticleSysBone SmokeLarge01 SmokeBuildingLarge
	
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = RBGoldHall_D
		ParticleSysBone FireSmall01 FireBuildingSmall
		ParticleSysBone FireSmall02 FireBuildingSmall
		ParticleSysBone FireSmall03 FireBuildingSmall
		ParticleSysBone FireSmall04 FireBuildingSmall
		ParticleSysBone FireMedium01 FireBuildingMedium
		ParticleSysBone FireMedium02 FireBuildingMedium
		ParticleSysBone FireLarge01 FireBuildingLarge
		ParticleSysBone SmokeLarge01 SmokeBuildingLarge
	
    End

    ModelConditionState  = RUBBLE
      Model         = RBGoldHall_D
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End
    
    AnimationState = RUBBLE
      BeginScript
        CurDrawableHideSubObject("RBGoldHall_01")
        CurDrawableHideSubObject("RBGoldHall_02")
        CurDrawableHideSubObject("RBGoldHall_03")
        CurDrawableHideSubObject("RBGoldHall_04")
      EndScript
    End

    ModelConditionState  = POST_RUBBLE
      Model         = None
		ParticleSysBone NONE SmokeBuildingMediumRubble
    End

    ModelConditionState  = POST_COLLAPSE
      Model         = None
		ParticleSysBone NONE SmokeBuildingMediumRubble
    End  
  End
  
 
	; ***DESIGN parameters ***
	DisplayName         = OBJECT:RohanGoldenHall
	Side                = Rohan
	EditorSorting       = STRUCTURE
	ThreatLevel = 1.0
	CommandSet			= GenericKeepCommandSet
 
	BuildCost           = 1000
	BuildTime           = 90.0           ; in seconds
	VisionRange         = 160.0          ; Shroud clearing distance
	ShroudClearingRange = 160

	ArmorSet
		Armor     = CitadelArmor
	End


	; *** AUDIO Parameters ***

	VoiceSelect				= RohanCitadelSelect

	SoundOnDamaged			= BuildingLightDamageWood
	SoundOnReallyDamaged		= BuildingHeavyDamageWood

	VoiceSelectUnderConstruction	= BuildingGoodVoiceSelectUnderConstruction

	UnitSpecificSounds
		UnderConstruction		= BuildingConstructionLoop  ; Built first time
		; UnderRepairFromDamage	= NoSound					; Repaired No animation on the building, so don't bother playing sound
		UnderRepairFromRubble	= BuildingConstructionLoop	; Repaired from completely destroyed (not used???)
	End 
	EvaEventDieOwner = CitadelDie


	; *** ENGINEERING Parameters ***

	RadarPriority       = STRUCTURE
	KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE NEED_BASE_FOUNDATION CASTLE_KEEP MP_COUNT_FOR_VICTORY FS_FACTORY AUTO_RALLYPOINT MADE_OF_WOOD
	 
	Behavior            = GettingBuiltBehavior ModuleTag_04
      SelfBuildingLoop = BuildingConstructionLoop ; Only played if we DON'T spawn a worker
	  SelfRepairFromDamageLoop  = NoSound         ; This doesn't cause an animation, so don't bother playing a sound
	  SelfRepairFromRubbleLoop  = BuildingConstructionLoop
	End

	Behavior = CastleMemberBehavior ModuleTag_CMB
	End 

  	;-----------------------------------------------
	;Used for hero revival and initial construction     
	Behavior = ProductionUpdate ProductionUpdateModuleTag
		; nothing, but is required if we have any Object-level Upgrades!
	End
	Behavior = QueueProductionExitUpdate ModuleTag_QueuePEU
		UnitCreatePoint   = X:0.0 Y:-20.0 Z:0.0
		NaturalRallyPoint = X:28.8 Y:-80.0 Z:0.0;NaturalRallyPointX must always match GeometryMajorRadius! 
		ExitDelay = 300 ;Handles delays between units if multiple produced at a time. 
	End  
	;-----------------------------------------------

	Body                = StructureBody ModuleTag_05
		MaxHealth         = ROHAN_CENTRAL_GOLDENHALL_HEALTH
	    
		DamageCreationList = OCL_BuildingDamageList01 CATAPULT_ROCK
	    
		DamageCreationList = OCL_RBGoldHall_Chunk1 CATAPULT_ROCK FRONT_DESTROYED
		DamageCreationList = OCL_RBGoldHall_Chunk2 CATAPULT_ROCK RIGHT_DESTROYED
		DamageCreationList = OCL_RBGoldHall_Chunk3 CATAPULT_ROCK BACK_DESTROYED
		DamageCreationList = OCL_RBGoldHall_Chunk4 CATAPULT_ROCK LEFT_DESTROYED
	End
 
; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
  
  Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 5000
  End

  Behavior                  = StructureCollapseUpdate ModuleTag_06
    MinCollapseDelay        = 000
    MaxCollapseDelay        = 000
    CollapseDamping         = .5
    MaxShudder              = 0.6
    MinBurstDelay           = 250
    MaxBurstDelay           = 800
    BigBurstFrequency       = 4
    FXList                  = INITIAL   FX_StructureMediumCollapse

  End

  
	Geometry				= BOX
	GeometryMajorRadius		= 27 
	GeometryMinorRadius		= 45 
	GeometryHeight			= 47 
	GeometryOffset			= X:0 Y:0 Z:0
  
	AdditionalGeometry		= BOX
	GeometryMajorRadius		= 60.0
	GeometryMinorRadius		= 20.0
	GeometryHeight			= 30
	
	AdditionalGeometry		= BOX
	GeometryMajorRadius		= 42.0
	GeometryMinorRadius		= 53.0
	GeometryHeight			= 7.0
	GeometryOffset			= X:0 Y:-6 Z:0
	
	AdditionalGeometry		= BOX
	GeometryMajorRadius		= 16.0
	GeometryMinorRadius		= 16.0
	GeometryHeight			= 100
	
	AdditionalGeometry		= BOX
	GeometryMajorRadius		= 7.0
	GeometryMinorRadius		= 7.0
	GeometryHeight			= 155
	
	GeometryIsSmall			= No
	Shadow					= SHADOW_VOLUME
	BuildCompletion			= PLACED_BY_PLAYER
End



;------------------------------------------------------------------------------

;Rohan Refugee Camp
Object RohanRefugeeCamp
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

;  Draw                = W3DModelDraw ModuleTag_01
;    OkToChangeModelColor = Yes
;
;    DefaultConditionState
;      Model           = RBRefCamp
;    End
;  End

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD 

    DefaultModelConditionState
      Model = RBRefCamp
    End
    
    ModelConditionState  = DAMAGED
		Model         = RBRefCamp_D
;		ParticleSysBone SmokeSmall01 SmokeBuildingSmall
    End   
    AnimationState = DAMAGED
;	EnteringStateFX	= FX_BuildingDamaged
    End   
    
  End

  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:RohanRefugeeCamp
  Side                = Rohan
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 60.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160
;  ArmorSet
;    Conditions        = None
;    Armor             = StructureArmor
;    DamageFX          = StructureDamageFXNoShake
;  End



; For Testing Purposes


; *** AUDIO Parameters ***

	;SoundOnDamaged		= BuildingLightDamageWood
	;SoundOnReallyDamaged	= BuildingHeavyDamageWood

;  VoiceSelect         = NuclearReactorSelect
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 

  ; *** ENGINEERING Parameters ***
  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE NEED_BASE_FOUNDATION AUTO_RALLYPOINT MADE_OF_WOOD
 
;  Behavior            = GettingBuiltBehavior ModuleTag_04
;    SelfBuildingLoop = BuildingConstructionLoop ; Only played if we DON'T spawn a worker
;	SelfRepairFromDamageLoop  = NoSound         ; This doesn't cause an animation, so don't bother playing a sound
;	SelfRepairFromRubbleLoop  = BuildingConstructionLoop
;  End

  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  Body                = StructureBody ModuleTag_05
    MaxHealth         = 1000.0
  End

;  Behavior            = DestroyDie ModuleTag_07
    ;nothing
;  End

;  Behavior           = CreateObjectDie ModuleTag_08
;    CreationList     = OCL_SmallStructureDebris
;  End
 
;  Behavior = ProductionUpdate ModuleTag_10
;    ; nothing, but is required if we have any Object-level Upgrades!
;  End
 
;  Behavior = FlammableUpdate ModuleTag_14
;    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
;    AflameDamageAmount = 5       ; taking this much damage...
;    AflameDamageDelay = 500       ; this often.
;  End
 
;  Behavior = TransitionDamageFX ModuleTag_15
;    ;-------------DESIGNED FOR SMALL SIZED FACTION BUILDING TRANSITIONS-------------------
;    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
;    ;---------------------------------------------------------------------------------------
;    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
;    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
;    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
;  End
 
;  Behavior             = FXListDie ModuleTag_16
;    DeathFX       = FX_BuildingDie
;  End
 
 	Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
		DestructionDelay  = 5000
	End
	
	Behavior                  = StructureCollapseUpdate ModuleTag_12
		MinCollapseDelay        = 000
		MaxCollapseDelay        = 000
		CollapseDamping         = .5
		MaxShudder              = 0.6
		MinBurstDelay           = 250
		MaxBurstDelay           = 800
		BigBurstFrequency       = 4
		FXList                  = INITIAL   FX_StructureSmallCollapse
;		FXList                  = ALMOST_FINAL  FX_StructureAlmostCollapse
		DestroyObjectWhenDone	= Yes
		CollapseHeight			= 66
	End
	 
  Geometry              = BOX
  GeometryMajorRadius   = 24.0
  GeometryMinorRadius   = 16.0
  GeometryHeight        = 21.8
  GeometryOffset		= X:6.6 Y:-50.6 Z:0
  
  AdditionalGeometry    = BOX
  GeometryMajorRadius   = 14.0
  GeometryMinorRadius   = 24.0
  GeometryHeight        = 21.8
  GeometryOffset		= X:33.6 Y:-9.6 Z:0
  
  AdditionalGeometry    = BOX
  GeometryMajorRadius   = 24.0
  GeometryMinorRadius   = 14.0
  GeometryHeight        = 21.8
  GeometryOffset		= X:-19.6 Y:27.6 Z:0
  
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER
End

;------------------------------------------------------------------------------
;Rohan Refugee CampA
Object RohanRefugeeCampA
 
  ; *** ART Parameters ***

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD 
    DefaultModelConditionState
      Model = RBRefCampA
    End
    
    ModelConditionState  = DAMAGED
		Model         = RBRefCampA_D
;		ParticleSysBone SmokeSmall01 SmokeBuildingSmall
    End   
    AnimationState = DAMAGED
;	EnteringStateFX	= FX_BuildingDamaged
    End
    
  End

  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:RohanRefugeeCamp
  Side                = Rohan
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 60.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160


  ; *** AUDIO Parameters ***

	;SoundOnDamaged		= BuildingLightDamageWood
	;SoundOnReallyDamaged	= BuildingHeavyDamageWood

 
  ; *** ENGINEERING Parameters ***

  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE NEED_BASE_FOUNDATION AUTO_RALLYPOINT MADE_OF_WOOD
 
  ;Behavior            = GettingBuiltBehavior ModuleTag_04
  ;  SelfBuildingLoop = BuildingConstructionLoop ; Only played if we DON'T spawn a worker
;	SelfRepairFromDamageLoop  = NoSound         ; This doesn't cause an animation, so don't bother playing a sound
;	SelfRepairFromRubbleLoop  = BuildingConstructionLoop
;  End

  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  Body                = StructureBody ModuleTag_05
    MaxHealth         = 1000.0
  End

;  Behavior            = DestroyDie ModuleTag_07
    ;nothing
;  End

 	Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
		DestructionDelay  = 5000
	End
	
	Behavior                  = StructureCollapseUpdate ModuleTag_8
		MinCollapseDelay        = 000
		MaxCollapseDelay        = 000
		CollapseDamping         = .5
		MaxShudder              = 0.6
		MinBurstDelay           = 250
		MaxBurstDelay           = 800
		BigBurstFrequency       = 4
		FXList                  = INITIAL   FX_StructureSmallCollapse
;		FXList                  = ALMOST_FINAL  FX_StructureAlmostCollapse
		DestroyObjectWhenDone	= Yes
		CollapseHeight			= 66
	End
 
  Geometry              = BOX
  GeometryMajorRadius   = 24.6
  GeometryMinorRadius   = 17.6
  GeometryHeight        = 20.8
  
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER
End

;------------------------------------------------------------------------------
;Rohan Refugee CampB
Object RohanRefugeeCampB
 
  ; *** ART Parameters ***

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD 

    DefaultModelConditionState
      Model = RBRefCampB
    End
    
    ModelConditionState  = DAMAGED
		Model         = RBRefCampB_D
;		ParticleSysBone SmokeSmall01 SmokeBuildingSmall
    End   
    AnimationState = DAMAGED
;	EnteringStateFX	= FX_BuildingDamaged
    End
    
  End

  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:RohanRefugeeCamp
  Side                = Rohan
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 60.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160


  ; *** AUDIO Parameters ***

	;SoundOnDamaged		= BuildingLightDamageWood
	;SoundOnReallyDamaged	= BuildingHeavyDamageWood

 
  ; *** ENGINEERING Parameters ***

  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE NEED_BASE_FOUNDATION AUTO_RALLYPOINT MADE_OF_WOOD
 
;  Behavior            = GettingBuiltBehavior ModuleTag_04
;    SelfBuildingLoop = BuildingConstructionLoop ; Only played if we DON'T spawn a worker
;	SelfRepairFromDamageLoop  = NoSound         ; This doesn't cause an animation, so don't bother playing a sound
;	SelfRepairFromRubbleLoop  = BuildingConstructionLoop
;  End

  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  Body                = StructureBody ModuleTag_05
    MaxHealth         = 1000.0
  End

;  Behavior            = DestroyDie ModuleTag_07
    ;nothing
;  End
 
  	Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
		DestructionDelay  = 5000
	End
	
 	Behavior                  = StructureCollapseUpdate ModuleTag_8
		MinCollapseDelay        = 000
		MaxCollapseDelay        = 000
		CollapseDamping         = .5
		MaxShudder              = 0.6
		MinBurstDelay           = 250
		MaxBurstDelay           = 800
		BigBurstFrequency       = 4
		FXList                  = INITIAL   FX_StructureSmallCollapse
;		FXList                  = ALMOST_FINAL  FX_StructureAlmostCollapse
		DestroyObjectWhenDone	= Yes
		CollapseHeight			= 66
	End
	
  Geometry              = BOX
  GeometryMajorRadius   = 24.6
  GeometryMinorRadius   = 13.6
  GeometryHeight        = 20.8
  
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER
End

;------------------------------------------------------------------------------
;Rohan Refugee CampC
Object RohanRefugeeCampC
 
  ; *** ART Parameters ***

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD 

    DefaultModelConditionState
		Model = RBRefCampC
    End
    
    ModelConditionState  = DAMAGED
		Model         = RBRefCampC_D
;		ParticleSysBone SmokeSmall01 SmokeBuildingSmall
    End   
    AnimationState = DAMAGED
;	EnteringStateFX	= FX_BuildingDamaged
    End
    
  End

  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:RohanRefugeeCamp
  Side                = Rohan
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 60.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160


  ; *** AUDIO Parameters ***

	;SoundOnDamaged		= BuildingLightDamageWood
	;SoundOnReallyDamaged	= BuildingHeavyDamageWood

 
  ; *** ENGINEERING Parameters ***

  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE NEED_BASE_FOUNDATION AUTO_RALLYPOINT MADE_OF_WOOD
 
;  Behavior            = GettingBuiltBehavior ModuleTag_04
 ;   SelfBuildingLoop = BuildingConstructionLoop ; Only played if we DON'T spawn a worker
;	SelfRepairFromDamageLoop  = NoSound         ; This doesn't cause an animation, so don't bother playing a sound
;	SelfRepairFromRubbleLoop  = BuildingConstructionLoop
 ; End

  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  Body                = StructureBody ModuleTag_05
    MaxHealth         = 1000.0
  End

 	Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
		DestructionDelay  = 5000
	End
	
;  Behavior            = DestroyDie ModuleTag_07
    ;nothing
;  End
 
	Behavior                  = StructureCollapseUpdate ModuleTag_8
		MinCollapseDelay        = 000
		MaxCollapseDelay        = 000
		CollapseDamping         = .5
		MaxShudder              = 0.6
		MinBurstDelay           = 250
		MaxBurstDelay           = 800
		BigBurstFrequency       = 4
		FXList                  = INITIAL   FX_StructureSmallCollapse
;		FXList                  = ALMOST_FINAL  FX_StructureAlmostCollapse
		DestroyObjectWhenDone	= Yes
		CollapseHeight			= 66
	End

  Geometry              = BOX
  GeometryMajorRadius   = 24.6
  GeometryMinorRadius   = 13.6
  GeometryHeight        = 20.8
  GeometryOffset		= X:-4 Y:0 Z:0
  
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER
End


;------------------------------------------------------------------------------
;Rohan Archer Range a.k.a Rohan Archery Range RohanArcheryRange
Object RohanArcherRange

	SelectPortrait = BPRArcheryRange
 
  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_Draw
  
	ExtraPublicBone = ARROW_01
	ExtraPublicBone = ARROW_02
	ExtraPublicBone = ARROW_03
	ExtraPublicBone = ARROW_04
	ExtraPublicBone = ARROW_05
	ExtraPublicBone = ARROW_06
	 
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
	StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD 
	DefaultModelConditionState
		Model = RBArchRnge_SKN
		WeaponLaunchBone = PRIMARY ARROW_
    End
    
    	IdleAnimationState
			StateName				=   STATE_Idle
			Animation = IdleA
				AnimationName		=	RBArchRnge_SKL.RBArchRnge_IDLA
				AnimationMode		=	ONCE 
				AnimationPriority		=	30
			End
			Animation = IdleB
				AnimationName		=	RBArchRnge_SKL.RBArchRnge_IDLB
				AnimationMode		=	ONCE 
				AnimationPriority		=	5
			End
			Flags               = RESTART_ANIM_WHEN_COMPLETE 

			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "BeingConstructed" then 
				    ; Don't play completed sound when canceling build-in-progress or when
				    ; destroyed halfway
				    if not CurDrawableModelcondition( "DYING" ) then 
						CurDrawablePlaySound("CampSoldierCompleteRohanArcheryRange")
					end
				end
			EndScript

		End

;-----------------------Build Up States		
		ModelConditionState		= AWAITING_CONSTRUCTION
			Model               = RBArchRnge_A
;			ParticleSysBone		= NONE BuildingDoughnutCloud
		End
		AnimationState			= AWAITING_CONSTRUCTION
			Animation
				AnimationName	=RBArchRnge_ASKL.RBArchRnge_ABLD
				AnimationMode	= MANUAL
			End
			Flags				= START_FRAME_FIRST
		End
		
		ModelConditionState		=	ACTIVELY_BEING_CONSTRUCTED
			Model				=	RBArchRnge_A
			ParticleSysBone		= Chimney BuildingContructDust
		End;
		AnimationState			= ACTIVELY_BEING_CONSTRUCTED
			Animation
				AnimationName   = RBArchRnge_ASKL.RBArchRnge_ABLD
				AnimationMode   = MANUAL
			End
			Flags				= START_FRAME_FIRST
			StateName			= BeingConstructed
			BeginScript
				CurDrawablePlaySound("GondorBarracksBeginConstruction")
			EndScript
		End

    ;--damaged building
    ModelConditionState  = DESTROYED_FRONT
      Model         = RBArchRnge_D2
		ParticleSysBone FireSmall01 FireBuildingLarge
		ParticleSysBone FireSmall02 FireBuildingLarge
		ParticleSysBone FireSmall03 FireBuildingLarge
		ParticleSysBone FireSmall04 FireBuildingMedium
		ParticleSysBone FireSmall05 SmokeBuildingLarge
    End

    AnimationState = DESTROYED_FRONT
      BeginScript
        CurDrawableHideSubObject("ArcheryDP_1")
      EndScript
    End
    
    ModelConditionState  = DESTROYED_RIGHT
      Model         = RBArchRnge_D2
		ParticleSysBone FireSmall01 FireBuildingLarge
		ParticleSysBone FireSmall02 FireBuildingLarge
		ParticleSysBone FireSmall03 FireBuildingLarge
		ParticleSysBone FireSmall04 FireBuildingMedium
		ParticleSysBone FireSmall05 SmokeBuildingLarge
    End

    AnimationState = DESTROYED_RIGHT
      BeginScript
        CurDrawableHideSubObject("ArcheryDP_3")
      EndScript
    End
    
    ModelConditionState  = DESTROYED_BACK
      Model         = RBArchRnge_D2
		ParticleSysBone FireSmall01 FireBuildingLarge
		ParticleSysBone FireSmall02 FireBuildingLarge
		ParticleSysBone FireSmall03 FireBuildingLarge
		ParticleSysBone FireSmall04 FireBuildingMedium
		ParticleSysBone FireSmall05 SmokeBuildingLarge
    End

    AnimationState = DESTROYED_BACK
      BeginScript
        CurDrawableHideSubObject("ArcheryDP_2")
      EndScript
    End

	ModelConditionState  = DESTROYED_LEFT
      Model         = RBArchRnge_D2
		ParticleSysBone FireSmall01 FireBuildingLarge
		ParticleSysBone FireSmall02 FireBuildingLarge
		ParticleSysBone FireSmall03 FireBuildingLarge
		ParticleSysBone FireSmall04 FireBuildingMedium
		ParticleSysBone FireSmall05 SmokeBuildingLarge
    End
    
    AnimationState = DESTROYED_LEFT
      BeginScript
        CurDrawableHideSubObject("ArcheryDP_4")
      EndScript
    End
    
    
    ModelConditionState  = DAMAGED
      Model         = RBArchRnge_D1
		ParticleSysBone FireSmall01 FireBuildingLarge
		ParticleSysBone FireSmall02 FireBuildingMedium
		ParticleSysBone FireSmall03 FireBuildingMedium
		ParticleSysBone FireSmall04 FireBuildingMedium
		ParticleSysBone FireSmall05 SmokeBuildingLarge
    End
    
    AnimationState = DAMAGED
	EnteringStateFX	= FX_BuildingDamaged
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = RBArchRnge_D2
		ParticleSysBone FireSmall01 FireBuildingLarge
		ParticleSysBone FireSmall02 FireBuildingLarge
		ParticleSysBone FireSmall03 FireBuildingLarge
		ParticleSysBone FireSmall04 FireBuildingMedium
		ParticleSysBone FireSmall05 SmokeBuildingLarge
    End
    
    AnimationState = REALLYDAMAGED
	EnteringStateFX	= FX_BuildingReallyDamaged
    End

    ModelConditionState  = RUBBLE
      Model         = RBArchRnge_D2
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End
    
    AnimationState = RUBBLE
      BeginScript
        CurDrawableHideSubObject("ArcheryDP_1")
        CurDrawableHideSubObject("ArcheryDP_2")
        CurDrawableHideSubObject("ArcheryDP_3")
        CurDrawableHideSubObject("ArcheryDP_4")
      EndScript
    End

  	ModelConditionState  = POST_RUBBLE
		Model         = None
		ParticleSysBone NONE SmokeBuildingMediumRubble
	End
	ModelConditionState  = POST_COLLAPSE
		Model         = None
		ParticleSysBone NONE SmokeBuildingMediumRubble
	End
  End
  
  Draw = W3DFloorDraw ModuleTag_DrawFloor    
  		StaticModelLODMode = Yes		; THIS NEEDS TO BE COMMENTED OUT WHEN ENGINEERING ENABLES LOD'S IN THE FLOOR DRAW 
     ModelName = RBArchRnge_Bib
  End
  
  PlacementViewAngle  = -180

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:RohanArcherRange
  Description 	      = OBJECT:RohanArcheryRangeDescription
  Side                = Rohan
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
 
  CommandSet          = RohanArcherRangeCommandSet
  BuildCost           = ROHAN_ARCHERYRANGE_BUILDCOST			
  BuildTime           = ROHAN_ARCHERYRANGE_BUILDTIME			; in seconds
  VisionRange         = ROHAN_ARCHERYRANGE_VISIONRANGE			; Shroud clearing distance
  ShroudClearingRange = ROHAN_ARCHERYRANGE_SHROUDCLEAR
  BountyValue         = ROHAN_ARCHERYRANGE_BOUNTY_VALUE	


		
  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    ;DamageFX          = StructureDamageFXNoShake
  End

	WeaponSet
		Conditions			= None
	End

	WeaponSet
		Weapon				= PRIMARY RohanStructureBow
		Conditions			= PLAYER_UPGRADE
		AutoChooseSources	= PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End


  ; *** AUDIO Parameters ***

	VoiceSelect			= RohanArcheryRangeSelect

	SoundOnDamaged			= BuildingLightDamageWood
	SoundOnReallyDamaged		= BuildingHeavyDamageWood

	VoiceSelectUnderConstruction	= BuildingGoodVoiceSelectUnderConstruction

	UnitSpecificSounds
		UnderConstruction		= BuildingConstructionLoop  ; Built first time
		; UnderRepairFromDamage	= NoSound					; Repaired No animation on the building, so don't bother playing sound
		UnderRepairFromRubble	= BuildingConstructionLoop	; Repaired from completely destroyed (not used???)
	End

	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		MaxUpdateRangeCap = 800
 		AnimationSound = Sound: RohanArcheryRangeArrowQuiver	Animation:RBARCHRNGE_SKL.RBARCHRNGE_IDLA	Frames: 15 23
		AnimationSound = Sound: RohanArcheryRangeDrawBow	Animation:RBARCHRNGE_SKL.RBARCHRNGE_IDLA	Frames: 49 63
		AnimationSound = Sound: RohanArcheryRangeBows		Animation:RBARCHRNGE_SKL.RBARCHRNGE_IDLA	Frames: 75 96
 		AnimationSound = Sound: RohanArcheryRangeHits1		Animation:RBARCHRNGE_SKL.RBARCHRNGE_IDLA	Frames: 78
 		AnimationSound = Sound: RohanArcheryRangeHits2		Animation:RBARCHRNGE_SKL.RBARCHRNGE_IDLA	Frames: 98
	End


  ; *** ENGINEERING Parameters ***

  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE CAPTURABLE FS_FACTORY AUTO_RALLYPOINT MP_COUNT_FOR_VICTORY NEED_BASE_FOUNDATION ATTACK_NEEDS_LINE_OF_SIGHT CAN_ATTACK MADE_OF_WOOD
 
  Behavior            = GettingBuiltBehavior ModuleTag_04
    WorkerName		  = RohanWorkerNoSelect 
  End

  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  Body                      = ActiveBody ModuleTag_05
    MaxHealth               = ROHAN_ARCHERYRANGE_MAXHEALTH			
    MaxHealthDamaged        = ROHAN_ARCHERYRANGE_MAXHEALTHDAMAGED		
	  MaxHealthReallyDamaged  = ROHAN_ARCHERYRANGE_MAXHEALTH_REALLYDAMAGED	
    
    DamageCreationList = OCL_BuildingDamageList01 CATAPULT_ROCK
    DamageCreationList = OCL_RBArchRnge_Chunk1 CATAPULT_ROCK FRONT_DESTROYED
    DamageCreationList = OCL_RBArchRnge_Chunk2 CATAPULT_ROCK BACK_DESTROYED
    DamageCreationList = OCL_RBArchRnge_Chunk3 CATAPULT_ROCK RIGHT_DESTROYED
    DamageCreationList = OCL_RBArchRnge_Chunk4 CATAPULT_ROCK LEFT_DESTROYED
  End 
 
 
  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
  
  Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 6500
  End

  Behavior                  = StructureCollapseUpdate ModuleTag_06
    MinCollapseDelay        = 000
    MaxCollapseDelay        = 000
    CollapseDamping         = .5
    MaxShudder              = 0.6
    MinBurstDelay           = 250
    MaxBurstDelay           = 800
    BigBurstFrequency       = 4
    FXList                  = INITIAL   FX_StructureMediumCollapse

  End

	Behavior = AIUpdateInterface ModuleTag_SoWeCanUseWeapon
		AutoAcquireEnemiesWhenIdle	= Yes
		MoodAttackCheckRate			= 250
	End
  
	Behavior = SubObjectsUpgrade ModuleTag_HideAll
		TriggeredBy		= Upgrade_StructureLevel1
		HideSubObjects	= V1 V1A V2
	End

 	Behavior = SubObjectsUpgrade ModuleTag_ShowWalls 
		TriggeredBy		= Upgrade_StructureLevel2
		ShowSubObjects	= V1 V1A
		HideSubObjects	= V2
	End

	Behavior = SubObjectsUpgrade ModuleTag_ShowPillars 
		TriggeredBy		= Upgrade_StructureLevel3
		ShowSubObjects	= V1 V1A V2 
	End

  	Behavior = WeaponSetUpgrade ModuleTag_ThirdLevelBuildingArrows
		TriggeredBy		= Upgrade_StructureLevel3
		ConflictsWith	= Upgrade_EasyAIMultiPlayer
	End
  
	Behavior = ProductionUpdate ProductionUpdateModuleTag
		; nothing
	End

	Behavior = QueueProductionExitUpdate QueueProductionModuleTag
		PlacementViewAngle  = -180
   		UnitCreatePoint		= X:32.5 Y:38.0 Z:0.0
		NaturalRallyPoint	= X:-50.0 Y:38.0 Z:0.0
		ExitDelay			= 750
	End
	  
	Behavior                  = BuildingBehavior BuildingModuleTag
	 NightWindowName         = WINDOW_N01
	;FireWindowName          = WINDOW_F01
	;GlowWindowName			= WINDOW_G01
	End
	
;	Behavior = CommandSetUpgrade ModuleTag_commandSetUpgrade
;		TriggeredBy = Upgrade_ElvenAllies
;		CommandSet = RohanArcherRangeElvenAlliesUpgradedCommandSet
;	End	  

	Behavior = GeometryUpgrade Geom_ModuleTag_HideAll
		TriggeredBy		= Upgrade_StructureLevel1
		HideGeometry	= Geom_V1 Geom_V2
	End
	Behavior = GeometryUpgrade Geom_ModuleTag_ShowWalls 
		TriggeredBy		= Upgrade_StructureLevel2
		ShowGeometry	= Geom_V1
		HideGeometry	= Geom_V2 Geom_V1A
	End
	Behavior = GeometryUpgrade Geom_ModuleTag_ShowPillars 
		TriggeredBy		= Upgrade_StructureLevel3
		ShowGeometry	= Geom_V2
		HideGeometry	= Geom_V2A
	End
	  
	Geometry	          = BOX
	GeometryName		  = Geom_Orig
	GeometryMajorRadius   = 13.0
	GeometryMinorRadius   = 37.0
	GeometryHeight        = 40.0
	GeometryOffset		  = X:32.5 Y:15.0 Z:0
	
	AdditionalGeometry    = BOX
	GeometryName		  = Geom_Orig
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 13.0
	GeometryHeight        = 27.0
	GeometryOffset		  = X:7 Y:41 Z:0
	
	AdditionalGeometry    = BOX
	GeometryName		  = Geom_V2A
	GeometryMajorRadius   = 14.0
	GeometryMinorRadius   = 13.0
	GeometryHeight        = 57.0
	GeometryOffset		  = X:32.5 Y:41 Z:0
	
	AdditionalGeometry    = BOX
	GeometryName		  = Geom_V1A
	GeometryMajorRadius   = 23.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 10.0
	GeometryOffset		  = X:-4.0 Y:-12.0 Z:0
	
	AdditionalGeometry    = BOX
	GeometryName		  = Geom_V1
	GeometryActive		  = No
	GeometryMajorRadius   = 29.0
	GeometryMinorRadius   = 42.0
	GeometryHeight        = 18.0
	GeometryOffset		  = X:-4.0 Y:-12.0 Z:0
	
	AdditionalGeometry    = BOX
	GeometryName		  = Geom_V2
	GeometryActive		  = No
	GeometryMajorRadius   = 14.0
	GeometryMinorRadius   = 13.0
	GeometryHeight        = 117.0
	GeometryOffset		  = X:32.5 Y:41 Z:0
	
	GeometryIsSmall       = No
	Shadow                = SHADOW_VOLUME
	BuildCompletion		  = PLACED_BY_PLAYER

	GeometryContactPoint	= X:-37.335		Y:16.447	Z:0			Repair
	GeometryContactPoint	= X:50.342		Y:-14.685	Z:0			Repair
	GeometryContactPoint	= X:36.154		Y:57.817	Z:0
	GeometryContactPoint	= X:-16.613		Y:-57.348	Z:0
	GeometryContactPoint	= X:29.704		Y:41.391	Z:75.577	Swoop

	
End

;------------------------------------------------------------------------------
;Rohan Stable
Object RohanStable

	SelectPortrait = BPRStables
 
  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_Draw

	ExtraPublicBone = ARROW_01
	ExtraPublicBone = ARROW_02
	ExtraPublicBone = ARROW_03
	ExtraPublicBone = ARROW_04
	ExtraPublicBone = ARROW_05
	ExtraPublicBone = ARROW_06
	ExtraPublicBone = ARROW_07
	ExtraPublicBone = ARROW_08

    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
	StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD     
	DefaultModelConditionState
		Model = RBStable_SKN
		WeaponLaunchBone = PRIMARY ARROW_
	End
    
    	IdleAnimationState
			StateName				=   STATE_Idle
			Animation = IdleA
				AnimationName		=	RBStable_SKL.RBStable_IDLA
				AnimationMode		=	ONCE 
				AnimationPriority		=	30
			End
			Animation = IdleB
				AnimationName		=	RBStable_SKL.RBStable_IDLB
				AnimationMode		=	ONCE 
				AnimationPriority		=	10
			End
			Flags               = RESTART_ANIM_WHEN_COMPLETE 

		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "BeingConstructed" then 
			    ; Don't play completed sound when canceling build-in-progress or when
			    ; destroyed halfway
			    if not CurDrawableModelcondition( "DYING" ) then 
					CurDrawablePlaySound("CampSoldierCompleteRohanStables")
				end
			end
		EndScript

		End
		
	;------------ Build Up States -------
    ModelConditionState   = AWAITING_CONSTRUCTION 
      Model               = RBStable_A
;		ParticleSysBone	  = NONE BuildingDoughnutCloud
    End;
    AnimationState        = AWAITING_CONSTRUCTION
      Animation           =  RBStable_A
        AnimationName     =  RBStable_ASKL.RBStable_ABLD
        AnimationMode     = MANUAL
        AnimationBlendTime = 0
      End
	  Flags				  = START_FRAME_FIRST
    End

    ModelConditionState   = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
      Model               = RBStable_A
		ParticleSysBone   = CONSTDUSTBONE01 BuildingContructDust FollowBone:Yes
    End;
    AnimationState        = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
		Animation           = RBStable_A
			AnimationName     = RBStable_ASKL.RBStable_ABLD
			AnimationMode     = MANUAL
			AnimationBlendTime = 0
		End
		Flags				  = START_FRAME_FIRST
		StateName			  = BeingConstructed
    End
		
        ;--damaged building
      ModelConditionState  = DESTROYED_FRONT
      Model         = RBStable_D2
		ParticleSysBone FireSmall01 FireBuildingLarge
		ParticleSysBone FireSmall02 FireBuildingMedium
		ParticleSysBone FireSmall03 FireBuildingLarge
		ParticleSysBone FireSmall04 FireBuildingLarge
		ParticleSysBone FireSmall05 FireBuildingLarge
		ParticleSysBone FireSmall06 FireBuildingMedium
		ParticleSysBone FireSmall07 SmokeBuildingLarge
		ParticleSysBone FireSmall01 SmokeBuildingLarge	
    End

    AnimationState = DESTROYED_FRONT
      BeginScript
        CurDrawableHideSubObject("RBStables_01")
      EndScript
    End
    
        ModelConditionState  = DESTROYED_RIGHT
      Model         = RBStable_D2
		ParticleSysBone FireSmall01 FireBuildingLarge
		ParticleSysBone FireSmall02 FireBuildingMedium
		ParticleSysBone FireSmall03 FireBuildingLarge
		ParticleSysBone FireSmall04 FireBuildingLarge
		ParticleSysBone FireSmall05 FireBuildingLarge
		ParticleSysBone FireSmall06 FireBuildingMedium
		ParticleSysBone FireSmall07 SmokeBuildingLarge
		ParticleSysBone FireSmall01 SmokeBuildingLarge	
    End

    AnimationState = DESTROYED_RIGHT
      BeginScript
        CurDrawableHideSubObject("RBStables_02")
      EndScript
    End
    

    ModelConditionState  = DESTROYED_BACK
      Model         = RBStable_D2
		ParticleSysBone FireSmall01 FireBuildingLarge
		ParticleSysBone FireSmall02 FireBuildingMedium
		ParticleSysBone FireSmall03 FireBuildingLarge
		ParticleSysBone FireSmall04 FireBuildingLarge
		ParticleSysBone FireSmall05 FireBuildingLarge
		ParticleSysBone FireSmall06 FireBuildingMedium
		ParticleSysBone FireSmall07 SmokeBuildingLarge
		ParticleSysBone FireSmall01 SmokeBuildingLarge	
    End

    AnimationState = DESTROYED_BACK
      BeginScript
        CurDrawableHideSubObject("RBStables_03")
      EndScript
    End

	ModelConditionState  = DESTROYED_LEFT
      Model         = RBStable_D2
		ParticleSysBone FireSmall01 FireBuildingLarge
		ParticleSysBone FireSmall02 FireBuildingMedium
		ParticleSysBone FireSmall03 FireBuildingLarge
		ParticleSysBone FireSmall04 FireBuildingLarge
		ParticleSysBone FireSmall05 FireBuildingLarge
		ParticleSysBone FireSmall06 FireBuildingMedium
		ParticleSysBone FireSmall07 SmokeBuildingLarge
		ParticleSysBone FireSmall01 SmokeBuildingLarge	
    End
    
    AnimationState = DESTROYED_LEFT
      BeginScript
        CurDrawableHideSubObject("RBStables_04")
      EndScript
    End
    
    
    ModelConditionState  = DAMAGED
      Model         = RBStable_D1
		ParticleSysBone FireSmall01 FireBuildingLarge
		ParticleSysBone FireSmall02 FireBuildingMedium
		ParticleSysBone FireSmall03 FireBuildingMedium
		ParticleSysBone FireSmall04 SmokeBuildingLarge
		ParticleSysBone FireSmall05 FireBuildingMedium
		ParticleSysBone FireSmall06 FireBuildingMedium
		ParticleSysBone FireSmall07 SmokeBuildingLarge
    End

   AnimationState = DAMAGED
	EnteringStateFX	= FX_BuildingDamaged
   End
    
    ModelConditionState  = REALLYDAMAGED
      Model         = RBStable_D2
		ParticleSysBone FireSmall01 FireBuildingLarge
		ParticleSysBone FireSmall02 FireBuildingMedium
		ParticleSysBone FireSmall03 FireBuildingLarge
		ParticleSysBone FireSmall04 FireBuildingLarge
		ParticleSysBone FireSmall05 FireBuildingLarge
		ParticleSysBone FireSmall06 FireBuildingMedium
		ParticleSysBone FireSmall07 SmokeBuildingLarge
		ParticleSysBone FireSmall01 SmokeBuildingLarge		
    End

   AnimationState = REALLYDAMAGED
	EnteringStateFX	= FX_BuildingReallyDamaged
   End
   
    ModelConditionState  = RUBBLE
      Model         = RBStable_D2
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End
    
    AnimationState = RUBBLE
      BeginScript
        CurDrawableHideSubObject("RBStables_01")
        CurDrawableHideSubObject("RBStables_02")
        CurDrawableHideSubObject("RBStables_03")
        CurDrawableHideSubObject("RBStables_04")
      EndScript
    End

  	ModelConditionState  = POST_RUBBLE
		Model         = None
		ParticleSysBone NONE SmokeBuildingMediumRubble
	End
	ModelConditionState  = POST_COLLAPSE
		Model         = None
		ParticleSysBone NONE SmokeBuildingMediumRubble
	End

  End
  
  
  
	;----------the door
	Draw = W3DScriptedModelDraw ModuleTag_02
	     
		DefaultModelConditionState
			Model = RBStable_DRC
		End
		
		ModelConditionState   = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
			Model               = RBStable_DrA
		End
		AnimationState        = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
			Animation           =RBStable_DrA
				AnimationName     = RBStable_DrA.RBStable_DrA
				AnimationMode     = MANUAL
			End
			Flags				  = START_FRAME_FIRST
			BeginScript
				CurDrawablePlaySound("GondorBarracksBeginConstruction")
			EndScript
		End

		; -----opening-----------
		ModelConditionState   = DOOR_1_OPENING
			Model               = RBStable_DROA
		End
		AnimationState			=	DOOR_1_OPENING
			Animation           =	RBStable_DROA
				AnimationName   =	RBStable_DROA.RBStable_DROA
;				AnimationMode   =	ONCE	
;				AnimationBlendTime = 0
			End
		End 
		ModelConditionState   = DOOR_1_WAITING_OPEN
			Model               = RBStable_DSOP
		End 
		AnimationState			=	DOOR_1_WAITING_OPEN
				Animation           =	RBStable_DSOP
					AnimationName   =   RBStable_DSOP.RBStable_DSOP
					AnimationMode   =	ONCE
					AnimationBlendTime = 0
				End
			;	Flags				=	START_FRAME_FIRST
		End   


		; -----closing-----------
		ModelConditionState   = DOOR_1_CLOSING
			Model               = RBStable_DRCA
		End;  
		AnimationState			=	DOOR_1_CLOSING
			Animation           =	RBStable_DRCA
				AnimationName   =	RBStable_DRCA.RBStable_DRCA
				AnimationMode   =	ONCE
				AnimationBlendTime = 0
			End
		End   
  End

  Draw = W3DFloorDraw ModuleTag_DrawFloor    
		StaticModelLODMode = Yes		; THIS NEEDS TO BE COMMENTED OUT WHEN ENGINEERING ENABLES LOD'S IN THE FLOOR DRAW 
     ModelName = RBStable_Bib
  End
  
  
  PlacementViewAngle  = 90
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:RohanStable
  Side                = Rohan
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
 
  CommandSet		  = RohanStablesCommandSet
  BuildCost           = ROHAN_STABLES_BUILDCOST				
  BuildTime           = ROHAN_STABLES_BUILDTIME				; in seconds
  VisionRange         = ROHAN_STABLES_VISIONRANGE			; Shroud clearing distance
  ShroudClearingRange = ROHAN_STABLES_SHROUDCLEAR
  BountyValue         =	ROHAN_STABLES_BOUNTY_VALUE

  Description = OBJECT:RohanStablesDescription		
  
  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    ;DamageFX          = StructureDamageFXNoShake
  End

	WeaponSet
		Conditions			= None
	End

	WeaponSet
		Weapon				= PRIMARY RohanStructureBow
		Conditions			= PLAYER_UPGRADE
		AutoChooseSources	= PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End


; *** AUDIO Parameters ***

	VoiceSelect		= RohanStablesSelect

	SoundOnDamaged		= BuildingLightDamageWood
	SoundOnReallyDamaged	= BuildingHeavyDamageWood
 	SoundAmbient		= BuildingRohanStableAmbience


	VoiceSelectUnderConstruction	= BuildingGoodVoiceSelectUnderConstruction

	UnitSpecificSounds
		UnderConstruction		= BuildingConstructionLoop  ; Built first time
		; UnderRepairFromDamage	= NoSound					; Repaired No animation on the building, so don't bother playing sound
		UnderRepairFromRubble	= BuildingConstructionLoop	; Repaired from completely destroyed (not used???)
	End
 
  ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		MaxUpdateRangeCap = 800
 		AnimationSound = Sound: BuildingRohanStableHammerTap Animation:RBStable_SKL.RBStable_IDLA Frames: 63 74
 		AnimationSound = Sound: BuildingRohanStableHammerHorseShoe Animation:RBStable_SKL.RBStable_IDLA Frames: 97 116 132
 		AnimationSound = Sound: BuildingRohanStableMaleYawn Animation:RBStable_SKL.RBStable_IDLB Frames: 65
  End


  ; *** ENGINEERING Parameters ***

  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE NEED_BASE_FOUNDATION FS_FACTORY MP_COUNT_FOR_VICTORY AUTO_RALLYPOINT ATTACK_NEEDS_LINE_OF_SIGHT CAN_ATTACK MADE_OF_WOOD

 
  Behavior            = GettingBuiltBehavior GetBuiltBehaviorTag
    WorkerName		  = RohanWorkerNoSelect
  End

  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

	Behavior = AIUpdateInterface ModuleTag_SoWeCanUseWeapon
		AutoAcquireEnemiesWhenIdle	= Yes
		MoodAttackCheckRate			= 250
	End

  Body                      = StructureBody ModuleTag_05
    MaxHealth               = ROHAN_STABLES_MAXHEALTH				
    MaxHealthDamaged        = ROHAN_STABLES_MAXHEALTHDAMAGED			
	  MaxHealthReallyDamaged  = ROHAN_STABLES_MAXHEALTH_REALLYDAMAGED		
        
    DamageCreationList = OCL_BuildingDamageList01 CATAPULT_ROCK
    
    DamageCreationList = OCL_RBStable_Chunk1 CATAPULT_ROCK FRONT_DESTROYED
    DamageCreationList = OCL_RBStable_Chunk2 CATAPULT_ROCK RIGHT_DESTROYED
    DamageCreationList = OCL_RBStable_Chunk3 CATAPULT_ROCK BACK_DESTROYED
    DamageCreationList = OCL_RBStable_Chunk4 CATAPULT_ROCK LEFT_DESTROYED
    
  End

  Behavior = ProductionUpdate ProductionUpdateModuleTag
	NumDoorAnimations            = 1
    DoorOpeningTime              = 3250  ;in mSeconds how long you want doors to be in open state
    DoorWaitOpenTime             =13000  ;in mSeconds time the door stays open, so units can exit
    DoorCloseTime                = 4000  ;in mSeconds how long you want doors to be in open state
    ConstructionCompleteDuration = 0  ;in mSeconds   wait time so if you have multiple units they don't run over each other
  End

  Behavior = QueueProductionExitUpdate QueueProductionModuleTag
	PlacementViewAngle  = -90
    UnitCreatePoint		= X:0.0 Y:-25.0 Z:0.0
    NaturalRallyPoint	= X:0.0 Y:-90.0 Z:0.0
    ExitDelay			= 0
  End

  Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 6500
  End

  Behavior                  = StructureCollapseUpdate ModuleTag_06
    MinCollapseDelay        = 000
    MaxCollapseDelay        = 000
    CollapseDamping         = .5
    MaxShudder              = 0.6
    MinBurstDelay           = 250
    MaxBurstDelay           = 800
    BigBurstFrequency       = 4
	CollapseHeight			= 110
    FXList                  = INITIAL   FX_StructureMediumCollapse

  End

    Behavior = SubObjectsUpgrade ModuleTag_HideAll
		TriggeredBy		= Upgrade_StructureLevel1
		ShowSubObjects	= V2HIDE 
		HideSubObjects	= V1 V1A V2 V2A
	End

 	Behavior = SubObjectsUpgrade ModuleTag_ShowWalls 
		TriggeredBy		= Upgrade_StructureLevel2
		ShowSubObjects	= V1 V1A V2HIDE
		HideSubObjects	= V2 V2A
	End

	Behavior = SubObjectsUpgrade ModuleTag_ShowPillars 
		TriggeredBy		= Upgrade_StructureLevel3
		ShowSubObjects	= V2 V2A V1 V1A
		HideSubObjects	= V2HIDE
	End
  	Behavior = WeaponSetUpgrade ModuleTag_ThirdLevelBuildingArrows
		TriggeredBy		= Upgrade_StructureLevel3
		ConflictsWith	= Upgrade_EasyAIMultiPlayer
	End
  
  Behavior                  = BuildingBehavior BuildingModuleTag
    NightWindowName         = WINDOW_N01
  ;  FireWindowName          = WINDOW_F01
     GlowWindowName			= WINDOW_G01
;    FireName				= FIRE01
  End

;  Behavior           = CreateObjectDie ModuleTag_08
;    CreationList     = OCL_SmallStructureDebris
;  End
 
 
;  Behavior = FlammableUpdate ModuleTag_14
;    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
;    AflameDamageAmount = 5       ; taking this much damage...
;    AflameDamageDelay = 500       ; this often.
;  End
 
;  Behavior = TransitionDamageFX ModuleTag_15
;    ;-------------DESIGNED FOR SMALL SIZED FACTION BUILDING TRANSITIONS-------------------
;    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
;    ;---------------------------------------------------------------------------------------
;    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
;    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
;    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
;  End
 
;  Behavior             = FXListDie ModuleTag_16
;    DeathFX       = FX_BuildingDie
;  End


	Behavior = GeometryUpgrade Geom_ModuleTag_HideAll
		TriggeredBy		= Upgrade_StructureLevel1
		ShowGeometry	= Geom_Orig
		HideGeometry	= Geom_V2 
	End
	Behavior = GeometryUpgrade Geom_ModuleTag_ShowWalls 
		TriggeredBy		= Upgrade_StructureLevel2
		ShowGeometry	= Geom_Orig
		HideGeometry	= Geom_V2 
	End
  	Behavior = GeometryUpgrade Geom_ModuleTag_ShowFlagsAndTower 
		TriggeredBy		= Upgrade_StructureLevel3
		ShowGeometry	= Geom_Orig Geom_V2
	End
		
	Geometry				= BOX
    GeometryName			= Geom_Orig
  	GeometryMajorRadius		= 45.0
	GeometryMinorRadius		= 45.0
	GeometryHeight			= 50.0
	GeometryOffset			= X:12 Y:-12 Z:0	
		
	AdditionalGeometry		= CYLINDER
	GeometryName			= Geom_Orig
	GeometryMajorRadius		= 28.0
	GeometryMinorRadius		= 28.0
	GeometryHeight			= 25.0
	GeometryOffset			= X:4 Y:32 Z:0	

	AdditionalGeometry		= BOX
    GeometryName			= Geom_V2
  	GeometryMajorRadius		= 13.0
	GeometryMinorRadius		= 15.0
	GeometryHeight			= 105.0
	GeometryOffset			= X:26 Y:18 Z:0	
		  
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  BuildCompletion       = PLACED_BY_PLAYER
  
;  AttackContactPoint = X:0 Y:28 Z:24
	GeometryContactPoint	= X:-27.335		Y:29.598	Z:0			Repair
	GeometryContactPoint	= X:35.94		Y:-43.345	Z:0			Repair
	GeometryContactPoint	= X:42.966		Y:36.339	Z:0
	GeometryContactPoint	= X:-34.952		Y:-43.345	Z:0
	GeometryContactPoint	= X:2.198		Y:18.18		Z:63.444	Swoop

End


;Rohan Farm
;------------------------------------------------------------------------------

ChildObject RohanFarm FarmInterface

 
  Draw = W3DScriptedModelDraw ModuleTag_Draw_HCBanner
    OkToChangeModelColor  = Yes
	DefaultModelConditionState
		Model = RBHCFarm
    End
    MultiPlayerOnly = Yes 
  End
    

	DisplayName         = OBJECT:RohanFarm
	Description 	    = OBJECT:RohanFarmDescription
	Side                = Rohan
	BuildCost           = ROHAN_FARM_BUILDCOST
	BuildTime           = ROHAN_FARM_BUILDTIME          ; in seconds
	VisionRange         = 160.0         ; Shroud clearing distance
	ShroudClearingRange = ROHAN_FARM_SHROUD_CLEAR

	;;--- to allow generation of peasants ----------------
	CommandSet          = RohanFarmCommandSet

	WeaponSet
		Conditions			= None
	End

;	WeaponSet
;		Weapon				= PRIMARY RohanStructureBow
;		Conditions			= PLAYER_UPGRADE
;		AutoChooseSources	= PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
;	End

	Behavior            = GettingBuiltBehavior GetBuiltBehaviorTag
		WorkerName		  = RohanWorkerNoSelect
	End

	Body                = StructureBody ModuleTag_05
		MaxHealth         		  = ROHAN_FARM_HEALTH
		MaxHealthDamaged  		  = ROHAN_FARM_HEALTH_DAMAGED
		MaxHealthReallyDamaged 	= ROHAN_FARM_HEALTH_REALLY_DAMAGED
    
		DamageCreationList = OCL_BuildingDamageList01 CATAPULT_ROCK
    
		DamageCreationList = OCL_GBFarm_Chunk1 CATAPULT_ROCK FRONT_DESTROYED
		DamageCreationList = OCL_GBFarm_Chunk2 CATAPULT_ROCK RIGHT_DESTROYED
		DamageCreationList = OCL_GBFarm_Chunk3 CATAPULT_ROCK BACK_DESTROYED
		DamageCreationList = OCL_GBFarm_Chunk4 CATAPULT_ROCK LEFT_DESTROYED
	End

	Behavior = AutoDepositUpdate AutoDepositModuleTag
		DepositTiming       = ROHAN_FARM_MONEY_TIME 	   ; in milliseconds
		DepositAmount       = ROHAN_FARM_MONEY_AMOUNT   ; cash amount to deposit every DepositTiming
		InitialCaptureBonus = 0  ; no initial bonus
	End

	Behavior = CostModifierUpgrade ModuleTag_CostModifier
		LabelForPalantirString = GUI:FOOD_DISCOUNT
		StartsActive = Yes ; Run on build complete, not upgrade
		ObjectFilter		= ANY +CAVALRY 
		Percentage		= 0%
		Percentage		= -10%
		Percentage		= -15%
		Percentage		= -20%
		Percentage		= -25%
		Percentage		= -30%
	End  

End

;------------------------------------------------------------------------------
ChildObject RohanFarmMultiplayer RohanFarm
  
	PlacementViewAngle  = 45

	BuildCost           = ROHAN_FLAG_ECONOMY_UNPACK_FARM_COST
	RefundValue			= 100 ; Half the plot cost.
  
	Behavior = ExperienceLevelCreate CreateExperienceLevel
		LevelToGrant = 2
	End
  
End

;------------------------------------------------------------------------------
;Rohan Well
Object RohanWell

	SelectPortrait = BPRWell
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day


  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
	StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD     
    DefaultModelConditionState
      Model = RBWell
      ParticleSysBone = None WellHealFX
    End
    
    
       ;------------ New Build Up States coming soon. 
    ModelConditionState   = AWAITING_CONSTRUCTION 
		Model               = RBWell_A
;		ParticleSysBone	  = NONE BuildingDoughnutCloud
    End
    AnimationState        = AWAITING_CONSTRUCTION
		Animation           =  RBWell_A
			AnimationName     =  RBWell_A.RBWell_A
			AnimationMode     = MANUAL
			AnimationBlendTime = 0
		End
		Flags				  = START_FRAME_FIRST
    End

    ModelConditionState   = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
      Model               = RBWell_A
		ParticleSysBone   = CONSTDUSTBONE01 BuildingContructDust FollowBone:Yes
    End
    
    AnimationState        = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
		Animation           = RBWell_A
			AnimationName     = RBWell_A.RBWell_A
			AnimationMode     = MANUAL
			AnimationBlendTime = 0
		End
		Flags				  = START_FRAME_FIRST
		StateName			  = BeingConstructed
		BeginScript
			CurDrawablePlaySound("GondorBarracksBeginConstruction")
		EndScript
    End
    
    ;--damaged building
    
    ModelConditionState  = DAMAGED
      Model         = RBWell_D1
		ParticleSysBone FireSmall01 SmokeBuildingSmall
		ParticleSysBone FireSmall02 SmokeBuildingSmall
    End
    AnimationState = DAMAGED
	EnteringStateFX	= FX_BuildingDamaged
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = RBWell_D2 
		ParticleSysBone FireSmall01 SmokeBuildingSmall
		ParticleSysBone FireSmall02 SmokeBuildingSmall
		ParticleSysBone FireSmall03 SmokeBuildingSmall
    End
    AnimationState = REALLYDAMAGED
	EnteringStateFX	= FX_BuildingReallyDamaged
    End

    ModelConditionState  = RUBBLE
      Model         = RBWell_D2  
       ParticleSysBone SmokeLarge01 SmokeBuildingMedium
    End
    
    AnimationState = RUBBLE
    End

    ModelConditionState  = POST_RUBBLE
		Model         = None
		ParticleSysBone NONE SmokeBuildingMediumRubble
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
		ParticleSysBone NONE SmokeBuildingMediumRubble
    End
    
    
  End

  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:RohanWell
  Description 	      = OBJECT:RohanWellDescription
  Side                = Rohan
	IsTrainable = No
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = ROHAN_WELL_BUILDCOST				
  BuildTime           = ROHAN_WELL_BUILDTIME				; in seconds
  VisionRange         = ROHAN_WELL_VISIONRANGE				; Shroud clearing distance
  ShroudClearingRange = ROHAN_WELL_SHROUDCLEAR
  BountyValue         = ROHAN_WELL_BOUNTY_VALUE	


			
  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    ;DamageFX          = StructureDamageFXNoShake
  End
  
  CommandSet = SellableCommandSet



; For Testing Purposes


; *** AUDIO Parameters ***

	VoiceSelect		= GondorWellSelect

	SoundOnDamaged		= BuildingLightDamageWood
	SoundOnReallyDamaged	= BuildingHeavyDamageWood
	SoundAmbient		= WaterFountain1AmbientLoop

	VoiceSelectUnderConstruction	= BuildingGoodVoiceSelectUnderConstruction

	UnitSpecificSounds
		UnderConstruction		= BuildingConstructionLoop  ; Built first time
		; UnderRepairFromDamage	= NoSound					; Repaired No animation on the building, so don't bother playing sound
		UnderRepairFromRubble	= BuildingConstructionLoop	; Repaired from completely destroyed (not used???)
	End
 

  ; *** ENGINEERING Parameters ***

  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE NEED_BASE_FOUNDATION MP_COUNT_FOR_VICTORY MADE_OF_STONE
 
  Behavior            = GettingBuiltBehavior GetBuiltBehaviorTag
    ;WorkerName		  = ""; instead of RohanWorker, the well builds itself
    SelfBuildingLoop = BuildingConstructionLoop ; Only played if we DON'T spawn a worker
	SelfRepairFromDamageLoop  = NoSound         ; This doesn't cause an animation, so don't bother playing a sound
	SelfRepairFromRubbleLoop  = BuildingConstructionLoop
  End

  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  CommandSet		    = RohanWellCommandSet

  Body                      = StructureBody ModuleTag_05
    MaxHealth               = ROHAN_WELL_MAXHEALTH				
    MaxHealthDamaged        = ROHAN_WELL_MAXHEALTHDAMAGED			
  	MaxHealthReallyDamaged  = ROHAN_WELL_MAXHEALTH_REALLYDAMAGED		
  End

	Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
		DestructionDelay  = 5000
	End
	  
	Behavior                  = StructureCollapseUpdate ModuleTag_StructureCollapseUpdate
		MinCollapseDelay        = 000
		MaxCollapseDelay        = 000
		CollapseDamping         = .5
		MaxShudder              = 0.6
		MinBurstDelay           = 250
		MaxBurstDelay           = 800
		BigBurstFrequency       = 4
		FXList                  = INITIAL   FX_StructureMediumCollapse
	End
 
	Behavior = PassiveAreaEffectBehavior ModuleTag_SplashOfHealingWater_Ahh
		EffectRadius		= 200 ; please update the decal size in experience lvl INI if you change this... the value there is about 2.2x the value here		
		PingDelay		= 2000;msec
		HealPercentPerSecond	= 3%
		AllowFilter		= ANY +INFANTRY +CAVALRY -MACHINE +MONSTER -IMMOBILE    
	End
 

	Behavior = CostModifierUpgrade ModuleTag_CostModifier
		LabelForPalantirString = GUI:WATER_DISCOUNT
		StartsActive = Yes ; Run on build complete, not upgrade
		ObjectFilter		= ANY +RohanPeasantHorde +RohanArcherHorde +RohanElvenWarriorHorde
		Percentage		= -0%
		Percentage		= -20%
		Percentage		= -30%
	End

	;/////////////////////////////////////////////////////////
	;// BannerCarrierUpdate module for Well Object
	;/////////////////////////////////////////////////////////
	Behavior = BannerCarrierUpdate BannerCarrierUpdateModuleTag
		IdleSpawnRate			= 5000							; spawn a new member every n seconds when idle (in miliseconds)		
		UnitSpawnFX				= FX_BannerCarrierSpawnUnit		; name of particle FX to use when the BannerCarrier spawns a new unit		

		; This well object acts like a banner carrier except it spawns unit on nearby hordes instead of itself.
		ReplenishNearbyHorde	= Yes
		ScanHordeDistance		= 200
	End
 
;  Behavior = TransitionDamageFX ModuleTag_15
;    ;-------------DESIGNED FOR SMALL SIZED FACTION BUILDING TRANSITIONS-------------------
;    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
;    ;---------------------------------------------------------------------------------------
;    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
;    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
;    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
;  End
 
 
  Geometry              = CYLINDER
  GeometryMajorRadius   = 35.6
  GeometryHeight        = 16.8
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER
  
	GeometryContactPoint	= X:-12.063		Y:30.688	Z:0			Repair
	GeometryContactPoint	= X:26.816		Y:-17.416	Z:0			Repair
	GeometryContactPoint	= X:23.753		Y:22.765	Z:0
	GeometryContactPoint	= X:-27.95		Y:-17.416	Z:0
	GeometryContactPoint	= X:0.007		Y:-0.119	Z:25.696	Swoop

End

;------------------------------------------------------------------------------
;Rohan Inner Wall
Object RohanInnerWall
 
  ; *** ART Parameters ***

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBWalls
    End
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:RohanWall
  Side                = Rohan
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160
;  ArmorSet
;    Conditions        = None
;    Armor             = StructureArmor
;    DamageFX          = StructureDamageFXNoShake
;  End


  ; *** AUDIO Parameters ***

	SoundOnDamaged		= BuildingLightDamageWood
	SoundOnReallyDamaged	= BuildingHeavyDamageWood

;  VoiceSelect         = NuclearReactorSelect
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 
  ; *** ENGINEERING Parameters ***

  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE NEED_BASE_FOUNDATION MADE_OF_WOOD
 
  Behavior            = GettingBuiltBehavior GetBuiltBehaviorTag
    WorkerName		  = RohanWorker
  End

  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  Body                = StructureBody ModuleTag_05
    MaxHealth         = 1500.0
  End

  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End

;  Behavior           = CreateObjectDie ModuleTag_08
;    CreationList     = OCL_SmallStructureDebris
;  End
 
;  Behavior = ProductionUpdate ModuleTag_10
;    ; nothing, but is required if we have any Object-level Upgrades!
;  End
 
;  Behavior = FlammableUpdate ModuleTag_14
;    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
;    AflameDamageAmount = 5       ; taking this much damage...
;    AflameDamageDelay = 500       ; this often.
;  End
 
;  Behavior = TransitionDamageFX ModuleTag_15
;    ;-------------DESIGNED FOR SMALL SIZED FACTION BUILDING TRANSITIONS-------------------
;    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
;    ;---------------------------------------------------------------------------------------
;    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
;    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
;    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
;  End
 
;  Behavior             = FXListDie ModuleTag_16
;    DeathFX       = FX_BuildingDie
;  End
 
  Geometry              = BOX
  GeometryMajorRadius   = 28.0
  GeometryMinorRadius   = 20.0
  GeometryHeight        = 24.0
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER
End

;------------------------------------------------------------------------------
;Rohan Wall
Object RohanWall
 
  ; *** ART Parameters ***
    SelectPortrait = BRCastleWall
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBWalls
    End
        
    WallBoundsMesh = wall1
        
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:RohanWall
  Side                = Rohan
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160


  ArmorSet
    Armor = StructureArmor
  End
; For Testing Purposes


  ; *** AUDIO Parameters ***

	SoundOnDamaged		= BuildingLightDamageWood
	SoundOnReallyDamaged	= BuildingHeavyDamageWood

;  VoiceSelect         = NuclearReactorSelect
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 

  ; *** ENGINEERING Parameters ***
 
  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE IMMOBILE SCORE WALK_ON_TOP_OF_WALL CHUNK_VENDOR NOT_AUTOACQUIRABLE MADE_OF_WOOD
 
  Behavior = CastleMemberBehavior ModuleTag_CMB
		CountsForEvaCastleBreached = Yes
  End 
   
  Behavior = SiegeDockingBehavior ModuleTag_SiegeDocking
  End
     
  Body                = StructureBody ModuleTag_05
    MaxHealth         = 1500.0
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0
  End

  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End
 
  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= WallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

  Geometry              = BOX
  GeometryMajorRadius   = 50.0
  GeometryMinorRadius   = 35.0
  GeometryHeight        = 60.0
  
  GeometryContactPoint =	X:-50			Y:-40				Z:0 Grab
  GeometryContactPoint =	X:0				Y:-40				Z:40 Grab
  GeometryContactPoint =	X:50			Y:-40				Z:0 Grab
  GeometryContactPoint =	X:-50			Y:40				Z:0 Grab
  GeometryContactPoint =	X:0				Y:40				Z:40 Grab
  GeometryContactPoint =	X:50			Y:40				Z:0 Grab
  
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER
End

;------------------------------------------------------------------------------------------
Object RohanCastleDoor

SelectPortrait = BPRohanCastleGate

  ; *** ART Parameters ***

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes

    DefaultModelConditionState  
      Model = RBCASTDOOR
    End

	ModelConditionState   = ACTIVELY_BEING_CONSTRUCTED 
		Model             = RBCASTDOOR_A
		ParticleSysBone   = DUSTBONE BuildingContructDust
	End
	AnimationState        = ACTIVELY_BEING_CONSTRUCTED 
		StateName				= STATE_None
			Animation           = RBCASTDOOR_A
				AnimationName   = RBCASTDOOR_A.RBCASTDOOR_A
				AnimationMode   = MANUAL
			End
		Flags					= START_FRAME_FIRST
    End

    ModelConditionState   = DESTROYED_WHILST_BEING_CONSTRUCTED
		Model			  = RBCASTDOOR_A
		ParticleSysBone   = DUSTBONE BuildingContructDust
    End  
	AnimationState	= DESTROYED_WHILST_BEING_CONSTRUCTED
		StateName		= STATE_DetroyedConstructing
		EnteringStateFX	= FX_GondorCastleGateDestroy
		Animation
			AnimationName		= RBCASTDOOR_A.RBCASTDOOR_A
			AnimationMode		= ONCE_BACKWARDS
			AnimationBlendTime	= 90	; 3 seconds * 30 frames
		End
		; Specifically no start last frame flag here.
		Flags = START_FRAME_FIRST
	End

	ModelConditionState  = RUBBLE DOOR_1_OPENING
		Model         = RBCASTDOOR_D4  
	End
	TransitionState = TRANS_IntoRubble4
		Animation = D3
			AnimationName		= RBCASTDOOR_D4.RBCASTDOOR_D4
			AnimationMode		= ONCE
			AnimationBlendTime = 0
		End
		EnteringStateFX	= FX_GondorCastleGateDestroy
	End
    AnimationState = RUBBLE DOOR_1_OPENING
		Flags = START_FRAME_LAST
		StateName = STATE_Rubble
		Animation				=	Death
			AnimationName		=	RBCASTDOOR_D4.RBCASTDOOR_D4
			AnimationMode		=	ONCE
		End
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "STATE_None" or Prev == "STATE_Open" or Prev == "STATE_Closed" or Prev == "TRANS_Closed_To_Open" or Prev == "TRANS_Open_To_Closed"
			then
				; Only play the rubble anim if we havn't come from another rubble.
				CurDrawableSetTransitionAnimState("TRANS_IntoRubble4")
			end
		EndScript
    End      

	ModelConditionState  = RUBBLE DOOR_1_CLOSING
		Model         = RBCASTDOOR_D3
	End
	TransitionState = TRANS_IntoRubble3
		Animation = D4
			AnimationName		= RBCASTDOOR_D3.RBCASTDOOR_D3
			AnimationMode		= ONCE
			AnimationBlendTime = 0
		End
		EnteringStateFX	= FX_GondorCastleGateDestroy
	End
    AnimationState = RUBBLE DOOR_1_CLOSING
		Flags = START_FRAME_LAST
		StateName = STATE_Rubble
		Animation				=	Death
			AnimationName		=	RBCASTDOOR_D3.RBCASTDOOR_D3
			AnimationMode		=	ONCE
		End
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "STATE_None" or Prev == "STATE_Open" or Prev == "STATE_Closed" or Prev == "TRANS_Closed_To_Open" or Prev == "TRANS_Open_To_Closed"
			then
				; Only play the rubble anim if we havn't come from another rubble.
				CurDrawableSetTransitionAnimState("TRANS_IntoRubble3")
			end
		EndScript
    End      

;    ModelConditionState  = RUBBLE DOOR_1_OPENING
;      Model         = RBCASTDOOR_D4  
;    End
;	AnimationState = RUBBLE DOOR_1_OPENING
;		Animation = Open 
;			AnimationName	=	RBCASTDOOR_D4.RBCASTDOOR_D4
;			AnimationMode	=	ONCE 
;		End
 ;   End
       
;	ModelConditionState  = RUBBLE
;		Model         = RBCASTDOOR_D3 
;		ParticleSysBone NONE CatapultDestroyDebris
;		ParticleSysBone NONE PCTMediumDust 
 ;   End
 ;	AnimationState = RUBBLE 
;		Animation = Open 
;			AnimationName	=	RBCASTDOOR_D3.RBCASTDOOR_D3
;			AnimationMode	=	ONCE 
;		End
 ;   End
    
	AnimationState = DOOR_1_OPENING
		StateName = STATE_Open   
		Animation = Open 
			AnimationName	=	RBCASTDOOR.RBCASTDOOR
			AnimationMode	=	ONCE 
			AnimationBlendTime = 0
		End
		Flags = START_FRAME_LAST
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "STATE_Closed" then CurDrawableSetTransitionAnimState("TRANS_Closed_To_Open") end
		EndScript
    End
    TransitionState = TRANS_Closed_To_Open
		Animation = Open 
			AnimationName	=	RBCASTDOOR.RBCASTDOOR
			AnimationMode	=	ONCE 
		End
    End
        
	AnimationState = DOOR_1_CLOSING 
		StateName = STATE_Closed 
		Animation = Close 
			AnimationName	=	RBCASTDOOR.RBCASTDOOR
			AnimationMode	=	ONCE_BACKWARDS 
			AnimationBlendTime = 0
		End
		Flags = START_FRAME_FIRST
		BeginScript
			
			Prev = CurDrawablePrevAnimationState()
			if Prev == "STATE_Open" then CurDrawableSetTransitionAnimState("TRANS_Open_To_Closed") end
		EndScript
    End
    TransitionState = TRANS_Open_To_Closed
		Animation = Open 
			AnimationName	=	RBCASTDOOR.RBCASTDOOR
			AnimationMode	=	ONCE_BACKWARDS 
		End
		Flags = START_FRAME_LAST
    End

  End

  ; *** AUDIO Parameters ***

	VoiceSelect		= GateSelect

	SoundOnDamaged		= BuildingLightDamageWood
	SoundOnReallyDamaged	= BuildingHeavyDamageWood


  ; ***DESIGN parameters ***

  DisplayName      = OBJECT:RohanCastleDoor
  Side = Rohan
  EditorSorting   = STRUCTURE
  ThreatLevel = 1.0
	BuildTime           = 180.0           ; in seconds
        BuildCost           = 1000

  VisionRange         = 400.0          ; Shroud clearing distance

  ArmorSet
    Conditions        = None
    Armor             = CastleGateArmor
    DamageFX          = GateDamageFX
  End

	CommandSet = CastleGateCommandSet


	; *** ENGINEERING Parameters ***  
	KindOf					= STRUCTURE IMMOBILE SELECTABLE BLOCKING_GATE MADE_OF_WOOD
	RadarPriority			= NOT_ON_RADAR
	KeepSelectableWhenDead	= Yes


	Body                  = ActiveBody ModuleTag_02
		MaxHealth       = 3000.0
	End

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
  Behavior = KeepObjectDie ModuleTag_IWantRubble
  End

	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		MaxUpdateRangeCap = 800
		AnimationSound = Sound: MinisTirithGateDie Animation:GBMgatedoorSKL.GBMgatedoorA3 Frames: 1 
	End

	Behavior = GettingBuiltBehavior ModuleTag_GettingBuilt
	    SelfBuildingLoop = BuildingConstructionLoop ; Only played if we DON'T spawn a worker
		SelfRepairFromDamageLoop  = NoSound         ; This doesn't cause an animation, so don't bother playing a sound
		SelfRepairFromRubbleLoop  = BuildingConstructionLoop
		SpawnTimer = -1.0 ; Negative means no 'autoheal'
		RebuildTimeSeconds = 120 ;30
	End

	Behavior = TransitionDamageFX ModleTag_hideBustedDoors
		PristineShowSubObject		RBCASTDRR RBCASTDRL
		PristineHideSubObject		RBCASTDRR_D1 RBCASTDRR_D2 RBCASTDRL_D1 RBCASTDRL_D2
		DamagedShowSubObject		RBCASTDRR_D1 RBCASTDRL_D1
		DamagedHideSubObject		RBCASTDRR_D2 RBCASTDRL_D2 RBCASTDRR RBCASTDRL
		ReallyDamagedShowSubObject	RBCASTDRR_D2 RBCASTDRL_D2
		ReallyDamagedHideSubObject  RBCASTDRR_D1  RBCASTDRL_D1 RBCASTDRR RBCASTDRL
        DamagedFXList1 = Loc: X:0 Y:0 Z:0			FXList:FX_BasicSevereScreenShake
 	    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0		FXList:FX_BasicSevereScreenShake
 	    RubbleFXList1 = Loc: X:0 Y:0 Z:0			FXList:FX_HelmsDeepGateRubble
	End

	Behavior = GateOpenAndCloseBehavior ModuleTag_GATE
		ResetTimeInMilliseconds = 12200 ;important! this must be longer than the gates animation, ir it will twitch
		OpenByDefault = Yes
		PercentOpenForPathing = 50
		SoundOpeningGateLoop = GateOpenStart
		SoundClosingGateLoop = GateCloseStart
		SoundFinishedOpeningGate = GateOpenEnd
		SoundFinishedClosingGate = GateCloseEnd
		TimeBeforePlayingOpenSound = 9500
		TimeBeforePlayingClosedSound = 9500
	End

    Behavior = CastleMemberBehavior ModuleTag_CMB
		CountsForEvaCastleBreached = Yes
    End 

	Geometry              = BOX
	GeometryMajorRadius   = 16.0
	GeometryMinorRadius   = 72.0
	GeometryHeight        = 59.0
	GeometryName          = Closed
	GeometryIsSmall       = No
	
	
	AdditionalGeometry    = BOX
	GeometryMajorRadius   = 28.0
	GeometryMinorRadius   = 7.0
	GeometryHeight        = 59.0	
	GeometryOffset		  = X:18 Y:70 Z:0
	GeometryName          = OpenLeft
	
	AdditionalGeometry    = BOX
	GeometryMajorRadius   = 28.0
	GeometryMinorRadius   = 7.0
	GeometryHeight        = 59.0	
	GeometryOffset		  = X:18 Y:-70 Z:0
	GeometryName          = OpenRight
	
	GeometryContactPoint = X:36		Y:-72	Z:0 Ram
	GeometryContactPoint = X:18		Y:-72	Z:59
	GeometryContactPoint = X:0		Y:-72	Z:0
	GeometryContactPoint = X:0		Y:-36	Z:59
	GeometryContactPoint = X:0		Y:0		Z:0 Ram
	GeometryContactPoint = X:0		Y:36	Z:59
	GeometryContactPoint = X:0		Y:72	Z:0
	GeometryContactPoint = X:18		Y:72	Z:59
	GeometryContactPoint = X:36		Y:72	Z:0 Ram

	Shadow                = SHADOW_VOLUME
End

;------------------------------------------------------------------------------------------
Object RohanEdorasDoor

SelectPortrait = BPRohanCastleGate

  ; *** ART Parameters ***

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes

    DefaultModelConditionState  
      Model = RBEdorDoor
    End

	ModelConditionState   = ACTIVELY_BEING_CONSTRUCTED 
		Model             = RBEdorDoor_A
		ParticleSysBone   = DUSTBONE BuildingContructDust
	End
	AnimationState        = ACTIVELY_BEING_CONSTRUCTED 
		StateName				= STATE_None
			Animation           = RBEdorDoor_A
				AnimationName   = RBEdorDoor_A.RBEdorDoor_A
				AnimationMode   = MANUAL
			End
		Flags					= START_FRAME_FIRST
    End

    ModelConditionState   = DESTROYED_WHILST_BEING_CONSTRUCTED
		Model			  = RBEdorDoor_A
		ParticleSysBone   = DUSTBONE BuildingContructDust
    End  
	AnimationState	= DESTROYED_WHILST_BEING_CONSTRUCTED
		StateName		= STATE_DetroyedConstructing
		EnteringStateFX	= FX_GondorCastleGateDestroy
		Animation
			AnimationName		= RBEdorDoor_A.RBEdorDoor_A
			AnimationMode		= ONCE_BACKWARDS
			AnimationBlendTime	= 90	; 3 seconds * 30 frames
		End
		; Specifically no start last frame flag here.
		Flags = START_FRAME_FIRST
	End

	ModelConditionState  = RUBBLE DOOR_1_OPENING
		Model         = RBEdorDoor_D4  
	End
	TransitionState = TRANS_IntoRubble4
		Animation = D3
			AnimationName		= RBEdorDoor_D4.RBEdorDoor_D4
			AnimationMode		= ONCE
			AnimationBlendTime = 0
		End
		EnteringStateFX	= FX_GondorCastleGateDestroy
	End
    AnimationState = RUBBLE DOOR_1_OPENING
		Flags = START_FRAME_LAST
		StateName = STATE_Rubble
		Animation				=	Death
			AnimationName		=	RBEdorDoor_D4.RBEdorDoor_D4
			AnimationMode		=	ONCE
		End
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "STATE_None" or Prev == "STATE_Open" or Prev == "STATE_Closed" or Prev == "TRANS_Closed_To_Open" or Prev == "TRANS_Open_To_Closed"
			then
				; Only play the rubble anim if we havn't come from another rubble.
				CurDrawableSetTransitionAnimState("TRANS_IntoRubble4")
			end
		EndScript
    End      

	ModelConditionState  = RUBBLE DOOR_1_CLOSING
		Model         = RBEdorDoor_D3
	End
	TransitionState = TRANS_IntoRubble3
		Animation = D4
			AnimationName		= RBEdorDoor_D3.RBEdorDoor_D3
			AnimationMode		= ONCE
			AnimationBlendTime = 0
		End
		EnteringStateFX	= FX_GondorCastleGateDestroy
	End
    AnimationState = RUBBLE DOOR_1_CLOSING
		Flags = START_FRAME_LAST
		StateName = STATE_Rubble
		Animation				=	Death
			AnimationName		=	RBEdorDoor_D3.RBEdorDoor_D3
			AnimationMode		=	ONCE
		End
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "STATE_None" or Prev == "STATE_Open" or Prev == "STATE_Closed" or Prev == "TRANS_Closed_To_Open" or Prev == "TRANS_Open_To_Closed"
			then
				; Only play the rubble anim if we havn't come from another rubble.
				CurDrawableSetTransitionAnimState("TRANS_IntoRubble3")
			end
		EndScript
    End      

;    ModelConditionState  = RUBBLE DOOR_1_OPENING
;      Model         = RBEdorDoor_D4  
;    End
;	AnimationState = RUBBLE DOOR_1_OPENING
;		Animation = Open 
;			AnimationName	=	RBEdorDoor_D4.RBEdorDoor_D4
;			AnimationMode	=	ONCE 
;		End
 ;   End
       
;	ModelConditionState  = RUBBLE
;		Model         = RBEdorDoor_D3 
;		ParticleSysBone NONE CatapultDestroyDebris
;		ParticleSysBone NONE PCTMediumDust 
 ;   End
 ;	AnimationState = RUBBLE 
;		Animation = Open 
;			AnimationName	=	RBEdorDoor_D3.RBEdorDoor_D3
;			AnimationMode	=	ONCE 
;		End
 ;   End
    
	AnimationState = DOOR_1_OPENING
		StateName = STATE_Open   
		Animation = Open 
			AnimationName	=	RBEdorDoor.RBEdorDoor
			AnimationMode	=	ONCE 
			AnimationBlendTime = 0
		End
		Flags = START_FRAME_LAST
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "STATE_Closed" then CurDrawableSetTransitionAnimState("TRANS_Closed_To_Open") end
		EndScript
    End
    TransitionState = TRANS_Closed_To_Open
		Animation = Open 
			AnimationName	=	RBEdorDoor.RBEdorDoor
			AnimationMode	=	ONCE 
		End
    End
        
	AnimationState = DOOR_1_CLOSING 
		StateName = STATE_Closed 
		Animation = Close 
			AnimationName	=	RBEdorDoor.RBEdorDoor
			AnimationMode	=	ONCE_BACKWARDS 
			AnimationBlendTime = 0
		End
		Flags = START_FRAME_FIRST
		BeginScript
			
			Prev = CurDrawablePrevAnimationState()
			if Prev == "STATE_Open" then CurDrawableSetTransitionAnimState("TRANS_Open_To_Closed") end
		EndScript
    End
    TransitionState = TRANS_Open_To_Closed
		Animation = Open 
			AnimationName	=	RBEdorDoor.RBEdorDoor
			AnimationMode	=	ONCE_BACKWARDS 
		End
		Flags = START_FRAME_LAST
    End

  End

  ; *** AUDIO Parameters ***

	VoiceSelect		= GateSelect

	SoundOnDamaged		= BuildingLightDamageWood
	SoundOnReallyDamaged	= BuildingHeavyDamageWood


  ; ***DESIGN parameters ***

  DisplayName      = OBJECT:RohanCastleDoor
  Side = Rohan
  EditorSorting   = STRUCTURE
  ThreatLevel = 1.0
	BuildTime           = 180.0           ; in seconds
        BuildCost           = 1000

  VisionRange         = 400.0          ; Shroud clearing distance

  ArmorSet
    Conditions        = None
    Armor             = CastleGateArmor
    DamageFX          = GateDamageFX
  End

	CommandSet = CastleGateCommandSet


	; *** ENGINEERING Parameters ***  
	KindOf					= STRUCTURE IMMOBILE SELECTABLE BLOCKING_GATE MADE_OF_WOOD
	RadarPriority			= NOT_ON_RADAR
	KeepSelectableWhenDead	= Yes


	Body                  = ActiveBody ModuleTag_02
		MaxHealth       = 3000.0
	End

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
  Behavior = KeepObjectDie ModuleTag_IWantRubble
  End

	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		MaxUpdateRangeCap = 800
		AnimationSound = Sound: MinisTirithGateDie Animation:GBMgatedoorSKL.GBMgatedoorA3 Frames: 1 
	End

	Behavior = GettingBuiltBehavior ModuleTag_GettingBuilt
	    SelfBuildingLoop = BuildingConstructionLoop ; Only played if we DON'T spawn a worker
		SelfRepairFromDamageLoop  = NoSound         ; This doesn't cause an animation, so don't bother playing a sound
		SelfRepairFromRubbleLoop  = BuildingConstructionLoop
		SpawnTimer = -1.0 ; Negative means no 'autoheal'
	End

	Behavior = TransitionDamageFX ModleTag_hideBustedDoors
		PristineShowSubObject		RBCASTDRR RBCASTDRL
		PristineHideSubObject		RBCASTDRR_D1 RBCASTDRR_D2 RBCASTDRL_D1 RBCASTDRL_D2
		DamagedShowSubObject		RBCASTDRR_D1 RBCASTDRL_D1
		DamagedHideSubObject		RBCASTDRR_D2 RBCASTDRL_D2 RBCASTDRR RBCASTDRL
		ReallyDamagedShowSubObject	RBCASTDRR_D2 RBCASTDRL_D2
		ReallyDamagedHideSubObject  RBCASTDRR_D1  RBCASTDRL_D1 RBCASTDRR RBCASTDRL
        DamagedFXList1 = Loc: X:0 Y:0 Z:0			FXList:FX_BasicSevereScreenShake
 	    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0		FXList:FX_BasicSevereScreenShake
 	    RubbleFXList1 = Loc: X:0 Y:0 Z:0			FXList:FX_HelmsDeepGateRubble
	End

	Behavior = GateOpenAndCloseBehavior ModuleTag_GATE
		ResetTimeInMilliseconds = 12200 ;important! this must be longer than the gates animation, ir it will twitch
		OpenByDefault = Yes
		PercentOpenForPathing = 50
		SoundOpeningGateLoop = GateOpenStart
		SoundClosingGateLoop = GateCloseStart
		SoundFinishedOpeningGate = GateOpenEnd
		SoundFinishedClosingGate = GateCloseEnd
		TimeBeforePlayingOpenSound = 9500
		TimeBeforePlayingClosedSound = 9500
	End

    Behavior = CastleMemberBehavior ModuleTag_CMB
		CountsForEvaCastleBreached = Yes
    End 

	Geometry              = BOX
	GeometryMajorRadius   = 12.0
	GeometryMinorRadius   = 112.5
	GeometryHeight        = 70.0
	GeometryOffset		  = X:20.75 Y:0 Z:0
	GeometryName          = Closed
	GeometryIsSmall       = No
	
	
	AdditionalGeometry    = BOX
	GeometryMajorRadius   = 56.0
	GeometryMinorRadius   = 12.0
	GeometryHeight        = 70.0	
	GeometryOffset		  = X:72 Y:-110 Z:0
	GeometryName          = OpenLeft
	
	AdditionalGeometry    = BOX
	GeometryMajorRadius   = 56.0
	GeometryMinorRadius   = 12.0
	GeometryHeight        = 70.0	
	GeometryOffset		  = X:72 Y:110 Z:0
	GeometryName          = OpenRight
	
	GeometryContactPoint = X:36		Y:-72	Z:0 Ram
	GeometryContactPoint = X:18		Y:-72	Z:59
	GeometryContactPoint = X:0		Y:-72	Z:0
	GeometryContactPoint = X:0		Y:-36	Z:59
	GeometryContactPoint = X:0		Y:0		Z:0 Ram
	GeometryContactPoint = X:0		Y:36	Z:59
	GeometryContactPoint = X:0		Y:72	Z:0
	GeometryContactPoint = X:18		Y:72	Z:59
	GeometryContactPoint = X:36		Y:72	Z:0 Ram

	Shadow                = SHADOW_VOLUME
End

;------------------------------------------------------------------------------
;Rohan Gate
Object RohanGate
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBGate
    End
; remove this so the units can walk under the gate, but not on top of it    
;    WallBoundsMesh = wall1
    RampMesh1 = P1   
    RampMesh2 = P2 
	RaisedWallMesh = P3        
  End
 
  PlacementViewAngle  = 0
 

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:RohanGate
  Side                = Rohan
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 30.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160

  ArmorSet
    Armor = StructureArmor
  End

  ; *** AUDIO Parameters ***

	SoundOnDamaged		= BuildingLightDamageWood
	SoundOnReallyDamaged	= BuildingHeavyDamageWood

;  VoiceSelect         = NuclearReactorSelect
;  SoundOnDamaged        = BuildingDamagedStateLight
;  SoundOnReallyDamaged  = BuildingDestroy
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End


  ; *** ENGINEERING Parameters ***
  RadarPriority       = STRUCTURE
  KindOf              = STRUCTURE IMMOBILE CHUNK_VENDOR NOT_AUTOACQUIRABLE WALK_ON_TOP_OF_WALL MADE_OF_WOOD

  Behavior = CastleMemberBehavior ModuleTag_CMB
		CountsForEvaCastleBreached = Yes
  End 

  Body                = StructureBody ModuleTag_05
    MaxHealth         = 2500.0
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0
  End

  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End



  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= WallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	


  Geometry              = BOX
  GeometryMajorRadius   = 80.0
  GeometryMinorRadius   = 25.0
  GeometryHeight        = 40.0
  GeometryOffset		= X:0 Y:0 Z:72
    
  AdditionalGeometry    = BOX
  GeometryMajorRadius   = 30.0
  GeometryMinorRadius   = 70.0
  GeometryHeight        = 80	
  GeometryOffset		= X:100 Y:-10 Z:0

  AdditionalGeometry    = BOX
  GeometryMajorRadius   = 30.0
  GeometryMinorRadius   = 70.0
  GeometryHeight        = 80	
  GeometryOffset		= X:-100 Y:-10 Z:0

  
  GeometryContactPoint =	X:75		Y:-60				Z:0 
  GeometryContactPoint =	X:105		Y:-78				Z:0 Grab
  GeometryContactPoint =	X:75		Y:0					Z:60
  GeometryContactPoint =	X:-75		Y:0					Z:60
  GeometryContactPoint =	X:-105		Y:-78				Z:0 Grab
  GeometryContactPoint =	X:-75		Y:-60				Z:0 
  
  
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
End


;------------------------------------------------------------------------------
;Rohan Wall Junction I
Object RohanWallJntI
 
  ; *** ART Parameters ***
SelectPortrait = BRCastleWall
;  ButtonImage            = SNReactor
  ;day


  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBWallJntI
    End
    
    WallBoundsMesh = wall1
    
  End


  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:RohanWall
  Side                = Rohan
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160

  ArmorSet
    Armor = StructureArmor
  End
  
  CommandSet = EmptyCommandSet


  ; *** AUDIO Parameters ***

	SoundOnDamaged		= BuildingLightDamageWood
	SoundOnReallyDamaged	= BuildingHeavyDamageWood


;  VoiceSelect         = NuclearReactorSelect
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End


  ; *** ENGINEERING Parameters ***

  RadarPriority       = STRUCTURE
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR NOT_AUTOACQUIRABLE MADE_OF_WOOD

  Behavior = CastleMemberBehavior ModuleTag_CMB
		CountsForEvaCastleBreached = Yes
  End 

  Body                = StructureBody ModuleTag_05
    MaxHealth         = 3000.0
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0
  End

  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End

  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= WallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

  Geometry              = BOX
  GeometryMajorRadius   = 45.6
  GeometryMinorRadius   = 37.6
  GeometryHeight        = 20.8
  GeometryIsSmall       = No
  
  GeometryContactPoint =	X:0			Y:0				Z:18 
  GeometryContactPoint =	X:0			Y:0				Z:0 
  GeometryContactPoint =	X:45		Y:0				Z:0 Grab
  GeometryContactPoint =	X:-45		Y:0				Z:0 Grab
  GeometryContactPoint =	X:0			Y:45			Z:0 Grab
  GeometryContactPoint =	X:0		Y:-45				Z:0 Grab
  
  Shadow                = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER
End



;------------------------------------------------------------------------------
;Rohan Wall Junction 0
Object RohanWallJntO
 
  ; *** ART Parameters ***
SelectPortrait = BRCastleWall
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBWallJntO
    End
    
    WallBoundsMesh = wall1
        
  End


  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:RohanWall
  Side                = Rohan
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160

  ArmorSet
    Armor = StructureArmor
  End
  
  CommandSet = EmptyCommandSet


  ; *** AUDIO Parameters ***

	SoundOnDamaged		= BuildingLightDamageWood
	SoundOnReallyDamaged	= BuildingHeavyDamageWood


;  VoiceSelect         = NuclearReactorSelect
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End


  ; *** ENGINEERING Parameters ***

  RadarPriority       = STRUCTURE
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE MADE_OF_WOOD
 
  Behavior = CastleMemberBehavior ModuleTag_CMB
		CountsForEvaCastleBreached = Yes
  End 

  Body                = StructureBody ModuleTag_05
    MaxHealth         = 3000.0
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0
  End

  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End

  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= WallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

  Geometry              = BOX
  GeometryMajorRadius   = 35.0
  GeometryMinorRadius   = 35.0
  GeometryHeight        = 60.0
  
  GeometryContactPoint =	X:0			Y:0				Z:50 
  GeometryContactPoint =	X:0			Y:0				Z:0 
  GeometryContactPoint =	X:45		Y:0				Z:0 Grab
  GeometryContactPoint =	X:-45		Y:0				Z:0 Grab
  GeometryContactPoint =	X:0			Y:45			Z:0 Grab
  GeometryContactPoint =	X:0		Y:-45				Z:0 Grab
  GeometryIsSmall       = No
  
  Shadow                = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER
End


;------------------------------------------------------------------------------
;Rohan Wall Elevator
Object RohanWallElev
 
  ; *** ART Parameters ***
SelectPortrait = BRCastleWall
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_01

		ExtraPublicBone = Elev01
		ExtraPublicBone = Elev02
		ExtraPublicBone = Elev03
;		ExtraPublicBone = Elev04
;		ExtraPublicBone = Elev05

    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBWallElev
    End
    
    WallBoundsMesh = P1
        
  End
 


  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:RohanWall
  Side                = Rohan
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160

  ArmorSet
    Conditions = None
    Armor = StructureArmor
  End
  
  CommandSet = EmptyCommandSet


  ; *** AUDIO Parameters ***

	SoundOnDamaged		= BuildingLightDamageWood
	SoundOnReallyDamaged	= BuildingHeavyDamageWood


;  VoiceSelect         = NuclearReactorSelect

;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End


  ; *** ENGINEERING Parameters ***

	KindOf				= STRUCTURE SELECTABLE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR NOT_AUTOACQUIRABLE MADE_OF_WOOD
	RadarPriority		= STRUCTURE
	
	Body				= ActiveBody ModuleTag_02
		MaxHealth		= 3000.0
		
		GrabObject = EntThrownBuildingRock
		GrabFX = FX_WallGrab
		GrabDamage = 490
		GrabOffset = X:16 Y:0
	End
	
	Behavior = DynamicPortalBehaviour Portal
		GenerateNow		= Yes
		AllowKindOf		= INFANTRY
		RejectKindOf	= MONSTER MACHINE CAVALRY ARMY_OF_DEAD		
		BonePrefix		= Elev
		NumberOfBones	= 3
		
		WayPoint		= Index:0	Type:Walk		; 0
		WayPoint		= Index:1	Type:Walk		; 1
		WayPoint		= Index:2	Type:Walk		; 2
		WayPoint		= Index:3	Type:Walk		; 3	top right
		WayPoint		= Index:2	Type:Walk		; 4
		WayPoint		= Index:1	Type:Walk		; 5

;		WayPoint		= Index:0	Type:Walk		; 6
;		WayPoint		= Index:1	Type:Walk		; 7
;		WayPoint		= Index:2	Type:Walk		; 8
;		WayPoint		= Index:4	Type:Walk		; 9 top left
;		WayPoint		= Index:2	Type:Walk		; 10
;		WayPoint		= Index:1	Type:Walk		; 11

		Link			= From:0 Via:5 To:2	; up, to centre
		Link			= From:2 Via:1 To:0	; down, from centre

;		Link			= From:0 Via:4 Via:5 To:3	; up, to right
;		Link			= From:3 Via:1 Via:2 To:0	; down, from right

;		Link			= From:6 Via:10 Via:11 To:9	; up, to left
;		Link			= From:9 Via:7 Via:8 To:6	; down, from left
	End

  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= WallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

	Geometry						= BOX
	GeometryMajorRadius				= 50.0
	GeometryMinorRadius				= 44.0
	GeometryHeight					= 76.0
	GeometryIsSmall					= No
	
	GeometryContactPoint =	X:0			Y:0				Z:70 
	GeometryContactPoint =	X:0			Y:0				Z:0 
	GeometryContactPoint =	X:45		Y:0				Z:0 Grab
	GeometryContactPoint =	X:-45		Y:0				Z:0 Grab
	GeometryContactPoint =	X:0			Y:55			Z:0 Grab
	GeometryContactPoint =	X:0		Y:-45				Z:0 Grab
  
	Shadow							= SHADOW_VOLUME
End

;------------------------------------------------------------------------------
;Rohan Wall Angl15
Object RohanWallAngl15
 
  ; *** ART Parameters ***
SelectPortrait = BRCastleWall
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBWalls15
    End
    
    WallBoundsMesh = P1
        
  End


  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:RohanWall
  Side                = Rohan
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160

  ArmorSet
    Conditions        = None
    Armor             = RohanCastleWall
    DamageFX          = RohanWallDamageFX
  End
  
  CommandSet = EmptyCommandSet


; *** AUDIO Parameters ***

	SoundOnDamaged		= BuildingLightDamageWood
	SoundOnReallyDamaged	= BuildingHeavyDamageWood


;  VoiceSelect         = NuclearReactorSelect
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End


  ; *** ENGINEERING Parameters ***

  RadarPriority = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE MADE_OF_WOOD
 
  Behavior = CastleMemberBehavior ModuleTag_CMB
		CountsForEvaCastleBreached = Yes
  End 

  Body                = StructureBody ModuleTag_05
    MaxHealth         = ROHAN_CASTLE_WALL_HEALTH
  End

  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End

  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= WallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

  Geometry              = BOX
  GeometryMajorRadius   = 35.0
  GeometryMinorRadius   = 35.0
  GeometryHeight        = 60.0
	
  GeometryContactPoint =	X:0			Y:0				Z:18 
  GeometryContactPoint =	X:0			Y:0				Z:0 
  GeometryContactPoint =	X:0			Y:-45				Z:0 Grab
  GeometryContactPoint =	X:0			Y:45				Z:0 Grab
  	
	
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER
End

;------------------------------------------------------------------------------
;Rohan Wall Tower
Object RohanWallTower
 
  ; *** ART Parameters ***
SelectPortrait = BRCastleWall
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBWallTwr
    End
    
    WallBoundsMesh = wall1
    RampMesh1 = ramp1   
    RampMesh2 = ramp2 
    
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:RohanWallTower
  Side                = Rohan
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160

  ArmorSet
    Conditions = None
    Armor = StructureArmor
  End
  
  CommandSet = EmptyCommandSet


; *** AUDIO Parameters ***

	SoundOnDamaged		= BuildingLightDamageWood
	SoundOnReallyDamaged	= BuildingHeavyDamageWood


;  VoiceSelect         = NuclearReactorSelect
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End


  ; *** ENGINEERING Parameters ***
  RadarPriority       = STRUCTURE
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR NOT_AUTOACQUIRABLE MADE_OF_WOOD
  
  Behavior = CastleMemberBehavior ModuleTag_CMB
		CountsForEvaCastleBreached = No ; ??? Can't figure out where this used...
  End 

  Body                = StructureBody ModuleTag_05
    MaxHealth         = 3000.0
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0
  End

  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End

  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= WallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

  Geometry              = BOX
  GeometryMajorRadius   = 18.0
  GeometryMinorRadius   = 47.0
  GeometryHeight        = 92.0
  
  GeometryContactPoint =	X:-28		Y:45			Z:0 Grab
  GeometryContactPoint =	X:28		Y:45			Z:0 Grab
  GeometryContactPoint =	X:0			Y:0				Z:85 Grab
  GeometryContactPoint =	X:0			Y:0				Z:0 Grab
  GeometryContactPoint =	X:-28		Y:-45			Z:0 Grab
  GeometryContactPoint =	X:28		Y:-45			Z:0 Grab
  
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
End


;------------------------------------------------------------------------------
Object RohanHelmsDeepKeep

	SelectPortrait = BPRHelmsDeep

	
  ; *** ART Parameters ***
;  Draw = W3DModelDraw ModuleTag_01
;    OkToChangeModelColor = Yes
;  
;    ConditionState = NONE
;      Model = GBFSTower
;    End
;    ExtraPublicBone = Ramp01
;    ExtraPublicBone = Ramp02
;    ExtraPublicBone = Ramp03
;    WallBoundsMesh = P1
;    EmbedPortal = ramp Ramp
;  End
  
  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    ExtraPublicBone = Ramp01
    ExtraPublicBone = Ramp02
    ExtraPublicBone = Ramp03
    WallBoundsMesh  = P1
    ;;;;EmbedPortal = ramp Ramp  ;;; not yet supported in W3DScriptedModelDraw 
    DefaultModelConditionState
      Model = GBFSTower
    End
  End


  ; *** AUDIO Parameters ***

	SoundOnDamaged		= BuildingLightDamageWood
	SoundOnReallyDamaged	= BuildingHeavyDamageWood

;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End


  ; ***DESIGN parameters ***

  DisplayName      = OBJECT:RohanHelmsDeepKeep
  Side = Rohan
  EditorSorting   = STRUCTURE
  ThreatLevel = 1.0

  ArmorSet
    Conditions        = None
    Armor             = NoArmor
    DamageFX          = None
  End

  ; *** ENGINEERING Parameters ***  
  KindOf            = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE MADE_OF_STONE
  RadarPriority		= STRUCTURE
  Body              = ActiveBody ModuleTag_02
		MaxHealth       = 2000.0
    
		GrabObject = EntThrownBuildingRock
		GrabFX = FX_WallGrab
		GrabDamage = 490
		GrabOffset = X:16 Y:0
  End

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
  Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 5000
  End
  
  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= WallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

  Geometry              = BOX
  GeometryMajorRadius   = 36.0
  GeometryMinorRadius   = 36.0
  GeometryHeight        = 88.0
  GeometryIsSmall       = No
  GeometryRotationAnchorOffset = X:372.9936 Y:0.0
  Shadow                = SHADOW_VOLUME
End

;------------------------------------------------------------------------------------------
;Rohan Battle Tower
Object RohanBattleTower

SelectPortrait = BPRBattleTower

  	; *** ART Parameters ***
	ButtonImage = BRBattleTower
	  
	; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_Draw
  
	ExtraPublicBone	= ARROWBONE01
	ExtraPublicBone	= ARROWBONE02
	ExtraPublicBone	= ARROWBONE03
	ExtraPublicBone	= ARROWBONE04
	ExtraPublicBone	= ARROWBONE05
	ExtraPublicBone	= ARROWBONE06
	ExtraPublicBone	= ARROWBONE07
	ExtraPublicBone	= ARROWBONE08
	ExtraPublicBone	= ARROWBONE09
	ExtraPublicBone	= ARROWBONE10
	ExtraPublicBone	= ARROWBONE11
	ExtraPublicBone	= ARROWBONE12
	ExtraPublicBone	= ARROWBONE13
	ExtraPublicBone	= ARROWBONE14
	ExtraPublicBone	= ARROWBONE15
	ExtraPublicBone	= ARROWBONE16
	
    StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD  
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBWatchTow
    End
    
     ;------------ build up states---------------
    ModelConditionState   = AWAITING_CONSTRUCTION 
      Model               = RBWatchTow_A
;		ParticleSysBone	  = NONE BuildingDoughnutCloud
    End;
    AnimationState        = AWAITING_CONSTRUCTION
      Animation           =  RBWatchTow_A
        AnimationName     =  RBWatchTow_ASKL.RBWatchTow_ABLD
        AnimationMode     = MANUAL
        AnimationBlendTime = 0
      End
	  Flags				  = START_FRAME_FIRST
    End

    ModelConditionState   = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
      Model               = RBWatchTow_A
		ParticleSysBone   = CONSTDUSTBONE01 BuildingContructDust FollowBone:Yes
    End;
    AnimationState        = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
		Animation           = RBWatchTow_A
			AnimationName     = RBWatchTow_ASKL.RBWatchTow_ABLD
			AnimationMode     = MANUAL
			AnimationBlendTime = 0
		End
		Flags				  = START_FRAME_FIRST
		StateName			  = BeingConstructed
		BeginScript
			CurDrawablePlaySound("GondorBarracksBeginConstruction")
		EndScript
    End
    
    
    
       ;--damaged building
    ModelConditionState  = DESTROYED_FRONT
      Model         = RBWatchTow_D2 
		ParticleSysBone FireSmall01 FireBuildingLarge
		ParticleSysBone FireSmall02 FireBuildingLarge
		ParticleSysBone FireSmall03 FireBuildingMedium
		ParticleSysBone FireSmall04 FireBuildingLarge
		ParticleSysBone FireSmall05 SmokeBuildingLarge
    End
    AnimationState = DESTROYED_FRONT
      BeginScript
        CurDrawableHideSubObject("RBWatchTowDP_1")
      EndScript
    End
    
        ModelConditionState  = DESTROYED_RIGHT
      Model         =  RBWatchTow_D2 
		ParticleSysBone FireSmall01 FireBuildingLarge
		ParticleSysBone FireSmall02 FireBuildingLarge
		ParticleSysBone FireSmall03 FireBuildingMedium
		ParticleSysBone FireSmall04 FireBuildingLarge
		ParticleSysBone FireSmall05 SmokeBuildingLarge
    End

    AnimationState = DESTROYED_RIGHT
      BeginScript
        CurDrawableHideSubObject("RBWatchTowDP_2")
      EndScript
    End
    

    ModelConditionState  = DESTROYED_BACK
      Model         =  RBWatchTow_D2   
		ParticleSysBone FireSmall01 FireBuildingLarge
		ParticleSysBone FireSmall02 FireBuildingLarge
		ParticleSysBone FireSmall03 FireBuildingMedium
		ParticleSysBone FireSmall04 FireBuildingLarge
		ParticleSysBone FireSmall05 SmokeBuildingLarge
    End

    AnimationState = DESTROYED_BACK
      BeginScript
        CurDrawableHideSubObject("RBWatchTowDP_3")
      EndScript
    End

	ModelConditionState  = DESTROYED_LEFT
      Model         =  RBWatchTow_D2   
		ParticleSysBone FireSmall01 FireBuildingLarge
		ParticleSysBone FireSmall02 FireBuildingLarge
		ParticleSysBone FireSmall03 FireBuildingMedium
		ParticleSysBone FireSmall04 FireBuildingLarge
		ParticleSysBone FireSmall05 SmokeBuildingLarge
    End
    
    AnimationState = DESTROYED_LEFT
      BeginScript
        CurDrawableHideSubObject("RBWatchTowDP_4")
      EndScript
    End
    
    
    ModelConditionState  = DAMAGED
      Model         =  RBWatchTow_D1  
		ParticleSysBone FireSmall01 FireBuildingLarge
		ParticleSysBone FireSmall02 FireBuildingMedium
		ParticleSysBone FireSmall03 FireBuildingMedium
		ParticleSysBone FireSmall04 SmokeBuildingLarge
		ParticleSysBone FireSmall05 SmokeBuildingLarge
    End
    AnimationState = DAMAGED
	EnteringStateFX	= FX_BuildingDamaged
    End

    ModelConditionState  = REALLYDAMAGED
      Model         =  RBWatchTow_D2  
		ParticleSysBone FireSmall01 FireBuildingLarge
		ParticleSysBone FireSmall02 FireBuildingLarge
		ParticleSysBone FireSmall03 FireBuildingMedium
		ParticleSysBone FireSmall04 FireBuildingLarge
		ParticleSysBone FireSmall05 SmokeBuildingLarge
    End
    AnimationState = REALLYDAMAGED
	EnteringStateFX	= FX_BuildingReallyDamaged
    End

    ModelConditionState  = RUBBLE
      Model         =  RBWatchTow_D2 
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End
    
    AnimationState = RUBBLE
      BeginScript
        CurDrawableHideSubObject("RBWatchTowDP_1")
        CurDrawableHideSubObject("RBWatchTowDP_2")
        CurDrawableHideSubObject("RBWatchTowDP_3")
        CurDrawableHideSubObject("RBWatchTowDP_4")
      EndScript
    End

    ModelConditionState  = POST_RUBBLE
		Model         = None
		ParticleSysBone NONE SmokeBuildingMediumRubble
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
		ParticleSysBone NONE SmokeBuildingMediumRubble
    End
 
  End
 
  PlacementViewAngle  = 270
 
	; ***DESIGN parameters ***
	DisplayName         = OBJECT:RohanBattleTower
	Description 	    = OBJECT:RohanBattleTowerDescription
	Side                = Rohan
	EditorSorting       = STRUCTURE
	ThreatLevel = 1.0
	 
	BuildCost           = 1200
	BuildTime           = 20.0           ; in seconds
	VisionRange         = VISION_BASE_DEFENSE
 	ShroudClearingRange = SHROUD_CLEAR_BASE_DEFENSE

  CommandSet = BattleTowerCommandSet
  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    ;DamageFX          = StructureDamageFXNoShake
  End


	; *** AUDIO Parameters ***

	VoiceSelect = RohanBattleTowerSelect

	SoundOnDamaged		= BuildingLightDamageWood
	SoundOnReallyDamaged	= BuildingHeavyDamageWood

	VoiceSelectUnderConstruction	= BuildingGoodVoiceSelectUnderConstruction

	UnitSpecificSounds
		UnderConstruction		= BuildingConstructionLoop  ; Built first time
		; UnderRepairFromDamage	= NoSound					; Repaired No animation on the building, so don't bother playing sound
		UnderRepairFromRubble	= BuildingConstructionLoop	; Repaired from completely destroyed (not used???)
	End


	; *** ENGINEERING Parameters ***

	RadarPriority       = STRUCTURE
	KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE NEED_BASE_FOUNDATION CAN_ATTACK MADE_OF_WOOD ATTACK_NEEDS_LINE_OF_SIGHT	 ; GARRISON GARRISONABLE_UNTIL_DESTROYED
	 
	Behavior            = GettingBuiltBehavior ModuleTag_04
		WorkerName		  = RohanWorkerNoSelect 
	End


	Body                      = StructureBody ModuleTag_05
		MaxHealth               = 2000.0
		MaxHealthDamaged        = 1300.0
		MaxHealthReallyDamaged  = 700.0
		DamageCreationList = OCL_BuildingDamageList01 CATAPULT_ROCK
	    
		DamageCreationList = OCL_GBBtlTwrSD2_Chunk1 CATAPULT_ROCK FRONT_DESTROYED
		DamageCreationList = OCL_GBBtlTwrSD2_Chunk2 CATAPULT_ROCK RIGHT_DESTROYED
		DamageCreationList = OCL_GBBtlTwrSD2_Chunk3 CATAPULT_ROCK BACK_DESTROYED
		DamageCreationList = OCL_GBBtlTwrSD2_Chunk4 CATAPULT_ROCK LEFT_DESTROYED
	End

;	Behavior                  = BuildingBehavior BuildingModuleTag
;		NightWindowName         = WINDOW_N01
;		FireWindowName          = WINDOW_F01
;		GlowWindowName	    = WINDOW_G01
;	End
 
	Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
		DestructionDelay  = 5000
	End
	  
	Behavior                  = StructureCollapseUpdate ModuleTag_StructureCollapseUpdate
		MinCollapseDelay        = 000
		MaxCollapseDelay        = 000
		CollapseDamping         = .5
		MaxShudder              = 0.6
		MinBurstDelay           = 250
		MaxBurstDelay           = 800
		BigBurstFrequency       = 4
		FXList                  = INITIAL   FX_StructureMediumCollapse
		OCL						= INITIAL   OCL_StructureRubblePileSinkAway
	End

	Behavior       = EvacuateDamage ModuleTag_evacuateDamage
		WeaponThatCausesEvacuation  = MordorCatapultHumanHeads
	End

;	Behavior = HordeGarrisonContain ModuleTag_hordeGarrison
;		ObjectStatusOfContained	= UNSELECTABLE CAN_ATTACK
;		ContainMax              = 4
;		MaxHordeCapacity        = 4
;		DamagePercentToUnits    = 0%
;		PassengerFilter			= ANY +INFANTRY +HORDE -CAVALRY
;		AllowEnemiesInside      = Yes
;		AllowNeutralInside      = Yes
;		NumberOfExitPaths       = 1 ; Defaults to 1.  Set 0 to not use ExitStart/ExitEnd, set higher than 1 to use ExitStart01-nn/ExitEnd01-nn
;		PassengerBonePrefix     = PassengerBone:ARROWBONE KindOf:INFANTRY
;		EntryOffset				= X:0.0 Y:45.0 Z:0.0
;		ExitOffset				= X:0.0 Y:45.0 Z:0.0
;		
;		;PassengersTestCollisionHeight = 80
;		;Slots                         = 1
;		;EnterSound                     = GarrisonEnter
;		;ExitSound                      = GarrisonExit
;		;ExitDelay               = 250
;		;GoAggressiveOnExit      = Yes ; AI Will tell people to set their mood to Aggressive on exiting
;		;ForceOrientationContainer = No  ; otherwise contained units can't orient themselves towards their targets...
;	End 

	Geometry              = BOX
	GeometryMajorRadius   = 18.4
	GeometryMinorRadius   = 18.4
	GeometryHeight        = 95.0
	
	GeometryIsSmall       = No
	Shadow                = SHADOW_VOLUME
	BuildCompletion     = PLACED_BY_PLAYER
	
	GeometryContactPoint	= X:-15.191		Y:14.07		Z:0			Repair
	GeometryContactPoint	= X:16.514		Y:-12.506	Z:0			Repair
	GeometryContactPoint	= X:12.361		Y:24.008	Z:0
	GeometryContactPoint	= X:-11.371		Y:-22.442	Z:0
	GeometryContactPoint	= X:0.081		Y:-4.234	Z:111.299	Swoop

End

;------------------------------------------------------------------------------
;Rohan Hero Statue
Object RohanHeroStatue

	SelectPortrait = BPRHeroicStatue

  Draw = W3DScriptedModelDraw ModuleTag_Draw
		OkToChangeModelColor  = Yes
		UseStandardModelNames = Yes

		DefaultModelConditionState
			Model = RPHeroStat
;			ParticleSysBone	    = NONE BuildingDoughnutCloud
			ParticleSysBone	    = NONE StatueHeroFX
		End
    
		ModelConditionState     = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
			Model               = RPHeroStat_A
;			ParticleSysBone	    = NONE BuildingDoughnutCloud
			ParticleSysBone     = NONE BuildingContructDust
		End  
		AnimationState          = ACTIVELY_BEING_CONSTRUCTED
			Animation
				AnimationName	= RPHeroStat_A.RPHeroStat_A
				AnimationMode   = MANUAL
			End
			BeginScript
				CurDrawablePlaySound("GondorBarracksBeginConstruction")
			EndScript
		End

		ModelConditionState     = DAMAGED
			Model               = RPHeroStat_D1
	
		End  
		AnimationState =	DAMAGED
			EnteringStateFX	= FX_StatueDamaged
		End
		
		
		ModelConditionState     = REALLYDAMAGED
			Model               = RPHeroStat_D2
	
		End  
    	AnimationState =	REALLYDAMAGED
			EnteringStateFX	= FX_StatueDamaged
		End
		
			
		ModelConditionState  = RUBBLE
			Model         =  RPHeroStat_D2 
			ParticleSysBone SmokeLarge01 SmokeBuildingLarge
		End
		AnimationState = RUBBLE
		End

		ModelConditionState  = POST_RUBBLE
			Model         = None
			ParticleSysBone NONE SmokeBuildingMediumRubble
		End
		ModelConditionState  = POST_COLLAPSE
			Model         = None
			ParticleSysBone NONE SmokeBuildingMediumRubble
		End
  End



  PlacementViewAngle  = 90
 
  ; ***DESIGN parameters ***
  DisplayName          = OBJECT:RohanHeroStatue
  Description          = OBJECT:RohanStatueDescription
  Side                = Rohan
	IsTrainable = No
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = ROHAN_HEROSTATUE_BUILDCOST
  BuildTime           = ROHAN_HEROSTATUE_BUILDTIME          ; in seconds
  VisionRange         = ROHAN_HEROSTATUE_VISIONRANGE          ; Shroud clearing distance
  ShroudClearingRange = ROHAN_HEROSTATUE_SHROUDCLEAR
  BountyValue         = ROHAN_HEROSTATUE_BOUNTY_VALUE
  
;  ArmorSet
;    Conditions        = None
;    Armor             = StructureArmor
;    DamageFX          = StructureDamageFXNoShake
;  End



; For Testing Purposes


  ; *** AUDIO Parameters ***

	VoiceSelect		= GondorStatueSelect

	SoundOnDamaged		= BuildingLightDamageWood
	SoundOnReallyDamaged	= BuildingHeavyDamageWood

	VoiceSelectUnderConstruction	= BuildingGoodVoiceSelectUnderConstruction

	UnitSpecificSounds
		UnderConstruction		= BuildingConstructionLoop  ; Built first time
		; UnderRepairFromDamage	= NoSound					; Repaired No animation on the building, so don't bother playing sound
		UnderRepairFromRubble	= BuildingConstructionLoop	; Repaired from completely destroyed (not used???)
	End

	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		MaxUpdateRangeCap = 800
		AnimationSound = Sound:StatueHeroicBuildStoneExplode	Animation:RPHeroStat_A.RPHeroStat_A		Frames:620
		AnimationSound = Sound:StatueHeroicBuildStoneDebris1	Animation:RPHeroStat_A.RPHeroStat_A		Frames:635
		AnimationSound = Sound:StatueHeroicBuildStoneDebris2	Animation:RPHeroStat_A.RPHeroStat_A		Frames:650
	End

 
  ; *** ENGINEERING Parameters ***

  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE NEED_BASE_FOUNDATION MADE_OF_STONE
 

  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  Body                = StructureBody ModuleTag_05
    MaxHealth         = ROHAN_HEROSTATUE_MAXHEALTH
  End

	Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
		DestructionDelay  = 5000
	End

	Behavior = GettingBuiltBehavior ModuleTag_GetBuilt
		;WorkerName	= "" ; Not RohanWorker, I build myself
		SpawnTimer  = 120
		RebuildWhenDead = Yes
		SelfBuildingLoop = BuildingConstructionLoop ; Only played if we DON'T spawn a worker
		SelfRepairFromDamageLoop  = NoSound         ; This doesn't cause an animation, so don't bother playing a sound
		SelfRepairFromRubbleLoop  = BuildingConstructionLoop
	End

;  Behavior           = CreateObjectDie ModuleTag_08
;    CreationList     = OCL_SmallStructureDebris
;  End
 
;  Behavior = ProductionUpdate ModuleTag_10
;    ; nothing, but is required if we have any Object-level Upgrades!
;  End
 
	Behavior = PassiveAreaEffectBehavior ModuleTag_FeelGoodHero
		EffectRadius			= 300 ; please update the decal size in experience lvl INI if you change this... the value there is about 2.2x the value here
		PingDelay				= 2000;msec

		ModifierName			= HeroicStatuePassiveLeadership
		ModifierName			= HeroicStatuePassiveExperienceRateBonus
		
		AllowFilter				= ANY +INFANTRY +CAVALRY -MACHINE -IMMOBILE -HERO   
	End
 
  Behavior                  = StructureCollapseUpdate ModuleTag_Collapse
    MinCollapseDelay        = 000
    MaxCollapseDelay        = 000
    CollapseDamping         = .5
    MaxShudder              = 0.6
    MinBurstDelay           = 250
    MaxBurstDelay           = 800
    BigBurstFrequency       = 4
    FXList                  = INITIAL   FX_StructureMediumCollapse
    FXList                  = ALMOST_FINAL  FX_StructureAlmostCollapse
	DestroyObjectWhenDone	= Yes
	CollapseHeight			= 126
  End

 
 
 	Behavior = CostModifierUpgrade ModuleTag_CostModifier1 ;makes heroes cheaper
		LabelForPalantirString = GUI:HERO_DISCOUNT
		StartsActive = Yes ; Run on build complete, not upgrade
		ObjectFilter		= ANY +HERO 
		Percentage		= 0%
		Percentage		= -10%
		Percentage		= -20%
		Percentage		= -30%
	End

 
 
 
;  Behavior = FlammableUpdate ModuleTag_14
;    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
;    AflameDamageAmount = 5       ; taking this much damage...
;    AflameDamageDelay = 500       ; this often.
;  End
 
;  Behavior = TransitionDamageFX ModuleTag_15
;    ;-------------DESIGNED FOR SMALL SIZED FACTION BUILDING TRANSITIONS-------------------
;    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
;    ;---------------------------------------------------------------------------------------
;    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
;    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
;    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
;  End
 
;  Behavior             = FXListDie ModuleTag_16
;    DeathFX       = FX_BuildingDie
;  End

	CommandSet = SellableCommandSet

  Geometry              = BOX
  GeometryMajorRadius   = 11.0
  GeometryMinorRadius   = 22.0
  GeometryHeight        = 70.0
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  BuildCompletion     	= PLACED_BY_PLAYER
End


;------------------------------------------------------------------------------
;Rohan Statue

ChildObject	RohanStatue	RohanHeroStatue 

; this is bad art that may be used somewhere else.

End



;------------------------------------------------------------------------------------------
;Rohan Sentry Tower
Object RohanSentryTower

SelectPortrait = BPRSentryTwr

  	; *** ART Parameters ***
	ButtonImage = BRSentryTwr
	  
	; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_Draw
  
	ExtraPublicBone	= ARROWBONE01
	ExtraPublicBone	= ARROWBONE02
	ExtraPublicBone	= ARROWBONE03
	ExtraPublicBone	= ARROWBONE04
	ExtraPublicBone	= ARROWBONE05
	ExtraPublicBone	= ARROWBONE06
	ExtraPublicBone	= ARROWBONE07
	ExtraPublicBone	= ARROWBONE08
	ExtraPublicBone	= ARROWBONE09
	ExtraPublicBone	= ARROWBONE10
	ExtraPublicBone	= ARROWBONE11
	ExtraPublicBone	= ARROWBONE12
	ExtraPublicBone	= ARROWBONE13
	ExtraPublicBone	= ARROWBONE14
	ExtraPublicBone	= ARROWBONE15
	ExtraPublicBone	= ARROWBONE16

  
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBWatchTowM
      
	  WeaponLaunchBone =   PRIMARY ARROWBONE
      
    End
    
     ;------------ build up states---------------
    ModelConditionState   = AWAITING_CONSTRUCTION 
      Model               = RBWatchTowM_A
;		ParticleSysBone	  = NONE BuildingDoughnutCloud
    End;
    AnimationState        = AWAITING_CONSTRUCTION
      Animation           =  RBWatchTowM_A
        AnimationName     =  RBWatchTowM_A.RBWatchTowM_A
        AnimationMode     = MANUAL
        AnimationBlendTime = 0
      End
	  Flags				  = START_FRAME_FIRST
    End

    ModelConditionState   = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
      Model               = RBWatchTowM_A
		ParticleSysBone   = CONSTDUSTBONE01 BuildingContructDust FollowBone:Yes
    End;
    
    AnimationState        = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
		Animation           = RBWatchTowM_A
			AnimationName     = RBWatchTowM_A.RBWatchTowM_A
			AnimationMode     = MANUAL
			AnimationBlendTime = 0
		End
		Flags				  = START_FRAME_FIRST
		StateName			  = BeingConstructed
		BeginScript
			CurDrawablePlaySound("GondorBarracksBeginConstruction")
		EndScript
    End
    
       ;--damaged building

    
    ModelConditionState  = DAMAGED
      Model         =  RBWatchTowM_D1  
		ParticleSysBone FireSmall01 FireBuildingSmall
		ParticleSysBone FireSmall02 FireBuildingSmall
		ParticleSysBone FireSmall03 FireBuildingSmall
		ParticleSysBone FireSmall04 FireBuildingSmall
		ParticleSysBone FireMedium01 FireBuildingMedium
		ParticleSysBone FireMedium02 FireBuildingMedium
		ParticleSysBone FireLarge01 FireBuildingLarge
		ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End
    AnimationState = DAMAGED
	EnteringStateFX	= FX_BuildingDamaged
    End

    ModelConditionState  = REALLYDAMAGED
      Model         =  RBWatchTowM_D2  
		ParticleSysBone FireSmall01 FireBuildingSmall
		ParticleSysBone FireSmall02 FireBuildingSmall
		ParticleSysBone FireSmall03 FireBuildingSmall
		ParticleSysBone FireSmall04 FireBuildingSmall
		ParticleSysBone FireMedium01 FireBuildingMedium
		ParticleSysBone FireMedium02 FireBuildingMedium
		ParticleSysBone FireLarge01 FireBuildingLarge
		ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End
    AnimationState = REALLYDAMAGED
		EnteringStateFX	= FX_BuildingReallyDamaged
    End

    ModelConditionState  = RUBBLE
      Model         =  RBWatchTowM_D2 
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End
    
    AnimationState = RUBBLE
    End

    ModelConditionState  = POST_RUBBLE
		Model         = None
		ParticleSysBone NONE SmokeBuildingMediumRubble
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
		ParticleSysBone NONE SmokeBuildingMediumRubble
    End
  
  End
 
;  PlacementViewAngle  = 0
 
	; ***DESIGN parameters ***
	DisplayName         = OBJECT:RohanSentryTower
	Side                = Rohan
	EditorSorting       = STRUCTURE
	ThreatLevel 		= 11.0
	IsTrainable			= No
	 
	BuildCost           = SENTRY_TOWER_COST
	BuildTime           = SENTRY_TOWER_BUILDTIME	; in seconds
	VisionRange         = VISION_BASE_DEFENSE
 	ShroudClearingRange = SHROUD_CLEAR_BASE_DEFENSE

	CommandSet = SentryTowerCommandSet
	ArmorSet
		Conditions        = None
		Armor             = StructureArmor
		;DamageFX          = StructureDamageFXNoShake
	End

	WeaponSet
		Weapon				= PRIMARY RohanStructureBow  
		AutoChooseSources	= PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End 


	; *** AUDIO Parameters ***

	VoiceSelect		= RohanBattleTowerSelect

	SoundOnDamaged		= BuildingLightDamageWood
	SoundOnReallyDamaged	= BuildingHeavyDamageWood

	VoiceSelectUnderConstruction	= BuildingGoodVoiceSelectUnderConstruction

	UnitSpecificSounds
		UnderConstruction		= BuildingConstructionLoop  ; Built first time
		; UnderRepairFromDamage	= NoSound					; Repaired No animation on the building, so don't bother playing sound
		UnderRepairFromRubble	= BuildingConstructionLoop	; Repaired from completely destroyed (not used???)
	End


	; *** ENGINEERING Parameters ***

	RadarPriority       = STRUCTURE
	KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE NEED_BASE_FOUNDATION CAN_ATTACK FS_BASE_DEFENSE MADE_OF_WOOD
	 
	Behavior            = GettingBuiltBehavior ModuleTag_04
		WorkerName		  = RohanWorkerNoSelect
	End

	Body                      = StructureBody ModuleTag_05
		MaxHealth               = 1000.0
		MaxHealthDamaged        = 500.0
		MaxHealthReallyDamaged  = 250.0
	End

	Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
		DestructionDelay  = 5000
	End
	  
	Behavior                  = StructureCollapseUpdate ModuleTag_StructureCollapseUpdate 
		MinCollapseDelay        = 000
		MaxCollapseDelay        = 000
		CollapseDamping         = .5
		MaxShudder              = 0.6
		MinBurstDelay           = 250
		MaxBurstDelay           = 800
		BigBurstFrequency       = 4
		FXList                  = INITIAL   FX_StructureMediumCollapse
		FXList                  = ALMOST_FINAL  FX_StructureAlmostCollapse
		DestroyObjectWhenDone	= Yes
		CollapseHeight			= 89
	End
	


	Behavior = AIUpdateInterface ModuleTag_SoWeCanUseWeapon
		AutoAcquireEnemiesWhenIdle	= Yes
		MoodAttackCheckRate			= 250
	End

    Behavior = CastleMemberBehavior ModuleTag_CMB
    End 

	GeometryContactPoint = X:23.624		Y:23.464	Z:0			Repair
	GeometryContactPoint = X:22.954		Y:-16.306	Z:0			Repair
	GeometryContactPoint = X:22.954		Y:15.951	Z:0
	GeometryContactPoint = X:5.435		Y:-23.279	Z:0
	GeometryContactPoint = X:-0.459		Y:-0.275	Z:116.828	Swoop

	Geometry              = BOX
	GeometryMajorRadius   = 11
	GeometryMinorRadius   = 11
	GeometryHeight        = 80
	GeometryIsSmall       = No
	Shadow                = SHADOW_VOLUME
	BuildCompletion     = PLACED_BY_PLAYER
End






;------------------------------------------------------------------------------
;------------------------------------------------------------------------------
;------------------------------------------------------------------------------
;------------------------------------------------------------------------------
;
;  Gondor
;
;------------------------------------------------------------------------------
;------------------------------------------------------------------------------
;------------------------------------------------------------------------------

;---------------------------------- secondary GondorCitadel ------------------------------------------------------
Object GondorCampKeep

	SelectPortrait = BPGCamp

  ; *** ART Parameters ***

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes

    DefaultModelConditionState  
      Model = GBCCenter
;      ParticleSysBone	  = glowbone01 TorchGlow
;      ParticleSysBone     = glowbone02 furnaceSmoke
    End
    
	IdleAnimationState
		;BeginScript
		;	Prev = CurDrawablePrevAnimationState()
		;	if Prev == "BeingConstructed" then 
			    ; Don't play completed sound when canceling build-in-progress or when
			    ; destroyed halfway
		;	    if not CurDrawableModelcondition( "DYING" ) then 
		;			CurDrawablePlaySound("CampSoldierCompleteGeneric")
		;		end
		;	end
		;EndScript
	End

;------------Build Up States
    ;ModelConditionState   = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
   ;   Model               = GBCCenter_A
  ;    ParticleSysBone	  = NONE BuildingDoughnutCloud
 ;     ParticleSysBone     = NONE BuildingContructDust
;    End  

    ModelConditionState   = ACTIVELY_BEING_CONSTRUCTED
      Model               = GBCCenter_A
;      ParticleSysBone	  = NONE BuildingDoughnutCloud
      ParticleSysBone     = NONE BuildingContructDust
    End  

	AnimationState          = ACTIVELY_BEING_CONSTRUCTED
		Animation
			AnimationName	= GBCCenter_A.GBCCenter_A
			AnimationMode   = MANUAL
		End
		BeginScript
			CurDrawablePlaySound("GondorBarracksBeginConstruction")
			CurDrawablePlaySound("BuildingTopple")
			;CurDrawableHideSubObject("FIRE02")
		EndScript
	End

;------------Build Up States
    ModelConditionState   = BASE_BUILD
      Model               = GBCCenter_A
;      ParticleSysBone	  = NONE BuildingDoughnutCloud
      ParticleSysBone     = NONE BuildingContructDust
    End  

	AnimationState		  = BASE_BUILD
		Animation
			AnimationName = GBCCenter_A.GBCCenter_A
			AnimationMode = ONCE
			AnimationBlendTime = 0			
			AnimationSpeedFactorRange = 2.0 2.0 ; 300 frame anim, but need to shrink down to 5 seconds
		End
		BeginScript
			CurDrawablePlaySound("GondorBarracksBeginConstruction")
			CurDrawablePlaySound("BuildingTopple")
		EndScript
	End

    ModelConditionState   = JUST_BUILT
      Model               = GBCCenter_A
    End
    
	AnimationState		  = JUST_BUILT
		Animation
			AnimationName = GBCCenter_A.GBCCenter_A
			AnimationMode = MANUAL			
			AnimationBlendTime = 0
		End
        Flags = START_FRAME_FIRST
;		BeginScript
;			CurDrawableHideSubObject("FIRE02")
;		EndScript
	End

    ModelConditionState  = DAMAGED
      Model         = GBCCenter_D1  
      ParticleSysBone dustbone01 TrebuchetImpactDebris
;      ParticleSysBone	  = glowbone01 TorchGlow
;      ParticleSysBone     = glowbone02 furnaceSmoke
	
    End
    AnimationState = DAMAGED
	EnteringStateFX	= FX_BuildingDamaged
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = GBCCenter_D2  
      ParticleSysBone     = glowbone02 TrebuchetImpactDebris
      ParticleSysBone	  = glowbone01 Explosion5
	
    End
    AnimationState = REALLYDAMAGED
	EnteringStateFX	= FX_BuildingReallyDamaged
    End
    
    ModelConditionState  = RUBBLE
      Model         = GBCCenter_D2
      ParticleSysBone dustbone01 TrebuchetImpactDebris
      ParticleSysBone	  = glowbone01 Explosion5
      ParticleSysBone     = glowbone02 BuildingChunkDebris
    End
    AnimationState = RUBBLE
    End

  	ModelConditionState  = POST_RUBBLE
		Model         = GBGenRubble
		ParticleSysBone NONE SmokeBuildingMediumRubble
	End
    AnimationState = POST_RUBBLE
    End
	
	ModelConditionState  = POST_COLLAPSE
		Model         = GBGenRubble
		ParticleSysBone NONE SmokeBuildingMediumRubble
	End
    AnimationState = POST_COLLAPSE
    End

  End


	; *** AUDIO Parameters ***

	VoiceSelect				= GondorCitadelSelect

	SoundAmbient			= CitadelSignalFireLoop
	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone

	VoiceSelectUnderConstruction	= BuildingGoodVoiceSelectUnderConstruction

	UnitSpecificSounds
		UnderConstruction		= BuildingBigConstructionLoop		; Built first time
		; UnderRepairFromDamage	= NoSound					; Repaired No animation on the building, so don't bother playing sound
		UnderRepairFromRubble	= BuildingBigConstructionLoop		; Repaired from completely destroyed (not used???)
	End
	EvaEventDieOwner = CitadelDie


	; ***DESIGN parameters ***

	DisplayName      = OBJECT:GondorCampKeep
	Side = Gondor
	EditorSorting   = STRUCTURE
	ThreatLevel = 1.0
	BuildCost           = 1000
	BuildTime           = 30.0           ; in seconds
	CommandSet			= GenericKeepCommandSet

	ArmorSet
		Conditions        = None
		Armor             = CitadelArmor
		DamageFX          = None
	End

	; *** ENGINEERING Parameters ***  
	KindOf					= VITAL_FOR_BASE_SURVIVAL STRUCTURE SELECTABLE IMMOBILE CASTLE_KEEP MP_COUNT_FOR_VICTORY FS_FACTORY AUTO_RALLYPOINT MADE_OF_STONE SCORE
	RadarPriority			= STRUCTURE
	KeepSelectableWhenDead	= Yes


	Body              = ActiveBody ModuleTag_02
		MaxHealth       = GONDOR_CENTRAL_CAMP_KEEP_HEALTH
	End

	Behavior = GettingBuiltBehavior ModuleTag_04
;		WorkerName	= GondorWorkerNoSelect
;		SpawnTimer  = 120
;		RebuildWhenDead = Yes
	    SelfBuildingLoop = BuildingBigConstructionLoop			; Only played if we DON'T spawn a worker
		SelfRepairFromDamageLoop  = NoSound					; This doesn't cause an animation, so don't bother playing a sound
		SelfRepairFromRubbleLoop  = BuildingBigConstructionLoop
	End

	Behavior = CastleMemberBehavior ModuleTag_CMB
		BeingBuiltSound = BuildingBigConstructionLoop
	End 

	;-----------------------------------------------
	;Used for hero revival and initial construction     
	Behavior = ProductionUpdate ProductionUpdateModuleTag
		; nothing, but is required if we have any Object-level Upgrades!
	End
	Behavior = QueueProductionExitUpdate ModuleTag_QueuePEU
		UnitCreatePoint   = X:0.0 Y:-20.0 Z:0.0
		NaturalRallyPoint = X:28.8 Y:-80.0 Z:0.0;NaturalRallyPointX must always match GeometryMajorRadius!
		ExitDelay = 300 ; Mainly for the multiple produced Red Guard.  Make them come out one at a time.
	End  
	;-----------------------------------------------

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
  Behavior = KeepObjectDie ModuleTag_IWantRubble
  End
 
	Behavior = AutoDepositUpdate AutoDepositModuleTag
		DepositTiming			= GENERIC_KEEP_MONEY_TIME		; in milliseconds
		DepositAmount			= GENERIC_KEEP_MONEY_AMOUNT		; cash amount to deposit every DepositTiming
		InitialCaptureBonus		= 0  ; no initial bonus
	End
  
     Behavior                  = StructureCollapseUpdate ModuleTag_06
       MinCollapseDelay        = 000
       MaxCollapseDelay        = 000
       CollapseDamping         = .5
       MaxShudder              = 0.6
       MinBurstDelay           = 250
       MaxBurstDelay           = 800
       BigBurstFrequency       = 4
       FXList                  = INITIAL FX_StructureMediumCollapse
     End

	Behavior                  = RubbleRiseUpdate ModuleTag_07
		MinRubbleRiseDelay      = 000
		MaxRubbleRiseDelay      = 000
		;RubbleRiseDamping       = .5
		RubbleHeight            = 4.0
		MaxShudder              = 0.6
		MinBurstDelay           = 250
		MaxBurstDelay           = 800
		BigBurstFrequency       = 4
		FXList                  = INITIAL FX_StructureMediumPostCollapse
	End  
  
  Geometry              = BOX
  GeometryMajorRadius   = 7.0
  GeometryMinorRadius   = 7.0
  GeometryHeight        = 113.0
  
  AdditionalGeometry    = BOX
  GeometryMajorRadius   = 14.0
  GeometryMinorRadius   = 14.0
  GeometryHeight        = 38.0

  AdditionalGeometry    = CYLINDER ; this is needed so melee units can reach athe citidel to attack it
  GeometryMajorRadius   = 30.0
  GeometryMinorRadius   = 30.0
  GeometryHeight        = 10.0
  
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  
  GeometryContactPoint	= X:0.407	Y:-0.489	Z:122.392		Swoop
  AttackContactPoint	= X:0		Y:0			Z:0
  
End

;----------------------------- primary GondorCitadel -----------------------------------------
Object GondorCastleBaseKeep

	SelectPortrait = BPGondorCastle

  ; *** ART Parameters ***

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
	
	ExtraPublicBone = Arrow_01
	ExtraPublicBone = Arrow_02
	ExtraPublicBone = Arrow_03
	ExtraPublicBone = Arrow_04
	ExtraPublicBone = Arrow_05
	ExtraPublicBone = Arrow_06
	ExtraPublicBone = Arrow_07
	ExtraPublicBone = Arrow_08
	ExtraPublicBone = Arrow_09
	ExtraPublicBone = Arrow_10
	ExtraPublicBone = Arrow_11
	ExtraPublicBone = Arrow_12

    DefaultModelConditionState  
      Model = GBCastKeep
      WeaponLaunchBone	= PRIMARY ARROW_
    End
    
	IdleAnimationState
		StateName = STATE_None
		;BeginScript
		;	Prev = CurDrawablePrevAnimationState()
		;	if Prev == "BeingConstructed" then 
			    ; Don't play completed sound when canceling build-in-progress or when
			    ; destroyed halfway
		;	    if not CurDrawableModelcondition( "DYING" ) then 
		;			CurDrawablePlaySound("CampSoldierCompleteGeneric")
		;		end
		;	end
		;EndScript
	End
	
    ModelConditionState  = DAMAGED
      Model         = GBCastKeep_D1 
    End
    
    AnimationState = DAMAGED
		StateName = STATE_None
		EnteringStateFX	= FX_BuildingDamaged
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = GBCastKeep_D2
    End
    AnimationState = REALLYDAMAGED
       	Animation				=	ReallyDamagedanimation
			AnimationName		=	 GBCastKeep_D2.GBCastKeep_D2
			AnimationMode		=	ONCE
   		End
   		StateName = STATE_None
		EnteringStateFX	= FX_BuildingReallyDamaged
    End

    ModelConditionState   = DESTROYED_WHILST_BEING_CONSTRUCTED
		Model = GBCastKeep_A
		ParticleSysBone NONE Explosion3
		ParticleSysBone NONE ExplosiveMineSmoke02
    End  
	AnimationState	= DESTROYED_WHILST_BEING_CONSTRUCTED
		StateName = STATE_DetroyedConstructing
		Animation
			AnimationName		= GBCastKeep_A.GBCastKeep_A
			AnimationMode		= ONCE_BACKWARDS
			AnimationBlendTime	= 90	; 3 seconds * 30 frames
		End
		; Specifically no start last frame flag here.
		Flags = START_FRAME_FIRST
	End

	; RUBBLE--------------------------------------------------------------------------------------------------------
	TransitionState = TRANS_U_IntoRubble
		Animation = D3
			AnimationName		= GBCastKeep_D3.GBCastKeep_D3
			AnimationMode		= ONCE
			AnimationBlendTime	= 0
		End
		ParticleSysBone NONE Explosion3
		ParticleSysBone NONE ExplosiveMineSmoke02
	End

    ModelConditionState  = RUBBLE
		Model         = GBCastKeep_D3
    End   
    AnimationState = RUBBLE
		StateName = STATE_Rubble
		Flags = START_FRAME_LAST
		Animation				=	Death
			AnimationName		=	GBCastKeep_D3.GBCastKeep_D3
			AnimationMode		=	ONCE
		End
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "STATE_None"
			then
				; Only play the rubble anim if we havn't come from another rubble.
				CurDrawableSetTransitionAnimState("TRANS_U_IntoRubble")
			end
		EndScript
    End      

;------------Build Up States
    ModelConditionState   = ACTIVELY_BEING_CONSTRUCTED
      Model               = GBCastKeep_A
      ParticleSysBone     = NONE BuildingContructDust
    End  

	AnimationState          = ACTIVELY_BEING_CONSTRUCTED
		StateName = STATE_Rubble
		Animation
			AnimationName	= GBCastKeep_A.GBCastKeep_A
			AnimationMode   = MANUAL
		End
		BeginScript
			;CurDrawableHideSubObject("FIRE02")
			CurDrawablePlaySound("GondorBarracksBeginConstruction")
			CurDrawablePlaySound("BuildingTopple")
		EndScript
	End

;------------Build Up States
    ModelConditionState   = BASE_BUILD
      Model               = GBCastKeep_A
      ParticleSysBone     = NONE BuildingContructDust
    End  

	AnimationState		  = BASE_BUILD
		StateName = STATE_Rubble
		Animation
			AnimationName = GBCastKeep_A.GBCastKeep_A
			AnimationMode = ONCE
			AnimationBlendTime = 0			
			AnimationSpeedFactorRange = 2.0 2.0 ; 300 frame anim, but need to shrink down to 5 seconds
		End
		BeginScript
			CurDrawablePlaySound("GondorBarracksBeginConstruction")
			CurDrawablePlaySound("BuildingTopple")
		EndScript
	End

    ModelConditionState   = JUST_BUILT
      Model               = GBCastKeep_A
    End  
	AnimationState		  = JUST_BUILT
		StateName = STATE_Rubble
		Animation
			AnimationName = GBCastKeep_A.GBCastKeep_A
			AnimationMode = MANUAL			
			AnimationBlendTime = 0
		End
        Flags = START_FRAME_FIRST
	End

  End


	; *** AUDIO Parameters ***

	VoiceSelect				= GondorCitadelSelect

	SoundAmbient			= CitadelSignalFireLoop
	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone

	VoiceSelectUnderConstruction	= BuildingGoodVoiceSelectUnderConstruction

	UnitSpecificSounds
		UnderConstruction		= BuildingBigConstructionLoop		; Built first time
		; UnderRepairFromDamage	= NoSound					; Repaired No animation on the building, so don't bother playing sound
		UnderRepairFromRubble	= BuildingBigConstructionLoop		; Repaired from completely destroyed (not used???)
	End

	EvaEventDieOwner = CitadelDie

	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		MaxUpdateRangeCap = 800
 		AnimationSound = Sound:BuildingSink				Animation:GBCastKeep_D3.GBCastKeep_D3	Frames:0
		AnimationSound = Sound:BuildingHeavyDamageStone		Animation:GBCastKeep_D3.GBCastKeep_D3	Frames:40
	End


	; ***DESIGN parameters ***

	DisplayName      = OBJECT:GondorCastleBaseKeep
	Side = Gondor
	EditorSorting   = STRUCTURE
	ThreatLevel = 1.0
	BuildCost           = 1000
	BuildTime           = 30.0           ; in seconds
	CommandSet			= GondorCastleBaseKeepCommandSet

  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    DamageFX          = MinasWallADamageFX
  End
  
	WeaponSet
		Conditions			= None
		Weapon				= PRIMARY KeepBow
		AutoChooseSources	= PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End 

  ; *** ENGINEERING Parameters ***  
  KindOf					= VITAL_FOR_BASE_SURVIVAL STRUCTURE SELECTABLE SCORE IMMOBILE CASTLE_KEEP MP_COUNT_FOR_VICTORY CAN_ATTACK FS_FACTORY MADE_OF_STONE ATTACK_NEEDS_LINE_OF_SIGHT AUTO_RALLYPOINT	;  GARRISON GARRISONABLE_UNTIL_DESTROYED
  RadarPriority				= STRUCTURE
  VisionRange				= GONDOR_ARCHER_VISION_RANGE
  KeepSelectableWhenDead	= Yes
  
  Body              = ActiveBody ModuleTag_02
    MaxHealth       = GONDOR_CENTRAL_CAMP_KEEP_HEALTH
  End

  Behavior = GettingBuiltBehavior ModuleTag_04
    SelfBuildingLoop = BuildingBigConstructionLoop			; Only played if we DON'T spawn a worker
	SelfRepairFromDamageLoop  = NoSound					; This doesn't cause an animation, so don't bother playing a sound
	SelfRepairFromRubbleLoop  = BuildingBigConstructionLoop
  End

  Behavior = CastleMemberBehavior ModuleTag_CMB
	BeingBuiltSound = BuildingBigConstructionLoop
  End 

  	;-----------------------------------------------
	;Used for hero revival and initial construction     
	Behavior = ProductionUpdate ProductionUpdateModuleTag
		; nothing, but is required if we have any Object-level Upgrades!
	End
	Behavior = QueueProductionExitUpdate ModuleTag_QueuePEU
		UnitCreatePoint   = X:0.0 Y:-20.0 Z:0.0
		NaturalRallyPoint = X:28.8 Y:-80.0 Z:0.0;NaturalRallyPointX must always match GeometryMajorRadius!
		ExitDelay = 300 ;Handles delays between units if multiple produced at a time. 
	End  
	;-----------------------------------------------

	Behavior = WeaponSetUpgrade ModuleTag_FireArrows
		TriggeredBy			= Upgrade_BattleTowersToUseFireArrows
	End
	Behavior = AIUpdateInterface ModuleTag_SoWeCanUseWeapon
 		AutoAcquireEnemiesWhenIdle	= Yes
 		MoodAttackCheckRate			= 250
 	End
   

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
  Behavior = KeepObjectDie ModuleTag_IWantRubble
  End

	Behavior = AttributeModifierUpgrade ModuleTag_Reinforced
		TriggeredBy				= Upgrade_NumenorStonework
		AttributeModifier		= NumenorStoneworkCitadelUpgrade_Bonus
	End
  
	Behavior       = EvacuateDamage ModuleTag_evacuateDamage
		WeaponThatCausesEvacuation  = MordorCatapultHumanHeads
	End

;-------------Can no longer garrison castle keeps
;
;	Behavior = HordeGarrisonContain ModuleTag_hordeGarrison
;		ObjectStatusOfContained	= UNSELECTABLE CAN_ATTACK
;		ContainMax              = 4
;		MaxHordeCapacity        = 4
;		DamagePercentToUnits    = 0%
;		PassengerFilter			= ANY +INFANTRY +HORDE -CAVALRY
;		AllowEnemiesInside      = Yes
;		AllowNeutralInside      = Yes
;		NumberOfExitPaths       = 1 ; Defaults to 1.  Set 0 to not use ExitStart/ExitEnd, set higher than 1 to use ExitStart01-nn/ExitEnd01-nn
;		PassengerBonePrefix     = PassengerBone:ARROWBONE KindOf:INFANTRY
;		EntryOffset				= X:0.0 Y:-45.0 Z:0.0
;		ExitOffset				= X:0.0 Y:-45.0 Z:0.0
;		
;		;PassengersTestCollisionHeight = 80
;		;Slots                         = 1
;		;EnterSound                     = GarrisonEnter
;		;ExitSound                      = GarrisonExit
;		;ExitDelay               = 250
;		;GoAggressiveOnExit      = Yes ; AI Will tell people to set their mood to Aggressive on exiting
;		;ForceOrientationContainer = No  ; otherwise contained units can't orient themselves towards their targets...
;	End 

	Behavior = AutoDepositUpdate AutoDepositModuleTag
		DepositTiming			= GENERIC_KEEP_MONEY_TIME   ; in milliseconds
		DepositAmount			= GENERIC_KEEP_MONEY_AMOUNT   ; cash amount to deposit every DepositTiming
		InitialCaptureBonus		= 0  ; no initial bonus
	End
  
  Geometry              = BOX
  GeometryMajorRadius   = 19.0
  GeometryMinorRadius   = 19.0
  GeometryHeight        = 44.0
  
  AdditionalGeometry    = CYLINDER
  GeometryMajorRadius   = 19.0
  GeometryMinorRadius   = 0
  GeometryHeight        = 79
  
  AdditionalGeometry    = CYLINDER
  GeometryMajorRadius   = 9.0
  GeometryMinorRadius   = 0
  GeometryHeight        = 149
  
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  
  AttackContactPoint	= X:00.327		Y:-0.28			Z:167.013		Swoop
  AttackContactPoint	= X:0			Y:0				Z:0
End

;------------------------------------------------------------------------------
Object GondorCastleWall_temp
  
  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = GBCWall
    End
  End
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:GondorCastleWall_temp
  Side                = Gondor
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160


  ; *** AUDIO Parameters ***

	SoundOnDamaged		= BuildingLightDamageStone
	SoundOnReallyDamaged	= BuildingHeavyDamageStone


  ; *** ENGINEERING Parameters ***

  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE NEED_BASE_FOUNDATION CASTLE_KEEP MADE_OF_STONE
 
  Behavior            = GettingBuiltBehavior ModuleTag_04
    SelfBuildingLoop = BuildingConstructionLoop ; Only played if we DON'T spawn a worker
	SelfRepairFromDamageLoop  = NoSound         ; This doesn't cause an animation, so don't bother playing a sound
	SelfRepairFromRubbleLoop  = BuildingConstructionLoop
  End

  Behavior = CastleMemberBehavior ModuleTag_CMB
		CountsForEvaCastleBreached = Yes
  End 

  Body                = StructureBody ModuleTag_05
    MaxHealth         = 1500.0
  End
 
  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End

  Geometry              = BOX
  GeometryMajorRadius   = 25.6
  GeometryMinorRadius   = 35.2
  GeometryHeight        = 191.2
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER
End

;------------------------------------------------------------------------------

;------------------------------------------------------------------------------
Object GondorCastleKeep_temp

	SelectPortrait = BPGKeep
  
  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = GBCKeep
    End
  End
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:GondorCastleKeep_temp
  Side                = Gondor
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160


  ; *** AUDIO Parameters ***

	VoiceSelect			= GondorCitadelSelect

	SoundOnDamaged		= BuildingLightDamageStone
	SoundOnReallyDamaged	= BuildingHeavyDamageStone

	EvaEventDieOwner = CitadelDie


  ; *** ENGINEERING Parameters ***

  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE NEED_BASE_FOUNDATION CASTLE_KEEP AUTO_RALLYPOINT MADE_OF_STONE
 
  Behavior            = GettingBuiltBehavior ModuleTag_04
    SelfBuildingLoop = BuildingConstructionLoop ; Only played if we DON'T spawn a worker
	SelfRepairFromDamageLoop  = NoSound         ; This doesn't cause an animation, so don't bother playing a sound
	SelfRepairFromRubbleLoop  = BuildingConstructionLoop
  End

  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  Body                = StructureBody ModuleTag_05
    MaxHealth         = 1500.0
  End
 
  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End

  Geometry              = BOX
  GeometryMajorRadius   = 25.6
  GeometryMinorRadius   = 35.2
  GeometryHeight        = 191.2
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER
End

;------------------------------------------------------------------------------

;------------------------------------------------------------------------------
Object GondorCastleFoundation_temp
  
  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = GBCfoundation
    End
  End
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:GondorCastleFoundation_temp
  Side                = Gondor
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160

  ; *** AUDIO Parameters ***

  ; *** ENGINEERING Parameters ***

  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE NEED_BASE_FOUNDATION CASTLE_KEEP 
 
  Behavior            = GettingBuiltBehavior ModuleTag_04
    SelfBuildingLoop = BuildingConstructionLoop ; Only played if we DON'T spawn a worker
	SelfRepairFromDamageLoop  = NoSound         ; This doesn't cause an animation, so don't bother playing a sound
	SelfRepairFromRubbleLoop  = BuildingConstructionLoop
  End

  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  Body                = StructureBody ModuleTag_05
    MaxHealth         = 1500.0
  End
 
  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End

  Geometry              = BOX
  GeometryMajorRadius   = 25.6
  GeometryMinorRadius   = 35.2
  GeometryHeight        = 191.2
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER
End

;------------------------------------------------------------------------------

;------------------------------------------------------------------------------
Object GondorCastleBarracks_temp
  
  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = GBCBarracks
    End
  End
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:GondorCastleBarracks_temp
  Side                = Gondor
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160


  ; *** AUDIO Parameters ***

	VoiceSelectUnderConstruction	= BuildingGoodVoiceSelectUnderConstruction

	UnitSpecificSounds
		UnderConstruction		= BuildingConstructionLoop  ; Built first time
		; UnderRepairFromDamage	= NoSound					; Repaired No animation on the building, so don't bother playing sound
		UnderRepairFromRubble	= BuildingConstructionLoop	; Repaired from completely destroyed (not used???)
	End


  ; *** ENGINEERING Parameters ***

  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE NEED_BASE_FOUNDATION CASTLE_KEEP MADE_OF_STONE
 
  Behavior            = GettingBuiltBehavior ModuleTag_04
    SelfBuildingLoop = BuildingConstructionLoop ; Only played if we DON'T spawn a worker
	SelfRepairFromDamageLoop  = NoSound         ; This doesn't cause an animation, so don't bother playing a sound
	SelfRepairFromRubbleLoop  = BuildingConstructionLoop
  End

  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  Body                = StructureBody ModuleTag_05
    MaxHealth         = 1500.0
  End
 
  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End

  Geometry              = BOX
  GeometryMajorRadius   = 25.6
  GeometryMinorRadius   = 35.2
  GeometryHeight        = 191.2
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER
End

;------------------------------------------------------------------------------

;Gondor Building Foundation -- the area where faction gondor buildings can be built on
Object GondorBuildingFoundation
 
 
 SelectPortrait = BPGCamp_Plot
  ; *** ART Parameters ***


	Draw = W3DScriptedModelDraw ModuleTag_Draw2
	    DefaultModelConditionState
			Model = OBBFoundationX
		End
		ModelConditionState = WORLD_BUILDER
  			Model = GBSizeTemplate
  		End

	End
	
	Draw = W3DFloorDraw ModuleTag_Draw
		ModelName = GBFoundationX
	End

	;PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:GondorBuildingFoundation
  Side                = Gondor
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160

  CommandSet = GondorFoundationCommandSet


  ; *** AUDIO Parameters ***

  VoiceSelect = Gui_PlotSelect


  ; *** ENGINEERING Parameters ***

  RadarPriority       = STRUCTURE
  KindOf              = STRUCTURE SELECTABLE IMMOBILE BASE_FOUNDATION UNATTACKABLE MP_COUNT_FOR_VICTORY NO_COLLIDE DO_NOT_CLASSIFY
 
  Behavior            = FoundationAIUpdate ModuleTag_foundationAI
  End

  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  Body                = ImmortalBody ModuleTag_05
    MaxHealth         = 15000.0
  End
 
  Geometry              = BOX
  GeometryMajorRadius   = 24.0
  GeometryMinorRadius   = 24.0
  GeometryHeight        = 0.8
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  BuildCompletion		= PLACED_BY_PLAYER
End

;------------------------------------------------------------------------------


Object GBCastleGate

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    DefaultModelConditionState
      Model = GBCastGate
    End
;    WallBoundsMesh = GBCastleWallT2
  End

  Draw = W3DLightDraw ModuleTag_02
    Ambient = R:0 G:0 B:0
    Diffuse = R:240 G:240 B:100
    Radius = 40
    Intensity = 1.2
    FlickerAmplitude = 0.5
    FlickerFrequency = 10
    AttachToBoneInAnotherModule = E_Fire_SM
  End  


  ; *** AUDIO Parameters ***

	SoundOnDamaged		= BuildingLightDamageStone
	SoundOnReallyDamaged	= BuildingHeavyDamageStone


  ; ***DESIGN parameters ***

  DisplayName      = OBJECT:GBCastleGate
  Side = Gondor
  EditorSorting = STRUCTURE
; Browser = CINEMATICS UNIT

  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    DamageFX          = None
  End

  ; *** ENGINEERING Parameters ***  
  KindOf                = STRUCTURE SELECTABLE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE MADE_OF_WOOD
  RadarPriority = STRUCTURE
  Body                  = ActiveBody ModuleTag_03
    MaxHealth       = 4000.0
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0
  End

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
  Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 5000
  End
  
  
  
  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= WallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

  
	Geometry              = BOX
	GeometryMajorRadius   = 44.0
	GeometryMinorRadius   = 88.0
	GeometryHeight        = 40.0
	GeometryIsSmall       = No
	;GeometryRotationAnchorOffset = X:1037.871 Y:0
	Shadow                = SHADOW_VOLUME
  
	GeometryContactPoint = X:-8  Y:0  Z:0 Grab
	GeometryContactPoint = X:8  Y:0  Z:0 Grab
	GeometryContactPoint = X:0  Y:0  Z:5
	GeometryContactPoint = X:0  Y:-50  Z:40
	GeometryContactPoint = X:0  Y:-30  Z:5
	GeometryContactPoint = X:0  Y:0  Z:40
	GeometryContactPoint = X:0  Y:30  Z:5
	GeometryContactPoint = X:0  Y:50  Z:40
	GeometryContactPoint = X:0  Y:50  Z:5
	
	
End

;------------------------------------------------------------------------------


Object GBCastleTrebuchet

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    DefaultModelConditionState
      Model = GBCastTreb
    End
;    WallBoundsMesh = GBCastleWallT2
  End

  Draw = W3DLightDraw ModuleTag_02
    Ambient = R:0 G:0 B:0
    Diffuse = R:240 G:240 B:100
    Radius = 40
    Intensity = 1.2
    FlickerAmplitude = 0.5
    FlickerFrequency = 10
    AttachToBoneInAnotherModule = E_Fire_SM
  End  


  ; *** AUDIO Parameters ***

	;SoundOnDamaged		= BuildingLightDamageStone
	;SoundOnReallyDamaged	= BuildingHeavyDamageStone


  ; ***DESIGN parameters ***

  DisplayName      = OBJECT:GBCastleTrebuchet
  Side = Gondor
  EditorSorting = STRUCTURE
; Browser = CINEMATICS UNIT

  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    DamageFX          = None
  End

  ; *** ENGINEERING Parameters ***  
  KindOf                = STRUCTURE SELECTABLE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE MADE_OF_STONE
  RadarPriority = STRUCTURE
  Body                  = ActiveBody ModuleTag_03
    MaxHealth       = 2000.0
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0
  End

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
  Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 5000
  End
  
  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= WallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

	Geometry              = BOX
	GeometryMajorRadius   = 44.0
	GeometryMinorRadius   = 88.0
	GeometryHeight        = 40.0
	GeometryIsSmall       = No
	;GeometryRotationAnchorOffset = X:1037.871 Y:0
	Shadow                = SHADOW_VOLUME
	
	; Regular geometry is all screwy, leave these commented out
	;GeometryContactPoint = X:-10  Y:-40  Z:0 Grab
	;GeometryContactPoint = X:30   Y:0    Z:0 Grab
	;GeometryContactPoint = X:-10  Y:40   Z:0 Grab
	;GeometryContactPoint = X:-10  Y:20   Z:40
	;GeometryContactPoint = X:15   Y:10   Z:10
	;GeometryContactPoint = X:20   Y:0    Z:40
	;GeometryContactPoint = X:15   Y:-10  Z:10
	;GeometryContactPoint = X:-10   Y:-30  Z:40
	;GeometryContactPoint = X:-10  Y:-30  Z:10
End

;------------------------------------------------------------------------------


Object GBCastleElevator

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    DefaultModelConditionState
      Model = GBCastElev
    End
;    WallBoundsMesh = GBCastleWallT2
  End

  Draw = W3DLightDraw ModuleTag_02
    Ambient = R:0 G:0 B:0
    Diffuse = R:240 G:240 B:100
    Radius = 40
    Intensity = 1.2
    FlickerAmplitude = 0.5
    FlickerFrequency = 10
    AttachToBoneInAnotherModule = E_Fire_SM
  End  


  ; *** AUDIO Parameters ***

	SoundOnDamaged		= BuildingLightDamageStone
	SoundOnReallyDamaged	= BuildingHeavyDamageStone


  ; ***DESIGN parameters ***

  DisplayName      = OBJECT:GondorCastleElevator
  Side = Gondor
  EditorSorting = STRUCTURE
; Browser = CINEMATICS UNIT

  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    DamageFX          = None
  End

  ; *** ENGINEERING Parameters ***  
  KindOf                = STRUCTURE SELECTABLE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE MADE_OF_STONE
  RadarPriority = STRUCTURE
  Body                  = ActiveBody ModuleTag_03
    MaxHealth       = 4000.0
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0
  End

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
  Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 5000
  End
  
  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= WallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

  Geometry              = BOX
  GeometryMajorRadius   = 44.0
  GeometryMinorRadius   = 88.0
  GeometryHeight        = 40.0
  
  GeometryIsSmall       = No
  ;GeometryRotationAnchorOffset = X:1037.871 Y:0
  Shadow                = SHADOW_VOLUME
  
  ; wow this geometry is screwy
  GeometryContactPoint = X:-29.397		Y:0.326		Z:108.421		Swoop
  GeometryContactPoint = X:0			Y:0			Z:0
  GeometryContactPoint = X:40 Y:-20  Z:0 Grab
End
;------------------------------------------------------------------------------


Object GBCastleWallF

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    DefaultModelConditionState
      Model = GBCastleWallF
    End
;    WallBoundsMesh = GBCastleWallT2
  End

  Draw = W3DLightDraw ModuleTag_02
    Ambient = R:0 G:0 B:0
    Diffuse = R:240 G:240 B:100
    Radius = 40
    Intensity = 1.2
    FlickerAmplitude = 0.5
    FlickerFrequency = 10
    AttachToBoneInAnotherModule = E_Fire_SM
  End  


  ; *** AUDIO Parameters ***

	SoundOnDamaged		= BuildingLightDamageStone
	SoundOnReallyDamaged	= BuildingHeavyDamageStone


  ; ***DESIGN parameters ***

  DisplayName      = OBJECT:GondorCastleWall
  Side = Gondor
  EditorSorting = STRUCTURE
; Browser = CINEMATICS UNIT

  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    DamageFX          = None
  End

  ; *** ENGINEERING Parameters ***  
  KindOf                = STRUCTURE SELECTABLE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE MADE_OF_STONE
  RadarPriority = STRUCTURE
  Body                  = ActiveBody ModuleTag_03
    MaxHealth       = 4000.0
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0
  End

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
  Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 4000
  End
  
  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= WallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

  Geometry              = BOX
  GeometryMajorRadius   = 44.0
  GeometryMinorRadius   = 88.0
  GeometryHeight        = 40.0
  GeometryIsSmall       = No
  ;GeometryRotationAnchorOffset = X:1037.871 Y:0
  Shadow                = SHADOW_VOLUME
End



;------------------------------------------------------------------------------


Object GBCastleWallG

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    DefaultModelConditionState
      Model = GBCastleWallG
    End
;    WallBoundsMesh = GBCastleWallT2
  End

  Draw = W3DLightDraw ModuleTag_02
    Ambient = R:0 G:0 B:0
    Diffuse = R:240 G:240 B:100
    Radius = 40
    Intensity = 1.2
    FlickerAmplitude = 0.5
    FlickerFrequency = 10
    AttachToBoneInAnotherModule = E_Fire_SM
  End  


  ; *** AUDIO Parameters ***

	SoundOnDamaged		= BuildingLightDamageStone
	SoundOnReallyDamaged	= BuildingHeavyDamageStone


  ; ***DESIGN parameters ***

  DisplayName      = OBJECT:GondorCastleWall
  Side = Gondor
  EditorSorting = STRUCTURE
; Browser = CINEMATICS UNIT

  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    DamageFX          = None
  End

  ; *** ENGINEERING Parameters ***  
  KindOf                = STRUCTURE SELECTABLE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE MADE_OF_STONE
  RadarPriority = STRUCTURE
  Body                  = ActiveBody ModuleTag_03
    MaxHealth       = 4000.0
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0
  End

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
  Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 2500
  End
  
  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= WallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

  Geometry              = BOX
  GeometryMajorRadius   = 44.0
  GeometryMinorRadius   = 88.0
  GeometryHeight        = 40.0
  GeometryIsSmall       = No
  ;GeometryRotationAnchorOffset = X:1037.871 Y:0
  Shadow                = SHADOW_VOLUME
End



;------------------------------------------------------------------------------


Object GBCastleWallR

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    DefaultModelConditionState
      Model = GBCastleWallR
    End
;    WallBoundsMesh = GBCastleWallT2
  End

  Draw = W3DLightDraw ModuleTag_02
    Ambient = R:0 G:0 B:0
    Diffuse = R:240 G:240 B:100
    Radius = 40
    Intensity = 1.2
    FlickerAmplitude = 0.5
    FlickerFrequency = 10
    AttachToBoneInAnotherModule = E_Fire_SM
  End  


  ; *** AUDIO Parameters ***

	SoundOnDamaged		= BuildingLightDamageStone
	SoundOnReallyDamaged	= BuildingHeavyDamageStone


  ; ***DESIGN parameters ***

  DisplayName      = OBJECT:GondorCastleWall
  Side = Gondor
  EditorSorting = STRUCTURE
; Browser = CINEMATICS UNIT

  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    DamageFX          = None
  End

  ; *** ENGINEERING Parameters ***  
  KindOf                = STRUCTURE SELECTABLE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE MADE_OF_STONE
  RadarPriority = STRUCTURE
  Body                  = ActiveBody ModuleTag_03
    MaxHealth       = 4000.0
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0
  End

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
  Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 2500
  End
  
  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= WallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

  Geometry              = BOX
  GeometryMajorRadius   = 44.0
  GeometryMinorRadius   = 88.0
  GeometryHeight        = 40.0
  GeometryIsSmall       = No
  ;GeometryRotationAnchorOffset = X:1037.871 Y:0
  Shadow                = SHADOW_VOLUME
End


;------------------------------------------------------------------------------
;

Object GondorCastleGateTower

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    WallBoundsMesh = P1
    RampMesh1 = Ramp1
    
    DefaultModelConditionState
      Model = GBCastPed
    End

	ModelConditionState = WORLD_BUILDER
  		Model = GBCASTPEDW
  	End

	IdleAnimationState
 		StateName			 = STATE_None
		Flags				 = START_FRAME_LAST
		Animation
			AnimationName     = GBCastPed.GBCastPed
			AnimationMode     = MANUAL
			AnimationBlendTime = 0
        End
	End    

	ModelConditionState  = ACTIVELY_BEING_CONSTRUCTED UPGRADE_NUMENOR_STONEWORK
		Model = GBCastPed_UA
	End
	AnimationState = ACTIVELY_BEING_CONSTRUCTED UPGRADE_NUMENOR_STONEWORK
		StateName			= STATE_None
		Flags				= START_FRAME_FIRST
		Animation
			AnimationName = GBCastPed_UA.GBCastPed_UA
			AnimationMode = MANUAL
		End
	End    

	ModelConditionState  = ACTIVELY_BEING_CONSTRUCTED
		Model = GBCastPed  
	End
	AnimationState = ACTIVELY_BEING_CONSTRUCTED
		StateName			= STATE_None
		Flags				= START_FRAME_FIRST
		Animation
			AnimationName = GBCastPed.GBCastPed
			AnimationMode = MANUAL
		End
	End    

    ;------------Build Up States
    ModelConditionState   = BASE_BUILD
      Model               = GBCastPed
      ParticleSysBone     = NONE BuildingContructDust
    End  
	AnimationState		  = BASE_BUILD
		StateName				= STATE_None
		Animation
			AnimationName = GBCastPed.GBCastPed
			AnimationMode = ONCE
			AnimationSpeedFactorRange = 2.0 2.5 ; keep range wide to avoid lockstep anims
		End
	End

	AnimationState = JUST_BUILT
		StateName				= STATE_None
        Flags					= START_FRAME_FIRST
		Animation
			AnimationName		= GBCastPed.GBCastPed
			AnimationMode		= MANUAL
			AnimationBlendTime	= 0
		End
	End    
	
	; DAMAGED ----------------------------------------------------------------------------------------------------------------
    ModelConditionState = DAMAGED UPGRADE_NUMENOR_STONEWORK
		Model			= GBCastPed_UD1  
    End
    AnimationState = DAMAGED UPGRADE_NUMENOR_STONEWORK
		StateName		= STATE_None
		EnteringStateFX	= FX_BuildingDamaged
    End
    ModelConditionState = DAMAGED
		Model			= GBCastPed_D1  
    End
    AnimationState = DAMAGED
		StateName		= STATE_None
		EnteringStateFX	= FX_BuildingDamaged
    End

	; REALLYDAMAGED ----------------------------------------------------------------------------------------------------------------
	TransitionState = TRANS_U_IntoReallyDamaged
		EnteringStateFX		= FX_BuildingReallyDamaged
		Animation = D2
			AnimationName		= GBCastPed_UD2.GBCastPed_UD2
			AnimationMode		= ONCE
			AnimationBlendTime	= 0
		End
	End

    ModelConditionState  = REALLYDAMAGED UPGRADE_NUMENOR_STONEWORK
      Model         = GBCastPed_UD2
    End
    AnimationState = REALLYDAMAGED UPGRADE_NUMENOR_STONEWORK
		StateName			= STATE_ReallyDamaged
 		Flags				= START_FRAME_LAST
      	Animation			= ReallyDamagedanimation
			AnimationName	= GBCastPed_UD2.GBCastPed_UD2
			AnimationMode	= MANUAL
			AnimationBlendTime = 0
	   	End
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "STATE_None" or Prev == "STATE_Rubble"
			then
				; Only play the really damaged anim if we havn't come from another really damaged.
				CurDrawableSetTransitionAnimState("TRANS_U_IntoReallyDamaged")
			end
		EndScript
   	End

    ModelConditionState  = REALLYDAMAGED
      Model         = GBCastPed_D2
    End
    AnimationState = REALLYDAMAGED
		StateName			= STATE_ReallyDamaged
       	Animation			= ReallyDamagedanimation
			AnimationName	= GBCastPed_D2.GBCastPed_D2
			AnimationMode	= ONCE
			AnimationBlendTime = 0
   		End
		EnteringStateFX	= FX_BuildingReallyDamaged
    End

	; RUBBLE ----------------------------------------------------------------------------------------------------------------
	TransitionState = TRANS_U_IntoRubble
		Animation = D3
			AnimationName		= GBCastPed_U_D3.GBCastPed_U_D3
			AnimationMode		= ONCE
			AnimationBlendTime = 0
		End
	End

    ModelConditionState  = RUBBLE UPGRADE_NUMENOR_STONEWORK
      Model						= GBCastPed_U_D3
    End
    AnimationState = RUBBLE UPGRADE_NUMENOR_STONEWORK
		StateName				= STATE_Rubble
		Flags					= START_FRAME_LAST
		;EnteringStateFX	= FX_WallDie	;this plays after the stone sink into the ground
		Animation				= Death
			AnimationName		= GBCastPed_U_D3.GBCastPed_U_D3
			AnimationMode		= MANUAL
			AnimationBlendTime	= 0
		End
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "STATE_ReallyDamaged" or Prev == "STATE_None" or Prev == "TRANS_U_IntoReallyDamaged"
			then
				; Only play the rubble anim if we havn't come from another rubble.
				CurDrawableSetTransitionAnimState("TRANS_U_IntoRubble")
			end
		EndScript
    End

    ModelConditionState  = RUBBLE
      Model         = GBCastPed_D3
    End
    AnimationState = RUBBLE
		StateName				= STATE_Rubble
		Animation				= Death
			AnimationName		= GBCastPed_D3.GBCastPed_D3
			AnimationMode		= ONCE
			AnimationBlendTime	= 0
		End
		EnteringStateFX	= FX_WallDie
    End      

 	; ----------------------------------------------------------------------------------------------------------------
   ModelConditionState  = UPGRADE_NUMENOR_STONEWORK
      Model         = GBCastPed_U
    End
	AnimationState = UPGRADE_NUMENOR_STONEWORK
		StateName		= STATE_None
		EnteringStateFX = GenericBuildingUpgrade
	End	

  End

  ; *** AUDIO Parameters ***

	SoundOnDamaged		= BuildingLightDamageStone
	SoundOnReallyDamaged	= BuildingHeavyDamageStone

	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		MaxUpdateRangeCap = 800
		AnimationSound = Sound:WallDie	Animation:GBCastPed_U_D3.GBCastPed_U_D3	Frames:0
	End


  ; ***DESIGN parameters ***

	DisplayName     = OBJECT:GondorCastleGateTower
	Side			= Gondor
	EditorSorting	= STRUCTURE
	BuildTime		= CASTLE_WALL_REBUILD_TIME
	BuildCost		= CASTLE_WALL_REBUILD_COST

  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160

  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    DamageFX          = MinasWallADamageFX
  End

  ; *** ENGINEERING Parameters ***  
	KindOf					= STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR SELECTABLE MADE_OF_STONE NOT_AUTOACQUIRABLE
	RadarPriority			= STRUCTURE
	KeepSelectableWhenDead	= Yes
	CommandSet				= GenericSelfRepairCommandSet

  Body                  = ActiveBody ModuleTag_03
    MaxHealth       = 5000.0
  End

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
  
    Behavior = KeepObjectDie ModuleTag_IWantRubble
    End
  
    Behavior = CastleMemberBehavior ModuleTag_CMB
    End 
  
	Behavior = AttributeModifierUpgrade ModuleTag_Reinforced
		TriggeredBy				= Upgrade_NumenorStonework
		AttributeModifier		= NumenorStonework_Bonus
		CustomAnimAndDuration	= AnimState:UPGRADE_NUMENOR_STONEWORK AnimTime:0
	End

 	Behavior = GettingBuiltBehavior ModuleTag_GettingBuilt
		SelfBuildingLoop = BuildingConstructionLoop ; Only played if we DON'T spawn a worker
		SelfRepairFromDamageLoop  = NoSound         ; This doesn't cause an animation, so don't bother playing a sound
		SelfRepairFromRubbleLoop  = BuildingConstructionLoop
		SpawnTimer = -1.0 ; Negative means no 'autoheal'
		RebuildTimeSeconds = CASTLE_WALL_REBUILD_TIME
	End 
  
	Geometry              = BOX
	GeometryMajorRadius   = 20.0
	GeometryMinorRadius   = 50.0
	GeometryHeight        = 45.0
	GeometryIsSmall       = No
	;GeometryRotationAnchorOffset = X:1037.871 Y:0
	Shadow                = SHADOW_VOLUME
	
	GeometryContactPoint = X:-10  Y:-40  Z:0 Grab
	GeometryContactPoint = X:40   Y:0    Z:0 Grab
	GeometryContactPoint = X:-10  Y:40   Z:0 Grab
	GeometryContactPoint = X:-10  Y:25   Z:45
	GeometryContactPoint = X:15   Y:15   Z:5
	GeometryContactPoint = X:20   Y:0    Z:45
	GeometryContactPoint = X:15   Y:-15  Z:5
	GeometryContactPoint = X:-10  Y:-25  Z:45
	GeometryContactPoint = X:-10  Y:-25  Z:5
End



;------------------------------------------------------------------------------


Object GBCastleWallsA

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    DefaultModelConditionState
      Model = GBCastleWallsA
    End
;    WallBoundsMesh = GBCastleWallT2
  End

  Draw = W3DLightDraw ModuleTag_02
    Ambient = R:0 G:0 B:0
    Diffuse = R:240 G:240 B:100
    Radius = 40
    Intensity = 1.2
    FlickerAmplitude = 0.5
    FlickerFrequency = 10
    AttachToBoneInAnotherModule = E_Fire_SM
  End  


  ; *** AUDIO Parameters ***

	SoundOnDamaged		= BuildingLightDamageStone
	SoundOnReallyDamaged	= BuildingHeavyDamageStone


  ; ***DESIGN parameters ***

  DisplayName      = OBJECT:GondorCastleWall
  Side = Gondor
  EditorSorting = STRUCTURE
; Browser = CINEMATICS UNIT

  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    DamageFX          = None
  End

  ; *** ENGINEERING Parameters ***  
  KindOf                = STRUCTURE SELECTABLE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE MADE_OF_STONE
  RadarPriority = STRUCTURE
  Body                  = ActiveBody ModuleTag_03
    MaxHealth       = 4000.0
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0
  End

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
  Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 2500
  End
  
  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= WallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

  Geometry              = BOX
  GeometryMajorRadius   = 44.0
  GeometryMinorRadius   = 88.0
  GeometryHeight        = 40.0
  GeometryIsSmall       = No
  ;GeometryRotationAnchorOffset = X:1037.871 Y:0
  Shadow                = SHADOW_VOLUME
End


;------------------------------------------------------------------------------


Object GBCastleWallsBT

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    DefaultModelConditionState
      Model = GBCastleWallsBT
    End
;    WallBoundsMesh = GBCastleWallT2
  End

  Draw = W3DLightDraw ModuleTag_02
    Ambient = R:0 G:0 B:0
    Diffuse = R:240 G:240 B:100
    Radius = 40
    Intensity = 1.2
    FlickerAmplitude = 0.5
    FlickerFrequency = 10
    AttachToBoneInAnotherModule = E_Fire_SM
  End  


  ; *** AUDIO Parameters ***

	SoundOnDamaged		= BuildingLightDamageStone
	SoundOnReallyDamaged	= BuildingHeavyDamageStone


  ; ***DESIGN parameters ***

  DisplayName      = OBJECT:GBCampWall
  Side = Gondor
  EditorSorting = STRUCTURE
; Browser = CINEMATICS UNIT

  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    DamageFX          = None
  End

  ; *** ENGINEERING Parameters ***  
  KindOf                = STRUCTURE SELECTABLE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE MADE_OF_STONE 
  RadarPriority = STRUCTURE
  Body                  = ActiveBody ModuleTag_03
    MaxHealth       = 4000.0
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0
  End

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
  Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 2500
  End
  
  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= WallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

  Geometry              = BOX
  GeometryMajorRadius   = 44.0
  GeometryMinorRadius   = 88.0
  GeometryHeight        = 40.0
  GeometryIsSmall       = No
  ;GeometryRotationAnchorOffset = X:1037.871 Y:0
  Shadow                = SHADOW_VOLUME
End


;------------------------------------------------------------------------------


Object GBCastleWallT1

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    DefaultModelConditionState
      Model = GBCastleWallT1
    End
;    WallBoundsMesh = GBCastleWallT2
  End

  Draw = W3DLightDraw ModuleTag_02
    Ambient = R:0 G:0 B:0
    Diffuse = R:240 G:240 B:100
    Radius = 40
    Intensity = 1.2
    FlickerAmplitude = 0.5
    FlickerFrequency = 10
    AttachToBoneInAnotherModule = E_Fire_SM
  End  


  ; *** AUDIO Parameters ***

	SoundOnDamaged		= BuildingLightDamageStone
	SoundOnReallyDamaged	= BuildingHeavyDamageStone


  ; ***DESIGN parameters ***

  DisplayName      = OBJECT:GBCampWall
  Side = Gondor
  EditorSorting = STRUCTURE
; Browser = CINEMATICS UNIT

  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    DamageFX          = None
  End

  ; *** ENGINEERING Parameters ***  
  KindOf                = STRUCTURE SELECTABLE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE MADE_OF_STONE
  RadarPriority = STRUCTURE
  Body                  = ActiveBody ModuleTag_03
    MaxHealth       = 4000.0
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0
  End

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
  Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 2500
  End
  
  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= WallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

  Geometry              = BOX
  GeometryMajorRadius   = 44.0
  GeometryMinorRadius   = 88.0
  GeometryHeight        = 40.0
  GeometryIsSmall       = No
  ;GeometryRotationAnchorOffset = X:1037.871 Y:0
  Shadow                = SHADOW_VOLUME
End


;------------------------------------------------------------------------------


Object GBCastleWallT2

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    DefaultModelConditionState
      Model = GBCastleWallT2
    End
;    WallBoundsMesh = GBCastleWallT2
  End

  Draw = W3DLightDraw ModuleTag_02
    Ambient = R:0 G:0 B:0
    Diffuse = R:240 G:240 B:100
    Radius = 40
    Intensity = 1.2
    FlickerAmplitude = 0.5
    FlickerFrequency = 10
    AttachToBoneInAnotherModule = E_Fire_SM
  End  


  ; *** AUDIO Parameters ***

	SoundOnDamaged		= BuildingLightDamageStone
	SoundOnReallyDamaged	= BuildingHeavyDamageStone


  ; ***DESIGN parameters ***

  DisplayName      = OBJECT:GBCampWall
  Side = Gondor
  EditorSorting = STRUCTURE
; Browser = CINEMATICS UNIT

  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    DamageFX          = None
  End

  ; *** ENGINEERING Parameters ***  
  KindOf                = STRUCTURE SELECTABLE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE MADE_OF_STONE
  RadarPriority = STRUCTURE
  Body                  = ActiveBody ModuleTag_03
    MaxHealth       = 4000.0
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0
  End

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
  Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 2500
  End
  
  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= WallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

  Geometry              = BOX
  GeometryMajorRadius   = 44.0
  GeometryMinorRadius   = 88.0
  GeometryHeight        = 40.0
  GeometryIsSmall       = No
  ;GeometryRotationAnchorOffset = X:1037.871 Y:0
  Shadow                = SHADOW_VOLUME
End


;------------------------------------------------------------------------------


Object GBCampFloor

	; *** ART Parameters ***
	Draw = W3DFloorDraw ModuleTag_01
		ModelName = GBCampFloor
		ForceToBack = Yes
	End

  ; *** AUDIO Parameters ***

	VoiceSelect		= Gui_PlotSelect


  ; ***DESIGN parameters ***

  DisplayName      = OBJECT:CampFloor
  Side = Gondor
  EditorSorting = STRUCTURE
; Browser = CINEMATICS UNIT

  ArmorSet
    Conditions        = None
    Armor             = NoArmor
    DamageFX          = None
  End

  ; *** ENGINEERING Parameters ***  
  ; The STRUCTURE KindOf is needed so this object will be given to the base
  ; owner when it's unpacked and show up in the right color on the radar map.
  
  KindOf                = STRUCTURE IMMOBILE NO_COLLIDE UNATTACKABLE INERT 

  RadarPriority = NOT_ON_RADAR
  Body                  = ImmortalBody ModuleTag_03
    MaxHealth       = 2000.0
  End

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
  Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 1000
  End
  
  Geometry              = BOX
  GeometryMajorRadius   = 0.8
  GeometryMinorRadius   = 0.8
  GeometryHeight        = 0.8
  GeometryIsSmall       = Yes
End

;------------------------------------------------------------------------------


Object GBCastleFloor

	; *** ART Parameters ***
	Draw = W3DFloorDraw ModuleTag_01
		ModelName = GBCastFloor
		ForceToBack = Yes
	End

  ; *** AUDIO Parameters ***

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:CastFloor
  Side = Gondor
  EditorSorting = STRUCTURE
; Browser = CINEMATICS UNIT

  ArmorSet
    Conditions        = None
    Armor             = NoArmor
    DamageFX          = None
  End

  ; *** ENGINEERING Parameters ***  
  ; The STRUCTURE KindOf is needed so this object will be given to the base
  ; owner when it's unpacked and show up in the right color on the radar map.
  
  KindOf                = STRUCTURE IMMOBILE NO_COLLIDE UNATTACKABLE INERT 
  RadarPriority = NOT_ON_RADAR
  Body                  = ImmortalBody ModuleTag_03
    MaxHealth       = 2000.0
  End

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
  Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 1000
  End
  
  Geometry              = BOX
  GeometryMajorRadius   = 0.8
  GeometryMinorRadius   = 0.8
  GeometryHeight        = 0.8
  GeometryIsSmall       = Yes
End

;------------------------------------------------------------------------------

;Gondor Tent
Object GondorTent
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw                = W3DScriptedModelDraw ModuleTag_01
    OkToChangeModelColor = Yes

    DefaultModelConditionState
      Model           = GBTent
    End
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:GondorTent
  Side                = Gondor
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 0
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160
;  ArmorSet
;    Conditions        = None
;    Armor             = StructureArmor
;    DamageFX          = StructureDamageFXNoShake
;  End
;  CommandSet          = GondorTentCommandSet

 
  ; *** AUDIO Parameters ***
;  VoiceSelect         = NuclearReactorSelect
;  SoundOnDamaged        = BuildingDamagedStateLight
;  SoundOnReallyDamaged  = BuildingDestroy
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 
  ; *** ENGINEERING Parameters ***
  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE NOT_AUTOACQUIRABLE SCORE MADE_OF_WOOD
 
  Behavior            = GettingBuiltBehavior ModuleTag_04
    SelfBuildingLoop = BuildingConstructionLoop ; Only played if we DON'T spawn a worker
	SelfRepairFromDamageLoop  = NoSound         ; This doesn't cause an animation, so don't bother playing a sound
	SelfRepairFromRubbleLoop  = BuildingConstructionLoop
  End

  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  Body                = StructureBody ModuleTag_05
    MaxHealth         = 1500.0
  End
 
  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End

  Behavior = UpgradeDie  UpgradeDieModuleTag
    ;This frees the object based upgrade for the producer object.
    DeathTypes = ALL
    UpgradeToRemove     = Upgrade_TestBuilding BaseUpgradeTag_01
  End

;  Behavior           = CreateObjectDie ModuleTag_08
;    CreationList     = OCL_SmallStructureDebris
;  End
 
;  Behavior = ProductionUpdate ModuleTag_10
;    ; nothing, but is required if we have any Object-level Upgrades!
;  End
 
;  Behavior = FlammableUpdate ModuleTag_14
;    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
;    AflameDamageAmount = 5       ; taking this much damage...
;    AflameDamageDelay = 500       ; this often.
;  End
 
;  Behavior = TransitionDamageFX ModuleTag_15
;    ;-------------DESIGNED FOR SMALL SIZED FACTION BUILDING TRANSITIONS-------------------
;    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
;    ;---------------------------------------------------------------------------------------
;    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
;    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
;    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
;  End
 
;  Behavior             = FXListDie ModuleTag_16
;    DeathFX       = FX_BuildingDie
;  End
 
  Geometry              = BOX
  GeometryMajorRadius   = 33.6
  GeometryMinorRadius   = 28.0
  GeometryHeight        = 40.8
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER
End


;------------------------------------------------------------------------------------------
;Gondor Sentry Tower
Object GondorSentryTower

SelectPortrait = BPGSentryTwr

  	; *** ART Parameters ***
	ButtonImage = BRBattleTower
	  
	; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_Draw
  
	ExtraPublicBone	= ARROW_01
	ExtraPublicBone	= ARROW_02
	ExtraPublicBone	= ARROW_03
	ExtraPublicBone	= ARROW_04
	ExtraPublicBone	= ARROW_05
	ExtraPublicBone	= ARROW_06
	ExtraPublicBone	= ARROW_07
	ExtraPublicBone	= ARROW_08
	ExtraPublicBone	= ARROW_09
	ExtraPublicBone	= ARROW_10
	ExtraPublicBone	= ARROW_11
	ExtraPublicBone	= ARROW_12

  
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = GBBtlTwrM
	  WeaponLaunchBone =   PRIMARY ARROW_
    End
    
     ;------------ build up states---------------
    ModelConditionState   = AWAITING_CONSTRUCTION 
      Model               = GBBtlTwrM_A
;		ParticleSysBone	  = NONE BuildingDoughnutCloud
    End;
    AnimationState        = AWAITING_CONSTRUCTION
      Animation           =  GBBtlTwrM_A
        AnimationName     =  GBBtlTwrM_A.GBBtlTwrM_A
        AnimationMode     = MANUAL
        AnimationBlendTime = 0
      End
	  Flags				  = START_FRAME_FIRST
    End

    ModelConditionState   = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
      Model               = GBBtlTwrM_A
		ParticleSysBone   = CONSTDUSTBONE01 BuildingContructDust FollowBone:Yes
    End;
    
    AnimationState        = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
		Animation           = GBBtlTwrM_A
			AnimationName     = GBBtlTwrM_A.GBBtlTwrM_A
			AnimationMode     = MANUAL
			AnimationBlendTime = 0
		End
		Flags				  = START_FRAME_FIRST
		StateName			  = BeingConstructed
		BeginScript
			CurDrawablePlaySound("GondorBarracksBeginConstruction")
		EndScript
    End
    
       ;--damaged building
    
    ModelConditionState  = DAMAGED
      Model         =  GBBtlTwrM_D1  
		ParticleSysBone FireSmall01 FireBuildingSmall
		ParticleSysBone FireSmall02 FireBuildingSmall
		ParticleSysBone FireSmall03 FireBuildingSmall
		ParticleSysBone FireSmall04 FireBuildingSmall
		ParticleSysBone FireMedium01 FireBuildingMedium
		ParticleSysBone FireMedium02 FireBuildingMedium
		ParticleSysBone FireLarge01 FireBuildingLarge
		ParticleSysBone SmokeLarge01 SmokeBuildingLarge
	
    End
    AnimationState = DAMAGED
		EnteringStateFX	= FX_BuildingDamaged
    End

    ModelConditionState  = REALLYDAMAGED
      Model         =  GBBtlTwrM_D2  
		ParticleSysBone FireSmall01 FireBuildingSmall
		ParticleSysBone FireSmall02 FireBuildingSmall
		ParticleSysBone FireSmall03 FireBuildingSmall
		ParticleSysBone FireSmall04 FireBuildingSmall
		ParticleSysBone FireMedium01 FireBuildingMedium
		ParticleSysBone FireMedium02 FireBuildingMedium
		ParticleSysBone FireLarge01 FireBuildingLarge
		ParticleSysBone SmokeLarge01 SmokeBuildingLarge
	
    End
    AnimationState = REALLYDAMAGED
	EnteringStateFX	= FX_BuildingReallyDamaged
    End

    ModelConditionState  = RUBBLE
      Model         =  GBBtlTwrM_D2 
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End
    
    AnimationState = RUBBLE
    End

    ModelConditionState  = POST_RUBBLE
		Model         = None
		ParticleSysBone NONE SmokeBuildingMediumRubble
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
		ParticleSysBone NONE SmokeBuildingMediumRubble
    End
  
  End
 
;  PlacementViewAngle  = 0
 
	; ***DESIGN parameters ***
	DisplayName         = OBJECT:GondorSentryTower
	Side                = Gondor
	EditorSorting       = STRUCTURE
	ThreatLevel 		= 11.0
	IsTrainable			= No
	 
	BuildCost           = SENTRY_TOWER_COST
	BuildTime           = SENTRY_TOWER_BUILDTIME	; in seconds
	VisionRange         = VISION_BASE_DEFENSE
 	ShroudClearingRange = SHROUD_CLEAR_BASE_DEFENSE

	CommandSet = SentryTowerCommandSet
	ArmorSet
		Conditions        = None
		Armor             = StructureArmor
		;DamageFX          = StructureDamageFXNoShake
	End


	WeaponSet
		Weapon				= PRIMARY GondorStructureBow
		AutoChooseSources	= PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End 


	; *** AUDIO Parameters ***

	VoiceSelect		= GondorBattleTowerSelect

	SoundOnDamaged		= BuildingLightDamageStone
	SoundOnReallyDamaged	= BuildingHeavyDamageStone

	VoiceSelectUnderConstruction	= BuildingGoodVoiceSelectUnderConstruction

	UnitSpecificSounds
		UnderConstruction		= BuildingConstructionLoop  ; Built first time
		; UnderRepairFromDamage	= NoSound					; Repaired No animation on the building, so don't bother playing sound
		UnderRepairFromRubble	= BuildingConstructionLoop	; Repaired from completely destroyed (not used???)
	End


	; *** ENGINEERING Parameters ***

	RadarPriority       = STRUCTURE
	KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE NEED_BASE_FOUNDATION CAN_ATTACK FS_BASE_DEFENSE MADE_OF_STONE
	 
	Behavior            = GettingBuiltBehavior ModuleTag_04
		WorkerName		  = GondorWorkerNoSelect
	End

	Body                      = StructureBody ModuleTag_05
		MaxHealth               = 1000.0
		MaxHealthDamaged        = 500.0
		MaxHealthReallyDamaged  = 250.0
	End

	Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
		DestructionDelay  = 4000
	End
	  
	Behavior                  = StructureCollapseUpdate ModuleTag_StructureCollapseUpdate 
		MinCollapseDelay        = 000
		MaxCollapseDelay        = 000
		CollapseDamping         = .5
		MaxShudder              = 0.6
		MinBurstDelay           = 250
		MaxBurstDelay           = 800
		BigBurstFrequency       = 4
		FXList                  = INITIAL   FX_StructureMediumCollapse
		FXList                  = ALMOST_FINAL  FX_StructureAlmostCollapse
		DestroyObjectWhenDone	= Yes
		CollapseHeight			= 89
	End
	

	Behavior                  = BuildingBehavior BuildingModuleTag
		NightWindowName         = WINDOW_N01
		;FireWindowName          = WINDOW_F01
		;GlowWindowName	    = WINDOW_G01
	End

	Behavior = AIUpdateInterface ModuleTag_SoWeCanUseWeapon
		AutoAcquireEnemiesWhenIdle	= Yes
		MoodAttackCheckRate			= 250
	End

    Behavior = CastleMemberBehavior ModuleTag_CMB
    End 

	Geometry              = CYLINDER
	GeometryMajorRadius   = 12
	GeometryMinorRadius   = 12
	GeometryHeight        = 80.0
	
	GeometryIsSmall       = No
	Shadow                = SHADOW_VOLUME
	BuildCompletion     = PLACED_BY_PLAYER
	
	GeometryContactPoint = X:23.624		Y:23.464	Z:0			Repair
	GeometryContactPoint = X:22.954		Y:-16.306	Z:0			Repair
	GeometryContactPoint = X:22.954		Y:15.951	Z:0
	GeometryContactPoint = X:5.435		Y:-23.279	Z:0
	GeometryContactPoint = X:-0.459		Y:-0.275	Z:116.828	Swoop

End


;------------------------------------------------------------------------------


Object GBCampWall

SelectPortrait = BPGCampWall

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    DefaultModelConditionState
      Model = GBCampWall_A
    End

	IdleAnimationState
		Animation
			AnimationName     = GBCampWall_A.GBCampWall_A
			AnimationMode     = MANUAL
			AnimationBlendTime = 0
        End
        Flags = START_FRAME_LAST
	End    

    ;------------Build Up States
    ModelConditionState   = BASE_BUILD
      Model               = GBCampWall_A
;      ParticleSysBone	  = NONE BuildingDoughnutCloud
      ParticleSysBone     = NONE BuildingContructDust
    End  
	AnimationState		  = BASE_BUILD
		Animation
			AnimationName = GBCampWall_A.GBCampWall_A
			AnimationMode = ONCE
			AnimationSpeedFactorRange = 2.0 2.5 ; keep range wide to avoid lockstep anims
		End
	End

	AnimationState		  = JUST_BUILT
		Animation
			AnimationName = GBCampWall_A.GBCampWall_A
			AnimationMode = MANUAL
			AnimationBlendTime = 0
		End
        Flags = START_FRAME_FIRST
	End    

	
    ModelConditionState  = DAMAGED UPGRADE_NUMENOR_STONEWORK
		Model         = GBCampWall_UD1
		ParticleSysBone emberBone01 SmokeBuildingLarge
	End
    ModelConditionState  = DAMAGED
		Model         = GBCampWall_D1
		ParticleSysBone emberBone01 SmokeBuildingLarge
	End
    AnimationState = DAMAGED
		EnteringStateFX	= FX_BuildingDamaged
    End

    ModelConditionState  = REALLYDAMAGED UPGRADE_NUMENOR_STONEWORK
      Model         = GBCampWall_UD2
      ParticleSysBone emberBone01 SmokeBuildingLarge
    End
    ModelConditionState  = REALLYDAMAGED
      Model         = GBCampWall_D2
      ParticleSysBone emberBone01 SmokeBuildingLarge
    End
    AnimationState = REALLYDAMAGED
		EnteringStateFX	= FX_BuildingReallyDamaged
    End	
    
    ModelConditionState  = RUBBLE UPGRADE_NUMENOR_STONEWORK
      Model         = GBCampWall_UD3
      ParticleSysBone emberBone01 GondorWallDebris
      ParticleSysBone emberBone01 SmokeBuildingLarge
      ParticleSysBone emberBone01 PCTMediumDust
    End
    AnimationState = RUBBLE UPGRADE_NUMENOR_STONEWORK
	EnteringStateFX = FX_WallStoneDie
    End

    ModelConditionState  = RUBBLE
      Model         = GBCampWall_D3
      ParticleSysBone emberBone01 GondorWallDebris
      ParticleSysBone emberBone01 SmokeBuildingLarge
      ParticleSysBone emberBone01 PCTMediumDust
    End
    AnimationState = RUBBLE
	EnteringStateFX = FX_WallStoneDie
    End

  	ModelConditionState  = POST_RUBBLE
		Model         = None
		ParticleSysBone NONE SmokeBuildingMediumRubble
	End
	ModelConditionState  = POST_COLLAPSE
		Model         = None
		ParticleSysBone NONE SmokeBuildingMediumRubble
	End
  	
  	ModelConditionState  = UPGRADE_NUMENOR_STONEWORK
		Model         = GBCampWall_U
	End
	AnimationState = UPGRADE_NUMENOR_STONEWORK
		EnteringStateFX = GenericBuildingUpgrade
	End

  End

  ; *** AUDIO Parameters ***

	SoundOnDamaged		= BuildingLightDamageStone
	SoundOnReallyDamaged	= BuildingHeavyDamageStone

	;ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
	;	MaxUpdateRangeCap = 800
	;	AnimationSound = Sound:BuildingDebris	Animation:GBCampWall_A.GBCampWall_D3	Frames:0
	;	AnimationSound = Sound:BuildingDebris	Animation:GBCampWall_A.GBCampWall_UD3	Frames:0
	;End


  ; ***DESIGN parameters ***

  DisplayName      = OBJECT:GBCampWall
  Side = Gondor
  EditorSorting = STRUCTURE
; Browser = CINEMATICS UNIT

  ArmorSet
    Conditions        = None
    Armor             = CampWallArmor
    DamageFX          = None
  End
  
  CommandSet = EmptyCommandSet

  ; *** ENGINEERING Parameters ***  
  KindOf                = STRUCTURE SELECTABLE IMMOBILE DEFENSIVE_WALL NOT_AUTOACQUIRABLE MADE_OF_STONE
  RadarPriority = NOT_ON_RADAR
  Body                  = ActiveBody ModuleTag_03
    MaxHealth       = 3000.0
  End

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
;  Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
;      DestructionDelay  = 5000
;  End
	
	Behavior                  = StructureCollapseUpdate ModuleTag_06
		MinCollapseDelay        = 000
		MaxCollapseDelay        = 000
		CollapseDamping         = .5
		MaxShudder              = 0.6
		MinBurstDelay           = 250
		MaxBurstDelay           = 800
		BigBurstFrequency       = 4
;		FXList                  = INITIAL   FX_StructureMediumCollapse
;		FXList                  = ALMOST_FINAL  FX_StructureAlmostCollapse
		DestroyObjectWhenDone	= Yes
		CollapseHeight			= 80
	End
	  
  Behavior = CastleMemberBehavior ModuleTag_CMB
  End
  
	Behavior = AttributeModifierUpgrade ModuleTag_Reinforced
		TriggeredBy				= Upgrade_NumenorStonework
		AttributeModifier		= NumenorStoneworkKeep_Bonus
		CustomAnimAndDuration	= AnimState:UPGRADE_NUMENOR_STONEWORK AnimTime:0
	End

  Geometry              = BOX
  GeometryMajorRadius   = 4.0
  GeometryMinorRadius   = 72.0
  GeometryHeight        = 24.0
  GeometryIsSmall       = No
  ;GeometryRotationAnchorOffset = X:1037.871 Y:0
  Shadow                = SHADOW_VOLUME
End



;------------------------------------------------------------------------------


Object GBCampWallC

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    DefaultModelConditionState
      Model = GBCampWallC
    End
;    WallBoundsMesh = GBMTWallAPTop
  End


  ; *** AUDIO Parameters ***

	SoundOnDamaged		= BuildingLightDamageStone
	SoundOnReallyDamaged	= BuildingHeavyDamageStone


  ; ***DESIGN parameters ***

  DisplayName      = OBJECT:GBCampWall
  Side = Gondor
  EditorSorting = STRUCTURE
; Browser = CINEMATICS UNIT

  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    DamageFX          = None
  End

  ; *** ENGINEERING Parameters ***  
  KindOf                = STRUCTURE IMMOBILE DEFENSIVE_WALL NOT_AUTOACQUIRABLE MADE_OF_STONE
  RadarPriority = NOT_ON_RADAR
  Body                  = ActiveBody ModuleTag_03
    MaxHealth       = 3000.0
  End

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
  Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 2100
  End
  
  Geometry              = BOX
  GeometryMajorRadius   = 32.0
  GeometryMinorRadius   = 8.0
  GeometryHeight        = 8.0
  GeometryIsSmall       = No
  ;GeometryRotationAnchorOffset = X:1037.871 Y:0
  Shadow                = SHADOW_VOLUME
End

;------------------------------------------------------------------------------

;Gondor Buildable Wall Foundation -- the area where faction gondor walls can be built on
Object GondorWallFoundation
 
  ; *** ART Parameters ***

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    
    DefaultModelConditionState
      Model = GBFoundationL
    End

	ModelConditionState = WORLD_BUILDER
  	  Model = RBWalls
	End    
  End
  
  ;PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:GondorWallFoundation
  Side                = Gondor
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160

  CommandSet = GondorWallFoundationCommandSet


  ; *** AUDIO Parameters ***

	VoiceSelect	= Gui_PlotSelect


  ; *** ENGINEERING Parameters ***

  RadarPriority       = STRUCTURE
  KindOf              = STRUCTURE SELECTABLE IMMOBILE BASE_FOUNDATION UNATTACKABLE MP_COUNT_FOR_VICTORY NO_COLLIDE DO_NOT_CLASSIFY MADE_OF_STONE
 
  Behavior            = FoundationAIUpdate ModuleTag_foundationAI
  End

  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  Body                = StructureBody ModuleTag_05
    MaxHealth         = 15000.0
  End
 
  Geometry              = BOX
  GeometryMajorRadius   = 24.0
  GeometryMinorRadius   = 16.0
  GeometryHeight        = 0.8
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  BuildCompletion		= PLACED_BY_PLAYER
End



;------------------------------------------------------------------------------ 
;Gondor Farm
ChildObject GondorFarm FarmInterface
 
  Draw = W3DScriptedModelDraw ModuleTag_Draw_HCBanner
    OkToChangeModelColor  = Yes
   	DefaultModelConditionState
		Model = GBHCFarm
    End
    MultiPlayerOnly = Yes 
  End
    
	DisplayName         = OBJECT:GondorFarm
	Description 	    = OBJECT:GondorFarmDescription
	Side                = Gondor
	BuildCost           = GONDOR_FARM_BUILDCOST
	BuildTime           = GONDOR_FARM_BUILDTIME          ; in seconds
	BountyValue         = GONDOR_FARM_BOUNTY_VALUE
	ShroudClearingRange = GONDOR_FARM_SHROUD_CLEAR

	;;--- to allow generation of peasants ----------------
	CommandSet          = GondorFarmCommandSet

	;----------------------- AUDIO ------------------------

	VoiceSelect			= GondorFarmSelect


	;---------------------------------------------------

	WeaponSet
		Conditions			= None
	End

	WeaponSet
		Weapon				= PRIMARY GondorStructureBow
		Conditions			= PLAYER_UPGRADE
		AutoChooseSources	= PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End

	Behavior            = GettingBuiltBehavior GetBuiltBehaviorTag
		WorkerName		  = GondorWorkerNoSelect
	End

	Body                = StructureBody ModuleTag_05
		MaxHealth         		  	= GONDOR_FARM_HEALTH
		MaxHealthDamaged  			= GONDOR_FARM_HEALTH_DAMAGED
		MaxHealthReallyDamaged 		= GONDOR_FARM_HEALTH_REALLY_DAMAGED
	    
		DamageCreationList = OCL_BuildingDamageList01 CATAPULT_ROCK
		DamageCreationList = OCL_GBFarm_Chunk1 CATAPULT_ROCK FRONT_DESTROYED
		DamageCreationList = OCL_GBFarm_Chunk2 CATAPULT_ROCK RIGHT_DESTROYED
		DamageCreationList = OCL_GBFarm_Chunk3 CATAPULT_ROCK BACK_DESTROYED
		DamageCreationList = OCL_GBFarm_Chunk4 CATAPULT_ROCK LEFT_DESTROYED
	End

	Behavior = AutoDepositUpdate AutoDepositModuleTag
		DepositTiming			= GONDOR_FARM_MONEY_TIME   ; in milliseconds
		DepositAmount			= GONDOR_FARM_MONEY_AMOUNT   ; cash amount to deposit every DepositTiming
		InitialCaptureBonus		= 0  ; no initial bonus
	    
		Upgrade					= Upgrade_MarketplaceUpgradeGrandHarvest  
		UpgradeBonusPercent		= GONDOR_GRANDHARVEST_PRODUCTION_INCREASE %
		UpgradeMustBePresent	= ANY +GondorMarketPlace
	End

	Behavior = CostModifierUpgrade ModuleTag_CostModifier
		StartsActive = Yes ; Run on build complete, not upgrade
		LabelForPalantirString = GUI:FOOD_DISCOUNT
		ObjectFilter	= ANY +CAVALRY 
		;LabelForPalantirString = GUI:GONDOR_FARM_CAVALRY_Discount 
		Percentage		= 0%
		Percentage		= -10%
		Percentage		= -15%
		Percentage		= -20%
		Percentage		= -25%
		Percentage		= -30%
	End
	
	; Same as farm interface, except without the AUTO_RALLYPOINT
	KindOf = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE NEED_BASE_FOUNDATION CASTLE_KEEP FS_FACTORY ATTACK_NEEDS_LINE_OF_SIGHT CAN_ATTACK MADE_OF_STONE
	
End

;------------------------------------------------------------------------------ 
ChildObject GondorFarmMultiplayer GondorFarm

	PlacementViewAngle  = 45

	KindOf		= PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE NEED_BASE_FOUNDATION MP_COUNT_FOR_VICTORY CASTLE_KEEP MADE_OF_STONE ATTACK_NEEDS_LINE_OF_SIGHT CAN_ATTACK
	RefundValue	= 100									; Half the cost of an economy plot.
	BuildCost	= GONDOR_FLAG_ECONOMY_UNPACK_COST		; Bit of a hack, but stops build canceling from getting the wrong price.
  
	Behavior = ExperienceLevelCreate CreateExperienceLevel
		LevelToGrant = 2
	End
  
End

;------------------------------------------------------------------------------ 
;Gondor Barracks
Object GondorBarracks

	SelectPortrait = BPGBarracks
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw

	ExtraPublicBone = ARROW_01
	ExtraPublicBone = ARROW_02
	ExtraPublicBone = ARROW_05
	ExtraPublicBone = ARROW_06
	ExtraPublicBone = ARROW_07
	ExtraPublicBone = ARROW_08
	ExtraPublicBone = ARROW_09
	ExtraPublicBone = ARROW_10
	ExtraPublicBone = ARROW_11
	ExtraPublicBone = ARROW_12
	ExtraPublicBone = ARROW_15
	ExtraPublicBone = ARROW_16
	ExtraPublicBone = ARROW_17
	ExtraPublicBone = ARROW_18
	ExtraPublicBone = ARROW_19
	ExtraPublicBone = ARROW_20
	ExtraPublicBone = ARROW_21
	ExtraPublicBone = ARROW_22
	ExtraPublicBone = ARROW_23
  
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD
    DefaultModelConditionState
		Model = GBBarracks_SKN		
		WeaponLaunchBone = PRIMARY ARROW_
    End
    
   IdleAnimationState
		Animation = IDLE
			AnimationName		=	GBBarracks_2SKL.GBBarracks_2IDB
			AnimationMode			=	ONCE	
			AnimationBlendTime = 0
		End		
		Animation = IDLE
			AnimationName		=	GBBarracks_2SKL.GBBarracks_2IDA
			AnimationMode			=	ONCE	
			AnimationBlendTime = 0
		End
;;		ParticleSysBone   = GLOWBONE06 TorchGlow FollowBone:Yes
;;		ParticleSysBone   = GLOWBONE11 TorchGlow FollowBone:Yes		

		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "BeingConstructed" then 
			    ; Don't play completed sound when canceling build-in-progress or when
			    ; destroyed halfway
			    if not CurDrawableModelcondition( "DYING" ) then 
					CurDrawablePlaySound("CampSoldierCompleteGondorBarracks")		;"GondorMasonBarracksComplete"
				end
			end
		EndScript
			
	End	


    ;------------ New Build Up States coming soon. 
    ModelConditionState   = AWAITING_CONSTRUCTION 
      Model               = GBBarracks_A
;		ParticleSysBone	  = NONE BuildingDoughnutCloud
    End;
    AnimationState        = AWAITING_CONSTRUCTION
      Animation           =  GBBarracks_A
        AnimationName     =  GBBarracks_ASKL.GBBarracks_ABLD
        AnimationMode     = MANUAL
        AnimationBlendTime = 0
      End
	  Flags				  = START_FRAME_FIRST
    End

    ModelConditionState   = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
      Model               = GBBarracks_A
		ParticleSysBone   = CONSTDUSTBONE01 BuildingContructDust FollowBone:Yes
    End;
    AnimationState        = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
		Animation           = GBBarracks_A
			AnimationName     = GBBarracks_ASKL.GBBarracks_ABLD
			AnimationMode     = MANUAL
			AnimationBlendTime = 0
		End
		Flags				  = START_FRAME_FIRST
		StateName			  = BeingConstructed
		BeginScript
			CurDrawablePlaySound("GondorBarracksBeginConstruction")
			CurDrawableHideSubObjectPermanently("V1")
			CurDrawableHideSubObjectPermanently("V1FLAG")
			CurDrawableHideSubObjectPermanently("V2")
		EndScript
    End
    
	    
        ;--damaged building
      ModelConditionState  = DESTROYED_FRONT
      Model         = GBBarracks_D2  
		ParticleSysBone FireSmall01 FireBuildingLarge
		ParticleSysBone FireSmall02 FireBuildingLarge
		ParticleSysBone FireSmall03 FireBuildingMedium
		ParticleSysBone FireSmall04 FireBuildingMedium
		ParticleSysBone FireSmall05 SmokeBuildingLarge
    End
    AnimationState = DESTROYED_FRONT
      BeginScript
        CurDrawableHideSubObject("GBBARRACKSDP1")
      EndScript
    End
    
        ModelConditionState  = DESTROYED_RIGHT
      Model         = GBBarracks_D2  
		ParticleSysBone FireSmall01 FireBuildingLarge
		ParticleSysBone FireSmall02 FireBuildingLarge
		ParticleSysBone FireSmall03 FireBuildingMedium
		ParticleSysBone FireSmall04 FireBuildingMedium
		ParticleSysBone FireSmall05 SmokeBuildingLarge
    End

    AnimationState = DESTROYED_RIGHT
      BeginScript
        CurDrawableHideSubObject("GBBARRACKSDP2")
      EndScript
    End
    

    ModelConditionState  = DESTROYED_BACK
      Model         = GBBarracks_D2  
		ParticleSysBone FireSmall01 FireBuildingLarge
		ParticleSysBone FireSmall02 FireBuildingLarge
		ParticleSysBone FireSmall03 FireBuildingMedium
		ParticleSysBone FireSmall04 FireBuildingMedium
		ParticleSysBone FireSmall05 SmokeBuildingLarge
    End

    AnimationState = DESTROYED_BACK
      BeginScript
        CurDrawableHideSubObject("GBBARRACKSDP3")
      EndScript
    End

	ModelConditionState  = DESTROYED_LEFT
      Model         = GBBarracks_D2  
		ParticleSysBone FireSmall01 FireBuildingLarge
		ParticleSysBone FireSmall02 FireBuildingLarge
		ParticleSysBone FireSmall03 FireBuildingMedium
		ParticleSysBone FireSmall04 FireBuildingMedium
		ParticleSysBone FireSmall05 SmokeBuildingLarge
    End
    
    AnimationState = DESTROYED_LEFT
      BeginScript
        CurDrawableHideSubObject("GBBARRACKSDP4")
      EndScript
    End
    
    
    ModelConditionState  = DAMAGED
      Model         = GBBarracks_D1  
		ParticleSysBone FireSmall01 FireBuildingLarge
		ParticleSysBone FireSmall02 FireBuildingMedium
		ParticleSysBone FireSmall03 FireBuildingMedium
		ParticleSysBone FireSmall04 FireBuildingMedium
		ParticleSysBone FireSmall05 SmokeBuildingLarge
    End
    AnimationState = DAMAGED
	EnteringStateFX	= FX_BuildingDamaged
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = GBBarracks_D2  
		ParticleSysBone FireSmall01 FireBuildingLarge
		ParticleSysBone FireSmall02 FireBuildingLarge
		ParticleSysBone FireSmall03 FireBuildingMedium
		ParticleSysBone FireSmall04 FireBuildingMedium
		ParticleSysBone FireSmall05 SmokeBuildingLarge
	
    End
    AnimationState = REALLYDAMAGED
	EnteringStateFX	= FX_BuildingReallyDamaged
    End

    ModelConditionState  = RUBBLE
      Model         = GBBarracks_D2  
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End
    
    AnimationState = RUBBLE
      BeginScript
        CurDrawableHideSubObject("GBBARRACKSDP1")
        CurDrawableHideSubObject("GBBARRACKSDP2")
        CurDrawableHideSubObject("GBBARRACKSDP3")
        CurDrawableHideSubObject("GBBARRACKSDP4")
      EndScript
    End

    ModelConditionState  = POST_RUBBLE
		Model         = None
		ParticleSysBone NONE SmokeBuildingMediumRubble
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
		ParticleSysBone NONE SmokeBuildingMediumRubble
    End
End

  
  Draw = W3DFloorDraw ModuleTag_DrawFloor    
		StaticModelLODMode = Yes		; THIS NEEDS TO BE COMMENTED OUT WHEN ENGINEERING ENABLES LOD'S IN THE FLOOR DRAW
     ModelName = GBBarracks_Bib
  End
  

  PlacementViewAngle  = 270

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:GondorBarracks
  Description 	      = OBJECT:GondorBarracksDescription
  Side                = Gondor
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = GONDOR_BARRACKS_BUILDCOST
  BuildTime           = GONDOR_BARRACKS_BUILDTIME          ; in seconds
  BountyValue         = GONDOR_BARRACKS_BOUNTY_VALUE
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = GONDOR_BARRACKS_SHROUD_CLEAR


  
  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    ;DamageFX          = StructureDamageFXNoShake
  End
  CommandSet          = GondorBarracksCommandSet

	WeaponSet
		Conditions			= None
	End

	WeaponSet
		Weapon				= PRIMARY GondorStructureBow
		Conditions			= PLAYER_UPGRADE
		AutoChooseSources	= PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End
 

  ; *** AUDIO Parameters ***

	VoiceSelect		= GondorBarracksSelect

	SoundOnDamaged		= BuildingLightDamageStone
	SoundOnReallyDamaged	= BuildingHeavyDamageStone
 
	VoiceSelectUnderConstruction	= BuildingGoodVoiceSelectUnderConstruction

	UnitSpecificSounds
		UnderConstruction		= BuildingConstructionLoop  ; Built first time
		; UnderRepairFromDamage	= NoSound					; Repaired No animation on the building, so don't bother playing sound
		UnderRepairFromRubble	= BuildingConstructionLoop	; Repaired from completely destroyed (not used???)
	End


  ; *** ENGINEERING Parameters ***

  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE CAPTURABLE FS_FACTORY AUTO_RALLYPOINT MP_COUNT_FOR_VICTORY NEED_BASE_FOUNDATION ATTACK_NEEDS_LINE_OF_SIGHT CAN_ATTACK MADE_OF_STONE
 
  Behavior            = GettingBuiltBehavior ModuleTag_04
    WorkerName	= GondorWorkerNoSelect
  End

  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

	Behavior = AIUpdateInterface ModuleTag_SoWeCanUseWeapon
		AutoAcquireEnemiesWhenIdle	= Yes
		MoodAttackCheckRate			= 250
	End

;  Behavior = OpenContain OpenContainModuleTag_01
;    ContainMax         = 1
; 	AllowAlliesInside  = Yes
; 	AllowEnemiesInside = No
; 	AllowNeutralInside = No
;  End

  Body                    = ActiveBody ModuleTag_05
    MaxHealth             = GONDOR_BARRACKS_HEALTH
    MaxHealthDamaged      = GONDOR_BARRACKS_HEALTH_DAMAGED
	MaxHealthReallyDamaged  = GONDOR_BARRACKS_HEALTH_REALLY_DAMAGED
    DamageCreationList = OCL_BuildingDamageList01 CATAPULT_ROCK
    
    DamageCreationList = OCL_GBBarracksN2D2_Chunk1 CATAPULT_ROCK FRONT_DESTROYED
    DamageCreationList = OCL_GBBarracksN2D2_Chunk2 CATAPULT_ROCK RIGHT_DESTROYED
    DamageCreationList = OCL_GBBarracksN2D2_Chunk3 CATAPULT_ROCK BACK_DESTROYED
    DamageCreationList = OCL_GBBarracksN2D2_Chunk4 CATAPULT_ROCK LEFT_DESTROYED
    
  End

	Behavior = RefundDie ModuleTag_refund
		UpgradeRequired = Upgrade_MarketplaceUpgradeDefiance
		BuildingRequired = ANY +GondorMarketPlace
		RefundPercent = 50%
	End

  Behavior = ProductionUpdate ModuleTag_06
    ; nothing
  End

  Behavior = QueueProductionExitUpdate ModuleTag_07
    UnitCreatePoint    = X:-28.0 Y:-32.0 Z:0.0
    NaturalRallyPoint  = X:50.0 Y:55.0 Z:0.0
    ExitDelay = 750
  End
  
  Behavior                  = StructureCollapseUpdate ModuleTag_08
    MinCollapseDelay        = 000
    MaxCollapseDelay        = 000
    CollapseDamping         = .5
    MaxShudder              = 0.6
    MinBurstDelay           = 250
    MaxBurstDelay           = 800
    BigBurstFrequency       = 4
    FXList                  = INITIAL   FX_StructureMediumCollapse
    FXList                  = ALMOST_FINAL  FX_StructureAlmostCollapse
	DestroyObjectWhenDone	= Yes
	CollapseHeight			= 155
  End
  


;  Behavior = FlammableUpdate ModuleTag_14
;    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
;    AflameDamageAmount = 5       ; taking this much damage...
;    AflameDamageDelay = 500       ; this often.
;  End
 
;  Behavior = TransitionDamageFX ModuleTag_15
;    ;-------------DESIGNED FOR SMALL SIZED FACTION BUILDING TRANSITIONS-------------------
;    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
;    ;---------------------------------------------------------------------------------------
;    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
;    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
;    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
;  End
 
	AttackContactPoint = X:-24 Y:-24 Z:92
	GeometryContactPoint = X:-39 Y:-39 Z:0 Repair
	GeometryContactPoint = X: 39 Y:-39 Z:0 Repair
	GeometryContactPoint = X:-39 Y: 39 Z:0 Repair
	GeometryContactPoint = X:10 Y: 10 Z:0 Bomb

  Behavior                  = BuildingBehavior BuildingModuleTag
   ; NightWindowName         = WINDOW_N01
   ; FireWindowName         = WINDOW_F01
   ; GlowWindowName	    = WINDOW_G01
   ; FireName		    = FIRE01
  End

	Behavior = SubObjectsUpgrade ModuleTag_HideAll
		TriggeredBy		= Upgrade_StructureLevel1
		HideSubObjects	= V1 V1FLAG V2 V2A
	End

	Behavior = SubObjectsUpgrade ModuleTag_ShowWallsAndFlag
		TriggeredBy		= Upgrade_StructureLevel2
		ShowSubObjects	= V1 V1FLAG
		HideSubObjects	= V2 V2A 
	End

	Behavior = SubObjectsUpgrade ModuleTag_ShowTowersAndHideFlag
		TriggeredBy		= Upgrade_StructureLevel3
		ShowSubObjects	= V1 V2 V2A 
		HideSubObjects	= V1FLAG
	End
	
	Behavior = GeometryUpgrade Geom_ModuleTag_HideAll
		TriggeredBy		= Upgrade_StructureLevel1
		ShowGeometry	= Geom_Orig
		HideGeometry	= Geom_V2 
	End
	Behavior = GeometryUpgrade Geom_ModuleTag_ShowWalls 
		TriggeredBy		= Upgrade_StructureLevel2
		ShowGeometry	= Geom_Orig
		HideGeometry	= Geom_V2 
	End
  	Behavior = GeometryUpgrade Geom_ModuleTag_ShowFlagsAndTower 
		TriggeredBy		= Upgrade_StructureLevel3
		ShowGeometry	= Geom_V2
		HideGeometry	= Geom_Orig
	End
	
  	Behavior = WeaponSetUpgrade ModuleTag_ThirdLevelBuildingArrows
		TriggeredBy		= Upgrade_StructureLevel3
		ConflictsWith	= Upgrade_EasyAIMultiPlayer
	End

	;Behavior = CommandSetUpgrade ModuleTag_commandSetUpgrade
	;	TriggeredBy = Upgrade_RohanAllies
	;	CommandSet = GondorBarracksRohanAlliesUpgradedCommandSet
	;End	 

  ;; This is required for setting rally points which needs a small geometry to determine if quick path exists in tight spaces
  ;; If this was any bigger, it would fail to create the rallu points when in a camp or castle.
  Geometry              = CYLINDER
  GeometryMajorRadius   = 8.0
  GeometryMinorRadius   = 8.0
  GeometryHeight        = 10

  ;; These are the actual building geometry pieces
  AdditionalGeometry    = BOX
  GeometryName			= Geom_Orig
  GeometryMajorRadius   = 20.0
  GeometryMinorRadius   = 20.0
  GeometryHeight        = 75.0
  GeometryOffset		= X:-22 Y:-30 Z:0

  AdditionalGeometry    = BOX
  GeometryName			= Geom_Orig
  GeometryMajorRadius   = 45.0
  GeometryMinorRadius   = 50.0
  GeometryHeight        = 40.0
  GeometryOffset		= X:0 Y:0 Z:0

  AdditionalGeometry    = BOX
  GeometryName			= Geom_V2
  GeometryMajorRadius   = 20.0
  GeometryMinorRadius   = 20.0
  GeometryHeight        = 105.0
  GeometryOffset		= X:-22 Y:-30 Z:0

  AdditionalGeometry    = BOX
  GeometryName			= Geom_V2
  GeometryMajorRadius   = 45.0
  GeometryMinorRadius   = 50.0
  GeometryHeight        = 60.0
  GeometryOffset		= X:0 Y:0 Z:0


  GeometryIsSmall       = No
  
  Shadow                = SHADOW_VOLUME
  BuildCompletion		= PLACED_BY_PLAYER
  
  GeometryContactPoint = X:-49.644	Y:19.165	Z:0		Repair
  GeometryContactPoint = X:49.096	Y:-20.653	Z:0		Repair
  GeometryContactPoint = X:-9.861	Y:51.413	Z:0
  GeometryContactPoint = X:-33.314	Y:-54.902	Z:0
  GeometryContactPoint = X:-20.106	Y:-25.298	Z:89.3	Swoop

End



;---------------------------------------------------------------------------------
;Gondor MarketPlace
Object GondorMarketPlace

	SelectPortrait = BPGMarketplace
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD    
;	ExtraPublicBone = WINDOW_N
;	ExtraPublicBone = WINDOW_F
;	ExtraPublicBone = WINDOW_G
;	ExtraPublicBone = FIRE6:28 PM 3/11/2004
	    
    DefaultModelConditionState
      Model					= GBMarket_SKN
    End

		IdleAnimationState
		StateName					=   STATE_Idle
			Animation = IdleA
				AnimationName		=	GBMarket_SKL.GBMarket_IDL
				AnimationMode		=	ONCE 
				AnimationPriority	=	10
			End
			Flags					= RESTART_ANIM_WHEN_COMPLETE 

			;BeginScript
			;	Prev = CurDrawablePrevAnimationState()
			;	if Prev == "BeingConstructed" then 
				    ; Don't play completed sound when canceling build-in-progress or when
				    ; destroyed halfway
			;	    if not CurDrawableModelcondition( "DYING" ) then 
			;			CurDrawablePlaySound("CampSoldierCompleteGeneric")
			;		end
			;	end
			;EndScript
		End

   ;-- building being constructed
    ModelConditionState   = AWAITING_CONSTRUCTION 
      Model               = GBMarket_A
;		ParticleSysBone	  = NONE BuildingDoughnutCloud
    End;
    AnimationState        = AWAITING_CONSTRUCTION
      Animation           = GBMarket_A
        AnimationName     = GBMarket_ASKL.GBMarket_ABLD
        AnimationMode     = MANUAL
      End
	  Flags				  = START_FRAME_FIRST
    End

    ModelConditionState   = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
      Model               = GBMarket_A
		ParticleSysBone   = DUSTBONE BuildingContructDust
    End;
    AnimationState        = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
      Animation           = GBMarket_A
        AnimationName     = GBMarket_ASKL.GBMarket_ABLD
        AnimationMode     = MANUAL
      End
	Flags		= START_FRAME_FIRST
	StateName	= BeingConstructed
	BeginScript
		CurDrawablePlaySound("GondorBarracksBeginConstruction")
	EndScript
    End


    
	;ModelConditionState = BURNT_MODEL
	;	Model = GBMrkplace_D	
	;End

    ModelConditionState  = DESTROYED_FRONT
      Model         = GBMarket_D2
      ParticleSysBone FireSmall01 FireBuildingSmall
      ParticleSysBone FireSmall02 FireBuildingLarge
      ParticleSysBone FireSmall03 FireBuildingMedium
      ParticleSysBone FireSmall04 FireBuildingLarge
      ParticleSysBone FireSmall05 FireBuildingMedium
      ParticleSysBone FireSmall06 FireBuildingMedium
      ParticleSysBone SmokeMedium01 SmokeBuildingLarge
    End

    AnimationState = DESTROYED_FRONT
      BeginScript
        CurDrawableHideSubObject("GBMARKET_DP01")
      EndScript
    End
    
    ModelConditionState  = DESTROYED_LEFT
      Model         = GBMarket_D2
      ParticleSysBone FireSmall01 FireBuildingSmall
      ParticleSysBone FireSmall02 FireBuildingLarge
      ParticleSysBone FireSmall03 FireBuildingMedium
      ParticleSysBone FireSmall04 FireBuildingLarge
      ParticleSysBone FireSmall05 FireBuildingMedium
      ParticleSysBone FireSmall06 FireBuildingMedium
      ParticleSysBone SmokeMedium01 SmokeBuildingLarge
    End

    AnimationState = DESTROYED_LEFT
      BeginScript
        CurDrawableHideSubObject("GBMARKET_DP02")
      EndScript
    End
    
    ModelConditionState  = DESTROYED_BACK
      Model         = GBMarket_D2
      ParticleSysBone FireSmall01 FireBuildingSmall
      ParticleSysBone FireSmall02 FireBuildingLarge
      ParticleSysBone FireSmall03 FireBuildingMedium
      ParticleSysBone FireSmall04 FireBuildingLarge
      ParticleSysBone FireSmall05 FireBuildingMedium
      ParticleSysBone FireSmall06 FireBuildingMedium
      ParticleSysBone SmokeMedium01 SmokeBuildingLarge

;	  ParticleSysBone emberBone01 fireFlare FollowBone:Yes
;	  ParticleSysBone emberBone01 FireSmoke FollowBone:Yes
;	  ParticleSysBone emberBone01 campfireEmbers FollowBone:Yes
;	  ParticleSysBone emberBone01 fireGlow FollowBone:Yes
;	  ParticleSysBone emberBone01 NazgulEmitter  FollowBone:Yes
    End

    AnimationState = DESTROYED_BACK
      BeginScript
        CurDrawableHideSubObject("GBMARKET_DP03")
      EndScript
    End

	ModelConditionState  = DESTROYED_RIGHT
      Model         = GBMarket_D2
      ParticleSysBone FireSmall01 FireBuildingSmall
      ParticleSysBone FireSmall02 FireBuildingLarge
      ParticleSysBone FireSmall03 FireBuildingMedium
      ParticleSysBone FireSmall04 FireBuildingLarge
      ParticleSysBone FireSmall05 FireBuildingMedium
      ParticleSysBone FireSmall06 FireBuildingMedium
      ParticleSysBone SmokeMedium01 SmokeBuildingLarge
    End
    
    
    AnimationState = DESTROYED_RIGHT
      BeginScript
        CurDrawableHideSubObject("GBMARKET_DP04")
      EndScript
    End
    
    ModelConditionState  = DAMAGED
      Model         = GBMarket_D1
      ParticleSysBone FireSmall01 FireBuildingSmall
      ParticleSysBone FireSmall02 FireBuildingLarge
      ParticleSysBone FireSmall03 FireBuildingMedium
      ParticleSysBone FireSmall04 FireBuildingMedium
      ParticleSysBone FireSmall05 FireBuildingMedium
      ParticleSysBone FireSmall06 FireBuildingMedium
      ParticleSysBone SmokeMedium01 SmokeBuildingLarge
	
    End
    AnimationState = DAMAGED
	EnteringStateFX	= FX_BuildingDamaged
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = GBMarket_D2
      ParticleSysBone FireSmall01 FireBuildingSmall
      ParticleSysBone FireSmall02 FireBuildingLarge
      ParticleSysBone FireSmall03 FireBuildingMedium
      ParticleSysBone FireSmall04 FireBuildingLarge
      ParticleSysBone FireSmall05 FireBuildingMedium
      ParticleSysBone FireSmall06 FireBuildingMedium
      ParticleSysBone SmokeMedium01 SmokeBuildingLarge
	
    End
    AnimationState = REALLYDAMAGED
	EnteringStateFX	= FX_BuildingReallyDamaged
    End

    ModelConditionState  = RUBBLE
      Model         = GBMarket_D2
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End
    AnimationState = RUBBLE
      BeginScript
        CurDrawableHideSubObject("GBMARKET_DP01")
        CurDrawableHideSubObject("GBMARKET_DP02")
        CurDrawableHideSubObject("GBMARKET_DP03")
        CurDrawableHideSubObject("GBMARKET_DP04")
      EndScript
    End

    ModelConditionState  = POST_RUBBLE
      Model         = None
      ParticleSysBone NONE SmokeBuildingMediumRubble
    End

    ModelConditionState  = POST_COLLAPSE
      Model         = None
      ParticleSysBone NONE SmokeBuildingMediumRubble
    End

  End

  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:GondorMarket
  Description         = OBJECT:GondorMarketPlaceDescription
  Side                = Gondor
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
  
  PlacementViewAngle  = 90
 
  BuildCost           = GONDOR_MARKETPLACE_BUILDCOST
  BuildTime           = GONDOR_MARKETPLACE_BUILDTIME
  VisionRange         = GONDOR_MARKETPLACE_VISION_RANGE
  ShroudClearingRange = GONDOR_MARKETPLACE_SHROUD_CLEAR
  BountyValue         = GONDOR_MARKETPLACE_BOUNTY_VALUE
  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    ;DamageFX          = StructureDamageFXNoShake
  End

	CommandSet = MarketPlaceCommandSet 
 

  ; *** AUDIO Parameters ***

	VoiceSelect		= GondorMarketSelect

	SoundOnDamaged		= BuildingLightDamageStone
	SoundOnReallyDamaged	= BuildingHeavyDamageStone
	SoundAmbient		= GondorMarketVenderAmbience

	VoiceSelectUnderConstruction	= BuildingGoodVoiceSelectUnderConstruction

	UnitSpecificSounds
		UnderConstruction		= BuildingConstructionLoop  ; Built first time
		; UnderRepairFromDamage	= NoSound					; Repaired No animation on the building, so don't bother playing sound
		UnderRepairFromRubble	= BuildingConstructionLoop	; Repaired from completely destroyed (not used???)
	End


  ; *** ENGINEERING Parameters ***

  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE NEED_BASE_FOUNDATION MP_COUNT_FOR_VICTORY MADE_OF_STONE
 
  Behavior            = GettingBuiltBehavior GetBuiltBehaviorTag
    WorkerName		  = GondorWorkerNoSelect
  End

  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  Body                = StructureBody ModuleTag_05
    MaxHealth        		    = GONDOR_MARKETPLACE_HEALTH
    MaxHealthDamaged  		  	= GONDOR_MARKETPLACE_HEALTH_DAMAGED
    MaxHealthReallyDamaged 		= GONDOR_MARKETPLACE_HEALTH_REALLY_DAMAGED
   
   ;these correspond to the old marketplace
    DamageCreationList = OCL_BuildingDamageList01 CATAPULT_ROCK
   
  
    DamageCreationList = OCL_GBMrkPlace_Chunk1 CATAPULT_ROCK FRONT_DESTROYED
    DamageCreationList = OCL_GBMrkPlace_Chunk2 CATAPULT_ROCK LEFT_DESTROYED
    DamageCreationList = OCL_GBMrkPlace_Chunk3 CATAPULT_ROCK BACK_DESTROYED
    DamageCreationList = OCL_GBMrkPlace_Chunk4 CATAPULT_ROCK RIGHT_DESTROYED
      
  End
  
  	Behavior = RefundDie ModuleTag_refund
		UpgradeRequired = Upgrade_MarketplaceUpgradeDefiance
		BuildingRequired = ANY +GondorMarketPlace
		RefundPercent = 50%
	End


  Behavior                  = StructureCollapseUpdate ModuleTag_06
    MinCollapseDelay        = 000
    MaxCollapseDelay        = 000
    CollapseDamping         = .5
    MaxShudder              = 0.6
    MinBurstDelay           = 250
    MaxBurstDelay           = 800
    BigBurstFrequency       = 4
    FXList                  = INITIAL   FX_StructureMediumCollapse
    FXList                  = ALMOST_FINAL  FX_StructureAlmostCollapse
	DestroyObjectWhenDone	= Yes
	CollapseHeight			= 136
  End

;	Behavior = CostModifierUpgrade ModuleTag_CostModifier1
;	LabelForPalantirString = GUI:GOLD_DISCOUNT
;	TriggeredBy		= Upgrade_StructureLevel1
;	UpgradeDiscount		= Yes
;	Percentage		= 0%
;	Percentage		= -50%
;	End

  
  Behavior                  = BuildingBehavior BuildingModuleTag
;    NightWindowName         = WINDOW_N01
 ;   FireWindowName          = WINDOW_F01
 ;   GlowWindowName	    = WINDOW_G01
 ;   FireName		    = FIRE01
 ;   FireName		    = FIRE02
  End
  
  
  Behavior = FlammableUpdate FlammableModuleTag_15
  ;  AflameDuration = 20000 ; Burn for 5 seconds and then put it out
  ;  AflameDamageDelay = 999999 ; No lag, just for looks.
  ;  AflameDamageAmount = 0
  ;  FlameDamageLimit = 1; Catch fire from just 1 flame damage point
    
;    SwapModelWhenAflame = Yes
;    SwapModelWhenQuenched = Yes
;    SwapTextureWhenAflame = Yes
;    SwapTextureWhenQuenched = Yes
    
    FireFXList = FX:FX_ForgeChimneySmoke BONE:FireSmall01 	; TEMP
    FireFXList = FX:FX_ForgeChimneySmoke BONE:FireSmall02	; TEMP
    FireFXList = FX:FX_ForgeChimneySmoke BONE:FireSmall03	; TEMP
    FireFXList = FX:FX_ForgeChimneySmoke BONE:FireSmall04	; TEMP
    FireFXList = FX:FX_ForgeChimneySmoke BONE:FireSmall05	; TEMP
    FireFXList = FX:FX_ForgeSteam BONE:FireMedium01		; TEMP
    FireFXList = FX:FX_ForgeSteam BONE:FireMedium02		; TEMP
    FireFXList = FX:FX_ForgeSparks BONE:FireLarge01		; TEMP
  End


  Behavior = ProductionUpdate ModuleTag_Production
    ;This structure produces three Player-level upgrades
    ; Please see MarketplaceCommandSet
	;IronOre
	;GrandHarvest
	;Defiance
  End

	Geometry				= BOX
    GeometryName			= Geom_Orig
  	GeometryMajorRadius		= 40.0
	GeometryMinorRadius		= 40.0
	GeometryHeight			= 40.0
	GeometryOffset			= X:0 Y:-5 Z:0	
		
	AdditionalGeometry		= BOX
	GeometryName			= Geom_Orig
	GeometryMajorRadius		= 11.0
	GeometryMinorRadius		= 11.0
	GeometryHeight			= 72.0
	GeometryOffset			= X:-18 Y:16 Z:0	
	
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER
  
	GeometryContactPoint = X:-39.096	Y:29.007	Z:0			Repair
	GeometryContactPoint = X:44.915		Y:-26.008	Z:0			Repair
	GeometryContactPoint = X:24.669		Y:36.984	Z:0
	GeometryContactPoint = X:-1.623		Y:-45.628	Z:0
	GeometryContactPoint = X:-17.937	Y:17.244	Z:73.532	Swoop

End

;------------------------------------------------------------------------------
Object GondorWell

  ; *** ART Parameters ***
	SelectPortrait = BPGWell
 
  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    StaticModelLODMode    = yes
    DefaultModelConditionState
      Model = GBWell
      ParticleSysBone = None WellHealFX
    End
    
    
       ;------------ New Build Up States coming soon. 
    ModelConditionState   = AWAITING_CONSTRUCTION 
		Model               = GBWell_A
;		ParticleSysBone	  = NONE BuildingDoughnutCloud
    End
    AnimationState        = AWAITING_CONSTRUCTION
		Animation           =  GBWell_A
			AnimationName     =  GBWell_A.GBWell_A
			AnimationMode     = MANUAL
			AnimationBlendTime = 0
		End
		Flags				  = START_FRAME_FIRST
    End

    ModelConditionState   = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
      Model               = GBWell_A
		ParticleSysBone   = CONSTDUSTBONE01 BuildingContructDust FollowBone:Yes
    End
    
    AnimationState        = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
		Animation           = GBWell_A
			AnimationName     = GBWell_A.GBWell_A
			AnimationMode     = MANUAL
			AnimationBlendTime = 0
		End
		Flags				  = START_FRAME_FIRST
		StateName			  = BeingConstructed
		BeginScript
			CurDrawablePlaySound("GondorBarracksBeginConstruction")
		EndScript
    End
    
    ;--damaged building
    
    ModelConditionState  = DAMAGED
      Model         = GBWell_D1
    End
    AnimationState = DAMAGED
;       ParticleSysBone NONE SmokeBuildingSmall
;       ParticleSysBone NONE TrebuchetImpactDebris
		EnteringStateFX	= FX_BuildingDamaged
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = GBWell_D2 
    End
    AnimationState = REALLYDAMAGED
;		ParticleSysBone NONE SmokeBuildingLarge
;		ParticleSysBone NONE TrebuchetImpactDebris
		EnteringStateFX	= FX_BuildingReallyDamaged
    End

    ModelConditionState  = RUBBLE
      Model         = GBWell_D3  
      ParticleSysBone NONE SmokeBuildingLarge
      ParticleSysBone NONE TrebuchetImpactDebris
    End
    
    AnimationState = RUBBLE
    End

    ModelConditionState  = POST_RUBBLE
		Model         = None
		ParticleSysBone NONE SmokeBuildingMediumRubble
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
		ParticleSysBone NONE SmokeBuildingMediumRubble
    End
    
    
  End

  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:GondorWell
  Description         = OBJECT:GondorWellDescription
  Side                = Gondor
	IsTrainable = No
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = GONDOR_WELL_BUILDCOST				
  BuildTime           = GONDOR_WELL_BUILDTIME				; in seconds
  VisionRange         = GONDOR_WELL_VISIONRANGE				; Shroud clearing distance
  ShroudClearingRange = GONDOR_WELL_SHROUDCLEAR
  BountyValue         = GONDOR_WELL_BOUNTY_VALUE				
  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    ;DamageFX          = StructureDamageFXNoShake
  End
  
  CommandSet = SellableCommandSet



; For Testing Purposes


  ; *** AUDIO Parameters ***

	VoiceSelect		= GondorWellSelect

	SoundOnDamaged		= BuildingLightDamageStone
	SoundOnReallyDamaged	= BuildingHeavyDamageStone
	SoundAmbient = WaterFountain1AmbientLoop
 
	VoiceSelectUnderConstruction	= BuildingGoodVoiceSelectUnderConstruction

	UnitSpecificSounds
		UnderConstruction		= BuildingConstructionLoop  ; Built first time
		; UnderRepairFromDamage	= NoSound					; Repaired No animation on the building, so don't bother playing sound
		UnderRepairFromRubble	= BuildingConstructionLoop	; Repaired from completely destroyed (not used???)
	End


  ; *** ENGINEERING Parameters ***

  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE NEED_BASE_FOUNDATION MP_COUNT_FOR_VICTORY MADE_OF_STONE
 
  Behavior            = GettingBuiltBehavior GetBuiltBehaviorTag
    ;WorkerName		  = ""; instead of GondorWorker, the Gondor well builds itself
    SelfBuildingLoop = BuildingConstructionLoop ; Only played if we DON'T spawn a worker
	SelfRepairFromDamageLoop  = NoSound         ; This doesn't cause an animation, so don't bother playing a sound
	SelfRepairFromRubbleLoop  = BuildingConstructionLoop
  End

  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  CommandSet = GondorWellCommandSet

  Body                      = StructureBody ModuleTag_05
    MaxHealth               = GONDOR_WELL_MAXHEALTH				
    MaxHealthDamaged        = GONDOR_WELL_MAXHEALTHDAMAGED			
  	MaxHealthReallyDamaged  = GONDOR_WELL_MAXHEALTH_REALLYDAMAGED		
  End


	Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
		DestructionDelay  = 5000
	End
  
	Behavior                  = StructureCollapseUpdate ModuleTag_StructureCollapseUpdate
		MinCollapseDelay        = 000
		MaxCollapseDelay        = 000
		CollapseDamping         = .5
		MaxShudder              = 0.6
		MinBurstDelay           = 250
		MaxBurstDelay           = 800
		BigBurstFrequency       = 4
		FXList                  = INITIAL   FX_StructureMediumCollapse
		CollapseHeight			= 75
	End
 
	Behavior = PassiveAreaEffectBehavior ModuleTag_SplashOfHealingWater_Ahh
		EffectRadius			= 200 ; please update the decal size in experience lvl INI if you change this... the value there is about 2.2x the value here	
		PingDelay				= 2000;msec
		HealPercentPerSecond	= 3%
		AllowFilter				= ANY +INFANTRY +CAVALRY -MACHINE -IMMOBILE    
	End

	Behavior = CostModifierUpgrade ModuleTag_CostModifier
		StartsActive = Yes ; Run on build complete, not upgrade
		LabelForPalantirString = GUI:WATER_DISCOUNT
		ObjectFilter		= ANY +GondorFighterHorde +GondorArcherHorde +GondorTowerShieldGuardHorde +GondorRangerHorde
		Percentage		= -0%
		Percentage		= -20%
		Percentage		= -30%
	End
 
	;/////////////////////////////////////////////////////////
	;// BannerCarrierUpdate module for Well Object
	;/////////////////////////////////////////////////////////
	Behavior = BannerCarrierUpdate BannerCarrierUpdateModuleTag
		IdleSpawnRate			= 5000							; spawn a new member every n seconds when idle (in miliseconds)		
		UnitSpawnFX				= FX_BannerCarrierSpawnUnit		; name of particle FX to use when the BannerCarrier spawns a new unit		

		; This well object acts like a banner carrier except it spawns unit on nearby hordes instead of itself.
		ReplenishNearbyHorde		= Yes
		ScanHordeDistance		= 200
	End
 
;  Behavior = TransitionDamageFX ModuleTag_15
;    ;-------------DESIGNED FOR SMALL SIZED FACTION BUILDING TRANSITIONS-------------------
;    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
;    ;---------------------------------------------------------------------------------------
;    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
;    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
;    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
;  End
 
	Geometry              = CYLINDER
	GeometryMajorRadius   = 35.6
	GeometryHeight        = 16.8
	GeometryIsSmall       = No
	Shadow                = SHADOW_VOLUME
	BuildCompletion     = PLACED_BY_PLAYER
  
	GeometryContactPoint = X:0  Y:-40  Z:0 Grab
	GeometryContactPoint = X:-5  Y:-5  Z:16 
	GeometryContactPoint = X:-40  Y:0  Z:0 Grab
	GeometryContactPoint = X:-5  Y:5  Z:16 
	GeometryContactPoint = X:0  Y:40  Z:0 Grab
	GeometryContactPoint = X:5  Y:5  Z:16 
	GeometryContactPoint = X:40  Y:0  Z:0 Grab
	GeometryContactPoint = X:5  Y:-5  Z:16 
End

;------------------------------------------------------------------------------
	
;Gondor Catacombs (copied from MarketPlace)
Object GondorCatacombs
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

;  Draw                = W3DModelDraw ModuleTag_01
;    OkToChangeModelColor = Yes
;
;    DefaultConditionState
;      Model           = GBCatacombs
;    End
;  End

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes

    DefaultModelConditionState
      Model = GBCatacombs
    End
    
		ModelConditionState     = DAMAGED
			Model               = GBCatacombsD1
			ParticleSysBone SmokeSmall03 SmokeBuildingSmall
			ParticleSysBone SmokeSmall03 SmokeBuildingSmall	
		End  
		AnimationState = DAMAGED
			EnteringStateFX	= FX_StatueDamaged ;FX_BuildingDamaged
		End

		ModelConditionState     = REALLYDAMAGED
			Model               = GBCatacombsD2
			ParticleSysBone SmokeSmall03 SmokeBuildingSmall
			ParticleSysBone SmokeSmall03 SmokeBuildingSmall
			ParticleSysBone SmokeSmall03 SmokeBuildingSmall
		End  
		AnimationState = REALLYDAMAGED
			EnteringStateFX	= FX_StatueDamaged ;FX_BuildingReallyDamaged
		End

		ModelConditionState  = RUBBLE
			Model         = GBCatacombsD2
			ParticleSysBone SmokeSmall03 SmokeBuildingMedium
		End
	    AnimationState = RUBBLE
		End

		ModelConditionState  = POST_RUBBLE
			Model         = None
			ParticleSysBone SmokeSmall03 SmokeBuildingMediumRubble
		End

		ModelConditionState  = POST_COLLAPSE
			Model         = None
			ParticleSysBone SmokeSmall03 SmokeBuildingMediumRubble
		End
		    
  End

  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:GondorCatacombs
  Side                = Gondor
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160
;  ArmorSet
;    Conditions        = None
;    Armor             = StructureArmor
;    DamageFX          = StructureDamageFXNoShake
;  End

 
  ; *** AUDIO Parameters ***

	SoundOnDamaged		= BuildingLightDamageStone
	SoundOnReallyDamaged	= BuildingHeavyDamageStone

;  VoiceSelect         = NuclearReactorSelect
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 

  ; *** ENGINEERING Parameters ***

  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE NEED_BASE_FOUNDATION CHUNK_VENDOR MADE_OF_STONE
 
  Behavior            = GettingBuiltBehavior GetBuiltBehaviorTag
    WorkerName		  = GondorWorkerNoSelect
  End

  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  Body                = StructureBody ModuleTag_05
    MaxHealth         = 1500.0
  End
 
;  Behavior            = DestroyDie ModuleTag_07
    ;nothing
;  End

	Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
		DestructionDelay  = 5000
	End
	  
	Behavior                  = StructureCollapseUpdate ModuleTag_StructureCollapseUpdate
		MinCollapseDelay        = 000
		MaxCollapseDelay        = 000
		CollapseDamping         = .5
		MaxShudder              = 0.6
		MinBurstDelay           = 250
		MaxBurstDelay           = 800
		BigBurstFrequency       = 4
		FXList                  = INITIAL   FX_StructureSmallCollapse
	End
	
;  Behavior           = CreateObjectDie ModuleTag_08
;    CreationList     = OCL_SmallStructureDebris
;  End
 
;  Behavior = ProductionUpdate ModuleTag_10
;    ; nothing, but is required if we have any Object-level Upgrades!
;  End
 
;  Behavior = FlammableUpdate ModuleTag_14
;    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
;    AflameDamageAmount = 5       ; taking this much damage...
;    AflameDamageDelay = 500       ; this often.
;  End
 
;  Behavior = TransitionDamageFX ModuleTag_15
;    ;-------------DESIGNED FOR SMALL SIZED FACTION BUILDING TRANSITIONS-------------------
;    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
;    ;---------------------------------------------------------------------------------------
;    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
;    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
;    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
;  End
 
;  Behavior             = FXListDie ModuleTag_16
;    DeathFX       = FX_BuildingDie
;  End
 
  Geometry              = BOX
  GeometryMajorRadius   = 36.8
  GeometryMinorRadius   = 47.2
  GeometryHeight        = 36.0
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER
End

;------------------------------------------------------------------------------
;Gondor Statue
Object GondorStatue

	SelectPortrait = BPGHeroicStatue
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day


  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = GPHealstue
      ParticleSysBone = NONE StatueHeroFX
    End
  End

  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:GondorStatue
  Side                = Gondor
	IsTrainable = No
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 400
  BuildTime           = 20.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160
;  ArmorSet
;    Conditions        = None
;    Armor             = StructureArmor
;    DamageFX          = StructureDamageFXNoShake
;  End



; For Testing Purposes


  ; *** AUDIO Parameters ***

	VoiceSelect		= GondorStatueSelect

	SoundOnDamaged		= BuildingLightDamageStone
	SoundOnReallyDamaged	= BuildingHeavyDamageStone
 
	VoiceSelectUnderConstruction	= BuildingGoodVoiceSelectUnderConstruction

	UnitSpecificSounds
		UnderConstruction		= BuildingConstructionLoop  ; Built first time
		; UnderRepairFromDamage	= NoSound					; Repaired No animation on the building, so don't bother playing sound
		UnderRepairFromRubble	= BuildingConstructionLoop	; Repaired from completely destroyed (not used???)
	End
 

  ; *** ENGINEERING Parameters ***

  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE NEED_BASE_FOUNDATION MADE_OF_STONE
 
  Behavior            = GettingBuiltBehavior ModuleTag_04
    SelfBuildingLoop = BuildingConstructionLoop ; Only played if we DON'T spawn a worker
	SelfRepairFromDamageLoop  = NoSound         ; This doesn't cause an animation, so don't bother playing a sound
	SelfRepairFromRubbleLoop  = BuildingConstructionLoop
  End

  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  CommandSet = GondorStatueCommandSet

  Body                = StructureBody ModuleTag_05
    MaxHealth         = 1500.0
  End


  Behavior = CostModifierUpgrade ModuleTag_CostModifier
	LabelForPalantirString = GUI:HERO_DISCOUNT
		StartsActive = Yes ; Run on build complete, not upgrade
	ObjectFilter		= ANY +HERO
	Percentage		= 0%
	Percentage		= -10%
	Percentage		= -20%
	Percentage		= -30%
  End

  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End

;  Behavior           = CreateObjectDie ModuleTag_08
;    CreationList     = OCL_SmallStructureDebris
;  End
 
;  Behavior = ProductionUpdate ModuleTag_10
;    ; nothing, but is required if we have any Object-level Upgrades!
;  End
 
;  Behavior = FlammableUpdate ModuleTag_14
;    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
;    AflameDamageAmount = 5       ; taking this much damage...
;    AflameDamageDelay = 500       ; this often.
;  End
 
;  Behavior = TransitionDamageFX ModuleTag_15
;    ;-------------DESIGNED FOR SMALL SIZED FACTION BUILDING TRANSITIONS-------------------
;    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
;    ;---------------------------------------------------------------------------------------
;    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
;    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
;    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
;  End
 
;  Behavior             = FXListDie ModuleTag_16
;    DeathFX       = FX_BuildingDie
;  End
 
  Geometry              = BOX
  GeometryMajorRadius   = 45.6
  GeometryMinorRadius   = 37.6
  GeometryHeight        = 20.8
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER
End

;------------------------------------------------------------------------------

;Gondor HseHeal
Object GondorHseHeal
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

;  Draw                = W3DModelDraw ModuleTag_01
;    OkToChangeModelColor = Yes
;
;    DefaultConditionState
;      Model           = GBHseHeal
;    End
;  End
  
  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = GBHseHeal
    End
    ;--damaged building
      ModelConditionState  = DESTROYED_FRONT
      Model         = GBHseHeal_D
		ParticleSysBone FireSmall01 FireBuildingSmall
		ParticleSysBone FireSmall02 FireBuildingSmall
		ParticleSysBone FireSmall03 FireBuildingSmall
		ParticleSysBone FireSmall04 FireBuildingSmall
		ParticleSysBone FireMedium01 FireBuildingMedium
		ParticleSysBone FireMedium02 FireBuildingMedium
     	ParticleSysBone FireLarge01 FireBuildingLarge
     	ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End

    AnimationState = DESTROYED_FRONT
      BeginScript
        CurDrawableHideSubObject("GBHseHeal_01")
      EndScript
    End
    
        ModelConditionState  = DESTROYED_RIGHT
      Model         = GBHseHeal_D
		ParticleSysBone FireSmall01 FireBuildingSmall
		ParticleSysBone FireSmall02 FireBuildingSmall
		ParticleSysBone FireSmall03 FireBuildingSmall
		ParticleSysBone FireSmall04 FireBuildingSmall
		ParticleSysBone FireMedium01 FireBuildingMedium
		ParticleSysBone FireMedium02 FireBuildingMedium
		ParticleSysBone FireLarge01 FireBuildingLarge
		ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End

    AnimationState = DESTROYED_RIGHT
      BeginScript
        CurDrawableHideSubObject("GBHseHeal_02")
      EndScript
    End
    

    ModelConditionState  = DESTROYED_BACK
      Model         = GBHseHeal_D
		ParticleSysBone FireSmall01 FireBuildingSmall
		ParticleSysBone FireSmall02 FireBuildingSmall
		ParticleSysBone FireSmall03 FireBuildingSmall
		ParticleSysBone FireSmall04 FireBuildingSmall
		ParticleSysBone FireMedium01 FireBuildingMedium
		ParticleSysBone FireMedium02 FireBuildingMedium
		ParticleSysBone FireLarge01 FireBuildingLarge
		ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End

    AnimationState = DESTROYED_BACK
      BeginScript
        CurDrawableHideSubObject("GBHseHeal_03")
      EndScript
    End

	ModelConditionState  = DESTROYED_LEFT
      Model         = GBHseHeal_D
		ParticleSysBone FireSmall01 FireBuildingSmall
		ParticleSysBone FireSmall02 FireBuildingSmall
		ParticleSysBone FireSmall03 FireBuildingSmall
		ParticleSysBone FireSmall04 FireBuildingSmall
		ParticleSysBone FireMedium01 FireBuildingMedium
		ParticleSysBone FireMedium02 FireBuildingMedium
		ParticleSysBone FireLarge01 FireBuildingLarge
		ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End
    
    AnimationState = DESTROYED_LEFT
      BeginScript
        CurDrawableHideSubObject("GBHseHeal_04")
      EndScript
    End
    
    
    ModelConditionState  = DAMAGED
      Model         = GBHseHeal_D
		ParticleSysBone FireSmall01 FireBuildingSmall
		ParticleSysBone FireSmall02 FireBuildingSmall
		ParticleSysBone FireSmall03 FireBuildingSmall
		ParticleSysBone FireSmall04 FireBuildingSmall
		ParticleSysBone FireMedium01 FireBuildingMedium
		ParticleSysBone FireMedium02 FireBuildingMedium
		ParticleSysBone FireLarge01 FireBuildingLarge
		ParticleSysBone SmokeLarge01 SmokeBuildingLarge
	
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = GBHseHeal_D
		ParticleSysBone FireSmall01 FireBuildingSmall
		ParticleSysBone FireSmall02 FireBuildingSmall
		ParticleSysBone FireSmall03 FireBuildingSmall
		ParticleSysBone FireSmall04 FireBuildingSmall
		ParticleSysBone FireMedium01 FireBuildingMedium
		ParticleSysBone FireMedium02 FireBuildingMedium
		ParticleSysBone FireLarge01 FireBuildingLarge
		ParticleSysBone SmokeLarge01 SmokeBuildingLarge
	
    End

    ModelConditionState  = RUBBLE
      Model         = GBHseHeal_D
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End
    
    AnimationState = RUBBLE
      BeginScript
        CurDrawableHideSubObject("GBHseHeal_01")
        CurDrawableHideSubObject("GBHseHeal_02")
        CurDrawableHideSubObject("GBHseHeal_03")
        CurDrawableHideSubObject("GBHseHeal_04")
      EndScript
    End

    ModelConditionState  = POST_RUBBLE
      Model         = None
		ParticleSysBone NONE SmokeBuildingMediumRubble
    End

    ModelConditionState  = POST_COLLAPSE
      Model         = None
		ParticleSysBone NONE SmokeBuildingMediumRubble
    End  

End


  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:GondorHseHeal
  Side                = Gondor
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160
;  ArmorSet
;    Conditions        = None
;    Armor             = StructureArmor
;    DamageFX          = StructureDamageFXNoShake
;  End


  ; *** AUDIO Parameters ***

	SoundOnDamaged		= BuildingLightDamageStone
	SoundOnReallyDamaged	= BuildingHeavyDamageStone

;  VoiceSelect         = NuclearReactorSelect
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 

  ; *** ENGINEERING Parameters ***

  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE NEED_BASE_FOUNDATION
 
  Behavior            = GettingBuiltBehavior GetBuiltBehaviorTag
    WorkerName		  = GondorWorkerNoSelect
  End

  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  Body                = StructureBody ModuleTag_05
    MaxHealth         = 1500.0
    
    DamageCreationList = OCL_BuildingDamageList01 CATAPULT_ROCK
    
    DamageCreationList = OCL_GBHseHeal_Chunk1 CATAPULT_ROCK FRONT_DESTROYED
    DamageCreationList = OCL_GBHseHeal_Chunk2 CATAPULT_ROCK RIGHT_DESTROYED
    DamageCreationList = OCL_GBHseHeal_Chunk3 CATAPULT_ROCK BACK_DESTROYED
    DamageCreationList = OCL_GBHseHeal_Chunk4 CATAPULT_ROCK LEFT_DESTROYED
    
   
  End
 

  Behavior                  = StructureCollapseUpdate ModuleTag_06
    MinCollapseDelay        = 000
    MaxCollapseDelay        = 000
    CollapseDamping         = .5
    MaxShudder              = 0.6
    MinBurstDelay           = 250
    MaxBurstDelay           = 800
    BigBurstFrequency       = 4
    FXList                  = INITIAL   FX_StructureMediumCollapse
    FXList                  = ALMOST_FINAL  FX_StructureAlmostCollapse
	DestroyObjectWhenDone	= Yes
	CollapseHeight			= 76
  End

  

   Behavior                  = BuildingBehavior BuildingModuleTag
    NightWindowName         = WINDOW_N01
    FireWindowName          = WINDOW_F01
    GlowWindowName			= WINDOW_G01
    FireName				= FIRE01
    FireName				= FIRE02
  End


;  Behavior           = CreateObjectDie ModuleTag_08
;    CreationList     = OCL_SmallStructureDebris
;  End
 
;  Behavior = ProductionUpdate ModuleTag_10
;    ; nothing, but is required if we have any Object-level Upgrades!
;  End
 
  Behavior = FlammableUpdate ModuleTag_14
;    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
;    AflameDamageAmount = 5       ; taking this much damage...
;    AflameDamageDelay = 500       ; this often.
;  End
 
;  Behavior = TransitionDamageFX ModuleTag_15
;    ;-------------DESIGNED FOR SMALL SIZED FACTION BUILDING TRANSITIONS-------------------
;    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
;    ;---------------------------------------------------------------------------------------
;    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
;    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
;    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
;  End
 
;  Behavior             = FXListDie ModuleTag_16
;    DeathFX       = FX_BuildingDie
  End
 
  Geometry              = BOX
  GeometryMajorRadius   = 33.6
  GeometryMinorRadius   = 31.2
  GeometryHeight        = 32.0
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER
End


;------------------------------------------------------------------------------
;Gondor Hero Statue
Object GondorHeroStatue

	SelectPortrait = BPGHeroicStatue

	Draw = W3DScriptedModelDraw ModuleTag_Draw
		OkToChangeModelColor  = Yes
		UseStandardModelNames = Yes

		DefaultModelConditionState
			Model = GPHealstue
			ParticleSysBone	    = NONE StatueHeroFX
		End

		ModelConditionState     = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
			Model               = GPHealstue_A
;			ParticleSysBone	    = NONE BuildingDoughnutCloud
			ParticleSysBone     = NONE BuildingContructDust
		End  
		AnimationState          = ACTIVELY_BEING_CONSTRUCTED
			Animation
				AnimationName	= GPHealstue_A.GPHealstue_A
				AnimationMode   = MANUAL
			End
			BeginScript
				CurDrawablePlaySound("GondorBarracksBeginConstruction")
			EndScript
		End

		ModelConditionState     = DAMAGED
			Model               = GPHealstue_D1
		End  
		AnimationState = DAMAGED
			EnteringStateFX	= FX_StatueDamaged
		End

		ModelConditionState     = REALLYDAMAGED
			Model               = GPHealstue_D2
		End  
		AnimationState = REALLYDAMAGED
			EnteringStateFX	= FX_StatueDamaged
		End

		ModelConditionState  = RUBBLE
			Model         = GPHealstue_D2
			ParticleSysBone SmokeLarge01 SmokeBuildingLarge
		End
	    AnimationState = RUBBLE
		End

		ModelConditionState  = POST_RUBBLE
			Model         = None
			ParticleSysBone NONE SmokeBuildingMediumRubble
		End

		ModelConditionState  = POST_COLLAPSE
			Model         = None
			ParticleSysBone NONE SmokeBuildingMediumRubble
		End
   	End


  PlacementViewAngle  = 90
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:GondorHeroStatue
  Description         = OBJECT:GondorStatueDescription
  Side                = Gondor
	IsTrainable = No
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = GONDOR_STATUE_BUILDCOST
  BuildTime           = GONDOR_STATUE_BUILDTIME
  VisionRange         = GONDOR_STATUE_VISION_RANGE
  ShroudClearingRange = GONDOR_STATUE_SHROUD_CLEAR
  BountyValue         = GONDOR_STATUE_BOUNTY_VALUE
  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
;    DamageFX          = StructureDamageFXNoShake
  End



; For Testing Purposes


  ; *** AUDIO Parameters ***

	VoiceSelect		= GondorStatueSelect

	SoundOnDamaged		= BuildingLightDamageStone
	SoundOnReallyDamaged	= BuildingHeavyDamageStone
 
	VoiceSelectUnderConstruction	= BuildingGoodVoiceSelectUnderConstruction

	UnitSpecificSounds
		UnderConstruction		= BuildingConstructionLoop  ; Built first time
		; UnderRepairFromDamage	= NoSound					; Repaired No animation on the building, so don't bother playing sound
		UnderRepairFromRubble	= BuildingConstructionLoop	; Repaired from completely destroyed (not used???)
	End

	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		MaxUpdateRangeCap = 800
		AnimationSound = Sound:StatueHeroicBuildStoneExplode	Animation:GPHealstue_A.GPHealstue_A		Frames:540
		AnimationSound = Sound:StatueHeroicBuildStoneDebris1	Animation:GPHealstue_A.GPHealstue_A		Frames:560
		AnimationSound = Sound:StatueHeroicBuildStoneDebris2	Animation:GPHealstue_A.GPHealstue_A		Frames:600
	End

 
  ; *** ENGINEERING Parameters ***

  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE NEED_BASE_FOUNDATION MADE_OF_STONE
 

  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  Body                = StructureBody ModuleTag_05
    MaxHealth         		= GONDOR_STATUE_HEALTH
    MaxHealthDamaged  		= GONDOR_STATUE_HEALTH_DAMAGED
    MaxHealthReallyDamaged 	= GONDOR_STATUE_HEALTH_REALLY_DAMAGED
  End

	Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
		DestructionDelay  = 5000
	End

;  Behavior           = CreateObjectDie ModuleTag_08
;    CreationList     = OCL_SmallStructureDebris
;  End
 
;  Behavior = ProductionUpdate ModuleTag_10
;    ; nothing, but is required if we have any Object-level Upgrades!
;  End
 
 
	Behavior = PassiveAreaEffectBehavior ModuleTag_FeelGoodHero
		EffectRadius			= 200 ; please update the decal size in experience lvl INI if you change this... the value there is about 2.2x the value here
		PingDelay				= 2000;msec

		ModifierName			= HeroicStatuePassiveLeadership
		ModifierName			= HeroicStatuePassiveExperienceRateBonus
		
		AllowFilter				= ANY +INFANTRY +CAVALRY -MACHINE -IMMOBILE -HERO   
	End
 
 
 	Behavior = GettingBuiltBehavior ModuleTag_GetBuilt
		;WorkerName	= "" ;not GondorWorker, I build myself
		SpawnTimer  = 120
		RebuildWhenDead = Yes
        SelfBuildingLoop = BuildingConstructionLoop ; Only played if we DON'T spawn a worker
		SelfRepairFromDamageLoop  = NoSound         ; This doesn't cause an animation, so don't bother playing a sound
		SelfRepairFromRubbleLoop  = BuildingConstructionLoop
	End

 
   Behavior                  = StructureCollapseUpdate ModuleTag_Collapse
    MinCollapseDelay        = 000
    MaxCollapseDelay        = 000
    CollapseDamping         = .5
    MaxShudder              = 0.6
    MinBurstDelay           = 250
    MaxBurstDelay           = 800
    BigBurstFrequency       = 4
    FXList                  = INITIAL   FX_StructureMediumCollapse
    FXList                  = ALMOST_FINAL  FX_StructureAlmostCollapse
	DestroyObjectWhenDone	= Yes
	CollapseHeight			= 126
  End

	Behavior = RefundDie ModuleTag_refund
		UpgradeRequired = Upgrade_MarketplaceUpgradeDefiance
		BuildingRequired = ANY +GondorMarketPlace
		RefundPercent = 50%
	End

  Behavior = CostModifierUpgrade ModuleTag_CostModifier
	LabelForPalantirString = GUI:HERO_DISCOUNT
		StartsActive = Yes ; Run on build complete, not upgrade
	ObjectFilter	= ANY +HERO
	Percentage		= 0%
	Percentage		= -10%
	Percentage		= -20%
	Percentage		= -30%
  End


;  Behavior = FlammableUpdate ModuleTag_14
;    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
;    AflameDamageAmount = 5       ; taking this much damage...
;    AflameDamageDelay = 500       ; this often.
;  End
 
;  Behavior = TransitionDamageFX ModuleTag_15
;    ;-------------DESIGNED FOR SMALL SIZED FACTION BUILDING TRANSITIONS-------------------
;    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
;    ;---------------------------------------------------------------------------------------
;    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
;    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
;    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
;  End
 
;  Behavior             = FXListDie ModuleTag_16
;    DeathFX       = FX_BuildingDie
;  End
 
	CommandSet = SellableCommandSet
 
  Geometry              = BOX
  GeometryMajorRadius   = 6.4
  GeometryMinorRadius   = 6.4
  GeometryHeight        = 24.0
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  BuildCompletion     	= PLACED_BY_PLAYER
End



;------------------------------------------------------------------------------

;Gondor Stone Maker
Object GondorStoneMaker

	SelectPortrait = BPGStoneWorker
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  
  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD
    DefaultModelConditionState
      Model = GBStoneMK_SKN
    End

		IdleAnimationState
		StateName					=   STATE_Idle
			Animation = IdleA
				AnimationName		=	GBStoneMK_SKL.GBStoneMK_IDLA
				AnimationMode		=	ONCE 
				AnimationPriority	=	10
			End
			Flags					= RESTART_ANIM_WHEN_COMPLETE 

			;BeginScript
			;	Prev = CurDrawablePrevAnimationState()
			;	if Prev == "BeingConstructed" then 
				    ; Don't play completed sound when canceling build-in-progress or when
				    ; destroyed halfway
			;	    if not CurDrawableModelcondition( "DYING" ) then 
			;			CurDrawablePlaySound("CampSoldierCompleteGeneric")
			;		end
			;	end
			;EndScript
		End


   ;-- building being constructed
    ModelConditionState   = AWAITING_CONSTRUCTION 
      Model               = GBStoneMK_A
;		ParticleSysBone	  = NONE BuildingDoughnutCloud
    End;
    AnimationState        = AWAITING_CONSTRUCTION
      Animation           = GBStoneMK_A
        AnimationName     = GBStoneMK_ASKL.GBStoneMK_ABLD
        AnimationMode     = MANUAL
      End
	  Flags				  = START_FRAME_FIRST
    End

    ModelConditionState   = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
      Model               = GBStoneMK_A
		ParticleSysBone   = DUSTBONE BuildingContructDust
    End;
    AnimationState        = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
      Animation           = GBStoneMK_A
        AnimationName     = GBStoneMK_ASKL.GBStoneMK_ABLD
        AnimationMode     = MANUAL
      End
	Flags		= START_FRAME_FIRST
	StateName	= BeingConstructed
	BeginScript
		CurDrawablePlaySound("GondorBarracksBeginConstruction")
	EndScript
    End

    
    ;--damaged building
      ModelConditionState  = DESTROYED_FRONT
      Model         = GBStoneMK_D2
		ParticleSysBone FireSmall01 FireBuildingSmall
		ParticleSysBone FireSmall02 FireBuildingSmall
		ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End

    AnimationState = DESTROYED_FRONT
      BeginScript
        CurDrawableHideSubObject("GBStoneMK_01")
      EndScript
    End
    
        ModelConditionState  = DESTROYED_RIGHT
      Model         = GBStoneMK_D2
		ParticleSysBone FireSmall01 FireBuildingSmall
		ParticleSysBone FireSmall02 FireBuildingSmall
		ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End

    AnimationState = DESTROYED_RIGHT
      BeginScript
        CurDrawableHideSubObject("GBStoneMK_02")
      EndScript
    End
    

    ModelConditionState  = DESTROYED_BACK
      Model         = GBStoneMK_D2
		ParticleSysBone FireSmall01 FireBuildingSmall
		ParticleSysBone FireSmall02 FireBuildingSmall
		ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End

    AnimationState = DESTROYED_BACK
      BeginScript
        CurDrawableHideSubObject("GBStoneMK_03")
      EndScript
    End

	ModelConditionState  = DESTROYED_LEFT
      Model         = GBStoneMK_D2
		ParticleSysBone FireSmall01 FireBuildingSmall
		ParticleSysBone FireSmall02 FireBuildingSmall
		ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End
    
    AnimationState = DESTROYED_LEFT
      BeginScript
        CurDrawableHideSubObject("GBStoneMK_04")
      EndScript
    End
    
    
    ModelConditionState  = DAMAGED
      Model         = GBStoneMK_D1
		ParticleSysBone FireSmall01 FireBuildingSmall
		ParticleSysBone FireSmall02 FireBuildingSmall
		ParticleSysBone SmokeLarge01 SmokeBuildingLarge
	
    End
    AnimationState = DAMAGED
	EnteringStateFX	= FX_BuildingDamaged
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = GBStoneMK_D2
		ParticleSysBone FireSmall01 FireBuildingSmall
		ParticleSysBone FireSmall02 FireBuildingSmall
		ParticleSysBone SmokeLarge01 SmokeBuildingLarge
	
    End
    AnimationState = REALLYDAMAGED
	EnteringStateFX	= FX_BuildingReallyDamaged
    End

    ModelConditionState  = RUBBLE
      Model         = GBStoneMK_D2
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End
    
    AnimationState = RUBBLE
      BeginScript
        CurDrawableHideSubObject("GBStoneMK_01")
        CurDrawableHideSubObject("GBStoneMK_02")
        CurDrawableHideSubObject("GBStoneMK_03")
        CurDrawableHideSubObject("GBStoneMK_04")
      EndScript
    End

    ModelConditionState  = POST_RUBBLE
		Model         = None
		ParticleSysBone NONE SmokeBuildingMediumRubble
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
		ParticleSysBone NONE SmokeBuildingMediumRubble
    End
    
 End


 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:GondorStoneMaker
  Description 	      = OBJECT:GondorStoneworkerDescription
  Side                = Gondor
	IsTrainable = No
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
  
  PlacementViewAngle  = -90
 
  BuildCost           = GONDOR_STONEWORKER_BUILDCOST
  BuildTime           = GONDOR_STONEWORKER_BUILDTIME
  VisionRange         = GONDOR_STONEWORKER_VISION_RANGE
  ShroudClearingRange = GONDOR_STONEWORKER_SHROUD_CLEAR
  BountyValue         = GONDOR_STONEWORKER_BOUNTY_VALUE
  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    ;DamageFX          = StructureDamageFXNoShake
  End

 
  ; *** AUDIO Parameters ***

	VoiceSelect		= GondorStoneMakerSelect

	SoundOnDamaged		= BuildingLightDamageStone
	SoundOnReallyDamaged	= BuildingHeavyDamageStone
 
	VoiceSelectUnderConstruction	= BuildingGoodVoiceSelectUnderConstruction

	UnitSpecificSounds
		UnderConstruction		= BuildingConstructionLoop  ; Built first time
		; UnderRepairFromDamage	= NoSound					; Repaired No animation on the building, so don't bother playing sound
		UnderRepairFromRubble	= BuildingConstructionLoop	; Repaired from completely destroyed (not used???)
	End
 
  ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		MaxUpdateRangeCap = 800
		AnimationSound = Sound: GondorStoneMakerCrank1 Animation:GBStoneMK_SKL.GBStoneMK_IDLA Frames: 63 
		AnimationSound = Sound: GondorStoneMakerRelease Animation:GBStoneMK_SKL.GBStoneMK_IDLA Frames: 45 
		AnimationSound = Sound: GondorStoneMakerCrank2 Animation:GBStoneMK_SKL.GBStoneMK_IDLA Frames: 209 
		AnimationSound = Sound: GondorStoneMakerRopeCreak Animation:GBStoneMK_SKL.GBStoneMK_IDLA Frames: 178 
		AnimationSound = Sound: GondorStoneMakerDropStone Animation:GBStoneMK_SKL.GBStoneMK_IDLA Frames: 305	;307 
		AnimationSound = Sound: GondorStoneMakerLever1 Animation:GBStoneMK_SKL.GBStoneMK_IDLA Frames: 7 175	;114 
		AnimationSound = Sound: GondorStoneMakerLever2 Animation:GBStoneMK_SKL.GBStoneMK_IDLA Frames: 109 258	;251 
		AnimationSound = Sound: GondorStoneMakerClaw Animation:GBStoneMK_SKL.GBStoneMK_IDLA Frames: 151		;162
  End


	; *** ENGINEERING Parameters ***

	RadarPriority	= STRUCTURE
	KindOf			= PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE NEED_BASE_FOUNDATION MP_COUNT_FOR_VICTORY MADE_OF_STONE
	CommandSet		= GondorStoneWorkerCommandSet
 
  Behavior            = GettingBuiltBehavior GetBuiltBehaviorTag
    WorkerName		  = GondorWorkerNoSelect
  End

	Behavior = ProductionUpdate ModuleTag_10
		; nothing, but is required if we have any Object-level Upgrades!
	End
	
	Behavior = CastleUpgrade ModuleTag_AssignReinforcedGateUpgrade
		TriggeredBy	= Upgrade_ReinforcedGate
		Upgrade		= Upgrade_ReinforcedGate
	End
	
	Behavior = CastleUpgrade ModuleTag_AssignNumenorStoneworkUpgrade
		TriggeredBy	= Upgrade_NumenorStonework
		Upgrade		= Upgrade_NumenorStonework
	End
	
	Behavior = CastleUpgrade ModuleTag_AssignBattleTowersToUseFireArrows
		TriggeredBy	= Upgrade_BattleTowersToUseFireArrows
		Upgrade		= Upgrade_BattleTowersToUseFireArrows
	End
	
  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  Body                      = StructureBody ModuleTag_05
    MaxHealth         		  	= GONDOR_STONEWORKER_HEALTH
    MaxHealthDamaged  		  	= GONDOR_STONEWORKER_HEALTH_DAMAGED
    MaxHealthReallyDamaged 		= GONDOR_STONEWORKER_HEALTH_REALLY_DAMAGED
    
    DamageCreationList = OCL_BuildingDamageList01 CATAPULT_ROCK
    DamageCreationList = OCL_GBStoneMK_Chunk1 CATAPULT_ROCK FRONT_DESTROYED
    DamageCreationList = OCL_GBStoneMK_Chunk2 CATAPULT_ROCK RIGHT_DESTROYED
    DamageCreationList = OCL_GBStoneMK_Chunk3 CATAPULT_ROCK BACK_DESTROYED
    DamageCreationList = OCL_GBStoneMK_Chunk4 CATAPULT_ROCK LEFT_DESTROYED
    
  End
 

  Behavior                  = StructureCollapseUpdate ModuleTag_06
    MinCollapseDelay        = 000
    MaxCollapseDelay        = 000
    CollapseDamping         = .5
    MaxShudder              = 0.6
    MinBurstDelay           = 250
    MaxBurstDelay           = 800
    BigBurstFrequency       = 4
    FXList                  = INITIAL   FX_StructureMediumCollapse
    FXList                  = ALMOST_FINAL  FX_StructureAlmostCollapse
	DestroyObjectWhenDone	= Yes
	CollapseHeight			= 126
  End

	Behavior = CostModifierUpgrade ModuleTag_CostModifier
		LabelForPalantirString = GUI:STONE_DISCOUNT
		StartsActive = Yes ; Run on build complete, not upgrade
		ObjectFilter	= ANY +GondorKeep +GondorCastleUpgrade +GondorSentryTower
		Percentage		= -20%
		Percentage		= -40%
	End

  
  Behavior                  = BuildingBehavior BuildingModuleTag
    NightWindowName         = WINDOW_N01
 ;   FireWindowName          = WINDOW_F01
    GlowWindowName			= WINDOW_G01
  ;  FireName				= FIRE01
  ;  FireName				= FIRE02
  End
  
	Behavior = RefundDie ModuleTag_refund
		UpgradeRequired = Upgrade_MarketplaceUpgradeDefiance
		BuildingRequired = ANY +GondorMarketPlace
		RefundPercent = 50%
	End



;  Behavior           = CreateObjectDie ModuleTag_08
;    CreationList     = OCL_SmallStructureDebris
;  End
 
;  Behavior = ProductionUpdate ModuleTag_10
;    ; nothing, but is required if we have any Object-level Upgrades!
;  End
 
;  Behavior = FlammableUpdate ModuleTag_14
;    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
;    AflameDamageAmount = 5       ; taking this much damage...
;    AflameDamageDelay = 500       ; this often.
;  End
 
;  Behavior = TransitionDamageFX ModuleTag_15
;    ;-------------DESIGNED FOR SMALL SIZED FACTION BUILDING TRANSITIONS-------------------
;    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
;    ;---------------------------------------------------------------------------------------
;    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
;    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
;    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
;  End
 
;  Behavior             = FXListDie ModuleTag_16
;    DeathFX       = FX_BuildingDie
;  End
 
	Geometry				= BOX
    GeometryName			= Geom_Orig
  	GeometryMajorRadius		= 50.0
	GeometryMinorRadius		= 50.0
	GeometryHeight			= 28.0
	GeometryOffset			= X:0 Y:0 Z:0	
		
	AdditionalGeometry		= BOX
	GeometryName			= Geom_Orig
	GeometryMajorRadius		= 20.0
	GeometryMinorRadius		= 25.0
	GeometryHeight			= 90.0
	GeometryOffset			= X:30 Y:-30 Z:0	
	
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER
  
	GeometryContactPoint = X:-58.802	Y:22.706	Z:0			Repair
	GeometryContactPoint = X:61.32		Y:-45.967	Z:0			Repair
	GeometryContactPoint = X:54.062		Y:41.127	Z:0
	GeometryContactPoint = X:-38.098	Y:-60.338	Z:0
	GeometryContactPoint = X:28.89		Y:-32.633	Z:86.389	Swoop

End



;------------------------------------------------------------------------------------------
;Gondor Great Keep 
Object GondorGreatKeep

	SelectPortrait = BPGKeep
 
	; *** ART Parameters ***
	Draw = W3DScriptedModelDraw ModuleTag_Draw
	
		ExtraPublicBone = ARROW_01
		ExtraPublicBone = ARROW_02
		ExtraPublicBone = ARROW_03
		ExtraPublicBone = ARROW_04
		ExtraPublicBone = ARROW_05
		ExtraPublicBone = ARROW_06
		ExtraPublicBone = ARROW_07
		ExtraPublicBone = ARROW_08
		ExtraPublicBone = ARROW_09
		ExtraPublicBone = ARROW_10
		ExtraPublicBone = ARROW_11
		ExtraPublicBone = ARROW_12
	
		OkToChangeModelColor  = Yes
		UseStandardModelNames = Yes
		DefaultModelConditionState
		Model = GBWTower
		End    
	End
 
	; ***DESIGN parameters ***
	DisplayName         = OBJECT:GBKeep
	Side                = Gondor
	EditorSorting       = STRUCTURE
	ThreatLevel = 1.0
	CommandSet			= BattleTowerCommandSet
; 	CommandSet			= GondorCastleGreatKeepCommandSet
	 
	BuildCost           = 1
	BuildTime           = 5.0           ; in seconds
	VisionRange         = 160.0          ; Shroud clearing distance
	ShroudClearingRange = 160


	; *** AUDIO Parameters ***

	SoundOnDamaged		= BuildingLightDamageStone
	SoundOnReallyDamaged	= BuildingHeavyDamageStone


	; *** ENGINEERING Parameters ***

	RadarPriority       = STRUCTURE
	KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE NEED_BASE_FOUNDATION CASTLE_KEEP CAN_ATTACK MADE_OF_STONE	; GARRISON GARRISONABLE_UNTIL_DESTROYED

	Behavior = ProductionUpdate ProductionUpdateModuleTag
		; nothing, but is required if we have any Object-level Upgrades!
	End

	Behavior = GettingBuiltBehavior ModuleTag_04
		WorkerName	= GondorWorkerNoSelect
	End

	Behavior = CastleMemberBehavior ModuleTag_CMB
	End 
	

	Behavior = ManTheWallsSpecialPower ModuleTag_ManTheWalls
		SpecialPowerTemplate = ManTheWallsSpecialPower
	End

	Behavior = OCLSpecialPower ModuleTag_RangerAmbush
		SpecialPowerTemplate = RangerAmbushSpecialPower
		OCL                  = OCL_RangerAmbush
		CreateLocation       = CREATE_AT_LOCATION
	End
	
	Behavior = OCLSpecialPower ModuleTag_OsgiliathVeterans
		SpecialPowerTemplate = OsgiliathVeteransSpecialPower
		OCL                  = OCL_OsgiliathVeterans
		CreateLocation       = CREATE_AT_LOCATION
	End
	
	Behavior = OCLSpecialPower ModuleTag_PrinceOfDolArmoth
		SpecialPowerTemplate = PrinceOfDolArmothSpecialPower
		OCL                  = OCL_PrinceOfDolArmoth
		CreateLocation       = CREATE_AT_EDGE_NEAR_TARGET_AND_MOVE_TO_LOCATION
	End
	

	Body = StructureBody ModuleTag_05
		MaxHealth         = 1500.0
	End
   
	Behavior                  = BuildingBehavior BuildingModuleTag
		; NightWindowName         = WINDOW_N01
		; FireWindowName         = WINDOW_F01
		; GlowWindowName	    = WINDOW_G01
		; FireName		    = FIRE01
	End

;	Behavior            = HordeGarrisonContain ModuleTag_hordeGarrison
;		ObjectStatusOfContained	= UNSELECTABLE CAN_ATTACK
;		ContainMax              = 4
;		MaxHordeCapacity        = 4
;		DamagePercentToUnits    = 0%
;		PassengerFilter			= ANY +INFANTRY +HORDE
;		AllowEnemiesInside      = No
;		AllowNeutralInside      = Yes
;		NumberOfExitPaths       = 1 ; Defaults to 1.  Set 0 to not use ExitStart/ExitEnd, set higher than 1 to use ExitStart01-nn/ExitEnd01-nn
;		PassengerBonePrefix     = PassengerBone:ARROW_ KindOf:INFANTRY
;		;PassengersTestCollisionHeight = 80
;		;Slots                         = 1
;		;EnterSound                     = GarrisonEnter
;		;ExitSound                      = GarrisonExit
;		;ExitDelay               = 250
;		;GoAggressiveOnExit      = Yes ; AI Will tell people to set their mood to Aggressive on exiting
;		;ForceOrientationContainer = No  ; otherwise contained units can't orient themselves towards their targets...
;	End 

	Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
		DestructionDelay  = 5000
	End

	Behavior = RefundDie ModuleTag_refund
		UpgradeRequired = Upgrade_MarketplaceUpgradeDefiance
		BuildingRequired = ANY +GondorMarketPlace
		RefundPercent = 50%
	End



	Behavior                  = StructureCollapseUpdate ModuleTag_06
		MinCollapseDelay        = 000
		MaxCollapseDelay        = 000
		CollapseDamping         = .5
		MaxShudder              = 0.6
		MinBurstDelay           = 250
		MaxBurstDelay           = 800
		BigBurstFrequency       = 4
		FXList                  = INITIAL   FX_StructureMediumCollapse
	End


	Geometry              = BOX
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 150.0
	GeometryIsSmall       = No
	Shadow                = SHADOW_VOLUME
	BuildCompletion     = PLACED_BY_PLAYER
End

;------------------------------------------------------------------------------------------
;Gondor White Tower ; aka MinisTop4... but this is the real GAME version... this is the KEEP of MinasTirith
Object GondorWhiteTower
 
  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
  OkToChangeModelColor = Yes
  
    DefaultModelConditionState
      Model = GBMTop4
    End
	
	;--damaged building
		ModelConditionState  = DAMAGED
			Model         = GBMtop4_D1
		End
		AnimationState = DAMAGED
			EnteringStateFX	= FX_BuildingDamaged
		End
		
		
		ModelConditionState  = REALLYDAMAGED
			Model         = GBMTop4_D2
			ParticleSysBone gbmtop4d2_01 FireSmoke FollowBone:Yes
			ParticleSysBone gbmtop4d2_02 FireSmoke FollowBone:Yes
			ParticleSysBone gbmtop4d2_03 SmokeBuildingLarge FollowBone:Yes
			ParticleSysBone gbmtop4d2_04 FireSmoke FollowBone:Yes
     		ParticleSysBone gbmtop4d2_05 SmokeBuildingLarge FollowBone:Yes
	     	
			ParticleSysBone gbmtop4d2_06 FireSmoke FollowBone:Yes
			ParticleSysBone gbmtop4d2_07 FireSmoke FollowBone:Yes
			ParticleSysBone gbmtop4d2_08 SmokeBuildingLarge FollowBone:Yes
			ParticleSysBone gbmtop4d2_09 FireSmoke FollowBone:Yes
			ParticleSysBone gbmtop4d2_10 SmokeBuildingLarge FollowBone:Yes
			
			ParticleSysBone gbmtop4d2_11 FireSmoke FollowBone:Yes
			ParticleSysBone gbmtop4d2_12 FireSmoke FollowBone:Yes
			ParticleSysBone gbmtop4d2_13 SmokeBuildingLarge FollowBone:Yes
			ParticleSysBone gbmtop4d2_14 FireSmoke FollowBone:Yes
			ParticleSysBone gbmtop4d2_15 SmokeBuildingLarge FollowBone:Yes
		
			ParticleSysBone gbmtop4d2_16 FireSmoke FollowBone:Yes
			ParticleSysBone gbmtop4d2_17 FireSmoke FollowBone:Yes
			ParticleSysBone gbmtop4d2_18 SmokeBuildingLarge FollowBone:Yes
			ParticleSysBone gbmtop4d2_19 FireSmoke FollowBone:Yes
			ParticleSysBone gbmtop4d2_20 SmokeBuildingLarge FollowBone:Yes
			
		End
		AnimationState = REALLYDAMAGED
			Animation = reallydamaged
				AnimationName = GBMtop4_D2.GBMtop4_D2
				AnimationMode = ONCE
				AnimationBlendTime = 0
				AnimationSpeedFactorRange = 0.4 0.4
			End
			EnteringStateFX	= FX_BuildingReallyDamaged
		End


		ModelConditionState  = RUBBLE
			Model         = GBMTop4_D3
			ParticleSysBone none  SmokeBuildingLarge
			ParticleSysBone gbmtop4d3_01 FireSmoke FollowBone:Yes
			ParticleSysBone gbmtop4d3_02 FireSmoke FollowBone:Yes
			ParticleSysBone gbmtop4d3_03 SmokeBuildingLarge FollowBone:Yes
			ParticleSysBone gbmtop4d3_04 FireSmoke FollowBone:Yes
     		ParticleSysBone gbmtop4d3_05 SmokeBuildingLarge FollowBone:Yes
	     					
			ParticleSysBone gbmtop4d3_06 FireSmoke FollowBone:Yes
			ParticleSysBone gbmtop4d3_07 FireSmoke FollowBone:Yes
			ParticleSysBone gbmtop4d3_08 SmokeBuildingLarge FollowBone:Yes
			ParticleSysBone gbmtop4d3_09 FireSmoke FollowBone:Yes
			ParticleSysBone gbmtop4d3_10 SmokeBuildingLarge FollowBone:Yes
							
			ParticleSysBone gbmtop4d3_11 FireSmoke FollowBone:Yes
			ParticleSysBone gbmtop4d3_12 SmokeBuildingLarge FollowBone:Yes
			ParticleSysBone gbmtop4d3_13 FireSmoke FollowBone:Yes
			ParticleSysBone gbmtop4d3_14 SmokeBuildingLarge FollowBone:Yes
		End
		AnimationState = RUBBLE
			Animation = rubble
				AnimationName = GBMTop4_D3.GBMTop4_D3
				AnimationMode = ONCE
				AnimationBlendTime = 0
				AnimationSpeedFactorRange = 0.4 0.4
			End
		End

		ModelConditionState  = POST_RUBBLE
			Model         = None
		End

		ModelConditionState  = POST_COLLAPSE
			Model         = None
		End
		
	End
        
 
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:GondorWhiteTower
  Side                = Gondor
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 2500
  BuildTime           = 60.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160
  
  CommandSet          = GondorWhiteTowerCommandSet


	; *** AUDIO Parameters ***

	SoundOnDamaged		= BuildingLightDamageStone
	SoundOnReallyDamaged	= BuildingHeavyDamageStone


	; *** ENGINEERING Parameters ***
	RadarPriority       = STRUCTURE
	KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE NEED_BASE_FOUNDATION CASTLE_KEEP 
 
	Behavior            = GettingBuiltBehavior ModuleTag_04
		WorkerName		  = GondorWorkerNoSelect
	End

	Behavior = CastleMemberBehavior ModuleTag_CMB
	End 

	Body                = StructureBody ModuleTag_05
		MaxHealth       = 5000.0
		MaxHealthDamaged   = 4000.0
		MaxHealthReallyDamaged   = 3000.0
	End
 
	; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
	; never truly destroyed, even when reduced to zero health. Also note that garrisonable
	; buildings automatically stick around because GarrisonContain has it's own DieModule
	Behavior = KeepObjectDie ModuleTag_IWantRubble
	End

	;----------special powers------------------------
	;AE: add your special power modules and behaviors, here 


	Geometry              = BOX
	GeometryMajorRadius   = 25.6
	GeometryMinorRadius   = 35.2
	GeometryHeight        = 31.2
	GeometryIsSmall       = No
	Shadow                = SHADOW_VOLUME
	BuildCompletion     = PLACED_BY_PLAYER
End

;------------------------------------------------------------------------------
Object GondorCastleKeep
  
	SelectPortrait = BPGKeep
  
  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = GBWTower
    End
  End
 
	; ***DESIGN parameters ***
	DisplayName         = OBJECT:GondorWhiteTower
	Side                = Gondor
	EditorSorting       = STRUCTURE
	ThreatLevel = 1.0
	 
	BuildCost           = 1
	BuildTime           = 5.0           ; in seconds
	VisionRange         = 160.0          ; Shroud clearing distance
	ShroudClearingRange = 160
	CommandSet			= GenericKeepCommandSet


	; *** AUDIO Parameters ***

	VoiceSelect         = GondorCitadelSelect

	SoundOnDamaged		= BuildingLightDamageStone
	SoundOnReallyDamaged	= BuildingHeavyDamageStone

	VoiceSelectUnderConstruction	= BuildingGoodVoiceSelectUnderConstruction

	UnitSpecificSounds
		UnderConstruction		= BuildingConstructionLoop  ; Built first time
		; UnderRepairFromDamage	= NoSound					; Repaired No animation on the building, so don't bother playing sound
		UnderRepairFromRubble	= BuildingConstructionLoop	; Repaired from completely destroyed (not used???)
	End


  ; *** ENGINEERING Parameters ***

  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE NEED_BASE_FOUNDATION CASTLE_KEEP  MP_COUNT_FOR_VICTORY AUTO_RALLYPOINT FS_FACTORY

  Behavior            = GettingBuiltBehavior ModuleTag_04
     WorkerName		  = GondorWorkerNoSelect
 End

  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  	;-----------------------------------------------
	;Used for hero revival and initial construction     
	Behavior = ProductionUpdate ProductionUpdateModuleTag
		; nothing, but is required if we have any Object-level Upgrades!
	End
	Behavior = QueueProductionExitUpdate ModuleTag_QueuePEU
		UnitCreatePoint   = X:0.0 Y:-20.0 Z:0.0
		NaturalRallyPoint = X:28.8 Y:-80.0 Z:0.0;NaturalRallyPointX must always match GeometryMajorRadius! 
		ExitDelay = 300 ;Handles delays between units if multiple produced at a time. 
	End  
	;-----------------------------------------------

  Behavior = GarrisonContain GarrisonContainModuleTag
	ObjectStatusOfContained	= UNSELECTABLE CAN_ATTACK
    ContainMax              = 10
	PassengerFilter			= ANY +INFANTRY +HORDE
	AllowAlliesInside       = Yes
	AllowEnemiesInside      = No
;    EnterSound          = GarrisonEnter
;    ExitSound           = GarrisonExit
  End
  
  Body                = StructureBody ModuleTag_05
    MaxHealth         = GONDOR_CENTRAL_CAMP_KEEP_HEALTH
  End

  ArmorSet
    Conditions        = None
    Armor             = CitadelArmor
    DamageFX          = None
  End



;  commented-out, since this keep is being used in MinasTirith, apparently... 
;  Behavior            = DestroyDie ModuleTag_07
;    ;nothing
;  End

	; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
	; never truly destroyed, even when reduced to zero health. Also note that garrisonable
	; buildings automatically stick around because GarrisonContain has it's own DieModule
	Behavior = KeepObjectDie ModuleTag_IWantRubble
	End

  Geometry              = BOX
  GeometryMajorRadius   = 25.6
  GeometryMinorRadius   = 35.2
  GeometryHeight        = 31.2
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER
End

;------------------------------------------------------------------------------
Object GondorSilverTree

  ; *** ART Parameters ***  
  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    ExtraPublicBone = Ramp01
    ExtraPublicBone = Ramp02
    ExtraPublicBone = Ramp03
    WallBoundsMesh  = P1
    ;;;;EmbedPortal = ramp Ramp  ;;; not yet supported in W3DScriptedModelDraw 
    DefaultModelConditionState
      Model = GBFSTower
    End
  End

  ; *** AUDIO Parameters ***

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:GondorSilverTree
  Side = Gondor
  EditorSorting   = STRUCTURE
  ThreatLevel = 1.0

  ArmorSet
    Conditions        = None
    Armor             = CitadelArmor
    DamageFX          = None
  End

  ; *** ENGINEERING Parameters ***  
  KindOf            = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE ;SELECTABLE;@1
  RadarPriority		= STRUCTURE
  Body              = ActiveBody ModuleTag_02
    MaxHealth       = 2000.0
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0
  End

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
  Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 4000
  End
  
  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= WallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

  Geometry              = BOX
  GeometryMajorRadius   = 36.0
  GeometryMinorRadius   = 36.0
  GeometryHeight        = 88.0
  GeometryIsSmall       = No
  GeometryRotationAnchorOffset = X:372.9936 Y:0.0
  Shadow                = SHADOW_VOLUME
End

;------------------------------------------------------------------------------
Object GondorBaseTower

  ; *** ART Parameters ***  
  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    ExtraPublicBone = Ramp01
    ExtraPublicBone = Ramp02
    ExtraPublicBone = Ramp03
    WallBoundsMesh  = P1
    ;;;;EmbedPortal = ramp Ramp  ;;; not yet supported in W3DScriptedModelDraw 
    DefaultModelConditionState
      Model = GBFSTower
    End
  End


  ; *** AUDIO Parameters ***

	SoundOnDamaged		= BuildingLightDamageStone
	SoundOnReallyDamaged	= BuildingHeavyDamageStone


  ; ***DESIGN parameters ***

  DisplayName      = OBJECT:GondorBaseTower
  Side = Gondor
  EditorSorting   = STRUCTURE
  ThreatLevel = 1.0

  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    DamageFX          = None
  End

  ; *** ENGINEERING Parameters ***  
  KindOf                = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE ;SELECTABLE;@1 
  RadarPriority = STRUCTURE
  Body                  = ActiveBody ModuleTag_02
    MaxHealth       = 2000.0
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0
  End

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
  Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 4000
  End
  
  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= WallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

  Geometry              = BOX
  GeometryMajorRadius   = 36.0
  GeometryMinorRadius   = 36.0
  GeometryHeight        = 88.0
  GeometryIsSmall       = No
  GeometryRotationAnchorOffset = X:372.9936 Y:0.0
  Shadow                = SHADOW_VOLUME
End

;------------------------------------------------------------------------------------------
Object GondorBaseWall

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    WallBoundsMesh = P1
    DefaultModelConditionState
      Model = GBFSWall
    End
;    WallBoundsMesh = P1
;    RampMesh1 = P2
;    RampMesh2 = P2
;    RampMesh3 = P3
  End


  ; *** AUDIO Parameters ***

	SoundOnDamaged		= BuildingLightDamageStone
	SoundOnReallyDamaged	= BuildingHeavyDamageStone


  ; ***DESIGN parameters ***

  DisplayName      = OBJECT:GondorBaseWall
  Side = Gondor
  EditorSorting   = STRUCTURE
  ThreatLevel = 1.0

  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    DamageFX          = None
  End

  ; *** ENGINEERING Parameters ***  
  KindOf                = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE SELECTABLE 
  RadarPriority = STRUCTURE
  Body                  = ActiveBody ModuleTag_02
    MaxHealth       = 4000.0
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0
  End

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
  Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 3000
  End
  
  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= WallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

  Geometry              = BOX
  GeometryMajorRadius   = 36.0
  GeometryMinorRadius   = 72.0
  GeometryHeight        = 36.0
  GeometryIsSmall       = No
  GeometryRotationAnchorOffset = X:372.8264 Y:0.0
  Shadow                = SHADOW_VOLUME
End

;------------------------------------------------------------------------------------------
Object GondorBaseWallTreb

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    WallBoundsMesh = P1
    RampMesh1      = P2
    DefaultModelConditionState
      Model = GBFSWallT
    End
  End

  
  ; *** AUDIO Parameters ***

	;SoundOnDamaged		= BuildingLightDamageStone
	;SoundOnReallyDamaged	= BuildingHeavyDamageStone


  ; ***DESIGN parameters ***

  DisplayName      = OBJECT:GondorBaseWallTreb
  Side = Gondor
  EditorSorting   = STRUCTURE
  ThreatLevel = 1.0

  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    DamageFX          = None
  End

  ; *** ENGINEERING Parameters ***  
  KindOf                = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE SELECTABLE 
  RadarPriority = STRUCTURE
  Body                  = ActiveBody ModuleTag_02
    MaxHealth       = 2000.0
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0
  End

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
  Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 3000
  End
  
  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= WallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

  Geometry              = BOX
  GeometryMajorRadius   = 36.0
  GeometryMinorRadius   = 28.0
  GeometryHeight        = 44.0
  GeometryIsSmall       = No
  GeometryRotationAnchorOffset = X:411.2648 Y:0.0
  Shadow                = SHADOW_VOLUME
End

;------------------------------------------------------------------------------------------
Object GondorGate

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    WallBoundsMesh = P1

    DefaultModelConditionState   
      Model = GBFSGate
    End
    AnimationState        = NONE
      Animation           = GBFSGate
        AnimationName     = GBFSGate.GBFSGate
        AnimationMode     = LOOP
      End
    End
  End
  

  ; *** AUDIO Parameters ***

	SoundOnDamaged		= BuildingLightDamageStone
	SoundOnReallyDamaged	= BuildingHeavyDamageStone


  ; ***DESIGN parameters ***

  DisplayName      = OBJECT:GondorGate
  Side = Gondor
  EditorSorting   = STRUCTURE
  ThreatLevel = 1.0

  BuildTime           = 30.0           ; in seconds

  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    DamageFX          = None
  End

  ; *** ENGINEERING Parameters ***  
  KindOf                = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE ;SELECTABLE;@1
  RadarPriority = STRUCTURE
  Body                  = ActiveBody ModuleTag_02
    MaxHealth       = 2000.0
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0
  End

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
  Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 2500
  End
  
  
  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= WallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

  Geometry              = BOX
  GeometryMajorRadius   = 36.0
  GeometryMinorRadius   = 104.0
  GeometryHeight        = 36.0
  GeometryIsSmall       = No
  GeometryRotationAnchorOffset = X:341.568 Y:0.0
  Shadow                = SHADOW_VOLUME
End

;------------------------------------------------------------------------------
;Gondor Forbidden Pool
Object GondorForbiddenPool
  SelectPortrait = BCPForbiddenPool
  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = GBForbidPool
    End
    
	IdleAnimationState		
		StateName				=	STATE_Idle
		Animation
			AnimationName		=	GBForbidPool.GBForbidPool
			AnimationMode		=	LOOP
		End

	 ;Waterfall particle elements---------------
      ParticleSysBone = SPLSHEDGELF SplashEdge
      ParticleSysBone = SPLSHEDGERT SplashEdge
      ParticleSysBone = SPLSHMIDLF SplashSmall
      ParticleSysBone = SPLSHMIDRT SplashSmall
      ParticleSysBone = SPLSHMIDmid SplashSmall 
      ParticleSysBone = MISTLF Steam06
      ParticleSysBone = MISTRT Steam06
      ParticleSysBone = ripple01 SplashSmall
      ParticleSysBone = ripple02 SplashSmall
      ParticleSysBone = ripple03 PoolWaterRipples3
      ParticleSysBone = ripple04 PoolWaterRipples2
      ParticleSysBone = ripple05 PoolWaterRipples2
      ParticleSysBone = ripple06 PoolWaterRipples2
      ParticleSysBone = ripple07 PoolWaterRipples1
      ParticleSysBone = SplashTippyTop SplashTop
      ParticleSysBone = boulderRip1 WaterSparklesSmaller
	End    
		
    ModelConditionState  = DAMAGED
      Model         = GBForbidPoolD1
    End    
    AnimationState = DAMAGED
	EnteringStateFX	= FX_BuildingDamaged
		Animation
			AnimationName		=	GBForbidPoolD1.GBForbidPoolD1
			AnimationMode		=	ONCE
		End
	 ;Waterfall particle elements---------------
      ParticleSysBone = SPLSHEDGELF SplashEdge
      ParticleSysBone = SPLSHEDGERT SplashEdge
      ParticleSysBone = SPLSHMIDLF SplashSmall
      ParticleSysBone = SPLSHMIDRT SplashSmall
      ParticleSysBone = SPLSHMIDmid SplashSmall 
      ParticleSysBone = MISTLF Steam06
      ParticleSysBone = MISTRT Steam06
      ParticleSysBone = ripple01 SplashSmall
      ParticleSysBone = ripple02 SplashSmall
      ParticleSysBone = ripple03 PoolWaterRipples3
      ParticleSysBone = ripple04 PoolWaterRipples2
      ParticleSysBone = ripple05 PoolWaterRipples2
      ParticleSysBone = ripple06 PoolWaterRipples2
      ParticleSysBone = ripple07 PoolWaterRipples1
      ParticleSysBone = SplashTippyTop SplashTop
      ParticleSysBone = ripple01 TrollClubHitDust  
      ParticleSysBone = ripple02 TrollClubHitDust
      ParticleSysBone = ripple03 TrollClubHitDust 
      ParticleSysBone = ripple04 TrollClubHitDust
      ParticleSysBone = ripple05 TrollClubHitDust 
      ParticleSysBone = ripple06 TrollClubHitDust 
      ParticleSysBone = ripple07 TrollClubHitDust 
      ParticleSysBone = ripple08 TrollClubHitDust 
      ParticleSysBone = SPLSHEDGELF TrollClubHitDust 
      ParticleSysBone = SPLSHMIDmid TrollClubHitDust
      ParticleSysBone = NONE PoolDustMedium 
    End
     
    ModelConditionState  = REALLYDAMAGED
      Model         = GBForbidPoolD2
    End
    AnimationState = REALLYDAMAGED
		Animation
			AnimationName		=	GBForbidPoolD2.GBForbidPoolD2
			AnimationMode		=	ONCE
		End
	 ;Waterfall particle elements---------------
      ParticleSysBone = SPLSHEDGERT SplashEdge
      ParticleSysBone = SPLSHMIDRT SplashSmall
      ParticleSysBone = MISTLF Steam06
      ParticleSysBone = MISTRT Steam06
      ParticleSysBone = ripple01 SplashSmall
      ParticleSysBone = ripple02 SplashSmall
      ParticleSysBone = ripple03 PoolWaterRipples3
      ParticleSysBone = ripple04 PoolWaterRipples2
      ParticleSysBone = ripple05 PoolWaterRipples2
      ParticleSysBone = ripple06 PoolWaterRipples2
      ParticleSysBone = SplashTippyTop SplashTop
      ParticleSysBone = SPLSHEDGELF poolSplash
      ParticleSysBone = SPLSHMIDmid poolSplash01
      ParticleSysBone = ripple07 poolSplash02
      ParticleSysBone = SPLSHMIDmid PoolDust01 FollowBone:Yes
      ParticleSysBone = SPLSHEDGELF PoolDust01 FollowBone:Yes
      ParticleSysBone = SplashTippyTop PoolDust02 FollowBone:Yes
      ParticleSysBone = ripple01 PoolDust02 FollowBone:Yes
      ParticleSysBone = MISTRT splash04 FollowBone:Yes
      ParticleSysBone = boulderRip1 PoolWaterRipples2 FollowBone:Yes
    End

    ModelConditionState  = RUBBLE
      Model         = GBForbidPoolD3
      ;ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End   
    AnimationState = RUBBLE
		Animation
			AnimationName		=	GBForbidPoolD3.GBForbidPoolD3
			AnimationMode		=	ONCE
		End
	ParticleSysBone = ripple04 poolSplash03
	ParticleSysBone = ripple07 poolSplash02
	ParticleSysBone = SPLSHEDGERT PoolDust01 FollowBone:Yes
	ParticleSysBone = MISTLF PoolDust01 FollowBone:Yes
	ParticleSysBone = ripple01 PoolDust02 FollowBone:Yes
	ParticleSysBone = SPLSHEDGELF PoolDust02 FollowBone:Yes
	ParticleSysBone = boulderRip1 PoolDust01 FollowBone:Yes
    	ParticleSysBone = SplashTippyTop poolSplash
	ParticleSysBone = MISTRT poolDustBig
	ParticleSysBone = boulderRip1 poolSplash04
	ParticleSysBone = ripple04 Steam07
        ParticleSysBone = NONE PoolDustMedium 
    End
;      BeginScript
;        CurDrawableHideSubObject("GBFORBIDPOOLDP1")
;        CurDrawableHideSubObject("GBFORBIDPOOLDP2")
;        CurDrawableHideSubObject("GBFORBIDPOOLDP3")
;        CurDrawableHideSubObject("GBFORBIDPOOLDP4")
;      EndScript
;    End	
  End


  ; *** AUDIO Parameters ***

	VoiceSelect		= GondorForbiddenPoolSelect

	SoundAmbient		= BuildingForbiddenPoolAmbientLoop
	SoundOnDamaged		= BuildingLightDamageStone
	;SoundOnReallyDamaged	= BuildingHeavyDamageStone

	VoiceSelectUnderConstruction	= BuildingGoodVoiceSelectUnderConstruction

	UnitSpecificSounds
		UnderConstruction		= BuildingConstructionLoop  ; Built first time
		; UnderRepairFromDamage	= NoSound					; Repaired No animation on the building, so don't bother playing sound
		UnderRepairFromRubble	= BuildingConstructionLoop	; Repaired from completely destroyed (not used???)
	End

	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		MaxUpdateRangeCap = 800
 		;AnimationSound = Sound:ImpactRock					Animation:GBForbidPoolD1.GBForbidPoolD1	Frames:0
 		;AnimationSound = Sound:BuildingTopple				Animation:GBForbidPoolD1.GBForbidPoolD1	Frames:1

 		AnimationSound = Sound:DamageDebrisLightRock			Animation:GBForbidPoolD2.GBForbidPoolD2	Frames:0
 		AnimationSound = Sound:BuildingForbiddenPoolDestroyRock	Animation:GBForbidPoolD2.GBForbidPoolD2	Frames:1
 		AnimationSound = Sound:BuildingForbiddenPoolDestroyStone	Animation:GBForbidPoolD2.GBForbidPoolD2	Frames:24
 		AnimationSound = Sound:BuildingToppleDie				Animation:GBForbidPoolD2.GBForbidPoolD2	Frames:31
 		AnimationSound = Sound:EntSplashWater				Animation:GBForbidPoolD2.GBForbidPoolD2	Frames:32

 		AnimationSound = Sound:BuildingHeavyDamageStone			Animation:GBForbidPoolD3.GBForbidPoolD3	Frames:0
 		AnimationSound = Sound:BuildingForbiddenPoolDestroyDebris	Animation:GBForbidPoolD3.GBForbidPoolD3	Frames:1
 		AnimationSound = Sound:ImpactEntRock				Animation:GBForbidPoolD3.GBForbidPoolD3	Frames:16
 		AnimationSound = Sound:BuildingForbiddenPoolDestroyRock	Animation:GBForbidPoolD3.GBForbidPoolD3	Frames:19
 		AnimationSound = Sound:BuildingForbiddenPoolDestroyStone	Animation:GBForbidPoolD3.GBForbidPoolD3	Frames:31
 		AnimationSound = Sound:BuildingForbiddenPoolWaterSplash	Animation:GBForbidPoolD3.GBForbidPoolD3	Frames:33
 		AnimationSound = Sound:BuildingForbiddenPoolDestroyDebris	Animation:GBForbidPoolD3.GBForbidPoolD3	Frames:43
 		AnimationSound = Sound:BuildingForbiddenPoolDestroyStone	Animation:GBForbidPoolD3.GBForbidPoolD3	Frames:48
 		AnimationSound = Sound:BuildingForbiddenPoolWaterSplash	Animation:GBForbidPoolD3.GBForbidPoolD3	Frames:64
 		AnimationSound = Sound:BuildingForbiddenPoolDestroyRock	Animation:GBForbidPoolD3.GBForbidPoolD3	Frames:70
 		AnimationSound = Sound:BuildingForbiddenPoolDestroyDebris	Animation:GBForbidPoolD3.GBForbidPoolD3	Frames:80
	End

  
  ; ***DESIGN parameters ***

  DisplayName     = OBJECT:GondorForbiddenPool
  Side            = Gondor
  EditorSorting   = STRUCTURE
  ThreatLevel = 1.0

  BuildCost           = 300
  BuildTime           = 15.0           ; in seconds
  VisionRange         = 800.0          ; Shroud clearing distance
  ShroudClearingRange = 800

  CommandSet          = GondorForbiddenPoolCommandSet


  ; *** ENGINEERING Parameters ***  

  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE CAPTURABLE FS_FACTORY AUTO_RALLYPOINT MP_COUNT_FOR_VICTORY ;NEED_BASE_FOUNDATION
  Shadow			  = SHADOW_VOLUME

  Body                = StructureBody ModuleTag_05
    MaxHealth         		= 15000.0
    MaxHealthDamaged  		= 13000.0
    MaxHealthReallyDamaged 	= 10000.0
;    DamageCreationList = OCL_BuildingDamageList01 CATAPULT_ROCK
    
 ;   DamageCreationList = OCL_GBForbidPool_Chunk1 CATAPULT_ROCK FRONT_DESTROYED
  ;  DamageCreationList = OCL_GBForbidPool_Chunk2 CATAPULT_ROCK BACK_DESTROYED
   ; DamageCreationList = OCL_GBForbidPool_Chunk3 CATAPULT_ROCK RIGHT_DESTROYED
;    DamageCreationList = OCL_GBForbidPool_Chunk4 CATAPULT_ROCK LEFT_DESTROYED    
  End

  Behavior = ProductionUpdate ProductionUpdateModuleTag
    ; nothing
  End

  Behavior = AutoHealBehavior AutoHealBehaviorModuleTag
    HealingAmount     = 10
    HealingDelay      = 1000 ; msec
    StartsActive      = Yes
    Radius			  = 250
    KindOf            = INFANTRY
  End

;  Behavior = StealthUpdate StealthUpdateModuleTag
;    StealthDelay                = 2000 ; msec
;	  FriendlyOpacityMin          = 10.0%
;	  FriendlyOpacityMax          = 60.0%
;	  PulseFrequency              = 750   ; msec
;	DetectedByAnyoneRange		= 200	  
 ; End

  Behavior = QueueProductionExitUpdate ModuleTag_07
    UnitCreatePoint    = X:-68.0 Y:-12.0 Z:0.0
    NaturalRallyPoint  = X:100.0 Y:60.0 Z:0.0
    ExitDelay = 750
  End

  Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 999999999 ; don't ever want it to disappear
  End
  
  AttackContactPoint = X: 68 Y: 20 Z: 36
  AttackContactPoint = X:-68 Y:-20 Z: 36
  AttackContactPoint = X: 48 Y: 40 Z: 26
  AttackContactPoint = X:-48 Y:-40 Z: 26
  AttackContactPoint = X: 28 Y: 60 Z: 16
  AttackContactPoint = X:-28 Y:-60 Z: 16

  Geometry = BOX
  GeometryMajorRadius = 80.0
  GeometryMinorRadius = 88.0
  GeometryHeight = 40.0
  GeometryIsSmall = No
End

;---------------------------------------------------------------------

ChildObject GondorForbiddenPoolForGoodIthilien GondorForbiddenPool

  CommandSet          = GondorForbiddenPoolForGoodIthilienCommandSet

END


;------------------------------------------------------------------------------
; Blacksmith Forge
Object GondorForge

	SelectPortrait = BPGBlackSmith

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
 
	ExtraPublicBone = ARROW_01
	ExtraPublicBone = ARROW_02
	ExtraPublicBone = ARROW_03
	ExtraPublicBone = ARROW_04
	
    OkToChangeModelColor  = Yes
    StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD
    DefaultModelConditionState
		Model               = GBBlkSmith_SKN
		WeaponLaunchBone = PRIMARY ARROW_
    End
    
	IdleAnimationState		
		StateName				=	STATE_Idle
		Animation				=	IdleA
			AnimationName		=	GBBlkSmith_SKL.GBBlkSmith_HMRA
			AnimationMode		=	ONCE
			AnimationPriority	=	15
		End
		Animation				=   IdleB
			AnimationName		=	GBBlkSmith_SKL.GBBlkSmith_LOKA
			AnimationMode		=	ONCE
			AnimationPriority	=	5
		End

		Flags               = RESTART_ANIM_WHEN_COMPLETE 		
		
		;ParticleSysBone     = ANVIL-SPARKS ForgeSpark FollowBone:Yes
		ParticleSysBone     = EMBERBONE ForgeEmbers
		ParticleSysBone     = CHIMNEY forgeSmoke
		ParticleSysBone     = CHIMNEY01 forgeSmoke
		ParticleSysBone     = CHIMNEY02 forgeSmoke
		ParticleSysBone     = CHIMNEY03 forgeSmoke
		ParticleSysBone     = EMBERBONE forgeSteam2
		ParticleSysBone     = STEAMEMITTER ForgeSwordGlow FollowBone:Yes
		ParticleSysBone     = EMBERBONE ForgeCoal

		;These elements are used for the damage flames states
		;ParticleSysBone emberBone01 fireFlare FollowBone:Yes
		;ParticleSysBone emberBone01 FireSmoke FollowBone:Yes
		;ParticleSysBone emberBone01 campfireEmbers FollowBone:Yes
		;ParticleSysBone emberBone01 fireGlow FollowBone:Yes
		;ParticleSysBone emberBone01 NazgulEmitter  FollowBone:Yes

		;BeginScript
		;	Prev = CurDrawablePrevAnimationState()
		;	if Prev == "Complete" then 
		;		CurDrawableSetTransitionAnimState("Trans_Play_Long_Anim_Once") 
			    ; Don't play completed sound when canceling build-in-progress or when
			    ; destroyed halfway
		;	    if not CurDrawableModelcondition( "DYING" ) then 
		;			CurDrawablePlaySound("CampSoldierCompleteGeneric")		
		;		end
		;	end
		;EndScript
	End
    
   	ModelConditionState   = AWAITING_CONSTRUCTION
      			Model               = GBBlkSmith_A
;		ParticleSysBone	  = NONE BuildingDoughnutCloud
    	End
		AnimationState        = AWAITING_CONSTRUCTION
			Animation
				AnimationName	= GBBlkSmith_ASKL.GBBlkSmith_ABLD
				AnimationMode	= MANUAL
			End
			Flags				= START_FRAME_FIRST
			StateName			= Complete
			
			BeginScript
				CurDrawablePlaySound("GondorForgeBeginConstruction")
			EndScript
		End

		ModelConditionState		=	ACTIVELY_BEING_CONSTRUCTED
			Model			=	GBBlkSmith_A
			ParticleSysBone   = Chimney BuildingContructDust
		End;
		AnimationState        = ACTIVELY_BEING_CONSTRUCTED
			Animation
				AnimationName     = GBBlkSmith_ASKL.GBBlkSmith_ABLD
				AnimationMode     = MANUAL
			End
			Flags				= START_FRAME_FIRST
			StateName				= Complete
			BeginScript
				CurDrawableHideSubObjectPermanently("V1")
				CurDrawableHideSubObjectPermanently("V2")
				CurDrawableHideSubObjectPermanently("Fire02")
				CurDrawableHideSubObjectPermanently("Fire03")
				CurDrawableHideSubObjectPermanently("Fire04")
				CurDrawableHideSubObjectPermanently("Fire05")
				CurDrawablePlaySound("GondorBarracksBeginConstruction")
			EndScript
		End
		

;		TransitionState = Trans_Play_Long_Anim_Once
;	;	ParticleSysBone     = ANVIL-SPARKS ForgeSpark FollowBone:Yes
;		ParticleSysBone     = STEAMEMITTER forgeSwordSteam FollowBone:Yes
;		ParticleSysBone     = STEAM-BARREL forgeSteam
;		ParticleSysBone     = FIRE fireFlare
;		ParticleSysBone     = EMBERBONE ForgeEmbers
;		ParticleSysBone     = CHIMNEY forgeSmoke
;		ParticleSysBone     = CHIMNEY01 forgeSmoke
;		ParticleSysBone     = CHIMNEY02 forgeSmoke
;		ParticleSysBone     = CHIMNEY03 forgeSmoke
;		ParticleSysBone     = EMBERBONE forgeSteam2
;		ParticleSysBone     = STEAMEMITTER ForgeSwordGlow FollowBone:Yes
;		ParticleSysBone     = EMBERBONE ForgeCoal
;			Animation = Transition
;				AnimationName = GBBlkSmith_SKL.GBBlkSmith_IDLA  ; Play long version of the anim once
;				AnimationMode = ONCE
;			End
;		End

 ;--damaged building
      ModelConditionState  = DESTROYED_FRONT
      Model         = GBBlkSmith_D1
      ParticleSysBone FireSmall01 FireBuildingLarge
      ParticleSysBone FireSmall02 FireBuildingLarge
      ParticleSysBone FireSmall03 FireBuildingLarge
      ParticleSysBone FireSmall04 FireBuildingMedium
      ParticleSysBone FireSmall05 SmokeBuildingLarge
		
		;ParticleSysBone emberBone01 StructureFireGlow FollowBone:Yes
		ParticleSysBone emberBone02 StructureFireGlow FollowBone:Yes
		ParticleSysBone emberBone03 StructureFireGlow FollowBone:Yes
		ParticleSysBone emberBone04 StructureFireGlow FollowBone:Yes
		ParticleSysBone emberBone01 fireFlare FollowBone:Yes
		ParticleSysBone emberBone01 FireSmoke FollowBone:Yes
		ParticleSysBone emberBone01 campfireEmbers FollowBone:Yes
		ParticleSysBone emberBone02 fireFlareA FollowBone:Yes
		ParticleSysBone emberBone02 FireSmoke FollowBone:Yes
		ParticleSysBone emberBone03 fireFlareA FollowBone:Yes
		ParticleSysBone emberBone03 FireSmoke FollowBone:Yes
		ParticleSysBone emberBone03 campfireEmbers FollowBone:Yes
		ParticleSysBone emberBone04 fireFlareA FollowBone:Yes
		ParticleSysBone emberBone04 FireSmoke FollowBone:Yes
		ParticleSysBone extraglowbone01 WindowGlow FollowBone:Yes
		ParticleSysBone extraglowbone02 StructureFireGlow FollowBone:Yes
		ParticleSysBone extraglowbone03 WindowGlow FollowBone:Yes
		ParticleSysBone extraglowbone04 WindowGlow FollowBone:Yes
		ParticleSysBone extraglowbone05 WindowGlow FollowBone:Yes
		ParticleSysBone extraglowbone06 WindowGlow FollowBone:Yes
		ParticleSysBone extraglowbone07 WindowGlow FollowBone:Yes
		ParticleSysBone extraglowbone08 WindowGlow FollowBone:Yes
		ParticleSysBone emberbone FireBuildingSmallA FollowBone:Yes
		ParticleSysBone extraglowbone01 FireBuildingSmallA FollowBone:Yes
		ParticleSysBone extraglowbone02 FireBuildingLargeA FollowBone:Yes
		ParticleSysBone extraglowbone03 FireBuildingLargeA FollowBone:Yes
		ParticleSysBone extraglowbone04 FireBuildingMediumA FollowBone:Yes
		ParticleSysBone extraglowbone06 FireBuildingLargeA FollowBone:Yes
		ParticleSysBone extraglowbone05 FireBuildingSmallA FollowBone:Yes
		ParticleSysBone extraglowbone07 FireBuildingMediumA FollowBone:Yes
		ParticleSysBone extraglowbone08 FireBuildingSmallA FollowBone:Yes
		ParticleSysBone extraglowbone09 FireBuildingSmallA FollowBone:Yes
		ParticleSysBone extraglowbone10 FireBuildingSmallA FollowBone:Yes

    End

    AnimationState = DESTROYED_FRONT
      BeginScript
        CurDrawableHideSubObject("GBBlkSmith_01")
        CurDrawableHideSubObject("GPWEAPRACK1")
		CurDrawableHideSubObject("GPWEAPRACK2")
		CurDrawableHideSubObject("GPWEAPRACK3")
      EndScript
    End
    
        ModelConditionState  = DESTROYED_RIGHT
      Model         = GBBlkSmith_D1
      ParticleSysBone FireSmall01 FireBuildingLarge
      ParticleSysBone FireSmall02 FireBuildingLarge
      ParticleSysBone FireSmall03 FireBuildingLarge
      ParticleSysBone FireSmall04 FireBuildingMedium
      ParticleSysBone FireSmall05 SmokeBuildingLarge

		;ParticleSysBone emberBone01 StructureFireGlow FollowBone:Yes
		ParticleSysBone emberBone02 StructureFireGlow FollowBone:Yes
		ParticleSysBone emberBone03 StructureFireGlow FollowBone:Yes
		ParticleSysBone emberBone04 StructureFireGlow FollowBone:Yes
	    ParticleSysBone emberBone01 fireFlare FollowBone:Yes
	    ParticleSysBone emberBone01 FireSmoke FollowBone:Yes
	    ParticleSysBone emberBone01 campfireEmbers FollowBone:Yes
		ParticleSysBone emberBone02 fireFlareA FollowBone:Yes
		ParticleSysBone emberBone02 FireSmoke FollowBone:Yes
		ParticleSysBone emberBone03 fireFlareA FollowBone:Yes
		ParticleSysBone emberBone03 FireSmoke FollowBone:Yes
		ParticleSysBone emberBone03 campfireEmbers FollowBone:Yes
		ParticleSysBone emberBone04 fireFlareA FollowBone:Yes
		ParticleSysBone emberBone04 FireSmoke FollowBone:Yes
		ParticleSysBone extraglowbone01 WindowGlow FollowBone:Yes
		ParticleSysBone extraglowbone02 StructureFireGlow FollowBone:Yes
		ParticleSysBone extraglowbone03 WindowGlow FollowBone:Yes
		ParticleSysBone extraglowbone04 WindowGlow FollowBone:Yes
		ParticleSysBone extraglowbone05 WindowGlow FollowBone:Yes
		ParticleSysBone extraglowbone06 WindowGlow FollowBone:Yes
		ParticleSysBone extraglowbone07 WindowGlow FollowBone:Yes
		ParticleSysBone extraglowbone08 WindowGlow FollowBone:Yes
		ParticleSysBone emberbone FireBuildingSmallA FollowBone:Yes
		ParticleSysBone extraglowbone01 FireBuildingSmallA FollowBone:Yes
		ParticleSysBone extraglowbone02 FireBuildingLargeA FollowBone:Yes
		ParticleSysBone extraglowbone03 FireBuildingLargeA FollowBone:Yes
		ParticleSysBone extraglowbone04 FireBuildingMediumA FollowBone:Yes
		ParticleSysBone extraglowbone06 FireBuildingLargeA FollowBone:Yes
		ParticleSysBone extraglowbone05 FireBuildingSmallA FollowBone:Yes
		ParticleSysBone extraglowbone07 FireBuildingMediumA FollowBone:Yes
		ParticleSysBone extraglowbone08 FireBuildingSmallA FollowBone:Yes
		ParticleSysBone extraglowbone09 FireBuildingSmallA FollowBone:Yes
		ParticleSysBone extraglowbone10 FireBuildingSmallA FollowBone:Yes

    End

    AnimationState = DESTROYED_RIGHT
      BeginScript
        CurDrawableHideSubObject("GBBlkSmith_02")
        CurDrawableHideSubObject("GPWEAPRACK1")
		CurDrawableHideSubObject("GPWEAPRACK2")
		CurDrawableHideSubObject("GPWEAPRACK3")
      EndScript
    End
    

    ModelConditionState  = DESTROYED_BACK
      Model         = GBBlkSmith_D1
      ParticleSysBone FireSmall01 FireBuildingLarge
      ParticleSysBone FireSmall02 FireBuildingLarge
      ParticleSysBone FireSmall03 FireBuildingLarge
      ParticleSysBone FireSmall04 FireBuildingMedium
      ParticleSysBone FireSmall05 SmokeBuildingLarge

		;ParticleSysBone emberBone01 StructureFireGlow FollowBone:Yes
		ParticleSysBone emberBone02 StructureFireGlow FollowBone:Yes
		ParticleSysBone emberBone03 StructureFireGlow FollowBone:Yes
		ParticleSysBone emberBone04 StructureFireGlow FollowBone:Yes
	    ParticleSysBone emberBone01 fireFlare FollowBone:Yes
	    ParticleSysBone emberBone01 FireSmoke FollowBone:Yes
	    ParticleSysBone emberBone01 campfireEmbers FollowBone:Yes
		ParticleSysBone emberBone02 fireFlareA FollowBone:Yes
		ParticleSysBone emberBone02 FireSmoke FollowBone:Yes
		ParticleSysBone emberBone03 fireFlareA FollowBone:Yes
		ParticleSysBone emberBone03 FireSmoke FollowBone:Yes
		ParticleSysBone emberBone03 campfireEmbers FollowBone:Yes
		ParticleSysBone emberBone04 fireFlareA FollowBone:Yes
		ParticleSysBone emberBone04 FireSmoke FollowBone:Yes
		ParticleSysBone extraglowbone01 WindowGlow FollowBone:Yes
		ParticleSysBone extraglowbone02 StructureFireGlow FollowBone:Yes
		ParticleSysBone extraglowbone03 WindowGlow FollowBone:Yes
		ParticleSysBone extraglowbone04 WindowGlow FollowBone:Yes
		ParticleSysBone extraglowbone05 WindowGlow FollowBone:Yes
		ParticleSysBone extraglowbone06 WindowGlow FollowBone:Yes
		ParticleSysBone extraglowbone07 WindowGlow FollowBone:Yes
		ParticleSysBone extraglowbone08 WindowGlow FollowBone:Yes
		ParticleSysBone emberbone FireBuildingSmallA FollowBone:Yes
		ParticleSysBone extraglowbone01 FireBuildingSmallA FollowBone:Yes
		ParticleSysBone extraglowbone02 FireBuildingLargeA FollowBone:Yes		
		ParticleSysBone extraglowbone03 FireBuildingLargeA FollowBone:Yes
		ParticleSysBone extraglowbone04 FireBuildingMediumA FollowBone:Yes
		ParticleSysBone extraglowbone06 FireBuildingLargeA FollowBone:Yes
		ParticleSysBone extraglowbone05 FireBuildingSmallA FollowBone:Yes
		ParticleSysBone extraglowbone07 FireBuildingMediumA FollowBone:Yes
		ParticleSysBone extraglowbone08 FireBuildingSmallA FollowBone:Yes
		ParticleSysBone extraglowbone09 FireBuildingSmallA FollowBone:Yes
		ParticleSysBone extraglowbone10 FireBuildingSmallA FollowBone:Yes

    End

    AnimationState = DESTROYED_BACK
      BeginScript
        CurDrawableHideSubObject("GBBlkSmith_03")
        CurDrawableHideSubObject("GPWEAPRACK1")
		CurDrawableHideSubObject("GPWEAPRACK2")
		CurDrawableHideSubObject("GPWEAPRACK3")
      EndScript
    End

	ModelConditionState  = DESTROYED_LEFT
      Model         = GBBlkSmith_D1
      ParticleSysBone FireSmall01 FireBuildingLarge
      ParticleSysBone FireSmall02 FireBuildingLarge
      ParticleSysBone FireSmall03 FireBuildingLarge
      ParticleSysBone FireSmall04 FireBuildingMedium
      ParticleSysBone FireSmall05 SmokeBuildingLarge
		
		;ParticleSysBone emberBone01 StructureFireGlow FollowBone:Yes
		ParticleSysBone emberBone02 StructureFireGlow FollowBone:Yes
		ParticleSysBone emberBone03 StructureFireGlow FollowBone:Yes
		ParticleSysBone emberBone04 StructureFireGlow FollowBone:Yes
	    ParticleSysBone emberBone01 fireFlare FollowBone:Yes
	    ParticleSysBone emberBone01 FireSmoke FollowBone:Yes
	    ParticleSysBone emberBone01 campfireEmbers FollowBone:Yes
		ParticleSysBone emberBone02 fireFlareA FollowBone:Yes
		ParticleSysBone emberBone02 FireSmoke FollowBone:Yes
		ParticleSysBone emberBone03 fireFlareA FollowBone:Yes
		ParticleSysBone emberBone03 FireSmoke FollowBone:Yes
		ParticleSysBone emberBone03 campfireEmbers FollowBone:Yes
		ParticleSysBone emberBone04 fireFlareA FollowBone:Yes
		ParticleSysBone emberBone04 FireSmoke FollowBone:Yes
		ParticleSysBone extraglowbone01 WindowGlow FollowBone:Yes
		ParticleSysBone extraglowbone02 StructureFireGlow FollowBone:Yes
		ParticleSysBone extraglowbone03 WindowGlow FollowBone:Yes
		ParticleSysBone extraglowbone04 WindowGlow FollowBone:Yes
		ParticleSysBone extraglowbone05 WindowGlow FollowBone:Yes
		ParticleSysBone extraglowbone06 WindowGlow FollowBone:Yes
		ParticleSysBone extraglowbone07 WindowGlow FollowBone:Yes
		ParticleSysBone extraglowbone08 WindowGlow FollowBone:Yes
		ParticleSysBone emberbone FireBuildingSmallA FollowBone:Yes
		ParticleSysBone extraglowbone01 FireBuildingSmallA FollowBone:Yes
		ParticleSysBone extraglowbone02 FireBuildingLargeA FollowBone:Yes
		ParticleSysBone extraglowbone03 FireBuildingLargeA FollowBone:Yes
		ParticleSysBone extraglowbone04 FireBuildingMediumA FollowBone:Yes
		ParticleSysBone extraglowbone06 FireBuildingLargeA FollowBone:Yes
		ParticleSysBone extraglowbone05 FireBuildingSmallA FollowBone:Yes
		ParticleSysBone extraglowbone07 FireBuildingMediumA FollowBone:Yes
		ParticleSysBone extraglowbone08 FireBuildingSmallA FollowBone:Yes
		ParticleSysBone extraglowbone09 FireBuildingSmallA FollowBone:Yes
		ParticleSysBone extraglowbone10 FireBuildingSmallA FollowBone:Yes

    End
    
    AnimationState = DESTROYED_LEFT
      BeginScript
        CurDrawableHideSubObject("GBBlkSmith_04")
         CurDrawableHideSubObject("GPWEAPRACK1")
		CurDrawableHideSubObject("GPWEAPRACK2")
		CurDrawableHideSubObject("GPWEAPRACK3")
      EndScript
    End
    
    
    ModelConditionState  = DAMAGED
      Model         = GBBlkSmith_D1
      ParticleSysBone FireSmall01 FireBuildingLarge
      ParticleSysBone FireSmall02 FireBuildingMedium
      ParticleSysBone FireSmall03 FireBuildingMedium
      ParticleSysBone FireSmall04 FireBuildingMedium
      ParticleSysBone FireSmall05 SmokeBuildingLarge
		
		;ParticleSysBone emberBone01 StructureFireGlow FollowBone:Yes
		ParticleSysBone emberBone02 StructureFireGlow FollowBone:Yes
		ParticleSysBone emberBone03 StructureFireGlow FollowBone:Yes
		ParticleSysBone emberBone04 StructureFireGlow FollowBone:Yes
	    ParticleSysBone emberBone01 fireFlare FollowBone:Yes
	    ParticleSysBone emberBone01 FireSmoke FollowBone:Yes
	    ParticleSysBone emberBone01 campfireEmbers FollowBone:Yes
		ParticleSysBone emberBone02 fireFlareA FollowBone:Yes
		ParticleSysBone emberBone02 FireSmoke FollowBone:Yes
		ParticleSysBone emberBone03 fireFlareA FollowBone:Yes
		ParticleSysBone emberBone03 FireSmoke FollowBone:Yes
		ParticleSysBone emberBone03 campfireEmbers FollowBone:Yes
		ParticleSysBone emberBone04 fireFlareA FollowBone:Yes
		ParticleSysBone emberBone04 FireSmoke FollowBone:Yes
		ParticleSysBone extraglowbone01 WindowGlow FollowBone:Yes
		ParticleSysBone extraglowbone02 StructureFireGlow FollowBone:Yes
		ParticleSysBone extraglowbone03 WindowGlow FollowBone:Yes
		ParticleSysBone extraglowbone04 WindowGlow FollowBone:Yes
		ParticleSysBone extraglowbone05 WindowGlow FollowBone:Yes
		ParticleSysBone extraglowbone06 WindowGlow FollowBone:Yes
		ParticleSysBone extraglowbone07 WindowGlow FollowBone:Yes
		ParticleSysBone extraglowbone08 WindowGlow FollowBone:Yes
		ParticleSysBone emberbone FireBuildingSmallA FollowBone:Yes
		ParticleSysBone extraglowbone01 FireBuildingSmallA FollowBone:Yes
		ParticleSysBone extraglowbone02 FireBuildingLargeA FollowBone:Yes
		ParticleSysBone extraglowbone03 FireBuildingLargeA FollowBone:Yes
		ParticleSysBone extraglowbone04 FireBuildingMediumA FollowBone:Yes
		ParticleSysBone extraglowbone06 FireBuildingLargeA FollowBone:Yes
		ParticleSysBone extraglowbone05 FireBuildingSmallA FollowBone:Yes
		ParticleSysBone extraglowbone07 FireBuildingMediumA FollowBone:Yes
		ParticleSysBone extraglowbone08 FireBuildingSmallA FollowBone:Yes
		ParticleSysBone extraglowbone09 FireBuildingSmallA FollowBone:Yes
		ParticleSysBone extraglowbone10 FireBuildingSmallA FollowBone:Yes
	
    End
    
    AnimationState = DAMAGED
	EnteringStateFX	= FX_BuildingDamaged
      BeginScript
        CurDrawableHideSubObject("GBBlkSmith_04")
        CurDrawableShowSubObject("GPWEAPRACK1")
	CurDrawableShowSubObject("GPWEAPRACK2")
	CurDrawableShowSubObject("GPWEAPRACK3")
      EndScript
    End
   
   
    ModelConditionState  = REALLYDAMAGED
      Model         = GBBlkSmith_D2
      ParticleSysBone FireSmall01 FireBuildingLarge
      ParticleSysBone FireSmall02 FireBuildingLarge
      ParticleSysBone FireSmall03 FireBuildingLarge
      ParticleSysBone FireSmall04 FireBuildingMedium
      ParticleSysBone FireSmall05 SmokeBuildingLarge

		;ParticleSysBone emberBone01 StructureFireGlow FollowBone:Yes
		ParticleSysBone emberBone02 StructureFireGlow FollowBone:Yes
		ParticleSysBone emberBone03 StructureFireGlow FollowBone:Yes
		ParticleSysBone emberBone04 StructureFireGlow FollowBone:Yes
	    ParticleSysBone emberBone01 fireFlare FollowBone:Yes
	    ParticleSysBone emberBone01 FireSmoke FollowBone:Yes
	    ParticleSysBone emberBone01 campfireEmbers FollowBone:Yes
		ParticleSysBone emberBone02 fireFlareA FollowBone:Yes
		ParticleSysBone emberBone02 FireSmoke FollowBone:Yes
		ParticleSysBone emberBone03 fireFlareA FollowBone:Yes
		ParticleSysBone emberBone03 FireSmoke FollowBone:Yes
		ParticleSysBone emberBone03 campfireEmbers FollowBone:Yes
		ParticleSysBone emberBone04 fireFlareA FollowBone:Yes
		ParticleSysBone emberBone04 FireSmoke FollowBone:Yes
		ParticleSysBone extraglowbone01 WindowGlow FollowBone:Yes
		ParticleSysBone extraglowbone02 StructureFireGlow FollowBone:Yes
		ParticleSysBone extraglowbone03 WindowGlow FollowBone:Yes
		ParticleSysBone extraglowbone04 WindowGlow FollowBone:Yes
		ParticleSysBone extraglowbone05 WindowGlow FollowBone:Yes
		ParticleSysBone extraglowbone06 WindowGlow FollowBone:Yes
		ParticleSysBone extraglowbone07 WindowGlow FollowBone:Yes
		ParticleSysBone extraglowbone08 WindowGlow FollowBone:Yes
		ParticleSysBone emberbone FireBuildingSmallA FollowBone:Yes		
		ParticleSysBone extraglowbone01 FireBuildingSmallA FollowBone:Yes
		ParticleSysBone extraglowbone02 FireBuildingLargeA FollowBone:Yes
		ParticleSysBone extraglowbone03 FireBuildingLargeA FollowBone:Yes
		ParticleSysBone extraglowbone04 FireBuildingMediumA FollowBone:Yes
		ParticleSysBone extraglowbone06 FireBuildingLargeA FollowBone:Yes
		ParticleSysBone extraglowbone05 FireBuildingSmallA FollowBone:Yes
		ParticleSysBone extraglowbone07 FireBuildingMediumA FollowBone:Yes
		ParticleSysBone extraglowbone08 FireBuildingSmallA FollowBone:Yes
		ParticleSysBone extraglowbone09 FireBuildingSmallA FollowBone:Yes
		ParticleSysBone extraglowbone10 FireBuildingSmallA FollowBone:Yes
	
    End
    AnimationState = REALLYDAMAGED
	EnteringStateFX	= FX_BuildingReallyDamaged
    End
   
    ModelConditionState  = RUBBLE
      Model         = GBBlkSmith_D2
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End
    
    AnimationState = RUBBLE
      BeginScript
        CurDrawableHideSubObject("GBBlkSmith_01")
        CurDrawableHideSubObject("GBBlkSmith_02")
        CurDrawableHideSubObject("GBBlkSmith_03")
        CurDrawableHideSubObject("GBBlkSmith_04")
      EndScript
    End

    ModelConditionState  = POST_RUBBLE
		Model         = None
		ParticleSysBone NONE SmokeBuildingMediumRubble
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
		ParticleSysBone NONE SmokeBuildingMediumRubble
    End

				
  End

	Draw = W3DFloorDraw ModuleTag_DrawFloor    
		StaticModelLODMode = Yes		; THIS NEEDS TO BE COMMENTED OUT WHEN ENGINEERING ENABLES LOD'S IN THE FLOOR DRAW
		ModelName = GBBlkSmith_Bib
	End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:GondorBlackSmith
  Description	      = OBJECT:GondorBlacksmithDescription

  Side                = Gondor
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
  
  PlacementViewAngle  = 90

 
  BuildCost           = GONDOR_FORGE_BUILDCOST
  BuildTime           = GONDOR_FORGE_BUILDTIME           ; in seconds
  BountyValue         = GONDOR_FORGE_BOUNTY_VALUE
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = GONDOR_FORGE_SHROUD_CLEAR
  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    ;DamageFX          = StructureDamageFXNoShake
  End
  CommandSet          = GondorForgeCommandSet

	WeaponSet
		Conditions			= None
	End

;	WeaponSet
;		Weapon				= PRIMARY GondorStructureBow
;		Conditions			= PLAYER_UPGRADE
;		AutoChooseSources	= PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
;	End
 

  ; *** AUDIO Parameters ***

	VoiceSelect		= GondorForgeSelect

	SoundOnDamaged		= BuildingLightDamageStone
	SoundOnReallyDamaged	= BuildingHeavyDamageStone

	VoiceSelectUnderConstruction	= BuildingGoodVoiceSelectUnderConstruction

	UnitSpecificSounds
		UnderConstruction		= BuildingConstructionLoop  ; Built first time
		; UnderRepairFromDamage	= NoSound					; Repaired No animation on the building, so don't bother playing sound
		UnderRepairFromRubble	= BuildingConstructionLoop	; Repaired from completely destroyed (not used???)
	End
 

  ; *** ENGINEERING Parameters ***

  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE CAPTURABLE FS_FACTORY MP_COUNT_FOR_VICTORY NEED_BASE_FOUNDATION ATTACK_NEEDS_LINE_OF_SIGHT CAN_ATTACK ; AUTO_RALLYPOINT ;
 
  Behavior            = GettingBuiltBehavior GetBuiltBehaviorTag
    WorkerName		  = GondorWorkerNoSelect
  End

  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

	Behavior = AIUpdateInterface ModuleTag_SoWeCanUseWeapon
		AutoAcquireEnemiesWhenIdle	= Yes
		MoodAttackCheckRate			= 250
	End

  Body                      	= StructureBody ModuleTag_05
    MaxHealth         		  	= GONDOR_FORGE_HEALTH
    MaxHealthDamaged  		  	= GONDOR_FORGE_HEALTH_DAMAGED
    MaxHealthReallyDamaged 		= GONDOR_FORGE_HEALTH_REALLY_DAMAGED
    DamageCreationList = OCL_BuildingDamageList01 CATAPULT_ROCK
    
    DamageCreationList = OCL_GBBlkSmith_Chunk1 CATAPULT_ROCK FRONT_DESTROYED
    DamageCreationList = OCL_GBBlkSmith_Chunk2 CATAPULT_ROCK BACK_DESTROYED
    DamageCreationList = OCL_GBBlkSmith_Chunk3 CATAPULT_ROCK RIGHT_DESTROYED
    DamageCreationList = OCL_GBBlkSmith_Chunk4 CATAPULT_ROCK LEFT_DESTROYED
    
  End

  Behavior = ProductionUpdate ModuleTag_06
    ; nothing
  End

  Behavior = AutoDepositUpdate AutoDepositModuleTag
    DepositTiming       = GONDOR_FORGE_MONEY_TIME   ; in milliseconds
    DepositAmount       = GONDOR_FORGE_MONEY_AMOUNT   ; cash amount to deposit every DepositTiming
    InitialCaptureBonus = 0  ; no initial bonus
    
    
    Upgrade = Upgrade_MarketplaceUpgradeIronOre  
    UpgradeBonusPercent = GONDOR_IRONORE_PRODUCTION_INCREASE %
	UpgradeMustBePresent = ANY +GondorMarketPlace
    
  End

	Behavior = SubObjectsUpgrade ModuleTag_HideAll
		TriggeredBy		= Upgrade_StructureLevel1
		HideSubObjects	= V1 V2 V2FLAG
	End

  	Behavior = SubObjectsUpgrade ModuleTag_ShowPillarsAndWalls 
		TriggeredBy		= Upgrade_StructureLevel2
		ShowSubObjects	= V1
		HideSubObjects	= V2 V2FLAG
	End

	Behavior = SubObjectsUpgrade ModuleTag_ShowTower
		TriggeredBy		= Upgrade_StructureLevel3
		ShowSubObjects	= V1 V2 V2FLAG
	End
;  	Behavior = WeaponSetUpgrade ModuleTag_Weapon
;		TriggeredBy		= Upgrade_StructureLevel3
;	End

	;-----------------------------------------------------------------------------------

	Behavior = CostModifierUpgrade ModuleTag_CostModifierUpgrades
		LabelForPalantirString = GUI:STEEL_DISCOUNT
		StartsActive = Yes ; Run on build complete, not upgrade
		UpgradeDiscount	= Yes
		Percentage		= 0%
		Percentage		= -10%
		Percentage		= -15%
		Percentage		= -20%
		Percentage		= -30%
		Percentage		= -40%
	End

	Behavior = CostModifierUpgrade ModuleTag_CostModifierMachines
		LabelForPalantirString = GUI:STEEL_DISCOUNT
		StartsActive = Yes ; Run on build complete, not upgrade
		ObjectFilter	= ANY +MACHINE
		Percentage		= 0%
		Percentage		= -10%
		Percentage		= -15%
		Percentage		= -20%
		Percentage		= -30%
		Percentage		= -40%
	End

	;-----------------------------------------------------------------------------------

	Behavior = RefundDie ModuleTag_refund
		UpgradeRequired = Upgrade_MarketplaceUpgradeDefiance
		BuildingRequired = ANY +GondorMarketPlace
		RefundPercent = 50%
	End


  Behavior = QueueProductionExitUpdate ModuleTag_07
    UnitCreatePoint    = X:-5.0 Y:25.0 Z:0.0
    NaturalRallyPoint  = X:40.0 Y:25.0 Z:0.0
    ExitDelay = 750
    PlacementViewAngle  = 0
  End
  
  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
  
 Behavior                  = BuildingBehavior BuildingModuleTag
    NightWindowName         = WINDOW_N01
    FireWindowName          = WINDOW_F01
    GlowWindowName			= WINDOW_G01
    ;FireName				= FIRE01
  End
  
  

  Behavior                  = StructureCollapseUpdate ModuleTag_08
    MinCollapseDelay        = 000
    MaxCollapseDelay        = 000
    CollapseDamping         = .5
    MaxShudder              = 0.6
    MinBurstDelay           = 250
    MaxBurstDelay           = 800
    BigBurstFrequency       = 4
    FXList                  = INITIAL   FX_StructureMediumCollapse
    FXList                  = ALMOST_FINAL  FX_StructureAlmostCollapse
	DestroyObjectWhenDone	= Yes
	CollapseHeight			= 100
  End

  

  ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		MaxUpdateRangeCap = 800
		AnimationSound = Sound: GondorForgeSizzle Animation:GBBLKSMITH_SKL.GBBLKSMITH_IDLA Frames: 314 
		AnimationSound = Sound: GondorForgeHammering Animation:GBBLKSMITH_SKL.GBBLKSMITH_HMRA Frames: 10 35 61  Animation:GBBlkSmith_SKL.GBBlkSmith_LOKA Frames: 11 
		AnimationSound = Sound: GondorForgeHammering Animation:GBBLKSMITH_SKL.GBBLKSMITH_IDLA Frames: 131 155 180 
  End
   

	Behavior = GeometryUpgrade Geom_ModuleTag_HideAll
		TriggeredBy		= Upgrade_StructureLevel1
		ShowGeometry	= Geom_Orig
		HideGeometry	= Geom_V1 Geom_V2 
	End
	Behavior = GeometryUpgrade Geom_ModuleTag_ShowWalls 
		TriggeredBy		= Upgrade_StructureLevel2
		ShowGeometry	= Geom_V1 
		HideGeometry	= Geom_Orig Geom_V2 
	End
  	Behavior = GeometryUpgrade Geom_ModuleTag_ShowFlagsAndTower 
		TriggeredBy		= Upgrade_StructureLevel3
		ShowGeometry	= Geom_V1 Geom_V2
		HideGeometry	= Geom_Orig
	End
		
	Geometry				= BOX
    GeometryName			= Geom_Orig
  	GeometryMajorRadius		= 28.0
	GeometryMinorRadius		= 40.0
	GeometryHeight			= 14.0
	GeometryOffset			= X:0 Y:0 Z:0	
		
	AdditionalGeometry		= BOX
	GeometryName			= Geom_Orig
	GeometryMajorRadius		= 28.0
	GeometryMinorRadius		= 16.0
	GeometryHeight			= 50.0
	GeometryOffset			= X:0 Y:23 Z:0	

	AdditionalGeometry		= BOX
    GeometryName			= Geom_V1
  	GeometryMajorRadius		= 30.0
	GeometryMinorRadius		= 40.0
	GeometryHeight			= 18.0
	GeometryOffset			= X:0 Y:0 Z:0	
		
	AdditionalGeometry		= BOX
	GeometryName			= Geom_V1
	GeometryMajorRadius		= 32.0
	GeometryMinorRadius		= 18.0
	GeometryHeight			= 50.0
	GeometryOffset			= X:0 Y:23 Z:0	
		
	AdditionalGeometry		= BOX
    GeometryName			= Geom_V2
  	GeometryMajorRadius		= 9.0
	GeometryMinorRadius		= 9.0
	GeometryHeight			= 85.0
	GeometryOffset			= X:0 Y:32.5 Z:0	
		
    GeometryIsSmall       = No
  
	Shadow                = SHADOW_VOLUME
	BuildCompletion     = PLACED_BY_PLAYER
	
	GeometryContactPoint = X:-35.943	Y:39.809	Z:0			Repair
	GeometryContactPoint = X:26.935		Y:-42.402	Z:0			Repair
	GeometryContactPoint = X:-26.201	Y:-42.402	Z:0
	GeometryContactPoint = X:35.727		Y:38.094	Z:0
	GeometryContactPoint = X:-0.272		Y:23.661	Z:57.982	Swoop

End

;------------------------------------------------------------------------------
;Gondor Inner Wall
Object GondorInnerWall
 
  ; *** ART Parameters ***

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBWalls
    End
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:GondorWall
  Side                = Gondor
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160
;  ArmorSet
;    Conditions        = None
;    Armor             = StructureArmor
;    DamageFX          = StructureDamageFXNoShake
;  End


  ; *** AUDIO Parameters ***

	SoundOnDamaged		= BuildingLightDamageStone
	SoundOnReallyDamaged	= BuildingHeavyDamageStone

;  VoiceSelect         = NuclearReactorSelect

;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End

 
  ; *** ENGINEERING Parameters ***

  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE NEED_BASE_FOUNDATION
 
  Behavior            = GettingBuiltBehavior GetBuiltBehaviorTag
    WorkerName		  = GondorWorkerNoSelect
  End

  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  Body                = StructureBody ModuleTag_05
    MaxHealth         = 1500.0
  End

  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End

;  Behavior           = CreateObjectDie ModuleTag_08
;    CreationList     = OCL_SmallStructureDebris
;  End
 
;  Behavior = ProductionUpdate ModuleTag_10
;    ; nothing, but is required if we have any Object-level Upgrades!
;  End
 
;  Behavior = FlammableUpdate ModuleTag_14
;    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
;    AflameDamageAmount = 5       ; taking this much damage...
;    AflameDamageDelay = 500       ; this often.
;  End
 
;  Behavior = TransitionDamageFX ModuleTag_15
;    ;-------------DESIGNED FOR SMALL SIZED FACTION BUILDING TRANSITIONS-------------------
;    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
;    ;---------------------------------------------------------------------------------------
;    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
;    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
;    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
;  End
 
;  Behavior             = FXListDie ModuleTag_16
;    DeathFX       = FX_BuildingDie
;  End
 
  Geometry              = BOX
  GeometryMajorRadius   = 28.0
  GeometryMinorRadius   = 20.0
  GeometryHeight        = 24.0
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER
End

;------------------------------------------------------------------------------------------
Object GBMGateDoor

SelectPortrait = BPGondorCastleGate

  ; *** ART Parameters ***

	BuildTime           = 180.0           ; in seconds
        BuildCost           = 1000

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes

    DefaultModelConditionState  
      Model = GBCASTGATE
    End

	; Reinforced constructed--------------------------------------------------------------
	; Need this so that repairing a reinforced one correctly plays the geting built anim.
	ModelConditionState   = ACTIVELY_BEING_CONSTRUCTED USER_1
		Model             = GBCASTGATE_UA
		ParticleSysBone   = DUSTBONE BuildingContructDust
	End
	AnimationState        = ACTIVELY_BEING_CONSTRUCTED USER_1
		StateName				= STATE_None
			Animation           = GBCASTGATE_UA
				AnimationName   = GBCASTGATE_UA.GBCASTGATE_UA
				AnimationMode   = MANUAL
			End
		Flags					= START_FRAME_FIRST
	End

	; Constructed---------------------------------------------------------------------------------------
	ModelConditionState   = ACTIVELY_BEING_CONSTRUCTED
		Model             = GBCASTGATE_A
		ParticleSysBone   = DUSTBONE BuildingContructDust
	End
	AnimationState        = ACTIVELY_BEING_CONSTRUCTED 
		StateName				= STATE_None
			Animation           = GBCASTGATE_A
				AnimationName   = GBCASTGATE_A.GBCASTGATE_A
				AnimationMode   = MANUAL
			End
		Flags					= START_FRAME_FIRST
	End
	
	; Reinforced destoyed when being constructed--------------------------------------------------------------
    ModelConditionState   = DESTROYED_WHILST_BEING_CONSTRUCTED USER_1
		Model			  = GBCASTGATE_UA
		ParticleSysBone   = DUSTBONE BuildingContructDust
    End  
	AnimationState	= DESTROYED_WHILST_BEING_CONSTRUCTED USER_1
		StateName		= STATE_DetroyedConstructing
		EnteringStateFX	= FX_GondorCastleGateDestroy
		Animation
			AnimationName		= GBCASTGATE_UA.GBCASTGATE_UA
			AnimationMode		= ONCE_BACKWARDS
			AnimationBlendTime	= 90	; 3 seconds * 30 frames
		End
		; Specifically no start last frame flag here.
		Flags = START_FRAME_FIRST
	End
	
	; Destoyed when being constructed--------------------------------------------------------------
    ModelConditionState   = DESTROYED_WHILST_BEING_CONSTRUCTED
		Model			  = GBCASTGATE_A
		ParticleSysBone   = DUSTBONE BuildingContructDust
    End  
	AnimationState	= DESTROYED_WHILST_BEING_CONSTRUCTED
		StateName		= STATE_DetroyedConstructing
		EnteringStateFX	= FX_GondorCastleGateDestroy
		Animation
			AnimationName		= GBCASTGATE_A.GBCASTGATE_A
			AnimationMode		= ONCE_BACKWARDS
			AnimationBlendTime	= 90	; 3 seconds * 30 frames
		End
		; Specifically no start last frame flag here.
		Flags = START_FRAME_FIRST
	End

	; Reinforced rubble open-------------------------------------------------------------------------
	ModelConditionState  = RUBBLE DOOR_1_OPENING USER_1
		Model         = GBCASTGATE_UD4
	End
	TransitionState = TRANS_IntoRubbleU4
		Animation = D3
			AnimationName		= GBCASTGATE_UD4.GBCASTGATE_UD4
			AnimationMode		= ONCE
			AnimationBlendTime = 0
		End
		ParticleSysBone NONE FX_GondorCastleGateDestroy
	End
    AnimationState = RUBBLE DOOR_1_OPENING USER_1
		Flags = START_FRAME_LAST
		StateName = STATE_Rubble
		Animation				=	Death
			AnimationName		=	GBCASTGATE_UD4.GBCASTGATE_UD4
			AnimationMode		=	ONCE
		End
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "STATE_None" or Prev == "STATE_Open" or Prev == "STATE_Closed" or Prev == "TRANS_Closed_To_Open" or Prev == "TRANS_Open_To_Closed"
			then
				; Only play the rubble anim if we havn't come from another rubble.
				CurDrawableSetTransitionAnimState("TRANS_IntoRubbleU4")
			end
		EndScript
    End      

	; Rubble open-------------------------------------------------------------------------
	ModelConditionState  = RUBBLE DOOR_1_OPENING
		Model         = GBCASTGATE_D4  
	End
	TransitionState = TRANS_IntoRubble4
		Animation = D3
			AnimationName		= GBCASTGATE_D4.GBCASTGATE_D4
			AnimationMode		= ONCE
			AnimationBlendTime = 0
		End
		ParticleSysBone NONE FX_GondorCastleGateDestroy
	End
    AnimationState = RUBBLE DOOR_1_OPENING
		Flags = START_FRAME_LAST
		StateName = STATE_Rubble
		Animation				=	Death
			AnimationName		=	GBCASTGATE_D4.GBCASTGATE_D4
			AnimationMode		=	ONCE
		End
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "STATE_None" or Prev == "STATE_Open" or Prev == "STATE_Closed" or Prev == "TRANS_Closed_To_Open" or Prev == "TRANS_Open_To_Closed"
			then
				; Only play the rubble anim if we havn't come from another rubble.
				CurDrawableSetTransitionAnimState("TRANS_IntoRubble4")
			end
		EndScript
    End      

	; Reinforced rubble closed-------------------------------------------------------------------------
	ModelConditionState  = RUBBLE DOOR_1_CLOSING USER_1
		Model         = GBCASTGATE_UD3
	End
	TransitionState = TRANS_IntoRubbleU3
		Animation = D4
			AnimationName		= GBCASTGATE_UD3.GBCASTGATE_UD3
			AnimationMode		= ONCE
			AnimationBlendTime	= 0
		End
		ParticleSysBone NONE FX_GondorCastleGateDestroy
	End
    AnimationState = RUBBLE DOOR_1_CLOSING USER_1
		Flags = START_FRAME_LAST
		StateName = STATE_Rubble
		Animation				=	Death
			AnimationName		=	GBCASTGATE_UD3.GBCASTGATE_UD3
			AnimationMode		=	ONCE
		End
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "STATE_None" or Prev == "STATE_Open" or Prev == "STATE_Closed" or Prev == "TRANS_Closed_To_Open" or Prev == "TRANS_Open_To_Closed"
			then
				; Only play the rubble anim if we havn't come from another rubble.
				CurDrawableSetTransitionAnimState("TRANS_IntoRubbleU3")
			end
		EndScript
    End      

	; Rubble open-------------------------------------------------------------------------
	ModelConditionState  = RUBBLE DOOR_1_CLOSING
		Model         = GBCASTGATE_D3
	End
	TransitionState = TRANS_IntoRubble3
		Animation = D4
			AnimationName		= GBCASTGATE_D3.GBCASTGATE_D3
			AnimationMode		= ONCE
			AnimationBlendTime = 0
		End
		ParticleSysBone NONE FX_GondorCastleGateDestroy
	End
    AnimationState = RUBBLE DOOR_1_CLOSING
		Flags = START_FRAME_LAST
		StateName = STATE_Rubble
		Animation				=	Death
			AnimationName		=	GBCASTGATE_D3.GBCASTGATE_D3
			AnimationMode		=	ONCE
		End
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "STATE_None" or Prev == "STATE_Open" or Prev == "STATE_Closed" or Prev == "TRANS_Closed_To_Open" or Prev == "TRANS_Open_To_Closed"
			then
				; Only play the rubble anim if we havn't come from another rubble.
				CurDrawableSetTransitionAnimState("TRANS_IntoRubble3")
			end
		EndScript
    End      
    
	AnimationState = DOOR_1_OPENING
		StateName = STATE_Open   
		Animation = Open 
			AnimationName	=	GBCASTGATE.GBCASTGATE
			AnimationMode	=	ONCE 
			AnimationBlendTime = 0
		End
		Flags = START_FRAME_LAST
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "STATE_Closed" then CurDrawableSetTransitionAnimState("TRANS_Closed_To_Open") end
		EndScript
    End
    TransitionState = TRANS_Closed_To_Open
		Animation = Open 
			AnimationName	=	GBCASTGATE.GBCASTGATE
			AnimationMode	=	ONCE 
		End
    End
        
	AnimationState = DOOR_1_CLOSING 
		StateName = STATE_Closed 
		Animation = Close 
			AnimationName	=	GBCASTGATE.GBCASTGATE
			AnimationMode	=	ONCE_BACKWARDS 
			AnimationBlendTime = 0
		End
		Flags = START_FRAME_FIRST
		BeginScript
			
			Prev = CurDrawablePrevAnimationState()
			if Prev == "STATE_Open" then CurDrawableSetTransitionAnimState("TRANS_Open_To_Closed") end
		EndScript
    End
    TransitionState = TRANS_Open_To_Closed
		Animation = Open 
			AnimationName	=	GBCASTGATE.GBCASTGATE
			AnimationMode	=	ONCE_BACKWARDS 
		End
		Flags = START_FRAME_LAST
    End
    
    ModelConditionState = USER_1
		Model = GBCastGate_U
    End

  End


  ; *** AUDIO Parameters ***

	VoiceSelect		= GateSelect

	SoundOnDamaged		= BuildingLightDamageStone
	SoundOnReallyDamaged	= BuildingHeavyDamageStone

	VoiceSelectUnderConstruction	= BuildingGoodVoiceSelectUnderConstruction

	UnitSpecificSounds
		UnderConstruction		= BuildingConstructionLoop  ; Built first time
		; UnderRepairFromDamage	= NoSound					; Repaired No animation on the building, so don't bother playing sound
		UnderRepairFromRubble	= BuildingConstructionLoop	; Repaired from completely destroyed (not used???)
	End


  ; ***DESIGN parameters ***

	DisplayName				= OBJECT:GBMgatedoor
	Side					= Gondor
	EditorSorting			= STRUCTURE
	ThreatLevel				= 1.0
	KeepSelectableWhenDead	= Yes
	VisionRange				= 400.0          ; Shroud clearing distance

	ArmorSet
		Conditions        = None
		Armor             = CastleGateArmor
		DamageFX          = GateDamageFX
	End
	;ArmorSet
	;	Conditions        = UNBESIEGEABLE
	;	Armor             = CastleGateUnbesiegeableArmor
	;	DamageFX          = None
	;End

	CommandSet = CastleGateCommandSet


	; *** ENGINEERING Parameters ***  
	KindOf                = STRUCTURE IMMOBILE SELECTABLE BLOCKING_GATE
	RadarPriority = STRUCTURE
	Body                  = ActiveBody ModuleTag_02
		MaxHealth       = GONDOR_CASTLE_DOOR_HEALTH			
	End

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
  Behavior = KeepObjectDie ModuleTag_IWantRubble
  End

	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		MaxUpdateRangeCap = 800
		AnimationSound = Sound: MinisTirithGateDie Animation:GBMgatedoorSKL.GBMgatedoorA3 Frames: 1 
	End

	Behavior = TransitionDamageFX ModleTag_hideBustedDoors
		PristineShowSubObject		RBCASTDRR RBCASTDRL
		PristineHideSubObject		RBCASTDRR_D1 RBCASTDRR_D2 RBCASTDRL_D1 RBCASTDRL_D2
		DamagedShowSubObject		RBCASTDRR_D1 RBCASTDRL_D1
		DamagedHideSubObject		RBCASTDRR_D2 RBCASTDRL_D2 RBCASTDRR RBCASTDRL
		ReallyDamagedShowSubObject	RBCASTDRR_D2 RBCASTDRL_D2
		ReallyDamagedHideSubObject  RBCASTDRR_D1  RBCASTDRL_D1 RBCASTDRR RBCASTDRL
        DamagedFXList1 = Loc: X:0 Y:0 Z:0			FXList:FX_BasicSevereScreenShake
 	    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0		FXList:FX_BasicSevereScreenShake
 	    RubbleFXList1 = Loc: X:0 Y:0 Z:0			FXList:FX_HelmsDeepGateRubble
	End

	Behavior = GateOpenAndCloseBehavior ModuleTag_GATE
		ResetTimeInMilliseconds = 12200 ; important! this must be longer than the gates animation, ir it will twitch
		OpenByDefault = Yes
		PercentOpenForPathing = 50
		SoundOpeningGateLoop = GateOpenStart
		SoundClosingGateLoop = GateCloseStart
		SoundFinishedOpeningGate = GateOpenEnd
		SoundFinishedClosingGate = GateCloseEnd
		TimeBeforePlayingOpenSound = 9500
		TimeBeforePlayingClosedSound = 9500

		;Proxy = Munkee
	End


	Behavior = GettingBuiltBehavior ModuleTag_GettingBuilt
	    SelfBuildingLoop = BuildingConstructionLoop			; Only played if we DON'T spawn a worker
		SelfRepairFromDamageLoop  = NoSound         ; This doesn't cause an animation, so don't bother playing a sound
		SelfRepairFromRubbleLoop  = BuildingConstructionLoop
		SpawnTimer = -1.0									; Negative means no 'autoheal'
		
		RebuildTimeSeconds = 120 ;30
		
	End



	Behavior = AttributeModifierUpgrade ModuleTag_Reinforced
		TriggeredBy				= Upgrade_ReinforcedGate
		AttributeModifier		= ReinforcedGate_Bonus
		CustomAnimAndDuration	= AnimState:USER_1 AnimTime:0	;  - should define special upgrade model condition.
	End

    Behavior = CastleMemberBehavior ModuleTag_CMB
		CountsForEvaCastleBreached = Yes
    End 

	Geometry              = BOX
	GeometryMajorRadius   = 16.0
	GeometryMinorRadius   = 72.0
	GeometryHeight        = 56.0
	GeometryName          = Closed
	GeometryIsSmall       = No
	
	AdditionalGeometry    = BOX
	GeometryMajorRadius   = 21.0
	GeometryMinorRadius   = 2.0
	GeometryHeight        = 56.0	
	GeometryOffset		  = X:10 Y:56 Z:0
	GeometryName          = OpenLeft
	
	AdditionalGeometry    = BOX
	GeometryMajorRadius   = 21.0
	GeometryMinorRadius   = 2.0
	GeometryHeight        = 56.0	
	GeometryOffset		  = X:10 Y:-56 Z:0
	GeometryName          = OpenRight
	
	GeometryContactPoint = X:25 Y:-56 Z:0 Ram
	GeometryContactPoint = X:12 Y:-56 Z:56			; do
	GeometryContactPoint = X:0  Y:-56 Z:0			; kindly
	GeometryContactPoint = X:0  Y:-25 Z:56			; note the
	GeometryContactPoint = X:0  Y:  0 Z:0 Ram		; butterfly
	GeometryContactPoint = X:0  Y: 25 Z:56			; symmetry
	GeometryContactPoint = X:0  Y: 56 Z:0			; please
	GeometryContactPoint = X:12 Y: 56 Z:56			; ta
	GeometryContactPoint = X:25 Y: 56 Z:0 Ram
	
	
	Shadow                = SHADOW_VOLUME
End

;--------------------------------------------------------------------------------------

Object gateProxy

	;ART---------------------
	Draw = W3DScriptedModelDraw ModuleTag_Draw
		OkToChangeModelColor  = Yes
		UseStandardModelNames = Yes
		DefaultModelConditionState
			Model = None
		End
	End

	;DESIGN------------------
	DisplayName      = OBJECT:GBMgatedoor
	Side = Civilian
	EditorSorting   = SYSTEM

	VisionRange         = 400.0          ; should match proxy
	CommandSet = CastleGateCommandSet

	;ENGINEERING-------------
	KindOf                = IMMOBILE UNATTACKABLE SELECTABLE INERT INERT_SHROUD_REVEALER
	Behavior = GateProxyBehavior ModuleTag_GATE
	End
	
	Geometry              = BOX
	GeometryMajorRadius   = 0.0
	GeometryMinorRadius   = 0.0
	GeometryHeight        = 36.0 ;should be close or same as the gate to which this is proxy
	GeometryIsSmall       = Yes

	
End


;------------------------------------------------------------------------------
;Gondor Archer Range, ArcherRange, ArcheryRange
Object GondorArcherRange

	
  SelectPortrait = BPGArcheryRange
  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_Draw
  
	ExtraPublicBone = ARROW_01
	ExtraPublicBone = ARROW_02
	ExtraPublicBone = ARROW_03
	ExtraPublicBone = ARROW_04
	ExtraPublicBone = ARROW_05
	ExtraPublicBone = ARROW_06
	ExtraPublicBone = ARROW_07
	ExtraPublicBone = ARROW_08
  
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD
    DefaultModelConditionState
		Model = GBArcheryN_SKN
		WeaponLaunchBone = PRIMARY ARROW_
    End
    
    		IdleAnimationState
				StateName					=   STATE_Idle
				Animation = IdleA
					AnimationName			=	GBArcheryN_SKL.GBArcheryN_IDLA
					AnimationMode		=	ONCE 
					AnimationPriority		=	9
				End
				Flags               = RESTART_ANIM_WHEN_COMPLETE 

			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "BeingConstructed" then 
				    ; Don't play completed sound when canceling build-in-progress or when
				    ; destroyed halfway
				    if not CurDrawableModelcondition( "DYING" ) then 
						CurDrawablePlaySound("CampSoldierCompleteGondorArcheryRange")
					end
				end
			EndScript

			End
		
		ModelConditionState   = AWAITING_CONSTRUCTION
			Model               = GBArcheryN_A
;			ParticleSysBone	  = NONE BuildingDoughnutCloud
		End
		AnimationState        = AWAITING_CONSTRUCTION
			Animation
				AnimationName	=GBArcheryN_ASKL.GBArcheryN_ABLD
				AnimationMode	= MANUAL
			End
			Flags				= START_FRAME_FIRST
		End
		
		ModelConditionState		=	ACTIVELY_BEING_CONSTRUCTED
			Model				=	GBArcheryN_A
			ParticleSysBone   = Chimney BuildingContructDust
		End;
		AnimationState        = ACTIVELY_BEING_CONSTRUCTED
			Animation
				AnimationName     = GBArcheryN_ASKL.GBArcheryN_ABLD
				AnimationMode     = MANUAL
			End
			Flags				= START_FRAME_FIRST
			StateName			= BeingConstructed
			BeginScript
				CurDrawableHideSubObjectPermanently("V1")
				CurDrawableHideSubObjectPermanently("V2")
				CurDrawableHideSubObjectPermanently("OBJECT01")
				CurDrawableHideSubObjectPermanently("OBJECT02")
				CurDrawableHideSubObjectPermanently("OBJECT03")
				CurDrawablePlaySound("GondorBarracksBeginConstruction")
			EndScript
		End

    ;--damaged building
      ModelConditionState  = DESTROYED_FRONT
      Model         = GBArcheryN_D2
		ParticleSysBone FireSmall01 SmokeBuildingMedium
		ParticleSysBone FireSmall02 FireBuildingLarge
		ParticleSysBone FireSmall03 FireBuildingMedium
		ParticleSysBone FireSmall04 FireBuildingMedium
		ParticleSysBone FireSmall05 FireBuildingLarge
		
;		ParticleSysBone emberBone01 fireFlare
;		ParticleSysBone emberBone01 FireSmoke
;		ParticleSysBone emberBone01 campfireEmbers
;		ParticleSysBone emberBone01 fireGlow
;		ParticleSysBone emberBone01 NazgulEmitter
    End

    AnimationState = DESTROYED_FRONT
      BeginScript
        CurDrawableHideSubObject("GBArcheryN_01")
      EndScript
    End
    
        ModelConditionState  = DESTROYED_RIGHT
      Model         = GBArcheryN_D2
		ParticleSysBone FireSmall01 SmokeBuildingMedium
		ParticleSysBone FireSmall02 FireBuildingLarge
		ParticleSysBone FireSmall03 FireBuildingMedium
		ParticleSysBone FireSmall04 FireBuildingMedium
		ParticleSysBone FireSmall05 FireBuildingLarge
		
;		ParticleSysBone emberBone01 fireFlare
;		ParticleSysBone emberBone01 FireSmoke
;		ParticleSysBone emberBone01 campfireEmbers
;		ParticleSysBone emberBone01 fireGlow
;		ParticleSysBone emberBone01 NazgulEmitter
    End

    AnimationState = DESTROYED_RIGHT
      BeginScript
        CurDrawableHideSubObject("GBArcheryN_03")
      EndScript
    End
    

    ModelConditionState  = DESTROYED_BACK
      Model         = GBArcheryN_D2
		ParticleSysBone FireSmall01 SmokeBuildingMedium
		ParticleSysBone FireSmall02 FireBuildingLarge
		ParticleSysBone FireSmall03 FireBuildingMedium
		ParticleSysBone FireSmall04 FireBuildingMedium
		ParticleSysBone FireSmall05 FireBuildingLarge
		
;		ParticleSysBone emberBone01 fireFlare
;		ParticleSysBone emberBone01 FireSmoke
;		ParticleSysBone emberBone01 campfireEmbers
;		ParticleSysBone emberBone01 fireGlow
;		ParticleSysBone emberBone01 NazgulEmitter
    End

    AnimationState = DESTROYED_BACK
      BeginScript
        CurDrawableHideSubObject("GBArcheryN_02")
      EndScript
    End

	ModelConditionState  = DESTROYED_LEFT
      Model         = GBArcheryN_D2
		ParticleSysBone FireSmall01 SmokeBuildingMedium
		ParticleSysBone FireSmall02 FireBuildingLarge
		ParticleSysBone FireSmall03 FireBuildingMedium
		ParticleSysBone FireSmall04 FireBuildingMedium
		ParticleSysBone FireSmall05 FireBuildingLarge
		
;		ParticleSysBone emberBone01 fireFlare
;		ParticleSysBone emberBone01 FireSmoke
;		ParticleSysBone emberBone01 campfireEmbers
;		ParticleSysBone emberBone01 fireGlow
;		ParticleSysBone emberBone01 NazgulEmitter
    End
    
    AnimationState = DESTROYED_LEFT
      BeginScript
        CurDrawableHideSubObject("GBArcheryN_04")
      EndScript
    End
    
    
    ModelConditionState  = DAMAGED
      Model         = GBArcheryN_D1
		ParticleSysBone FireSmall01 FireBuildingSmall
		ParticleSysBone FireSmall02 FireBuildingLarge
		ParticleSysBone FireSmall03 FireBuildingMedium
		ParticleSysBone FireSmall04 FireBuildingMedium
		ParticleSysBone FireSmall05 SmokeBuildingMedium
		
;		ParticleSysBone emberBone01 fireFlare
;		ParticleSysBone emberBone01 FireSmoke
;		ParticleSysBone emberBone01 campfireEmbers
;		ParticleSysBone emberBone01 fireGlow
;		ParticleSysBone emberBone01 NazgulEmitter

	
    End
    
    AnimationState = DAMAGED
	EnteringStateFX	= FX_BuildingDamaged
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = GBArcheryN_D2
		ParticleSysBone FireSmall01 SmokeBuildingMedium
		ParticleSysBone FireSmall02 FireBuildingLarge
		ParticleSysBone FireSmall03 FireBuildingMedium
		ParticleSysBone FireSmall04 FireBuildingMedium
		ParticleSysBone FireSmall05 FireBuildingLarge
		
;		ParticleSysBone emberBone01 fireFlare
;		ParticleSysBone emberBone01 FireSmoke
;		ParticleSysBone emberBone01 campfireEmbers
;		ParticleSysBone emberBone01 fireGlow
;		ParticleSysBone emberBone01 NazgulEmitter

	
    End
    
    AnimationState = REALLYDAMAGED
	EnteringStateFX	= FX_BuildingReallyDamaged
      BeginScript
      EndScript
    End

    ModelConditionState  = RUBBLE
      Model         = GBArcheryN_D2
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End
    
    AnimationState = RUBBLE
      BeginScript
        CurDrawableHideSubObject("GBArcheryN_01")
        CurDrawableHideSubObject("GBArcheryN_02")
        CurDrawableHideSubObject("GBArcheryN_03")
        CurDrawableHideSubObject("GBArcheryN_04")
      EndScript
    End

    ModelConditionState  = POST_RUBBLE
		 Model         = None
		ParticleSysBone NONE SmokeBuildingMediumRubble
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
		ParticleSysBone NONE SmokeBuildingMediumRubble
    End

  End
  
  Draw = W3DFloorDraw ModuleTag_DrawFloor    
		StaticModelLODMode = Yes		; THIS NEEDS TO BE COMMENTED OUT WHEN ENGINEERING ENABLES LOD'S IN THE FLOOR DRAW
     ModelName = GBArcheryN_Bib
  End
  
  PlacementViewAngle  = -180

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:GondorArcherRange
  Description 	      = OBJECT:GondorArcheryRangeDescription
  Side                = Gondor
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
 
  CommandSet          = GondorArcheryCommandSet
  BuildCost           = GONDOR_ARCHERYRANGE_BUILDCOST
  BuildTime           = GONDOR_ARCHERYRANGE_BUILDTIME
  BountyValue         = GONDOR_ARCHERYRANGE_BOUNTY_VALUE
  VisionRange         = GONDOR_ARCHER_VISION_RANGE          ; Shroud clearing distance
  ShroudClearingRange = GONDOR_ARCHERYRANGE_SHROUD_CLEAR
  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    ;DamageFX          = StructureDamageFXNoShake
  End

	WeaponSet
		Conditions			= None
	End

	WeaponSet
		Weapon				= PRIMARY GondorStructureBow
		Conditions			= PLAYER_UPGRADE
		AutoChooseSources	= PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End


  ; *** AUDIO Parameters ***

	VoiceSelect		= GondorArcherySelect

	SoundOnDamaged		= BuildingLightDamageStone
	SoundOnReallyDamaged	= BuildingHeavyDamageStone

	VoiceSelectUnderConstruction	= BuildingGoodVoiceSelectUnderConstruction

	UnitSpecificSounds
		UnderConstruction		= BuildingConstructionLoop  ; Built first time
		; UnderRepairFromDamage	= NoSound					; Repaired No animation on the building, so don't bother playing sound
		UnderRepairFromRubble	= BuildingConstructionLoop	; Repaired from completely destroyed (not used???)
	End

	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		MaxUpdateRangeCap = 800
		; AnimationSound = Sound: GondorArcheryRangeHits1 Animation: GBArcheryN_SKL.GBArcheryN_IDLA Frames: 40                                                    
		; AnimationSound = Sound: GondorArcheryRangeHits2 Animation: GBArcheryN_SKL.GBArcheryN_IDLA Frames: 43                                                    
 		AnimationSound = Sound: GondorArcheryRangeArrowQuiver Animation:GBArcheryN_SKL.GBArcheryN_IDLA Frames: 56 58
		AnimationSound = Sound: GondorArcheryRangeBows Animation:GBArcheryN_SKL.GBArcheryN_IDLA Frames: 38 40 
		AnimationSound = Sound: GondorArcheryRangeDrawBow Animation:GBArcheryN_SKL.GBArcheryN_IDLA Frames: 15 17
 		AnimationSound = Sound: GondorArcheryRangeVoiceFire Animation:GBArcheryN_SKL.GBArcheryN_IDLA Frames: 26
 		AnimationSound = Sound: GondorArcheryRangeVoiceAim Animation:GBArcheryN_SKL.GBArcheryN_IDLA Frames: 80
 		AnimationSound = Sound: GondorArcheryRangeHits1 Animation:GBArcheryN_SKL.GBArcheryN_IDLA Frames: 42
 		AnimationSound = Sound: GondorArcheryRangeHits2 Animation:GBArcheryN_SKL.GBArcheryN_IDLA Frames: 44
	End


  ; *** ENGINEERING Parameters ***

  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE CAPTURABLE FS_FACTORY AUTO_RALLYPOINT MP_COUNT_FOR_VICTORY NEED_BASE_FOUNDATION ATTACK_NEEDS_LINE_OF_SIGHT CAN_ATTACK
 
  Behavior            = GettingBuiltBehavior GetBuiltBehaviorTag
    WorkerName		  = GondorWorkerNoSelect
  End

  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

	Behavior = AIUpdateInterface ModuleTag_SoWeCanUseWeapon
		AutoAcquireEnemiesWhenIdle	= Yes
		MoodAttackCheckRate			= 250
	End

  Body                      = ActiveBody ModuleTag_05
    MaxHealth               = GONDOR_ARCHERYRANGE_HEALTH
    MaxHealthDamaged  		= GONDOR_ARCHERYRANGE_HEALTH_DAMAGED
    MaxHealthReallyDamaged 	= GONDOR_ARCHERYRANGE_HEALTH_REALLY_DAMAGED

     DamageCreationList = OCL_BuildingDamageList01 CATAPULT_ROCK
    
    DamageCreationList = OCL_GBArcheryN_Chunk1 CATAPULT_ROCK FRONT_DESTROYED
    DamageCreationList = OCL_GBArcheryN_Chunk2 CATAPULT_ROCK BACK_DESTROYED
    DamageCreationList = OCL_GBArcheryN_Chunk3 CATAPULT_ROCK RIGHT_DESTROYED
    DamageCreationList = OCL_GBArcheryN_Chunk4 CATAPULT_ROCK LEFT_DESTROYED
  End 
 
	Behavior = RefundDie ModuleTag_refund
		UpgradeRequired = Upgrade_MarketplaceUpgradeDefiance
		BuildingRequired = ANY +GondorMarketPlace
		RefundPercent = 50%
	End


 ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
  
  Behavior = ProductionUpdate ProductionUpdateModuleTag
    ; nothing
  End

  Behavior = QueueProductionExitUpdate QueueProductionModuleTag
    PlacementViewAngle = -180
    UnitCreatePoint    = X:28.0 Y:-35.2 Z:0.0
    NaturalRallyPoint  = X:-60.0 Y:-35.2 Z:0.0
    ExitDelay = 750
  End
  
	Behavior = SubObjectsUpgrade ModuleTag_HideAll
		TriggeredBy		= Upgrade_StructureLevel1
		HideSubObjects	= V1 V2 OBJECT01 OBJECT02 OBJECT03
	End

  	Behavior = SubObjectsUpgrade ModuleTag_ShowWalls 
		TriggeredBy		= Upgrade_StructureLevel2
		ShowSubObjects	= V1 OBJECT01 OBJECT02 OBJECT03
		HideSubObjects	= V2
	End

	Behavior = SubObjectsUpgrade ModuleTag_ShowPillars 
		TriggeredBy		= Upgrade_StructureLevel3
		ShowSubObjects	= V1 V2 OBJECT01 OBJECT02 OBJECT03
	End
  	Behavior = WeaponSetUpgrade ModuleTag_ThirdLevelBuildingArrows
		TriggeredBy		= Upgrade_StructureLevel3
		ConflictsWith	= Upgrade_EasyAIMultiPlayer
	End
 
;	Behavior = CommandSetUpgrade ModuleTag_commandSetUpgrade
;		TriggeredBy = Upgrade_ElvenAllies
;		CommandSet = GondorArcherRangeElvenAlliesUpgradedCommandSet
;	End	  

  Behavior                  = StructureCollapseUpdate ModuleTag_06
    MinCollapseDelay        = 000
    MaxCollapseDelay        = 000
    CollapseDamping         = .5
    MaxShudder              = 0.6
    MinBurstDelay           = 250
    MaxBurstDelay           = 800
    BigBurstFrequency       = 4
    FXList                  = INITIAL   FX_StructureMediumCollapse
    FXList                  = ALMOST_FINAL  FX_StructureAlmostCollapse
	DestroyObjectWhenDone	= Yes
	CollapseHeight			= 130
  End

  
   Behavior                  = BuildingBehavior BuildingModuleTag
   ; NightWindowName         = WINDOW_N01
    ;FireWindowName          = WINDOW_F01
    ;GlowWindowName			= WINDOW_G01
  End
  
	Behavior = GeometryUpgrade Geom_ModuleTag_HideAll
		TriggeredBy		= Upgrade_StructureLevel1
		ShowGeometry	= Geom_Orig
		HideGeometry	= Geom_V1 Geom_V2
	End
	Behavior = GeometryUpgrade Geom_ModuleTag_ShowWalls 
		TriggeredBy		= Upgrade_StructureLevel2
		ShowGeometry	= Geom_V1
		HideGeometry	= Geom_Orig Geom_V2 
	End
  	Behavior = GeometryUpgrade Geom_ModuleTag_ShowFlagsAndTower 
		TriggeredBy		= Upgrade_StructureLevel3
		ShowGeometry	= Geom_V2
		HideGeometry	= Geom_Orig Geom_V1 
	End
		
	Geometry				= BOX
    GeometryName			= Geom_Orig
  	GeometryMajorRadius		= 33.0
	GeometryMinorRadius		= 50.0
	GeometryHeight			= 30.0
	GeometryOffset			= X:0 Y:0 Z:0	

	AdditionalGeometry		= BOX
    GeometryName			= Geom_Orig
  	GeometryMajorRadius		= 15.0
	GeometryMinorRadius		= 12.5
	GeometryHeight			= 105.0
	GeometryOffset			= X:30 Y:-36 Z:0	
			
	AdditionalGeometry		= BOX
	GeometryName			= Geom_V1
	GeometryMajorRadius		= 50.0
	GeometryMinorRadius		= 57.5
	GeometryHeight			= 30.0
	GeometryOffset			= X:0 Y:0 Z:0	

	AdditionalGeometry		= BOX
    GeometryName			= Geom_V1
  	GeometryMajorRadius		= 15.0
	GeometryMinorRadius		= 12.5
	GeometryHeight			= 105.0
	GeometryOffset			= X:30 Y:-36 Z:0
			
	AdditionalGeometry		= BOX
	GeometryName			= Geom_V2
	GeometryMajorRadius		= 50.0
	GeometryMinorRadius		= 57.5
	GeometryHeight			= 30.0
	GeometryOffset			= X:0 Y:0 Z:0	

	AdditionalGeometry		= BOX
    GeometryName			= Geom_V2
  	GeometryMajorRadius		= 15.0
	GeometryMinorRadius		= 12.5
	GeometryHeight			= 140.0
	GeometryOffset			= X:30 Y:-36 Z:0

	AdditionalGeometry		= BOX
    GeometryName			= Geom_V2
  	GeometryMajorRadius		= 10.0
	GeometryMinorRadius		= 10.0
	GeometryHeight			= 66.0
	GeometryOffset			= X:-30 Y:49 Z:0
		
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER

	GeometryContactPoint = X:-35.379	Y:7.043		Z:0			Repair
	GeometryContactPoint = X:34.981		Y:4.035		Z:0			Repair
	AttackContactPoint = X:11.725		Y:-53.381	Z:0
	AttackContactPoint = X:11.68		Y:56.752	Z:0
	GeometryContactPoint = X:29.241		Y:-36.937	Z:104.972	Swoop
	
        HealthBoxHeightOffset	= -20.0
End

;------------------------------------------------------------------------------
;Gondor Stable
Object GondorStable

  SelectPortrait = BPGStables
 
  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD
    DefaultModelConditionState
      Model = GBStable_SKN
    End

	IdleAnimationState
		StateName					=   STATE_Idle
			Animation = IdleA
				AnimationName			=	GBStable_SKL.GBStable_IDLA
				AnimationMode		=	ONCE 
				AnimationPriority		=	10
				AnimationSpeedFactorRange = 0.5 0.5
			End
			Flags               = RESTART_ANIM_WHEN_COMPLETE 

			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "BeingConstructed" then 
				    ; Don't play completed sound when canceling build-in-progress or when
				    ; destroyed halfway
				    if not CurDrawableModelcondition( "DYING" ) then 
						CurDrawablePlaySound("CampSoldierCompleteGondorStables")
					end
				end
			EndScript

		End


   ;-- building being constructed
    ModelConditionState   = AWAITING_CONSTRUCTION 
      Model               = GBStable_A
;		ParticleSysBone	  = NONE BuildingDoughnutCloud
    End;
    AnimationState        = AWAITING_CONSTRUCTION
      Animation           = GBStable_A
        AnimationName     = GBStable_ASKL.GBStable_ABLD
        AnimationMode     = MANUAL
      End
	  Flags				  = START_FRAME_FIRST
    End

    ModelConditionState   = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
      Model               = GBStable_A
		ParticleSysBone   = DUSTBONE BuildingContructDust
    End;
    AnimationState        = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
      Animation           = GBStable_A
        AnimationName     = GBStable_ASKL.GBStable_ABLD
        AnimationMode     = MANUAL
      End
	Flags				= START_FRAME_FIRST
	StateName			= BeingConstructed

		BeginScript
			CurDrawablePlaySound("GondorBarracksBeginConstruction")
			CurDrawableHideSubObjectPermanently("V1")
			CurDrawableHideSubObjectPermanently("V2")
		EndScript
	  
    End

	
    
        ;--damaged building
      ModelConditionState  = DESTROYED_FRONT
      Model         = GBStable_D2
		ParticleSysBone FireSmall01 FireBuildingMedium
		ParticleSysBone FireSmall02 FireBuildingLarge
		ParticleSysBone FireSmall03 FireBuildingMedium
		ParticleSysBone FireSmall04 FireBuildingLarge
		ParticleSysBone FireSmall05 SmokeBuildingLarge

     	
;		ParticleSysBone emberBone01 fireFlare
;		ParticleSysBone emberBone01 FireSmoke
;		ParticleSysBone emberBone01 campfireEmbers
;		ParticleSysBone emberBone01 fireGlow
;		ParticleSysBone emberBone01 NazgulEmitter
		
;		ParticleSysBone emberBone02 fireFlare
;		ParticleSysBone emberBone02 FireSmoke
;		ParticleSysBone emberBone02 campfireEmbers
;		ParticleSysBone emberBone02 fireGlow
;		ParticleSysBone emberBone02 NazgulEmitter
    End

    AnimationState = DESTROYED_FRONT
      BeginScript
        CurDrawableHideSubObject("GBStable_01")
      EndScript
    End
    
        ModelConditionState  = DESTROYED_RIGHT
      Model         = GBStable_D2
		ParticleSysBone FireSmall01 FireBuildingMedium
		ParticleSysBone FireSmall02 FireBuildingLarge
		ParticleSysBone FireSmall03 FireBuildingMedium
		ParticleSysBone FireSmall04 FireBuildingLarge
		ParticleSysBone FireSmall05 SmokeBuildingLarge

     	
;		ParticleSysBone emberBone01 fireFlare
;		ParticleSysBone emberBone01 FireSmoke
;		ParticleSysBone emberBone01 campfireEmbers
;		ParticleSysBone emberBone01 fireGlow
;		ParticleSysBone emberBone01 NazgulEmitter
		
;		ParticleSysBone emberBone02 fireFlare
;		ParticleSysBone emberBone02 FireSmoke
;		ParticleSysBone emberBone02 campfireEmbers
;		ParticleSysBone emberBone02 fireGlow
;		ParticleSysBone emberBone02 NazgulEmitter
    End

    AnimationState = DESTROYED_RIGHT
      BeginScript
        CurDrawableHideSubObject("GBStable_02")
      EndScript
    End
    

    ModelConditionState  = DESTROYED_BACK
      Model         = GBStable_D2
		ParticleSysBone FireSmall01 FireBuildingMedium
		ParticleSysBone FireSmall02 FireBuildingLarge
		ParticleSysBone FireSmall03 FireBuildingMedium
		ParticleSysBone FireSmall04 FireBuildingLarge
		ParticleSysBone FireSmall05 SmokeBuildingLarge

;		ParticleSysBone emberBone01 fireFlare
;		ParticleSysBone emberBone01 FireSmoke
;		ParticleSysBone emberBone01 campfireEmbers
;		ParticleSysBone emberBone01 fireGlow
;		ParticleSysBone emberBone01 NazgulEmitter
		
;		ParticleSysBone emberBone02 fireFlare
;		ParticleSysBone emberBone02 FireSmoke
;		ParticleSysBone emberBone02 campfireEmbers
;		ParticleSysBone emberBone02 fireGlow
;		ParticleSysBone emberBone02 NazgulEmitter
    End

    AnimationState = DESTROYED_BACK
      BeginScript
        CurDrawableHideSubObject("GBStable_03")
      EndScript
    End

	ModelConditionState  = DESTROYED_LEFT
      Model         = GBStable_D2
		ParticleSysBone FireSmall01 FireBuildingMedium
		ParticleSysBone FireSmall02 FireBuildingLarge
		ParticleSysBone FireSmall03 FireBuildingMedium
		ParticleSysBone FireSmall04 FireBuildingLarge
		ParticleSysBone FireSmall05 SmokeBuildingLarge
     	
;		ParticleSysBone emberBone01 fireFlare
;		ParticleSysBone emberBone01 FireSmoke
;		ParticleSysBone emberBone01 campfireEmbers
;		ParticleSysBone emberBone01 fireGlow
;		ParticleSysBone emberBone01 NazgulEmitter
		
;		ParticleSysBone emberBone02 fireFlare
;		ParticleSysBone emberBone02 FireSmoke
;		ParticleSysBone emberBone02 campfireEmbers
;		ParticleSysBone emberBone02 fireGlow
;		ParticleSysBone emberBone02 NazgulEmitter
    End
    
    AnimationState = DESTROYED_LEFT
      BeginScript
        CurDrawableHideSubObject("GBStable_04")
      EndScript
    End
    
    
    ModelConditionState  = DAMAGED
      Model         = GBStable_D1
		ParticleSysBone FireSmall01 FireBuildingMedium
		ParticleSysBone FireSmall02 FireBuildingLarge
		ParticleSysBone FireSmall03 FireBuildingMedium
		ParticleSysBone FireSmall04 FireBuildingMedium
		ParticleSysBone FireSmall05 SmokeBuildingLarge
	
    End
    AnimationState = DAMAGED
	EnteringStateFX	= FX_BuildingDamaged
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = GBStable_D2
		ParticleSysBone FireSmall01 FireBuildingMedium
		ParticleSysBone FireSmall02 FireBuildingLarge
		ParticleSysBone FireSmall03 FireBuildingMedium
		ParticleSysBone FireSmall04 FireBuildingLarge
		ParticleSysBone FireSmall05 SmokeBuildingLarge
    End
    AnimationState = REALLYDAMAGED
	EnteringStateFX	= FX_BuildingReallyDamaged
    End

    ModelConditionState  = RUBBLE
      Model         = GBStable_D2
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End
    
    AnimationState = RUBBLE
      BeginScript
        CurDrawableHideSubObject("GBStable_01")
        CurDrawableHideSubObject("GBStable_02")
        CurDrawableHideSubObject("GBStable_03")
        CurDrawableHideSubObject("GBStable_04")
      EndScript
    End

    ModelConditionState  = POST_RUBBLE
		Model         = None
		ParticleSysBone NONE SmokeBuildingMediumRubble
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
		ParticleSysBone NONE SmokeBuildingMediumRubble
    End
        
  End
  
  Draw = W3DFloorDraw ModuleTag_DrawFloor    
		StaticModelLODMode = Yes		; THIS NEEDS TO BE COMMENTED OUT WHEN ENGINEERING ENABLES LOD'S IN THE FLOOR DRAW
     ModelName = GBStable_Bib
  End
  

  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:GondorStable
  Description 	      = OBJECT:GondorStablesDescription
  Side                = Gondor
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
 
  CommandSet          = GondorStablesCommandSet
  BuildCost           = GONDOR_STABLES_BUILDCOST
  BuildTime           = GONDOR_STABLES_BUILDTIME
  BountyValue         = GONDOR_STABLES_BOUNTY_VALUE
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = GONDOR_STABLES_SHROUD_CLEAR

  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    ;DamageFX          = StructureDamageFXNoShake
  End


  ; *** AUDIO Parameters ***

	VoiceSelect		= GondorStableSelect

	SoundAmbient		= BuildingGondorStableAmbience
	SoundOnDamaged		= BuildingLightDamageStone
	SoundOnReallyDamaged	= BuildingHeavyDamageStone

	VoiceSelectUnderConstruction	= BuildingGoodVoiceSelectUnderConstruction

	UnitSpecificSounds
		UnderConstruction		= BuildingConstructionLoop  ; Built first time
		; UnderRepairFromDamage	= NoSound					; Repaired No animation on the building, so don't bother playing sound
		UnderRepairFromRubble	= BuildingConstructionLoop	; Repaired from completely destroyed (not used???)
	End

 
  ; *** ENGINEERING Parameters ***

  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE NEED_BASE_FOUNDATION FS_FACTORY MP_COUNT_FOR_VICTORY AUTO_RALLYPOINT
 
  Behavior            = GettingBuiltBehavior GetBuiltBehaviorTag
    WorkerName		  = GondorWorkerNoSelect
  End

  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  Body                      = StructureBody ModuleTag_05
    MaxHealth         		  = GONDOR_STABLES_HEALTH
    MaxHealthDamaged  		  = GONDOR_STABLES_HEALTH_DAMAGED
    MaxHealthReallyDamaged 	= GONDOR_STABLES_HEALTH_REALLY_DAMAGED
        
    DamageCreationList = OCL_BuildingDamageList01 CATAPULT_ROCK
    
    DamageCreationList = OCL_GBStable_Chunk1 CATAPULT_ROCK FRONT_DESTROYED
    DamageCreationList = OCL_GBStable_Chunk2 CATAPULT_ROCK RIGHT_DESTROYED
    DamageCreationList = OCL_GBStable_Chunk3 CATAPULT_ROCK BACK_DESTROYED
    DamageCreationList = OCL_GBStable_Chunk4 CATAPULT_ROCK LEFT_DESTROYED
    
  End
  
  	Behavior = RefundDie ModuleTag_refund
		UpgradeRequired = Upgrade_MarketplaceUpgradeDefiance
		BuildingRequired = ANY +GondorMarketPlace
		RefundPercent = 50%
	End

 Behavior                  = BuildingBehavior BuildingModuleTag
    NightWindowName         = WINDOW_N01
    FireWindowName          = WINDOW_F01
    GlowWindowName			= WINDOW_G01
 ;   FireName				= FIRE01
  End

  Behavior = ProductionUpdate ProductionUpdateModuleTag
    ; nothing
  End

  Behavior = QueueProductionExitUpdate QueueProductionModuleTag
    PlacementViewAngle  = -45
    UnitCreatePoint    = X:-32.0 Y:-16.0 Z:0.0
    NaturalRallyPoint  = X:40.0 Y:-90.0 Z:0.0
    ExitDelay = 0
  End


  Behavior                  = StructureCollapseUpdate ModuleTag_06
    MinCollapseDelay        = 000
    MaxCollapseDelay        = 000
    CollapseDamping         = .5
    MaxShudder              = 0.6
    MinBurstDelay           = 250
    MaxBurstDelay           = 800
    BigBurstFrequency       = 4
    FXList                  = INITIAL   FX_StructureMediumCollapse
    FXList                  = ALMOST_FINAL  FX_StructureAlmostCollapse
	DestroyObjectWhenDone	= Yes
	CollapseHeight			= 136
  End

  
 
 
  	Behavior = SubObjectsUpgrade ModuleTag_HideAll
		TriggeredBy		= Upgrade_StructureLevel1
		HideSubObjects	= V1 V2 V2FLAG
	End
  	Behavior = SubObjectsUpgrade ModuleTag_ShowWalls 
		TriggeredBy		= Upgrade_StructureLevel2
		ShowSubObjects	= V1 
		HideSubObjects	= V2 V2FLAG
	End
	Behavior = SubObjectsUpgrade ModuleTag_ShowFlagsAndTower 
		TriggeredBy		= Upgrade_StructureLevel3
		ShowSubObjects	= V1 V2 V2FLAG
	End

	Behavior = GeometryUpgrade Geom_ModuleTag_HideAll
		TriggeredBy		= Upgrade_StructureLevel1
		ShowGeometry	= Geom_Orig
		HideGeometry	= Geom_V1 Geom_V2
	End
	Behavior = GeometryUpgrade Geom_ModuleTag_ShowWalls 
		TriggeredBy		= Upgrade_StructureLevel2
		ShowGeometry	= Geom_Orig Geom_V1
		HideGeometry	= Geom_V2 
	End
  	Behavior = GeometryUpgrade Geom_ModuleTag_ShowFlagsAndTower 
		TriggeredBy		= Upgrade_StructureLevel3
		ShowGeometry	= Geom_Orig Geom_V1 Geom_V2
	End
		
	Geometry				= BOX
    GeometryName			= Geom_Orig
  	GeometryMajorRadius		= 30.0
	GeometryMinorRadius		= 55.5
	GeometryHeight			= 60.0
	GeometryOffset			= X:-20 Y:0 Z:0	
		
	AdditionalGeometry		= CYLINDER
	GeometryName			= Geom_V1
	GeometryMajorRadius		= 55.0
	GeometryMinorRadius		= 55.0
	GeometryHeight			= 20.0
	GeometryOffset			= X:0 Y:0 Z:0	

	AdditionalGeometry		= BOX
    GeometryName			= Geom_V2
  	GeometryMajorRadius		= 15.0
	GeometryMinorRadius		= 15.0
	GeometryHeight			= 100.0
	GeometryOffset			= X:-28 Y:0 Z:0	
	
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER
  
	GeometryContactPoint = X:-49		Y:30.22		Z:0			Repair
	GeometryContactPoint = X:7.304		Y:-43.2		Z:0			Repair
	GeometryContactPoint = X:5.576		Y:44.987	Z:0
	GeometryContactPoint = X:-38.348	Y:-42.113	Z:0
	GeometryContactPoint = X:-28.448	Y:-0.003	Z:75.14		Swoop

End

;------------------------------------------------------------------------------
;Gondor Workshop
Object GondorWorkshop

	SelectPortrait = BPGWorkshop
 
  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD
    DefaultModelConditionState
      Model = GBWorkshop
    End

	IdleAnimationState
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "BeingConstructed" then 
			    ; Don't play completed sound when canceling build-in-progress or when
			    ; destroyed halfway
			    if not CurDrawableModelcondition( "DYING" ) then 
					CurDrawablePlaySound("CampSoldierCompleteWorkshop")
				end
			end
		EndScript
	End

;		AnimationState        = ACTIVELY_CONSTRUCTING
;			Animation         = GBWorkshop
;				AnimationName     = GBWorkshop_SKL.GBWorkshop_BLDA
;				AnimationMode     = ONCE
;			End
;		End


   ;-- building being constructed
    ModelConditionState   = AWAITING_CONSTRUCTION 
      Model               = GBWorkshop_A
;		ParticleSysBone	  = NONE BuildingDoughnutCloud
    End;
    AnimationState        = AWAITING_CONSTRUCTION
      Animation           = GBWorkshop_A
        AnimationName     = GBWorkshop_ASKL.GBWorkshop_ABLD
        AnimationMode     = MANUAL
      End
	  Flags				  = START_FRAME_FIRST
    End

    ModelConditionState   = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
      Model               = GBWorkshop_A
		ParticleSysBone   = DUSTBONE BuildingContructDust
    End;
    AnimationState        = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
      Animation           = GBWorkshop_A
        AnimationName     = GBWorkshop_ASKL.GBWorkshop_ABLD
        AnimationMode     = MANUAL
      End
	Flags				= START_FRAME_FIRST
	StateName			= BeingConstructed
		BeginScript
			CurDrawablePlaySound("GondorBarracksBeginConstruction")
			CurDrawableHideSubObjectPermanently("V1")
			CurDrawableHideSubObjectPermanently("V2")
		EndScript
	  
	  
    End
	
        ;--damaged building
      ModelConditionState  = DESTROYED_FRONT
      Model         = GBWorkshop_D1
		ParticleSysBone FireSmall01 FireBuildingSmall
		ParticleSysBone FireSmall02 FireBuildingLarge
		ParticleSysBone FireMedium01 FireBuildingMedium
		ParticleSysBone FireLarge01 FireBuildingLarge
		ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    	
;		ParticleSysBone emberBone01 fireFlare
;		ParticleSysBone emberBone01 FireSmoke
;		ParticleSysBone emberBone01 campfireEmbers
;		ParticleSysBone emberBone01 fireGlow
;		ParticleSysBone emberBone01 NazgulEmitter
;		
;		ParticleSysBone emberBone02 fireFlare
;		ParticleSysBone emberBone02 FireSmoke
;		ParticleSysBone emberBone02 campfireEmbers
;		ParticleSysBone emberBone02 fireGlow
;		ParticleSysBone emberBone02 NazgulEmitter


    End

    AnimationState = DESTROYED_FRONT
      BeginScript
        CurDrawableHideSubObject("GBWorkshop_D2a")
      EndScript
    End
    
    ModelConditionState  = DESTROYED_RIGHT
      Model         = GBWorkshop_D1
		ParticleSysBone FireSmall01 FireBuildingSmall
		ParticleSysBone FireSmall02 FireBuildingLarge
		ParticleSysBone FireMedium01 FireBuildingMedium
		ParticleSysBone FireLarge01 FireBuildingLarge
		ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    	
;		ParticleSysBone emberBone01 fireFlare
;		ParticleSysBone emberBone01 FireSmoke
;		ParticleSysBone emberBone01 campfireEmbers
;		ParticleSysBone emberBone01 fireGlow
;		ParticleSysBone emberBone01 NazgulEmitter
;		
;		ParticleSysBone emberBone02 fireFlare
;		ParticleSysBone emberBone02 FireSmoke
;		ParticleSysBone emberBone02 campfireEmbers
;		ParticleSysBone emberBone02 fireGlow
;		ParticleSysBone emberBone02 NazgulEmitter


    End

    AnimationState = DESTROYED_RIGHT
      BeginScript
        CurDrawableHideSubObject("GBWorkshop_D2b")
      EndScript
    End
    

    ModelConditionState  = DESTROYED_BACK
      Model         = GBWorkshop_D1
		ParticleSysBone FireSmall01 FireBuildingSmall
		ParticleSysBone FireSmall02 FireBuildingLarge
		ParticleSysBone FireMedium01 FireBuildingMedium
		ParticleSysBone FireLarge01 FireBuildingLarge
		ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    	
;		ParticleSysBone emberBone01 fireFlare
;		ParticleSysBone emberBone01 FireSmoke
;		ParticleSysBone emberBone01 campfireEmbers
;		ParticleSysBone emberBone01 fireGlow
;		ParticleSysBone emberBone01 NazgulEmitter
;		
;		ParticleSysBone emberBone02 fireFlare
;		ParticleSysBone emberBone02 FireSmoke
;		ParticleSysBone emberBone02 campfireEmbers
;		ParticleSysBone emberBone02 fireGlow
;		ParticleSysBone emberBone02 NazgulEmitter


    End

    AnimationState = DESTROYED_BACK
      BeginScript
        CurDrawableHideSubObject("GBWorkshop_D2c")
      EndScript
    End

	ModelConditionState  = DESTROYED_LEFT
      Model         = GBWorkshop_D1
		ParticleSysBone FireSmall01 FireBuildingSmall
		ParticleSysBone FireSmall02 FireBuildingLarge
		ParticleSysBone FireMedium01 FireBuildingMedium
		ParticleSysBone FireLarge01 FireBuildingLarge
		ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    	
;		ParticleSysBone emberBone01 fireFlare
;		ParticleSysBone emberBone01 FireSmoke
;		ParticleSysBone emberBone01 campfireEmbers
;		ParticleSysBone emberBone01 fireGlow
;		ParticleSysBone emberBone01 NazgulEmitter
;		
;		ParticleSysBone emberBone02 fireFlare
;		ParticleSysBone emberBone02 FireSmoke
;		ParticleSysBone emberBone02 campfireEmbers
;		ParticleSysBone emberBone02 fireGlow
;		ParticleSysBone emberBone02 NazgulEmitter


    End
    
    AnimationState = DESTROYED_LEFT
      BeginScript
        CurDrawableHideSubObject("GBWorkshop_D2d")
      EndScript
    End
    
    
    ModelConditionState  = DAMAGED
      Model         = GBWorkshop_D1
		ParticleSysBone FireSmall01 FireBuildingSmall
		ParticleSysBone FireSmall02 FireBuildingSmall
		ParticleSysBone FireMedium01 FireBuildingMedium
		ParticleSysBone FireLarge01 FireBuildingLarge
		ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    	
;		ParticleSysBone emberBone01 fireFlare
;		ParticleSysBone emberBone01 FireSmoke
;		ParticleSysBone emberBone01 campfireEmbers
;		ParticleSysBone emberBone01 fireGlow
;		ParticleSysBone emberBone01 NazgulEmitter
;		
;		ParticleSysBone emberBone02 fireFlare
;		ParticleSysBone emberBone02 FireSmoke
;		ParticleSysBone emberBone02 campfireEmbers
;		ParticleSysBone emberBone02 fireGlow
;		ParticleSysBone emberBone02 NazgulEmitter

	
    End
    AnimationState = DAMAGED
	EnteringStateFX	= FX_BuildingDamaged
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = GBWorkshop_D2
		ParticleSysBone FireSmall01 FireBuildingSmall
		ParticleSysBone FireSmall02 FireBuildingLarge
		ParticleSysBone FireMedium01 FireBuildingMedium
		ParticleSysBone FireLarge01 FireBuildingLarge
		ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    	
;		ParticleSysBone emberBone01 fireFlare
;		ParticleSysBone emberBone01 FireSmoke
;		ParticleSysBone emberBone01 campfireEmbers
;		ParticleSysBone emberBone01 fireGlow
;		ParticleSysBone emberBone01 NazgulEmitter
;		
;		ParticleSysBone emberBone02 fireFlare
;		ParticleSysBone emberBone02 FireSmoke
;		ParticleSysBone emberBone02 campfireEmbers
;		ParticleSysBone emberBone02 fireGlow
;		ParticleSysBone emberBone02 NazgulEmitter

	
    End
    AnimationState = REALLYDAMAGED
	EnteringStateFX	= FX_BuildingReallyDamaged
    End

    ModelConditionState  = RUBBLE
      Model         = GBWorkshop_D2
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End
    
    AnimationState = RUBBLE
      BeginScript
        CurDrawableHideSubObject("GBWorkshop_D2a")
        CurDrawableHideSubObject("GBWorkshop_D2b")
        CurDrawableHideSubObject("GBWorkshop_D2c")
        CurDrawableHideSubObject("GBWorkshop_D2d")
      EndScript
    End

    ModelConditionState  = POST_RUBBLE
      Model         = None
		ParticleSysBone NONE SmokeBuildingMediumRubble
    End
        AnimationState = POST_RUBBLE
    End

    ModelConditionState  = POST_COLLAPSE
      Model         = None
		ParticleSysBone NONE SmokeBuildingMediumRubble
    End
        AnimationState = POST_COLLAPSE
    End      
  End

  Draw = W3DFloorDraw ModuleTag_DrawFloor    
		StaticModelLODMode = Yes		; THIS NEEDS TO BE COMMENTED OUT WHEN ENGINEERING ENABLES LOD'S IN THE FLOOR DRAW
     ModelName = GBWorkshop_Bib
  End
  

  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:GondorWorkshop
  Description 	      = OBJECT:GondorWorkshopDescription

  Side                = Gondor
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
 
  CommandSet          = GondorWorkshopCommandSet
  BuildCost           = GONDOR_WORKSHOP_BUILDCOST
  BuildTime           = GONDOR_WORKSHOP_BUILDTIME
  BountyValue         = GONDOR_WORKSHOP_BOUNTY_VALUE
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = GONDOR_WORKSHOP_SHROUD_CLEAR

  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    ;DamageFX          = StructureDamageFXNoShake
  End


  ; *** AUDIO Parameters ***

	VoiceSelect		= GondorWorkshopSelect

	SoundOnDamaged		= BuildingLightDamageStone
	SoundOnReallyDamaged	= BuildingHeavyDamageStone

	VoiceSelectUnderConstruction	= BuildingGoodVoiceSelectUnderConstruction

	UnitSpecificSounds
		UnderConstruction		= BuildingConstructionLoop  ; Built first time
		; UnderRepairFromDamage	= NoSound					; Repaired No animation on the building, so don't bother playing sound
		UnderRepairFromRubble	= BuildingConstructionLoop	; Repaired from completely destroyed (not used???)
	End

 
	; *** ENGINEERING Parameters ***

	RadarPriority       = STRUCTURE
	KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE NEED_BASE_FOUNDATION MP_COUNT_FOR_VICTORY AUTO_RALLYPOINT FS_FACTORY
	 
	Behavior            = GettingBuiltBehavior GetBuiltBehaviorTag
		WorkerName		  = GondorWorkerNoSelect
	End

	Behavior = CastleMemberBehavior ModuleTag_CMB
	End 

	Body                        = StructureBody ModuleTag_05
		MaxHealth         		    = GONDOR_WORKSHOP_HEALTH
		MaxHealthDamaged  		    = GONDOR_WORKSHOP_HEALTH_DAMAGED
		MaxHealthReallyDamaged 	  	= GONDOR_WORKSHOP_HEALTH_REALLY_DAMAGED
	        
		DamageCreationList = OCL_BuildingDamageList01 CATAPULT_ROCK
		DamageCreationList = OCL_GBStable_Chunk1 CATAPULT_ROCK FRONT_DESTROYED
		DamageCreationList = OCL_GBStable_Chunk2 CATAPULT_ROCK RIGHT_DESTROYED
		DamageCreationList = OCL_GBStable_Chunk3 CATAPULT_ROCK BACK_DESTROYED
		DamageCreationList = OCL_GBStable_Chunk4 CATAPULT_ROCK LEFT_DESTROYED
	    
	End
  
	Behavior                  = BuildingBehavior BuildingModuleTag
	 NightWindowName         = GBWORKSHOPN
	; FireWindowName         = WINDOW_F01
	; GlowWindowName	    = WINDOW_G01
	; FireName		    = FIRE01
	End

	Behavior = RefundDie ModuleTag_refund
		UpgradeRequired = Upgrade_MarketplaceUpgradeDefiance
		BuildingRequired = ANY +GondorMarketPlace
		RefundPercent = 50%
	End

	Behavior                  = StructureCollapseUpdate ModuleTag_06
		MinCollapseDelay        = 000
		MaxCollapseDelay        = 000
		CollapseDamping         = .5
		MaxShudder              = 0.6
		MinBurstDelay           = 250
		MaxBurstDelay           = 800
		BigBurstFrequency       = 4
		FXList                  = INITIAL   FX_StructureMediumCollapse
		FXList                  = ALMOST_FINAL  FX_StructureAlmostCollapse
		DestroyObjectWhenDone	= Yes
		CollapseHeight			= 120
	End

	Behavior = ProductionUpdate ProductionUpdateModuleTag
		;;;UnitPreparationTime =8000;;;;;;;;;; 8.0 second prep needs to be set in THingTemplate, for Trebuchet, now
	End

	Behavior = QueueProductionExitUpdate QueueProductionModuleTag
		UnitCreatePoint    = X:14.8616 Y:-0.1480 Z:0.0
		NaturalRallyPoint  = X:56.0 Y:-0.1480 Z:0.0
		ExitDelay =50
	End
	
 	Behavior = SubObjectsUpgrade ModuleTag_HideAll 
		TriggeredBy		= Upgrade_StructureLevel1
		ShowSubObjects	= V1HIDE 
		HideSubObjects	= V1 V2 V2FLAG
	End
 	Behavior = SubObjectsUpgrade ModuleTag_ShowWalls 
		TriggeredBy		= Upgrade_StructureLevel2
		ShowSubObjects	= V1 
		HideSubObjects	= V1HIDE V2 V2FLAG
	End
	Behavior = SubObjectsUpgrade ModuleTag_ShowTowers 
		TriggeredBy		= Upgrade_StructureLevel3
		ShowSubObjects	= V1 V2 V2FLAG 
		HideSubObjects	= V1HIDE
	End
	
	Behavior = GeometryUpgrade Geom_ModuleTag_HideAll
		TriggeredBy		= Upgrade_StructureLevel1
		ShowGeometry	= Geom_Orig
		HideGeometry	= Geom_V2 
	End
	Behavior = GeometryUpgrade Geom_ModuleTag_ShowWalls 
		TriggeredBy		= Upgrade_StructureLevel2
		ShowGeometry	= Geom_Orig
		HideGeometry	= Geom_V2 
	End
  	Behavior = GeometryUpgrade Geom_ModuleTag_ShowFlagsAndTower 
		TriggeredBy		= Upgrade_StructureLevel3
		ShowGeometry	= Geom_V2
		HideGeometry	= Geom_Orig
	End
		
	Geometry				= BOX
    GeometryName			= Geom_Orig
  	GeometryMajorRadius		= 50.0
	GeometryMinorRadius		= 37.5
	GeometryHeight			= 25.0
	GeometryOffset			= X:5 Y:0 Z:0	
		
	AdditionalGeometry		= BOX
	GeometryName			= Geom_Orig
	GeometryMajorRadius		= 12.5
	GeometryMinorRadius		= 37.5
	GeometryHeight			= 50.0
	GeometryOffset			= X:-30 Y:0 Z:0	

	AdditionalGeometry		= BOX
    GeometryName			= Geom_V2
  	GeometryMajorRadius		= 50.0
	GeometryMinorRadius		= 37.5
	GeometryHeight			= 25.0
	GeometryOffset			= X:5 Y:0 Z:0	
		
	AdditionalGeometry		= BOX
	GeometryName			= Geom_V2
	GeometryMajorRadius		= 12.5
	GeometryMinorRadius		= 37.5
	GeometryHeight			= 80.0
	GeometryOffset			= X:-30 Y:0 Z:0	
		
	GeometryIsSmall       = No
	Shadow                = SHADOW_VOLUME
	BuildCompletion     = PLACED_BY_PLAYER
	
	GeometryContactPoint = X:-48.348	Y:26.9		Z:0			Repair
	GeometryContactPoint = X:47.546		Y:-38.677	Z:0			Repair
	GeometryContactPoint = X:47.546		Y:36.435	Z:0
	GeometryContactPoint = X:-32.763	Y:-46.121	Z:0
	GeometryContactPoint = X:26.753		Y:26.753	Z:67.933	Swoop

End

;------------------------------------------------------------------------------
;------------------------------------------------------------------------------
;------------------------------------------------------------------------------
;------------------------------------------------------------------------------
;
;  Ents
;
;------------------------------------------------------------------------------
;------------------------------------------------------------------------------
;------------------------------------------------------------------------------

;Ent Building Foundation -- the area where faction Ent buildings can be built on
Object EntBuildingFoundation
 
  ; *** ART Parameters ***

  
	Draw = W3DScriptedModelDraw ModuleTag_Draw2
	    DefaultModelConditionState
			Model = OBBFoundationX
		End
		ModelConditionState = WORLD_BUILDER
  			Model = RBSizeTemplate
  		End
		
	End
  Draw = W3DFloorDraw ModuleTag_Draw
      ModelName = GBFoundationX
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:EntBuildingFoundation
  Side                = Rohan ; temporary... probably needs it's own faactions
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160

  CommandSet = EntFoundationCommandSet

  ; *** AUDIO Parameters ***

	VoiceSelect			= Gui_PlotSelect


  ; *** ENGINEERING Parameters ***

  RadarPriority       = STRUCTURE
  KindOf              = STRUCTURE SELECTABLE IMMOBILE BASE_FOUNDATION UNATTACKABLE MP_COUNT_FOR_VICTORY NO_COLLIDE DO_NOT_CLASSIFY
 
  Behavior            = FoundationAIUpdate ModuleTag_foundationAI
  End

  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  Body                = ImmortalBody ModuleTag_05
    MaxHealth         = 15000.0
  End
 
  Geometry              = BOX
  GeometryMajorRadius   = 24.0
  GeometryMinorRadius   = 24.0
  GeometryHeight        = 0.8
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  BuildCompletion		= PLACED_BY_PLAYER
End

;------------------------------------------------------------------------------

;Fangorn EntMoot, RohanEntMoot, FangornEntMoot
Object EntMoot

	SelectPortrait = BPREntMoot
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day


	Draw = W3DScriptedModelDraw ModuleTag_Draw
		DefaultModelConditionState
		Model = FBEntmoot
		End

	IdleAnimationState
		;end of the Debate to be announced by Treebeard
		;but since this overlaps with that, lets do just the treebeard one
		; which is the voicetaskcomplete in castlebehavior
		;BeginScript
		;	Prev = CurDrawablePrevAnimationState()
		;	if Prev == "BeingConstructed" then 
		;	    ; Don't play completed sound when canceling build-in-progress or when
		;	    ; destroyed halfway
		;	    if not CurDrawableModelcondition( "DYING" ) then 
		;			CurDrawablePlaySound("CampSoldierCompleteEntMoot")
		;		end
		;	end
		;EndScript
	End	


		ModelConditionState   = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
			Model               = FBEntmoot_A
		End
		AnimationState        = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
			Animation           = FBEntmoot_A
				AnimationName     = FBEntmoot_A.FBEntmoot_A
				AnimationMode     = MANUAL
				AnimationBlendTime = 0
			End
			Flags				  = START_FRAME_FIRST
			StateName			  = BeingConstructed
			BeginScript
				CurDrawablePlaySound("GondorBarracksBeginConstruction")
				CurDrawablePlaySound("EntMootConstruction")
			EndScript
		End
    
    	ModelConditionState  = DAMAGED
			Model         = FBEntmoot_D1
			ParticleSysBone NONE EntImpactDebris

		End

    AnimationState = DAMAGED
	EnteringStateFX	= FX_BuildingDamaged
    End
		ModelConditionState  = REALLYDAMAGED
			Model         = FBEntmoot_D2
			ParticleSysBone NONE EntImpactDebris
		End

    AnimationState = REALLYDAMAGED
	EnteringStateFX	= FX_BuildingReallyDamaged
    End

                ModelConditionState  = RUBBLE
                        Model         = FBEntmoot_D3
                        ParticleSysBone NONE EntMootDeath
                        ParticleSysBone NONE EntMootDeathSmoke
                End

	End
	
  Draw = W3DFloorDraw ModuleTag_DrawFloor    
     ModelName = FBEntmoot_Bib
     FloorFadeRateOnObjectDeath = -0.01
  End
  
  Draw = W3DScriptedModelDraw ModuleTag_Draw_HCBanner
    OkToChangeModelColor  = Yes
  	DefaultModelConditionState
		Model = RBHCEntMoot
    End
    MultiPlayerOnly = Yes 
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:EntsMoot
  Description         = OBJECT:RohanEntMootDescription
  Side                = Rohan ;  
  IsTrainable = No	; don't want the Entmoot ot gain levels
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = ROHAN_ENT_MOOT_COST
  RefundValue	      = 1000 
  BuildTime           = ROHAN_ENT_MOOT_BUILD_TIME ; in seconds... yes this is very very very very very long
  VisionRange         = VISION_HERO_RANGED
  ShroudClearingRange = SHROUD_CLEAR_STANDARD
  ArmorSet
    Conditions        = None
    Armor             = EntMootArmor
    ;DamageFX          = StructureDamageFXNoShake
  End

 CommandSet = EntsMootCommandSet


; *** AUDIO Parameters ***

	VoiceSelect			= RohanEntMootSelect			;EntMootSelect
 	VoiceTaskComplete		= EntsToWar
 	VoiceSelectUnderConstruction	= DontBeHasty
	
	SoundOnDamaged			= BuildingLightDamageWood
	SoundOnReallyDamaged		= BuildingHeavyDamageWood
 
	;UnitSpecificSounds
	;	UnderConstruction	= UnderConstructionLoop
	;End

	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		MaxUpdateRangeCap = 800
 		AnimationSound = Sound:EntMootConstructionBoulderSmallRise Animation:FBEntmoot_A.FBEntmoot_A Frames:92 168 254 336 399 474 551 634 705 795 860 885
 		AnimationSound = Sound:EntMootConstructionBoulderLargeRise Animation:FBEntmoot_A.FBEntmoot_A Frames:910
	End

  
  ; *** ENGINEERING Parameters ***

  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE NEED_BASE_FOUNDATION CASTLE_KEEP FS_FACTORY DO_NOT_PICK_ME_WHEN_BUILDING
 						;MP_COUNT_FOR_VICTORY;removed so econ plots will not keep zombie games going

  Behavior            = GettingBuiltBehavior GetBuiltBehaviorTag
    ;WorkerName		  = "" ; An empty string means, "build yourself without a worker."
    ; SelfBuildingLoop = BuildingConstructionLoop Not sure what we want for the EntMoot
	;SelfRepairFromDamageLoop  = NoSound         ; This doesn't cause an animation, so don't bother playing a sound
	;SelfRepairFromRubbleLoop  = BuildingConstructionLoop
  End

  Behavior = CastleMemberBehavior ModuleTag_CMB
    ; BeingBuiltSound = BuildingConstructionLoop  Not sure what we want for the EntMoot
  End 

  Body                = StructureBody ModuleTag_05
    MaxHealth         = ROHAN_ENT_MOOT_HEALTH
    MaxHealthDamaged  = 4000
    MaxHealthReallyDamaged = 2000 
  End

     Behavior                  = StructureCollapseUpdate ModuleTag_06
       MinCollapseDelay        = 200
       MaxCollapseDelay        = 400
       CollapseHeight			= 60 ; Override the geometry so we can make it sink farther with no new problems.
       CollapseDamping         = .5
       MaxShudder              = 0.6
       MinBurstDelay           = 250
       MaxBurstDelay           = 1200
       BigBurstFrequency       = 4
	FXList                  = INITIAL FX_StructureEntMootCollapse
     End

  Behavior = ProductionUpdate ProductionUpdateModuleTag
	  SpecialPrepModelconditionTime = 12000; twelve seconds of sprouting animation time
  End

  Behavior = QueueProductionExitUpdate QueueProductionModuleTag
    UnitCreatePoint    = X:0.0 Y:7.2 Z:0.0
    NaturalRallyPoint  = X:40.0 Y:7.2 Z:0.0
    ExitDelay = 750
    NoExitPath = Yes ; means, do not use a rally point, just stand there at the exit position
  End


;	Behavior = PassiveAreaEffectBehavior ModuleTag_SplashOfHealingEntDraughts_Ahh
;		EffectRadius			= 250		
;		PingDelay				= 2000;msec
;		HealPercentPerSecond	= 3%
;		AllowFilter				= ANY +INFANTRY -IMMOBILE    
;	End
;  Behavior           = CreateObjectDie ModuleTag_08
;    CreationList     = OCL_SmallStructureDebris
;  End
 
;  Behavior = FlammableUpdate ModuleTag_14
;    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
;    AflameDamageAmount = 5       ; taking this much damage...
;    AflameDamageDelay = 500       ; this often.
;  End
 
;  Behavior = TransitionDamageFX ModuleTag_15
;    ;-------------DESIGNED FOR SMALL SIZED FACTION BUILDING TRANSITIONS-------------------
;    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
;    ;---------------------------------------------------------------------------------------
;    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
;    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
;    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
;  End
 
;  Behavior             = FXListDie ModuleTag_16
;    DeathFX       = FX_BuildingDie
;  End
 
; This is the sundial rock
  Geometry              = CYLINDER
  GeometryMajorRadius   = 20  
  GeometryMinorRadius   = 20   
  GeometryHeight        = 20
  GeometryOffset		= X:0 Y:60 Z:0 
  AdditionalGeometry    = CYLINDER
  GeometryMajorRadius   = 17  
  GeometryMinorRadius   = 17   
  GeometryHeight        = 10
  GeometryOffset		= X:0 Y:80 Z:0 
  AdditionalGeometry    = CYLINDER
  GeometryMajorRadius   = 10  
  GeometryMinorRadius   = 10   
  GeometryHeight        = 42
  GeometryOffset		= X:0 Y:36 Z:0 
  AdditionalGeometry    = CYLINDER
  GeometryMajorRadius   = 10  
  GeometryMinorRadius   = 10   
  GeometryHeight        = 10
  
  
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER
  
	GeometryContactPoint	= X:-88.153		Y:-47.964	Z:0			Repair
	GeometryContactPoint	= X:96.098		Y:-2.258	Z:0			Repair
	GeometryContactPoint	= X:17.21		Y:-88.654	Z:0
	GeometryContactPoint	= X:-23.526		Y:82.402	Z:0
	GeometryContactPoint	= X:1.53		Y:42.268	Z:40.231	Swoop

End

;------------------------------------------------------------------------------
;------------------------------------------------------------------------------
;------------------------------------------------------------------------------
;------------------------------------------------------------------------------
;
;  Elves
;
;------------------------------------------------------------------------------
;------------------------------------------------------------------------------
;------------------------------------------------------------------------------

;Elven Building Foundation -- the area where faction elven buildings can be built on
Object ElvenBuildingFoundation
   
   SelectPortrait = BPECamp_Plot
  ; *** ART Parameters ***

  
	Draw = W3DScriptedModelDraw ModuleTag_Draw2
	    DefaultModelConditionState
			Model = OBBFoundationX
		End
		ModelConditionState = WORLD_BUILDER
  			Model = RBSizeTemplate
  		End

	End
  Draw = W3DFloorDraw ModuleTag_Draw    
      ModelName = EBFoundationX
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:ElvenBuildingFoundation
  Side                = Gondor
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160

  CommandSet = ElvenFoundationCommandSet

  ; *** AUDIO Parameters ***

	VoiceSelect		= Gui_PlotSelect


  ; *** ENGINEERING Parameters ***

  RadarPriority       = STRUCTURE
  KindOf              = STRUCTURE SELECTABLE IMMOBILE BASE_FOUNDATION UNATTACKABLE MP_COUNT_FOR_VICTORY NO_COLLIDE DO_NOT_CLASSIFY
 
  Behavior            = FoundationAIUpdate ModuleTag_foundationAI
  End

  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  Body                = ImmortalBody ModuleTag_05
    MaxHealth         = 15000.0
  End
 
  Geometry              = BOX
  GeometryMajorRadius   = 24.0
  GeometryMinorRadius   = 24.0
  GeometryHeight        = 0.8
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  BuildCompletion		= PLACED_BY_PLAYER
End

;------------------------------------------------------------------------------

;Elven Farm
Object ElvenFarm
 
   ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day
  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
	UseStandardModelNames = Yes
    StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD  
  DefaultModelConditionState
      Model = GBFarm_SKN
    End
    
    IdleAnimationState
		Animation = IDLE
			AnimationName		=	GBFarm_SKL.GBFarm_IDLA
			AnimationMode			=	ONCE	
			AnimationBlendTime = 0
		End		
	End	
    
    ;-- building being constructed
    ModelConditionState   = AWAITING_CONSTRUCTION 
      Model               = GBFarm_A
;		ParticleSysBone	  = NONE BuildingDoughnutCloud
    End;
    AnimationState        = AWAITING_CONSTRUCTION
      Animation           = GBFarm_A
        AnimationName     = GBFarm_A.GBFarm_A
        AnimationMode     = MANUAL
      End
	  Flags				  = START_FRAME_FIRST
    End

    ModelConditionState   = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
      Model               = GBFarm_A
		ParticleSysBone   = DUSTBONE BuildingContructDust
    End;
    AnimationState        = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
      Animation           = GBFarm_A
        AnimationName     = GBFarm_A.GBFarm_A
        AnimationMode     = MANUAL
      End
	Flags				  = START_FRAME_FIRST
	BeginScript
		CurDrawablePlaySound("GondorBarracksBeginConstruction")
	EndScript
    End
	   
    
     ;--damaged building
      ModelConditionState  = DESTROYED_FRONT
      Model         = GBFarm_D2
     	ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End

    AnimationState = DESTROYED_FRONT
      BeginScript
        CurDrawableHideSubObject("GBFarm_01")
      EndScript
    End
    
        ModelConditionState  = DESTROYED_RIGHT
      Model         = GBFarm_D2
		ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End

    AnimationState = DESTROYED_RIGHT
      BeginScript
        CurDrawableHideSubObject("GBFarm_02")
      EndScript
    End
    

    ModelConditionState  = DESTROYED_BACK
      Model         = GBFarm_D2
		ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End

    AnimationState = DESTROYED_BACK
      BeginScript
        CurDrawableHideSubObject("GBFarm_03")
      EndScript
    End

	ModelConditionState  = DESTROYED_LEFT
      Model         = GBFarm_D2
		ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End
    
    AnimationState = DESTROYED_LEFT
      BeginScript
        CurDrawableHideSubObject("GBFarm_04")
      EndScript
    End
    
    
    ModelConditionState  = DAMAGED
      Model         = GBFarm_D1
		ParticleSysBone SmokeLarge01 SmokeBuildingLarge
	
    End
    AnimationState = DAMAGED
	EnteringStateFX	= FX_BuildingDamaged
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = GBFarm_D2
		ParticleSysBone SmokeLarge01 SmokeBuildingLarge
	
    End
    AnimationState = REALLYDAMAGED
	EnteringStateFX	= FX_BuildingReallyDamaged
    End

    ModelConditionState  = RUBBLE
      Model         = GBFarm_D2
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End
    
    AnimationState = RUBBLE
      BeginScript
        CurDrawableHideSubObject("GBFarm_01")
        CurDrawableHideSubObject("GBFarm_02")
        CurDrawableHideSubObject("GBFarm_03")
        CurDrawableHideSubObject("GBFarm_04")
      EndScript
    End

    ModelConditionState  = POST_RUBBLE
		Model         = None
		ParticleSysBone NONE SmokeBuildingMediumRubble
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
		ParticleSysBone NONE SmokeBuildingMediumRubble
    End

End


  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:ElvenFarm
  Side                = Gondor ; temporary... probably needs it's own faction
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 300
  BuildTime           = 15.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160
;  ArmorSet
;    Conditions        = None
;    Armor             = StructureArmor
;    DamageFX          = StructureDamageFXNoShake
;  End


; CommandSet = ElvenFarmCommandSet
  CommandSet = SellableCommandSet


  ; *** AUDIO Parameters ***

	SoundOnDamaged			= BuildingLightDamageWood
	SoundOnReallyDamaged		= BuildingHeavyDamageWood

	VoiceSelectUnderConstruction	= BuildingGoodVoiceSelectUnderConstruction

	UnitSpecificSounds
		UnderConstruction		= BuildingConstructionLoop  ; Built first time
		; UnderRepairFromDamage	= NoSound					; Repaired No animation on the building, so don't bother playing sound
		UnderRepairFromRubble	= BuildingConstructionLoop	; Repaired from completely destroyed (not used???)
	End
 

  ; *** ENGINEERING Parameters ***

  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE NEED_BASE_FOUNDATION  
 							;MP_COUNT_FOR_VICTORY;removed so econ plots will not keep zombie games going

  Behavior            = GettingBuiltBehavior GetBuiltBehaviorTag
    WorkerName		  = GondorWorkerNoSelect
  End

  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  Body                = StructureBody ModuleTag_05
    MaxHealth         = 1500.0
    
   DamageCreationList = OCL_BuildingDamageList01 CATAPULT_ROCK
    
    DamageCreationList = OCL_GBFarm_Chunk1 CATAPULT_ROCK FRONT_DESTROYED
    DamageCreationList = OCL_GBFarm_Chunk2 CATAPULT_ROCK RIGHT_DESTROYED
    DamageCreationList = OCL_GBFarm_Chunk3 CATAPULT_ROCK BACK_DESTROYED
    DamageCreationList = OCL_GBFarm_Chunk4 CATAPULT_ROCK LEFT_DESTROYED
  End

  Behavior = AutoDepositUpdate AutoDepositModuleTag
    DepositTiming       = 2000   ; in milliseconds
    DepositAmount       = 20   ; cash amount to deposit every DepositTiming
    InitialCaptureBonus = 0  ; no initial bonus
  End
  
  
   ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
  
 Behavior = DestroyDie ModuleTag_IWantRubble
 End

  Behavior                  = StructureCollapseUpdate ModuleTag_07
    MinCollapseDelay        = 000
    MaxCollapseDelay        = 000
    CollapseDamping         = .5
    MaxShudder              = 0.6
    MinBurstDelay           = 250
    MaxBurstDelay           = 800
    BigBurstFrequency       = 4
    FXList                  = INITIAL   FX_StructureMediumCollapse

  End

  
  
  ;Behavior            = DestroyDie ModuleTag_08a
    ;nothing
  ;End
  
  Behavior                  = BuildingBehavior BuildingModuleTag
    NightWindowName         = WINDOW_N01
    FireWindowName          = WINDOW_F01
    GlowWindowName			= WINDOW_G01
;    FireName				= FIRE01
  End


;  Behavior           = CreateObjectDie ModuleTag_08
;    CreationList     = OCL_SmallStructureDebris
;  End
 
;  Behavior = ProductionUpdate ModuleTag_10
;    ; nothing, but is required if we have any Object-level Upgrades!
;  End
 
;  Behavior = FlammableUpdate ModuleTag_14
;    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
;    AflameDamageAmount = 5       ; taking this much damage...
;    AflameDamageDelay = 500       ; this often.
;  End
 
;  Behavior = TransitionDamageFX ModuleTag_15
;    ;-------------DESIGNED FOR SMALL SIZED FACTION BUILDING TRANSITIONS-------------------
;    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
;    ;---------------------------------------------------------------------------------------
;    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
;    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
;    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
;  End
 
;  Behavior             = FXListDie ModuleTag_16
;    DeathFX       = FX_BuildingDie
;  End
 
  Geometry              = BOX
  GeometryMajorRadius   = 43.2
  GeometryMinorRadius   = 32.8
  GeometryHeight        = 18.4
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER
End


;------------------------------------------------------------------------------
Object Tower_FromZeroHourThatCanTopple

	; *** ART Parameters ***
	
	
	
	Draw = W3DScriptedModelDraw ModuleTag_01
		UseStandardModelNames = Yes
		OkToChangeModelColor = Yes
		
		StaticModelLODMode = yes
  
		DefaultModelConditionState
			Model         = OSFallTwr
		End

		ModelConditionState = POST_COLLAPSE
			Model         = OSFallTwr_D1
		End

	;	ModelConditionState = POST_COLLAPSE NIGHT
	;		Model         = OSFallTower
	;	End
	;	ModelConditionState = POST_COLLAPSE SNOW
	;		Model         = OSFallTower
	;	End
	;	ModelConditionState = POST_COLLAPSE SNOW NIGHT
	;		Model         = OSFallTower
	;	End
	End

	; ***DESIGN parameters ***
	DisplayName      = OBJECT:Tower
	Side             = OSGILIATH
	EditorSorting    = STRUCTURE
	;ArmorSet
	;	Conditions      = None
	;	Armor           = StructureArmor
	;	DamageFX        = StructureDamageFXNoShake
	;End

	; *** ENGINEERING Parameters ***  
	KindOf                = STRUCTURE SELECTABLE IMMOBILE
	Body                  = StructureBody ModuleTag_02
		MaxHealth       = 500.0
	End
    
	Behavior                = StructureToppleUpdate ModuleTag_04
		MinToppleDelay        = 50		 ;The delay between the time we die to the beginning of the collapse.
		MaxToppleDelay        = 50
		MinToppleBurstDelay   = 1500
		MaxToppleBurstDelay   = 2500
		ToppleAccelerationFactor = 0.25  ;Increase this value to speed up the collapse.
		StructuralIntegrity   = 0.75
		StructuralDecay       = 1.0
		DamageFXTypes         = ALL -WATER
		ToppleStartFX         = FX_DefaultStructureToppleStart
		ToppleDelayFX         = FX_DefaultStructureToppleDelay
		CrushingFX            = FX_DefaultStructureCrushing
		AngleFX               = 20.0 FX_StructureToppleAngle20
		ToppleDoneFX          = FX_DefaultStructureToppleDone
		CrushingWeaponName    = ToppledStructureWeapon
	End

  Behavior = SlowDeathBehavior ModuleTag_51
    DeathTypes = ALL 
    DestructionDelay = 30000
    DecayBeginTime = 5000
    SinkDelay = 14000
    SinkRate = 0.84     ; in Dist/Sec
    ProbabilityModifier = 50
  End

  Geometry              = BOX
  GeometryMajorRadius   = 31.20
  GeometryMinorRadius   = 30.8
  GeometryHeight        = 139.60
  GeometryIsSmall       = No
  
  GeometryContactPoint = X:0 Y:0 Z:139 Swoop
  
  Shadow                = SHADOW_VOLUME

End

;------------------------------------------------------------------------------
;------------------------------------------------------------------------------
;------------------------------------------------------------------------------
;------------------------------------------------------------------------------
;
;  Osgiliath
;
;------------------------------------------------------------------------------
;------------------------------------------------------------------------------
;------------------------------------------------------------------------------

;------------------------------------------------------------
Object OsgiliathPillar01

	SelectPortrait = BPGOsgiliath

	; *** ART Parameters ***
		Draw = W3DScriptedModelDraw ModuleTag_01
			OkToChangeModelColor = Yes
			
			StaticModelLODMode = yes
			
			DefaultModelConditionState
				Model = OSPillar01
			End
		
		;    WallBoundsMesh = GBMTWallAPTop
		End


	; *** AUDIO Parameters ***

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone


	; ***DESIGN parameters ***

		DisplayName      = OBJECT:Pillar
		EditorSorting   = STRUCTURE

		ArmorSet
			Conditions        = None
			Armor             = NoArmor
			DamageFX          = None
		End

	; *** ENGINEERING Parameters ***  
		KindOf                = STRUCTURE IMMOBILE 
		RadarPriority = STRUCTURE
		Body                  = ActiveBody ModuleTag_03
			MaxHealth       = 2000.0
		End

	Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
		DestructionDelay  = 2100
	End
		  
		Geometry              = BOX
		GeometryMajorRadius   = 19.2
		GeometryMinorRadius   = 8.40
		GeometryHeight        = 6.4
		GeometryIsSmall       = No
		Shadow                = SHADOW_VOLUME
	End
;------------------------------------------------------------
;------------------------------------------------------------
Object OsgiliathPillar02

SelectPortrait = BPGOsgiliath

	; *** ART Parameters ***
		Draw = W3DScriptedModelDraw ModuleTag_01
			OkToChangeModelColor = Yes
			
			StaticModelLODMode = yes
			
			DefaultModelConditionState
				Model = OSPillar02
			End
		
		;    WallBoundsMesh = GBMTWallAPTop
		End


	; *** AUDIO Parameters ***

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone


	; ***DESIGN parameters ***

		DisplayName      = OBJECT:Pillar
		EditorSorting   = STRUCTURE

		ArmorSet
			Conditions        = None
			Armor             = NoArmor
			DamageFX          = None
		End

	; *** ENGINEERING Parameters ***  
		KindOf                = STRUCTURE IMMOBILE 
		RadarPriority = STRUCTURE
		Body                  = ActiveBody ModuleTag_03
			MaxHealth       = 2000.0
		End

		Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
			DestructionDelay  = 2100
		End
		  
		Geometry              = BOX
		GeometryMajorRadius   = 8.40
		GeometryMinorRadius   = 15.2
		GeometryHeight        = 28.8
		GeometryIsSmall       = No
		;GeometryRotationAnchorOffset = X:1037.871 Y:0
		Shadow                = SHADOW_VOLUME
	End
;------------------------------------------------------------

;------------------------------------------------------------
Object OsgiliathRuin01

	SelectPortrait = BPGOsgiliath

	; *** ART Parameters ***
		Draw = W3DScriptedModelDraw ModuleTag_01
			OkToChangeModelColor = Yes
			
			StaticModelLODMode = yes
			
			DefaultModelConditionState
				Model = OSBruin01
			End
		
		;    WallBoundsMesh = GBMTWallAPTop
		
     ModelConditionState  = DAMAGED
      Model         = OSBruin01_D1
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
	
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = OSBruin01_D2
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
	
    End
    
    ModelConditionState  = RUBBLE
      Model         = OSBruin01_D2
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End

    ModelConditionState  = POST_RUBBLE
      Model         = None
      ParticleSysBone NONE SmokeBuildingMediumRubble
    End

    ModelConditionState  = POST_COLLAPSE
      Model         = None
      ParticleSysBone NONE SmokeBuildingMediumRubble
    End
    

		End


	; *** AUDIO Parameters ***

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone


	; ***DESIGN parameters ***

		DisplayName      = OBJECT:Ruins
		EditorSorting   = STRUCTURE

		ArmorSet
			Conditions        = None
			Armor             = NoArmor
			DamageFX          = None
		End

; *** ENGINEERING Parameters ***  

		KindOf                = STRUCTURE IMMOBILE 
		RadarPriority = STRUCTURE
		Body                  = ActiveBody ModuleTag_03
			MaxHealth				= 2000.0
			MaxHealthDamaged  		= 1500.0
			MaxHealthReallyDamaged 	= 1000.0
		End

	Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
		DestructionDelay  = 3000
	End

  Behavior                  = StructureCollapseUpdate ModuleTag_04
    MinCollapseDelay        = 000
    MaxCollapseDelay        = 000
    CollapseDamping         = .5
    MaxShudder              = 0.6
    MinBurstDelay           = 250
    MaxBurstDelay           = 800
    BigBurstFrequency       = 4
    FXList                  = INITIAL   FX_StructureMediumCollapse

  End

  
  
  
  		Geometry              = BOX
		GeometryMajorRadius   = 40.0
		GeometryMinorRadius   = 42.4
		GeometryHeight        = 72.8
		GeometryIsSmall       = No
		;GeometryRotationAnchorOffset = X:1037.871 Y:0
		Shadow                = SHADOW_VOLUME
	End
;------------------------------------------------------------


;------------------------------------------------------------
Object OsgiliathRuin02

	SelectPortrait = BPGOsgiliath

	; *** ART Parameters ***
		Draw = W3DScriptedModelDraw ModuleTag_01
			OkToChangeModelColor = Yes
			
			StaticModelLODMode = yes
			
			DefaultModelConditionState
				Model = OSBruin02
			End
		
		;    WallBoundsMesh = GBMTWallAPTop
		
    
     ModelConditionState  = DAMAGED
      Model         = OSBruin02_D1
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
	
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = OSBruin02_D2
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
	
    End
    
    ModelConditionState  = RUBBLE
      Model         = OSBruin02_D2
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End

    ModelConditionState  = POST_RUBBLE
      Model         = None
      ParticleSysBone NONE SmokeBuildingMediumRubble
    End

    ModelConditionState  = POST_COLLAPSE
      Model         = None
      ParticleSysBone NONE SmokeBuildingMediumRubble
    End
    

		End


	; *** AUDIO Parameters ***

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone


	; ***DESIGN parameters ***

		DisplayName      = OBJECT:Ruins
		EditorSorting   = STRUCTURE

		ArmorSet
			Conditions        = None
			Armor             = NoArmor
			DamageFX          = None
		End

; *** ENGINEERING Parameters ***  
		KindOf                = STRUCTURE IMMOBILE 
		RadarPriority = STRUCTURE
		Body                  = ActiveBody ModuleTag_03
			MaxHealth				= 2000.0
			MaxHealthDamaged  		= 1500.0
			MaxHealthReallyDamaged 	= 1000.0
		End

	Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 4000
	End

  Behavior                  = StructureCollapseUpdate ModuleTag_04
    MinCollapseDelay        = 000
    MaxCollapseDelay        = 000
    CollapseDamping         = .5
    MaxShudder              = 0.6
    MinBurstDelay           = 250
    MaxBurstDelay           = 800
    BigBurstFrequency       = 4
    FXList                  = INITIAL   FX_StructureMediumCollapse
    OCL						= INITIAL	OCL_StructureRubblePileLarge ; creates a rising pile of debris halfway-done

  End

  
  		Geometry              = BOX
		GeometryMajorRadius   = 40.0
		GeometryMinorRadius   = 30.4
		GeometryHeight        = 51.2
		GeometryIsSmall       = No
		;GeometryRotationAnchorOffset = X:1037.871 Y:0
		Shadow                = SHADOW_VOLUME
	End
;------------------------------------------------------------


;------------------------------------------------------------
Object OsgiliathRuin03

	SelectPortrait = BPGOsgiliath

	; *** ART Parameters ***
		Draw = W3DScriptedModelDraw ModuleTag_01
			OkToChangeModelColor = Yes
			
			StaticModelLODMode = yes
			
			DefaultModelConditionState
				Model = OSBruin03
			End
		
		;    WallBoundsMesh = GBMTWallAPTop
		
		; ---------- destruction states
     ModelConditionState  = DAMAGED
      Model         = OSBruin03_D1
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
	
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = OSBruin03_D1
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
	
    End
    
    ModelConditionState  = RUBBLE
      Model         = OSBruin03_D1
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End

    ModelConditionState  = POST_RUBBLE
      Model         = None
      ParticleSysBone NONE SmokeBuildingMediumRubble
    End

    ModelConditionState  = POST_COLLAPSE
      Model         = None
      ParticleSysBone NONE SmokeBuildingMediumRubble
    End
    

		End


	; *** AUDIO Parameters ***

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone


	; ***DESIGN parameters ***

		DisplayName      = OBJECT:Ruins
		EditorSorting   = STRUCTURE

		ArmorSet
			Conditions        = None
			Armor             = NoArmor
			DamageFX          = None
		End

; *** ENGINEERING Parameters ***  
		KindOf                = STRUCTURE IMMOBILE 
		RadarPriority = STRUCTURE
		Body                  = ActiveBody ModuleTag_03
			MaxHealth				= 2000.0
			MaxHealthDamaged  		= 1500.0
			MaxHealthReallyDamaged 	= 1000.0
		End

	Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
		DestructionDelay  = 3000
	End

	Behavior                  = StructureCollapseUpdate ModuleTag_04
		MinCollapseDelay        = 000
		MaxCollapseDelay        = 000
		CollapseDamping         = .5
		MaxShudder              = 0.6
		MinBurstDelay           = 250
		MaxBurstDelay           = 800
		BigBurstFrequency       = 4
		FXList                  = INITIAL   FX_StructureMediumCollapse
		OCL						= INITIAL	OCL_StructureRubblePileLarge ; creates a rising pile of debris halfway-done

	End

 
  
  		Geometry              = BOX
		GeometryMajorRadius   = 6.8
		GeometryMinorRadius   = 53.80
		GeometryHeight        = 40.8
		GeometryIsSmall       = No
		GeometryOffset = X:7 Y:-19 Z:0
    
		AdditionalGeometry    = BOX
		GeometryMajorRadius   = 54.0
		GeometryMinorRadius   = 6.0
		GeometryHeight        = 35.0
		GeometryOffset		= X:8 Y:28 Z:0
		
		;GeometryRotationAnchorOffset = X:1037.871 Y:0
		Shadow                = SHADOW_VOLUME
	End
;------------------------------------------------------------


;------------------------------------------------------------
Object OsgiliathRuin04

	SelectPortrait = BPGOsgiliath

	; *** ART Parameters ***
		Draw = W3DScriptedModelDraw ModuleTag_01
			OkToChangeModelColor = Yes
			
			StaticModelLODMode = yes
			
			DefaultModelConditionState
				Model = OSBruin04
			End
		
		;    WallBoundsMesh = GBMTWallAPTop
		
		; ---------- destruction states
    
     ModelConditionState  = DAMAGED
      Model         = OSBruin04_D1
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
	
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = OSBruin04_D1
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
	
    End
    
    ModelConditionState  = RUBBLE
      Model         = OSBruin04_D1
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End

    ModelConditionState  = POST_RUBBLE
      Model         = None
      ParticleSysBone NONE SmokeBuildingMediumRubble
    End

    ModelConditionState  = POST_COLLAPSE
      Model         = None
      ParticleSysBone NONE SmokeBuildingMediumRubble
    End
    

		End


	; *** AUDIO Parameters ***

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone


	; ***DESIGN parameters ***

		DisplayName      = OBJECT:Ruins
		EditorSorting   = STRUCTURE

		ArmorSet
			Conditions        = None
			Armor             = NoArmor
			DamageFX          = None
		End

; *** ENGINEERING Parameters ***  
		KindOf                = STRUCTURE IMMOBILE 
		RadarPriority = STRUCTURE
		Body                  = ActiveBody ModuleTag_03
			MaxHealth				= 2000.0
			MaxHealthDamaged  		= 1500.0
			MaxHealthReallyDamaged 	= 1000.0
		End

	Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
		DestructionDelay  = 3000
	End

	Behavior                  = StructureCollapseUpdate ModuleTag_04
		MinCollapseDelay        = 000
		MaxCollapseDelay        = 000
		CollapseDamping         = .5
		MaxShudder              = 0.6
		MinBurstDelay           = 250
		MaxBurstDelay           = 800
		BigBurstFrequency       = 4
		FXList                  = INITIAL   FX_StructureMediumCollapse
		OCL						= INITIAL	OCL_StructureRubblePileLarge ; creates a rising pile of debris halfway-done

	End

  

  		Geometry              = BOX
		GeometryMajorRadius   = 33.20
		GeometryMinorRadius   = 28.40
		GeometryHeight        = 51.2
		GeometryIsSmall       = No
		;GeometryRotationAnchorOffset = X:1037.871 Y:0
		Shadow                = SHADOW_VOLUME
	End
;------------------------------------------------------------



;------------------------------------------------------------
Object OsgiliathRuin05

	SelectPortrait = BPGOsgiliath

	; *** ART Parameters ***
		Draw = W3DScriptedModelDraw ModuleTag_01
			OkToChangeModelColor = Yes
			
			StaticModelLODMode = yes
			
			DefaultModelConditionState
				Model = OSBruin05
			End
		
		;    WallBoundsMesh = GBMTWallAPTop
		
		; ---------- destruction states
   
     ModelConditionState  = DAMAGED
      Model         = OSBruin05_D1
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
	
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = OSBruin05_D2
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
	
    End
    
    ModelConditionState  = RUBBLE
      Model         = OSBruin05_D2
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End

    ModelConditionState  = POST_RUBBLE
Model         = None
      ParticleSysBone NONE SmokeBuildingMediumRubble
    End

    ModelConditionState  = POST_COLLAPSE
      Model         = None
      ParticleSysBone NONE SmokeBuildingMediumRubble
    End
    

		End


	; *** AUDIO Parameters ***

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone


	; ***DESIGN parameters ***

		DisplayName      = OBJECT:Ruins
		EditorSorting   = STRUCTURE

		ArmorSet
			Conditions        = None
			Armor             = NoArmor
			DamageFX          = None
		End

; *** ENGINEERING Parameters ***  
		KindOf                = STRUCTURE IMMOBILE 
		RadarPriority = STRUCTURE
		Body                  = ActiveBody ModuleTag_03
			MaxHealth				= 2000.0
			MaxHealthDamaged  		= 1500.0
			MaxHealthReallyDamaged 	= 1000.0
		End

		; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
		; never truly destroyed, even when reduced to zero health. Also note that garrisonable
		; buildings automatically stick around because GarrisonContain has it's own DieModule
	Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
		DestructionDelay  = 3000
	End

	Behavior                  = StructureCollapseUpdate ModuleTag_04
		MinCollapseDelay        = 000
		MaxCollapseDelay        = 000
		CollapseDamping         = .5
		MaxShudder              = 0.6
		MinBurstDelay           = 250
		MaxBurstDelay           = 800
		BigBurstFrequency       = 4
		FXList                  = INITIAL   FX_StructureMediumCollapse
		OCL						= INITIAL	OCL_StructureRubblePileLarge ; creates a rising pile of debris halfway-done

	End

  
  
  		Geometry              = BOX
		GeometryMajorRadius   = 33.6
		GeometryMinorRadius   = 9.20
		GeometryHeight        = 32.0
		GeometryIsSmall       = No
		;GeometryRotationAnchorOffset = X:1037.871 Y:0
		Shadow                = SHADOW_VOLUME
	End
;------------------------------------------------------------


;------------------------------------------------------------
Object OsgiliathRuin06

	SelectPortrait = BPGOsgiliath

	; *** ART Parameters ***
		Draw = W3DScriptedModelDraw ModuleTag_01
			OkToChangeModelColor = Yes
			
			StaticModelLODMode = yes
			
			DefaultModelConditionState
				Model = OSBruin06
			End
		
		;    WallBoundsMesh = GBMTWallAPTop
		
		; ---------- destruction states
   
     ModelConditionState  = DAMAGED
      Model         = OSBruin06_D1
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
	
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = OSBruin06_D2
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
	
    End
    
    ModelConditionState  = RUBBLE
      Model         = OSBruin06_D2
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End

    ModelConditionState  = POST_RUBBLE
      Model         = None
      ParticleSysBone NONE SmokeBuildingMediumRubble
    End

    ModelConditionState  = POST_COLLAPSE
      Model         = None
      ParticleSysBone NONE SmokeBuildingMediumRubble
    End
    

		End


	; *** AUDIO Parameters ***

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone


	; ***DESIGN parameters ***

		DisplayName      = OBJECT:Ruins
		EditorSorting   = STRUCTURE

		ArmorSet
			Conditions        = None
			Armor             = NoArmor
			DamageFX          = None
		End

; *** ENGINEERING Parameters ***  
		KindOf                = STRUCTURE IMMOBILE 
		RadarPriority = STRUCTURE
		Body                  = ActiveBody ModuleTag_03
			MaxHealth				= 2000.0
			MaxHealthDamaged  		= 1500.0
			MaxHealthReallyDamaged 	= 1000.0
		End

		; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
		; never truly destroyed, even when reduced to zero health. Also note that garrisonable
		; buildings automatically stick around because GarrisonContain has it's own DieModule
		Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 2500
		End

  Behavior                  = StructureCollapseUpdate ModuleTag_04
    MinCollapseDelay        = 000
    MaxCollapseDelay        = 000
    CollapseDamping         = .5
    MaxShudder              = 0.6
    MinBurstDelay           = 250
    MaxBurstDelay           = 800
    BigBurstFrequency       = 4
    FXList                  = INITIAL   FX_StructureMediumCollapse
    OCL						= INITIAL	OCL_StructureRubblePileLarge ; creates a rising pile of debris halfway-done

  End

  

  		Geometry              = BOX
		GeometryMajorRadius   = 10.80
		GeometryMinorRadius   = 6.80
		GeometryHeight        = 25.20
		GeometryIsSmall       = No
		;GeometryRotationAnchorOffset = X:1037.871 Y:0
		Shadow                = SHADOW_VOLUME
	End
;------------------------------------------------------------


;------------------------------------------------------------
Object OsgiliathRuin07

	SelectPortrait = BPGOsgiliath

	; *** ART Parameters ***
		Draw = W3DScriptedModelDraw ModuleTag_01
			OkToChangeModelColor = Yes
			
			StaticModelLODMode = yes
			
			DefaultModelConditionState
				Model = OSBruin07
			End
		
		;    WallBoundsMesh = GBMTWallAPTop
		
		; ---------- destruction states
    
     ModelConditionState  = DAMAGED
      Model         = OSBruin07_D1
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
	
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = OSBruin07_D2
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
	
    End
    
    ModelConditionState  = RUBBLE
      Model         = OSBruin07_D2
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End

    ModelConditionState  = POST_RUBBLE
      Model         = None
      ParticleSysBone NONE SmokeBuildingMediumRubble
    End

    ModelConditionState  = POST_COLLAPSE
      Model         = None
      ParticleSysBone NONE SmokeBuildingMediumRubble
    End
    

		End


	; *** AUDIO Parameters ***

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone


	; ***DESIGN parameters ***

		DisplayName      = OBJECT:Ruins
		EditorSorting   = STRUCTURE

		ArmorSet
			Conditions        = None
			Armor             = NoArmor
			DamageFX          = None
		End

; *** ENGINEERING Parameters ***  
		KindOf                = STRUCTURE IMMOBILE SELECTABLE
		RadarPriority = STRUCTURE
		Body                  = ActiveBody ModuleTag_03
			MaxHealth				= 2000.0
			MaxHealthDamaged  		= 1500.0
			MaxHealthReallyDamaged 	= 1000.0
		End

		; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
		; never truly destroyed, even when reduced to zero health. Also note that garrisonable
		; buildings automatically stick around because GarrisonContain has it's own DieModule
		Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 4000
		End

  Behavior                  = StructureCollapseUpdate ModuleTag_04
    MinCollapseDelay        = 000
    MaxCollapseDelay        = 000
    CollapseDamping         = .5
    MaxShudder              = 0.6
    MinBurstDelay           = 250
    MaxBurstDelay           = 800
    BigBurstFrequency       = 4
    FXList                  = INITIAL   FX_StructureMediumCollapse
    OCL						= INITIAL	OCL_StructureRubblePileLarge ; creates a rising pile of debris halfway-done

  End


  		Geometry              = BOX
		GeometryMajorRadius   = 19.2
		GeometryMinorRadius   = 6.00
		GeometryHeight        = 90.4
		GeometryIsSmall       = No
		;GeometryRotationAnchorOffset = X:1037.871 Y:0
		Shadow                = SHADOW_VOLUME
	End
;------------------------------------------------------------


;------------------------------------------------------------
Object OsgiliathRuin08

	SelectPortrait = BPGOsgiliath

	; *** ART Parameters ***
		Draw = W3DScriptedModelDraw ModuleTag_01
			OkToChangeModelColor = Yes
			
			StaticModelLODMode = yes
			
			DefaultModelConditionState
				Model = OSBruin08
			End
		
		;    WallBoundsMesh = GBMTWallAPTop
		
		; ---------- destruction states
    
     ModelConditionState  = DAMAGED
      Model         = OSBruin08_D1
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
	
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = OSBruin08_D2
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
	
    End
    
    ModelConditionState  = RUBBLE
      Model         = OSBruin08_D2
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End

    ModelConditionState  = POST_RUBBLE
      Model         = None
      ParticleSysBone NONE SmokeBuildingMediumRubble
    End

    ModelConditionState  = POST_COLLAPSE
      Model         = None
      ParticleSysBone NONE SmokeBuildingMediumRubble
    End
    

		End


	; *** AUDIO Parameters ***

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone


	; ***DESIGN parameters ***

		DisplayName      = OBJECT:Ruins
		EditorSorting   = STRUCTURE

		ArmorSet
			Conditions        = None
			Armor             = NoArmor
			DamageFX          = None
		End

; *** ENGINEERING Parameters ***  
		KindOf                = STRUCTURE IMMOBILE 
		RadarPriority = STRUCTURE
		Body                  = ActiveBody ModuleTag_03
			MaxHealth				= 2000.0
			MaxHealthDamaged  		= 1500.0
			MaxHealthReallyDamaged 	= 1000.0
		End

		; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
		; never truly destroyed, even when reduced to zero health. Also note that garrisonable
		; buildings automatically stick around because GarrisonContain has it's own DieModule
		Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 3000
		End

  Behavior                  = StructureCollapseUpdate ModuleTag_04
    MinCollapseDelay        = 000
    MaxCollapseDelay        = 000
    CollapseDamping         = .5
    MaxShudder              = 0.6
    MinBurstDelay           = 250
    MaxBurstDelay           = 800
    BigBurstFrequency       = 4
    FXList                  = INITIAL   FX_StructureMediumCollapse
    OCL						= INITIAL	OCL_StructureRubblePileLarge ; creates a rising pile of debris halfway-done

  End



  		Geometry              = BOX
		GeometryMajorRadius   = 25.20
		GeometryMinorRadius   = 8.8
		GeometryHeight        = 65.6
		GeometryIsSmall       = No
		;GeometryRotationAnchorOffset = X:1037.871 Y:0
		Shadow                = SHADOW_VOLUME
	End
;------------------------------------------------------------


;------------------------------------------------------------
Object OsgiliathRuin09

	SelectPortrait = BPGOsgiliath

	; *** ART Parameters ***
		Draw = W3DScriptedModelDraw ModuleTag_01
			OkToChangeModelColor = Yes
			
			StaticModelLODMode = yes
			
			DefaultModelConditionState
				Model = OSBruin09
			End
		
		;    WallBoundsMesh = GBMTWallAPTop
		
		; ---------- destruction states
    
     ModelConditionState  = DAMAGED
      Model         = OSBruin09_D1
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
	
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = OSBruin09_D1
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
	
    End
    
    ModelConditionState  = RUBBLE
      Model         = OSBruin09_D1
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End

    ModelConditionState  = POST_RUBBLE
      Model         = None
      ParticleSysBone NONE SmokeBuildingMediumRubble
    End

    ModelConditionState  = POST_COLLAPSE
      Model         = None
      ParticleSysBone NONE SmokeBuildingMediumRubble
    End
    

		End


	; *** AUDIO Parameters ***

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone


	; ***DESIGN parameters ***

		DisplayName      = OBJECT:Ruins
		EditorSorting   = STRUCTURE

		ArmorSet
			Conditions        = None
			Armor             = NoArmor
			DamageFX          = None
		End

; *** ENGINEERING Parameters ***  
		KindOf                = STRUCTURE IMMOBILE 
		RadarPriority = STRUCTURE
		Body                  = ActiveBody ModuleTag_03
			MaxHealth				= 2000.0
			MaxHealthDamaged  		= 1500.0
			MaxHealthReallyDamaged 	= 1000.0
		End

		; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
		; never truly destroyed, even when reduced to zero health. Also note that garrisonable
		; buildings automatically stick around because GarrisonContain has it's own DieModule
		Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 4000
		End

  Behavior                  = StructureCollapseUpdate ModuleTag_04
    MinCollapseDelay        = 000
    MaxCollapseDelay        = 000
    CollapseDamping         = .5
    MaxShudder              = 0.6
    MinBurstDelay           = 250
    MaxBurstDelay           = 800
    BigBurstFrequency       = 4
    FXList                  = INITIAL   FX_StructureMediumCollapse
    OCL						= INITIAL	OCL_StructureRubblePileLarge ; creates a rising pile of debris halfway-done

  End

  

  		Geometry              = BOX
		GeometryMajorRadius   = 27.60
		GeometryMinorRadius   = 27.60
		GeometryHeight        = 80.8
		GeometryIsSmall       = No
		;GeometryRotationAnchorOffset = X:1037.871 Y:0
		Shadow                = SHADOW_VOLUME
	End
;------------------------------------------------------------


;------------------------------------------------------------
Object OsgiliathRuin10

	SelectPortrait = BPGOsgiliath

	; *** ART Parameters ***
		Draw = W3DScriptedModelDraw ModuleTag_01
			OkToChangeModelColor = Yes
			
			StaticModelLODMode = yes
			
			DefaultModelConditionState
				Model = OSBruin10
			End
		
		;    WallBoundsMesh = GBMTWallAPTop
		
		; ---------- destruction states
    
     ModelConditionState  = DAMAGED
      Model         = OSBruin10_D1
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
	
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = OSBruin10_D1
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
	
    End
    
    ModelConditionState  = RUBBLE
      Model         = OSBruin10_D1
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End

    ModelConditionState  = POST_RUBBLE
      Model         = None
      ParticleSysBone NONE SmokeBuildingMediumRubble
    End

    ModelConditionState  = POST_COLLAPSE
      Model         = None
      ParticleSysBone NONE SmokeBuildingMediumRubble
    End
    

		End


	; *** AUDIO Parameters ***

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone


	; ***DESIGN parameters ***

		DisplayName      = OBJECT:Ruins
		EditorSorting   = STRUCTURE

		ArmorSet
			Conditions        = None
			Armor             = NoArmor
			DamageFX          = None
		End

; *** ENGINEERING Parameters ***  
		KindOf                = STRUCTURE IMMOBILE SELECTABLE MADE_OF_STONE NOT_AUTOACQUIRABLE CHUNK_VENDOR
		RadarPriority = STRUCTURE
		Body                  = ActiveBody ModuleTag_03
			MaxHealth				= 2000.0
			MaxHealthDamaged  		= 1500.0
			MaxHealthReallyDamaged 	= 1000.0

			GrabObject = EntThrownBuildingRock
			GrabFX = FX_WallGrab
			GrabOffset = X:16 Y:0  			
		End

		; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
		; never truly destroyed, even when reduced to zero health. Also note that garrisonable
		; buildings automatically stick around because GarrisonContain has it's own DieModule
		Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 2700
		End

  Behavior                  = StructureCollapseUpdate ModuleTag_04
    MinCollapseDelay        = 000
    MaxCollapseDelay        = 000
    CollapseDamping         = .5
    MaxShudder              = 0.6
    MinBurstDelay           = 250
    MaxBurstDelay           = 800
    BigBurstFrequency       = 4
    FXList                  = INITIAL   FX_StructureMediumCollapse
    OCL						= INITIAL	OCL_StructureRubblePileLarge ; creates a rising pile of debris halfway-done

  End


  
	Geometry              = BOX
	GeometryMajorRadius   = 30.80
	GeometryMinorRadius   = 28.0
	GeometryHeight        = 41.6
	GeometryIsSmall       = No
	;GeometryRotationAnchorOffset = X:1037.871 Y:0
	Shadow                = SHADOW_VOLUME

	GeometryContactPoint = X:0  Y:-40  Z:0 Grab
	GeometryContactPoint = X:-17  Y:-17  Z:40 
	GeometryContactPoint = X:-40  Y:0  Z:0 Grab
	GeometryContactPoint = X:-17  Y:17  Z:10
	GeometryContactPoint = X:0  Y:40  Z:0 Grab
	GeometryContactPoint = X:17  Y:17  Z:40 
	GeometryContactPoint = X:40  Y:0  Z:0 Grab
	GeometryContactPoint = X:17  Y:-17  Z:40 
End
;------------------------------------------------------------


;------------------------------------------------------------
Object OsgiliathRuin11

	SelectPortrait = BPGOsgiliath

	; *** ART Parameters ***
		Draw = W3DScriptedModelDraw ModuleTag_01
			OkToChangeModelColor = Yes
			
			StaticModelLODMode = yes
			
			DefaultModelConditionState
				Model = OSBruin11
			End
		
		;    WallBoundsMesh = GBMTWallAPTop
		
		; ---------- destruction states
    
     ModelConditionState  = DAMAGED
      Model         = OSBruin11_D1
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
	
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = OSBruin11_D1
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
	
    End
    
    ModelConditionState  = RUBBLE
      Model         = OSBruin11_D1
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End

    ModelConditionState  = POST_RUBBLE
      Model         = None
      ParticleSysBone NONE SmokeBuildingMediumRubble
    End

    ModelConditionState  = POST_COLLAPSE
      Model         = None
      ParticleSysBone NONE SmokeBuildingMediumRubble
    End
    

		End

	; *** AUDIO Parameters ***

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone


	; ***DESIGN parameters ***

		DisplayName      = OBJECT:Ruins
		EditorSorting   = STRUCTURE

		ArmorSet
			Conditions        = None
			Armor             = NoArmor
			DamageFX          = None
		End

; *** ENGINEERING Parameters ***  
		KindOf                = STRUCTURE IMMOBILE SELECTABLE MADE_OF_STONE NOT_AUTOACQUIRABLE CHUNK_VENDOR
		RadarPriority = STRUCTURE
		Body                  = ActiveBody ModuleTag_03
			MaxHealth				= 2000.0
			MaxHealthDamaged  		= 1500.0
			MaxHealthReallyDamaged 	= 1000.0

			GrabObject = EntThrownBuildingRock
			GrabFX = FX_WallGrab
			GrabOffset = X:16 Y:0  			

		End

		; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
		; never truly destroyed, even when reduced to zero health. Also note that garrisonable
		; buildings automatically stick around because GarrisonContain has it's own DieModule
		Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 4000
		End

  Behavior                  = StructureCollapseUpdate ModuleTag_04
    MinCollapseDelay        = 000
    MaxCollapseDelay        = 000
    CollapseDamping         = .5
    MaxShudder              = 0.6
    MinBurstDelay           = 250
    MaxBurstDelay           = 800
    BigBurstFrequency       = 4
    FXList                  = INITIAL   FX_StructureMediumCollapse
    OCL						= INITIAL	OCL_StructureRubblePileLarge ; creates a rising pile of debris halfway-done

  End

	Geometry              = BOX
	GeometryMajorRadius   = 24.40
	GeometryMinorRadius   = 20.0
	GeometryHeight        = 99.2
	GeometryIsSmall       = No
	;GeometryRotationAnchorOffset = X:1037.871 Y:0
	Shadow                = SHADOW_VOLUME
	
	GeometryContactPoint = X:0  Y:-24  Z:0 Grab
	GeometryContactPoint = X:-12  Y:-10  Z:50 
	GeometryContactPoint = X:-28  Y:0  Z:0 Grab
	GeometryContactPoint = X:-12  Y:10  Z:50 
	GeometryContactPoint = X:0  Y:24  Z:0 Grab
	GeometryContactPoint = X:12  Y:10  Z:95 
	GeometryContactPoint = X:28  Y:0  Z:0 Grab
	GeometryContactPoint = X:12  Y:-10  Z:95 
End
;------------------------------------------------------------


;------------------------------------------------------------
Object OsgiliathRuin12

	SelectPortrait = BPGOsgiliath

	; *** ART Parameters ***
		Draw = W3DScriptedModelDraw ModuleTag_01
			OkToChangeModelColor = Yes
			
			StaticModelLODMode = yes
			
			DefaultModelConditionState
				Model = OSBruin12
			End
		
		;    WallBoundsMesh = GBMTWallAPTop
		
		; ---------- destruction states
    
     ModelConditionState  = DAMAGED
      Model         = OSBruin12_D1
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
	
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = OSBruin12_D2
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
	
    End
    
    ModelConditionState  = RUBBLE
      Model         = OSBruin12_D2
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End

    ModelConditionState  = POST_RUBBLE
      Model         = None
      ParticleSysBone NONE SmokeBuildingMediumRubble
    End

    ModelConditionState  = POST_COLLAPSE
      Model         = None
      ParticleSysBone NONE SmokeBuildingMediumRubble
    End
    

		End


	; *** AUDIO Parameters ***

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone


	; ***DESIGN parameters ***

		DisplayName      = OBJECT:Ruins
		EditorSorting   = STRUCTURE

		ArmorSet
			Conditions        = None
			Armor             = NoArmor
			DamageFX          = None
		End

; *** ENGINEERING Parameters ***  
		KindOf                = STRUCTURE IMMOBILE 
		RadarPriority = STRUCTURE
		Body                  = ActiveBody ModuleTag_03
			MaxHealth				= 2000.0
			MaxHealthDamaged  		= 1500.0
			MaxHealthReallyDamaged 	= 1000.0
		End

		; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
		; never truly destroyed, even when reduced to zero health. Also note that garrisonable
		; buildings automatically stick around because GarrisonContain has it's own DieModule
		Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 3000
		End

  Behavior                  = StructureCollapseUpdate ModuleTag_04
    MinCollapseDelay        = 000
    MaxCollapseDelay        = 000
    CollapseDamping         = .5
    MaxShudder              = 0.6
    MinBurstDelay           = 250
    MaxBurstDelay           = 800
    BigBurstFrequency       = 4
    FXList                  = INITIAL   FX_StructureMediumCollapse
    OCL						= INITIAL	OCL_StructureRubblePileLarge ; creates a rising pile of debris halfway-done

  End

  

  
  		Geometry              = BOX
		GeometryMajorRadius   = 12.0
		GeometryMinorRadius   = 8.8
		GeometryHeight        = 48.8
		GeometryIsSmall       = No
		;GeometryRotationAnchorOffset = X:1037.871 Y:0
		Shadow                = SHADOW_VOLUME
	End
;------------------------------------------------------------


;------------------------------------------------------------
Object OsgiliathRuin13

	SelectPortrait = BPGOsgiliath

	; *** ART Parameters ***
		Draw = W3DScriptedModelDraw ModuleTag_01
			OkToChangeModelColor = Yes
			
			StaticModelLODMode = yes
			
			DefaultModelConditionState
				Model = OSBruin13
			End
		
		;    WallBoundsMesh = GBMTWallAPTop
		
		; ---------- destruction states
    
     ModelConditionState  = DAMAGED
      Model         = OSBruin13_D1
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
	
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = OSBruin13_D2
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
	
    End
    
    ModelConditionState  = RUBBLE
      Model         = OSBruin13_D2
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End

    ModelConditionState  = POST_RUBBLE
      Model         = None
      ParticleSysBone NONE SmokeBuildingMediumRubble
    End

    ModelConditionState  = POST_COLLAPSE
      Model         = None
      ParticleSysBone NONE SmokeBuildingMediumRubble
    End
    

		End


	; *** AUDIO Parameters ***

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone


	; ***DESIGN parameters ***

		DisplayName      = OBJECT:Ruins
		EditorSorting   = STRUCTURE

		ArmorSet
			Conditions        = None
			Armor             = NoArmor
			DamageFX          = None
		End

; *** ENGINEERING Parameters ***  
		KindOf                = STRUCTURE IMMOBILE MADE_OF_STONE NOT_AUTOACQUIRABLE CHUNK_VENDOR
		RadarPriority = STRUCTURE
		Body                  = ActiveBody ModuleTag_03
			MaxHealth				= 2000.0
			MaxHealthDamaged  		= 1500.0
			MaxHealthReallyDamaged 	= 1000.0

			GrabObject = EntThrownBuildingRock
			GrabFX = FX_WallGrab
			GrabOffset = X:16 Y:0  			

		End

		; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
		; never truly destroyed, even when reduced to zero health. Also note that garrisonable
		; buildings automatically stick around because GarrisonContain has it's own DieModule
		Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 3500
		End

  Behavior                  = StructureCollapseUpdate ModuleTag_04
    MinCollapseDelay        = 000
    MaxCollapseDelay        = 000
    CollapseDamping         = .5
    MaxShudder              = 0.6
    MinBurstDelay           = 250
    MaxBurstDelay           = 800
    BigBurstFrequency       = 4
    FXList                  = INITIAL   FX_StructureMediumCollapse
    OCL						= INITIAL	OCL_StructureRubblePileLarge ; creates a rising pile of debris halfway-done

  End


	Geometry              = BOX
	GeometryMajorRadius   = 30.80
	GeometryMinorRadius   = 30.80
	GeometryHeight        = 65.20
	GeometryIsSmall       = No
	;GeometryRotationAnchorOffset = X:1037.871 Y:0
	Shadow                = SHADOW_VOLUME
	
	GeometryContactPoint = X:-30  Y:-30  Z:0
	GeometryContactPoint = X:-15  Y:-30  Z:65 
	GeometryContactPoint = X:0  Y:-35  Z:0 Grab
	GeometryContactPoint = X:15  Y:-30  Z:65 
	GeometryContactPoint = X:30  Y:-30  Z:0
	GeometryContactPoint = X:30  Y:-15  Z:65 
	GeometryContactPoint = X:35  Y:0  Z:0 Grab 
	GeometryContactPoint = X:30  Y:15 Z:65
	GeometryContactPoint = X:30  Y:30 Z:0
	GeometryContactPoint = X:15  Y:30 Z:65
	GeometryContactPoint = X:0  Y:35 Z:0 Grab
	GeometryContactPoint = X:-15  Y:30 Z:65
	GeometryContactPoint = X:-30  Y:30 Z:0
	
End
;------------------------------------------------------------


;------------------------------------------------------------
Object OsgiliathRuin14

	SelectPortrait = BPGOsgiliath

	; *** ART Parameters ***
		Draw = W3DScriptedModelDraw ModuleTag_01
			OkToChangeModelColor = Yes
			
			StaticModelLODMode = yes
			
			DefaultModelConditionState
				Model = OSBruin14
			End
		
		;    WallBoundsMesh = GBMTWallAPTop
		
		; ---------- destruction states
    
     ModelConditionState  = DAMAGED
      Model         = OSBruin14_D1
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
	
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = OSBruin14_D2
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
	
    End
    
    ModelConditionState  = RUBBLE
      Model         = OSBruin14_D2
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End

    ModelConditionState  = POST_RUBBLE
      Model         = None
      ParticleSysBone NONE SmokeBuildingMediumRubble
    End

    ModelConditionState  = POST_COLLAPSE
      Model         = None
      ParticleSysBone NONE SmokeBuildingMediumRubble
    End
    

		End


	; *** AUDIO Parameters ***

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone


	; ***DESIGN parameters ***

		DisplayName      = OBJECT:Ruins
		EditorSorting   = STRUCTURE

		ArmorSet
			Conditions        = None
			Armor             = NoArmor
			DamageFX          = None
		End

; *** ENGINEERING Parameters ***  
		KindOf                = STRUCTURE IMMOBILE 
		RadarPriority = STRUCTURE
		Body                  = ActiveBody ModuleTag_03
			MaxHealth				= 2000.0
			MaxHealthDamaged  		= 1500.0
			MaxHealthReallyDamaged 	= 1000.0
		End

		; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
		; never truly destroyed, even when reduced to zero health. Also note that garrisonable
		; buildings automatically stick around because GarrisonContain has it's own DieModule
		Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 3000
		End

  Behavior                  = StructureCollapseUpdate ModuleTag_04
    MinCollapseDelay        = 000
    MaxCollapseDelay        = 000
    CollapseDamping         = .5
    MaxShudder              = 0.6
    MinBurstDelay           = 250
    MaxBurstDelay           = 800
    BigBurstFrequency       = 4
    FXList                  = INITIAL   FX_StructureMediumCollapse
    OCL						= INITIAL	OCL_StructureRubblePileLarge ; creates a rising pile of debris halfway-done

  End

  

  		Geometry              = BOX
		GeometryMajorRadius   = 32.0
		GeometryMinorRadius   = 7.2
		GeometryHeight        = 44.0
		GeometryIsSmall       = No
		;GeometryRotationAnchorOffset = X:1037.871 Y:0
		Shadow                = SHADOW_VOLUME
	End
;------------------------------------------------------------


;------------------------------------------------------------
Object OsgiliathRuin15

	SelectPortrait = BPGOsgiliath

	; *** ART Parameters ***
		Draw = W3DScriptedModelDraw ModuleTag_01
			OkToChangeModelColor = Yes
			
			
			StaticModelLODMode = yes
			
			DefaultModelConditionState
				Model = OSBruin15
		End
		
		;    WallBoundsMesh = GBMTWallAPTop
		
		; ---------- destruction states
    
     ModelConditionState  = DAMAGED
      Model         = OSBruin15_D1
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
	
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = OSBruin15_D1
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
	
    End
    
    ModelConditionState  = RUBBLE
      Model         = OSBruin15_D1
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End

  	ModelConditionState  = POST_RUBBLE
		Model         = None
		ParticleSysBone NONE SmokeBuildingMediumRubble
	End
	ModelConditionState  = POST_COLLAPSE
		Model         = None
		ParticleSysBone NONE SmokeBuildingMediumRubble
	End

 
  End


	; *** AUDIO Parameters ***

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone


	; ***DESIGN parameters ***

		DisplayName      = OBJECT:Ruins
		EditorSorting   = STRUCTURE

		ArmorSet
			Conditions        = None
			Armor             = NoArmor
			DamageFX          = None
		End

; *** ENGINEERING Parameters ***  
		KindOf                = STRUCTURE IMMOBILE SELECTABLE MADE_OF_STONE NOT_AUTOACQUIRABLE CHUNK_VENDOR
		RadarPriority = STRUCTURE
		Body                  = ActiveBody ModuleTag_03
			MaxHealth				= 2000.0
			MaxHealthDamaged  		= 1500.0
			MaxHealthReallyDamaged 	= 1000.0

			GrabObject = EntThrownBuildingRock
			GrabFX = FX_WallGrab
			GrabOffset = X:16 Y:0  			

		End

		; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
		; never truly destroyed, even when reduced to zero health. Also note that garrisonable
		; buildings automatically stick around because GarrisonContain has it's own DieModule
		Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 4000
		End

  Behavior                  = StructureCollapseUpdate ModuleTag_04
    MinCollapseDelay        = 000
    MaxCollapseDelay        = 000
    CollapseDamping         = .5
    MaxShudder              = 0.6
    MinBurstDelay           = 350
    MaxBurstDelay           = 550
    BigBurstFrequency       = 4
    FXList                  = INITIAL   FX_StructureMediumCollapse
    OCL						= INITIAL	OCL_StructureRubblePileLarge ; creates a rising pile of debris halfway-done
  
  End
  
  	Geometry              = BOX
	GeometryMajorRadius   = 32.8
	GeometryMinorRadius   = 31.2
	GeometryHeight        = 99.60
	GeometryIsSmall       = No
	;GeometryRotationAnchorOffset = X:1037.871 Y:0
	Shadow                = SHADOW_VOLUME
		
	GeometryContactPoint = X:0  Y:-34  Z:0 Grab
	GeometryContactPoint = X:-16  Y:-15  Z:95 
	GeometryContactPoint = X:-36  Y:0  Z:0 Grab
	GeometryContactPoint = X:-16  Y:15  Z:95 
	GeometryContactPoint = X:0  Y:34  Z:0 Grab
	GeometryContactPoint = X:16  Y:15  Z:95 
	GeometryContactPoint = X:36  Y:0  Z:0 Grab
	GeometryContactPoint = X:16  Y:-15  Z:95 
End
;------------------------------------------------------------


;------------------------------------------------------------
Object OsgiliathRuin16

	SelectPortrait = BPGOsgiliath

	; *** ART Parameters ***
		Draw = W3DScriptedModelDraw ModuleTag_01
			OkToChangeModelColor = Yes
			
			StaticModelLODMode = yes
			
			DefaultModelConditionState
				Model = OSBruin16
			End
		
		;    WallBoundsMesh = GBMTWallAPTop
		
		; ---------- destruction states
    
     ModelConditionState  = DAMAGED
      Model         = OSBruin16_D1
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
	
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = OSBruin16_D2
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
	
    End
    
    ModelConditionState  = RUBBLE
      Model         = OSBruin16_D2
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End

    ModelConditionState  = POST_RUBBLE
      Model         = None
      ParticleSysBone NONE SmokeBuildingMediumRubble
    End

    ModelConditionState  = POST_COLLAPSE
      Model         = None
      ParticleSysBone NONE SmokeBuildingMediumRubble
    End
    

		End


	; *** AUDIO Parameters ***

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone


	; ***DESIGN parameters ***

		DisplayName      = OBJECT:Ruins
		EditorSorting   = STRUCTURE

		ArmorSet
			Conditions        = None
			Armor             = NoArmor
			DamageFX          = None
		End

; *** ENGINEERING Parameters ***  
		KindOf                = STRUCTURE IMMOBILE 
		RadarPriority = STRUCTURE
		Body                  = ActiveBody ModuleTag_03
			MaxHealth				= 2000.0
			MaxHealthDamaged  		= 1500.0
			MaxHealthReallyDamaged 	= 1000.0
		End

		; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
		; never truly destroyed, even when reduced to zero health. Also note that garrisonable
		; buildings automatically stick around because GarrisonContain has it's own DieModule
		Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 3000
		End

  Behavior                  = StructureCollapseUpdate ModuleTag_04
    MinCollapseDelay        = 000
    MaxCollapseDelay        = 000
    CollapseDamping         = .5
    MaxShudder              = 0.6
    MinBurstDelay           = 250
    MaxBurstDelay           = 800
    BigBurstFrequency       = 4
    FXList                  = INITIAL   FX_StructureMediumCollapse
    OCL						= INITIAL	OCL_StructureRubblePileLarge ; creates a rising pile of debris halfway-done

  End


  
  		Geometry              = BOX
		GeometryMajorRadius   = 34.00
		GeometryMinorRadius   = 7.2
		GeometryHeight        = 44.8
		GeometryIsSmall       = No
		;GeometryRotationAnchorOffset = X:1037.871 Y:0
		Shadow                = SHADOW_VOLUME
	End
;------------------------------------------------------------

ChildObject OsgiliathRuin17 OsgiliathRuin16
End

ChildObject OsgiliathRuin18 OsgiliathRuin16
End

ChildObject OsgiliathRuin19 OsgiliathRuin16
End


;------------------------------------------------------------
Object OsgiliathRuin20

	SelectPortrait = BPGOsgiliath

	; *** ART Parameters ***
		Draw = W3DScriptedModelDraw ModuleTag_01
			OkToChangeModelColor = Yes
			
			StaticModelLODMode = yes
			
			DefaultModelConditionState
				Model = OSBruin20
			End
		
		;    WallBoundsMesh = GBMTWallAPTop
		
		; ---------- destruction states
    
     ModelConditionState  = DAMAGED
      Model         = OSBruin20_D1
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
	
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = OSBruin20_D1
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
	
    End
    
    ModelConditionState  = RUBBLE
      Model         = OSBruin20_D1
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End

    ModelConditionState  = POST_RUBBLE
      Model         = None
      ParticleSysBone NONE SmokeBuildingMediumRubble
    End

    ModelConditionState  = POST_COLLAPSE
      Model         = None
      ParticleSysBone NONE SmokeBuildingMediumRubble
    End
    

		End


	; *** AUDIO Parameters ***

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone


	; ***DESIGN parameters ***

		DisplayName      = OBJECT:Ruins
		EditorSorting   = STRUCTURE

		ArmorSet
			Conditions        = None
			Armor             = NoArmor
			DamageFX          = None
		End

; *** ENGINEERING Parameters ***  
		KindOf                = STRUCTURE IMMOBILE 
		RadarPriority = STRUCTURE
		Body                  = ActiveBody ModuleTag_03
			MaxHealth				= 2000.0
			MaxHealthDamaged  		= 1500.0
			MaxHealthReallyDamaged 	= 1000.0
		End

		; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
		; never truly destroyed, even when reduced to zero health. Also note that garrisonable
		; buildings automatically stick around because GarrisonContain has it's own DieModule
		Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 2500
		End

  Behavior                  = StructureCollapseUpdate ModuleTag_04
    MinCollapseDelay        = 000
    MaxCollapseDelay        = 000
    CollapseDamping         = .5
    MaxShudder              = 0.6
    MinBurstDelay           = 250
    MaxBurstDelay           = 800
    BigBurstFrequency       = 4
    FXList                  = INITIAL   FX_StructureMediumCollapse
    OCL						= INITIAL	OCL_StructureRubblePileLarge ; creates a rising pile of debris halfway-done

  End

  
  		Geometry              = BOX
		GeometryMajorRadius   = 30.80
		GeometryMinorRadius   = 8.8
		GeometryHeight        = 44.0
		GeometryIsSmall       = No
		;GeometryRotationAnchorOffset = X:1037.871 Y:0
		Shadow                = SHADOW_VOLUME
	End
;------------------------------------------------------------


;------------------------------------------------------------
Object OsgiliathRuin21

	SelectPortrait = BPGOsgiliath

	; *** ART Parameters ***
		Draw = W3DScriptedModelDraw ModuleTag_01
			OkToChangeModelColor = Yes
			
			StaticModelLODMode = yes
			
			DefaultModelConditionState
				Model = OSBruin21
			End
		
		;    WallBoundsMesh = GBMTWallAPTop
		
		; ---------- destruction states
     ModelConditionState  = DAMAGED
      Model         = OSBruin21_D1
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
	
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = OSBruin21_D2
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
	
    End
    
    ModelConditionState  = RUBBLE
      Model         = OSBruin21_D2
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End

    ModelConditionState  = POST_RUBBLE
      Model         = None
      ParticleSysBone NONE SmokeBuildingMediumRubble
    End

    ModelConditionState  = POST_COLLAPSE
      Model         = None
      ParticleSysBone NONE SmokeBuildingMediumRubble
    End
    

		End


	; *** AUDIO Parameters ***

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone


	; ***DESIGN parameters ***

		DisplayName      = OBJECT:Ruins
		EditorSorting   = STRUCTURE

		ArmorSet
			Conditions        = None
			Armor             = NoArmor
			DamageFX          = None
		End

; *** ENGINEERING Parameters ***  
		KindOf                = STRUCTURE IMMOBILE SELECTABLE CHUNK_VENDOR
		RadarPriority = STRUCTURE
		Body                  = ActiveBody ModuleTag_03
			MaxHealth				= 2000.0
			MaxHealthDamaged  		= 1500.0
			MaxHealthReallyDamaged 	= 1000.0
			
			GrabObject = EntThrownBuildingRock
			GrabFX = FX_WallGrab
			GrabDamage = 490
			GrabOffset = X:16 Y:0
		End

		; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
		; never truly destroyed, even when reduced to zero health. Also note that garrisonable
		; buildings automatically stick around because GarrisonContain has it's own DieModule
		Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 3000
		End

  Behavior                  = StructureCollapseUpdate ModuleTag_04
    MinCollapseDelay        = 000
    MaxCollapseDelay        = 000
    CollapseDamping         = .5
    MaxShudder              = 0.6
    MinBurstDelay           = 250
    MaxBurstDelay           = 800
    BigBurstFrequency       = 4
    FXList                  = INITIAL   FX_StructureMediumCollapse
    OCL						= INITIAL	OCL_StructureRubblePileLarge ; creates a rising pile of debris halfway-done

  End
  
	Geometry              = BOX
	GeometryMajorRadius   = 16.40
	GeometryMinorRadius   = 13.6
	GeometryHeight        = 60.0
	GeometryIsSmall       = No
	;GeometryRotationAnchorOffset = X:1037.871 Y:0
	Shadow                = SHADOW_VOLUME

	GeometryContactPoint = X:0  Y:-16  Z:0 Grab
	GeometryContactPoint = X:-10  Y:-6  Z:55 
	GeometryContactPoint = X:-20  Y:0  Z:0 Grab
	GeometryContactPoint = X:-10  Y:6  Z:55 
	GeometryContactPoint = X:0  Y:16  Z:0 Grab
	GeometryContactPoint = X:10  Y:6  Z:55 
	GeometryContactPoint = X:20  Y:0  Z:0 Grab
	GeometryContactPoint = X:10  Y:-6  Z:55 
End
;------------------------------------------------------------
;------------------------------------------------------------
Object OsgiliathRuin21b

	SelectPortrait = BPGOsgiliath

	; *** ART Parameters ***
		Draw = W3DScriptedModelDraw ModuleTag_01
			OkToChangeModelColor = Yes
			
			StaticModelLODMode = yes
			
			DefaultModelConditionState
				Model = OSBruin21b
			End
		
		;    WallBoundsMesh = GBMTWallAPTop
		
		; ---------- destruction states
     ModelConditionState  = DAMAGED
      Model         = OSBruin21b_D1
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
	
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = OSBruin21b_D2
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
	
    End
    
    ModelConditionState  = RUBBLE
      Model         = OSBruin21b_D2
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End

    ModelConditionState  = POST_RUBBLE
      Model         = None
      ParticleSysBone NONE SmokeBuildingMediumRubble
    End

    ModelConditionState  = POST_COLLAPSE
      Model         = None
      ParticleSysBone NONE SmokeBuildingMediumRubble
    End
    

		End


	; *** AUDIO Parameters ***

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone


	; ***DESIGN parameters ***

		DisplayName      = OBJECT:Ruins
		EditorSorting   = STRUCTURE

		ArmorSet
			Conditions        = None
			Armor             = NoArmor
			DamageFX          = None
		End

; *** ENGINEERING Parameters ***  
		KindOf                = STRUCTURE IMMOBILE SELECTABLE MADE_OF_STONE NOT_AUTOACQUIRABLE CHUNK_VENDOR
		RadarPriority = STRUCTURE
		Body                  = ActiveBody ModuleTag_03
			MaxHealth				= 2000.0
			MaxHealthDamaged  		= 1300.0
			MaxHealthReallyDamaged 	= 100.0

			GrabObject = EntThrownBuildingRock
			GrabFX = FX_WallGrab
			GrabOffset = X:16 Y:0  			

		End

		; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
		; never truly destroyed, even when reduced to zero health. Also note that garrisonable
		; buildings automatically stick around because GarrisonContain has it's own DieModule
		Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 3000
		End

  Behavior                  = StructureCollapseUpdate ModuleTag_04
    MinCollapseDelay        = 000
    MaxCollapseDelay        = 000
    CollapseDamping         = .5
    MaxShudder              = 0.6
    MinBurstDelay           = 250
    MaxBurstDelay           = 800
    BigBurstFrequency       = 4
    FXList                  = INITIAL   FX_StructureMediumCollapse
    OCL						= INITIAL	OCL_StructureRubblePileLarge ; creates a rising pile of debris halfway-done
  End

	Geometry              = CYLINDER
	GeometryMajorRadius   = 35.0
	GeometryMinorRadius   = 35.0
	GeometryHeight        = 100.0
	GeometryIsSmall       = No
	;GeometryRotationAnchorOffset = X:1037.871 Y:0
	Shadow                = SHADOW_VOLUME
		
	GeometryContactPoint = X:0  Y:-40  Z:0 Grab
	GeometryContactPoint = X:-17  Y:-17  Z:95 
	GeometryContactPoint = X:-40  Y:0  Z:0 Grab
	GeometryContactPoint = X:-17  Y:17  Z:95 
	GeometryContactPoint = X:0  Y:40  Z:0 Grab
	GeometryContactPoint = X:17  Y:17  Z:95 
	GeometryContactPoint = X:40  Y:0  Z:0 Grab
	GeometryContactPoint = X:17  Y:-17  Z:95 	
End
;------------------------------------------------------------

;------------------------------------------------------------
Object OsgiliathRuin22

	SelectPortrait = BPGOsgiliath

	; *** ART Parameters ***
		Draw = W3DScriptedModelDraw ModuleTag_01
			OkToChangeModelColor = Yes
			
			StaticModelLODMode = yes
			
			DefaultModelConditionState
				Model = OSBruin22
			End
		
		End


	; *** AUDIO Parameters ***

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone


	; ***DESIGN parameters ***

		DisplayName      = OBJECT:Ruins
		EditorSorting   = STRUCTURE

		ArmorSet
			Conditions        = None
			Armor             = NoArmor
			DamageFX          = None
		End

; *** ENGINEERING Parameters ***  
		KindOf                = STRUCTURE IMMOBILE UNATTACKABLE 
		RadarPriority = STRUCTURE
		Body                  = ImmortalBody ModuleTag_03
			MaxHealth				= 2000.0
			MaxHealthDamaged  		= 1300.0
			MaxHealthReallyDamaged 	= 1000.0
		End

		; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
		; never truly destroyed, even when reduced to zero health. Also note that garrisonable
		; buildings automatically stick around because GarrisonContain has it's own DieModule
		Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 2100
		End

  Behavior                  = StructureCollapseUpdate ModuleTag_04
    MinCollapseDelay        = 000
    MaxCollapseDelay        = 000
    CollapseDamping         = .5
    MaxShudder              = 0.6
    MinBurstDelay           = 250
    MaxBurstDelay           = 800
    BigBurstFrequency       = 4
    FXList                  = INITIAL   FX_StructureMediumCollapse
    OCL						= INITIAL	OCL_StructureRubblePileLarge ; creates a rising pile of debris halfway-done

  End


  		Geometry              = BOX
		GeometryMajorRadius   = 5.20
		GeometryMinorRadius   = 8.8
		GeometryHeight        = 23.2
		GeometryIsSmall       = No
		;GeometryRotationAnchorOffset = X:1037.871 Y:0
		Shadow                = SHADOW_VOLUME
	End
;------------------------------------------------------------



;------------------------------------------------------------
Object OsgiliathRuin23

SelectPortrait = BPGOsgiliath

	; *** ART Parameters ***
		Draw = W3DScriptedModelDraw ModuleTag_01
			OkToChangeModelColor = Yes
			
			StaticModelLODMode = yes
			
			DefaultModelConditionState
				Model = OSBruin23
			End
		
		;    WallBoundsMesh = GBMTWallAPTop
		
		; ---------- destruction states
     ModelConditionState  = DAMAGED
      Model         = OSBruin23_D1
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
	
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = OSBruin23_D2
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
	
    End
    
    ModelConditionState  = RUBBLE
      Model         = OSBruin23_D2
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End

    ModelConditionState  = POST_RUBBLE
      Model         = None
      ParticleSysBone NONE SmokeBuildingMediumRubble
    End

    ModelConditionState  = POST_COLLAPSE
      Model         = None
      ParticleSysBone NONE SmokeBuildingMediumRubble
    End
    

		End


	; *** AUDIO Parameters ***

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone


	; ***DESIGN parameters ***

		DisplayName      = OBJECT:Ruins
		EditorSorting   = STRUCTURE

		ArmorSet
			Conditions        = None
			Armor             = NoArmor
			DamageFX          = None
		End

; *** ENGINEERING Parameters ***  
		KindOf                = STRUCTURE IMMOBILE 
		RadarPriority = STRUCTURE
		Body                  = ActiveBody ModuleTag_03
			MaxHealth				= 2000.0
			MaxHealthDamaged  		= 1500.0
			MaxHealthReallyDamaged 	= 1000.0
		End

		; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
		; never truly destroyed, even when reduced to zero health. Also note that garrisonable
		; buildings automatically stick around because GarrisonContain has it's own DieModule
		Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 2300
		End

  Behavior                  = StructureCollapseUpdate ModuleTag_04
    MinCollapseDelay        = 000
    MaxCollapseDelay        = 000
    CollapseDamping         = .5
    MaxShudder              = 0.6
    MinBurstDelay           = 250
    MaxBurstDelay           = 800
    BigBurstFrequency       = 4
    FXList                  = INITIAL   FX_StructureMediumCollapse
    OCL						= INITIAL	OCL_StructureRubblePileLarge ; creates a rising pile of debris halfway-done

  End

  
  		Geometry              = BOX
		GeometryMajorRadius   = 22.00
		GeometryMinorRadius   = 8.8
		GeometryHeight        = 39.2
		GeometryIsSmall       = No
		;GeometryRotationAnchorOffset = X:1037.871 Y:0
		Shadow                = SHADOW_VOLUME
	End
;------------------------------------------------------------


;------------------------------------------------------------
Object OsgiliathRuin24

	SelectPortrait = BPGOsgiliath

	; *** ART Parameters ***
		Draw = W3DScriptedModelDraw ModuleTag_01
			OkToChangeModelColor = Yes
			
			StaticModelLODMode = yes
			
			DefaultModelConditionState
				Model = OSBruin24
			End
		
		;    WallBoundsMesh = GBMTWallAPTop
		
		; ---------- destruction states
    
     ModelConditionState  = DAMAGED
      Model         = OSBruin24_D1
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
	
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = OSBruin24_D2
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
	
    End
    
    ModelConditionState  = RUBBLE
      Model         = OSBruin24_D2
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End

    ModelConditionState  = POST_RUBBLE
      Model         = None
      ParticleSysBone NONE SmokeBuildingMediumRubble
    End

    ModelConditionState  = POST_COLLAPSE
      Model         = None
      ParticleSysBone NONE SmokeBuildingMediumRubble
    End
    

		End


	; *** AUDIO Parameters ***

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone


	; ***DESIGN parameters ***

		DisplayName      = OBJECT:Ruins
		EditorSorting   = STRUCTURE

		ArmorSet
			Conditions        = None
			Armor             = NoArmor
			DamageFX          = None
		End

; *** ENGINEERING Parameters ***  
		KindOf                = STRUCTURE IMMOBILE 
		RadarPriority = STRUCTURE
		Body                  = ActiveBody ModuleTag_03
			MaxHealth				= 2000.0
			MaxHealthDamaged  		= 1500.0
			MaxHealthReallyDamaged 	= 1000.0
		End

		; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
		; never truly destroyed, even when reduced to zero health. Also note that garrisonable
		; buildings automatically stick around because GarrisonContain has it's own DieModule
		Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 2500
		End

  Behavior                  = StructureCollapseUpdate ModuleTag_04
    MinCollapseDelay        = 000
    MaxCollapseDelay        = 000
    CollapseDamping         = .5
    MaxShudder              = 0.6
    MinBurstDelay           = 250
    MaxBurstDelay           = 800
    BigBurstFrequency       = 4
    FXList                  = INITIAL   FX_StructureMediumCollapse
    OCL						= INITIAL	OCL_StructureRubblePileLarge ; creates a rising pile of debris halfway-done

  End

  
  
  		Geometry              = BOX
		GeometryMajorRadius   = 30.80
		GeometryMinorRadius   = 8.8
		GeometryHeight        = 41.6
		GeometryIsSmall       = No
		;GeometryRotationAnchorOffset = X:1037.871 Y:0
		Shadow                = SHADOW_VOLUME
	End
;------------------------------------------------------------



;------------------------------------------------------------
Object OsgiliathRubble01

	SelectPortrait = BPGOsgiliath

	; *** ART Parameters ***
		Draw = W3DScriptedModelDraw ModuleTag_01
			OkToChangeModelColor = Yes
			
			StaticModelLODMode = yes
			
			DefaultModelConditionState
				Model = OSBruinRub01
			End
		
		;    WallBoundsMesh = GBMTWallAPTop
		End

	; *** AUDIO Parameters ***



	; ***DESIGN parameters ***


		DisplayName      = OBJECT:Ruins
		EditorSorting   = STRUCTURE

		ArmorSet
			Conditions        = None
			Armor             = NoArmor
			DamageFX          = None
		End

	; *** ENGINEERING Parameters ***  
		KindOf                = STRUCTURE IMMOBILE 
		RadarPriority = STRUCTURE
		Body                  = ActiveBody ModuleTag_03
			MaxHealth       = 2000.0
		End

		; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
		; never truly destroyed, even when reduced to zero health. Also note that garrisonable
		; buildings automatically stick around because GarrisonContain has it's own DieModule
		Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 3000
		End
		  
;		Geometry              = BOX
;		GeometryMajorRadius   = 40.0
;		GeometryMinorRadius   = 11.2
;		GeometryHeight        = 48.0
;		GeometryIsSmall       = No
		;GeometryRotationAnchorOffset = X:1037.871 Y:0
		Shadow                = SHADOW_VOLUME
	End
;------------------------------------------------------------
;------------------------------------------------------------
Object OsgiliathRubble02

	SelectPortrait = BPGOsgiliath

	; *** ART Parameters ***
		Draw = W3DScriptedModelDraw ModuleTag_01
			OkToChangeModelColor = Yes
			
			StaticModelLODMode = yes
			
			DefaultModelConditionState
				Model = OSBruinRub02
			End
		
		;    WallBoundsMesh = GBMTWallAPTop
		End

	; *** AUDIO Parameters ***

	; ***DESIGN parameters ***
		DisplayName      = OBJECT:Ruins
		EditorSorting   = STRUCTURE

		ArmorSet
			Conditions        = None
			Armor             = NoArmor
			DamageFX          = None
		End

	; *** ENGINEERING Parameters ***  
		KindOf                = STRUCTURE IMMOBILE 
		RadarPriority = STRUCTURE
		Body                  = ActiveBody ModuleTag_03
			MaxHealth       = 2000.0
		End

		; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
		; never truly destroyed, even when reduced to zero health. Also note that garrisonable
		; buildings automatically stick around because GarrisonContain has it's own DieModule
		Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 3000
		End
		  
;		Geometry              = BOX
;		GeometryMajorRadius   = 40.0
;		GeometryMinorRadius   = 11.2
;		GeometryHeight        = 48.0
;		GeometryIsSmall       = No
		;GeometryRotationAnchorOffset = X:1037.871 Y:0
		Shadow                = SHADOW_VOLUME
	End
;------------------------------------------------------------
;------------------------------------------------------------
Object OsgiliathRubble03

	SelectPortrait = BPGOsgiliath

	; *** ART Parameters ***
		Draw = W3DScriptedModelDraw ModuleTag_01
			OkToChangeModelColor = Yes
			
			StaticModelLODMode = yes
			
			DefaultModelConditionState
				Model = OSBruinRub03
			End
		
		;    WallBoundsMesh = GBMTWallAPTop
		End

	; *** AUDIO Parameters ***

	; ***DESIGN parameters ***
		DisplayName      = OBJECT:Ruins
		EditorSorting   = STRUCTURE

		ArmorSet
			Conditions        = None
			Armor             = NoArmor
			DamageFX          = None
		End

	; *** ENGINEERING Parameters ***  
		KindOf                = STRUCTURE IMMOBILE 
		RadarPriority = STRUCTURE
		Body                  = ActiveBody ModuleTag_03
			MaxHealth       = 2000.0
		End

		; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
		; never truly destroyed, even when reduced to zero health. Also note that garrisonable
		; buildings automatically stick around because GarrisonContain has it's own DieModule
		Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 3000
		End
		  
;		Geometry              = BOX
;		GeometryMajorRadius   = 40.0
;		GeometryMinorRadius   = 11.2
;		GeometryHeight        = 48.0
;		GeometryIsSmall       = No
		;GeometryRotationAnchorOffset = X:1037.871 Y:0
		Shadow                = SHADOW_VOLUME
	End
;------------------------------------------------------------
;------------------------------------------------------------
Object OsgiliathRubble04

	SelectPortrait = BPGOsgiliath

	; *** ART Parameters ***
		Draw = W3DScriptedModelDraw ModuleTag_01
			OkToChangeModelColor = Yes
			
			StaticModelLODMode = yes
			
			DefaultModelConditionState
				Model = OSBruinRub04
			End
		
		;    WallBoundsMesh = GBMTWallAPTop
		End

	; *** AUDIO Parameters ***

	; ***DESIGN parameters ***
		DisplayName      = OBJECT:Ruins
		EditorSorting   = STRUCTURE

		ArmorSet
			Conditions        = None
			Armor             = NoArmor
			DamageFX          = None
		End

	; *** ENGINEERING Parameters ***  
		KindOf                = STRUCTURE IMMOBILE 
		RadarPriority = STRUCTURE
		Body                  = ActiveBody ModuleTag_03
			MaxHealth       = 2000.0
		End

		; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
		; never truly destroyed, even when reduced to zero health. Also note that garrisonable
		; buildings automatically stick around because GarrisonContain has it's own DieModule
		Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 3000
		End
		  
;		Geometry              = BOX
;		GeometryMajorRadius   = 40.0
;		GeometryMinorRadius   = 11.2
;		GeometryHeight        = 48.0
;		GeometryIsSmall       = No
		;GeometryRotationAnchorOffset = X:1037.871 Y:0
		Shadow                = SHADOW_VOLUME
	End
;------------------------------------------------------------
;------------------------------------------------------------
Object OsgiliathPlot01

	SelectPortrait = BPGOsgiliath

	; *** ART Parameters ***
		Draw = W3DScriptedModelDraw ModuleTag_01
			OkToChangeModelColor = Yes
			
			StaticModelLODMode = yes
			
			DefaultModelConditionState
				Model = OSBruinPl01
			End
		
		;    WallBoundsMesh = GBMTWallAPTop
		End

	; *** AUDIO Parameters ***

	; ***DESIGN parameters ***
		DisplayName      = OBJECT:Ruins
		EditorSorting   = STRUCTURE

		ArmorSet
			Conditions        = None
			Armor             = NoArmor
			DamageFX          = None
		End

	; *** ENGINEERING Parameters ***  
		KindOf                = STRUCTURE IMMOBILE 
		RadarPriority = STRUCTURE
		Body                  = ActiveBody ModuleTag_03
			MaxHealth       = 2000.0
		End

		; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
		; never truly destroyed, even when reduced to zero health. Also note that garrisonable
		; buildings automatically stick around because GarrisonContain has it's own DieModule
		Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 3000
		End
		  
		Geometry              = BOX
		GeometryMajorRadius   = 40.0
		GeometryMinorRadius   = 11.2
		GeometryHeight        = 48.0
		GeometryIsSmall       = No
		;GeometryRotationAnchorOffset = X:1037.871 Y:0
		Shadow                = SHADOW_VOLUME
	End
;------------------------------------------------------------
;------------------------------------------------------------
Object OsgiliathPlot02

	SelectPortrait = BPGOsgiliath

	; *** ART Parameters ***
		Draw = W3DScriptedModelDraw ModuleTag_01
			OkToChangeModelColor = Yes
			
			StaticModelLODMode = yes
			
			DefaultModelConditionState
				Model = OSBruinPl02
			End
		
		;    WallBoundsMesh = GBMTWallAPTop
		End

	; *** AUDIO Parameters ***

	; ***DESIGN parameters ***
		DisplayName      = OBJECT:Ruins
		EditorSorting   = STRUCTURE

		ArmorSet
			Conditions        = None
			Armor             = NoArmor
			DamageFX          = None
		End

	; *** ENGINEERING Parameters ***  
		KindOf                = STRUCTURE IMMOBILE 
		RadarPriority = STRUCTURE
		Body                  = ActiveBody ModuleTag_03
			MaxHealth       = 2000.0
		End

		; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
		; never truly destroyed, even when reduced to zero health. Also note that garrisonable
		; buildings automatically stick around because GarrisonContain has it's own DieModule
		Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 3000
		End
		  
		Geometry              = BOX
		GeometryMajorRadius   = 40.0
		GeometryMinorRadius   = 11.2
		GeometryHeight        = 48.0
		GeometryIsSmall       = No
		;GeometryRotationAnchorOffset = X:1037.871 Y:0
		Shadow                = SHADOW_VOLUME
	End
;------------------------------------------------------------
;------------------------------------------------------------
Object OsgiliathPlot03

	SelectPortrait = BPGOsgiliath

	; *** ART Parameters ***
		Draw = W3DScriptedModelDraw ModuleTag_01
			OkToChangeModelColor = Yes
			
			StaticModelLODMode = yes
			
			DefaultModelConditionState
				Model = OSBruinPl03
			End
		
		;    WallBoundsMesh = GBMTWallAPTop
		End

	; *** AUDIO Parameters ***

	; ***DESIGN parameters ***
		DisplayName      = OBJECT:Ruins
		EditorSorting   = STRUCTURE

		ArmorSet
			Conditions        = None
			Armor             = NoArmor
			DamageFX          = None
		End

	; *** ENGINEERING Parameters ***  
		KindOf                = STRUCTURE IMMOBILE 
		RadarPriority = STRUCTURE
		Body                  = ActiveBody ModuleTag_03
			MaxHealth       = 2000.0
		End

		; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
		; never truly destroyed, even when reduced to zero health. Also note that garrisonable
		; buildings automatically stick around because GarrisonContain has it's own DieModule
		Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 3000
		End
		  
		Geometry              = BOX
		GeometryMajorRadius   = 40.0
		GeometryMinorRadius   = 11.2
		GeometryHeight        = 48.0
		GeometryIsSmall       = No
		;GeometryRotationAnchorOffset = X:1037.871 Y:0
		Shadow                = SHADOW_VOLUME
	End
;------------------------------------------------------------
;------------------------------------------------------------
Object OsgiliathStatue01

	SelectPortrait = BPGOsgiliath

	; *** ART Parameters ***
		Draw = W3DScriptedModelDraw ModuleTag_01
			OkToChangeModelColor = Yes
			
			StaticModelLODMode = yes
			
			DefaultModelConditionState
				Model = OSBsta01
			End
		
		;    WallBoundsMesh = GBMTWallAPTop
		End


	; *** AUDIO Parameters ***

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone


	; ***DESIGN parameters ***

		DisplayName      = OBJECT:Ruins
		EditorSorting   = STRUCTURE

		ArmorSet
			Conditions        = None
			Armor             = NoArmor
			DamageFX          = None
		End

	; *** ENGINEERING Parameters ***  
		KindOf                = STRUCTURE IMMOBILE 
		RadarPriority = STRUCTURE
		Body                  = ActiveBody ModuleTag_03
			MaxHealth       = 2000.0
		End

		; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
		; never truly destroyed, even when reduced to zero health. Also note that garrisonable
		; buildings automatically stick around because GarrisonContain has it's own DieModule
		Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 3000
		End
		  
		Geometry              = BOX
		GeometryMajorRadius   = 12.0
		GeometryMinorRadius   = 20.0
		GeometryHeight        = 72.0
		GeometryIsSmall       = No
		;GeometryRotationAnchorOffset = X:1037.871 Y:0
		Shadow                = SHADOW_VOLUME
	End
;------------------------------------------------------------
;------------------------------------------------------------
Object OsgiliathStatue02

	SelectPortrait = BPGOsgiliath

	; *** ART Parameters ***
		Draw = W3DScriptedModelDraw ModuleTag_01
			OkToChangeModelColor = Yes
			
			StaticModelLODMode = yes
			
			DefaultModelConditionState
				Model = OSBsta02
			End
		
		;    WallBoundsMesh = GBMTWallAPTop
		End


	; *** AUDIO Parameters ***

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone


	; ***DESIGN parameters ***

		DisplayName      = OBJECT:Ruins
		EditorSorting   = STRUCTURE

		ArmorSet
			Conditions        = None
			Armor             = NoArmor
			DamageFX          = None
		End

	; *** ENGINEERING Parameters ***  
		KindOf                = STRUCTURE IMMOBILE 
		RadarPriority = STRUCTURE
		Body                  = ActiveBody ModuleTag_03
			MaxHealth       = 2000.0
		End

		; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
		; never truly destroyed, even when reduced to zero health. Also note that garrisonable
		; buildings automatically stick around because GarrisonContain has it's own DieModule
		Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 3000
		End
		  
		Geometry              = BOX
		GeometryMajorRadius   = 8.0
		GeometryMinorRadius   = 9.6
		GeometryHeight        = 48.0
		GeometryIsSmall       = No
		;GeometryRotationAnchorOffset = X:1037.871 Y:0
		Shadow                = SHADOW_VOLUME
	End
;------------------------------------------------------------
;------------------------------------------------------------
Object OsgiliathStatue03

	SelectPortrait = BPGOsgiliath

	; *** ART Parameters ***
		Draw = W3DScriptedModelDraw ModuleTag_01
			OkToChangeModelColor = Yes
			
			StaticModelLODMode = yes
			
			DefaultModelConditionState
				Model = OSBsta03
			End
		
		;    WallBoundsMesh = GBMTWallAPTop
		End


	; *** AUDIO Parameters ***

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone


	; ***DESIGN parameters ***

		DisplayName      = OBJECT:Ruins
		EditorSorting   = STRUCTURE

		ArmorSet
			Conditions        = None
			Armor             = NoArmor
			DamageFX          = None
		End

	; *** ENGINEERING Parameters ***  
		KindOf                = STRUCTURE IMMOBILE 
		RadarPriority = STRUCTURE
		Body                  = ActiveBody ModuleTag_03
			MaxHealth       = 2000.0
		End

		; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
		; never truly destroyed, even when reduced to zero health. Also note that garrisonable
		; buildings automatically stick around because GarrisonContain has it's own DieModule
		Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 3000
		End
		  
		Geometry              = BOX
		GeometryMajorRadius   = 8.0
		GeometryMinorRadius   = 8.0
		GeometryHeight        = 40.0
		GeometryIsSmall       = No
		;GeometryRotationAnchorOffset = X:1037.871 Y:0
		Shadow                = SHADOW_VOLUME
	End
;------------------------------------------------------------
;------------------------------------------------------------
Object OsgiliathStatue04

	SelectPortrait = BPGOsgiliath

	; *** ART Parameters ***
		Draw = W3DScriptedModelDraw ModuleTag_01
			OkToChangeModelColor = Yes
			
			StaticModelLODMode = yes
			
			DefaultModelConditionState
				Model = OSBsta04
			End
		
		;    WallBoundsMesh = GBMTWallAPTop
		End


	; *** AUDIO Parameters ***

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone


	; ***DESIGN parameters ***

		DisplayName      = OBJECT:Ruins
		EditorSorting   = STRUCTURE
		; Browser = CINEMATICS UNIT
		ArmorSet
			Conditions        = None
			Armor             = NoArmor
			DamageFX          = None
		End

	; *** ENGINEERING Parameters ***  
		KindOf                = STRUCTURE IMMOBILE 
		RadarPriority = STRUCTURE
		Body                  = ActiveBody ModuleTag_03
			MaxHealth       = 2000.0
		End

		; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
		; never truly destroyed, even when reduced to zero health. Also note that garrisonable
		; buildings automatically stick around because GarrisonContain has it's own DieModule
		Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 3000
		End
		  
		Geometry              = BOX
		GeometryMajorRadius   = 24.0
		GeometryMinorRadius   = 20.0
		GeometryHeight        = 35.2
		GeometryIsSmall       = No
		;GeometryRotationAnchorOffset = X:1037.871 Y:0
		Shadow                = SHADOW_VOLUME
	End
;------------------------------------------------------------
;------------------------------------------------------------
Object OsgiliathBridgeCenter

	SelectPortrait = BPGOsgiliath

	; *** ART Parameters ***
		Draw = W3DScriptedModelDraw ModuleTag_01
			OkToChangeModelColor = Yes
			
			StaticModelLODMode = yes
			
			DefaultModelConditionState
				Model = OSBridgeC
			End
		
		    WallBoundsMesh = OSBridgeCPTop
;		    RampMesh1 = OSBridgeCPTop		    
		End


	; *** AUDIO Parameters ***

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone


	; ***DESIGN parameters ***

		DisplayName      = OBJECT:Bridge
		EditorSorting   = STRUCTURE

		ArmorSet
			Conditions        = None
			Armor             = NoArmor
			DamageFX          = None
		End

	; *** ENGINEERING Parameters ***  
		KindOf                = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE
		RadarPriority		= STRUCTURE
		Body                  = InactiveBody ModuleTag_03
		End

		; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
		; never truly destroyed, even when reduced to zero health. Also note that garrisonable
		; buildings automatically stick around because GarrisonContain has it's own DieModule
		Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 4000
		End
		  
  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= WallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

		Geometry              = BOX
		GeometryMajorRadius   = 72.8
		GeometryMinorRadius   = 76.0
		GeometryHeight        = 65.6
		GeometryIsSmall       = No
		;GeometryRotationAnchorOffset = X:1037.871 Y:0
		Shadow                = SHADOW_VOLUME
		
		GeometryContactPoint = X:-60  Y:-60 Z:60
		GeometryContactPoint = X:60  Y:-60 Z:60
		GeometryContactPoint = X:60  Y:60 Z:60
		GeometryContactPoint = X:-60  Y:60 Z:60
		GeometryContactPoint = X:0  Y:0 Z:60 Grab
	End
;------------------------------------------------------------
;------------------------------------------------------------
Object OsgiliathBridgeLeft

	SelectPortrait = BPGOsgiliath

	; *** ART Parameters ***
		Draw = W3DScriptedModelDraw ModuleTag_01
			OkToChangeModelColor = Yes
			
			StaticModelLODMode = yes
			
			DefaultModelConditionState
				Model = OSBridgeL
			End
		
		    RampMesh1 = OSBridgeLPTop
		End


	; *** AUDIO Parameters ***

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone


	; ***DESIGN parameters ***

		DisplayName      = OBJECT:Bridge
		EditorSorting   = STRUCTURE

		ArmorSet
			Conditions        = None
			Armor             = NoArmor
			DamageFX          = None
		End

	; *** ENGINEERING Parameters ***  
		KindOf                = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE
		RadarPriority		= STRUCTURE
		Body                  = InactiveBody ModuleTag_03
		End

		; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
		; never truly destroyed, even when reduced to zero health. Also note that garrisonable
		; buildings automatically stick around because GarrisonContain has it's own DieModule
		Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 5000
		End
		  
  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= WallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

		Geometry              = BOX
		GeometryMajorRadius   = 61.6
		GeometryMinorRadius   = 104.8
		GeometryHeight        = 40.0
		GeometryIsSmall       = No
		;GeometryRotationAnchorOffset = X:1037.871 Y:0
		Shadow                = SHADOW_VOLUME
		
		; left side contact points
		GeometryContactPoint = X:-65 Y:-105  Z:0 Grab
		GeometryContactPoint = X:-60 Y:-105  Z:0
		GeometryContactPoint = X:-60 Y:-50  Z:25 
		GeometryContactPoint = X:-65 Y:20 Z:0 Grab
		GeometryContactPoint = X:-60 Y:20  Z:0
		GeometryContactPoint = X:-60 Y:100  Z:40 
		
		; right side contact points
		GeometryContactPoint = X:60 Y:100  Z:40 
		GeometryContactPoint = X:60 Y:20  Z:0
		GeometryContactPoint = X:65 Y:20 Z:0 Grab
		GeometryContactPoint = X:60 Y:-50  Z:25
		GeometryContactPoint = X:60 Y:-105  Z:0
		GeometryContactPoint = X:65 Y:-105  Z:0 Grab
	End
;------------------------------------------------------------
;------------------------------------------------------------
Object OsgiliathBridgeRight

	SelectPortrait = BPGOsgiliath

	; *** ART Parameters ***
		Draw = W3DScriptedModelDraw ModuleTag_01
			OkToChangeModelColor = Yes
			
			
			StaticModelLODMode = yes
			
			DefaultModelConditionState
				Model = OSBridgeR
			End
		    RampMesh1 = OSBridgeRPTop
		End


	; *** AUDIO Parameters ***

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone


	; ***DESIGN parameters ***

		DisplayName      = OBJECT:Bridge
		EditorSorting   = STRUCTURE

		ArmorSet
			Conditions        = None
			Armor             = NoArmor
			DamageFX          = None
		End

	; *** ENGINEERING Parameters ***  
		KindOf                = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE
		RadarPriority		= STRUCTURE
		Body                  = InactiveBody ModuleTag_03
		End

		; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
		; never truly destroyed, even when reduced to zero health. Also note that garrisonable
		; buildings automatically stick around because GarrisonContain has it's own DieModule
		Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 3000
		End
		  
  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= WallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

	; need to approximate the ramp geometry here, otherwise treb projectiles explode in mid air
	Geometry              = BOX
	GeometryMajorRadius   = 61.6
	GeometryMinorRadius   = 26.2
	GeometryHeight        = 10.0
	GeometryIsSmall       = No
	GeometryOffset		  = X:0 Y:78.6 Z:0
	
	AdditionalGeometry    = BOX
	GeometryMajorRadius   = 61.6
	GeometryMinorRadius   = 26.2
	GeometryHeight        = 20.0
	GeometryIsSmall       = No
	GeometryOffset		  = X:0 Y:26.2 Z:0
	
	AdditionalGeometry    = BOX
	GeometryMajorRadius   = 61.6
	GeometryMinorRadius   = 26.2
	GeometryHeight        = 30.0
	GeometryIsSmall       = No
	GeometryOffset		  = X:0 Y:-26.2 Z:0
	
	AdditionalGeometry    = BOX
	GeometryMajorRadius   = 61.6
	GeometryMinorRadius   = 26.2
	GeometryHeight        = 40.0
	GeometryIsSmall       = No
	GeometryOffset		  = X:0 Y:-78.6 Z:0
	
	;GeometryRotationAnchorOffset = X:1037.871 Y:0
	Shadow                = SHADOW_VOLUME
	
	; left side contact points
	GeometryContactPoint = X:-65 Y:105  Z:0 Grab
	GeometryContactPoint = X:-60 Y:105  Z:0
	GeometryContactPoint = X:-60 Y:50  Z:25 
	GeometryContactPoint = X:-65 Y:-20 Z:0 Grab
	GeometryContactPoint = X:-60 Y:-20  Z:0
	GeometryContactPoint = X:-60 Y:-100  Z:40 
		
	; right side contact points
	GeometryContactPoint = X:60 Y:-100  Z:40 
	GeometryContactPoint = X:60 Y:-20  Z:0
	GeometryContactPoint = X:65 Y:-20 Z:0 Grab
	GeometryContactPoint = X:60 Y:50  Z:25
	GeometryContactPoint = X:60 Y:105  Z:0
	GeometryContactPoint = X:65 Y:105  Z:0 Grab
End
;------------------------------------------------------------


;------------------------------------------------------------
;------------------------------------------------------------
Object OsgiliathBridge2Center

	SelectPortrait = BPGOsgiliath

	; *** ART Parameters ***
		Draw = W3DScriptedModelDraw ModuleTag_01
			OkToChangeModelColor = Yes
			
			StaticModelLODMode = yes
			
			DefaultModelConditionState
				Model = OSBridge2C
			End
		
		    WallBoundsMesh = OSBridgeCPTop
;		    RampMesh1 = OSBridgeCPTop		    
		End


	; *** AUDIO Parameters ***

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone


	; ***DESIGN parameters ***

		DisplayName      = OBJECT:Bridge
		EditorSorting   = STRUCTURE

		ArmorSet
			Conditions        = None
			Armor             = NoArmor
			DamageFX          = None
		End

	; *** ENGINEERING Parameters ***  
		KindOf                = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE
		RadarPriority		= STRUCTURE
		Body                  = InactiveBody ModuleTag_03
		End

		; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
		; never truly destroyed, even when reduced to zero health. Also note that garrisonable
		; buildings automatically stick around because GarrisonContain has it's own DieModule
		Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 4000
		End
		  
  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= WallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

		Geometry              = BOX
		GeometryMajorRadius   = 72.8
		GeometryMinorRadius   = 76.0
		GeometryHeight        = 65.6
		GeometryIsSmall       = No
		;GeometryRotationAnchorOffset = X:1037.871 Y:0
		Shadow                = SHADOW_VOLUME
		
		GeometryContactPoint = X:-60  Y:-60 Z:60
		GeometryContactPoint = X:60  Y:-60 Z:60
		GeometryContactPoint = X:60  Y:60 Z:60
		GeometryContactPoint = X:-60  Y:60 Z:60
		GeometryContactPoint = X:0  Y:0 Z:60 Grab
	End
;------------------------------------------------------------
;------------------------------------------------------------
Object OsgiliathBridge2Left

	SelectPortrait = BPGOsgiliath

	; *** ART Parameters ***
		Draw = W3DScriptedModelDraw ModuleTag_01
			OkToChangeModelColor = Yes
			
			StaticModelLODMode = yes
			
			DefaultModelConditionState
				Model = OSBridge2L
			End
		
		    RampMesh1 = OSBridgeLPTop
		End


	; *** AUDIO Parameters ***

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone


	; ***DESIGN parameters ***

		DisplayName      = OBJECT:Bridge
		EditorSorting   = STRUCTURE

		ArmorSet
			Conditions        = None
			Armor             = NoArmor
			DamageFX          = None
		End

	; *** ENGINEERING Parameters ***  
		KindOf                = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE
		RadarPriority		= STRUCTURE
		Body                  = InactiveBody ModuleTag_03
		End

		; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
		; never truly destroyed, even when reduced to zero health. Also note that garrisonable
		; buildings automatically stick around because GarrisonContain has it's own DieModule
		Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 5000
		End
		  
  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= WallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

		Geometry              = BOX
		GeometryMajorRadius   = 61.6
		GeometryMinorRadius   = 104.8
		GeometryHeight        = 40.0
		GeometryIsSmall       = No
		;GeometryRotationAnchorOffset = X:1037.871 Y:0
		Shadow                = SHADOW_VOLUME
		
		; left side contact points
		GeometryContactPoint = X:-65 Y:-105  Z:0 Grab
		GeometryContactPoint = X:-60 Y:-105  Z:0
		GeometryContactPoint = X:-60 Y:-50  Z:25 
		GeometryContactPoint = X:-65 Y:20 Z:0 Grab
		GeometryContactPoint = X:-60 Y:20  Z:0
		GeometryContactPoint = X:-60 Y:100  Z:40 
		
		; right side contact points
		GeometryContactPoint = X:60 Y:100  Z:40 
		GeometryContactPoint = X:60 Y:20  Z:0
		GeometryContactPoint = X:65 Y:20 Z:0 Grab
		GeometryContactPoint = X:60 Y:-50  Z:25
		GeometryContactPoint = X:60 Y:-105  Z:0
		GeometryContactPoint = X:65 Y:-105  Z:0 Grab
	End
;------------------------------------------------------------
;------------------------------------------------------------
Object OsgiliathBridge2Right

	SelectPortrait = BPGOsgiliath

	; *** ART Parameters ***
		Draw = W3DScriptedModelDraw ModuleTag_01
			OkToChangeModelColor = Yes
			
			
			StaticModelLODMode = yes
			
			DefaultModelConditionState
				Model = OSBridge2R
			End
		    RampMesh1 = OSBridgeRPTop
		End


	; *** AUDIO Parameters ***

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone


	; ***DESIGN parameters ***

		DisplayName      = OBJECT:Bridge
		EditorSorting   = STRUCTURE

		ArmorSet
			Conditions        = None
			Armor             = NoArmor
			DamageFX          = None
		End

	; *** ENGINEERING Parameters ***  
		KindOf                = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE
		RadarPriority		= STRUCTURE
		Body                  = InactiveBody ModuleTag_03
		End

		; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
		; never truly destroyed, even when reduced to zero health. Also note that garrisonable
		; buildings automatically stick around because GarrisonContain has it's own DieModule
		Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 3000
		End
		  
  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= WallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

	; need to approximate the ramp geometry here, otherwise treb projectiles explode in mid air 
	Geometry              = BOX
	GeometryMajorRadius   = 110 ;61.6
	GeometryMinorRadius   = 26.2
	GeometryHeight        = 10.0
	GeometryIsSmall       = No
	GeometryOffset		  = X:0 Y:78.6 Z:0
	
	AdditionalGeometry    = BOX
	GeometryMajorRadius   = 110 ;61.6
	GeometryMinorRadius   = 26.2
	GeometryHeight        = 20.0
	GeometryIsSmall       = No
	GeometryOffset		  = X:0 Y:26.2 Z:0
	
	AdditionalGeometry    = BOX
	GeometryMajorRadius   = 110 ;61.6
	GeometryMinorRadius   = 26.2
	GeometryHeight        = 30.0
	GeometryIsSmall       = No
	GeometryOffset		  = X:0 Y:-26.2 Z:0
	
	AdditionalGeometry    = BOX
	GeometryMajorRadius   = 110 ;61.6
	GeometryMinorRadius   = 26.2
	GeometryHeight        = 40.0
	GeometryIsSmall       = No
	GeometryOffset		  = X:0 Y:-78.6 Z:0
	
	;GeometryRotationAnchorOffset = X:1037.871 Y:0
	Shadow                = SHADOW_VOLUME
	
	; left side contact points
	GeometryContactPoint = X:-65 Y:105  Z:0 Grab
	GeometryContactPoint = X:-60 Y:105  Z:0
	GeometryContactPoint = X:-60 Y:50  Z:25 
	GeometryContactPoint = X:-65 Y:-20 Z:0 Grab
	GeometryContactPoint = X:-60 Y:-20  Z:0
	GeometryContactPoint = X:-60 Y:-100  Z:40 
		
	; right side contact points
	GeometryContactPoint = X:60 Y:-100  Z:40 
	GeometryContactPoint = X:60 Y:-20  Z:0
	GeometryContactPoint = X:65 Y:-20 Z:0 Grab
	GeometryContactPoint = X:60 Y:50  Z:25
	GeometryContactPoint = X:60 Y:105  Z:0
	GeometryContactPoint = X:65 Y:105  Z:0 Grab
End
;------------------------------------------------------------



;------------------------------------------------------------
Object GondorIthilienBridge

	; *** ART Parameters ***
		Draw = W3DScriptedModelDraw ModuleTag_01
			OkToChangeModelColor = Yes
			DefaultModelConditionState
				Model = GBITHBRDG
			End
		
		    WallBoundsMesh	= OSBridgeCPTop
		    RampMesh1		= OSBridgeRamp01
		    RampMesh2		= OSBridgeRamp02		    
		End


	; *** AUDIO Parameters ***

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone


	; ***DESIGN parameters ***

		DisplayName      = OBJECT:Bridge
		EditorSorting   = STRUCTURE

		ArmorSet
			Conditions        = None
			Armor             = NoArmor
			DamageFX          = None
		End

	; *** ENGINEERING Parameters ***  
		KindOf                = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE
		RadarPriority		= STRUCTURE
		Body                  = InactiveBody ModuleTag_03
		End

		; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
		; never truly destroyed, even when reduced to zero health. Also note that garrisonable
		; buildings automatically stick around because GarrisonContain has it's own DieModule
		Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 4000
		End
		  
  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= WallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

		Geometry              = BOX
		GeometryMajorRadius   = 76.0
		GeometryMinorRadius   = 280.0
		GeometryHeight        = 65.6
		GeometryIsSmall       = No
		;GeometryRotationAnchorOffset = X:1037.871 Y:0
		Shadow                = SHADOW_VOLUME
		
		
End

;------------------------------------------------------------
Object GondorIthilienBridge2

	; *** ART Parameters ***
		Draw = W3DScriptedModelDraw ModuleTag_01
			OkToChangeModelColor = Yes
			DefaultModelConditionState
				Model = GBITHBRDG2
			End
		
		    WallBoundsMesh	= OSBridgeCPTop
		    RampMesh1		= OSBridgeRamp01
		    RampMesh2		= OSBridgeRamp02		    
		End


	; *** AUDIO Parameters ***

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone


	; ***DESIGN parameters ***

		DisplayName      = OBJECT:Bridge
		EditorSorting   = STRUCTURE

		ArmorSet
			Conditions        = None
			Armor             = NoArmor
			DamageFX          = None
		End

	; *** ENGINEERING Parameters ***  
		KindOf                = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE
		RadarPriority		= STRUCTURE
		Body                  = InactiveBody ModuleTag_03
		End

		; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
		; never truly destroyed, even when reduced to zero health. Also note that garrisonable
		; buildings automatically stick around because GarrisonContain has it's own DieModule
		Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 4000
		End
		  
  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= WallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

		Geometry              = BOX
		GeometryMajorRadius   = 76.0
		GeometryMinorRadius   = 275.0
		GeometryHeight        = 30
		GeometryIsSmall       = No
		;GeometryRotationAnchorOffset = X:1037.871 Y:0
		Shadow                = SHADOW_VOLUME
		
		GeometryContactPoint = X:-79  Y:-270 Z:0 Grab
		GeometryContactPoint = X:-50  Y:-260 Z:8
		GeometryContactPoint = X:50  Y:0 Z:30 Grab
		GeometryContactPoint = X:-50  Y:260 Z:8
		GeometryContactPoint = X:-79  Y:275 Z:0 Grab
		GeometryContactPoint = X:-50  Y:260 Z:8
		GeometryContactPoint = X:50  Y:260 Z:8
		GeometryContactPoint = X:79  Y:275 Z:0 Grab
		GeometryContactPoint = X:50  Y:260 Z:8
		GeometryContactPoint = X:-50  Y:0 Z:30 Grab
		GeometryContactPoint = X:50  Y:-260 Z:8
		GeometryContactPoint = X:79  Y:-275 Z:0 Grab
End

;---------------------------------------------------------
Object GBCSigFire

	SelectPortrait = BPGSignalFire

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    DefaultModelConditionState
      Model = GBCSigFire
		ParticleSysBone = EMBERBONE SigFire FollowBone:Yes
		ParticleSysBone = EMBERBONE burningTreeSmoke FollowBone:Yes
		ParticleSysBone = EMBERBONE burningTreeEmbers FollowBone:Yes
		ParticleSysBone = EMBERBONE SigFireGlow FollowBone:Yes
    End

  End

  ; *** AUDIO Parameters ***

	SoundAmbient		= Campfire1AmbientLoop


  ; ***DESIGN parameters ***

  DisplayName      = OBJECT:SignalFire
  Side = Gondor
  EditorSorting = STRUCTURE
; Browser = CINEMATICS UNIT

  ArmorSet
    Conditions        = None
    Armor             = NoArmor
    DamageFX          = None
  End

  ; *** ENGINEERING Parameters ***  
  ;;KindOf                = STRUCTURE IMMOBILE ;Old sets before this was used as BASE of Minas Tirith in SP and MP
  KindOf              = SELECTABLE STRUCTURE IMMOBILE SCORE CASTLE_KEEP MP_COUNT_FOR_VICTORY 
  RadarPriority = STRUCTURE
  Body                  = ActiveBody ModuleTag_03
    MaxHealth       = 2000.0
  End

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
  Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 2500
  End
  
  Geometry              = BOX
  GeometryMajorRadius   = 8.0
  GeometryMinorRadius   = 8.0
  GeometryHeight        = 40.0
  GeometryIsSmall       = No
  ;GeometryRotationAnchorOffset = X:1037.871 Y:0
  Shadow                = SHADOW_VOLUME
End

;------------------------------------------------------------------------------
;Elven grove object
Object ElvenGrove

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
;      Model =  PTElvenWdHC
      Model = NONE
      ParticleSysBone = None TaintHCPing HouseColor:yes
    End
    
     MultiPlayerOnly = Yes
  End 

  ; *** AUDIO Parameters ***

	;SoundAmbient		= ElvenGroveAmbientLoop


  ; ***DESIGN parameters ***

  DisplayName     = OBJECT:ElvenGrove
  Side            = Gondor
  EditorSorting   = STRUCTURE
;  ThreatLevel = 1.0

;  CommandSet          = ElvenGroveCommandSet

  ; *** ENGINEERING Parameters ***  
  RadarPriority       = NOT_ON_RADAR
  KindOf              = PRELOAD UNATTACKABLE IMMOBILE TAINT

	Behavior = AttributeModifierAuraUpdate ModuleTag_ElvenGroveOne
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= ElvenWoodPositiveSpell
		RefreshDelay	= 2000
		Range			= 200
		ObjectFilter	= ANY +INFANTRY +CAVALRY -STRUCTURE -BASE_FOUNDATION -HERO
		RunWhileDead	= Yes
		RequiredConditions = ELVEN_WOOD ; In case elven wood and taint overlap, this flag makes it double check the cell type of the target
	End	

	Behavior = AttributeModifierAuraUpdate ModuleTag_ElvenGroveTwo
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= ElvenWoodNegativeSpell
		RefreshDelay	= 2000
		Range			= 200
		TargetEnemy		= Yes
		ObjectFilter	= ANY +INFANTRY +CAVALRY -STRUCTURE -BASE_FOUNDATION
		AntiCategory	= LEADERSHIP ; This means cancel all previous leadership bonuses
;		AntiFX			= FX_AntiLeadership ; FX for anti category
		RunWhileDead	= Yes
		RequiredConditions = ELVEN_WOOD
	End	

;  Geometry = BOX
;  GeometryMajorRadius = 80.0
;  GeometryMinorRadius = 88.0
;  GeometryHeight = 40.0
;  GeometryIsSmall = No

  Shadow              = SHADOW_DECAL
  ShadowSizeX = 120
  ShadowSizeY = 120
End

;------------------------------------------------------------------------------
;------------------------------------------------------------------------------
;
; HELMS DEEP
;
;------------------------------------------------------------------------------
;------------------------------------------------------------------------------



;------------------------------------------------------------------------------ 
;Helms Deep Gate
Object HelmsDeepGate

	SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes

    DefaultModelConditionState
      Model = RBHDIGateTemp		
    End
    
	IdleAnimationState
		Animation = IDLE
			AnimationName			=	RBHDIGateTemp.RBHDIGateTemp
			AnimationMode			=	ONCE	
			AnimationBlendTime		= 0
		End		
	End	
	    
        ;--damaged building
    ModelConditionState  = DESTROYED_FRONT
      Model         = RBHDIGateTemp  
;		ParticleSysBone FireSmall01 FireBuildingSmall
    End
    AnimationState = DESTROYED_FRONT
;      BeginScript
;        CurDrawableHideSubObject("GBBARRACKSDP1")
;      EndScript
    End
    
    ModelConditionState  = DESTROYED_RIGHT
      Model         = RBHDIGateTemp  
;		ParticleSysBone FireSmall01 FireBuildingSmall
    End

    AnimationState = DESTROYED_RIGHT
;      BeginScript
;        CurDrawableHideSubObject("GBBARRACKSDP2")
;      EndScript
    End
    

    ModelConditionState  = DESTROYED_BACK
      Model         = RBHDIGateTemp  
;		ParticleSysBone FireSmall01 FireBuildingSmall
    End

    AnimationState = DESTROYED_BACK
;      BeginScript
;        CurDrawableHideSubObject("GBBARRACKSDP3")
;      EndScript
    End

	ModelConditionState  = DESTROYED_LEFT
      Model         = RBHDIGateTemp  
;		ParticleSysBone FireSmall01 FireBuildingSmall
    End
    
    AnimationState = DESTROYED_LEFT
;      BeginScript
;        CurDrawableHideSubObject("GBBARRACKSDP4")
;      EndScript
    End
    
    
    ModelConditionState  = DAMAGED
      Model         = RBHDIGateTemp  
;		ParticleSysBone FireSmall01 FireBuildingSmall
    End
    AnimationState = DAMAGED
	EnteringStateFX	= FX_BuildingDamaged
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = RBHDIGateTemp  
;		ParticleSysBone FireSmall01 FireBuildingSmall
    End
    AnimationState = REALLYDAMAGED
	EnteringStateFX	= FX_BuildingReallyDamaged
    End

    ModelConditionState  = RUBBLE
      Model         = RBHDIGateTemp  
 ;     ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End
    
    AnimationState = RUBBLE
      BeginScript
 ;       CurDrawableHideSubObject("GBBARRACKSDP1")
 ;       CurDrawableHideSubObject("GBBARRACKSDP2")
 ;       CurDrawableHideSubObject("GBBARRACKSDP3")
 ;       CurDrawableHideSubObject("GBBARRACKSDP4")
      EndScript
    End

    ModelConditionState  = POST_RUBBLE
		Model         = None
		ParticleSysBone NONE SmokeBuildingMediumRubble
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
		ParticleSysBone NONE SmokeBuildingMediumRubble
    End

    
End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:RBHelmsDeepGateDoorBig
  Side                = Rohan
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 500
  BuildTime           = 15.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160


;  CommandSet          = GondorBarracksCommandSet

 
  ; *** AUDIO Parameters ***

	SoundOnDamaged		= BuildingLightDamageStone
	SoundOnReallyDamaged	= BuildingHeavyDamageStone

	;  VoiceSelect         = GondorBarracksSelect
	 
	;  UnitSpecificSounds
	;  UnderConstruction     = UnderConstructionLoop
	;  End
 

	; *** ENGINEERING Parameters ***

  RadarPriority       = NOT_ON_RADAR
	KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE     


	Behavior = CastleMemberBehavior ModuleTag_CMB
		CountsForEvaCastleBreached = Yes
	End 

	Body						= ActiveBody ModuleTag_05
		MaxHealth				= 1000.0
		MaxHealthDamaged		= 700.0
		MaxHealthReallyDamaged  = 300.0
	End

	ArmorSet
		Conditions        = None
		Armor             = HelmsDeepGates
		DamageFX          = GateDamageFX
	End

	Behavior = ProductionUpdate ModuleTag_06
		; nothing
	End
  
	Behavior                  = StructureCollapseUpdate ModuleTag_08
		MinCollapseDelay        = 000
		MaxCollapseDelay        = 000
		CollapseDamping         = .5
		MaxShudder              = 0.6
		MinBurstDelay           = 250
		MaxBurstDelay           = 800
		BigBurstFrequency       = 4
		FXList                  = INITIAL   FX_StructureMediumCollapse
		FXList                  = ALMOST_FINAL  FX_StructureAlmostCollapse
		DestroyObjectWhenDone	= Yes
		CollapseHeight			= 155
	End
  
	AttackContactPoint = X:-24 Y:-24 Z:92

	Geometry              = BOX
	GeometryMajorRadius   = 80.0
	GeometryMinorRadius   = 16.0
	GeometryHeight        = 60
;  GeometryOffset		= X:0 Y:-28 Z:0
	GeometryIsSmall       = No
	  
	Shadow                = SHADOW_VOLUME
End

;------------------------------------------------------------------------------
;Helms Deep Arcade
Object HelmsDeepArcade

	SelectPortrait = BPRHelmsDeep
 
	; *** ART Parameters ***
	;  SelectPortrait         = SNReactor_L
	;  ButtonImage            = SNReactor
	;day

	Draw = W3DScriptedModelDraw ModuleTag_Draw
	  
		ExtraPublicBone = ARROW_01
		ExtraPublicBone = ARROW_02
		ExtraPublicBone = ARROW_03
		ExtraPublicBone = ARROW_04
		ExtraPublicBone = ARROW_05
		ExtraPublicBone = ARROW_06
		ExtraPublicBone = ARROW_07
		ExtraPublicBone = ARROW_08
		ExtraPublicBone = ARROW_09
		ExtraPublicBone = ARROW_10
		ExtraPublicBone = ARROW_11
		ExtraPublicBone = ARROW_12
		ExtraPublicBone = OBJECT05
  
		OkToChangeModelColor  = Yes
		UseStandardModelNames = Yes
		DefaultModelConditionState
		Model = RBHDArcade
		End
	    
		;--damaged building
	  
		ModelConditionState  = DAMAGED
		Model         = RBHDArcade_D2  
		End
		AnimationState = DAMAGED
				Animation			=	DamagedAnimation
				AnimationName		=	 RBHDArcade_D2.RBHDArcade_D2
				AnimationMode		=	ONCE
   			End
			EnteringStateFX	= FX_BuildingDamaged
		End	    
		
		ModelConditionState  = REALLYDAMAGED
			Model         = RBHDArcade_D3
		End
		AnimationState = REALLYDAMAGED
       			Animation				=	ReallyDamagedAnimation
				AnimationName		=	 RBHDArcade_D3.RBHDArcade_D3
				AnimationMode		=	ONCE
   			End
			EnteringStateFX	= FX_BuildingReallyDamaged
		End
    
		ModelConditionState  = RUBBLE
			Model         = RBHDArcade_D4  
			ParticleSysBone OBJECT05 FireBuildingLarge
			ParticleSysBone OBJECT05 SmokeBuildingLarge
		End
		AnimationState = RUBBLE
       		Animation				=	RubbleAnimation
				AnimationName		=	 RBHDArcade_D4.RBHDArcade_D4
				AnimationMode		=	ONCE
   			End
			EnteringStateFX = FX_MinWallATransitionReallyDamaged
		End
			    
	        
	End
	  
	PlacementViewAngle  = 0
 
	; ***DESIGN parameters ***
	DisplayName         = OBJECT:HelmsDeepArcade
	Side                = Rohan
	EditorSorting       = STRUCTURE
	Browser = REGION Helms_Deep STRUCTURE
	ThreatLevel = 10.0
	 
	BuildCost           = 1
	BuildTime           = 5.0           ; in seconds
	VisionRange         = 160.0          ; Shroud clearing distance
	ShroudClearingRange = 160

	ArmorSet
		Conditions        = None
		Armor             = StructureArmor
		DamageFX          = None
	End

	CommandSet			= HelmsDeepArcadeCommandSet


	; *** AUDIO Parameters ***

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone


	;  VoiceSelect         = NuclearReactorSelect
	 
	;  UnitSpecificSounds
	;  UnderConstruction     = UnderConstructionLoop
	;  End

 
	; *** ENGINEERING Parameters ***
	
	RadarPriority       = STRUCTURE
	KindOf              = VITAL_FOR_BASE_SURVIVAL PRELOAD SELECTABLE STRUCTURE IMMOBILE SCORE CASTLE_KEEP MP_COUNT_FOR_VICTORY CAN_ATTACK FS_FACTORY AUTO_RALLYPOINT; GARRISON  GARRISONABLE_UNTIL_DESTROYED 

	Behavior = GettingBuiltBehavior ModuleTag_GBB
		WorkerName	= GondorWorkerNoSelect
		SpawnTimer  = 120
		RebuildWhenDead = Yes
	End

	Behavior = CastleMemberBehavior ModuleTag_CMB
	End 

	Body                  = ActiveBody ModuleTag_B_03
		MaxHealth       = 6000.0
		MaxHealthDamaged = 3500
		MaxHealthReallyDamaged = 2000
	End
  
  	;-----------------------------------------------
	;Used for hero revival and initial construction     
	Behavior = ProductionUpdate ProductionUpdateModuleTag
		; nothing, but is required if we have any Object-level Upgrades!
	End
	Behavior = QueueProductionExitUpdate ModuleTag_QueuePEU
		UnitCreatePoint   = X:0.0 Y:30.0 Z:0.0
		NaturalRallyPoint = X:0.0 Y:-50.0 Z:0.0;NaturalRallyPointX must always match GeometryMajorRadius! 
		ExitDelay = 300 ;Handles delays between units if multiple produced at a time. 
	End  
	;-----------------------------------------------


;	Behavior            = HordeGarrisonContain ModuleTag_hordeGarrison
;		ObjectStatusOfContained	= UNSELECTABLE CAN_ATTACK ENCLOSED
;		ContainMax              = 4
;		MaxHordeCapacity        = 4
;		DamagePercentToUnits    = 100%
;		PassengerFilter			= ANY +INFANTRY +HORDE +CAVALRY
;		AllowEnemiesInside      = No
;		AllowNeutralInside      = Yes
;		NumberOfExitPaths       = 1 ; Defaults to 1.  Set 0 to not use ExitStart/ExitEnd, set higher than 1 to use ExitStart01-nn/ExitEnd01-nn
;		PassengerBonePrefix     = PassengerBone:ARROW_ KindOf:INFANTRY
;		PassengerBonePrefix     = PassengerBone:ARROW_ KindOf:CAVALRY
;		EntryOffset				= X:0.0 Y:-50.0 Z:0.0
;		
;		;PassengersTestCollisionHeight = 80
;		;Slots                         = 1
;		;EnterSound                     = GarrisonEnter
;		;ExitSound                      = GarrisonExit
;		;ExitDelay               = 250
;		;GoAggressiveOnExit      = Yes ; AI Will tell people to set their mood to Aggressive on exiting
;		;ForceOrientationContainer = No  ; otherwise contained units can't orient themselves towards their targets...
;	End 
		 
	Geometry              = BOX
	GeometryMajorRadius   = 105.0
	GeometryMinorRadius   = 37.5
	GeometryHeight        = 100.0
	GeometryOffset		  = X:0 Y:30 Z:0
	GeometryIsSmall       = No
	Shadow                = SHADOW_VOLUME
End


;------------------------------------------------------------------------------
;Helms Deep Culvert
Object HelmsDeepCulvert

SelectPortrait = BPRHelmsDeep
 
	; *** ART Parameters ***
	;  SelectPortrait         = SNReactor_L
	;  ButtonImage            = SNReactor
	;day

	;----------------------------------------------------------------------------------------------
	Draw = W3DScriptedModelDraw ModuleTag_Draw
		OkToChangeModelColor  = Yes
		UseStandardModelNames = Yes
		ExtraPublicBone = SIEGELADDER
       
		WallBoundsMesh = P1
		RampMesh1 = P2
		RampMesh2 = P3        
		
		DefaultModelConditionState
			Model = RBHDDWCulv
		End
		
		;--damaged building  
		ModelConditionState  = DAMAGED
		Model         = RBHDDWCulv_D1  
		End
	    
	    
		AnimationState = DAMAGED
		EnteringStateFX	= FX_BuildingDamaged
		End

		ModelConditionState  = REALLYDAMAGED
			Model         = RBHDDWCulv_D2
		End
		AnimationState = REALLYDAMAGED
       				Animation		=	ReallyDamagedanimation
				AnimationName		=	RBHDDWCulv_D2.RBHDDWCulv_D2
				AnimationMode		=	ONCE
				AnimationSpeedFactorRange = 0.5 0.5
			End
			EnteringStateFX = FX_MinWallATransitionReallyDamaged
		End

		ModelConditionState  = RUBBLE
		Model         = RBHDDWCulv_D3
		End
	    
		AnimationState = RUBBLE
			Animation				=	Death
				AnimationName		=	RBHDDWCulv_D3.RBHDDWCulv_D3
				AnimationMode		=	ONCE
				AnimationSpeedFactorRange = 0.5 0.5
			End
			EnteringStateFX = FX_MinWallATransitionRubble
		End      

		ModelConditionState  = POST_RUBBLE
			Model         = None
		End

		ModelConditionState  = POST_COLLAPSE
			Model         = None
		End
	End

	;----------------------------------------------------------------------------------------------
	Draw = W3DScriptedModelDraw Draw_PosternGate
		ExtraPublicBone = Post01
		ExtraPublicBone = Post02
		ExtraPublicBone = Post03
		ExtraPublicBone = Post04

		DefaultModelConditionState
			Model			= RBHDDWCulvPst
		End

		IdleAnimationState
			BeginScript
				CurDrawableHideModule("Draw_PosternGate")
			EndScript
		End

		AnimationState = RUBBLE
			BeginScript
				CurDrawableHideModule("Draw_PosternGate")
			EndScript
		End

		AnimationState = UPGRADE_POSTERN_GATE
			BeginScript
				CurDrawableShowModule("Draw_PosternGate")
			EndScript
			Animation
				AnimationName = RBHDDWCulvPst.RBHDDWCulvPst
				AnimationMode = ONCE
			End
			EnteringStateFX = FX_BuildingContructDustCulvert
		End
	End
  
	PlacementViewAngle  = 0
	 
	; ***DESIGN parameters ***
	DisplayName	= OBJECT:HelmsDeepCulvert
	Side			= Rohan
	EditorSorting	= STRUCTURE
	Browser		= REGION Helms_Deep STRUCTURE
	ThreatLevel	= 1.0
	 
	BuildCost           = 1
	BuildTime           = 5.0           ; in seconds
	VisionRange         = 160.0          ; Shroud clearing distance
	ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone

;  VoiceSelect         = NuclearReactorSelect
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 

	; *** ENGINEERING Parameters ***

	RadarPriority	= NOT_ON_RADAR
	KindOf			= STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE SELECTABLE 
 	CommandSet		= PosternGateCommandSet

	; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
	; never truly destroyed, even when reduced to zero health. Also note that garrisonable
	; buildings automatically stick around because GarrisonContain has it's own DieModule
	Behavior = KeepObjectDie ModuleTag_IWantRubble
	End

	Behavior = CastleMemberBehavior ModuleTag_CMB
		CountsForEvaCastleBreached = Yes
	End 

	Behavior = SiegeDockingBehavior ModuleTag_SiegeDocking
	End
	
	Behavior = DynamicPortalBehaviour PosternGatePortal
		TriggeredBy				= Upgrade_PosternGate
		ConflictsWith			= Upgrade_OpenGarrison Upgrade_TrebuchetTurret
		CustomAnimAndDuration	= AnimState:UPGRADE_POSTERN_GATE AnimTime:0
		
		AllowKindOf		= INFANTRY CAVALRY
		RejectKindOf	= MONSTER MACHINE ARMY_OF_DEAD
		BonePrefix		= Post
		NumberOfBones	= 4
		WayPoint		= Index:0	Type:Walk	; 0
		WayPoint		= Index:1	Type:Walk	; 1
		WayPoint		= Index:2	Type:Walk	; 2
		WayPoint		= Index:3	Type:Walk	; 3
		WayPoint		= Index:2	Type:Walk	; 4
		WayPoint		= Index:1	Type:Walk	; 5
		Link			= From:0 Via:4 Via:5 To:3
		Link			= From:3 Via:1 Via:2 To:0
	End
	
	Behavior = ProductionUpdate ProductionUpdateModuleTag
		; nothing, but is required if we have any Object-level Upgrades!
	End

	Body                  = ActiveBody ModuleTag_B_03
		MaxHealth       = 6000.0
		MaxHealthDamaged = 3000
		MaxHealthReallyDamaged = 1000
	    
		GrabObject = EntThrownBuildingRock
		GrabFX = FX_WallGrab
		GrabDamage = 490
		GrabOffset = X:16 Y:0    
	End

	ArmorSet
		Conditions        = None
		Armor             = HelmsDeepWalls
		DamageFX          = None
	End

;	Behavior            = DestroyDie ModuleTag_07
;		;nothing
;	End
 
; 	Behavior = FireWeaponWhenDeadBehavior FireDeadTag1
;		DeathTypes		= ALL
;		StartsActive	= Yes
;		DeathWeapon		= WallDeath
;	End	
 
  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= HelmsDeepWallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

	GeometryContactPoint = X:80 Y:0 Z:60 Menu ;<-- where to draw the radial menu

	Geometry              = BOX
	GeometryMajorRadius   = 222.0
	GeometryMinorRadius   = 46.0
	GeometryHeight        = 62.0
	GeometryOffset		  = X:0 Y:12 Z:0	
	GeometryIsSmall       = No
	Shadow                = SHADOW_VOLUME
	
	;HelmsDeepCulvert Grab points for rock-wielding ents
	GeometryContactPoint = X:180  Y:65  Z:0 Grab
	GeometryContactPoint = X:180  Y:-40 Z:0 Grab
	GeometryContactPoint = X:180  Y:-30 Z:10 
	GeometryContactPoint = X:120  Y:-30 Z:60 
	GeometryContactPoint = X:60   Y:-30 Z:10 
	GeometryContactPoint = X:0    Y:-30 Z:60
	GeometryContactPoint = X:-60   Y:-30 Z:10
	GeometryContactPoint = X:-120  Y:-30 Z:60
	GeometryContactPoint = X:-180  Y:-30 Z:10 
	GeometryContactPoint = X:-180 Y:-40 Z:0 Grab
	GeometryContactPoint = X:-180 Y:60  Z:0 Grab
End



;------------------------------------------------------------------------------
;Helms Deep Section Ai
Object HelmsDeepSectionAi

SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
	ExtraPublicBone = SIEGELADDER

    DefaultModelConditionState
      Model = RBHDDWSecA
    End

;--damaged building
  
    ModelConditionState  = DAMAGED
      Model         = RBHDDWSecA_D1  
    End
    
    
    AnimationState = DAMAGED
      EnteringStateFX = FX_MinWallATransitionDamaged
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = RBHDDWSecA_D2
    End
    AnimationState = REALLYDAMAGED
	       	Animation		=	ReallyDamagedanimation
		AnimationName		=	RBHDDWSecA_D2.RBHDDWSecA_D2
		AnimationMode		=	ONCE
            	AnimationSpeedFactorRange = 0.5 0.5
   	End
    End

    ModelConditionState  = RUBBLE
      Model         = RBHDDWSecA_D3
    End
    
    AnimationState = RUBBLE
		Animation				=	Death
			AnimationName		=	RBHDDWSecA_D3.RBHDDWSecA_D3
			AnimationMode		=	ONCE
            AnimationSpeedFactorRange = 0.5 0.5
		End
        EnteringStateFX = FX_MinWallATransitionRubble
    End      

    ModelConditionState  = POST_RUBBLE
		Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
    End
    
    WallBoundsMesh = P1
        
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepSectionAi
  Side                = Rohan
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone

;  VoiceSelect         = NuclearReactorSelect
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 

  ; *** ENGINEERING Parameters ***

  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE ;SELECTABLE;@1
 
  Behavior = CastleMemberBehavior ModuleTag_CMB
		CountsForEvaCastleBreached = Yes
  End 

	Behavior = SiegeDockingBehavior ModuleTag_SiegeDocking
	End

  Body                  = ActiveBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0    
  End
  
  ArmorSet
    Conditions        = None
    Armor             = HelmsDeepWalls
    DamageFX          = None
  End

	; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
	; never truly destroyed, even when reduced to zero health. Also note that garrisonable
	; buildings automatically stick around because GarrisonContain has it's own DieModule
	Behavior = KeepObjectDie ModuleTag_IWantRubble
	End

;  Behavior            = DestroyDie ModuleTag_07
;    ;nothing
;  End
 
  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= HelmsDeepWallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

; 	Behavior = FireWeaponWhenDeadBehavior FireDeadTag1
;		DeathTypes		= ALL
;		StartsActive	= Yes
;		DeathWeapon		= WallDeath
;	End	

	Geometry              = BOX
	GeometryMajorRadius   = 115.0
	GeometryMinorRadius   = 50.0
	GeometryHeight        = 60.0
	GeometryOffset		  = X:0 Y:15.0 Z:0
	
	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 60.0
	GeometryOffset		  = X:64 Y:20.0 Z:0
	
	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 60.0
	GeometryOffset		  = X:-64 Y:20.0 Z:0
	
	
	GeometryIsSmall       = No
	Shadow                = SHADOW_VOLUME
  
  	GeometryContactPoint = X:-90  Y:70  Z:0 Grab
	GeometryContactPoint = X:-90  Y:-40 Z:0 Grab
	GeometryContactPoint = X:-90  Y:-30 Z:10 
	GeometryContactPoint = X:-60  Y:-30 Z:60 
	GeometryContactPoint = X:-30   Y:-30 Z:10 
	GeometryContactPoint = X:0    Y:-30 Z:60
	GeometryContactPoint = X:30   Y:-30 Z:10
	GeometryContactPoint = X:60  Y:-30 Z:60
	GeometryContactPoint = X:90  Y:-30 Z:10 
	GeometryContactPoint = X:90 Y:-40 Z:0 Grab
	GeometryContactPoint = X:90 Y:70  Z:0 Grab
End


;------------------------------------------------------------------------------
;Helms Deep Section B
Object HelmsDeepSectionB

SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
	ExtraPublicBone = SIEGELADDER

    DefaultModelConditionState
      Model = RBHDDWSecB
    End
    
    ;--damaged building
  
    ModelConditionState  = DAMAGED
      Model         = RBHDDWSecB_D1  
    End
    
    
    AnimationState = DAMAGED
      EnteringStateFX = FX_MinWallATransitionDamaged
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = RBHDDWSecB_D2
    End
    AnimationState = REALLYDAMAGED
       		Animation		=	ReallyDamagedanimation
		AnimationName		=	RBHDDWSecB_D2.RBHDDWSecB_D2
		AnimationMode		=	ONCE
        	AnimationSpeedFactorRange = 0.5 0.5
   	End
        EnteringStateFX = FX_MinWallATransitionReallyDamaged
    End

    ModelConditionState  = RUBBLE
      Model         = RBHDDWSecB_D3
    End
    
    AnimationState = RUBBLE
		Animation				=	Death
			AnimationName		=	RBHDDWSecB_D3.RBHDDWSecB_D3
			AnimationMode		=	ONCE
            AnimationSpeedFactorRange = 0.5 0.5
		End
        EnteringStateFX = FX_MinWallATransitionRubble
    End      

    ModelConditionState  = POST_RUBBLE
		Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
    End
            
    WallBoundsMesh = P1
    
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepSectionB
  Side                = Rohan
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone

;  VoiceSelect         = NuclearReactorSelect
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 

  ; *** ENGINEERING Parameters ***

  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE ;SELECTABLE;@1 
 
  Behavior = CastleMemberBehavior ModuleTag_CMB
		CountsForEvaCastleBreached = Yes
  End 

	Behavior = SiegeDockingBehavior ModuleTag_SiegeDocking
	End

  Body                  = ActiveBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0    
  End

  ArmorSet
    Conditions        = None
    Armor             = HelmsDeepWalls
    DamageFX          = None
  End

	; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
	; never truly destroyed, even when reduced to zero health. Also note that garrisonable
	; buildings automatically stick around because GarrisonContain has it's own DieModule
	Behavior = KeepObjectDie ModuleTag_IWantRubble
	End

;  Behavior            = DestroyDie ModuleTag_07
;    ;nothing
;  End
 
  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= HelmsDeepWallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

	Geometry              = BOX
	GeometryMajorRadius   = 115.0
	GeometryMinorRadius   = 60.0
	GeometryHeight        = 70.0
	GeometryOffset		= X:0 Y:18.0 Z:0
	
	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 60.0
	GeometryOffset		  = X:0 Y:35.0 Z:0

	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 60.0
	GeometryOffset		  = X:75.0 Y:35.0 Z:0

	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 60.0
	GeometryOffset		  = X:-79.0 Y:32.0 Z:0	
	
	GeometryIsSmall       = No
	Shadow                = SHADOW_VOLUME
  
	GeometryContactPoint = X:75  Y:80  Z:0 Grab
	GeometryContactPoint = X:85  Y:-50  Z:0 Grab
	GeometryContactPoint = X:85  Y:-35  Z:10
	GeometryContactPoint = X:55  Y:-35  Z:60
	GeometryContactPoint = X:25  Y:-35  Z:10
	GeometryContactPoint = X:0     Y:-20  Z:60
	GeometryContactPoint = X:-25 Y:-20  Z:10
	GeometryContactPoint = X:-55 Y:-20  Z:60
	GeometryContactPoint = X:-75 Y:-20  Z:10
	GeometryContactPoint = X:-75   Y:-25  Z:0 Grab
	GeometryContactPoint = X:-75  Y:80  Z:0 Grab
End


;------------------------------------------------------------------------------
;Helms Deep Section C
Object HelmsDeepSectionC

SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes

    DefaultModelConditionState
      Model = RBHDDWSecC
    End
    
    ;--damaged building
  
    ModelConditionState  = DAMAGED
      Model         = RBHDDWSecC_D1  
    End
    
    
    AnimationState = DAMAGED
      EnteringStateFX = FX_MinWallATransitionDamaged
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = RBHDDWSecC_D2
    End
    AnimationState = REALLYDAMAGED
       		Animation				=	ReallyDamagedanimation
		AnimationName		=	 RBHDDWSecC_D2.RBHDDWSecC_D2
		AnimationMode		=	ONCE
                AnimationSpeedFactorRange = 0.5 0.5
   	End
        EnteringStateFX = FX_MinWallATransitionReallyDamaged
    End

    ModelConditionState  = RUBBLE
      Model         = RBHDDWSecC_D3
    End
    
    AnimationState = RUBBLE
		Animation				=	Death
			AnimationName		=	RBHDDWSecC_D3.RBHDDWSecC_D3
			AnimationMode		=	ONCE
            AnimationSpeedFactorRange = 0.5 0.5
		End
        EnteringStateFX = FX_MinWallATransitionRubble
    End      

    ModelConditionState  = POST_RUBBLE
		Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
    End
          
    WallBoundsMesh = P2
    RampMesh1 = P1
    
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepSectionC
  Side                = Rohan
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone

;  VoiceSelect         = NuclearReactorSelect
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 

  ; *** ENGINEERING Parameters ***

  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE IGNORED_IN_GUI;SELECTABLE;@1
 
  Behavior = CastleMemberBehavior ModuleTag_CMB
		CountsForEvaCastleBreached = Yes
  End 

  ; Immortal because they can't be destroyed, only damaged.  
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0    
  End

  ArmorSet
    Conditions        = None
    Armor             = HelmsDeepWalls
    DamageFX          = None
  End

	; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
	; never truly destroyed, even when reduced to zero health. Also note that garrisonable
	; buildings automatically stick around because GarrisonContain has it's own DieModule
	Behavior = KeepObjectDie ModuleTag_IWantRubble
	End

;  Behavior            = DestroyDie ModuleTag_07
;    ;nothing
;  End
 
  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= HelmsDeepWallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

; 	Behavior = FireWeaponWhenDeadBehavior FireDeadTag1
;		DeathTypes		= ALL
;		StartsActive	= Yes
;		DeathWeapon		= WallDeath
;	End	

	Geometry              = BOX
	GeometryMajorRadius   = 110.0
	GeometryMinorRadius   = 50.0
	GeometryHeight        = 75.0
	GeometryOffset		= X:26 Y:11.0 Z:0

	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 70.0
	GeometryOffset		  = X:-50.0 Y:15.0 Z:0

	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 60.0
	GeometryOffset		  = X:50.0 Y:15.0 Z:0
			
	GeometryIsSmall       = No
	GeometryFrontAngle    = 90.0
	Shadow                = SHADOW_VOLUME
  
	GeometryContactPoint = X:30   Y:67  Z:0 Grab
	GeometryContactPoint = X:90  Y:-47 Z:0 Grab
	GeometryContactPoint = X:90  Y:-38 Z:10 
	GeometryContactPoint = X:20   Y:-38 Z:70
	GeometryContactPoint = X:0  Y:-38 Z:10
	GeometryContactPoint = X:-25 Y:-38 Z:70
	GeometryContactPoint = X:-50  Y:-38 Z:10
	GeometryContactPoint = X:-50  Y:-47 Z:0 Grab
	GeometryContactPoint = X:-50  Y:67  Z:0 Grab
End

;------------------------------------------------------------------------------
;Helms Deep  dw StairsA1
Object HelmsDeepdwStairsA1

SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDDWSt1
    End
    
    ModelConditionState  = DAMAGED
      Model         = RBHDDWSt1_D1  
    End
    
    ModelConditionState  = REALLYDAMAGED
      Model         = RBHDDWSt1_D1  
    End
	
    ModelConditionState  = RUBBLE
      Model         = RBHDDWSt1_D4  
    End
    
    ModelConditionState  = POST_RUBBLE
		Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
    End
    
    WallBoundsMesh = P2
    RampMesh1 = P1
    
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepdwStairsA1
  Side                = Rohan
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone

;  VoiceSelect         = NuclearReactorSelect
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 

  ; *** ENGINEERING Parameters ***

  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE IGNORED_IN_GUI ;SELECTABLE;@1
 
  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  ; Immortal because they can't be destroyed, only damaged.  
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0    
  End

  ArmorSet
    Conditions        = None
    Armor             = HelmsDeepWalls
    DamageFX          = None
  End

	; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
	; never truly destroyed, even when reduced to zero health. Also note that garrisonable
	; buildings automatically stick around because GarrisonContain has it's own DieModule
	Behavior = KeepObjectDie ModuleTag_IWantRubble
	End

;  Behavior            = DestroyDie ModuleTag_07
;    ;nothing
;  End
 
  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= HelmsDeepWallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

	Geometry              = BOX
	GeometryMajorRadius   = 85.0
	GeometryMinorRadius   = 50.0
	GeometryHeight        = 50.0
	GeometryOffset		= X:0 Y:0 Z:0
	GeometryIsSmall       = No
	Shadow                = SHADOW_VOLUME
	
	
	GeometryContactPoint = X:-15 Y:55  Z:0 Grab
	GeometryContactPoint = X:-15 Y:45  Z:0 
	GeometryContactPoint = X:-15 Y:45  Z:50 
	GeometryContactPoint = X:35 Y:-45  Z:50 
	GeometryContactPoint = X:85 Y:45  Z:50 
	GeometryContactPoint = X:85 Y:45  Z:0 
	GeometryContactPoint = X:85  Y:55  Z:0 Grab
	
End


;------------------------------------------------------------------------------
;Helms Deep  dw StairsA2
Object HelmsDeepdwStairsA2

SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDDWSt2
    End
    
    ModelConditionState  = DAMAGED
      Model         = RBHDDWSt2_D1  
    End
    
    ModelConditionState  = REALLYDAMAGED
      Model         = RBHDDWSt2_D1  
    End
	
    ModelConditionState  = RUBBLE
      Model         = RBHDDWSt2_D4  
    End
    
    ModelConditionState  = POST_RUBBLE
		Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
    End
            
    WallBoundsMesh = P2
    RampMesh1 = P1
    
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepdwStairsA2
  Side                = Rohan
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone

;  VoiceSelect         = NuclearReactorSelect
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End

 
  ; *** ENGINEERING Parameters ***

  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE  IGNORED_IN_GUI ;SELECTABLE;@1
 
  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  ; Immortal because they can't be destroyed, only damaged.  
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0    
  End

  ArmorSet
    Conditions        = None
    Armor             = HelmsDeepWalls
    DamageFX          = None
  End

	; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
	; never truly destroyed, even when reduced to zero health. Also note that garrisonable
	; buildings automatically stick around because GarrisonContain has it's own DieModule
	Behavior = KeepObjectDie ModuleTag_IWantRubble
	End

;  Behavior            = DestroyDie ModuleTag_07
;    ;nothing
;  End
 
  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= HelmsDeepWallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

	Geometry              = BOX
	GeometryMajorRadius   = 85.0
	GeometryMinorRadius   = 50.0
	GeometryHeight        = 50.0
	GeometryOffset		= X:0 Y:0 Z:0
	GeometryIsSmall       = No
	Shadow                = SHADOW_VOLUME
  
	GeometryContactPoint = X:-80 Y:55  Z:0 Grab
	GeometryContactPoint = X:-80 Y:45  Z:0 
	GeometryContactPoint = X:-80 Y:45  Z:50 
	GeometryContactPoint = X:-10 Y:-45  Z:50 
	GeometryContactPoint = X:65 Y:45  Z:50 
	GeometryContactPoint = X:65 Y:45  Z:0 
	GeometryContactPoint = X:65  Y:55  Z:0 Grab
End


;------------------------------------------------------------------------------
;Helms Deep Causeway
Object HelmsDeepCauseway

SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDGatCy
    End
    
    ModelConditionState  = DAMAGED
      Model         = RBHDGatCy_D1  
    End
    
    ModelConditionState  = REALLYDAMAGED
      Model         = RBHDGatCy_D1  
    End
	
    ModelConditionState  = RUBBLE
      Model         = RBHDGatCy_D1  
    End
    
    ModelConditionState  = POST_RUBBLE
		Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
    End
                    
    RampMesh1 = P1
    
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepCauseway
  Side                = Rohan
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone

;  VoiceSelect         = NuclearReactorSelect
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End

 
  ; *** ENGINEERING Parameters ***

  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE  IGNORED_IN_GUI ;SELECTABLE;@1
 
  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  ; Immortal because they can't be destroyed, only damaged. 
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0    
  End

  ArmorSet
    Conditions        = None
    Armor             = InvulnerableArmor   ;HelmsDeepWalls
    DamageFX          = None
  End

  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End
 
; 	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
;		StartsActive	= Yes ;If no, requires upgrade to turn on.
;		BonusName		= WallBonus
;		RefreshDelay	= 2000
;		;Range			= 120		; Range is overridden to affect people on us since we are a wall
;		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
;	End	

  Geometry              = BOX
  GeometryMajorRadius   = 75.0
  GeometryMinorRadius   = 275.0
  GeometryHeight        = 25.0
  GeometryOffset		= X:17.0 Y:0 Z:0
  GeometryIsSmall       = No  
  
  Shadow                = SHADOW_VOLUME
End


;------------------------------------------------------------------------------
;Helms Deep Gatehouse
Object HelmsDeepGatehouseLeft

SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day


	;----------------------------------------------------------------------------------------------
	Draw = W3DScriptedModelDraw ModuleTag_Draw
		OkToChangeModelColor  = Yes
		UseStandardModelNames = Yes
		
		DefaultModelConditionState
			Model = RBHDGatHsL
		End

		ModelConditionState  = DAMAGED
			Model         = RBHDGatHsL_D1  
		End

		ModelConditionState  = REALLYDAMAGED
			Model         = RBHDGatHsL_D1  
		End

		ModelConditionState  = RUBBLE
			Model         = RBHDGatHsL_D1  
		End

		ModelConditionState  = POST_RUBBLE
			Model         = None
		End

		ModelConditionState  = POST_COLLAPSE
			Model         = None
		End
                            
		WallBoundsMesh = P1
		RampMesh1 = P2
		RaisedWallMesh = P3
    End

	;----------------------------------------------------------------------------------------------
	Draw = W3DScriptedModelDraw Draw_PosternGate
		ExtraPublicBone = Post01
		ExtraPublicBone = Post02
		ExtraPublicBone = Post03
		ExtraPublicBone = Post04

		DefaultModelConditionState
			Model			= RBHDGatHsLPst
		End

		IdleAnimationState
			BeginScript
				CurDrawableHideModule("Draw_PosternGate")
			EndScript
		End

		AnimationState = UPGRADE_POSTERN_GATE
			BeginScript
				CurDrawableShowModule("Draw_PosternGate")
			EndScript
			Animation
				AnimationName = RBHDGatHsLPst.RBHDGatHsLPst
				AnimationMode = ONCE
			End
			EnteringStateFX = FX_BuildingContructDustCulvert
		End
	End
  
	PlacementViewAngle  = 0
 
	; ***DESIGN parameters ***
	DisplayName         = OBJECT:HelmsDeepGatehouseLeft
	Side                = Rohan
	EditorSorting       = STRUCTURE
	Browser = REGION Helms_Deep STRUCTURE
	ThreatLevel = 1.0
 
	BuildCost           = 1
	BuildTime           = 5.0           ; in seconds
	VisionRange         = 160.0          ; Shroud clearing distance
	ShroudClearingRange = 160



; For Testing Purposes


  ; *** AUDIO Parameters ***

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone

;	VoiceSelect         = NuclearReactorSelect
 	
;	UnitSpecificSounds
;	UnderConstruction     = UnderConstructionLoop
;	End
 

	; *** ENGINEERING Parameters ***

	RadarPriority       = NOT_ON_RADAR
	KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR NOT_AUTOACQUIRABLE SELECTABLE IGNORED_IN_GUI
	CommandSet			= PosternGateCommandSetMk2
	
	Behavior = CastleMemberBehavior ModuleTag_CMB
		CountsForEvaCastleBreached = No   ; ??? Not sure, Helm's Deep doesn't support EVA CastleBreached anyway
	End 

	Behavior = DynamicPortalBehaviour PosternGatePortal
		TriggeredBy				= Upgrade_PosternGate
		ConflictsWith			= Upgrade_OpenGarrison Upgrade_TrebuchetTurret
		CustomAnimAndDuration	= AnimState:UPGRADE_POSTERN_GATE AnimTime:0
		
		AllowKindOf		= INFANTRY CAVALRY
		RejectKindOf	= MONSTER MACHINE ARMY_OF_DEAD 
		BonePrefix		= Post
		NumberOfBones	= 4
		WayPoint		= Index:0	Type:Walk	; 0
		WayPoint		= Index:1	Type:Walk	; 1
		WayPoint		= Index:2	Type:Walk	; 2
		WayPoint		= Index:3	Type:Walk	; 3
		WayPoint		= Index:2	Type:Walk	; 4
		WayPoint		= Index:1	Type:Walk	; 5
		Link			= From:0 Via:4 Via:5 To:3
		Link			= From:3 Via:1 Via:2 To:0
	End
	
	Behavior = ProductionUpdate ProductionUpdateModuleTag
		; nothing, but is required if we have any Object-level Upgrades!
	End


  ; Immortal because they can't be destroyed, only damaged.  
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0    
  End

	ArmorSet
		Conditions        = None
		Armor             = HelmsDeepWalls
		DamageFX          = None
	End

  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= HelmsDeepWallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	


 ;GeometryContactPoint = X:40 Y:40 Z:10 
 ;GeometryContactPoint = X:0 Y:-20 Z:60 


  Geometry              = BOX
  GeometryMajorRadius   = 74.0
  GeometryMinorRadius   = 95.0
  GeometryHeight        = 140.0

	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 130.0
	GeometryOffset		  = X:-45.0 Y:0.0 Z:0	
	
	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 130.0
	GeometryOffset		  = X:45.0 Y:0.0 Z:0	  

	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 85.0
	GeometryOffset		  = X:-12.0 Y:-25.0 Z:0	

	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 85.0
	GeometryOffset		  = X:60.0 Y:40.0 Z:0	

	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 120.0
	GeometryOffset		  = X:-20.0 Y:40.0 Z:0		
  
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  
  GeometryContactPoint = X:-20  Y:-75 Z:0 Grab
  GeometryContactPoint = X:0    Y:40  Z:120
  GeometryContactPoint = X:55   Y:-35 Z:0 Grab
  ;GeometryContactPoint = X:60   Y:25  Z:85 Grab
  GeometryContactPoint = X:65 Y:60  Z:60 Menu ;<-- where to draw the radial menu
End


;------------------------------------------------------------------------------
;Helms Deep Gatehouse
Object HelmsDeepGatehouseRight

SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDGatHsR
    End
    
    
    ModelConditionState  = DAMAGED
      Model         = RBHDGatHsR_D1  
    End
    
    ModelConditionState  = REALLYDAMAGED
      Model         = RBHDGatHsR_D1  
    End
	
    ModelConditionState  = RUBBLE
      Model         = RBHDGatHsR_D1   
    End
    
    ModelConditionState  = POST_RUBBLE
		Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
    End
                                    
    WallBoundsMesh = P1
    RampMesh1 = P2
    RaisedWallMesh = P3
    
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepGatehouseRight
  Side                = Rohan
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone

;  VoiceSelect         = NuclearReactorSelect
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 

  ; *** ENGINEERING Parameters ***

  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE IGNORED_IN_GUI ;SELECTABLE;@1
 
  Behavior = CastleMemberBehavior ModuleTag_CMB
		CountsForEvaCastleBreached = No   ; ??? Not sure, Helm's Deep doesn't support EVA CastleBreached anyway
  End 

  ; Immortal because they can't be destroyed, only damaged.  
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0    
  End

  ArmorSet
    Conditions        = None
    Armor             = HelmsDeepWalls
    DamageFX          = None
  End

  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= HelmsDeepWallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

  Geometry              = BOX
  GeometryMajorRadius   = 74.0
  GeometryMinorRadius   = 95.0
  GeometryHeight        = 140.0


	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 85.0
	GeometryOffset		  = X:12.0 Y:-25.0 Z:0	

	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 85.0
	GeometryOffset		  = X:-60.0 Y:40.0 Z:0	

	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 120.0
	GeometryOffset		  = X:20.0 Y:40.0 Z:0	

  
  GeometryIsSmall       = No
  GeometryFrontAngle    = -90.0
  Shadow                = SHADOW_VOLUME
  
  GeometryContactPoint = X:20  Y:-75 Z:0 Grab
  GeometryContactPoint = X:0  Y:40 Z:120
  GeometryContactPoint = X:-55  Y:-35 Z:0 Grab
  ;GeometryContactPoint = X:-60  Y:25 Z:92 Grab
End

;------------------------------------------------------------------------------
;Helms Deep Gatehouse
Object HelmsDeepGatehouseCenter

SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day
  	
	;----------------------------------------------------------------------------------------------
	Draw = W3DScriptedModelDraw ModuleTag_Draw
		OkToChangeModelColor  = Yes
		UseStandardModelNames = Yes

		; Fade Parameters - fade disabled for now
		; AlphaCameraFadeOuterRadius = 350
		; AlphaCameraFadeInnerRadius = 250
  		; AlphaCameraAtInnerRadius = 20%

		
		DefaultModelConditionState
			Model = RBHDGatHs
		End

		ModelConditionState  = DAMAGED
			Model         = RBHDGatHs_D1  
		End

		ModelConditionState  = REALLYDAMAGED
			Model         = RBHDGatHs_D1  
		End

		ModelConditionState  = RUBBLE
			Model         = RBHDGatHs_D1  
		End

		ModelConditionState  = POST_RUBBLE
			Model         = None
		End

		ModelConditionState  = POST_COLLAPSE
			Model         = None
		End
                            
;		WallBoundsMesh = P1
;		RampMesh1 = P2
		RaisedWallMesh = P1
    End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepGatehouseRight
  Side                = Rohan
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE

  ; *** AUDIO Parameters ***

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone

;	VoiceSelect         = NuclearReactorSelect
 	
;	UnitSpecificSounds
;	UnderConstruction     = UnderConstructionLoop
;	End
 

	; *** ENGINEERING Parameters ***

	RadarPriority       = NOT_ON_RADAR
	KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR NOT_AUTOACQUIRABLE IGNORED_IN_GUI ;SELECTABLE;@1

	
	Behavior = CastleMemberBehavior ModuleTag_CMB
		CountsForEvaCastleBreached = No   ; ??? Not sure, Helm's Deep doesn't support EVA CastleBreached anyway
	End 




  ; Immortal because they can't be destroyed, only damaged.  
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0    
  End

	ArmorSet
		Conditions        = None
		Armor             = HelmsDeepWalls
		DamageFX          = None
	End

  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= HelmsDeepWallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

	Geometry              = BOX
	GeometryMajorRadius   = 85.0
	GeometryMinorRadius   = 57.5
	GeometryHeight        = 30.0
	GeometryOffset		= X:0 Y:0 Z:110
	    
	AdditionalGeometry    = BOX
	GeometryMajorRadius   = 20.0
	GeometryMinorRadius   = 60.0
	GeometryHeight        = 125.0
	GeometryOffset		= X:70 Y:0 Z:0

	AdditionalGeometry    = BOX
	GeometryMajorRadius   = 20.0
	GeometryMinorRadius   = 60.0
	GeometryHeight        = 125.0
	GeometryOffset		  = X:-70 Y:0 Z:0

	GeometryFrontAngle    = -90.0  
	GeometryIsSmall       = No
	Shadow                = SHADOW_VOLUME
  
	GeometryContactPoint = X:70  Y:-65 Z:0 Grab
	GeometryContactPoint = X:70  Y:-6 Z:0
	GeometryContactPoint = X:70  Y:-60 Z:0 
	GeometryContactPoint = X:70  Y:-60  Z:125
	GeometryContactPoint = X:-70  Y:-60  Z:125
	GeometryContactPoint = X:-70 Y:-60 Z:0
	GeometryContactPoint = X:-70 Y:-65 Z:0 Grab
	GeometryContactPoint = X:-70 Y:65 Z:0 Grab
	GeometryContactPoint = X:-70 Y:60 Z:0
	GeometryContactPoint = X:-70 Y:60  Z:125
	GeometryContactPoint = X:70  Y:60  Z:125
	GeometryContactPoint = X:70  Y:60 Z:0
	GeometryContactPoint = X:70  Y:65 Z:0 Grab
End


;------------------------------------------------------------------------------
;Helms Deep Gate Wall
Object HelmsDeepGate1

SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDIGate1
    End
        
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepGate1
  Side                = Rohan
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone

;  VoiceSelect         = NuclearReactorSelect
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 

  ; *** ENGINEERING Parameters ***

  RadarPriority       = NOT_ON_RADAR
  KindOf              = PRELOAD STRUCTURE IMMOBILE SCORE ;SELECTABLE;@1 
 
  Behavior = CastleMemberBehavior ModuleTag_CMB
		CountsForEvaCastleBreached = Yes
  End 

  ; Immortal because they can't be destroyed, only damaged.  
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 5000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0    
  End


  ArmorSet
    Conditions        = None
    Armor             = HelmsDeepWalls
    DamageFX          = None
  End

  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End
 
  Geometry              = BOX
  GeometryMajorRadius   = 50.0
  GeometryMinorRadius   = 35.0
  GeometryHeight        = 60.0
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
End


;------------------------------------------------------------------------------
;Helms Deep Gate Wall
Object HelmsDeepGate2
 
 SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDIGate2
    End
        
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepGate2
  Side                = Rohan
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


  ; *** AUDIO Parameters ***

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone

;  VoiceSelect         = NuclearReactorSelect
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 

  ; *** ENGINEERING Parameters ***

  RadarPriority       = NOT_ON_RADAR
  KindOf              = PRELOAD STRUCTURE IMMOBILE SCORE ;SELECTABLE;@1 
 
  Behavior = CastleMemberBehavior ModuleTag_CMB
		CountsForEvaCastleBreached = Yes
  End 

  Body                = StructureBody ModuleTag_05
    MaxHealth         = 1500.0
  End

  ArmorSet
    Conditions        = None
    Armor             = HelmsDeepWalls
    DamageFX          = None
  End

  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End
 
  Geometry              = BOX
  GeometryMajorRadius   = 50.0
  GeometryMinorRadius   = 35.0
  GeometryHeight        = 60.0
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
End


;------------------------------------------------------------------------------
;Helms Deep Gate Pavement01
Object HelmsDeepPavement01

SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = HDki_Pavement01
    End
        
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepPavement01
  Side                = Rohan
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***
;  VoiceSelect         = NuclearReactorSelect
;  SoundOnDamaged        = BuildingDamagedStateLight
;  SoundOnReallyDamaged  = BuildingDestroy
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 
  ; *** ENGINEERING Parameters ***
  RadarPriority       = NOT_ON_RADAR
  KindOf              = PRELOAD STRUCTURE IMMOBILE SCORE ;SELECTABLE;@1 
 
  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  Body                = StructureBody ModuleTag_05
    MaxHealth         = 1500.0
  End

  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End
 
  Geometry              = BOX
  GeometryMajorRadius   = 50.0
  GeometryMinorRadius   = 35.0
  GeometryHeight        = 60.0
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
End



;------------------------------------------------------------------------------
;Helms Deep Gate Pavement02
Object HelmsDeepPavement02

SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDIPave2
    End
        
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepPavement02
  Side                = Rohan
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***
;  VoiceSelect         = NuclearReactorSelect
;  SoundOnDamaged        = BuildingDamagedStateLight
;  SoundOnReallyDamaged  = BuildingDestroy
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 
  ; *** ENGINEERING Parameters ***
  RadarPriority       = NOT_ON_RADAR
  KindOf              = PRELOAD STRUCTURE IMMOBILE SCORE ;SELECTABLE;@1 
 
  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  Body                = StructureBody ModuleTag_05
    MaxHealth         = 1500.0
  End

  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End
 
  Geometry              = BOX
  GeometryMajorRadius   = 50.0
  GeometryMinorRadius   = 35.0
  GeometryHeight        = 60.0
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
End


;------------------------------------------------------------------------------
;Helms Deep Gate Rampart02
Object HelmsDeepRampart02

SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDIRamp2
    End
    
    ModelConditionState  = DAMAGED
      Model         = RBHDIRamp2_D1  
    End
    
    ModelConditionState  = REALLYDAMAGED
      Model         = RBHDIRamp2_D1  
    End
	
    ModelConditionState  = RUBBLE
      Model         = RBHDIRamp2_D1  
    End
    
    ModelConditionState  = POST_RUBBLE
		Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
    End
    
    WallBoundsMesh = P3
    RampMesh1 = P2
    RampMesh2 = P1
    
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepRampart02
  Side                = Rohan
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone

;  VoiceSelect         = NuclearReactorSelect
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 

  ; *** ENGINEERING Parameters ***

  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE IGNORED_IN_GUI ;SELECTABLE;@1
 
  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  ; Immortal because they can't be destroyed, only damaged.  
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0    
  End


  ArmorSet
    Conditions        = None
    Armor             = HelmsDeepWalls
    DamageFX          = None
  End

  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= HelmsDeepWallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

  Geometry              = BOX
  GeometryMajorRadius   = 42.0
  GeometryMinorRadius   = 65.0
  GeometryHeight        = 150.0
  GeometryIsSmall       = No
  GeometryFrontAngle    = -90.0
  Shadow                = SHADOW_VOLUME
  
  ; just grab from the center, the only we can get at this thing is if an ent is on top of it
  ;GeometryContactPoint = X:42  Y:55  Z:150 Grab
  ;GeometryContactPoint = X:42  Y:-55 Z:150 Grab
  ;GeometryContactPoint = X:-42 Y:-55 Z:150 Grab
  ;GeometryContactPoint = X:-42 Y:55  Z:150 Grab
End


;------------------------------------------------------------------------------
;Helms Deep Gate Rampart03
Object HelmsDeepRampart03

SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDIRamp3
    End
    
    ModelConditionState  = DAMAGED
      Model         = RBHDIRamp3_D1  
    End
    
    ModelConditionState  = REALLYDAMAGED
      Model         = RBHDIRamp3_D1  
    End
	
    ModelConditionState  = RUBBLE
      Model         = RBHDIRamp3_D1  
    End
    
    ModelConditionState  = POST_RUBBLE
		Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
    End
    
    WallBoundsMesh = P2
    RampMesh1 = P1
    
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepRampart03
  Side                = Rohan
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone

;  VoiceSelect         = NuclearReactorSelect
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 

  ; *** ENGINEERING Parameters ***

  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE IGNORED_IN_GUI ;SELECTABLE;@1
 
  Behavior = CastleMemberBehavior ModuleTag_CMB
		CountsForEvaCastleBreached = Yes
  End 

  ; Immortal because they can't be destroyed, only damaged.  
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0    
  End

  ArmorSet
    Conditions        = None
    Armor             = HelmsDeepWalls
    DamageFX          = None
  End

  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= HelmsDeepWallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

	Geometry              = BOX
	GeometryMajorRadius   = 50.0
	GeometryMinorRadius   = 60.0
	GeometryHeight        = 170.0
	GeometryOffset		= X:0 Y:0 Z:0
	
	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 170.0
	GeometryOffset		  = X:0 Y:0 Z:0
		
	GeometryIsSmall       = No
	Shadow                = SHADOW_VOLUME

	; have no idea how this lines up with other pieces 
	; most likely it's only going to get grabbed from if the unit is on top of it (I hope)
	GeometryContactPoint = X:40 Y:-55 Z:0 Grab
	GeometryContactPoint = X:40 Y:-50 Z:150
	GeometryContactPoint = X:0 Y:0 Z:160 Grab
End


;------------------------------------------------------------------------------
;Helms Deep Gate Rampart04
Object HelmsDeepRampart04

SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDIRamp4
    End
    
    ModelConditionState  = DAMAGED
      Model         = RBHDIRamp4_D1  
    End
    
    ModelConditionState  = REALLYDAMAGED
      Model         = RBHDIRamp4_D1  
    End
	
    ModelConditionState  = RUBBLE
      Model         = RBHDIRamp4_D1  
    End
    
    ModelConditionState  = POST_RUBBLE
		Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
    End
    
;   RaisedWallMesh = P2
;   RampMesh1 = P1
    
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepRampart04
  Side                = Rohan
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160

  ; Immortal because they can't be destroyed, only damaged.  
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0    
  End


; For Testing Purposes


  ; *** AUDIO Parameters ***

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone

;  VoiceSelect         = NuclearReactorSelect
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 

  ; *** ENGINEERING Parameters ***

  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE CHUNK_VENDOR  NOT_AUTOACQUIRABLE IGNORED_IN_GUI ;SELECTABLE;@1
 
  Behavior = CastleMemberBehavior ModuleTag_CMB
		CountsForEvaCastleBreached = Yes ; ??? Not sure, Helm's Deep doesn't support EVA CastleBreached anyway
  End 

  ArmorSet
    Conditions        = None
    Armor             = HelmsDeepWalls
    DamageFX          = None
  End

  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= HelmsDeepWallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

  Geometry              = BOX
  GeometryMajorRadius   = 120.0
  GeometryMinorRadius   = 50.0
  GeometryHeight        = 30.0
  GeometryOffset		= X:-33 Y:0 Z:165
  GeometryIsSmall       = No

  AdditionalGeometry    = BOX
  GeometryMajorRadius   = 25.0
  GeometryMinorRadius   = 50.0
  GeometryHeight        = 100.0
  GeometryOffset		= X:60 Y:0 Z:95
  GeometryIsSmall       = No
  
  AdditionalGeometry    = CYLINDER
  GeometryMajorRadius   = 40.0
  GeometryMinorRadius   = 40.0
  GeometryHeight        = 80.0
  GeometryOffset		= X:-100 Y:0 Z:115
  
  GeometryIsSmall       = No
    
  
  Shadow                = SHADOW_VOLUME
End


;------------------------------------------------------------------------------
;Helms Deep Gate Rampart05
Object HelmsDeepRampart05

SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDIRamp5
    End
    
    ModelConditionState  = DAMAGED
      Model         = RBHDIRamp5_D1  
    End
    
    ModelConditionState  = REALLYDAMAGED
      Model         = RBHDIRamp5_D1  
    End
	
    ModelConditionState  = RUBBLE
      Model         = RBHDIRamp5_D1  
    End
    
    ModelConditionState  = POST_RUBBLE
		Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
    End
    
    WallBoundsMesh = P2
    RampMesh1 = P1
    RampMesh2 = P3
    RaisedWallMesh = P2_OLD
    
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepRampart05
  Side                = Rohan
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone

;  VoiceSelect         = NuclearReactorSelect
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 

  ; *** ENGINEERING Parameters ***

  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE IGNORED_IN_GUI ;SELECTABLE;@1
 
  Behavior = CastleMemberBehavior ModuleTag_CMB
		CountsForEvaCastleBreached = Yes  ; ??? Not sure, Helm's Deep doesn't support EVA CastleBreached anyway
  End 

  ; Immortal because they can't be destroyed, only damaged.  
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0    
  End

  ArmorSet
    Conditions        = None
    Armor             = HelmsDeepWalls
    DamageFX          = None
  End

  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= HelmsDeepWallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

  Geometry				= BOX
  GeometryMajorRadius   = 120.0
  GeometryMinorRadius   = 70.0 
  GeometryHeight        = 30.0
  GeometryOffset		= X:0 Y:0 Z:160  
  
  AdditionalGeometry    = BOX
  GeometryMajorRadius   = 120.0
  GeometryMinorRadius   = 70.0 
  GeometryHeight        = 108.0
;  GeometryOffset		= X:0 Y:0 Z:0  
      
  AdditionalGeometry    = BOX
  GeometryMajorRadius   = 120.0
  GeometryMinorRadius   = 70.0 
  GeometryHeight        = 30.0
  GeometryOffset		= X:0 Y:0 Z:160  
  
  AdditionalGeometry    = BOX
  GeometryMajorRadius   = 37.5
  GeometryMinorRadius   = 70.0 
  GeometryHeight        = 190.0
  GeometryOffset		= X:-80 Y:0 Z:0  
  
  AdditionalGeometry    = BOX
  GeometryMajorRadius   = 37.5
  GeometryMinorRadius   = 70.0 
  GeometryHeight        = 190.0
  GeometryOffset		= X:80 Y:0 Z:0  

	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 190.0
	GeometryOffset		  = X:90 Y:0 Z:0

	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 190.0
	GeometryOffset		  = X:0 Y:0 Z:0

	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 190.0
	GeometryOffset		  = X:-90 Y:0 Z:0
	  
  GeometryFrontAngle    = -110.0  
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  
  GeometryContactPoint = X:-105  Y:-55 Z:0 Grab
  GeometryContactPoint = X:-40  Y:-20 Z:185 
  GeometryContactPoint = X:0  Y:-20 Z:110 Grab
  GeometryContactPoint = X:40  Y:-20 Z:185 
  GeometryContactPoint = X:105  Y:-55 Z:0 Grab
  
End



;------------------------------------------------------------------------------
;Helms Deep Gate Rampart05
Object HelmsDeepRampart05a

SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDIRamp5a
    End
    
    
    RampMesh1 = P01
    
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepRampart05a
  Side                = Rohan
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes

  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL NOT_AUTOACQUIRABLE NO_COLLIDE IGNORED_IN_GUI ;SELECTABLE;@1
 
  ; Immortal because they can't be destroyed, only damaged.  
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
  End


  Geometry              = BOX
  GeometryMajorRadius   = 10.0
  GeometryMinorRadius   = 10.0
  GeometryHeight        = 10.0
  GeometryIsSmall       = No
  Shadow                = NONE
End


;------------------------------------------------------------------------------
;Helms Deep Gate Rampart05 Invisible
Object HelmsDeepRampartInvisible

SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDIRampInv
    End
    
    ModelConditionState  = DAMAGED
      Model         = RBHDIRampInv  
    End
    
    ModelConditionState  = REALLYDAMAGED
      Model         = RBHDIRampInv  
    End
	
    ModelConditionState  = RUBBLE
      Model         = RBHDIRampInv  
    End
    
    ModelConditionState  = POST_RUBBLE
		Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
    End
    
    RampMesh1 = P01
    
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepRampart05Invisible
  Side                = Rohan
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***
;  VoiceSelect         = NuclearReactorSelect
;  SoundOnDamaged        = BuildingDamagedStateLight
;  SoundOnReallyDamaged  = BuildingDestroy
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 
  ; *** ENGINEERING Parameters ***
  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE ;SELECTABLE;@1
 
  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  ; Immortal because they can't be destroyed, only damaged.  
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
;    GrabObject = EntThrownBuildingRock
;	GrabFX = FX_WallGrab
;	GrabDamage = 490
;	GrabOffset = X:16 Y:0    
  End

;  ArmorSet
;    Conditions        = None
;    Armor             = HelmsDeepWalls
;    DamageFX          = None
;  End

  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= HelmsDeepWallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

;  Geometry              = BOX
;  GeometryMajorRadius   = 162.0
;  GeometryMinorRadius   = 64.0
;  GeometryHeight        = 190.0
;  GeometryIsSmall       = No
;  Shadow                = SHADOW_VOLUME
End



;------------------------------------------------------------------------------
;Helms Deep Gate di Section A3
Object HelmsDeepkiSectionA3

SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes

    WallBoundsMesh = P1
    RampMesh1 = P2 this is not in any way suitable for a ramp at this time.  
    
    DefaultModelConditionState
      Model = RBHDISecA3
    End
    
    ModelConditionState  = DAMAGED
      Model         = RBHDISecA3_D1  
    End
    
    ModelConditionState  = REALLYDAMAGED
      Model         = RBHDISecA3_D1  
    End
	
    ModelConditionState  = RUBBLE
      Model         = RBHDISecA3_D1  
    End
    
    ModelConditionState  = POST_RUBBLE
		Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
    End
    

  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepdiSectionA3
  Side                = Rohan
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***
;  VoiceSelect         = NuclearReactorSelect
;  SoundOnDamaged        = BuildingDamagedStateLight
;  SoundOnReallyDamaged  = BuildingDestroy
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 
  ; *** ENGINEERING Parameters ***
  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE IGNORED_IN_GUI ;SELECTABLE;@1
 
  Behavior = CastleMemberBehavior ModuleTag_CMB
		CountsForEvaCastleBreached = Yes
  End 

  ; Immortal because they can't be destroyed, only damaged.  
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0    
  End

  ArmorSet
    Conditions        = None
    Armor             = HelmsDeepWalls
    DamageFX          = None
  End

  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= HelmsDeepWallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

	Geometry              = BOX
	GeometryMajorRadius   = 141.0
	GeometryMinorRadius   = 54.0
	GeometryHeight        = 150.0
	
	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 150.0
	GeometryOffset		  = X:90 Y:0 Z:0

	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 150.0
	GeometryOffset		  = X:0 Y:0 Z:0
			
	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 150.0
	GeometryOffset		  = X:-90 Y:0 Z:0
	
	GeometryIsSmall       = No
	GeometryFrontAngle    = -130.0  
	Shadow                = SHADOW_VOLUME
	
	GeometryContactPoint = X:-105  Y:-45 Z:0   Grab
	GeometryContactPoint = X:0     Y:-15 Z:148 Grab
	GeometryContactPoint = X:105   Y:-45 Z:0   Grab
End


;------------------------------------------------------------------------------
;Helms Deep Gate di Section A5
Object HelmsDeepkiSectionA5

SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDISecA5
    End
    
    ModelConditionState  = DAMAGED
      Model         = RBHDISecA5_D1  
    End
    
    ModelConditionState  = REALLYDAMAGED
      Model         = RBHDISecA5_D1  
    End
	
    ModelConditionState  = RUBBLE
      Model         = RBHDISecA5_D1  
    End
    
    ModelConditionState  = POST_RUBBLE
		Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
    End
    
    WallBoundsMesh = P1
   ; RampMesh1 = P2
    
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepdiSectionA5
  Side                = Rohan
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***
;  VoiceSelect         = NuclearReactorSelect
;  SoundOnDamaged        = BuildingDamagedStateLight
;  SoundOnReallyDamaged  = BuildingDestroy
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 
  ; *** ENGINEERING Parameters ***
  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL NOT_AUTOACQUIRABLE IGNORED_IN_GUI ;SELECTABLE;@1
 
  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  ; Immortal because they can't be destroyed, only damaged.  
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0    
  End

  ArmorSet
    Conditions        = None
    Armor             = HelmsDeepWalls
    DamageFX          = None
  End

 	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= HelmsDeepWallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

  Geometry              = BOX
  GeometryMajorRadius   = 80.0
  GeometryMinorRadius   = 55.0
  GeometryHeight        = 150.0
   GeometryOffset		= X:65 Y:0 Z:0

	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 150.0
	GeometryOffset		  = X:100 Y:0 Z:0   

	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 150.0
	GeometryOffset		  = X:30 Y:0 Z:0
   
  GeometryIsSmall       = No
  GeometryFrontAngle    = -90.0  
  Shadow                = SHADOW_VOLUME
  End

;------------------------------------------------------------------------------
;Helms Deep Gate di Section A6
Object HelmsDeepdiSectionA6

SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDISecA6
    End
    
    ModelConditionState  = DAMAGED
      Model         = RBHDISecA6_D1  
    End
    
    ModelConditionState  = REALLYDAMAGED
      Model         = RBHDISecA6_D1  
    End
	
    ModelConditionState  = RUBBLE
      Model         = RBHDISecA6_D1  
    End
    
    ModelConditionState  = POST_RUBBLE
		Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
    End
    
    WallBoundsMesh = P1
  ;  RampMesh1 = P2
    
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepdiSectionA6
  Side                = Rohan
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***
;  VoiceSelect         = NuclearReactorSelect
;  SoundOnDamaged        = BuildingDamagedStateLight
;  SoundOnReallyDamaged  = BuildingDestroy
 
 
  ; *** ENGINEERING Parameters ***
  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL NOT_AUTOACQUIRABLE IGNORED_IN_GUI ;SELECTABLE;@1 
 
  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  ; Immortal because they can't be destroyed, only damaged.  
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0    
  End

  ArmorSet
    Conditions        = None
    Armor             = HelmsDeepWalls
    DamageFX          = None
  End

  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= HelmsDeepWallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

  Geometry              = BOX
  GeometryMajorRadius   = 80.0
  GeometryMinorRadius   = 55.0
  GeometryHeight        = 150.0
   GeometryOffset		= X:-68 Y:0 Z:0

	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 150.0
	GeometryOffset		  = X:-100 Y:0 Z:0   

	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 150.0
	GeometryOffset		  = X:-30 Y:0 Z:0
	   
  GeometryIsSmall       = No
  GeometryFrontAngle    = -90.0  
  Shadow                = SHADOW_VOLUME
 End

;------------------------------------------------------------------------------
;Helms Deep Gate di Section A7
Object HelmsDeepdiSectionA7

SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDISecA7
    End
    
    ModelConditionState  = DAMAGED
      Model         = RBHDISecA7_D1  
    End
    
    ModelConditionState  = REALLYDAMAGED
      Model         = RBHDISecA7_D1  
    End
	
    ModelConditionState  = RUBBLE
      Model         = RBHDISecA7_D1  
    End
    
    ModelConditionState  = POST_RUBBLE
		Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
    End
    
    WallBoundsMesh = P1
  ;  RampMesh1 = P2
    
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepdiSectionA7
  Side                = Rohan
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160


; For Testing Purposes


; *** AUDIO Parameters ***
;  VoiceSelect         = NuclearReactorSelect
;  SoundOnDamaged        = BuildingDamagedStateLight
;  SoundOnReallyDamaged  = BuildingDestroy
 
 
  ; *** ENGINEERING Parameters ***
  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL NOT_AUTOACQUIRABLE IGNORED_IN_GUI ;SELECTABLE;@1 
 
  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  ; Immortal because they can't be destroyed, only damaged.  
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0    
  End

  ArmorSet
    Conditions        = None
    Armor             = HelmsDeepWalls
    DamageFX          = None
  End

  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= HelmsDeepWallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

  Geometry              = BOX
  GeometryMajorRadius   = 80.0
  GeometryMinorRadius   = 55.0
  GeometryHeight        = 150.0
   GeometryOffset		= X:68 Y:0 Z:0

	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 150.0
	GeometryOffset		  = X:100 Y:0 Z:0   

	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 150.0
	GeometryOffset		  = X:30 Y:0 Z:0
	   
   
  GeometryIsSmall       = No
  GeometryFrontAngle    = -90.0
 Shadow                = SHADOW_VOLUME
 End


;------------------------------------------------------------------------------
;Helms Deep Gate di Section A8
Object HelmsDeepdiSectionA8

SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDISecA8
    End
    
    ModelConditionState  = DAMAGED
      Model         = RBHDISecA8_D1  
    End
    
    ModelConditionState  = REALLYDAMAGED
      Model         = RBHDISecA8_D1  
    End
	
    ModelConditionState  = RUBBLE
      Model         = RBHDISecA8_D1  
    End
    
    ModelConditionState  = POST_RUBBLE
		Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
    End
    
    WallBoundsMesh = P1
  ;  RampMesh1 = P2
    
  End
  
  PlacementViewAngle  = 0
 
 ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepdiSectionA8
  Side                = Rohan
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***
;  VoiceSelect         = NuclearReactorSelect
;  SoundOnDamaged        = BuildingDamagedStateLight
;  SoundOnReallyDamaged  = BuildingDestroy
 
 
  ; *** ENGINEERING Parameters ***
  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL NOT_AUTOACQUIRABLE IGNORED_IN_GUI ;SELECTABLE;@1
 
  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  ; Immortal because they can't be destroyed, only damaged.  
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0    
  End

  ArmorSet
    Conditions        = None
    Armor             = HelmsDeepWalls
    DamageFX          = None
  End

  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= HelmsDeepWallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

  Geometry              = BOX
  GeometryMajorRadius   = 80.0
  GeometryMinorRadius   = 55.0
  GeometryHeight        = 150.0
  GeometryOffset		= X:-68 Y:0 Z:0
  
	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 150.0
	GeometryOffset		  = X:-100 Y:0 Z:0   

	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 150.0
	GeometryOffset		  = X:-30 Y:0 Z:0
	  
  GeometryIsSmall       = No
  GeometryFrontAngle    = -90.0
  Shadow                = SHADOW_VOLUME
  End
   


;------------------------------------------------------------------------------
;Helms Deep Gate di Section A4
Object HelmsDeepkiSectionA4

SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDISecA4
    End
    
    ModelConditionState  = DAMAGED
      Model         = RBHDISecA4_D1  
    End
    
    ModelConditionState  = REALLYDAMAGED
      Model         = RBHDISecA4_D1  
    End
	
    ModelConditionState  = RUBBLE
      Model         = RBHDISecA4_D1  
    End
    
    ModelConditionState  = POST_RUBBLE
		Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
    End
            
    WallBoundsMesh = P1
    
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepdiSectionA4
  Side                = Rohan
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***
;  VoiceSelect         = NuclearReactorSelect
;  SoundOnDamaged        = BuildingDamagedStateLight
;  SoundOnReallyDamaged  = BuildingDestroy
 
 
	; *** ENGINEERING Parameters ***
	RadarPriority       = NOT_ON_RADAR
	KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE ;SELECTABLE;@1

	Behavior = CastleMemberBehavior ModuleTag_CMB
	End 

	; Immortal because they can't be destroyed, only damaged.  
	Body                  = ImmortalBody ModuleTag_B_03
	MaxHealth       = 6000.0
	MaxHealthDamaged = 3000
	MaxHealthReallyDamaged = 1000

	GrabObject = EntThrownBuildingRock
		GrabFX = FX_WallGrab
		GrabDamage = 490
		GrabOffset = X:16 Y:0    
	End

	ArmorSet
		Conditions        = None
		Armor             = HelmsDeepWalls
		DamageFX          = None
	End

	Behavior            = DestroyDie ModuleTag_07
	;nothing
	End
 
  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= WallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

	Geometry              = BOX
	GeometryMajorRadius   = 136.0
	GeometryMinorRadius   = 57.0
	GeometryHeight        = 150.0
	
	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 150.0
	GeometryOffset		  = X:90 Y:0 Z:0

	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 150.0
	GeometryOffset		  = X:0 Y:0 Z:0
			
	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 150.0
	GeometryOffset		  = X:-90 Y:0 Z:0
	
	GeometryIsSmall       = No
	Shadow                = SHADOW_VOLUME
	
	GeometryContactPoint = X:-105 Y:-45 Z:0 Grab
	GeometryContactPoint = X:0    Y:0   Z:145 Grab
	GeometryContactPoint = X:105  Y:-45 Z:0 Grab
End


;------------------------------------------------------------------------------
;Helms Deep Gate di Section B
Object HelmsDeepkiSectionB

SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDISecB
    End
        
	ModelConditionState  = DAMAGED
      Model         = RBHDISecB_D1  
    End
    
    ModelConditionState  = REALLYDAMAGED
      Model         = RBHDISecB_D1  
    End
	
    ModelConditionState  = RUBBLE
      Model         = RBHDISecB_D1  
    End
    
    ModelConditionState  = POST_RUBBLE
		Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
    End
                    
    WallBoundsMesh = P1
    
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepdiSectionB
  Side                = Rohan
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***
;  VoiceSelect         = NuclearReactorSelect
;  SoundOnDamaged        = BuildingDamagedStateLight
;  SoundOnReallyDamaged  = BuildingDestroy
 
 
  ; *** ENGINEERING Parameters ***
  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE IGNORED_IN_GUI ;SELECTABLE;@1
 
  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  ; Immortal because they can't be destroyed, only damaged.  
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0    
  End

  ArmorSet
    Conditions        = None
    Armor             = HelmsDeepWalls
    DamageFX          = None
  End

  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End
 
  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= HelmsDeepWallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

	Geometry              = BOX
	GeometryMajorRadius   = 80.0
	GeometryMinorRadius   = 60.0
	GeometryHeight        = 150.0
	GeometryOffset		= X:20 Y:-14 Z:0
	GeometryIsSmall       = No
	Shadow                = SHADOW_VOLUME
	
	GeometryContactPoint = X:-60 Y:-58 Z:0 Grab
	GeometryContactPoint = X:15   Y:-5   Z:145 Grab
	GeometryContactPoint = X:90  Y:-58 Z:0 Grab
End




;------------------------------------------------------------------------------
;Helms Deep Gate di Stair1
Object HelmsDeepdiStair1

SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDIStair1
    End
    
    ModelConditionState  = DAMAGED
      Model         = RBHDIStair1_D1  
    End
    
    ModelConditionState  = REALLYDAMAGED
      Model         = RBHDIStair1_D1  
    End
	
    ModelConditionState  = RUBBLE
      Model         = RBHDIStair1_D1  
    End
    
    ModelConditionState  = POST_RUBBLE
		Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
    End
                            
    WallBoundsMesh = P3
    RampMesh2 = P2
    RampMesh1 = P1
        
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepdiStair1
  Side                = Rohan
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***
;  VoiceSelect         = NuclearReactorSelect
;  SoundOnDamaged        = BuildingDamagedStateLight
;  SoundOnReallyDamaged  = BuildingDestroy
 
 
  ; *** ENGINEERING Parameters ***
  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE IGNORED_IN_GUI ;SELECTABLE;@1
 
  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  ; Immortal because they can't be destroyed, only damaged.  
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0    
  End

  ArmorSet
    Conditions        = None
    Armor             = InvulnerableArmor   ;HelmsDeepWalls
    DamageFX          = None
  End

  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End
 
  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= WallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

	Geometry              = BOX
	GeometryMajorRadius   = 114.0
	GeometryMinorRadius   = 117.0
	GeometryHeight        = 115.0
	GeometryIsSmall       = No
	Shadow                = SHADOW_VOLUME
 
   AdditionalGeometry = Cylinder
   GeometryMajorRadius = 75
   GeometryMinorRadius = 75
   GeometryHeight      = 82
   GeometryOffset      = X:-22.024 Y:-127.849 Z:0
   
   AdditionalGeometry = Cylinder
   GeometryMajorRadius = 75
   GeometryMinorRadius = 75
   GeometryHeight      = 57
   GeometryOffset      = X:22.284 Y:-245 Z:0
   
   AdditionalGeometry = Cylinder
   GeometryMajorRadius = 70
   GeometryMinorRadius = 70
   GeometryHeight      = 36.5
   GeometryOffset      = X:84.753 Y:-330 Z:0
   
   AdditionalGeometry = Cylinder
   GeometryMajorRadius = 70
   GeometryMinorRadius = 70
   GeometryHeight      = 18.3
   GeometryOffset      = X:154.86 Y:-391 Z:0
   
   ;HelmsDeepdiStair1 grab points for rock-wielding ents
   GeometryContactPoint = X:-105   Y:80  Z:0 Grab
   GeometryContactPoint = X:-90   Y:0  Z:95
   GeometryContactPoint = X:-90   Y:-80 Z:0 Grab
   GeometryContactPoint = X:-70   Y:-120 Z:75
   GeometryContactPoint = X:-65  Y:-180  Z:0 Grab
   GeometryContactPoint = X:-50   Y:-230  Z:45
   GeometryContactPoint = X:-40   Y:-280  Z:0 Grab
End



;------------------------------------------------------------------------------
;Helms Deep Gate di Stair2
Object HelmsDeepdiStair2

SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDIStair2
    End
                                    
    WallBoundsMesh = P2
    RampMesh1 = P3
    RampMesh2 = P1
     
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepdiStair1
  Side                = Rohan
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***
;  VoiceSelect         = NuclearReactorSelect
;  SoundOnDamaged        = BuildingDamagedStateLight
;  SoundOnReallyDamaged  = BuildingDestroy
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 
  ; *** ENGINEERING Parameters ***
  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE IGNORED_IN_GUI ;SELECTABLE;@1
 
  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  ; Immortal because they can't be destroyed, only damaged.  
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0    
  End

  ArmorSet
    Conditions        = None
    Armor             = HelmsDeepWalls
    DamageFX          = None
  End

  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End
 
  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= WallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

  Geometry              = BOX
  GeometryMajorRadius   = 142.0
  GeometryMinorRadius   = 161.0
  GeometryHeight        = 80.0
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
End


;------------------------------------------------------------------------------
;Helms Deep Gate di Step1
Object HelmsDeepdiStep1

SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDIStep1
    End
    
    ModelConditionState  = DAMAGED
      Model         = RBHDIStep1_D1  
    End
    
    ModelConditionState  = REALLYDAMAGED
      Model         = RBHDIStep1_D1  
    End
	
    ModelConditionState  = RUBBLE
      Model         = RBHDIStep1_D1  
    End
    
    ModelConditionState  = POST_RUBBLE
		Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
    End
    
    RampMesh1 = P1
    
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepdiStep1
  Side                = Rohan
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***
;  VoiceSelect         = NuclearReactorSelect
;  SoundOnDamaged        = BuildingDamagedStateLight
;  SoundOnReallyDamaged  = BuildingDestroy
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 
  ; *** ENGINEERING Parameters ***
  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE IGNORED_IN_GUI ;SELECTABLE;@1
 
  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  ; Immortal because they can't be destroyed, only damaged.  
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0    
  End

  ArmorSet
    Conditions        = None
    Armor             = InvulnerableArmor
    DamageFX          = None
  End

  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End
 
  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= WallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

  Geometry              = BOX
  GeometryMajorRadius   = 90.0
  GeometryMinorRadius   = 20.0
  GeometryHeight        = 22.0
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
End


;------------------------------------------------------------------------------
;Helms Deep Gate di Step2
Object HelmsDeepdiStep2

SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDIStep2
    End
        
	ModelConditionState  = DAMAGED
      Model         = RBHDIStep2_D1  
    End
    
    ModelConditionState  = REALLYDAMAGED
      Model         = RBHDIStep2_D1  
    End
	
    ModelConditionState  = RUBBLE
      Model         = RBHDIStep2_D1  
    End
    
    ModelConditionState  = POST_RUBBLE
		Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
    End
            
    RampMesh1 = P1
    
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepdiStep2
  Side                = Rohan
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***
;  VoiceSelect         = NuclearReactorSelect
;  SoundOnDamaged        = BuildingDamagedStateLight
;  SoundOnReallyDamaged  = BuildingDestroy
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 
  ; *** ENGINEERING Parameters ***
  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE IGNORED_IN_GUI ;SELECTABLE;@1 
 
  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  ; Immortal because they can't be destroyed, only damaged.  
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0    
  End

  ArmorSet
    Conditions        = None
    Armor             = InvulnerableArmor
    DamageFX          = None
  End

  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End
 
  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= WallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

  Geometry              = BOX
  GeometryMajorRadius   = 50.0
  GeometryMinorRadius   = 50.0
  GeometryHeight        = 20.0
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
End

;------------------------------------------------------------------------------
;Helms Deep Gate di Wall1
Object HelmsDeepdiWall1

SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDIWall1
    End
    
    ModelConditionState  = DAMAGED
      Model         = RBHDIWall1_D1  
    End
    
    ModelConditionState  = REALLYDAMAGED
      Model         = RBHDIWall1_D1  
    End
	
    ModelConditionState  = RUBBLE
      Model         = RBHDIWall1_D1  
    End
    
    ModelConditionState  = POST_RUBBLE
		Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
    End
        
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepdiWall
  Side                = Rohan
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***
;  VoiceSelect         = NuclearReactorSelect
;  SoundOnDamaged        = BuildingDamagedStateLight
;  SoundOnReallyDamaged  = BuildingDestroy
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 
  ; *** ENGINEERING Parameters ***
  RadarPriority       = NOT_ON_RADAR
  KindOf              = PRELOAD STRUCTURE IMMOBILE SCORE NOT_AUTOACQUIRABLE IGNORED_IN_GUI ;SELECTABLE;@1 
 
  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  ; Immortal because they can't be destroyed, only damaged.  
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
  End

  ArmorSet
    Conditions        = None
    Armor             = InvulnerableArmor
    DamageFX          = None
  End

  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End
 
  Geometry              = BOX
  GeometryMajorRadius   = 6.0
  GeometryMinorRadius   = 22.0
  GeometryHeight        = 40.0
  GeometryOffset		= X:61 Y:-46 Z:0
    
  AdditionalGeometry    = BOX
  GeometryMajorRadius   = 40.0
  GeometryMinorRadius   = 6.0
  GeometryHeight        = 40.0
  GeometryOffset		= X:26 Y:-61 Z:0
    
  AdditionalGeometry    = BOX
  GeometryMajorRadius   = 27.5
  GeometryMinorRadius   = 65.0
  GeometryHeight        = 40.0
  GeometryOffset		= X:-36.9 Y:1.8 Z:0
    
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
End


;------------------------------------------------------------------------------
;Helms Deep Gate di Wall2
Object HelmsDeepdiWall2

SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDIWall2
    End
    
    ModelConditionState  = DAMAGED
      Model         = RBHDIWall2_D1  
    End
    
    ModelConditionState  = REALLYDAMAGED
      Model         = RBHDIWall2_D1  
    End
	
    ModelConditionState  = RUBBLE
      Model         = RBHDIWall2_D1  
    End
    
    ModelConditionState  = POST_RUBBLE
		Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
    End
        
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepdiWall
  Side                = Rohan
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***
;  VoiceSelect         = NuclearReactorSelect
;  SoundOnDamaged        = BuildingDamagedStateLight
;  SoundOnReallyDamaged  = BuildingDestroy
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 
  ; *** ENGINEERING Parameters ***
  RadarPriority       = NOT_ON_RADAR
  KindOf              = PRELOAD STRUCTURE IMMOBILE SCORE NOT_AUTOACQUIRABLE IGNORED_IN_GUI ;SELECTABLE;@1 
 
  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  ; Immortal because they can't be destroyed, only damaged.  
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
  End

  ArmorSet
    Conditions        = None
    Armor             = InvulnerableArmor
    DamageFX          = None
  End

  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End
 
  Geometry              = BOX
  GeometryMajorRadius   = 17.0
  GeometryMinorRadius   = 27.5
  GeometryHeight        = 40.0
  GeometryOffset		= X:88 Y:-14 Z:0
    
  AdditionalGeometry    = BOX
  GeometryMajorRadius   = 106.0
  GeometryMinorRadius   = 5.4
  GeometryHeight        = 40.0
  GeometryOffset		= X:0 Y:5.5 Z:0
    
  AdditionalGeometry    = BOX
  GeometryMajorRadius   = 8.0
  GeometryMinorRadius   = 22.0
  GeometryHeight        = 40.0
  GeometryOffset		= X:-97 Y:20 Z:0
    
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
End

;------------------------------------------------------------------------------
;Helms Deep Gate do Bridge1
Object HelmsDeepdoBridge1

SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDOBrid1
    End
    
    ModelConditionState  = DAMAGED
      Model         = RBHDOBrid1_D1  
    End
    
    ModelConditionState  = REALLYDAMAGED
      Model         = RBHDOBrid1_D1  
    End
	
    ModelConditionState  = RUBBLE
      Model         = RBHDOBrid1_D1  
    End
    
    ModelConditionState  = POST_RUBBLE
		Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
    End
    
    WallBoundsMesh = P1
    RampMesh1 = P2
;    RampMesh2 = P3
       
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepdoBridge1
  Side                = Rohan
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***
;  VoiceSelect         = NuclearReactorSelect
;  SoundOnDamaged        = BuildingDamagedStateLight
;  SoundOnReallyDamaged  = BuildingDestroy
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 
  ; *** ENGINEERING Parameters ***
  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE IGNORED_IN_GUI ;SELECTABLE;@1  
 
  Behavior = CastleMemberBehavior ModuleTag_CMB
		CountsForEvaCastleBreached = No   ; Bridge over the gate doesn't let enemy in when broken
  End 

  Body                = StructureBody ModuleTag_05
    MaxHealth         = 1500.0
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0
  End

  ArmorSet
    Conditions        = None
    Armor             = InvulnerableArmor  ;HelmsDeepWalls
    DamageFX          = None
  End

  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End
 
  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= HelmsDeepWallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

	Geometry              = BOX
	GeometryMajorRadius   = 50.0
	GeometryMinorRadius   = 150.0
	GeometryHeight        = 90.0
	GeometryOffset		= X:0 Y:0 Z:0

	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 80.0
	GeometryOffset		  = X:0 Y:90 Z:0	

	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 60.0
	GeometryOffset		  = X:0 Y:0 Z:0	

	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 45.0
	GeometryOffset		  = X:0 Y:-90 Z:0	
		
	GeometryIsSmall       = No
	Shadow                = SHADOW_VOLUME
	
	; bridge is oriented so longways is along the Y w/ default camera
	GeometryContactPoint = X:-55 Y:-140  Z:0 Grab 
	GeometryContactPoint = X:-50 Y:-140  Z:0     
	GeometryContactPoint = X:-50 Y:0     Z:65
	GeometryContactPoint = X:-50 Y:140   Z:0
	GeometryContactPoint = X:-55 Y:140   Z:0 Grab 
	GeometryContactPoint = X:-50 Y:140   Z:65
	GeometryContactPoint = X:50  Y:140   Z:65
	GeometryContactPoint = X:55  Y:140   Z:0 Grab
	GeometryContactPoint = X:50  Y:140   Z:0
	GeometryContactPoint = X:50  Y:0      Z:65
	GeometryContactPoint = X:50  Y:-140   Z:0
	GeometryContactPoint = X:55  Y:-140   Z:0 Grab
	
End


;------------------------------------------------------------------------------
;Helms Deep Gate do SectionA2
Object HelmsDeepdoSectionA2

SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDOSecA2
    End
    
    ModelConditionState  = DAMAGED
      Model         = RBHDOSecA2_D1  
    End
    
    ModelConditionState  = REALLYDAMAGED
      Model         = RBHDOSecA2_D1  
    End
	
    ModelConditionState  = RUBBLE
      Model         = RBHDOSecA2_D1  
    End
    
    ModelConditionState  = POST_RUBBLE
		Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
    End
    
    WallBoundsMesh = P1
       
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepdoSectionA2
  Side                = Rohan
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***
;  VoiceSelect         = NuclearReactorSelect
;  SoundOnDamaged        = BuildingDamagedStateLight
;  SoundOnReallyDamaged  = BuildingDestroy
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 
  ; *** ENGINEERING Parameters ***
  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE IGNORED_IN_GUI ;SELECTABLE;@1  
 
  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  ; Immortal because they can't be destroyed, only damaged.  
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0    
  End

  ArmorSet
    Conditions        = None
    Armor             = HelmsDeepWalls
    DamageFX          = None
  End

  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End
 
  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= HelmsDeepWallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

	Geometry              = BOX
	GeometryMajorRadius   = 130.0
	GeometryMinorRadius   = 55.0
	GeometryHeight        = 90.0
	GeometryOffset		= X:0 Y:14 Z:0

	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 80.0
	GeometryOffset		  = X:-80.0 Y:15.0 Z:0	

	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 80.0
	GeometryOffset		  = X:0.0 Y:15.0 Z:0	

	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 80.0
	GeometryOffset		  = X:80.0 Y:15.0 Z:0	
		
	GeometryIsSmall       = No
	GeometryFrontAngle    = -90.0
	Shadow                = SHADOW_VOLUME
	
	GeometryContactPoint = X:-110  Y:-47 Z:0 Grab
	GeometryContactPoint = X:0  Y:0 Z:85 Grab
	GeometryContactPoint = X:110  Y:-47 Z:0 Grab
End


;------------------------------------------------------------------------------
;Helms Deep Gate do SectionA5
Object HelmsDeepdoSectionA5

SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDOSecA5
    End
    
    ModelConditionState  = DAMAGED
      Model         = RBHDOSecA5_D1  
    End
    
    ModelConditionState  = REALLYDAMAGED
      Model         = RBHDOSecA5_D1  
    End
	
    ModelConditionState  = RUBBLE
      Model         = RBHDOSecA5_D1  
    End
    
    ModelConditionState  = POST_RUBBLE
		Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
    End
     
    WallBoundsMesh = P1
      
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepdoSectionA5
  Side                = Rohan
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***
;  VoiceSelect         = NuclearReactorSelect
;  SoundOnDamaged        = BuildingDamagedStateLight
;  SoundOnReallyDamaged  = BuildingDestroy
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 
  ; *** ENGINEERING Parameters ***
  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE ;SELECTABLE;@1 
 
  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  ; Immortal because they can't be destroyed, only damaged.  
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0    
  End

  ArmorSet
    Conditions        = None
    Armor             = HelmsDeepWalls
    DamageFX          = None
  End

  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End
 
   	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= WallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

 Geometry              = BOX
  GeometryMajorRadius   = 57.0
  GeometryMinorRadius   = 125.0
  GeometryHeight        = 90.0

	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 80.0
	GeometryOffset		  = X:10.0 Y:-80.0 Z:0	  

	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 80.0
	GeometryOffset		  = X:10.0 Y:0.0 Z:0	  

	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 80.0
	GeometryOffset		  = X:10.0 Y:80.0 Z:0	
	  
  GeometryIsSmall       = No
  GeometryFrontAngle    = 180.0
  Shadow                = SHADOW_VOLUME
  
  GeometryContactPoint = X:-45 Y:-100 Z:0 Grab
  GeometryContactPoint = X:0  Y:0 Z:75 Grab
  GeometryContactPoint = X:-45  Y:100 Z:0 Grab
End

;------------------------------------------------------------------------------
;Helms Deep Gate do SectionB1
Object HelmsDeepdoSectionB1

SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDOSecB1
    End
    
    ModelConditionState  = DAMAGED
      Model         = RBHDOSecB1_D1  
    End
    
    ModelConditionState  = REALLYDAMAGED
      Model         = RBHDOSecB1_D1  
    End
	
    ModelConditionState  = RUBBLE
      Model         = RBHDOSecB1_D1  
    End
    
    ModelConditionState  = POST_RUBBLE
		Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
    End
             
    WallBoundsMesh = P1
      
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepdoSectionB1
  Side                = Rohan
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***
;  VoiceSelect         = NuclearReactorSelect
;  SoundOnDamaged        = BuildingDamagedStateLight
;  SoundOnReallyDamaged  = BuildingDestroy
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 
  ; *** ENGINEERING Parameters ***
  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE IGNORED_IN_GUI ;SELECTABLE;@1 
 
  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  ; Immortal because they can't be destroyed, only damaged.  
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0    
  End

  ArmorSet
    Conditions        = None
    Armor             = HelmsDeepWalls
    DamageFX          = None
  End

  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End
 
  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= HelmsDeepWallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

  Geometry              = BOX
  GeometryMajorRadius   = 130.0
  GeometryMinorRadius   = 85.0
  GeometryHeight        = 90.0
  GeometryOffset		= X:0 Y:-10 Z:0

	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 80.0
	GeometryOffset		  = X:-80.0 Y:15.0 Z:0	
	  
	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 80.0
	GeometryOffset		  = X:0.0 Y:15.0 Z:0	  

	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 80.0
	GeometryOffset		  = X:80.0 Y:15.0 Z:0	  

	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 80.0
	GeometryOffset		  = X:40.0 Y:-60.0 Z:0	  
  
  GeometryIsSmall       = No
  GeometryFrontAngle    = -90.0
  Shadow                = SHADOW_VOLUME
  
  GeometryContactPoint = X:-100  Y:-20 Z:0 Grab
  GeometryContactPoint = X:-20  Y:0 Z:75 Grab
  GeometryContactPoint = X:30  Y:-93 Z:0 Grab
  GeometryContactPoint = X:120  Y:-30 Z:0 Grab
End


;------------------------------------------------------------------------------
;Helms Deep Gate do SectionD
Object HelmsDeepdoSectionD

SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDOSecD
    End
    
    ModelConditionState  = DAMAGED
      Model         = RBHDOSecD_D1  
    End
    
    ModelConditionState  = REALLYDAMAGED
      Model         = RBHDOSecD_D1  
    End
	
    ModelConditionState  = RUBBLE
      Model         = RBHDOSecD_D1  
    End
    
    ModelConditionState  = POST_RUBBLE
		Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
    End
                     
    WallBoundsMesh = P2
    RampMesh1 = P1
      
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepdoSectionD
  Side                = Rohan
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***
;  VoiceSelect         = NuclearReactorSelect
;  SoundOnDamaged        = BuildingDamagedStateLight
;  SoundOnReallyDamaged  = BuildingDestroy
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 
  ; *** ENGINEERING Parameters ***
  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE IGNORED_IN_GUI ;SELECTABLE;@1  
 
  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  ; Immortal because they can't be destroyed, only damaged.  
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0    
  End

  ArmorSet
    Conditions        = None
    Armor             = HelmsDeepWalls
    DamageFX          = None
  End

  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End
 
  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= HelmsDeepWallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

  Geometry              = BOX
  GeometryMajorRadius   = 92.0
  GeometryMinorRadius   = 107.0
  GeometryHeight        = 90.0

	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 80.0
	GeometryOffset		  = X:65.0 Y:-130.0 Z:0	
	
	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 80.0
	GeometryOffset		  = X:65.0 Y:-50.0 Z:0	
	
	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 80.0
	GeometryOffset		  = X:65.0 Y:35.0 Z:0	
	
	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 80.0
	GeometryOffset		  = X:65.0 Y:120.0 Z:0	  
	
	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 80.0
	GeometryOffset		  = X:-15.0 Y:60.0 Z:0	
	
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  
  ;HelmsDeepdoSectionD Grab points for rock wielding ents
  GeometryContactPoint = X:-75 Y:30   Z:0 Grab  
  GeometryContactPoint = X:-65 Y:30   Z:70
  GeometryContactPoint = X:15  Y:30   Z:70
  GeometryContactPoint = X:21  Y:-120 Z:0 Grab
  
  
End


;------------------------------------------------------------------------------
;Helms Deep Gate do StairsA1
Object HelmsDeepdoStairsA1

SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDOStA1
    End
    
    ModelConditionState  = DAMAGED
      Model         = RBHDOStA1_D1  
    End
    
    ModelConditionState  = REALLYDAMAGED
      Model         = RBHDOStA1_D1  
    End
	
    ModelConditionState  = RUBBLE
      Model         = RBHDOStA1_D1  
    End
    
    ModelConditionState  = POST_RUBBLE
		Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
    End
                             
    WallBoundsMesh = P2
    RampMesh1 = P1
    RampMesh2 = P3
      
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepdoStairsA1
  Side                = Rohan
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***
;  VoiceSelect         = NuclearReactorSelect
;  SoundOnDamaged        = BuildingDamagedStateLight
;  SoundOnReallyDamaged  = BuildingDestroy
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 
  ; *** ENGINEERING Parameters ***
  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE IGNORED_IN_GUI ;SELECTABLE;@1 
 
  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  ; Immortal because they can't be destroyed, only damaged.  
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0    
  End

  ArmorSet
    Conditions        = None
    Armor             = HelmsDeepWalls
    DamageFX          = None
  End

  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End
 
  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= HelmsDeepWallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

	Geometry              = BOX
	GeometryMajorRadius   = 70.0
	GeometryMinorRadius   = 50.0
	GeometryHeight        = 25.0
	GeometryOffset		= X:-10 Y:0 Z:0
	GeometryIsSmall       = No
	Shadow                = SHADOW_VOLUME
	
	GeometryContactPoint = X:-10 Y:55  Z:0 Grab
	GeometryContactPoint = X:-10 Y:48  Z:0 
	GeometryContactPoint = X:-10 Y:48  Z:25 
	GeometryContactPoint = X:25 Y:-48  Z:25 
	GeometryContactPoint = X:65 Y:48  Z:25 
	GeometryContactPoint = X:65 Y:58  Z:0 
	GeometryContactPoint = X:65  Y:55  Z:0 Grab
End


;------------------------------------------------------------------------------
;Helms Deep Gate do StairsA4
Object HelmsDeepdoStairsA4

SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDOStA4
    End
    
    ModelConditionState  = DAMAGED
      Model         = RBHDOStA4_D1  
    End
    
    ModelConditionState  = REALLYDAMAGED
      Model         = RBHDOStA4_D1  
    End
	
    ModelConditionState  = RUBBLE
      Model         = RBHDOStA4_D1  
    End
    
    ModelConditionState  = POST_RUBBLE
		Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
    End
                                     
    WallBoundsMesh = P2
    RampMesh1 = P1
    RampMesh2 = P3
    
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepdoStairsA4
  Side                = Rohan
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***
;  VoiceSelect         = NuclearReactorSelect
;  SoundOnDamaged        = BuildingDamagedStateLight
;  SoundOnReallyDamaged  = BuildingDestroy
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 
  ; *** ENGINEERING Parameters ***
  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE IGNORED_IN_GUI ;SELECTABLE;@1 
 
  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  ; Immortal because they can't be destroyed, only damaged.  
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0    
  End

  ArmorSet
    Conditions        = None
    Armor             = HelmsDeepWalls
    DamageFX          = None
  End

  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End
 
  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= WallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

	Geometry              = BOX
	GeometryMajorRadius   = 80.0
	GeometryMinorRadius   = 50.0
	GeometryHeight        = 45.0
	GeometryOffset		= X:0 Y:0 Z:0
	GeometryIsSmall       = No
	Shadow                = SHADOW_VOLUME
	
	GeometryContactPoint = X:-15 Y:55  Z:0 Grab
	GeometryContactPoint = X:-15 Y:48  Z:0 
	GeometryContactPoint = X:-15 Y:48  Z:43 
	GeometryContactPoint = X:30 Y:-48  Z:43 
	GeometryContactPoint = X:80 Y:48  Z:43 
	GeometryContactPoint = X:80 Y:48  Z:0 
	GeometryContactPoint = X:80  Y:55  Z:0 Grab
End

;------------------------------------------------------------------------------
;Helms Deep Gate do StairsA5
Object HelmsDeepdoStairsA5

SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDOStA5
    End
                                             
    WallBoundsMesh = P2
    RampMesh1 = P1
    RampMesh2 = P3
    
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepdoStairsA5
  Side                = Rohan
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


; *** AUDIO Parameters ***
;  VoiceSelect         = NuclearReactorSelect
;  SoundOnDamaged        = BuildingDamagedStateLight
;  SoundOnReallyDamaged  = BuildingDestroy
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 
  ; *** ENGINEERING Parameters ***
  RadarPriority       = NOT_ON_RADAR
  KindOf              = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR  NOT_AUTOACQUIRABLE IGNORED_IN_GUI ;SELECTABLE;@1  
 
  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  ; Immortal because they can't be destroyed, only damaged.  
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 6000.0
    MaxHealthDamaged = 3000
    MaxHealthReallyDamaged = 1000
    
    GrabObject = EntThrownBuildingRock
	GrabFX = FX_WallGrab
	GrabDamage = 490
	GrabOffset = X:16 Y:0    
  End

  ArmorSet
    Conditions        = None
    Armor             = HelmsDeepWalls
    DamageFX          = None
  End

  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End
 
  	Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= HelmsDeepWallBonus
		RefreshDelay	= 2000
		;Range			= 120		; Range is overridden to affect people on us since we are a wall
		;TargetEnemy		= Yes	; Alliances are ignored to affect people on us since we are a wall
	End	

	Geometry              = BOX
	GeometryMajorRadius   = 80.0
	GeometryMinorRadius   = 50.0
	GeometryHeight        = 45.0
	GeometryOffset		= X:0 Y:0 Z:0
	GeometryIsSmall       = No
	Shadow                = SHADOW_VOLUME
	
	GeometryContactPoint = X:-15 Y:50  Z:0 Grab
	GeometryContactPoint = X:-15 Y:43  Z:0 
	GeometryContactPoint = X:-15 Y:43  Z:48 
	GeometryContactPoint = X:30 Y:-43  Z:48 
	GeometryContactPoint = X:75 Y:43  Z:48 
	GeometryContactPoint = X:75 Y:43  Z:0 
	GeometryContactPoint = X:75  Y:50  Z:0 Grab
End

;------------------------------------------------------------------------------
;Helms Deep Gate Tower
Object HelmsDeepTower

SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    DefaultModelConditionState
      Model = RBHDTower
    End
    
    ModelConditionState  = DAMAGED
      Model         = RBHDTower_D1  
    End
    
    ModelConditionState  = REALLYDAMAGED
      Model         = RBHDTower_D1  
    End
	
    ModelConditionState  = RUBBLE
      Model         = RBHDTower_D1  
    End
    
    ModelConditionState  = POST_RUBBLE
		Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
    End
        
  End
  
  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepTower
  Side                = Rohan
  EditorSorting       = STRUCTURE
  Browser = REGION Helms_Deep STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160



; For Testing Purposes


  ; *** AUDIO Parameters ***

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone

;  VoiceSelect         = NuclearReactorSelect
 
;  UnitSpecificSounds
;  UnderConstruction     = UnderConstructionLoop
;  End
 

  ; *** ENGINEERING Parameters ***

  RadarPriority       = NOT_ON_RADAR
  KindOf              = PRELOAD STRUCTURE IMMOBILE SCORE NOT_AUTOACQUIRABLE IGNORED_IN_GUI ;SELECTABLE;@1 
 
  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  ; Immortal because they can't be destroyed, only damaged.  
  Body                  = ImmortalBody ModuleTag_B_03
    MaxHealth       = 10000.0
    MaxHealthDamaged = 5000
    MaxHealthReallyDamaged = 2500
  End

  ArmorSet
    Conditions        = None
    Armor             = HelmsDeepWalls
    DamageFX          = None
  End

  Behavior            = DestroyDie ModuleTag_07
    ;nothing
  End
 
  Geometry              = CYLINDER
  GeometryMajorRadius   = 68.0
  GeometryMinorRadius   = 68.0
  GeometryHeight        = 420.0

	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 420.0
	GeometryOffset		  = X:40.0 Y:-40.0 Z:0	
	
	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 420.0
	GeometryOffset		  = X:40.0 Y:40.0 Z:0	

	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 420.0
	GeometryOffset		  = X:-40.0 Y:40.0 Z:0	

	AdditionalGeometry    = CYLINDER
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 40.0
	GeometryHeight        = 420.0
	GeometryOffset		  = X:-40.0 Y:-40.0 Z:0	

	
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
End



;------------------------------------------------------------------------------------------
Object RBHelmsDeepGateDoorBig

SelectPortrait = BPRHelmsDeep

  ; *** ART Parameters ***

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes

    DefaultModelConditionState  
      Model = RBHDGatDr
    End


    ModelConditionState  = RUBBLE DOOR_1_OPENING
      Model         = RBHDGatDr_D4  
    End
	AnimationState = RUBBLE DOOR_1_OPENING
		Animation = Open 
			AnimationName	=	RBHDGatDr_D4.RBHDGatDr_D4
			AnimationMode	=	ONCE 
		End
    End
       
      ModelConditionState  = RUBBLE
      Model         = RBHDGatDr_D3  
    End
 	AnimationState = RUBBLE 
		Animation = Open 
			AnimationName	=	RBHDGatDr_D3.RBHDGatDr_D3
			AnimationMode	=	ONCE 
		End
    End
    
	AnimationState = DOOR_1_OPENING
		StateName = STATE_Open   
		Animation = Open 
			AnimationName	=	RBHDGatDr.RBHDGatDr
			AnimationMode	=	ONCE 
			AnimationBlendTime = 0
		End
		Flags = START_FRAME_LAST
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "STATE_Closed" then CurDrawableSetTransitionAnimState("TRANS_Closed_To_Open") end
		EndScript
    End
    TransitionState = TRANS_Closed_To_Open
		Animation = Open 
			AnimationName	=	RBHDGatDr.RBHDGatDr
			AnimationMode	=	ONCE 
		End
    End
        
	AnimationState = DOOR_1_CLOSING 
		StateName = STATE_Closed 
		Animation = Close 
			AnimationName	=	RBHDGatDr.RBHDGatDr
			AnimationMode	=	ONCE_BACKWARDS 
			AnimationBlendTime = 0
		End
		Flags = START_FRAME_FIRST
		BeginScript
			
			Prev = CurDrawablePrevAnimationState()
			if Prev == "STATE_Open" then CurDrawableSetTransitionAnimState("TRANS_Open_To_Closed") end
		EndScript
    End
    TransitionState = TRANS_Open_To_Closed
		Animation = Open 
			AnimationName	=	RBHDGatDr.RBHDGatDr
			AnimationMode	=	ONCE_BACKWARDS 
		End
		Flags = START_FRAME_LAST
    End

  End


  ; *** AUDIO Parameters ***

	VoiceSelect		= GateSelect

	SoundOnDamaged		= BuildingLightDamageStone
	SoundOnReallyDamaged	= BuildingHeavyDamageStone


  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:RBHelmsDeepGateDoorBig
  Side = Rohan
  EditorSorting   = STRUCTURE
  ThreatLevel = 1.0

  VisionRange         = 1600.0          ; Shroud clearing distance

  ArmorSet
    Conditions        = None
    Armor             = HelmsDeepGates
    DamageFX          = GateDamageFX
  End

	CommandSet = CastleGateCommandSet


	; *** ENGINEERING Parameters ***  
	KindOf                = STRUCTURE IMMOBILE SELECTABLE BLOCKING_GATE
	RadarPriority = NOT_ON_RADAR
	Body                  = ActiveBody ModuleTag_02
		MaxHealth       = 4000.0
	End

	Behavior = AIUpdateInterface ModuleTag_AIForSequentialScriptsToWork
		; required for sequential scripts to work on this object
	End

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
  Behavior = KeepObjectDie ModuleTag_IWantRubble
  End

	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		MaxUpdateRangeCap = 800
		AnimationSound = Sound: MinisTirithGateDie Animation:GBMgatedoorSKL.GBMgatedoorA3 Frames: 1 
	End

	Behavior = TransitionDamageFX ModleTag_hideBustedDoors
		PristineShowSubObject		HDG_GATER HDG_GATEL
		PristineHideSubObject		HDG_GATER_D1 HDG_GATER_D2 HDG_GATEL_D1 HDG_GATEL_D2
		DamagedShowSubObject		HDG_GATER_D1 HDG_GATEL_D1
		DamagedHideSubObject		HDG_GATER_D2 HDG_GATEL_D2 HDG_GATER HDG_GATEL
		ReallyDamagedShowSubObject	HDG_GATER_D2 HDG_GATEL_D2
		ReallyDamagedHideSubObject  HDG_GATER_D1  HDG_GATEL_D1 HDG_GATER HDG_GATEL
        DamagedFXList1 = Loc: X:0 Y:0 Z:0			FXList:FX_BasicSevereScreenShake
 	    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0		FXList:FX_BasicSevereScreenShake
 	    RubbleFXList1 = Loc: X:0 Y:0 Z:0			FXList:FX_HelmsDeepGateRubble
	End

	Behavior = GateOpenAndCloseBehavior ModuleTag_GATE
		ResetTimeInMilliseconds = 12200 ; important! this must be longer than the gates animation, ir it will twitch
		OpenByDefault = Yes
		PercentOpenForPathing = 50
		SoundOpeningGateLoop = GateOpenStart
		SoundClosingGateLoop = GateCloseStart
		SoundFinishedOpeningGate = GateOpenEnd
		SoundFinishedClosingGate = GateCloseEnd
		TimeBeforePlayingOpenSound = 6000
		TimeBeforePlayingClosedSound = 6000
	End


	Geometry              = BOX
	GeometryMajorRadius   = 16.0
	GeometryMinorRadius   = 62.0
	GeometryHeight        = 64.0
	GeometryName          = Closed
	GeometryIsSmall       = No

	AdditionalGeometry    = BOX
	GeometryMajorRadius   = 17.0
	GeometryMinorRadius   = 10.0
	GeometryHeight        = 60.0	
	GeometryOffset		  = X:10 Y:45 Z:0
	GeometryName          = OpenLeft
	
	AdditionalGeometry    = BOX
	GeometryMajorRadius   = 17.0
	GeometryMinorRadius   = 10.0
	GeometryHeight        = 60.0	
	GeometryOffset		  = X:10 Y:-45 Z:0
	GeometryName          = OpenRight
	
	GeometryContactPoint =	X:23	Y:-39	Z:0 Ram
	GeometryContactPoint =	X:12	Y:-45	Z:60
	GeometryContactPoint =	X:0		Y:-50	Z:0
	GeometryContactPoint =	X:0		Y:-25	Z:60
	GeometryContactPoint =	X:0		Y:0		Z:0 Ram
	GeometryContactPoint =	X:0		Y:25	Z:60
	GeometryContactPoint =	X:0		Y:50	Z:0
	GeometryContactPoint =	X:12	Y:45	Z:60
	GeometryContactPoint =	X:23	Y:39	Z:0 Ram
	

	Shadow                = SHADOW_VOLUME
End




;------------------------------------------------------------------------------------------
Object RBHelmsDeepGateDoorSmall

	SelectPortrait = BPRHelmsDeep

  ; *** ART Parameters ***

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes

    DefaultModelConditionState  
      Model = RBHDIGatDr
    End

	ModelConditionState  = RUBBLE DOOR_1_OPENING
       Model         = RBHDIGATDR_D4  
     End
 	AnimationState = RUBBLE DOOR_1_OPENING
 		Animation = Open 
 			AnimationName	=	RBHDIGATDR_D4.RBHDIGATDR_D4
 			AnimationMode	=	ONCE 
 		End
     End
        
       ModelConditionState  = RUBBLE
       Model         = RBHDIGATDR_D3  
     End
  	AnimationState = RUBBLE 
 		Animation = Open 
 			AnimationName	=	RBHDIGATDR_D3.RBHDIGATDR_D3
 			AnimationMode	=	ONCE 
 		End
     End
     
	AnimationState = DOOR_1_OPENING
		StateName = STATE_Open   
		Animation = Open 
			AnimationName	=	RBHDIGATDR.RBHDIGATDR
			AnimationMode	=	ONCE 
			AnimationBlendTime = 0
		End
		Flags = START_FRAME_LAST
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "STATE_Closed" then CurDrawableSetTransitionAnimState("TRANS_Closed_To_Open") end
		EndScript
    End
    TransitionState = TRANS_Closed_To_Open
		Animation = Open 
			AnimationName	=	RBHDIGATDR.RBHDIGATDR
			AnimationMode	=	ONCE 
		End
    End
        
	AnimationState = DOOR_1_CLOSING 
		StateName = STATE_Closed 
		Animation = Close 
			AnimationName	=	RBHDIGATDR.RBHDIGATDR
			AnimationMode	=	ONCE_BACKWARDS 
			AnimationBlendTime = 0
		End
		Flags = START_FRAME_FIRST
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "STATE_Open" then CurDrawableSetTransitionAnimState("TRANS_Open_To_Closed") end
		EndScript
    End
    TransitionState = TRANS_Open_To_Closed
		Animation = Open 
			AnimationName	=	RBHDIGATDR.RBHDIGATDR
			AnimationMode	=	ONCE_BACKWARDS 
		End
		Flags = START_FRAME_LAST
    End

  End


  ; *** AUDIO Parameters ***

	VoiceSelect		= GateSelect


  ; ***DESIGN parameters ***

  DisplayName      = OBJECT:RBHelmsDeepGateDoorSmall
  Side = Rohan
  EditorSorting   = STRUCTURE
  ThreatLevel = 1.0

  VisionRange         = 1600.0          ; Shroud clearing distance

  ArmorSet
    Conditions        = None
    Armor             = HelmsDeepGates
    DamageFX          = GateDamageFX
  End

	CommandSet = CastleGateCommandSet


	; *** ENGINEERING Parameters ***  
	KindOf                = STRUCTURE IMMOBILE SELECTABLE BLOCKING_GATE
	RadarPriority = NOT_ON_RADAR
	Body                  = ActiveBody ModuleTag_02
		MaxHealth       = 3500.0
	End

	Behavior = AIUpdateInterface ModuleTag_AIForSequentialScriptsToWork
		; required for sequential scripts to work on this object
	End

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
  Behavior = KeepObjectDie ModuleTag_IWantRubble
  End

	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		MaxUpdateRangeCap = 800
		AnimationSound = Sound: MinisTirithGateDie Animation:GBMgatedoorSKL.GBMgatedoorA3 Frames: 1 
	End

	Behavior = TransitionDamageFX ModleTag_hideBustedDoors
 		PristineShowSubObject		HDG_GATER HDG_GATEL
 		PristineHideSubObject		HDG_GATER_D1 HDG_GATER_D2 HDG_GATEL_D1 HDG_GATEL_D2
 		DamagedShowSubObject		HDG_GATER_D1 HDG_GATEL_D1
 		DamagedHideSubObject		HDG_GATER_D2 HDG_GATEL_D2 HDG_GATER HDG_GATEL
 		ReallyDamagedShowSubObject	HDG_GATER_D2 HDG_GATEL_D2
 		ReallyDamagedHideSubObject  HDG_GATER_D1  HDG_GATEL_D1 HDG_GATER HDG_GATEL
         DamagedFXList1 = Loc: X:0 Y:0 Z:0			FXList:FX_BasicSevereScreenShake
  	    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0		FXList:FX_BasicSevereScreenShake
  	    RubbleFXList1 = Loc: X:0 Y:0 Z:0			FXList:FX_HelmsDeepGateRubble
 	End

	Behavior = GateOpenAndCloseBehavior ModuleTag_GATE
		ResetTimeInMilliseconds = 12200 ; important! this must be longer than the gates animation, ir it will twitch
		OpenByDefault = Yes
		PercentOpenForPathing = 50
		SoundOpeningGateLoop = GateOpenStart
		SoundClosingGateLoop = GateCloseStart
		SoundFinishedOpeningGate = GateOpenEnd
		SoundFinishedClosingGate = GateCloseEnd
		TimeBeforePlayingOpenSound = 8500
		TimeBeforePlayingClosedSound = 8500
	End

	Geometry              = BOX
	GeometryMajorRadius   = 16.0
	GeometryMinorRadius   = 57.0
	GeometryHeight        = 56.0
	GeometryName          = Closed
	GeometryIsSmall       = No
	
	AdditionalGeometry    = BOX
	GeometryMajorRadius   = 20.0
	GeometryMinorRadius   = 5.0
	GeometryHeight        = 56.0	
	GeometryOffset		  = X:10 Y:50 Z:0
	GeometryName          = OpenLeft
	
	AdditionalGeometry    = BOX
	GeometryMajorRadius   = 20.0
	GeometryMinorRadius   = 5.0
	GeometryHeight        = 56.0	
	GeometryOffset		  = X:10 Y:-50 Z:0
	GeometryName          = OpenRight
	
	GeometryContactPoint = X:24		Y:-50	Z:0 Ram
	GeometryContactPoint = X:12		Y:-50	Z:45
	GeometryContactPoint = X:0		Y:-50	Z:0
	GeometryContactPoint = X:0		Y:-25	Z:54
	GeometryContactPoint = X:0		Y:0		Z:0 Ram
	GeometryContactPoint = X:0		Y:25	Z:54
	GeometryContactPoint = X:0		Y:50	Z:0
	GeometryContactPoint = X:12		Y:50	Z:45
	GeometryContactPoint = X:24		Y:50	Z:0 Ram
	
	
	Shadow                = SHADOW_VOLUME
End



;------------------------------------------------------------------------------------------
Object GondorKeep

	SelectPortrait = BPGBattleTower
 
	; *** ART Parameters ***
	ButtonImage = BGKeep
	  
	Draw = W3DScriptedModelDraw ModuleTag_Draw
	
		ExtraPublicBone = ARROW_01
		ExtraPublicBone = ARROW_02
		ExtraPublicBone = ARROW_03
		ExtraPublicBone = ARROW_04
		ExtraPublicBone = ARROW_05
		ExtraPublicBone = ARROW_06
		ExtraPublicBone = ARROW_07
		ExtraPublicBone = ARROW_08
		ExtraPublicBone = ARROW_09
		ExtraPublicBone = ARROW_10
		ExtraPublicBone = ARROW_11
		ExtraPublicBone = ARROW_12
		
		OkToChangeModelColor  = Yes
		UseStandardModelNames = Yes

    		StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD

		DefaultModelConditionState
			Model = GBBtlTwrs
			WeaponLaunchBone = PRIMARY ARROW_
		End

		IdleAnimationState
			Animation = IDLE
				AnimationName =	GBBtlTwrS.GBBtlTwrS
				AnimationMode =	LOOP	
			End		
			;BeginScript
			;	CurDrawableHideSubObject("B_FLAGBASE")
			;EndScript
		End	
    
        ModelConditionState   = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
			Model               = GBBtlTwrS_A
			ParticleSysBone   = DUSTBONE BuildingContructDust
		End;
		AnimationState        = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
			Animation           = GBBtlTwrS_A
				AnimationName     = GBBtlTwrS_A.GBBtlTwrS_A
				AnimationMode     = MANUAL
			End
			Flags				  = START_FRAME_FIRST
			BeginScript
				CurDrawablePlaySound("GondorBarracksBeginConstruction")
			EndScript
		End

    
    
		;---------------damage states-- garrisoned---------------
	    
        ;--damaged building
		ModelConditionState  = GARRISONED DESTROYED_FRONT
		Model         = GBBtlTwrS_D2  
			ParticleSysBone FireSmall01 FireBuildingSmall
			ParticleSysBone FireSmall02 FireBuildingSmall
			ParticleSysBone FireSmall03 FireBuildingSmall
			ParticleSysBone FireSmall04 FireBuildingSmall
			ParticleSysBone FireMedium01 FireBuildingMedium
			ParticleSysBone FireMedium02 FireBuildingMedium
     		ParticleSysBone FireLarge01 FireBuildingLarge
     		ParticleSysBone SmokeLarge01 SmokeBuildingLarge
		End
		AnimationState = GARRISONED DESTROYED_FRONT
			Animation	= GBBtlTwrS_D2.GBBtlTwrS_D2
				AnimationName		=	GBBtlTwrS_D2.GBBtlTwrS_D2
				AnimationMode		=	LOOP	
			End
			BeginScript
				CurDrawableHideSubObject("D2A")
			EndScript
		End
    
		ModelConditionState  = GARRISONED DESTROYED_RIGHT
		Model         = GBBtlTwrS_D2  
			ParticleSysBone FireSmall01 FireBuildingSmall
			ParticleSysBone FireSmall02 FireBuildingSmall
			ParticleSysBone FireSmall03 FireBuildingSmall
			ParticleSysBone FireSmall04 FireBuildingSmall
			ParticleSysBone FireMedium01 FireBuildingMedium
			ParticleSysBone FireMedium02 FireBuildingMedium
			ParticleSysBone FireLarge01 FireBuildingLarge
			ParticleSysBone SmokeLarge01 SmokeBuildingLarge
		End
		AnimationState = GARRISONED DESTROYED_RIGHT
			Animation	= GBBtlTwrS_D2.GBBtlTwrS_D2
				AnimationName		=	GBBtlTwrS_D2.GBBtlTwrS_D2
				AnimationMode		=	LOOP	
			End	
			BeginScript
				CurDrawableHideSubObject("D2B")
			EndScript
		End
	    

		ModelConditionState  = GARRISONED DESTROYED_BACK
		Model         = GBBtlTwrS_D2  
			ParticleSysBone FireSmall01 FireBuildingSmall
			ParticleSysBone FireSmall02 FireBuildingSmall
			ParticleSysBone FireSmall03 FireBuildingSmall
			ParticleSysBone FireSmall04 FireBuildingSmall
			ParticleSysBone FireMedium01 FireBuildingMedium
			ParticleSysBone FireMedium02 FireBuildingMedium
			ParticleSysBone FireLarge01 FireBuildingLarge
			ParticleSysBone SmokeLarge01 SmokeBuildingLarge
		End
		AnimationState = GARRISONED DESTROYED_BACK
			Animation	= GBBtlTwrS_D2.GBBtlTwrS_D2
				AnimationName		=	GBBtlTwrS_D2.GBBtlTwrS_D2
				AnimationMode		=	LOOP	
			End
			BeginScript
				CurDrawableHideSubObject("D2C")
			EndScript
		End

		ModelConditionState  = GARRISONED DESTROYED_LEFT
		Model         = GBBtlTwrS_D2  
			ParticleSysBone FireSmall01 FireBuildingSmall
			ParticleSysBone FireSmall02 FireBuildingSmall
			ParticleSysBone FireSmall03 FireBuildingSmall
			ParticleSysBone FireSmall04 FireBuildingSmall
			ParticleSysBone FireMedium01 FireBuildingMedium
			ParticleSysBone FireMedium02 FireBuildingMedium
			ParticleSysBone FireLarge01 FireBuildingLarge
			ParticleSysBone SmokeLarge01 SmokeBuildingLarge
		End
		AnimationState = GARRISONED DESTROYED_LEFT
			Animation	= GBBtlTwrS_D2.GBBtlTwrS_D2
				AnimationName		=	GBBtlTwrS_D2.GBBtlTwrS_D2
				AnimationMode		=	LOOP	
			End	
			BeginScript
				CurDrawableHideSubObject("D2D")
			EndScript
		End

		AnimationState = GARRISONED DAMAGED
			Animation           = GBBtlTwrs
				AnimationName     = GBBtlTwrs_D1.GBBtlTwrs_D1
				AnimationMode     = LOOP
			End
			EnteringStateFX	= FX_BuildingDamaged
		End

		AnimationState = GARRISONED REALLYDAMAGED
			Animation	= GBBtlTwrS_D2.GBBtlTwrS_D2
				AnimationName		=	GBBtlTwrS_D2.GBBtlTwrS_D2
				AnimationMode		=	LOOP	
			End
			EnteringStateFX	= FX_BuildingReallyDamaged
		End
    
		AnimationState = GARRISONED RUBBLE
			Animation	= GBBtlTwrS_D2.GBBtlTwrS_D2
				AnimationName		=	GBBtlTwrS_D2.GBBtlTwrS_D2
				AnimationMode		=	LOOP	
			End	
			BeginScript
				CurDrawableHideSubObject("D2A")
				CurDrawableHideSubObject("D2B")
				CurDrawableHideSubObject("D2C")
				CurDrawableHideSubObject("D2D")
			EndScript
		End

		AnimationState = GARRISONED CONSTRUCTION_COMPLETE
			Animation           = GBBtlTwrs
				AnimationName     = GBBtlTwrs.GBBtlTwrs
				AnimationMode     = LOOP
			End
		End

		AnimationState = GARRISONED
			Animation           = GBBtlTwrs
				AnimationName     = GBBtlTwrs.GBBtlTwrs
				AnimationMode     = LOOP
			End
		End

	
		;---------------damage states- non-garrisoned----------------
	    
        ;--damaged building
		ModelConditionState  = DESTROYED_FRONT
			Model         = GBBtlTwrS_D2  
			ParticleSysBone FireSmall01 FireBuildingSmall
			ParticleSysBone FireSmall02 FireBuildingSmall
			ParticleSysBone FireSmall03 FireBuildingSmall
			ParticleSysBone FireSmall04 FireBuildingSmall
			ParticleSysBone FireMedium01 FireBuildingMedium
			ParticleSysBone FireMedium02 FireBuildingMedium
     		ParticleSysBone FireLarge01 FireBuildingLarge
     		ParticleSysBone SmokeLarge01 SmokeBuildingLarge
		End
		AnimationState = DESTROYED_FRONT
			BeginScript
				CurDrawableHideSubObject("D2A")
			EndScript
		End
	    
		ModelConditionState  = DESTROYED_RIGHT
			Model         = GBBtlTwrS_D2  
			ParticleSysBone FireSmall01 FireBuildingSmall
			ParticleSysBone FireSmall02 FireBuildingSmall
			ParticleSysBone FireSmall03 FireBuildingSmall
			ParticleSysBone FireSmall04 FireBuildingSmall
			ParticleSysBone FireMedium01 FireBuildingMedium
			ParticleSysBone FireMedium02 FireBuildingMedium
			ParticleSysBone FireLarge01 FireBuildingLarge
			ParticleSysBone SmokeLarge01 SmokeBuildingLarge
		End
    
		AnimationState = DESTROYED_RIGHT
			BeginScript
				CurDrawableHideSubObject("D2B")
			EndScript
		End
    

		ModelConditionState  = DESTROYED_BACK
			Model         = GBBtlTwrS_D2  
			ParticleSysBone FireSmall01 FireBuildingSmall
			ParticleSysBone FireSmall02 FireBuildingSmall
			ParticleSysBone FireSmall03 FireBuildingSmall
			ParticleSysBone FireSmall04 FireBuildingSmall
			ParticleSysBone FireMedium01 FireBuildingMedium
			ParticleSysBone FireMedium02 FireBuildingMedium
			ParticleSysBone FireLarge01 FireBuildingLarge
			ParticleSysBone SmokeLarge01 SmokeBuildingLarge
		End
		AnimationState = DESTROYED_BACK
			BeginScript
				CurDrawableHideSubObject("D2C")
			EndScript
		End

		ModelConditionState  = DESTROYED_LEFT
			Model         = GBBtlTwrS_D2  
			ParticleSysBone FireSmall01 FireBuildingSmall
			ParticleSysBone FireSmall02 FireBuildingSmall
			ParticleSysBone FireSmall03 FireBuildingSmall
			ParticleSysBone FireSmall04 FireBuildingSmall
			ParticleSysBone FireMedium01 FireBuildingMedium
			ParticleSysBone FireMedium02 FireBuildingMedium
			ParticleSysBone FireLarge01 FireBuildingLarge
			ParticleSysBone SmokeLarge01 SmokeBuildingLarge
		End
		AnimationState = DESTROYED_LEFT
			BeginScript
				CurDrawableHideSubObject("D2D")
			EndScript
		End
    
    
		ModelConditionState  = DAMAGED 
			Model         = GBBtlTwrs_D1
		
		End 
        AnimationState = DAMAGED
			EnteringStateFX	= FX_BuildingDamaged
		End

		AnimationState = REALLYDAMAGED
			EnteringStateFX	= FX_BuildingReallyDamaged
	     	EnteringStateFX	= FX_BuildingReallyDamaged
		End

   

		ModelConditionState  = REALLYDAMAGED 
			Model         = GBBtlTwrs_D2
	
		End    
    

		ModelConditionState  = RUBBLE
			Model         = GBBtlTwrS_D2  
			ParticleSysBone SmokeLarge01 SmokeBuildingLarge
		End
    

		AnimationState = RUBBLE
			BeginScript
				CurDrawableHideSubObject("D2A")
				CurDrawableHideSubObject("D2B")
				CurDrawableHideSubObject("D2C")
				CurDrawableHideSubObject("D2D")
			EndScript
		End

		ModelConditionState  = POST_RUBBLE
			Model         = None
			ParticleSysBone NONE SmokeBuildingMediumRubble
		End
    
		AnimationState = POST_RUBBLE
		End

		ModelConditionState  = POST_COLLAPSE
			Model         = None
			ParticleSysBone NONE SmokeBuildingMediumRubble
		End
		AnimationState = POST_COLLAPSE
		End

	End ; draw


	Draw = W3DFloorDraw ModuleTag_DrawFloor    
    		StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD
		ModelName = GBBtlTwrS_Bib
	End

 
	; ***DESIGN parameters ***
	DisplayName         = OBJECT:GondorKeep
	Side                = Gondor
	EditorSorting       = STRUCTURE
	ThreatLevel = 1.0
	 
	BuildCost           = GONDOR_KEEP_BUILDCOST
	BuildTime           = GONDOR_KEEP_BUILDTIME
	VisionRange         = VISION_BASE_DEFENSE
 	ShroudClearingRange = SHROUD_CLEAR_BASE_DEFENSE
	BountyValue         = GONDOR_KEEP_BOUNTY_VALUE
  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    ;DamageFX          = StructureDamageFXNoShake
  End

	CommandSet = BattleTowerCommandSet
 
 	WeaponSet
 		Weapon				= PRIMARY KeepBow
 		Conditions			= None
 		AutoChooseSources	= PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
 	End 
    

	; *** AUDIO Parameters ***

	VoiceSelect			= GondorBattleTowerSelect

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone

	VoiceSelectUnderConstruction	= BuildingGoodVoiceSelectUnderConstruction

	UnitSpecificSounds
		UnderConstruction		= BuildingConstructionLoop  ; Built first time
		; UnderRepairFromDamage	= NoSound					; Repaired No animation on the building, so don't bother playing sound
		UnderRepairFromRubble	= BuildingConstructionLoop	; Repaired from completely destroyed (not used???)
	End


	; *** ENGINEERING Parameters ***

	RadarPriority       = STRUCTURE
	KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE NEED_BASE_FOUNDATION CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT	; GARRISONABLE_UNTIL_DESTROYED GARRISON
	 
	Behavior = WeaponSetUpgrade ModuleTag_FireArrows
 		TriggeredBy			= Upgrade_BattleTowersToUseFireArrows
 	End
 	Behavior = AIUpdateInterface ModuleTag_SoWeCanUseWeapon
 		AutoAcquireEnemiesWhenIdle	= Yes
 		MoodAttackCheckRate			= 250
		AILuaEventsList				= GarrisonableFunctions
 	End

	 
	Behavior            = GettingBuiltBehavior ModuleTag_04
		WorkerName		  = GondorWorkerNoSelect
	End


	Body                        = StructureBody ModuleTag_05
		MaxHealth                 = GONDOR_KEEP_HEALTH
		MaxHealthDamaged          = GONDOR_KEEP_HEALTH_DAMAGED
		MaxHealthReallyDamaged    = GONDOR_KEEP_HEALTH_REALLY_DAMAGED
		DamageCreationList = OCL_BuildingDamageList01 CATAPULT_ROCK
	    
		DamageCreationList = OCL_GBBtlTwrSD2_Chunk1 CATAPULT_ROCK FRONT_DESTROYED
		DamageCreationList = OCL_GBBtlTwrSD2_Chunk2 CATAPULT_ROCK RIGHT_DESTROYED
		DamageCreationList = OCL_GBBtlTwrSD2_Chunk3 CATAPULT_ROCK BACK_DESTROYED
		DamageCreationList = OCL_GBBtlTwrSD2_Chunk4 CATAPULT_ROCK LEFT_DESTROYED
	End

	Behavior                  = BuildingBehavior BuildingModuleTag
		NightWindowName         = WINDOW_N01
		;FireWindowName          = WINDOW_F01
		;GlowWindowName	    = WINDOW_G01
	End
 
	Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
		DestructionDelay  = 5000
	End
	  
	Behavior                  = StructureCollapseUpdate ModuleTag_StructureCollapseUpdate
		MinCollapseDelay        = 000
		MaxCollapseDelay        = 000
		CollapseDamping         = .5
		MaxShudder              = 0.6
		MinBurstDelay           = 250
		MaxBurstDelay           = 800
		BigBurstFrequency       = 4
		FXList                  = INITIAL   FX_StructureMediumCollapse
		CollapseHeight			= 140
	End

	Behavior = CastleMemberBehavior ModuleTag_CMB
	End GBGoBat_selecta

	Behavior       = EvacuateDamage ModuleTag_evacuateDamage
		WeaponThatCausesEvacuation  = MordorCatapultHumanHeads
	End

	Behavior = RefundDie ModuleTag_refund
		UpgradeRequired = Upgrade_MarketplaceUpgradeDefiance
		BuildingRequired = ANY +GondorMarketPlace
		RefundPercent = 50%
	End

	Behavior = AttributeModifierUpgrade ModuleTag_Reinforced
		TriggeredBy				= Upgrade_NumenorStonework
		AttributeModifier		= NumenorStoneworkKeep_Bonus
	End


;	Behavior = HordeGarrisonContain ModuleTag_hordeGarrison
;		ObjectStatusOfContained	= UNSELECTABLE CAN_ATTACK
;		ContainMax              = 4
;		MaxHordeCapacity        = 4
;		DamagePercentToUnits    = 0%
;		PassengerFilter			= ANY +INFANTRY +HORDE -CAVALRY
;		AllowEnemiesInside      = Yes
;		AllowNeutralInside      = Yes
;		NumberOfExitPaths       = 1 ; Defaults to 1.  Set 0 to not use ExitStart/ExitEnd, set higher than 1 to use ExitStart01-nn/ExitEnd01-nn
;		PassengerBonePrefix     = PassengerBone:ARROW_ KindOf:INFANTRY
;		EntryOffset				= X:45.0 Y:0.0 Z:0.0
;		ExitOffset				= X:45.0 Y:0.0 Z:0.0
;		
;		;PassengersTestCollisionHeight = 80
;		;Slots                         = 1
;		;EnterSound                     = GarrisonEnter
;		;ExitSound                      = GarrisonExit
;		;ExitDelay               = 250
;		;GoAggressiveOnExit      = Yes ; AI Will tell people to set their mood to Aggressive on exiting
;		;ForceOrientationContainer = No  ; otherwise contained units can't orient themselves towards their targets...
;	End 

	Geometry              = CYLINDER
	GeometryMajorRadius   = 26.4
	GeometryMinorRadius   = 26.4
	GeometryHeight        = 112.0
	GeometryIsSmall       = No
	
	GeometryContactPoint = X:0		Y:0		Z:5	
	GeometryContactPoint = X:0		Y:0		Z:112	Swoop
	
	
	Shadow                = SHADOW_VOLUME
	BuildCompletion     = PLACED_BY_PLAYER
End

;------------------------------------------------------------
;
;	GondorBattleTower is now exactly the same as the keep
;
ChildObject GondorBattleTower GondorKeep
End

;------------------------------------------------------------
Object RohanRuin01

	; *** ART Parameters ***
		Draw = W3DScriptedModelDraw ModuleTag_01
			OkToChangeModelColor = Yes
			DefaultModelConditionState
				Model = RBGenRuin01
			End		
		End

	; *** AUDIO Parameters ***

	; ***DESIGN parameters ***
		DisplayName      = OBJECT:Ruins
		EditorSorting   = STRUCTURE

		ArmorSet
			Conditions        = None
			Armor             = NoArmor
			DamageFX          = None
		End

; *** ENGINEERING Parameters ***  
		KindOf                = STRUCTURE IMMOBILE SELECTABLE
		RadarPriority = STRUCTURE
		Body                  = ActiveBody ModuleTag_03
			MaxHealth				= 2000.0
			MaxHealthDamaged  		= 1500.0
			MaxHealthReallyDamaged 	= 1000.0
		End

	Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
		DestructionDelay  = 3000
	End

  Behavior                  = StructureCollapseUpdate ModuleTag_04
    MinCollapseDelay        = 000
    MaxCollapseDelay        = 000
    CollapseDamping         = .5
    MaxShudder              = 0.6
    MinBurstDelay           = 250
    MaxBurstDelay           = 800
    BigBurstFrequency       = 4
    FXList                  = INITIAL   FX_StructureMediumCollapse
  End

  
	Geometry              = BOX
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 42.4
	GeometryHeight        = 72.8
	GeometryIsSmall       = No
	Shadow                = SHADOW_VOLUME
End
;------------------------------------------------------------


;------------------------------------------------------------
Object RohanRuin02

	; *** ART Parameters ***
		Draw = W3DScriptedModelDraw ModuleTag_01
			OkToChangeModelColor = Yes
			DefaultModelConditionState
				Model = RBGenRuin02
			End		
		End

	; *** AUDIO Parameters ***

	; ***DESIGN parameters ***
		DisplayName      = OBJECT:Ruins
		EditorSorting   = STRUCTURE

		ArmorSet
			Conditions        = None
			Armor             = NoArmor
			DamageFX          = None
		End

; *** ENGINEERING Parameters ***  
		KindOf                = STRUCTURE IMMOBILE SELECTABLE
		RadarPriority = STRUCTURE
		Body                  = ActiveBody ModuleTag_03
			MaxHealth				= 2000.0
			MaxHealthDamaged  		= 1500.0
			MaxHealthReallyDamaged 	= 1000.0
		End

	Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
		DestructionDelay  = 3000
	End

  Behavior                  = StructureCollapseUpdate ModuleTag_04
    MinCollapseDelay        = 000
    MaxCollapseDelay        = 000
    CollapseDamping         = .5
    MaxShudder              = 0.6
    MinBurstDelay           = 250
    MaxBurstDelay           = 800
    BigBurstFrequency       = 4
    FXList                  = INITIAL   FX_StructureMediumCollapse
  End
  
  
	Geometry              = BOX
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 42.4
	GeometryHeight        = 72.8
	GeometryIsSmall       = No
	Shadow                = SHADOW_VOLUME
End
;------------------------------------------------------------

;------------------------------------------------------------
Object RohanRuin03

	; *** ART Parameters ***
		Draw = W3DScriptedModelDraw ModuleTag_01
			OkToChangeModelColor = Yes
			DefaultModelConditionState
				Model = RBGenRuin03
			End		
		End

	; *** AUDIO Parameters ***

	; ***DESIGN parameters ***
		DisplayName      = OBJECT:Ruins
		EditorSorting   = STRUCTURE

		ArmorSet
			Conditions        = None
			Armor             = NoArmor
			DamageFX          = None
		End

; *** ENGINEERING Parameters ***  
		KindOf                = STRUCTURE IMMOBILE SELECTABLE
		RadarPriority = STRUCTURE
		Body                  = ActiveBody ModuleTag_03
			MaxHealth				= 2000.0
			MaxHealthDamaged  		= 1500.0
			MaxHealthReallyDamaged 	= 1000.0
		End

	Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
		DestructionDelay  = 3000
	End

  Behavior                  = StructureCollapseUpdate ModuleTag_04
    MinCollapseDelay        = 000
    MaxCollapseDelay        = 000
    CollapseDamping         = .5
    MaxShudder              = 0.6
    MinBurstDelay           = 250
    MaxBurstDelay           = 800
    BigBurstFrequency       = 4
    FXList                  = INITIAL   FX_StructureMediumCollapse
  End
  
  
	Geometry              = BOX
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 42.4
	GeometryHeight        = 72.8
	GeometryIsSmall       = No
	Shadow                = SHADOW_VOLUME
End
;------------------------------------------------------------


;------------------------------------------------------------
Object RohanFenceRuin01

	; *** ART Parameters ***
		Draw = W3DScriptedModelDraw ModuleTag_01
			OkToChangeModelColor = Yes
			DefaultModelConditionState
				Model = RPGenFnceRuin1
			End		
		End

	; *** AUDIO Parameters ***

	; ***DESIGN parameters ***
		DisplayName      = OBJECT:Ruins
		EditorSorting   = STRUCTURE

		ArmorSet
			Conditions        = None
			Armor             = NoArmor
			DamageFX          = None
		End

; *** ENGINEERING Parameters ***  
		KindOf                = STRUCTURE IMMOBILE 
		RadarPriority = STRUCTURE
		Body                  = ActiveBody ModuleTag_03
			MaxHealth				= 2000.0
			MaxHealthDamaged  		= 1500.0
			MaxHealthReallyDamaged 	= 1000.0
		End

	Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
		DestructionDelay  = 3000
	End

  Behavior                  = StructureCollapseUpdate ModuleTag_04
    MinCollapseDelay        = 000
    MaxCollapseDelay        = 000
    CollapseDamping         = .5
    MaxShudder              = 0.6
    MinBurstDelay           = 250
    MaxBurstDelay           = 800
    BigBurstFrequency       = 4
    FXList                  = INITIAL   FX_StructureMediumCollapse
  End
  
  
;	Geometry              = BOX
;	GeometryMajorRadius   = 40.0
;	GeometryMinorRadius   = 42.4
;	GeometryHeight        = 72.8
;	GeometryIsSmall       = No
;	;GeometryRotationAnchorOffset = X:1037.871 Y:0
;	Shadow                = SHADOW_VOLUME
End
;------------------------------------------------------------

;------------------------------------------------------------
Object RohanFenceRuin02

	; *** ART Parameters ***
		Draw = W3DScriptedModelDraw ModuleTag_01
			OkToChangeModelColor = Yes
			DefaultModelConditionState
				Model = RPGenFnceRuin2
			End		
		End

	; *** AUDIO Parameters ***

	; ***DESIGN parameters ***
		DisplayName      = OBJECT:Ruins
		EditorSorting   = STRUCTURE

		ArmorSet
			Conditions        = None
			Armor             = NoArmor
			DamageFX          = None
		End

; *** ENGINEERING Parameters ***  
		KindOf                = STRUCTURE IMMOBILE 
		RadarPriority = STRUCTURE
		Body                  = ActiveBody ModuleTag_03
			MaxHealth				= 2000.0
			MaxHealthDamaged  		= 1500.0
			MaxHealthReallyDamaged 	= 1000.0
		End

	Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
		DestructionDelay  = 3000
	End

  Behavior                  = StructureCollapseUpdate ModuleTag_04
    MinCollapseDelay        = 000
    MaxCollapseDelay        = 000
    CollapseDamping         = .5
    MaxShudder              = 0.6
    MinBurstDelay           = 250
    MaxBurstDelay           = 800
    BigBurstFrequency       = 4
    FXList                  = INITIAL   FX_StructureMediumCollapse
  End

  
	Geometry              = BOX
	GeometryMajorRadius   = 40.0
	GeometryMinorRadius   = 42.4
	GeometryHeight        = 72.8
	GeometryIsSmall       = No
	;GeometryRotationAnchorOffset = X:1037.871 Y:0
	Shadow                = SHADOW_VOLUME
End
;------------------------------------------------------------


;------------------------------------------------------------
Object RohanGenericVillage

	; *** ART Parameters ***
		Draw = W3DScriptedModelDraw ModuleTag_01
			OkToChangeModelColor = Yes
			DefaultModelConditionState
				Model = GenRBGBVil
			End		
		End

	; *** AUDIO Parameters ***

	; ***DESIGN parameters ***
		DisplayName      = OBJECT:Village
		EditorSorting   = STRUCTURE

		ArmorSet
			Conditions        = None
			Armor             = NoArmor
			DamageFX          = None
		End

; *** ENGINEERING Parameters ***  
		KindOf                = STRUCTURE IMMOBILE 
		RadarPriority = STRUCTURE
		Body                  = ActiveBody ModuleTag_03
			MaxHealth				= 2000.0
			MaxHealthDamaged  		= 1500.0
			MaxHealthReallyDamaged 	= 1000.0
		End

	Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
		DestructionDelay  = 3000
	End

  Behavior                  = StructureCollapseUpdate ModuleTag_04
    MinCollapseDelay        = 000
    MaxCollapseDelay        = 000
    CollapseDamping         = .5
    MaxShudder              = 0.6
    MinBurstDelay           = 250
    MaxBurstDelay           = 800
    BigBurstFrequency       = 4
    FXList                  = INITIAL   FX_StructureMediumCollapse
  End
  
 
;	Geometry              = BOX
;	GeometryMajorRadius   = 40.0
;	GeometryMinorRadius   = 42.4
;	GeometryHeight        = 72.8
;	GeometryIsSmall       = No
;	;GeometryRotationAnchorOffset = X:1037.871 Y:0
;	Shadow                = SHADOW_VOLUME
End
;------------------------------------------------------------

Object GondorCampKeepSymbioticBase

	SelectPortrait = BPGCamp

  ; *** ART Parameters ***

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes

    DefaultModelConditionState  
      Model = GBCCenter_A
;      ParticleSysBone	  = glowbone01 TorchGlow
;      ParticleSysBone     = glowbone02 furnaceSmoke
    End
    
	IdleAnimationState
		Animation             = Idle
			AnimationName     = GBCCenter_A.GBCCenter_A
			AnimationMode     = MANUAL
			AnimationBlendTime = 0			
        End
        Flags = START_FRAME_LAST
		BeginScript
;			CurDrawableShowSubObject("FIRE02")
		EndScript
        
	End  

;------------Build Up States
    ModelConditionState   = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
      Model               = GBCCenter_A
;      ParticleSysBone	  = NONE BuildingDoughnutCloud
      ParticleSysBone     = NONE BuildingContructDust
    End  

	AnimationState          = ACTIVELY_BEING_CONSTRUCTED
		Animation
			AnimationName	= GBCCenter_A.GBCCenter_A
			AnimationMode   = MANUAL
		End
		BeginScript
;			CurDrawableHideSubObject("FIRE02")
			CurDrawablePlaySound("GondorBarracksBeginConstruction")
		EndScript
	End

;------------Build Up States
    ModelConditionState   = BASE_BUILD
      Model               = GBCCenter_A
;      ParticleSysBone	  = NONE BuildingDoughnutCloud
      ParticleSysBone     = NONE BuildingContructDust
    End  

	AnimationState		  = BASE_BUILD
		Animation
			AnimationName = GBCCenter_A.GBCCenter_A
			AnimationMode = ONCE
			AnimationBlendTime = 0			
			AnimationSpeedFactorRange = 2.0 2.0 ; 300 frame anim, but need to shrink down to 5 seconds
		End
		BeginScript
;			CurDrawableHideSubObject("FIRE02")
		EndScript
	End

	AnimationState		  = JUST_BUILT
		Animation
			AnimationName = GBCCenter_A.GBCCenter_A
			AnimationMode = MANUAL			
			AnimationBlendTime = 0
		End
        Flags = START_FRAME_FIRST
		BeginScript
;			CurDrawableHideSubObject("FIRE02")
		EndScript
	End

    ModelConditionState  = DAMAGED
      Model         = GBCCenter_D1  
      ParticleSysBone dustbone01 TrebuchetImpactDebris
;      ParticleSysBone	  = glowbone01 TorchGlow
;      ParticleSysBone     = glowbone02 furnaceSmoke
	
    End
    AnimationState = DAMAGED
	EnteringStateFX	= FX_BuildingDamaged
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = GBCCenter_D2  
      ParticleSysBone     = glowbone02 TrebuchetImpactDebris
      ParticleSysBone	  = glowbone01 Explosion5
	
    End
    AnimationState = REALLYDAMAGED
	EnteringStateFX	= FX_BuildingReallyDamaged
    End
    
    ModelConditionState  = RUBBLE
      Model         = GBCCenter_D2
      ParticleSysBone dustbone01 TrebuchetImpactDebris
      ParticleSysBone	  = glowbone01 Explosion5
      ParticleSysBone     = glowbone02 BuildingChunkDebris
    End
    AnimationState = RUBBLE
    End

  	ModelConditionState  = POST_RUBBLE
		Model         = GBGenRubble
		ParticleSysBone NONE SmokeBuildingMediumRubble
	End
    AnimationState = POST_RUBBLE
    End
	
	ModelConditionState  = POST_COLLAPSE
		Model         = GBGenRubble
		ParticleSysBone NONE SmokeBuildingMediumRubble
	End
    AnimationState = POST_COLLAPSE
    End

  End


	; *** AUDIO Parameters ***

	VoiceSelect = GondorCitadelSelect

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone

	VoiceSelectUnderConstruction	= BuildingEvilVoiceSelectUnderConstruction

	UnitSpecificSounds
		UnderConstruction		= BuildingConstructionLoop  ; Built first time
		; UnderRepairFromDamage	= NoSound					; Repaired No animation on the building, so don't bother playing sound
		UnderRepairFromRubble	= BuildingConstructionLoop	; Repaired from completely destroyed (not used???)
	End

	EvaEventDieOwner = CitadelDie


	; ***DESIGN parameters ***
	DisplayName      = OBJECT:GondorCampKeep
	Side = Gondor
	EditorSorting   = STRUCTURE
	ThreatLevel = 1.0
	BuildCost           = 1000
	BuildTime           = 20.0           ; in seconds
	CommandSet			= GenericKeepCommandSet

	ArmorSet
		Conditions        = None
		Armor             = StructureArmor
		DamageFX          = None
	End

	; *** ENGINEERING Parameters ***  
	KindOf            = STRUCTURE SELECTABLE IMMOBILE CASTLE_KEEP MP_COUNT_FOR_VICTORY AUTO_RALLYPOINT
	RadarPriority		= STRUCTURE
	Body              = ActiveBody ModuleTag_ActiveBody
		MaxHealth       = 5000.0
	End

	Behavior = GettingBuiltBehavior ModuleTag_04
		WorkerName	= GondorWorkerNoSelect
		SpawnTimer  = 15
		RebuildWhenDead = Yes
	    ; SelfBuildingLoop = BuildingConstructionLoop ; Only played if we DON'T spawn a worker
		;SelfRepairFromDamageLoop  = NoSound         ; This doesn't cause an animation, so don't bother playing a sound
		;SelfRepairFromRubbleLoop  = BuildingConstructionLoop
	End

	Behavior = CastleMemberBehavior ModuleTag_CMB
		BeingBuiltSound = BuildingConstructionLoop
	End 

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
  Behavior = KeepObjectDie ModuleTag_IWantRubble
  End
  
     Behavior                  = StructureCollapseUpdate ModuleTag_06
       MinCollapseDelay        = 000
       MaxCollapseDelay        = 000
       CollapseDamping         = .5
       MaxShudder              = 0.6
       MinBurstDelay           = 250
       MaxBurstDelay           = 800
       BigBurstFrequency       = 4
       FXList                  = INITIAL   FX_StructureMediumCollapse
     End

	Behavior                  = RubbleRiseUpdate ModuleTag_07
		MinRubbleRiseDelay      = 000
		MaxRubbleRiseDelay      = 000
		;RubbleRiseDamping       = .5
		RubbleHeight            = 4.0
		MaxShudder              = 0.6
		MinBurstDelay           = 250
		MaxBurstDelay           = 800
		BigBurstFrequency       = 4
		FXList                  = INITIAL FX_StructureMediumCollapse
	End  
  
  Geometry              = CYLINDER
  GeometryMajorRadius   = 16.0
  GeometryMinorRadius   = 16.0
  GeometryHeight        = 88.0
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
End



ChildObject GondorCampKeepSymbioticA GondorCampKeepSymbioticBase
	Body              = ActiveBody ModuleTag_ActiveBody
		MaxHealth       = 5000.0
	End

End
ChildObject GondorCampKeepSymbioticB GondorCampKeepSymbioticBase
	Body              = SymbioticStructuresBody ModuleTag_SymbioticBody
		Symbiote = KeepLeft
	End
End



;------------------------ DEFENSE FOUNDATIONS --------------------------
;------------------------------------------------------------------------------------------
;Rohan Base Defence Foundation -- the area where faction rohan buildings can be built on
Object RohanBaseDefenceFoundation
 
	SelectPortrait = BPRCamp_Plot
  ; *** ART Parameters ***

	Scale = 0.7
  
	Draw = W3DScriptedModelDraw ModuleTag_Draw2
	    DefaultModelConditionState
			Model = OBBFoundationX
		End
		ModelConditionState = WORLD_BUILDER
  			Model = RBWatchTowM
  		End
		
	End
   Draw = W3DFloorDraw ModuleTag_Draw
      ModelName = RBFoundationM
  End
 
  ;PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:RohanBaseDefenseFoundation
  Side                = Rohan
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160

  CommandSet = RohanBaseDefenceFoundationCommandSet

  ; *** AUDIO Parameters ***
	
	VoiceSelect		= Gui_PlotSelect


  ; *** ENGINEERING Parameters ***

  RadarPriority       = STRUCTURE
  KindOf              = STRUCTURE SELECTABLE IMMOBILE BASE_FOUNDATION BASE_DEFENSE_FOUNDATION UNATTACKABLE MP_COUNT_FOR_VICTORY NO_COLLIDE DO_NOT_CLASSIFY
 
  Behavior            = FoundationAIUpdate ModuleTag_foundationAI
  End

  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  Body                = ImmortalBody ModuleTag_05
    MaxHealth         = 15000.0
  End
 
  Geometry              = BOX
  GeometryMajorRadius   = 24.0
  GeometryMinorRadius   = 24.0
  GeometryHeight        = 0.8
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  BuildCompletion		= PLACED_BY_PLAYER
End





;Gondor Base Defence Foundation -- the area where faction rohan buildings can be built on
Object GondorBaseDefenceFoundation
 
	SelectPortrait = BPGCamp_Plot
  ; *** ART Parameters ***

	Scale = 0.7
  
	Draw = W3DScriptedModelDraw ModuleTag_Draw2
	    DefaultModelConditionState
			Model = OBBFoundationX
		End
		ModelConditionState = WORLD_BUILDER
  			Model = GBBtlTwrM
  		End
		
	End
   Draw = W3DFloorDraw ModuleTag_Draw
      ModelName = GBFoundationM
  End
 
  ;PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:GondorBaseDefenseFoundation
  Side                = Gondor
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 1
  BuildTime           = 5.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160

  CommandSet = GondorBaseDefenceFoundationCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = Gui_PlotSelect

  ; *** ENGINEERING Parameters ***
  RadarPriority       = STRUCTURE
  KindOf              = STRUCTURE SELECTABLE IMMOBILE BASE_FOUNDATION BASE_DEFENSE_FOUNDATION UNATTACKABLE MP_COUNT_FOR_VICTORY NO_COLLIDE DO_NOT_CLASSIFY
 
  Behavior            = FoundationAIUpdate ModuleTag_foundationAI
  End

  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  Body                = ImmortalBody ModuleTag_05
    MaxHealth         = 15000.0
  End
 
  Geometry              = BOX
  GeometryMajorRadius   = 24.0
  GeometryMinorRadius   = 24.0
  GeometryHeight        = 0.8
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  BuildCompletion		= PLACED_BY_PLAYER
End


;------------------------------------------------------------------------------
;A special version of the Rohan Hero Statue: Give no leadership bonus
;------------------------------------------------------------------------------
Object RohanHeroStatueNoLeadership

	SelectPortrait = BPRHeroicStatue

  Draw = W3DScriptedModelDraw ModuleTag_Draw
		OkToChangeModelColor  = Yes
		UseStandardModelNames = Yes

		DefaultModelConditionState
			Model = RPHeroStat
;			ParticleSysBone	    = NONE BuildingDoughnutCloud
;			ParticleSysBone	    = NONE StatueHeroFX
		End
    
		ModelConditionState     = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
			Model               = RPHeroStat_A
;			ParticleSysBone	    = NONE BuildingDoughnutCloud
			ParticleSysBone     = NONE BuildingContructDust
		End  
		AnimationState          = ACTIVELY_BEING_CONSTRUCTED
			Animation
				AnimationName	= RPHeroStat_A.RPHeroStat_A
				AnimationMode   = MANUAL
			End
			BeginScript
				CurDrawablePlaySound("GondorBarracksBeginConstruction")
			EndScript
		End

		ModelConditionState     = DAMAGED
			Model               = RPHeroStat_D1
	
		End  
		AnimationState =	DAMAGED
			EnteringStateFX	= FX_StatueDamaged
		End
		
		
		ModelConditionState     = REALLYDAMAGED
			Model               = RPHeroStat_D2
	
		End  
    	AnimationState =	REALLYDAMAGED
			EnteringStateFX	= FX_StatueDamaged
		End
		
			
		ModelConditionState  = RUBBLE
			Model         =  RPHeroStat_D2 
			ParticleSysBone SmokeLarge01 SmokeBuildingLarge
		End
		AnimationState = RUBBLE
		End

		ModelConditionState  = POST_RUBBLE
			Model         = None
			ParticleSysBone NONE SmokeBuildingMediumRubble
		End
		ModelConditionState  = POST_COLLAPSE
			Model         = None
			ParticleSysBone NONE SmokeBuildingMediumRubble
		End
  End



  PlacementViewAngle  = 90
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HelmsDeepdiWall
;  Description 	      = OBJECT:RohanStatueDescription
  Side                 = Rohan
    IsTrainable        = No
  EditorSorting        = STRUCTURE
  ThreatLevel          = 0.0
 
  BuildCost            = ROHAN_HEROSTATUE_BUILDCOST
  BuildTime            = ROHAN_HEROSTATUE_BUILDTIME            ; in seconds
  VisionRange          = ROHAN_HEROSTATUE_VISIONRANGE          ; Shroud clearing distance
  ShroudClearingRange  = ROHAN_HEROSTATUE_SHROUDCLEAR
  BountyValue          = ROHAN_HEROSTATUE_BOUNTY_VALUE
  
;  ArmorSet
;    Conditions        = None
;    Armor             = StructureArmor
;    DamageFX          = StructureDamageFXNoShake
;  End


  ; *** AUDIO Parameters ***

  VoiceSelect  = GondorStatueSelect

  SoundOnDamaged        = BuildingLightDamageWood
  SoundOnReallyDamaged  = BuildingHeavyDamageWood

  VoiceSelectUnderConstruction  = BuildingGoodVoiceSelectUnderConstruction

  UnitSpecificSounds
		UnderConstruction		= BuildingConstructionLoop  ; Built first time
		; UnderRepairFromDamage	= NoSound					; Repaired No animation on the building, so don't bother playing sound
		UnderRepairFromRubble	= BuildingConstructionLoop	; Repaired from completely destroyed (not used???)
  End

 
  ; *** ENGINEERING Parameters ***

  RadarPriority  = STRUCTURE
  KindOf         = PRELOAD STRUCTURE IMMOBILE SCORE NEED_BASE_FOUNDATION MADE_OF_STONE ;SELECTABLE 
 

  Behavior     = CastleMemberBehavior ModuleTag_CMB
  End 

  Body         = StructureBody ModuleTag_05
    MaxHealth  = ROHAN_HEROSTATUE_MAXHEALTH
  End

  Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
    DestructionDelay        = 5000
  End

  Behavior = GettingBuiltBehavior ModuleTag_GetBuilt
    ;WorkerName             = "" ; Not RohanWorker, I build myself
    SpawnTimer              = 120
    RebuildWhenDead         = No
    SelfBuildingLoop = BuildingConstructionLoop ; Only played if we DON'T spawn a worker
	SelfRepairFromDamageLoop  = NoSound         ; This doesn't cause an animation, so don't bother playing a sound
	SelfRepairFromRubbleLoop  = BuildingConstructionLoop
  End

  Behavior                  = StructureCollapseUpdate ModuleTag_Collapse
    MinCollapseDelay        = 000
    MaxCollapseDelay        = 000
    CollapseDamping         = .5
    MaxShudder              = 0.6
    MinBurstDelay           = 250
    MaxBurstDelay           = 800
    BigBurstFrequency       = 4
    FXList                  = INITIAL   FX_StructureMediumCollapse
    FXList                  = ALMOST_FINAL  FX_StructureAlmostCollapse
      DestroyObjectWhenDone = Yes
      CollapseHeight        = 126
  End

  CommandSet = SellableCommandSet

  Geometry              = BOX
  GeometryMajorRadius   = 11.0
  GeometryMinorRadius   = 22.0
  GeometryHeight        = 70.0
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  BuildCompletion       = PLACED_BY_PLAYER
END



;------------------------------------------------------------------------------


Object CastleBookEnd
  
  SelectPortrait = BRCastleWall
  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    
    WallBoundsMesh = P1
    		
    DefaultModelConditionState
      Model = GBMinwallBE
    End
End

  ; ***DESIGN parameters ***

  DisplayName      = OBJECT:GondorCastleWall
  Side = Gondor
  EditorSorting = STRUCTURE
; Browser = CINEMATICS UNIT


  VisionRange         = 0.0          ; Shroud clearing distance
  ShroudClearingRange = 0


  

  ; *** ENGINEERING Parameters ***  
	KindOf					= STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL NOT_AUTOACQUIRABLE
	RadarPriority			= NOT_ON_RADAR
	KeepSelectableWhenDead	= Yes


  Body                = StructureBody ModuleTag_03
    MaxHealth         = ROHAN_CASTLE_WALL_HEALTH
  End

 
  
  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
;  Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
;      DestructionDelay  = 5000
;  End

   
    
 
     

      
  Geometry              = BOX
  GeometryMajorRadius   = 35.0
  GeometryMinorRadius   = 19.0
  GeometryHeight        = 7.0

  
  GeometryIsSmall       = No
  ;GeometryRotationAnchorOffset = X:1037.871 Y:0
  Shadow                = SHADOW_VOLUME
  

End
