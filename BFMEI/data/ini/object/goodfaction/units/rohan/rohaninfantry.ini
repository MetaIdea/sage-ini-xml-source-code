;------------------------------------------------------------------------------
; 
;	RohanInfantry.ini
;
;------------------------------------------------------------------------------

; aka Rohan Archer Yeoman
Object RohanArcher
	; *** ART Parameters ***
	UpgradeCameo1						=	Upgrade_RohanFireArrows
	;SelectPortrait						=	SP_Gondor_Swordman
	SelectPortrait						=	UPRohan_YeomanArcher
	
	Draw	=	W3DHordeModelDraw ModuleTag_01

		OkToChangeModelColor = Yes
	  
		;	---Test entry for the time of day texture swap test---
		;	TimeOfDayTexture = twwater01.tga AFTERNOON 0 ROHANWARRIOR01
			
		;	RandomTexture = guarcher.tga 0
		;	RandomTexture = twwater01.tga 0
		;	RandomTexture = rbgen01.tga 0

		StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD

		; specify options for static LODs
		LodOptions	= LOW
			AllowMultipleModels		=	ALLOW_MULTIPLE_MODELS_LOW
			MaxRandomTextures		=	MAX_RANDOM_TEXTURES_LOW
			MaxRandomAnimations		=	MAX_RANDOM_ANIMATIONS_LOW
			MaxAnimFrameDelta		=	MAX_ANIM_FRAME_DELTA_LOW
		End
		
		LodOptions	= MEDIUM
			AllowMultipleModels		=	ALLOW_MULTIPLE_MODELS_MED
			MaxRandomTextures		=	MAX_RANDOM_TEXTURES_MED
			MaxRandomAnimations		=	MAX_RANDOM_ANIMATIONS_MED
			MaxAnimFrameDelta		=	MAX_ANIM_FRAME_DELTA_MED
		End
		
		LodOptions	= HIGH
			AllowMultipleModels		=	ALLOW_MULTIPLE_MODELS_HIGH
			MaxRandomTextures		=	MAX_RANDOM_TEXTURES_HIGH
			MaxRandomAnimations		=	MAX_RANDOM_ANIMATIONS_HIGH
			MaxAnimFrameDelta		=	MAX_ANIM_FRAME_DELTA_HIGH
		End

		ParticlesAttachedToAnimatedBones = yes

; --------- With Bow ------------
		DefaultModelConditionState
			Model						=	RUArcher_SKN
			Skeleton					=   GUArcher_SKL
			WeaponLaunchBone			=	PRIMARY ARROW
			WeaponLaunchBone			=	SECONDARY ARROWNOCK	; when upgraded to flaming arrow
		End
		
; --------- With Bow Upgrade  ------------

		ModelConditionState WEAPONSET_PLAYER_UPGRADE
			Model						=	RUArcher_SKN
			Skeleton					=   GUArcher_SKL
			WeaponLaunchBone			=	PRIMARY ARROW
			WeaponLaunchBone			=	SECONDARY ARROWNOCK	; when upgraded to flaming arrow
;			ParticleSysBone				=   FireArowTip arrowFire FollowBone:Yes
;			ParticleSysBone				=   FireArowTip arrowFire FollowBone:Yes
		End
		
;----------- Default Idle animations -------
		IdleAnimationState
			StateName					=   STATE_Idle
			Animation = IdleA
				AnimationName			=	GUArcher_IDLA 
				AnimationPriority		=	6
				AnimationSpeedFactorRange = 0.7 1.3
			End
			;*** Repeat IDLA because animation priorities will not choose same animation twice so it can alternate between first two mostly.
			Animation = IdleA	
				AnimationName			=	GUArcher_IDLA 
				AnimationPriority		=	6
				AnimationSpeedFactorRange = 0.7 1.3
			End
			Animation = IdleH
				AnimationName			=	GUArcher_IDLH
				AnimationPriority		=	1
				AnimationSpeedFactorRange = 0.7 1.3
				AnimationBlendTime		= 8
			End
			Animation = IdleI
				AnimationName			=	GUArcher_IDLI
				AnimationPriority		=	1
				AnimationSpeedFactorRange = 0.7 1.3
				AnimationBlendTime		= 8
			End
			Animation = IdleJ
				AnimationName			=	GUArcher_IDLJ
				AnimationPriority		=	1
				AnimationSpeedFactorRange = 0.7 1.3
				AnimationBlendTime		= 8
			End
			
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Selected" then CurDrawableSetTransitionAnimState("TRANS_Selected_To_Idle") end
				CurDrawableShowSubObject("arrow") ;Circumvents blend issues when the arrow is being shown...
			EndScript
		End
		
;----------- Flying through air -------
		AnimationState						= PASSENGER
			Animation						= FLLA
				AnimationName				= GUArcher_FLLA
				AnimationMode				= LOOP
			End
			BeginScript
				CurDrawableHideSubObject("arrow") ;Circumvents blend issues when the arrow is being shown...
			EndScript
		End
		
		
		AnimationState        = THROWN_PROJECTILE
			Animation           = FLYA
				AnimationName     = GUArcher_FLYA
				AnimationMode     = LOOP
			End
			BeginScript
				CurDrawableHideSubObject("arrow") ;Circumvents blend issues when the arrow is being shown...
			EndScript
		End
		
		AnimationState						= FREEFALL
			Animation						= Falling
				AnimationName				= GUArcher_FLYA
				AnimationMode				= LOOP
				AnimationBlendTime			= 10
				AnimationSpeedFactorRange	= 0.35	0.35
			End
		End
		
		AnimationState					=	STUNNED_FLAILING 
			Animation					=	StunFlail
				AnimationName			=	GUArcher_FLLA 
				AnimationMode			=	LOOP
			End
			Flags						=	RANDOMSTART
			BeginScript
				CurDrawableHideSubObject("arrow") ;Circumvents blend issues when the arrow is being shown...
			EndScript
		End
		
		

;----------- Dying -------
		AnimationState					=	DYING SPLATTED
			Animation					=	Fire
				AnimationName			=	GUArcher_LNDA 
				AnimationMode			=	ONCE
				AnimationSpeedFactorRange = 0.7 1.3
			End
            EnteringStateFX = FX_SoldierHitGround
			BeginScript
				CurDrawableHideSubObject("arrow") ;Circumvents blend issues when the arrow is being shown...
			EndScript
		End

		AnimationState					=	DYING AFLAME
			Animation					=	Fire
				AnimationName			=	GUArcher_MFDA 
				AnimationSpeedFactorRange = 0.9 1.1
			End
			Animation					=	Fire
				AnimationName			=	GUArcher_MFDB 
				AnimationSpeedFactorRange = 0.9 1.1
			End
			BeginScript
				CurDrawableHideSubObject("arrow") ;Circumvents blend issues when the arrow is being shown...
			EndScript
		End

		AnimationState					=	DYING
			Animation					=	Die2
				AnimationName			=	GUArcher_DIEB 
				AnimationMode			=	ONCE
				AnimationSpeedFactorRange = 0.7 1.3
			End
			Animation					=	Die3
				AnimationName			=	GUArcher_DIED 
				AnimationMode			=	ONCE
				AnimationSpeedFactorRange = 0.7 1.3
			End
			BeginScript
				CurDrawableHideSubObject("arrow") ;Circumvents blend issues when the arrow is being shown...
			EndScript
		End

;------ Stunned anims -----------
		AnimationState					=	STUNNED_STANDING_UP 
			Animation					=	GTPA
				AnimationName			=	GUArcher_GTPA
				AnimationMode			=	ONCE
				AnimationSpeedFactorRange = 1.5 1.5
			End
			BeginScript
				CurDrawableHideSubObject("arrow") ;Circumvents blend issues when the arrow is being shown...
			EndScript
		End

		

		AnimationState					=	STUNNED 
			Animation					=	StunFlail
				AnimationName			=	GUArcher_LNDA 
				AnimationMode			=	ONCE
			End
            EnteringStateFX = FX_SoldierHitGround
			BeginScript
				CurDrawableHideSubObject("arrow") ;Circumvents blend issues when the arrow is being shown...
			EndScript
		End

;------- Close range melee fighting ------------
		AnimationState					=	FIRING_OR_PREATTACK_A WEAPONSTATE_CLOSE_RANGE
			Animation					=	ATKD
				AnimationName			=	GUArcher_ATKD
				AnimationMode			=	ONCE
				UseWeaponTiming			=	Yes
			End
			BeginScript
				CurDrawableHideSubObject("arrow") ;Circumvents blend issues when the arrow is being shown...
			EndScript
		End

;------- New Style Archery --------------------------------------------
		AnimationState					=	PREATTACK_A 
			StateName					=	STATE_Firing
			Animation					=	ReadyToDrawn
				AnimationName			=	GUArcher_ATKF1
				AnimationMode			=	ONCE
;				UseWeaponTiming			=	NoNONONOO!!!	; UseWeaponTiming plus random weapon field equals desync.  Leaving as warning
				AnimationBlendTime		=	10
			End
			BeginScript
				CurDrawableShowSubObject("arrow") ;Circumvents blend issues when the arrow is being shown...
			EndScript
		End

		AnimationState					=	FIRING_OR_RELOADING_A 
			StateName					=	STATE_Firing
			Animation					=	LooseReloadDraw
				AnimationName			=	GUArcher_ATKF2
				AnimationMode			=	ONCE
;				UseWeaponTiming			=	NoNONONOO!!!	; Left in as reminder why not to use: UseWeaponTiming does not work for archers. Do not attempt to use this!
				AnimationSpeedFactorRange = 1.1 1.1			; Therefore, this is all you get.  A slight speed up so that the animation can always finish before any possible random value Design sets the range for
				AnimationBlendTime		=	0				; Blend time needs to be zero or else the arrow subobject lingers length of blend.
			End
			BeginScript
				CurDrawableShowSubObject("arrow") ;Circumvents blend issues when the arrow is being shown...
			EndScript
		End

	
;;========= TERROR
		AnimationState					= MOVING EMOTION_TERROR EMOTION_LOOK_TO_SKY
			Animation					= TerrorFromTheSky
				AnimationName			= GUArcher_RUNC
				AnimationMode			= LOOP
			End
			BeginScript
				CurDrawableHideSubObject("arrow") ;Circumvents blend issues when the arrow is being shown...
			EndScript
		End

;;========= BACKING UP
		AnimationState				=	MOVING BACKING_UP
			Animation				=	BackingUp
				AnimationName		=	GUArcher_BAKA
				AnimationMode		=	LOOP
			End
			Flags					=	RANDOMSTART
			BeginScript
				CurDrawableHideSubObject("arrow") ;Circumvents blend issues when the arrow is being shown...
			EndScript
		End

;;========= MOVING

		AnimationState					=	MOVING ATTACKING
			Animation					=	AMove
				AnimationName			=	GUArcher_RUNB 
				AnimationMode			=	LOOP
				Distance				=	28
			End
			Flags						=	RANDOMSTART
			BeginScript
				CurDrawableHideSubObject("arrow") ;Circumvents blend issues when the arrow is being shown...
			EndScript
		End
		
		AnimationState					=	MOVING WANDER
			Animation					=	Wander1
				AnimationName			=	GUArcher_WLKA 
			End
			Animation					=	Wander2
				AnimationName			=	GUArcher_WLKB ;20
			End
			Flags						=	RANDOMSTART
			BeginScript
				CurDrawableHideSubObject("arrow") ;Circumvents blend issues when the arrow is being shown...
			EndScript
		End

		AnimationState					=	MOVING
			Animation					=	Move
				AnimationName			=	GUArcher_RUNA 
				AnimationMode			=	LOOP
				Distance				=	28
			End
			Flags						=	RANDOMSTART
			BeginScript
				CurDrawableHideSubObject("arrow") ;Circumvents blend issues when the arrow is being shown...
			EndScript
		End

;-------- Persistant firing (keep bow drawn ) ------------
		AnimationState					= CONTINUOUS_FIRE_MEAN
			StateName					=	STATE_Firing
			Animation					=	HangFrameWhileCoasting
				AnimationName			=	GUArcher_ATKF2
				AnimationMode			=	MANUAL
			End
			BeginScript
				CurDrawableShowSubObject("arrow") ;Circumvents blend issues when the arrow is being shown...
			EndScript
		End
		
		AnimationState						= CONTINUOUS_FIRE_SLOW
			StateName						= STATE_Idle
			Animation						= PutAwayArrow
				AnimationName				= GUArcher_ATKF3
				AnimationMode				= ONCE
			End
			BeginScript
				CurDrawableShowSubObject("arrow") ;Circumvents blend issues when the arrow is being shown...
			EndScript
		End
		
;------------ HIT REACTION -----------------------------------------------------
		AnimationState = HIT_REACTION
			Animation = Hit_Level_1_a
				AnimationName = GUArcher_HITA
				AnimationMode = ONCE
			End
			BeginScript
				CurDrawableHideSubObject("arrow") ;Circumvents blend issues when the arrow is being shown...
			EndScript
		End
		
;--------------------- EMOTIONS -----------------------------

;;======= TERROR

		AnimationState					= EMOTION_AFRAID
			Animation					= FERA
				AnimationName			= GUArcher_FERA
				AnimationMode			= LOOP
			End
			Animation					= FERB
				AnimationName			= GUArcher_FERB
				AnimationMode			= LOOP
			End
			Animation					= FERC
				AnimationName			= GUArcher_FERC
				AnimationMode			= LOOP
			End
			Animation					= FERD
				AnimationName			= GUArcher_FERD
				AnimationMode			= LOOP
			End
			BeginScript
				CurDrawableHideSubObject("arrow") ;Circumvents blend issues when the arrow is being shown...
			EndScript
		End
		
;;======= CELEBRATING

		AnimationState					= EMOTION_CELEBRATING
			Animation					= CHRB
				AnimationName			= GUArcher_CHRB
				AnimationMode			= Once
				AnimationBlendTime		= 15
				AnimationPriority		= 2
			End
			Animation					= SLTA
				AnimationName			= GUArcher_SLTA
				AnimationMode			= Once
				AnimationBlendTime		= 15
				AnimationPriority		= 2
			End
			Animation					= CHRA
				AnimationName			= GUArcher_CHRA
				AnimationMode			= Once
				AnimationBlendTime		= 15		
				AnimationPriority		= 1;Use least often of cheers (Eugene)
			End
			Flags						=	RESTART_ANIM_WHEN_COMPLETE
			BeginScript
				CurDrawableHideSubObject("arrow") ;Circumvents blend issues when the arrow is being shown...
			EndScript
		End
		
;;======== TAUNTING

		AnimationState					= EMOTION_TAUNTING
			Animation					= Taunting2
				AnimationName			= GUArcher_IDLE
				AnimationMode			= ONCE
				AnimationBlendTime		= 15
			End
			Animation					= Taunting3
				AnimationName			= GUArcher_IDLF
				AnimationMode			= ONCE
				AnimationBlendTime		= 15
			End
			Animation					= Taunting4
				AnimationName			= GUArcher_IDLG
				AnimationMode			= ONCE
				AnimationBlendTime		= 15
			End

			Flags						= RESTART_ANIM_WHEN_COMPLETE
			BeginScript
				CurDrawableHideSubObject("arrow") ;Circumvents blend issues when the arrow is being shown...
			EndScript
		End

;;======== POINTING

		AnimationState						= EMOTION_POINTING
			ShareAnimation					= Yes
			Animation						= pointing
				AnimationName				= GUArcher_PNTA
				AnimationPriority			= 2
				AnimationSpeedFactorRange	= 0.9 1.1
				AnimationMode				= LOOP
			End
			BeginScript
				CurDrawableHideSubObject("arrow") ;Circumvents blend issues when the arrow is being shown...
			EndScript
		End
		

;;======== ALERT
		
		AnimationState					= EMOTION_ALERT
			Animation					= Ready
				AnimationName			= GUArcher_IDLA
				AnimationMode			= LOOP
				AnimationPriority		= 3
				AnimationBlendTime		= 15
			End
			Animation					= Ready
				AnimationName			= GUArcher_IDLA
				AnimationMode			= LOOP
				AnimationPriority		= 3
				AnimationBlendTime		= 15
			End
			Animation					= Point
				AnimationName			= GUArcher_PNTA
				AnimationMode			= LOOP
				AnimationPriority		= 1
				AnimationBlendTime		= 15
			End
			BeginScript
				CurDrawableHideSubObject("arrow") ;Circumvents blend issues when the arrow is being shown...
			EndScript
		End

; Turn off fire arrow visuals -- will be redone like Peasant drafting.
;;----------------- FIRE ARROW UPGRADE --------------------------------------------
		AnimationState        =  USER_4 ;Fire arrow upgrade
			Animation = IdleB
				AnimationName			=	GUArcher_IDLB 
				AnimationPriority		=	2 ;10
				AnimationSpeedFactorRange = 0.7 1.3
			End
			Animation = IdleC
				AnimationName			=	GUArcher_IDLC
				AnimationPriority		=	1 ;5
				AnimationSpeedFactorRange = 0.7 1.3
			End
			Animation = IdleD
				AnimationName			=	GUArcher_IDLD
				AnimationPriority		=	1 ;5
				AnimationSpeedFactorRange = 0.7 1.3
			End
			BeginScript
				CurDrawableShowSubObject("ArrowNock")
				CurDrawableShowSubObject("FireArowTip")
				CurDrawableHideSubObject("arrow")
			EndScript
			StateName           = Bow
		End

;;----------------- SELECTED --------------------------------------------
		AnimationState					=	SELECTED
			StateName					=	STATE_Selected
			Animation					=	ATNB
				AnimationName			=	GUArcher_ATNB
				AnimationMode			=	LOOP
				AnimationSpeedFactorRange = 0.9 1.1
			End
			Animation					=	IDLA
				AnimationName			=	GUArcher_IDLA 
				AnimationPriority		=	10
				AnimationSpeedFactorRange = 0.7 1.3
			End

			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Idle" 
				then 
					CurDrawableSetTransitionAnimState("TRANS_Idle_to_Selected") 
				end
				if CurDrawableModelcondition("ATTACKING")
				then
					return "IDLA"
				else
					return "ATNB"
				end
				CurDrawableHideSubObject("arrow") ;Circumvents blend issues when the arrow is being shown...
			EndScript
		End
		
	
;;----------------- Transitions ------------------------------------------------------
		TransitionState					=	TRANS_Idle_to_Selected
			Animation					=	ATNA
				AnimationName			=	GUArcher_ATNA
				AnimationMode			=	ONCE
				AnimationSpeedFactorRange = 0.8 1.2
			End
			BeginScript
				CurDrawableHideSubObject("arrow") ;Circumvents blend issues when the arrow is being shown...
			EndScript
		End
		TransitionState					=	TRANS_Selected_To_Idle
			Animation					=	ATNC
				AnimationName			=	GUArcher_ATNC
				AnimationMode			=	ONCE
				AnimationSpeedFactorRange = 1.0 2.0 ;Kind of a slow animation
			End
			BeginScript
				CurDrawableHideSubObject("arrow") ;Circumvents blend issues when the arrow is being shown...
			EndScript
		End
	End

	; ***DESIGN parameters ***
	Side = Rohan
	EditorSorting = UNIT
	ThreatLevel = 1.0
	ThingClass = HORDE_UNIT
	CommandPoints = 3
	
	CommandSet = RohanArcherCommandSet

	TransportSlotCount = 1
	WeaponSet
		Conditions = None 
		Weapon = PRIMARY    RohanArcherBow
		AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End
	WeaponSet
		Conditions = CLOSE_RANGE CONTESTING_BUILDING
		Weapon = PRIMARY   RohanArcherBowMelee
	End
	ArmorSet
		Conditions      = None
		Armor           = ArcherArmor
		DamageFX        = NormalDamageFX
	End
	
	ArmorSet
		Conditions		= PLAYER_UPGRADE
		Armor			= ArcherHeavyArmor
		DamageFX		= NormalDamageFX
	End
	
	BountyValue = ROHAN_YEOMAN_BOUNTY_VALUE

	VisionRange = ROHAN_YEOMAN_VISION_RANGE
	ShroudClearingRange = SHROUD_CLEAR_STANDARD			

	DisplayName = OBJECT:RohanArcher
	CrushableLevel = 0  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
	CrushRevengeWeapon = RangedInfantryCrushRevenge
	

	; *** AUDIO Parameters ***;

	VoiceAmbushed 				= YeomanArcherVoiceAmbushed
	VoiceAttack 				= YeomanArcherVoiceAttack
	VoiceAttackAir				= YeomanArcherVoiceAttack
	VoiceAttackCharge 			= YeomanArcherVoiceAttackCharge
	VoiceAttackStructure 			= YeomanArcherVoiceAttackBuilding
	VoiceAttackMachine 			= YeomanArcherVoiceAttack
	VoiceCreated 				= YeomanArcherVoiceSalute
	VoiceFullyCreated			= YeomanArcherVoiceSalute
	VoiceMove 				= YeomanArcherVoiceMove
	VoiceMoveToCamp 			= YeomanArcherVoiceMoveCamp
	VoiceMoveWhileAttacking 		= YeomanArcherVoiceDisengage
	VoiceRetreatToCastle 			= YeomanArcherVoiceRetreat
	VoicePriority				= 45
	VoiceSelect 				= YeomanArcherVoiceSelect
	VoiceSelect2 				= YeomanArcherVoiceSelect2
	VoiceSelectBattle  			= YeomanArcherVoiceSelectBattle
	
	VoiceEnterStateAttack 			= YeomanArcherVoiceEnterStateAttack
	VoiceEnterStateAttackCharge 		= YeomanArcherVoiceEnterStateAttackCharge
	VoiceEnterStateAttackStructure 		= YeomanArcherVoiceEnterStateAttackBuilding
	VoiceEnterStateAttackMachine 		= YeomanArcherVoiceEnterStateAttackBuilding
	VoiceEnterStateMove 			= YeomanArcherVoiceEnterStateMove
	VoiceEnterStateMoveToCamp 		= YeomanArcherVoiceEnterStateMoveCamp
	VoiceEnterStateMoveWhileAttacking	= YeomanArcherVoiceEnterStateDisengage
	VoiceEnterStateRetreatToCastle 		= YeomanArcherVoiceEnterStateRetreat
	VoiceGuard			= YeomanArcherVoiceMove
	

	SoundImpact				= ImpactHorse

	UnitSpecificSounds
		VoiceGarrison         		= YeomanArcherVoiceGarrison
	End

	EvaEventDamagedOwner 			= UnitUnderAttack		;Eva event to trigger when unit is damaged

	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		MaxUpdateRangeCap = 800
		AnimationSound = Sound:BodyFallGeneric1		Animation:GUArcher_SKL.GUArcher_DIEB	Frames:19
		AnimationSound = Sound:BodyFallGeneric1		Animation:GUArcher_SKL.GUArcher_DIED	Frames:53
		AnimationSound = Sound:BodyFallGeneric1		Animation:GUArcher_SKL.GUArcher_LNDA	Frames:1
		AnimationSound = Sound:BodyFallGenericNoArmor	Animation:GUArcher_SKL.GUArcher_LNDA	Frames:14
	End


	; *** ENGINEERING Parameters ***

	RadarPriority = UNIT
	KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE THROWN_OBJECT ARCHER GRAB_AND_DROP ATTACK_NEEDS_LINE_OF_SIGHT ;GRAB_AND_KILL
	
	Body = ActiveBody ModuleTag_02
		CheerRadius 	  = EMOTION_CHEER_RADIUS
		MaxHealth         = ROHAN_YEOMAN_HEALTH				;BALANCE Archer Health
		MaxHealthDamaged  = ROHAN_YEOMAN_HEALTH_DAMAGED			
		;RecoveryTime      = ROHAN_YEOMAN_HEALTH_RECOVERY_TIME		
	End
	
	Behavior = AIUpdateInterface ModuleTag_03
		AutoAcquireEnemiesWhenIdle	= Yes ATTACK_BUILDINGS
		CanAttackWhileContained		= Yes
		AILuaEventsList				= RohanArcherFunctions
		AttackPriority				= 	AttackPriority_Archer
	End
	
	Behavior = ArmorUpgrade ModuleTag_ArmorUpgrade
		TriggeredBy = Upgrade_RohanHeavyArmor
		ArmorSetFlag = PLAYER_UPGRADE
	End

	LocomotorSet
		Locomotor = HumanLocomotor
		Condition = SET_NORMAL
		Speed     = NORMAL_GOOD_INFANTRY_MEMBER_SPEED	
	End

	LocomotorSet
		Locomotor = HumanWanderLocomotor
		Condition = SET_WANDER 
		Speed     = NORMAL_GOOD_INFANTRY_MEMBER_SPEED	
	End

	Behavior = PhysicsBehavior ModuleTag_04
		GravityMult = 1.0
	End

	Behavior = AimWeaponBehavior AimWeaponModuleTag
		AimLowThreshold  = -0.15
		AimHighThreshold =  0.15
	End
	
	Behavior = SlowDeathBehavior ModuleTag_05
		DeathTypes = ALL 
		SinkDelay = 3000
		SinkRate = 0.600     ; in Dist/Sec
		DestructionDelay = 12000
		Sound = INITIAL YeomanArcherVoiceDie
	End
	
	Behavior = SquishCollide ModuleTag_06
		;nothing
	End
	
	; RohanArcher
	Behavior = HordeMemberCollide ModuleTag_HMC
		;nothing
	End
	
	Behavior = BezierProjectileBehavior ModuleTag_07 ; Module starts asleep, and wakes up when thrown.
		FirstHeight = 24  ; Height of Bezier control points above highest intervening terrain
		SecondHeight = 24
		FirstPercentIndent = 30% ; Percentage of shot distance control points are placed
		SecondPercentIndent = 70%
		TumbleRandomly = Yes

		CrushStyle = Yes ; I don't detonate, I just hit
		DieOnImpact = Yes
		BounceCount = 1   ; When I hit the ground, I'll arc again
		BounceDistance = 40 ; this far
		BounceFirstHeight = 24  ; Height of Bezier control points above highest intervening terrain
		BounceSecondHeight = 24
		BounceFirstPercentIndent = 20% ; Percentage of shot distance control points are placed
		BounceSecondPercentIndent = 80%

		GroundHitFX       = FX_ThrownRockGroundHit
		GroundBounceFX    = FX_ThrownRockBounceHit
	End

	; Fire arrow upgrade
	Behavior = WeaponSetUpgrade ModuleTag_08
		TriggeredBy = Upgrade_RohanFireArrows
		; Turn off fire arrow visuals -- will be redone like Peasant drafting.
		;CustomAnimAndDuration   = AnimState:USER_4 AnimTime:0 TriggerTime:0 ;set flag forever		
	End

	;--------------------------------------------------------------------------
	;
	;	Sub object upgrades.
	;
  	
  	Behavior = SubObjectsUpgrade Armor_Upgrade
  		TriggeredBy		= Upgrade_RohanHeavyArmor
  		UpgradeTexture	= RUArcher.tga 0 RUArcherHA.tga
  		UpgradeTexture	= RUArcher_M.tga 0 RUArcherHA.tga
  		ShowSubObjects	= ARMOR
 		RecolorHouse	= Yes
		ExcludeSubobjects = FireArowTip
  	End
  	
  	Behavior = SubObjectsUpgrade FireArrows_Upgrade
  		TriggeredBy		= Upgrade_RohanFireArrows
  		ShowSubObjects	= FireArowTip ArrowNock			; yes, it's a typo.
  		HideSubObjects	= arrow
  	End
	
	;--------------------------------------------------------------------------

	; Tie into LargeGroupAudio system
	Behavior = LargeGroupAudioUpdate ModuleTag_LGAU
		Key = Human Unit Infantry Rohan_Archer
	End
	
;	Behavior = DualWeaponBehavior ModuleTag_09
;		SwitchWeaponOnCloseRangeDistance = 40
;	End
	
	Behavior = HitReactionBehavior HitReactionBehaviorModuleTag
		HitReactionLifeTimer1 = 1993 ; level 1 (light  damage)  hit reaction animations in ms
		HitReactionLifeTimer2 = 1993 ; level 2 (medium damage)  hit reaction animations in ms
		HitReactionLifeTimer3 = 1993 ; level 3 (heavy  damage)  hit reaction animations in ms

		HitReactionThreshold1 = 5.0   ; level 1 (light  damage) threshold trigger
		HitReactionThreshold2 = 25.0  ; level 2 (medium damage) threshold trigger
		HitReactionThreshold3 = 50.0  ; level 3 (heavy  damage) threshold trigger

		FastHitsResetReaction = Yes    ;If set -- when hits occur faster than the reaction animations, it will reset the animation. (like getting riddled with machine gun bullets)
	End
	
	Geometry = CYLINDER
	GeometryMajorRadius = 8.0
	GeometryMinorRadius = 8.0
	GeometryHeight = 19.2
	GeometryIsSmall = Yes

  Shadow = SHADOW_DECAL
  ShadowSizeX = 19;
  ShadowSizeY = 19;
  ShadowTexture = ShadowI;
End

;------------------------------------------------------------------------------
;Creating this peasant will randomize between several variations of the peasant.
;------------------------------------------------------------------------------
Object RohanPeasant

	SelectPortrait	= UPRohan_Peasant

	Draw = W3DScriptedModelDraw ModuleTag_01  
		DefaultModelConditionState
			;Give it a model so it'll show up in WB
			Model               = RUPsnt_1_SKN
			Skeleton            = RUPsnt_1_SKL
		End
	End

	;***** IMPORTANT NOTE! ***************************************************************	
	;Certain Upgrades and costs may need to be propagated from here. One example was veterancy
	;overlays.
	;*************************************************************************************	

	Side = Rohan
	EditorSorting = UNIT
	BuildVariations = RohanPeasant1 RohanPeasant3 RohanPeasant4	; RohanPeasant2 <- removed from the game 
	KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE THROWN_OBJECT SWARM_DOZER GRAB_AND_DROP DOZER 
	
  ;Shadow = SHADOW_DECAL
  ;ShadowSizeX = 24;
  ;ShadowSizeY = 24;
  ;ShadowTexture = ShadowI;

End


;;------------------------------------------------------------------------------
; aka Peasant1
Object RohanPeasant1	; ///  OLD MAN ///
	; ***ART Parameters ***
	
	SelectPortrait	= UPRohan_Peasant
	
	Draw = W3DScriptedModelDraw ModuleTag_01  

		StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD
			
		  OkToChangeModelColor = Yes
		  
		RandomTexture = RUPeasant01.tga 0 RUPeasant01.tga
		RandomTexture = RUPeasant01_Alt.tga 0 RUPeasant01.tga

;;====================== MODELS ================================================================	
		DefaultModelConditionState
			Model               = RUPsnt_1_SKN
			Skeleton            = RUPsnt_1_SKL
		End
		
;;================== ANIMATIONS =================================================================		

;;------------------  DYING -------------------------------------------------------------

		AnimationState						= PASSENGER
			Animation						= FLLA
				AnimationName				= RUPsnt_1_FLLA
				AnimationMode				= LOOP
			End
		End
		
		AnimationState        = THROWN_PROJECTILE
			Animation           = FLYA
				AnimationName     = RUPsnt_1_FLYA
				AnimationMode     = LOOP
			End
		End
		
		AnimationState						= FREEFALL
			Animation						= FLYA
				AnimationName				= RUPsnt_1_FLYA
				AnimationMode				= LOOP
				AnimationSpeedFactorRange	= 0.7	0.7
				AnimationBlendTime			= 10
			End
		End
		
		AnimationState        = STUNNED_FLAILING
			Animation           = FLYA
				AnimationName     = RUPsnt_1_FLYA
				AnimationMode      = LOOP
			End
			Flags               = RANDOMSTART
		End
		
		AnimationState						= DYING SPLATTED
			Animation						= LNDA
				AnimationName				= RUPsnt_1_LNDA
				AnimationMode				= ONCE
			End
		End
		
		AnimationState        = DYING
			Animation           = DIEA
				AnimationName     = RUPsnt_1_DIEA
				AnimationMode     = ONCE
			End
			Animation           = DIEB
				AnimationName     = RUPsnt_1_DIEB
				AnimationMode     = ONCE
			End			
		End

		AnimationState        = STUNNED_STANDING_UP
			Animation           = GTPA
				AnimationName     = RUPsnt_1_GTPA
				AnimationMode     = ONCE
				AnimationSpeedFactorRange = 1.5 1.5
			End
;			Animation           = GTPB
;				AnimationName     = RUPsnt_1_GTPB
;				AnimationMode     = ONCE
;                                AnimationSpeedFactorRange = 1.5 1.5
;			End			
		End
		
		AnimationState        = STUNNED
			Animation           = LNDA
				AnimationName     = RUPsnt_1_LNDA
				AnimationMode     = ONCE
			End
		End		
				
		AnimationState        = MOVING FIRING_OR_PREATTACK_A
			ShareAnimation		= Yes
			Animation           = RunAndFire
				AnimationName       = RUPsnt_1_ATRA
				AnimationMode       = LOOP
			End
			Flags               = RANDOMSTART 
		End


	;;------------------ ATTACKING ---------------------------------------

		AnimationState				=	FIRING_OR_PREATTACK_A
			Animation
				AnimationName		=	RUPsnt_1_ATKA 
				AnimationMode		=	LOOP
;				UseWeaponTiming		=	Yes
			End
			Animation
				AnimationName		=	RUPsnt_1_ATKB
				AnimationMode		=	LOOP
;				UseWeaponTiming		=	Yes
			End			
		End
		
;;------------------ MOVING ------------------------------------------
	
;;===== BACKUP
		AnimationState				= MOVING BACKING_UP
			Animation				= BAKA
				AnimationName		= RUPsnt_1_BAKA
				AnimationMode		= LOOP
			End
;			Animation				= BAKB
;				AnimationName		= RUPsnt_1_BAKB
;				AnimationMode		= LOOP
;			End
;			Animation				= BAKC
;				AnimationName		= RUPsnt_1_BAKC
;				AnimationMode		= LOOP
;			End								
		End

; OBSOLETE		
;		AnimationState				= MOVING PANICKING
;			Animation				= RUNM
;				AnimationName		= RUPsnt_1_MFDA
;				AnimationMode		= LOOP
;			End
;			Flags					= RANDOMSTART
;			;;ParticleSysBone			= None InfantryDustTrails
;		End
		
		AnimationState				= MOVING WANDER
			Animation				= WLKA
				AnimationName		= RUPsnt_1_WLKA
				AnimationMode		= LOOP
			End
;			Animation				= WLKE
;				AnimationName		= RUPsnt_1_WLKE
;				AnimationMode		= LOOP
;			End
			
			;;ParticleSysBone     = None InfantryDustTrails
		End
		
		AnimationState				= MOVING
			Animation				= RUNA
				AnimationName		= RUPsnt_1_RUNA
				AnimationMode		= LOOP
;				AnimationSpeedFactorRange = 0.8 0.8
			End
			Animation				= RUNC
				AnimationName		= RUPsnt_1_RUNC
				AnimationMode		= LOOP
;				AnimationSpeedFactorRange = 0.8 0.8
			End			
			Flags					= RANDOMSTART
			ParticleSysBone			= None InfantryDustTrails
		End
		
; WORKING		
		AnimationState = ACTIVELY_CONSTRUCTING DEPLOYED ; building from too far to smack his hammer
			Animation				=	Stand
				AnimationName		=	RUPsnt_1_IDLA 
				AnimationMode		=	LOOP
			End
		End

		
		AnimationState				= ACTIVELY_CONSTRUCTING
			Animation				= WRKA
				AnimationName		= RUPsnt_1_WRKA
				AnimationMode		= ONCE
			End
			Animation				= WRKD
				AnimationName		= RUPsnt_1_WRKD
				AnimationMode		= ONCE
			End
			Flags					= RANDOMSTART RESTART_ANIM_WHEN_COMPLETE
		End	
	
;;------------ HIT REACTION -----------------------------------------------------

		AnimationState = HIT_REACTION
			Animation = Hit_Level_1_a
				AnimationName = RUPsnt_1_HITA
				AnimationMode = ONCE
			End
		End

;;------------- EMOTIONS ---------------------------------------------

			

;;======== POINTING

		AnimationState				= EMOTION_POINTING
			Animation				= Pointing1
				AnimationName		= RUPsnt_1_PNTA
				AnimationMode		= LOOP
                AnimationSpeedFactorRange = 0.75 1.25
			End
		End

;;======= TERROR
		AnimationState				= EMOTION_AFRAID
			Animation				= &&FEAR&&
				AnimationName		= RUPsnt_1_FERA
				AnimationMode		= LOOP
			End
		End
		
		AnimationState				= EMOTION_TAUNTING
			Animation				= TNTA
				AnimationName		= RUPsnt_1_TNTA
				AnimationMode		= ONCE
			End
			Animation				= TNTB
				AnimationName		= RUPsnt_1_TNTB
				AnimationMode		= ONCE
			End	
			Flags					= RANDOMSTART RESTART_ANIM_WHEN_COMPLETE		
		End

;;====== CELEBRATING		
			AnimationState				= EMOTION_CELEBRATING
				Animation				= CHRA
					AnimationName	    = RUPsnt_1_CHRA
					AnimationMode		= ONCE
				End
				Animation				= CHRB
					AnimationName	    = RUPsnt_1_CHRB
					AnimationMode		= ONCE
				End
				Flags					= RANDOMSTART RESTART_ANIM_WHEN_COMPLETE
			End
			
			AnimationState				= EMOTION_ALERT
				StateName				= STATE_Alert
				Animation				= &&ALERT&&
					AnimationName		= RUPsnt_1_IDLA
					AnimationMode		= LOOP
				End
			End
			
	;;------------- SELECTED ---------------------------------------------

		AnimationState				=	SELECTED
			StateName				=	STATE_Selected
			SimilarRestart			=   Yes			
			Animation				=	ATNB
				AnimationName		=	RUPsnt_1_ATNB
				AnimationMode		=	LOOP
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Idle" then CurDrawableSetTransitionAnimState("TRANS_IdleToSelected") end
				if Prev == "STATE_Selected" then CurDrawableSetTransitionAnimState("TRANS_IdleToSelected") end
			EndScript
		End	

	;;--------------- IDLE STATES -----------------------------------------------------------------	
		IdleAnimationState
			StateName			=	STATE_Idle
			Animation           = IDLA
				AnimationName     = RUPsnt_1_IDLA
				AnimationMode     = ONCE
				AnimationPriority = 20
			End

			Animation           = IDLC
				AnimationName     = RUPsnt_1_IDLC
				AnimationMode     = ONCE
				AnimationPriority = 1
			End

			Animation           = IDLD
				AnimationName     = RUPsnt_1_IDLD
				AnimationMode     = ONCE
				AnimationPriority = 2
			End

			Animation           = IDLE
				AnimationName     = RUPsnt_1_IDLE
				AnimationMode     = ONCE
				AnimationPriority = 1
			End

			Animation           = IDLF
				AnimationName     = RUPsnt_1_IDLF
				AnimationMode     = ONCE
				AnimationPriority = 1
			End

			Animation           = IDLG
				AnimationName     = RUPsnt_1_IDLG
				AnimationMode     = ONCE
				AnimationPriority = 1				
			End
			
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Selected" then CurDrawableSetTransitionAnimState("TRANS_SelectedToIdle") end
			EndScript		
		End
		
	;---Transitions-------------------------------------		

		TransitionState       = TRANS_SelectedToIdle	
			Animation           = ATNC
				AnimationName     = RUPsnt_1_ATNC
				AnimationMode     = ONCE
				AnimationSpeedFactorRange = 0.7 1.2
			End
		End
		
		TransitionState				=	TRANS_IdleToSelected
			Animation				=	ATNA
				AnimationName		=	RUPsnt_1_ATNA
				AnimationMode		=	ONCE
				AnimationSpeedFactorRange = 0.7 1.2
			End
		End	
		
	End
	
	; ***DESIGN parameters ***
	Side = Rohan
	EditorSorting = UNIT
	ThreatLevel = 1.0
	TransportSlotCount = 1
	
	CommandPoints = 2

	CommandSet = PeasantCommandSet
	
	BountyValue = ROHAN_PEASANT_BOUNTY_VALUE

	;;;; WEAPON SETS ;;;;
	WeaponSet
		Conditions          = None 
		Weapon              = PRIMARY		RohanFighterSword
	End
	
	WeaponSet
		Conditions			= PLAYER_UPGRADE
		Weapon				= PRIMARY		RohanFighterSwordUpgraded
	End
	
	;;;; ARMOR SETS ;;;;	
	ArmorSet
		Conditions      = None
		Armor           = PeasantArmor
		DamageFX        = NormalDamageFX
	End

	ArmorSet
		Conditions      = PLAYER_UPGRADE
		Armor           = SoldierHeavyArmor
		DamageFX        = NormalDamageFX
	End

	VisionRange = VISION_STANDARD_MELEE
	ShroudClearingRange = SHROUD_CLEAR_STANDARD
			
	DisplayName = OBJECT:RohanPeasant
	CrushableLevel = 0  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
	CrushRevengeWeapon = BasicInfantryCrushRevenge
	EquivalentTo = RohanPeasant	


	; *** AUDIO Parameters ***;

	VoiceAttack 				= PeasantMaleVoiceAttack
	VoiceAttackCharge 			= PeasantMaleVoiceAttackCharge
	VoiceAttackStructure 			= PeasantMaleVoiceAttackBuilding
	VoiceAttackMachine 			= PeasantMaleVoiceAttack
	VoiceCreated 				= PeasantMaleVoiceSalute
	VoiceFullyCreated 			= PeasantMaleVoiceSalute
	VoiceGuard					= PeasantMaleVoiceMove
	VoiceMove 					= PeasantMaleVoiceMove
	VoiceMoveToCamp 				= PeasantMaleVoiceMoveCamp
	VoiceMoveWhileAttacking 		= PeasantMaleVoiceDisengage
	VoicePriority				= 30
	VoiceRetreatToCastle 			= PeasantMaleVoiceRetreat
	VoiceSelect 				= PeasantMaleVoiceSelect
	VoiceSelect2 				= PeasantVoiceSelect2
	VoiceSelectBattle  			= PeasantMaleVoiceSelectBattle
	
	VoiceEnterStateAttack 			= PeasantMaleVoiceEnterStateAttack
	VoiceEnterStateAttackCharge 		= PeasantMaleVoiceEnterStateAttackCharge
	VoiceEnterStateAttackStructure 	= PeasantMaleVoiceEnterStateAttackBuilding
	VoiceEnterStateAttackMachine 		= PeasantMaleVoiceEnterStateAttackBuilding
	VoiceEnterStateMove 			= PeasantMaleVoiceEnterStateMove
	VoiceEnterStateMoveToCamp 		= PeasantMaleVoiceEnterStateMoveCamp
	VoiceEnterStateMoveWhileAttacking 	= PeasantMaleVoiceEnterStateDisengage
	VoiceEnterStateRetreatToCastle	= PeasantMaleVoiceEnterStateRetreat
		
	SoundImpact					= ImpactHorse
	
	UnitSpecificSounds
		VoiceGarrison			= PeasantMaleVoiceGarrison    
		VoiceRepair				= PeasantMaleVoiceRepair
	End

	EvaEventDamagedOwner 			= UnitUnderAttack		;Eva event to trigger when unit is damaged

	ClientBehavior = RandomSoundSelectorClientBehavior ModuleTag_RSSCB
		; This is a counter to the similar module in the RohanPeasant4. Without this,
		; the larger a group, the more likely it is a woman's voice will be heard; until
		; a 100 peasant group will basically ALWAYS be playing. This ensures that a 
		; large group of mixed peasants will still be led by a man. [Sorry, but that's
		; Middle Earth for you -- just ask Eowyn!]
		Chance = 5% 
		RerollOnEveryFrame = No ; For consistancy
		VoicePriority = 32 ; Bossy man is high enough to overcome "bossy" women
	End
	
	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		MaxUpdateRangeCap = 800
		AnimationSound = Sound:BodyFallGeneric1		Animation:RUPsnt_1_SKL.RUPsnt_1_DIEA	Frames:45
		AnimationSound = Sound:BodyFallGenericNoArmor	Animation:RUPsnt_1_SKL.RUPsnt_1_DIEB	Frames:44
		AnimationSound = Sound:BodyFallGeneric1		Animation:RUPsnt_1_SKL.RUPsnt_1_LNDA	Frames:4
	End


	; *** ENGINEERING Parameters ***
	RadarPriority = UNIT
	KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE THROWN_OBJECT DOZER SWARM_DOZER GRAB_AND_DROP
	
;	CommandSet = GondorWorkerCommandSet
	
	Body = ActiveBody ModuleTag_02
		CheerRadius 	  = EMOTION_CHEER_RADIUS
		MaxHealth         = ROHAN_PEASANT_HEALTH				;BALANCE Peasant Health
		MaxHealthDamaged  = ROHAN_PEASANT_HEALTH_DAMAGED			
		;RecoveryTime      = ROHAN_PEASANT_HEALTH_RECOVERY_TIME		
	End
	
	Behavior = WorkerAIUpdate ModuleTag_10
		AutoAcquireEnemiesWhenIdle		= Yes ATTACK_BUILDINGS
		RepairHealthPercentPerSecond	= 0.2%    ; % of max health to repair each second
		AILuaEventsList					= StandardPeasantFunctions
		AttackPriority				= 	AttackPriority_Infantry
		SpecialContactPoints		   = Repair
	End

	LocomotorSet
		Locomotor = HumanLocomotor
		Condition = SET_NORMAL 
		Speed     = NORMAL_GOOD_INFANTRY_MEMBER_SPEED	
	End

	LocomotorSet
		Locomotor = HumanWanderLocomotor
		Condition = SET_WANDER
		Speed     = NORMAL_GOOD_INFANTRY_MEMBER_SPEED	
	End 

	Behavior = PhysicsBehavior ModuleTag_04
		GravityMult = 1.0
	End
	
	Behavior = SlowDeathBehavior ModuleTag_05
		DeathTypes = ALL
		SinkDelay = 3000
		SinkRate = 1.0     ; in Dist/Sec
		DestructionDelay = 8000
            Sound = INITIAL PeasantMaleVoiceDie
	End
	
 	Behavior = WeaponSetUpgrade ModuleTag_Weaponpgrade
		TriggeredBy = Upgrade_RohanForgedBlades
	End

 	Behavior = ArmorUpgrade ModuleTag_ArmorUpgrade
		TriggeredBy = Upgrade_RohanHeavyArmor
		ArmorSetFlag			= PLAYER_UPGRADE
	End

	;; Don't remove this. It's required for newly spawned members
	;; It does not change the armor set, but it allows us to accept the Drafted Upgrade
 	Behavior = ArmorUpgrade ModuleTag_ArmorUpgradeDrafted
		TriggeredBy = Upgrade_Drafted
		IgnoreArmorUpgrade = Yes ; does not trigger any armor sets
	End

	Behavior = RepairSpecialPower ModuleTag_RepairSPecialPower
		SpecialPowerTemplate      = SpecialRepairStructure
	End		

	;-------------------------------------------------------------------------------
	;
	;	Sub objects upgrade.
	;
	Behavior = SubObjectsUpgrade Armor_Upgrade
		TriggeredBy	= Upgrade_RohanHeavyArmor
		ShowSubObjects	= HELMET
		HideSubObjects	= HAMMER
		UpgradeTexture	= RUPeasant01.tga 0 RUPeasant01_HA.tga
		UpgradeTexture	= RUPeasant01_Alt.tga 0 RUPeasant01_HA.tga
		UpgradeTexture	= RUPeasantWep.tga 0 RUPeasantWep_HA.tga
		UpgradeTexture	= RUPeasantWep_L.tga 0 RUPeasantWep_HA.tga
		RecolorHouse	= Yes
		ExcludeSubobjects = Forged_Blade
	End
	
	Behavior = SubObjectsUpgrade ForgedBlade_Upgrade
		TriggeredBy		= Upgrade_RohanForgedBlades
		ShowSubObjects	= FORGED_BLADE SWORD			; Forged blade will give us a sword too, as we'll get a weapon upgrade.
		HideSubObjects	= HAMMER
	End
	
	Behavior = SubObjectsUpgrade Drafted_Upgrade
		TriggeredBy		= Upgrade_Drafted
		ShowSubObjects	= SWORD SHIELD
		HideSubObjects	= HAMMER
		FXListUpgrade   = FX_Draft
		;Sound = INITIAL PeasantVoiceDraftUpgrade			;this doesn't work
	End
	;-------------------------------------------------------------------------------


	Behavior = SquishCollide ModuleTag_06
		;nothing
	End
	
	Behavior = HordeMemberCollide ModuleTag_HMC
		;nothing
	End

	Behavior = BezierProjectileBehavior ModuleTag_08 ; Module starts asleep, and wakes up when thrown.
		FirstHeight = 24  ; Height of Bezier control points above highest intervening terrain
		SecondHeight = 24
		FirstPercentIndent = 30% ; Percentage of shot distance control points are placed
		SecondPercentIndent = 70%
		TumbleRandomly = Yes

		CrushStyle = Yes ; I don't detonate, I just hit
		DieOnImpact = Yes
		BounceCount = 1   ; When I hit the ground, I'll arc again
		BounceDistance = 40 ; this far
		BounceFirstHeight = 16  ; Height of Bezier control points above highest intervening terrain
		BounceSecondHeight = 16
		BounceFirstPercentIndent = 20% ; Percentage of shot distance control points are placed
		BounceSecondPercentIndent = 80%

		GroundHitFX       = FX_ThrownRockGroundHit
		GroundBounceFX    = FX_ThrownRockBounceHit
	End

	Behavior = HitReactionBehavior HitReactionBehaviorModuleTag
		HitReactionLifeTimer1 = 2333 ; level 1 (light  damage)  hit reaction animations in ms
		HitReactionLifeTimer2 = 2333 ; level 2 (medium damage)  hit reaction animations in ms
		HitReactionLifeTimer3 = 2333 ; level 3 (heavy  damage)  hit reaction animations in ms

		HitReactionThreshold1 = 5.0   ; level 1 (light  damage) threshold trigger
		HitReactionThreshold2 = 25.0  ; level 2 (medium damage) threshold trigger
		HitReactionThreshold3 = 50.0  ; level 3 (heavy  damage) threshold trigger

		FastHitsResetReaction = Yes    ;If set -- when hits occur faster than the reaction animations, it will reset the animation. (like getting riddled with machine gun bullets)
	End

	; Tie into LargeGroupAudio system
	Behavior = LargeGroupAudioUpdate ModuleTag_LGAU
		Key = Human Unit Peasant Peasant_Male
	End

	Geometry = CYLINDER
	GeometryMajorRadius = 8.0
	GeometryMinorRadius = 8.0
	GeometryHeight = 19.2
	GeometryIsSmall = Yes

  Shadow = SHADOW_DECAL
  ShadowSizeX = 19;
  ShadowSizeY = 19;
  ShadowTexture = ShadowI;

End

;;------------------------------------------------------------------------------
; aka Peasant2  /// YOUNG BOY ////
ChildObject RohanPeasant2 RohanPeasant1
	; ***ART Parameters ***
	
	Draw = W3DScriptedModelDraw ModuleTag_01  

		StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD
			
		  OkToChangeModelColor = Yes
		  
		RandomTexture = RUPeasant02.tga 0
		RandomTexture = RUPeasant02_Alt.tga 0
	
;;====================== MODELS ================================================================	
		DefaultModelConditionState
			Model               = RUPsnt_2_SKN
			Skeleton            = RUPsnt_2_SKL
		End

;;================== ANIMATIONS =================================================================		

;;------------------  DYING -------------------------------------------------------------
		
		AnimationState        = PASSENGER
			Animation           = FLLA
				AnimationName     = RUPsnt_2_FLLA
				AnimationMode     = LOOP
			End
		End
		
		AnimationState        = THROWN_PROJECTILE
			Animation           = FLYA
				AnimationName     = RUPsnt_2_FLYA
				AnimationMode     = LOOP
			End
		End
		
		

		AnimationState        = DYING
			Animation           = DIEA
				AnimationName     = RUPsnt_2_DIEA
				AnimationMode     = ONCE
			End
		End
		
		AnimationState        = STUNNED_STANDING_UP
			Animation           = GTPA
				AnimationName     = RUPsnt_2_GTPA
				AnimationMode     = ONCE
				AnimationSpeedFactorRange = 1.5 1.5
			End
		End
		
		AnimationState        = STUNNED
			Animation           = LNDA
				AnimationName     = RUPsnt_2_LNDA
				AnimationMode     = ONCE
			End
		End
		
		AnimationState        = STUNNED
			Animation           = LNDA
				AnimationName     = RUPsnt_2_LNDA
				AnimationMode     = ONCE
			End
		End	

;;------------------ ATTACKING ---------------------------------------

		AnimationState				=	FIRING_OR_PREATTACK_A
			Animation
				AnimationName		=	RUPsnt_2_ATKA 
				AnimationMode		=	LOOP
;				UseWeaponTiming		=	Yes
			End
		End

;;------------------ MOVING ------------------------------------------

;;===== BACKUP
		AnimationState				= MOVING BACKING_UP
			Animation				= &&TERROR&&
				AnimationName		= RUPsnt_2_IDLA
				AnimationMode		= LOOP
			End
		End

; OBSOLETE		
;		AnimationState				= MOVING PANICKING
;			Animation				= WLKM
;				AnimationName		= RUPsnt_2_MFDA
;				AnimationMode		= LOOP
;			End
;			;;ParticleSysBone     = None InfantryDustTrails
;		End
		
		AnimationState				= MOVING WANDER
			Animation				= WLKA
				AnimationName		= RUPsnt_2_WLKA
				AnimationMode		= LOOP
			End
			;;ParticleSysBone     = None InfantryDustTrails
		End
		
		AnimationState				= MOVING
			Animation				= RUNA
				AnimationName		= RUPsnt_2_RUNA
				AnimationMode		= LOOP
                                AnimationSpeedFactorRange = 1.00 1.15 ;--- JGS
			End
			Flags					= RANDOMSTART
			;;ParticleSysBone			= None InfantryDustTrails
		End

; WORKING	

		AnimationState = ACTIVELY_CONSTRUCTING DEPLOYED ; building from too far to smack his hammer
			Animation				=	Stand
				AnimationName		=	RUPsnt_2_IDLA 
				AnimationMode		=	LOOP
			End
		End

		
		AnimationState				= ACTIVELY_CONSTRUCTING
			Animation				= WRKA
				AnimationName		= RUPsnt_2_WRKA
				AnimationMode		= LOOP
			End
		End

;;------------ HIT REACTION -----------------------------------------------------

		AnimationState = HIT_REACTION
			Animation = Hit_Level_1_a
				AnimationName = RUPsnt_2_HITA
				AnimationMode = ONCE
			End
		End
				
;;------------- EMOTIONS ---------------------------------------------

;;======== POINTING

		AnimationState				= EMOTION_POINTING
			Animation				= Pointing2
				AnimationName		= RUPsnt_2_PNTA
				AnimationMode		= LOOP
                AnimationSpeedFactorRange = 0.75 1.25
			End
		End

;;======= TERROR

		AnimationState				= EMOTION_AFRAID
			Animation				= &&FEAR&&
				AnimationName		= RUPsnt_2_IDLA
				AnimationMode		= LOOP
			End
		End
		
		AnimationState				= EMOTION_TAUNTING
			Animation				= &&TAUNT&&
				AnimationName		= RUPsnt_2_IDLA
				AnimationMode		= LOOP
			End
		End

;;====== CELEBRATING		
		AnimationState				= EMOTION_CELEBRATING
			Animation				= &&CHEER&&
				AnimationName	    = RUPsnt_2_IDLA
				AnimationMode		= LOOP
			End
		End
		
		AnimationState				= EMOTION_ALERT
			Animation				= &&ALERT&&
				AnimationName		= RUPsnt_2_IDLA
				AnimationMode		= LOOP
			End
		End

;;------------- SELECTED ---------------------------------------------

	IdleAnimationState
		Animation				= IDLA
			AnimationName		= RUPsnt_2_IDLA
			AnimationMode		= ONCE
		End
	End
		
;;--------------- IDLE STATES -----------------------------------------------------------------	

	;---Transitions-------------------------------------
	
	
	End
	
	EquivalentTo = RohanPeasant	


; *** AUDIO Parameters ***;

	VoicePriority = 1
	VoiceFear = NoSound
	VoiceGuard = NoSound

	SoundImpact = ImpactHorse
	
	;UnitSpecificSounds
	;	VoiceGarrison         = NoSound
	;	VoiceEnter            = NoSound
	;	VoiceEnterHostile     = NoSound
	;	VoiceGetHealed        = NoSound
	;End

	EvaEventDamagedOwner = UnitUnderAttack		;Eva event to trigger when unit is damaged


	; Tie into LargeGroupAudio system
	Behavior = LargeGroupAudioUpdate ModuleTag_LGAU
		Key = Human Unit Peasant 	; Peasant_Boy
	End


; *** ENGINEERING PARAMETERS *** ;

	Behavior = SubObjectsUpgrade Armor_Upgrade
		TriggeredBy		= Upgrade_RohanHeavyArmor
		ShowSubObjects	= HELMET
		UpgradeTexture	= RUPeasant02.tga 0 RUPeasant02_HA.tga
		UpgradeTexture	= RUPeasant02_Alt.tga 0 RUPeasant02_HA.tga
		UpgradeTexture	= RUPeasantWep.tga 0 RUPeasantWep_HA.tga
		UpgradeTexture	= RUPeasantWep_L.tga 0 RUPeasantWep_HA.tga
		RecolorHouse	= Yes
		ExcludeSubobjects = Forged_Blade
	End

End

;;------------------------------------------------------------------------------
; aka Peasant3  /// FAT GUY ///
ChildObject RohanPeasant3 RohanPeasant1
	; ***ART Parameters ***
	
	Draw = W3DScriptedModelDraw ModuleTag_01  

		StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD
			
		  OkToChangeModelColor = Yes
		  
		RandomTexture = RUPeasant03_Alt.tga 0 RUPeasant03_Alt.tga
		RandomTexture = RUPeasant03.tga 0 RUPeasant03_Alt.tga

;;====================== MODELS ================================================================		
		DefaultModelConditionState
			Model               = RUPsnt_3_SKN
			Skeleton            = RUPsnt_3_SKL
		End
		
;;================== ANIMATIONS =================================================================				

;;------------------  DYING -------------------------------------------------------------
	
		AnimationState						= PASSENGER
			Animation						= FLLA
				AnimationName				= RUPsnt_3_FLLA
				AnimationMode				= LOOP
			End
		End
		
		AnimationState        = THROWN_PROJECTILE
			Animation           = FLYA
				AnimationName     = RUPsnt_3_FLYA
				AnimationMode     = LOOP
			End
		End
		
		AnimationState						= FREEFALL
			Animation						= FLYA
				AnimationName				= RUPsnt_3_FLYA
				AnimationMode				= LOOP
				AnimationSpeedFactorRange	= 0.7	0.7
				AnimationBlendTime			= 10
			End
		End
		
		AnimationState        = STUNNED_FLAILING
			Animation           = FLYA
				AnimationName     = RUPsnt_3_FLYA
				AnimationMode      = LOOP
			End
			Flags               = RANDOMSTART
		End
		
		AnimationState						= DYING SPLATTED
			Animation						= LNDA
				AnimationName				= RUPsnt_3_LNDA
				AnimationMode				= ONCE
			End
		End
		
;		AnimationState					=	DYING AFLAME
;			Animation					=	Fire
;				AnimationName     = RUPsnt_3__MFDA
;				AnimationMode     = LOOP
;			End
;		End	
		
		AnimationState        = DYING
			Animation           = DIEA
				AnimationName     = RUPsnt_3_DIEA
				AnimationMode     = ONCE
			End
			Animation           = DIEB
				AnimationName     = RUPsnt_3_DIEB
				AnimationMode     = ONCE
			End
			Animation           = DIEC
				AnimationName     = RUPsnt_3_DIEC
				AnimationMode     = ONCE
			End			
		End
		
		AnimationState        = STUNNED_STANDING_UP
;			Animation           = GTPA				; from side
;				AnimationName     = RUPsnt_3_GTPA
;				AnimationMode     = ONCE
;			End
			Animation           = GTPB				; from back
				AnimationName     = RUPsnt_3_GTPB
				AnimationMode     = ONCE
				AnimationSpeedFactorRange = 1.5 1.5
			End
		End
		
		AnimationState        = STUNNED
			Animation           = LNDA
				AnimationName     = RUPsnt_3_LNDA
				AnimationMode     = ONCE
			End
		End	
		
		AnimationState        = MOVING FIRING_OR_PREATTACK_A
			ShareAnimation		= Yes
			Animation           = RunAndFire
				AnimationName       = RUPsnt_3_ATRA
				AnimationMode       = LOOP
			End
			Flags               = RANDOMSTART 
		End
;		

;;------------------ ATTACKING ---------------------------------------		

		AnimationState				=	FIRING_OR_PREATTACK_A
			Animation				=	ATKA
				AnimationName		=	RUPsnt_3_ATKA 
				AnimationMode		=	LOOP
;				UseWeaponTiming		=	Yes
			End
			Animation				=	ATKB
				AnimationName		=	RUPsnt_3_ATKB 
				AnimationMode		=	LOOP
;				UseWeaponTiming		=	Yes
			End			
		End

;;------------------ MOVING ------------------------------------------

;;===== BACKUP
		AnimationState				= MOVING BACKING_UP
			Animation				= BAKA
				AnimationName		= RUPsnt_3_BAKA
				AnimationMode		= LOOP
			End
		End
		
;OBSOLETE		
;		AnimationState				= MOVING PANICKING
;			Animation				= WLKM
;				AnimationName		= RUPsnt_3_MFDA
;				AnimationMode		= LOOP
;			End
;			;;ParticleSysBone     = None InfantryDustTrails
;		End
		
		AnimationState				= MOVING WANDER
			Animation				= WLKA
				AnimationName		= RUPsnt_3_WLKA
				AnimationMode		= LOOP
			End
			;;ParticleSysBone     = None InfantryDustTrails
		End

		AnimationState				= MOVING ATTACKING
			Animation				= RUNE
				AnimationName		= RUPsnt_3_RUNE
				AnimationMode		= LOOP
				AnimationBlendTime	= 15
			End
			Animation				= RUNF
				AnimationName		= RUPsnt_3_RUNF
				AnimationMode		= LOOP
				AnimationBlendTime	= 15
			End			
			;;ParticleSysBone     = None InfantryDustTrails
		End
		
		AnimationState				= MOVING
			Animation				= RUNC
				AnimationName		= RUPsnt_3_RUNC
				AnimationMode		= LOOP
			End
			Animation				= RUND
				AnimationName		= RUPsnt_3_RUND
				AnimationMode		= LOOP
			End
			Flags					= RANDOMSTART
			;;ParticleSysBone			= None InfantryDustTrails
		End

; WORKING	

		AnimationState = ACTIVELY_CONSTRUCTING DEPLOYED ; building from too far to smack his hammer
			Animation				=	Stand
				AnimationName		=	RUPsnt_3_IDLA 
				AnimationMode		=	LOOP
			End
		End
	
		AnimationState				= ACTIVELY_CONSTRUCTING
			Animation				= WRKB
				AnimationName		= RUPsnt_3_WRKB
				AnimationMode		= ONCE
			End
			Animation				= WRKC
				AnimationName		= RUPsnt_3_WRKC
				AnimationMode		= ONCE
			End			
			Flags					= RANDOMSTART RESTART_ANIM_WHEN_COMPLETE			
		End
				
;;------------ HIT REACTION -----------------------------------------------------

		AnimationState = HIT_REACTION
			Animation = Hit_Level_1_a
				AnimationName = RUPsnt_3_HITA
				AnimationMode = ONCE
			End
		End
		
;;------------- EMOTIONS ---------------------------------------------

;;======== POINTING

		AnimationState				= EMOTION_POINTING
			Animation				= Pointing3
				AnimationName		= RUPsnt_3_PNTA
				AnimationMode		= LOOP
                AnimationSpeedFactorRange = 0.75 1.25
			End
		End

;;======= TERROR

		AnimationState				= EMOTION_AFRAID
			Animation				= &&FEAR&&
				AnimationName		= RUPsnt_3_FERA
				AnimationMode		= LOOP
			End
		End
		
		AnimationState				= EMOTION_TAUNTING
			Animation				= TNTA
				AnimationName		= RUPsnt_3_TNTA
				AnimationMode		= ONCE
			End
			Animation				= TNTB
				AnimationName		= RUPsnt_3_TNTB
				AnimationMode		= ONCE
			End
			Flags					= RANDOMSTART RESTART_ANIM_WHEN_COMPLETE								
		End

;;====== CELEBRATING		
		AnimationState				= EMOTION_CELEBRATING
			Animation				= CHRA
				AnimationName	    = RUPsnt_3_CHRA
				AnimationMode		= ONCE
			End
			Animation				= CHRB
				AnimationName	    = RUPsnt_3_CHRB
				AnimationMode		= ONCE
			End
			Flags					= RANDOMSTART RESTART_ANIM_WHEN_COMPLETE			
		End
		
		AnimationState				= EMOTION_ALERT
			StateName				= STATE_Alert
			Animation				= &&ALERT&&
				AnimationName		= RUPsnt_3_IDLA
				AnimationMode		= LOOP
			End
		End
;;------------- SELECTED ---------------------------------------------

		AnimationState				=	SELECTED
			StateName				=	STATE_Selected
			SimilarRestart			=   Yes			
			Animation				=	ATNB
				AnimationName		=	RUPsnt_3_ATNB
				AnimationMode		=	LOOP
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Idle" then CurDrawableSetTransitionAnimState("TRANS_IdleToSelected") end
				if Prev == "STATE_Selected" then CurDrawableSetTransitionAnimState("TRANS_IdleToSelected") end
			EndScript
		End	

;;--------------- IDLE STATES -----------------------------------------------------------------			

		IdleAnimationState
			StateName				=	STATE_Idle
			Animation           = IDLA
				AnimationName     = RUPsnt_3_IDLA
				AnimationMode     = ONCE
				AnimationPriority = 20
			End
			
			Animation           = IDLC
				AnimationName     = RUPsnt_3_IDLC
				AnimationMode     = ONCE
				AnimationPriority = 1
			End

			Animation           = IDLD
				AnimationName     = RUPsnt_3_IDLD
				AnimationMode     = ONCE
				AnimationPriority = 2
			End

			Animation           = IDLE
				AnimationName     = RUPsnt_3_IDLE
				AnimationMode     = ONCE
				AnimationPriority = 1
			End

			Animation           = IDLF
				AnimationName     = RUPsnt_3_IDLF
				AnimationMode     = ONCE
				AnimationPriority = 1
			End

			Animation           = IDLG
				AnimationName     = RUPsnt_3_IDLG
				AnimationMode     = ONCE
				AnimationPriority = 1				
			End
			
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Selected" then CurDrawableSetTransitionAnimState("TRANS_SelectedToIdle") end
			EndScript					
		End

	;---Transitions-------------------------------------		

		TransitionState       = TRANS_SelectedToIdle	
			Animation           = ATNC
				AnimationName     = RUPsnt_3_ATNC
				AnimationMode     = ONCE
				AnimationSpeedFactorRange = 0.7 1.2
			End
		End
		
		TransitionState				=	TRANS_IdleToSelected
			Animation				=	ATNA
				AnimationName		=	RUPsnt_3_ATNA
				AnimationMode		=	ONCE
				AnimationSpeedFactorRange = 0.7 1.2
			End
		End		
	
	End
	
	EquivalentTo = RohanPeasant	


	; *** AUDIO Parameters ***;

	VoiceAttack 				= PeasantMaleVoiceAttack
	VoiceAttackCharge 			= PeasantMaleVoiceAttackCharge
	VoiceAttackStructure 			= PeasantMaleVoiceAttackBuilding
	VoiceAttackMachine 			= PeasantMaleVoiceAttack
	VoiceCreated 				= PeasantMaleVoiceSalute
	VoiceFullyCreated 			= PeasantMaleVoiceSalute
	VoiceGuard					= PeasantMaleVoiceMove
	VoiceMove 					= PeasantMaleVoiceMove
	VoiceMoveToCamp 				= PeasantMaleVoiceMoveCamp
	VoiceMoveWhileAttacking 		= PeasantMaleVoiceDisengage
	VoicePriority				= 30			;3
	VoiceRetreatToCastle 			= PeasantMaleVoiceRetreat
	VoiceSelect 				= PeasantMaleVoiceSelect
	VoiceSelectBattle  			= PeasantMaleVoiceSelectBattle

	VoiceEnterStateAttack 			= PeasantMaleVoiceEnterStateAttack
	VoiceEnterStateAttackCharge 		= PeasantMaleVoiceEnterStateAttackCharge
	VoiceEnterStateAttackStructure 	= PeasantMaleVoiceEnterStateAttackBuilding
	VoiceEnterStateAttackMachine		= PeasantMaleVoiceEnterStateAttackBuilding
	VoiceEnterStateMove 			= PeasantMaleVoiceEnterStateMove
	VoiceEnterStateMoveToCamp 		= PeasantMaleVoiceEnterStateMoveCamp
	VoiceEnterStateMoveWhileAttacking	= PeasantMaleVoiceEnterStateDisengage
	VoiceEnterStateRetreatToCastle 	= PeasantMaleVoiceEnterStateRetreat
	
	UnitSpecificSounds
		VoiceGarrison         		= PeasantMaleVoiceGarrison    
	End

	; Tie into LargeGroupAudio system
	Behavior = LargeGroupAudioUpdate ModuleTag_LGAU
		Key = Human Unit Peasant Peasant_Male
	End

	EvaEventDamagedOwner			= UnitUnderAttack		;Eva event to trigger when unit is damaged

	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		MaxUpdateRangeCap = 800
		AnimationSound = Sound:BodyFallGenericNoArmor	Animation:RUPsnt_3_SKL.RUPsnt_3_DIEA	Frames:46
		AnimationSound = Sound:BodyFallGeneric1		Animation:RUPsnt_3_SKL.RUPsnt_3_DIEB	Frames:45
		AnimationSound = Sound:BodyFallGenericNoArmor	Animation:RUPsnt_3_SKL.RUPsnt_3_DIEC	Frames:35
		AnimationSound = Sound:BodyFallGeneric1		Animation:RUPsnt_3_SKL.RUPsnt_3_LNDA	Frames:8
	End


; *** ENGINEERING PARAMETERS *** ;

	Behavior = SubObjectsUpgrade Armor_Upgrade
		TriggeredBy		= Upgrade_RohanHeavyArmor
		ShowSubObjects	= HELMET
		HideSubObjects	= HAMMER		
		UpgradeTexture	= RUPeasant03.tga 0 RUPeasant03_HA.tga
		UpgradeTexture	= RUPeasant03_Alt.tga 0 RUPeasant03_HA.tga
		UpgradeTexture	= RUPeasantWep.tga 0 RUPeasantWep_HA.tga
		UpgradeTexture	= RUPeasantWep_L.tga 0 RUPeasantWep_HA.tga
		RecolorHouse	= Yes
		ExcludeSubobjects = Forged_Blade
	End

End
	
;;------------------------------------------------------------------------------
; aka Peasant4  ///  WOMAN ///
ChildObject RohanPeasant4 RohanPeasant1
	; ***ART Parameters ***
	
	Draw = W3DScriptedModelDraw ModuleTag_01  

		StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD
			
		OkToChangeModelColor = Yes
		  
		RandomTexture = RUPeasant04.tga 0 RUPeasant04.tga
		RandomTexture = RUPeasant04_Alt.tga 0 RUPeasant04.tga

;;====================== MODELS ================================================================		
		DefaultModelConditionState
			Model               = RUPsnt_4_SKN
			Skeleton            = RUPsnt_4_SKL
		End

;;================== ANIMATIONS =================================================================		


;;------------------  DYING -------------------------------------------------------------
		
		AnimationState						= PASSENGER
			Animation						= FLLA
				AnimationName				= RUPsnt_4_FLLA
				AnimationMode				= LOOP
			End
		End
		
		AnimationState				= THROWN_PROJECTILE
			Animation				= FLYA
				AnimationName		= RUPsnt_4_FLYA
				AnimationMode		= LOOP
			End
		End
		
		AnimationState						= FREEFALL
			Animation						= FLYA
				AnimationName				= RUPsnt_4_FLYA
				AnimationMode				= LOOP
				AnimationSpeedFactorRange	= 0.7	0.7
				AnimationBlendTime			= 10
			End
		End
		
		AnimationState        = STUNNED_FLAILING
			Animation           = FLYA
				AnimationName     = RUPsnt_4_FLYA
				AnimationMode      = LOOP
			End
		End
		
		AnimationState						= DYING SPLATTED
			Animation						= LNDA
				AnimationName				= RUPsnt_4_LNDA
				AnimationMode				= ONCE
			End
		End
		
		AnimationState				= DYING
			Animation				= DIEA
				AnimationName		= RUPsnt_4_DIEA
				AnimationMode		= ONCE
			End
			Animation				= DIEB
				AnimationName		= RUPsnt_4_DIEB
				AnimationMode		= ONCE
			End
			Animation				= DIEC
				AnimationName		= RUPsnt_4_DIEC
				AnimationMode		= ONCE
			End
		End

		AnimationState				= STUNNED_STANDING_UP
			Animation				= GTPA
				AnimationName		= RUPsnt_4_GTPA
				AnimationMode		= ONCE
				AnimationSpeedFactorRange = 1.5 1.5
			End
;			Animation           = GTPB
;				AnimationName     = RUPsnt_4_GTPB
;				AnimationMode     = ONCE
;			End						
		End
		
		AnimationState				= STUNNED
			Animation				= LNDA
				AnimationName		= RUPsnt_4_LNDA
				AnimationMode		= ONCE
			End
		End
		
		AnimationState        = MOVING FIRING_OR_PREATTACK_A
			ShareAnimation		= Yes
			Animation           = RunAndFire
				AnimationName       = RUPsnt_4_ATRA
				AnimationMode       = LOOP
			End
			Flags               = RANDOMSTART 
		End

;;------------------ ATTACKING ---------------------------------------		

		AnimationState				=	FIRING_OR_PREATTACK_A
			Animation
				AnimationName		=	RUPsnt_4_ATKA 
				AnimationMode		=	LOOP
;				UseWeaponTiming		=	Yes
			End
			Animation
				AnimationName		=	RUPsnt_4_ATKB
				AnimationMode		=	LOOP
;				UseWeaponTiming		=	Yes
			End						
		End


;;------------------ MOVING ------------------------------------------

;;===== BACKUP
		AnimationState				= MOVING BACKING_UP
			Animation				= BAKA
				AnimationName		= RUPsnt_4_BAKA
				AnimationMode		= LOOP
			End
		End

; OBSOLETE		
;		AnimationState				= MOVING PANICKING
;			Animation				= WLKM
;				AnimationName		= RUPsnt_4_MFDA
;				AnimationMode		= LOOP
;			End
;			;;ParticleSysBone     = None InfantryDustTrails
;		End

		AnimationState				= MOVING WANDER
			Animation				= WLKA
				AnimationName		= RUPsnt_4_WLKA
				AnimationMode		= LOOP
			End
			;;ParticleSysBone     = None InfantryDustTrails
		End

		AnimationState				= MOVING ATTACKING
			Animation				= RUNB
				AnimationName		= RUPsnt_4_RUNB
				AnimationMode		= LOOP
				AnimationBlendTime	= 15
			End
			Animation				= RUNE
				AnimationName		= RUPsnt_4_RUNE
				AnimationMode		= LOOP
				AnimationBlendTime	= 15
			End			
			;;ParticleSysBone     = None InfantryDustTrails
		End
				
		AnimationState				= MOVING
			Animation				= RUNA
				AnimationName		= RUPsnt_4_RUNA
				AnimationMode		= LOOP
			End
			Animation				= RUNC
				AnimationName		= RUPsnt_4_RUNC
				AnimationMode		= LOOP
			End						
			Animation				= RUND
				AnimationName		= RUPsnt_4_RUND
				AnimationMode		= LOOP
			End									
			Flags					= RANDOMSTART
			;;ParticleSysBone			= None InfantryDustTrails
		End

; WORKING	



		AnimationState = ACTIVELY_CONSTRUCTING DEPLOYED ; building from too far to smack his hammer
			Animation				=	Stand
				AnimationName		=	RUPsnt_4_IDLA 
				AnimationMode		=	LOOP
			End
		End
	
		AnimationState				= ACTIVELY_CONSTRUCTING
			Animation				= WRKA
				AnimationName		= RUPsnt_4_WRKA
				AnimationMode		= LOOP
			End
		End
			
;;------------ HIT REACTION -----------------------------------------------------

		AnimationState = HIT_REACTION
			Animation = Hit_Level_1_a
				AnimationName = RUPsnt_4_HITA
				AnimationMode = ONCE
			End
		End

;;------------- EMOTIONS ---------------------------------------------

;;======== POINTING

		AnimationState				= EMOTION_POINTING
			Animation				= Pointing4
				AnimationName		= RUPsnt_4_PNTA
				AnimationMode		= LOOP
                AnimationSpeedFactorRange = 0.75 1.25
			End
		End
		
;;======= TERROR

		AnimationState				= EMOTION_AFRAID
			Animation				= &&FEAR&&
				AnimationName		= RUPsnt_4_FERA
				AnimationMode		= LOOP
			End
		End
			
		AnimationState				= EMOTION_TAUNTING
			Animation				= TNTA
				AnimationName		= RUPsnt_4_TNTA
				AnimationMode		= LOOP
			End
			Animation				= TNTB
				AnimationName		= RUPsnt_4_TNTB
				AnimationMode		= LOOP
			End	
			Flags					= RANDOMSTART RESTART_ANIM_WHEN_COMPLETE				
		End
	
;;====== CELEBRATING		
		AnimationState				= EMOTION_CELEBRATING
			Animation				= CHRA
				AnimationName	    = RUPsnt_4_CHRA
				AnimationMode		= ONCE
			End
			Animation				= CHRB
				AnimationName	    = RUPsnt_4_CHRB
				AnimationMode		= ONCE
			End
			Animation				= CHRC
				AnimationName	    = RUPsnt_4_CHRC
				AnimationMode		= ONCE
			End
			Flags					= RANDOMSTART RESTART_ANIM_WHEN_COMPLETE			
		End
		
		AnimationState				= EMOTION_ALERT
			StateName				= STATE_Alert
			Animation				= &&ALERT&&
				AnimationName		= RUPsnt_4_IDLA
				AnimationMode		= LOOP
			End
		End

;;------------- SELECTED ---------------------------------------------

		AnimationState				=	SELECTED
			StateName				=	STATE_Selected
			SimilarRestart			=   Yes			
			Animation				=	ATNB
				AnimationName		=	RUPsnt_4_ATNB
				AnimationMode		=	LOOP
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Idle" then CurDrawableSetTransitionAnimState("TRANS_IdleToSelected") end
				if Prev == "STATE_Selected" then CurDrawableSetTransitionAnimState("TRANS_IdleToSelected") end
			EndScript
		End	
		
;;--------------- IDLE STATES -----------------------------------------------------------------			

		IdleAnimationState
			StateName			=	STATE_Idle
			Animation           = IDLA
				AnimationName     = RUPsnt_4_IDLA
				AnimationMode     = ONCE
				AnimationPriority = 20
			End
			Animation           = IDLC
				AnimationName     = RUPsnt_4_IDLC
				AnimationMode     = ONCE
				AnimationPriority = 1
			End
			Animation           = IDLD
				AnimationName     = RUPsnt_4_IDLD
				AnimationMode     = ONCE
				AnimationPriority = 1
			End	
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Selected" then CurDrawableSetTransitionAnimState("TRANS_SelectedToIdle") end
			EndScript													
		End
		
;---Transitions-------------------------------------		

		TransitionState       = TRANS_SelectedToIdle	
			Animation           = ATNC
				AnimationName     = RUPsnt_4_ATNC
				AnimationMode     = ONCE
				AnimationSpeedFactorRange = 0.7 1.2
			End
		End
		
		TransitionState				=	TRANS_IdleToSelected
			Animation				=	ATNA
				AnimationName		=	RUPsnt_4_ATNA
				AnimationMode		=	ONCE
				AnimationSpeedFactorRange = 0.7 1.2
			End
		End	
	
	
	
	End
	
	EquivalentTo = RohanPeasant


	; *** AUDIO Parameters ***;

	VoiceAttack					= PeasantFemaleVoiceAttack				;RohanPeasantWomanVoiceAttack
	VoiceAttackCharge				= PeasantFemaleVoiceAttackCharge
	VoiceAttackMachine			= PeasantFemaleVoiceAttack
	VoiceAttackStructure			= PeasantFemaleVoiceAttackBuilding
	VoiceCreated				= PeasantFemaleVoiceSalute
	VoiceFullyCreated 			= PeasantFemaleVoiceSalute
	VoiceGuard					= PeasantFemaleVoiceMove
	VoiceMove					= PeasantFemaleVoiceMove				;RohanPeasantWomanVoiceMove
	VoiceMoveToCamp				= PeasantFemaleVoiceMoveCamp
	VoiceMoveWhileAttacking			= PeasantFemaleVoiceDisengage
	VoicePriority				= 13								;3
	VoiceRetreatToCastle			= PeasantFemaleVoiceRetreat
	VoiceSelect					= PeasantFemaleVoiceSelect				;RohanPeasantWomanVoiceSelect
	VoiceSelectBattle 			= PeasantFemaleVoiceSelectBattle

	VoiceEnterStateAttack			= PeasantFemaleVoiceEnterStateAttack		;RohanPeasantWomanVoiceAttack
	VoiceEnterStateAttackCharge		= PeasantFemaleVoiceEnterStateAttackCharge
	VoiceEnterStateAttackMachine		= PeasantFemaleVoiceEnterStateAttackBuilding
	VoiceEnterStateAttackStructure	= PeasantFemaleVoiceEnterStateAttackBuilding
	VoiceEnterStateMove			= PeasantFemaleVoiceEnterStateMove			;RohanPeasantWomanVoiceMove
	VoiceEnterStateMoveToCamp		= PeasantFemaleVoiceEnterStateMoveCamp
	VoiceEnterStateMoveWhileAttacking	= PeasantFemaleVoiceEnterStateDisengage
	VoiceEnterStateRetreatToCastle	= PeasantFemaleVoiceEnterStateRetreat
		
	SoundImpact = ImpactHorse

	UnitSpecificSounds
		VoiceGarrison			= PeasantFemaleVoiceGarrison
		VoiceRepair				= PeasantFemaleVoiceRepair
	End

	EvaEventDamagedOwner			= UnitUnderAttack		;Eva event to trigger when unit is damaged

	ReplaceModule ModuleTag_RSSCB
		ClientBehavior = RandomSoundSelectorClientBehavior ModuleTag_RSSCB_Woman
			; This boils down to: Each time a mixed RohanPeasant is created, there is a 
			; 1.5% chance per female the female will be "bossy" and play her voices
			; instead of the men's. Once the "bossy-ness" of a female is set, it does
			; change, so that we don't keep getting voices from different people.
			; So, normally, the male voices will be heard [hey, this IS Middle Earth -- not a place known
			; for its gender equity], but every once in a while the females will get a voice. Otherwise
			; we basically never ever hear all these nice lines. This spices things up a bit
			Chance = 1.5% 
			RerollOnEveryFrame = No ; For consistancy of which unit plays the voice
			VoicePriority = 31 ; High enough to overcome the non-bossy men
		End
	End

	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		MaxUpdateRangeCap = 800
		AnimationSound = Sound:BodyFallGenericNoArmor	Animation:RUPsnt_4_SKL.RUPsnt_4_DIEA	Frames:47
		AnimationSound = Sound:BodyFallGenericNoArmor	Animation:RUPsnt_4_SKL.RUPsnt_4_DIEB	Frames:43
		AnimationSound = Sound:BodyFallGenericNoArmor	Animation:RUPsnt_4_SKL.RUPsnt_4_DIEC	Frames:34
		AnimationSound = Sound:BodyFallGeneric1		Animation:RUPsnt_4_SKL.RUPsnt_4_LNDA	Frames:1
	End

	; Tie into LargeGroupAudio system
	Behavior = LargeGroupAudioUpdate ModuleTag_LGAU
		Key = Human Unit Peasant Peasant_Female
	End

; *** ENGINEERING PARAMETERS *** ;

	;-------------------------------------------------------------------------------
	;
	;	Sub objects upgrade.
	;
	Behavior = SubObjectsUpgrade Armor_Upgrade
		TriggeredBy	= Upgrade_RohanHeavyArmor
		UpgradeTexture	= RUPeasant04.tga 0 RUPeasant04_HA.tga
		UpgradeTexture	= RUPeasant04_Alt.tga 0 RUPeasant04_HA.tga
		UpgradeTexture	= RUPeasantWep.tga 0 RUPeasantWep_HA.tga
		UpgradeTexture	= RUPeasantWep_L.tga 0 RUPeasantWep_HA.tga
		RecolorHouse	= Yes
		ExcludeSubobjects = Forged_Blade
	End

	Behavior = SlowDeathBehavior ModuleTag_05
		DeathTypes = ALL
		SinkDelay = 3000
		SinkRate = 1.0     ; in Dist/Sec
		DestructionDelay = 8000
            Sound = INITIAL PeasantFemaleVoiceDie
	End
End	

;------------------------------------------------------------------------------
; aka WorkerRohan, Peasant, Laborer
Object RohanWorker
	; *** ART Parameters ***

	Draw = W3DScriptedModelDraw ModuleTag_01

	  OkToChangeModelColor = Yes
	  
	  StaticModelLODMode = Yes
	  
		DefaultModelConditionState
			Model               = GUWorker_SKN
			Skeleton            = GUWorker_SKL
		End

		IdleAnimationState
			Animation           = IDLA
				AnimationName     = GUWorker_IDLA
				AnimationMode     = ONCE
			End
		End
	
		AnimationState          = DYING DEATH_1
			Animation
				AnimationName   = GUWorker_DIEA
				AnimationMode   = ONCE
			End
		End
	
		AnimationState          = DYING DEATH_2
			Animation
				AnimationName   = GUWorker_IDLA
				AnimationMode   = LOOP
			End
		End

		AnimationState          = MOVING
			Animation           = WLKA
				AnimationName     = GUWorker_WLKA
				AnimationMode     = LOOP
				AnimationSpeedFactorRange = 1.4 1.4
			End
			Flags               = RANDOMSTART
			;ParticleSysBone     = None InfantryDustTrails
		End


		AnimationState = ACTIVELY_CONSTRUCTING DEPLOYED ; building from too far to smack his hammer
			Animation				=	Stand
				AnimationName		=	GUWorker_IDLA 
				AnimationMode		=	LOOP
			End
		End


		AnimationState        = ACTIVELY_CONSTRUCTING
			Animation           = WRKA
				AnimationName     = GUWorker_WRKA
				AnimationMode     = ONCE
				AnimationPriority	=	30
				AnimationSpeedFactorRange = 0.9 1.1
			End
			Animation           = WRKA
				AnimationName     = GUWorker_WRKA
				AnimationMode     = ONCE
				AnimationPriority	=	30
				AnimationSpeedFactorRange = 0.9 1.1
			End
			Animation           = WRKA2
				AnimationName     = GUWorker_WRKA
				AnimationMode     = ONCE
				AnimationPriority	=	5
				AnimationSpeedFactorRange = 0.9 1.1
			End
			Animation           = WRKB
				AnimationName     = GUWorker_WRKB
				AnimationMode     = ONCE
				AnimationPriority	=	5
				AnimationSpeedFactorRange = 0.9 1.1
			End
			Flags					=	RESTART_ANIM_WHEN_COMPLETE
		End
	End
	
	; ***DESIGN parameters ***
	Side = Rohan
	EditorSorting = UNIT
	ThreatLevel = 1.0
	TransportSlotCount = 1
	ArmorSet
		Conditions      = None
		Armor           = NoArmor
		DamageFX        = NormalDamageFX
	End
	VisionRange = 120.0
	DisplayName = OBJECT:RohanWorker
	CrushableLevel = 0  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
	CrushRevengeWeapon = BasicInfantryCrushRevenge
	
	CommandPoints = 0

;	CommandSet = GondorWorkerCommandSet


	; *** AUDIO Parameters ***;

	VoiceMove			= NoSound
	VoicePriority			= 12
	VoiceSelect			= NoSound
	
	SoundImpact = ImpactHorse
	
	;UnitSpecificSounds
	;	VoiceGarrison         = NoSound
	;	VoiceEnter            = NoSound
	;	VoiceEnterHostile     = NoSound
	;	VoiceGetHealed        = NoSound
	;End

	; Example of how to get unit-died Eva event
	;EvaEventDieOwner = WorkerDie			;Eva event to trigger on unit's death.
	; Example of hopw to get unit-damaged Eva event
	;EvaEventDamagedOwner = WorkerDamaged		;Eva event to trigger when unit is damaged

	; *** ENGINEERING Parameters ***
	RadarPriority = UNIT
	KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE THROWN_OBJECT DOZER GRAB_AND_DROP SWARM_DOZER
	
	Body = ActiveBody ModuleTag_02
		MaxHealth         = 999999                  ;BALANCE Townsman Health huge so they can't be killed.
		MaxHealthDamaged  = 999999
		;RecoveryTime      = 5000
	End
	
	Behavior = WorkerAIUpdate ModuleTag_10
		RepairHealthPercentPerSecond  = 0.3%    ; % of max health to repair each second
		BoredTime                     = 1000  ; in milliseconds
		BoredRange                    = 120   ; when bored, we look this far away to do something 
		AttackPriority				= 	AttackPriority_Infantry
		SpecialContactPoints		   = Repair
	End

	LocomotorSet
		Locomotor = HumanLocomotor
		Condition = SET_NORMAL 
		Speed     = NORMAL_GOOD_INFANTRY_MEMBER_SPEED	
	End

	LocomotorSet
		Locomotor = HumanWanderLocomotor
		Condition = SET_WANDER
		Speed     = NORMAL_GOOD_INFANTRY_MEMBER_SPEED	
	End
	
	Behavior = PhysicsBehavior ModuleTag_04
		GravityMult = 1.0
	End
	
	Behavior = SlowDeathBehavior ModuleTag_05
		DeathTypes = ALL -FADED
		DeathFlags = DEATH_1
		SinkDelay = 2000
		SinkRate = 1.20     ; in Dist/Sec
		DestructionDelay = 6000
	End
	
	Behavior = SlowDeathBehavior ModuleTag_ConstructionDeath
		DeathTypes = NONE +FADED
		DeathFlags = DEATH_2
		FadeDelay = 500
		FadeTime = 3500
		DestructionDelay = 4500
	End
	
	Behavior = SquishCollide ModuleTag_06
		;nothing
	End
	
	Behavior = BezierProjectileBehavior ModuleTag_08 ; Module starts asleep, and wakes up when thrown.
		FirstHeight = 24  ; Height of Bezier control points above highest intervening terrain
		SecondHeight = 24
		FirstPercentIndent = 30% ; Percentage of shot distance control points are placed
		SecondPercentIndent = 70%
		TumbleRandomly = Yes

		CrushStyle = Yes ; I don't detonate, I just hit
		DieOnImpact = Yes
		BounceCount = 1   ; When I hit the ground, I'll arc again
		BounceDistance = 40 ; this far
		BounceFirstHeight = 16  ; Height of Bezier control points above highest intervening terrain
		BounceSecondHeight = 16
		BounceFirstPercentIndent = 20% ; Percentage of shot distance control points are placed
		BounceSecondPercentIndent = 80%

		GroundHitFX       = FX_ThrownRockGroundHit
		GroundBounceFX    = FX_ThrownRockBounceHit
	End

    ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		MaxUpdateRangeCap = 800
		AnimationSound = Sound: GondorMasonHammering Animation:GUWorker_SKL.GUWorker_WRKA Frames: 4 
    End
	Geometry = CYLINDER
	GeometryMajorRadius = 8.0
	GeometryMinorRadius = 8.0
	GeometryHeight = 19.2
	GeometryIsSmall = Yes

  Shadow = SHADOW_DECAL
  ShadowSizeX = 19;
  ShadowSizeY = 19;
  ShadowTexture = ShadowI;
End

ChildObject RohanWorkerNoSelect RohanWorker
	KindOf = PRELOAD CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER THROWN_OBJECT DOZER GRAB_AND_DROP SWARM_DOZER NOT_AUTOACQUIRABLE
	ImmuneToShockwave = Yes
End

;------------------------------------------------------------------------------
; aka Porter
Object RohanPorterInterface
	; *** ART Parameters ***
	
	SelectPortrait = UPGondor_Porter

    ; ButtonImage for Porter
    ButtonImage = UPGondor_Porter ; temp!!
	
	Draw = W3DTruckDraw ModuleTag_01

		;StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD
	
		OkToChangeModelColor = Yes
		  
		DefaultModelConditionState
			Model					= RUPorter_SKN
			Skeleton				= GUPorter_SKL
		End

		IdleAnimationState
			Animation				= IDLA
				AnimationName		= GUPorter_IDLA
				AnimationMode		= ONCE
			End
		End

		AnimationState				= DYING DEATH_1
			Animation				= DIEB
				AnimationName		= GUPorter_DIEB
				AnimationMode		= MANUAL
			End
		End

		AnimationState				= DYING
			Animation				= DIEA
				AnimationName		= GUPorter_DIEA
				AnimationMode		= ONCE
			End
		End

		AnimationState				= MOVING WANDER
			Animation				= WLKA
				AnimationName		= GUPorter_WLKA
				AnimationMode		= LOOP
			End
			Flags					= RANDOMSTART
			;ParticleSysBone			= None InfantryDustTrails
		End
	
		AnimationState				= MOVING
			Animation				= RUNNING
				AnimationName		= GUPorter_RUNA
				AnimationMode		= LOOP
			End
			Flags					= RANDOMSTART
			;ParticleSysBone			= None InfantryDustTrails
		End

		LeftFrontTireBone			= WHEEL_L01
		RightFrontTireBone			= WHEEL_R01
		;LeftRearTireBone			= WHEEL_L01
		;RightRearTireBone			= WHEEL_R01
		TireRotationMultiplier		= 0.2
	End

	; ***DESIGN parameters ***
	Side = Rohan
	EditorSorting					=	UNIT
	ThingClass						= HORDE_UNIT
	CommandPoints = 0

	TransportSlotCount = 1
	ArmorSet
		Conditions					= None
		Armor						= NoArmor
		DamageFX					= NormalDamageFX
	End
	
	BuildCost = 200
	BuildTime = 5.0     
	VisionRange = 120.0
	
	DisplayName = OBJECT:RohanPorter
	CrushableLevel = 0  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
	ImmuneToShockwave = yes
	IsTrainable = No
	
	CommandSet = PorterCommandSet

	; *** AUDIO Parameters ***;

	;VoiceAmbushed			= 
	VoiceCreated			= PorterGenericVoiceReady		;GondorPorterFlameVoiceCreateFlame
	VoiceFullyCreated 		= PorterGenericVoiceReady
	VoiceFear 			= PorterGenericVoiceHelpMe
	VoiceMove			= PorterGenericVoiceMove		;GondorPorterFlameVoiceMove
	VoiceMoveToCamp			= PorterGenericVoiceMove
	VoicePriority			= 6
	;VoiceRetreatToCastle		= 
	VoiceSelect			= PorterGenericVoiceSelect		;GondorPorterFlameVoiceSelect
	VoiceSelect2			= HumanPorterVoiceSelect2

	SoundImpact			= ImpactHorse

;PorterGenericVoiceDeliver

	;UnitSpecificSounds
	;End

	EvaEventDamagedOwner = PorterUnderAttack	;Eva event to trigger when unit is damaged
	EvaEventDieOwner = PorterRohanDie		;Eva event to trigger on unit's death. NOTICE THAT this is only for permanent deaths


	; *** ENGINEERING Parameters ***
	RadarPriority = UNIT
	KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE THROWN_OBJECT GRAB_AND_DROP PORTER IGNORES_SELECT_ALL
	
	Body = ActiveBody ModuleTag_02
		MaxHealth         = GONDOR_PORTER_HEALTH                  ;BALANCE Townsman Health
		MaxHealthDamaged  = GONDOR_PORTER_HEALTH_DAMAGED
		;RecoveryTime      = GONDOR_PORTER_HEALTH_RECOVERY_TIME
	End
	
	Behavior = AIUpdateInterface AIUpdateInterfaceModuleTag
		AILuaEventsList	 = InfantryFunctions
		FadeOnPortals	 = Yes		
	End

	LocomotorSet
		Locomotor = PorterLocomotor
		Condition = SET_NORMAL 
		Speed     = NORMAL_PORTER_SPEED	
	End

	LocomotorSet
		Locomotor = PorterLocomotor
		Condition = SET_WANDER
		Speed     = NORMAL_PORTER_SPEED	
	End 

	Behavior = PhysicsBehavior ModuleTag_04
		GravityMult = 1.0
	End
	
	Behavior = SlowDeathBehavior SlowDeathBehaviorModuleTag_1
		DeathTypes = ALL -CRUSHED -EXPLODED -KNOCKBACK -DETONATED -SPLATTED
		SinkDelay = 3000
		SinkRate = 1.40     ; in Dist/Sec
		DestructionDelay = 13000
		Sound = INITIAL PorterGenericVoiceDie		;GondorPorterDie
	End

	Behavior = SlowDeathBehavior SlowDeathBehaviorModuleTag_2
		DeathTypes = NONE +CRUSHED +EXPLODED +KNOCKBACK +DETONATED +SPLATTED
		SinkDelay = 3000
		SinkRate = 1.40     ; in Dist/Sec
		DestructionDelay = 13000
		DeathFlags = DEATH_1
		FX = INITIAL FX_CatapultDieExplosion
		Sound = INITIAL PorterGenericVoiceDie		;GondorPorterDie
	End
	
	Behavior = SquishCollide ModuleTag_06
		;nothing
	End
	
	Behavior = BezierProjectileBehavior ModuleTag_08 ; Module starts asleep, and wakes up when thrown.
		FirstHeight = 24  ; Height of Bezier control points above highest intervening terrain
		SecondHeight = 24
		FirstPercentIndent = 30% ; Percentage of shot distance control points are placed
		SecondPercentIndent = 70%
		TumbleRandomly = Yes

		CrushStyle = Yes ; I don't detonate, I just hit
		DieOnImpact = Yes
		BounceCount = 1   ; When I hit the ground, I'll arc again
		BounceDistance = 40 ; this far
		BounceFirstHeight = 16  ; Height of Bezier control points above highest intervening terrain
		BounceSecondHeight = 16
		BounceFirstPercentIndent = 20% ; Percentage of shot distance control points are placed
		BounceSecondPercentIndent = 80%

		GroundHitFX       = FX_ThrownRockGroundHit
		GroundBounceFX    = FX_ThrownRockBounceHit
	End
	
	;--------------------------------------------------------------------
	; Sub object revealing.
	;--------------------------------------------------------------------
	Behavior = SubObjectsUpgrade Shield_Upgrade
		TriggeredBy		= Upgrade_RohanHorseShield
		ShowSubObjects	= SHIELDS
		HideSubObjects	= BANNERS BOWS BRAZIER ARMOR SWORDS TREBUCHET_FIRE FireArowTip Forged_Blade
		SkipFadeOnCreate = Yes
	End
	Behavior = SubObjectsUpgrade Bow_Upgrade
		TriggeredBy		= Upgrade_RohanHorseBow
		ShowSubObjects	= BOWS
		HideSubObjects	= BANNERS SHIELDS BRAZIER ARMOR SWORDS TREBUCHET_FIRE FireArowTip Forged_Blade
		SkipFadeOnCreate = Yes
	End
	Behavior = SubObjectsUpgrade FireArrows_Upgrade
		TriggeredBy		= Upgrade_FireArrows
		ShowSubObjects	= BRAZIER FireArowTip
		HideSubObjects	= BANNERS BOWS SHIELDS ARMOR SWORDS TREBUCHET_FIRE Forged_Blade
		SkipFadeOnCreate = Yes
	End
	Behavior = SubObjectsUpgrade Armor_Upgrade
		TriggeredBy		= Upgrade_RohanHeavyArmor
		ShowSubObjects	= ARMOR
		HideSubObjects	= BANNERS BOWS BRAZIER SHIELDS SWORDS TREBUCHET_FIRE FireArowTip Forged_Blade
		SkipFadeOnCreate = Yes
	End
	Behavior = SubObjectsUpgrade ForgedBlades_Upgrade
		TriggeredBy		= Upgrade_RohanForgedBlades
		ShowSubObjects	= SWORDS Forged_Blade
		HideSubObjects	= BANNERS BOWS BRAZIER ARMOR SHIELDS TREBUCHET_FIRE FireArowTip 
		SkipFadeOnCreate = Yes
	End
	
	;--------------------------------------------------------------------
	; Delivering and upgrading.
	;--------------------------------------------------------------------
	Behavior = SpecialPowerModule ModuleTag_UpgradeNearest
		SpecialPowerTemplate      = SpecialAbilityGiveUpgradeNearest
		UpdateModuleStartsAttack  = Yes
	End		
	Behavior = GiveUpgradeUpdate ModuleTag_UpgradeNearestUpdate
		SpecialPowerTemplate		= SpecialAbilityGiveUpgradeNearest
		StartAbilityRange		= 15.0
		UnpackTime			= 700
		PreparationTime			= 100 ; Quick shot
		PersistentPrepTime		= 500 ; looping the quick shot
		PackTime			= 233 ; back to idle
		ApproachRequiresLOS		= No
		DeliverUpgrade			= Yes
		FadeOutSpeed			= 0.1
		SpawnOutFX			= FX_PorterDeliver
	End
	
	Behavior = SpecialPowerModule ModuleTag_09
		SpecialPowerTemplate		= SpecialAbilityGiveUpgrade
		UpdateModuleStartsAttack	= Yes
		InitiateSound			= PorterGenericVoiceDeliver
	End		
	Behavior = GiveUpgradeUpdate GiveUpgradeUpdateModuleTag_11
		SpecialPowerTemplate		= SpecialAbilityGiveUpgrade
		StartAbilityRange		= 15.0
		UnpackTime			= 700
		PreparationTime			= 100			; Quick shot
		PersistentPrepTime		= 500			; looping the quick shot
		PackTime			= 233			; back to idle
		ApproachRequiresLOS		= No
		FadeOutSpeed			= 0.1
		SpawnOutFX			= FX_PorterDeliver
	End

	;--------------------------------------------------------------------
	; Emotion Tracker for the Terror state
	;--------------------------------------------------------------------
	Behavior = EmotionTrackerUpdate	Module_EmotionTracker
		AfraidOf					=	NONE +RohanTreeBerd +RohanEntFir +RohanEntAsh +RohanEntBirch +MordorBalrog +MordorCaveTroll +MordorMountainTroll +MordorDrummerTroll +MordorFellBeast +MordorMumakil;Must be SCARY kindof as well.
		AlwaysAfraidOf				=	NONE +MordorWitchKing +MordorWitchKingOnFellBeast +MordorBalrog +RohanOathbreaker

		FearScanDistance			=	INFANTRY_FEAR_SCAN_RADIUS

		AddEmotion	=	Terror_Base
	End	

	;--------------------------------------------------------------------
	; Don't make it any bigger or try making it a box or this unit will not make it up onto walls to deliver it's goods.
	Geometry = CYLINDER
	GeometryMajorRadius = 8.0
	GeometryMinorRadius = 8.0
	GeometryHeight = 16.0
	GeometryIsSmall = Yes
	Shadow = SHADOW_DECAL
	ShadowSizeX = 27;
	ShadowSizeY = 27;
	ShadowTexture = ShadowI;
End


;------------------------------ HorseShieldPorter HorseShieldsPorter ------------------------------

ChildObject RohanHorseShieldPorter RohanPorterInterface
	BuildCost = ROHAN_HORSESHIELDSPORTER_BUILDCOST
	BuildTime = ROHAN_HORSESHIELDSPORTER_BUILDTIME  
	Behavior = GrantUpgradeCreate ModuleTag_GrantUpdateCreate
	UpgradeToGrant = Upgrade_RohanHorseShield
	End
	
	DisplayName				= OBJECT:RohanHorseShieldPorter

	; *** AUDIO Parameters ***;

	;VoiceAmbushed			= 
	VoiceCreated			= PorterHorseShieldsVoiceReady
	VoiceFullyCreated 		= PorterHorseShieldsVoiceReady
	VoiceFear 			= PorterGenericVoiceHelpMe
	VoiceMove			= PorterGenericVoiceMove
	VoiceMoveToCamp			= PorterGenericVoiceMove
	VoicePriority			= 6
	;VoiceRetreatToCastle		= 
	VoiceSelect			= PorterHorseShieldsVoiceSelect

	SoundImpact			= ImpactHorse

;PorterHorseShieldsVoiceDeliver

	;UnitSpecificSounds
	;End

	EvaEventDamagedOwner = PorterUnderAttack	;Eva event to trigger when unit is damaged
	EvaEventDieOwner = PorterRohanDie		;Eva event to trigger on unit's death. NOTICE THAT this is only for permanent deaths

	Behavior				= SpecialPowerModule ModuleTag_09
		SpecialPowerTemplate		= SpecialAbilityGiveUpgrade
		UpdateModuleStartsAttack	= Yes
		InitiateSound			= PorterHorseShieldsVoiceDeliver
	End

	Behavior = GiveUpgradeUpdate GiveUpgradeUpdateModuleTag_11
		SpecialPowerTemplate	= SpecialAbilityGiveUpgrade
		StartAbilityRange	= 15.0
		UnpackTime		= 700
		PreparationTime		= 100
		PersistentPrepTime	= 500
		PackTime		= 233
		ApproachRequiresLOS	= No
		FadeOutSpeed		= 0.1
		SpawnOutFX		= FX_PorterDeliverHeavyArmor
	End

	Behavior = GiveUpgradeUpdate ModuleTag_UpgradeNearestUpdate
		SpecialPowerTemplate	= SpecialAbilityGiveUpgradeNearest
		StartAbilityRange	= 15.0
		UnpackTime		= 700
		PreparationTime		= 100
		PersistentPrepTime	= 500
		PackTime		= 233
		ApproachRequiresLOS	= No
		DeliverUpgrade		= Yes
		FadeOutSpeed		= 0.1
		SpawnOutFX		= FX_PorterDeliverHeavyArmor
	End	
End	


;------------------------------ HorseBowPorter HorseBowsPorter ---------------------------

ChildObject RohanHorseBowPorter RohanPorterInterface
	BuildCost = ROHAN_HORSEBOWSPORTER_BUILDCOST			
	BuildTime = ROHAN_HORSEBOWSPORTER_BUILDTIME			  
	Behavior = GrantUpgradeCreate ModuleTag_GrantUpdateCreate
	UpgradeToGrant = Upgrade_RohanHorseBow
	End

	DisplayName				= OBJECT:RohanHorseBowPorter
	
	; *** AUDIO Parameters ***;

	;VoiceAmbushed			= 
	VoiceCreated			= PorterHorseBowsVoiceReady
	VoiceFullyCreated 		= PorterHorseBowsVoiceReady
	VoiceFear 			= PorterGenericVoiceHelpMe
	VoiceMove			= PorterGenericVoiceMove
	VoiceMoveToCamp			= PorterGenericVoiceMove
	VoicePriority			= 6
	;VoiceRetreatToCastle		= 
	VoiceSelect			= PorterHorseBowsVoiceSelect

	SoundImpact			= ImpactHorse

;PorterHorseBowsVoiceDeliver

	;UnitSpecificSounds
	;End

	EvaEventDamagedOwner = PorterUnderAttack	;Eva event to trigger when unit is damaged
	EvaEventDieOwner = PorterRohanDie		;Eva event to trigger on unit's death. NOTICE THAT this is only for permanent deaths

	Behavior				= SpecialPowerModule ModuleTag_09
		SpecialPowerTemplate		= SpecialAbilityGiveUpgrade
		UpdateModuleStartsAttack	= Yes
		InitiateSound			= PorterHorseBowsVoiceDeliver
	End

	Behavior = GiveUpgradeUpdate GiveUpgradeUpdateModuleTag_11
		SpecialPowerTemplate	= SpecialAbilityGiveUpgrade
		StartAbilityRange	= 15.0
		UnpackTime		= 700
		PreparationTime		= 100
		PersistentPrepTime	= 500
		PackTime		= 233
		ApproachRequiresLOS	= No
		FadeOutSpeed		= 0.1
		SpawnOutFX		= FX_PorterDeliverFlamingArrows
	End

	Behavior = GiveUpgradeUpdate ModuleTag_UpgradeNearestUpdate
		SpecialPowerTemplate	= SpecialAbilityGiveUpgradeNearest
		StartAbilityRange	= 15.0
		UnpackTime		= 700
		PreparationTime		= 100
		PersistentPrepTime	= 500
		PackTime		= 233
		ApproachRequiresLOS	= No
		DeliverUpgrade		= Yes
		FadeOutSpeed		= 0.1
		SpawnOutFX		= FX_PorterDeliverFlamingArrows
	End
End	


;----------- FireArrowsPorter FireArrowPorter FlamingArrowsPorter FlamingArrowPorter ------------

ChildObject RohanFireArrowPorter RohanPorterInterface
	BuildCost = ROHAN_FIREARROWPORTER_BUILDCOST			
	BuildTime = ROHAN_FIREARROWPORTER_BUILDTIME	  
	Behavior = GrantUpgradeCreate ModuleTag_GrantUpdateCreate
		UpgradeToGrant = Upgrade_FireArrows
	End

	DisplayName				= OBJECT:RohanFlamingArrowPorter


	; *** AUDIO Parameters ***;

	;VoiceAmbushed			= 
	VoiceCreated			= PorterFireArrowsVoiceReady
	VoiceFullyCreated 		= PorterFireArrowsVoiceReady
	VoiceFear 			= PorterGenericVoiceHelpMe
	VoiceMove			= PorterGenericVoiceMove
	VoiceMoveToCamp			= PorterGenericVoiceMove
	VoicePriority			= 6
	;VoiceRetreatToCastle		= 
	VoiceSelect			= PorterFireArrowsVoiceSelect

	SoundImpact			= ImpactHorse

;PorterFireArrowsVoiceDeliver
;PorterFireArrowsVoiceDie

	;UnitSpecificSounds
	;End

	EvaEventDamagedOwner = PorterUnderAttack	;Eva event to trigger when unit is damaged
	EvaEventDieOwner = PorterRohanDie		;Eva event to trigger on unit's death. NOTICE THAT this is only for permanent deaths

	;-------------------

	Behavior				= SpecialPowerModule ModuleTag_09
		SpecialPowerTemplate		= SpecialAbilityGiveUpgrade
		UpdateModuleStartsAttack	= Yes
		InitiateSound			= PorterFireArrowsVoiceDeliver
	End

	Behavior = GiveUpgradeUpdate GiveUpgradeUpdateModuleTag_11
		SpecialPowerTemplate	= SpecialAbilityGiveUpgrade
		StartAbilityRange	= 15.0
		UnpackTime		= 700
		PreparationTime		= 100
		PersistentPrepTime	= 500
		PackTime		= 233
		ApproachRequiresLOS	= No
		FadeOutSpeed		= 0.1
		SpawnOutFX		= FX_PorterDeliverFlamingArrows
	End

	Behavior = GiveUpgradeUpdate ModuleTag_UpgradeNearestUpdate
		SpecialPowerTemplate	= SpecialAbilityGiveUpgradeNearest
		StartAbilityRange	= 15.0
		UnpackTime		= 700
		PreparationTime		= 100
		PersistentPrepTime	= 500
		PackTime		= 233
		ApproachRequiresLOS	= No
		DeliverUpgrade		= Yes
		FadeOutSpeed		= 0.1
		SpawnOutFX		= FX_PorterDeliverFlamingArrows
	End
End	


;------------------------------ HeavyArmorPorter ---------------------------

ChildObject RohanHeavyArmorPorter RohanPorterInterface
	BuildCost = ROHAN_HEAVYARMORPORTER_BUILDCOST		
	BuildTime = ROHAN_HEAVYARMORPORTER_BUILDTIME		  
	Behavior = GrantUpgradeCreate ModuleTag_GrantUpdateCreate
		UpgradeToGrant = Upgrade_RohanHeavyArmor
	End

	DisplayName				= OBJECT:RohanHeavyArmorPorter
	
	; *** AUDIO Parameters ***;

	;VoiceAmbushed			= 
	VoiceCreated			= PorterHeavyArmorVoiceReady
	VoiceFullyCreated 		= PorterHeavyArmorVoiceReady
	VoiceFear 			= PorterGenericVoiceHelpMe
	VoiceMove			= PorterGenericVoiceMove
	VoiceMoveToCamp			= PorterGenericVoiceMove
	VoicePriority			= 6
	;VoiceRetreatToCastle		= 
	VoiceSelect			= PorterHeavyArmorVoiceSelect

	SoundImpact			= ImpactHorse

;PorterHeavyArmorVoiceDeliver

	;UnitSpecificSounds
	;End

	EvaEventDamagedOwner = PorterUnderAttack	;Eva event to trigger when unit is damaged
	EvaEventDieOwner = PorterRohanDie		;Eva event to trigger on unit's death. NOTICE THAT this is only for permanent deaths

	Behavior				= SpecialPowerModule ModuleTag_09
		SpecialPowerTemplate		= SpecialAbilityGiveUpgrade
		UpdateModuleStartsAttack	= Yes
		InitiateSound			= PorterHeavyArmorVoiceDeliver
	End

	Behavior = GiveUpgradeUpdate GiveUpgradeUpdateModuleTag_11
		SpecialPowerTemplate	= SpecialAbilityGiveUpgrade
		StartAbilityRange	= 15.0
		UnpackTime		= 700
		PreparationTime		= 100
		PersistentPrepTime	= 500
		PackTime		= 233
		ApproachRequiresLOS	= No
		FadeOutSpeed		= 0.1
		SpawnOutFX		= FX_PorterDeliverHeavyArmor
	End

	Behavior = GiveUpgradeUpdate ModuleTag_UpgradeNearestUpdate
		SpecialPowerTemplate	= SpecialAbilityGiveUpgradeNearest
		StartAbilityRange	= 15.0
		UnpackTime		= 700
		PreparationTime		= 100
		PersistentPrepTime	= 500
		PackTime		= 233
		ApproachRequiresLOS	= No
		DeliverUpgrade		= Yes
		FadeOutSpeed		= 0.1
		SpawnOutFX		= FX_PorterDeliverHeavyArmor
	End
End	


;------------------------------ ForgedBladesPorter ---------------------------

ChildObject RohanForgedBladesPorter RohanPorterInterface
	BuildCost = ROHAN_FORGEDBLADEPORTER_BUILDCOST		
	BuildTime = ROHAN_FORGEDBLADEPORTER_BUILDTIME		  
	Behavior = GrantUpgradeCreate ModuleTag_GrantUpdateCreate
		UpgradeToGrant = Upgrade_RohanForgedBlades
	End
	
	DisplayName				= OBJECT:RohanForgedBladesPorter

	; *** AUDIO Parameters ***;

	;VoiceAmbushed			= 
	VoiceCreated			= PorterForgedBladesVoiceReady
	VoiceFullyCreated 		= PorterForgedBladesVoiceReady
	VoiceFear 			= PorterGenericVoiceHelpMe
	VoiceMove			= PorterGenericVoiceMove
	VoiceMoveToCamp			= PorterGenericVoiceMove
	VoicePriority			= 6
	;VoiceRetreatToCastle		= 
	VoiceSelect			= PorterForgedBladesVoiceSelect

	SoundImpact			= ImpactHorse

	;UnitSpecificSounds
	;End

	EvaEventDamagedOwner = PorterUnderAttack	;Eva event to trigger when unit is damaged
	EvaEventDieOwner = PorterRohanDie		;Eva event to trigger on unit's death. NOTICE THAT this is only for permanent deaths

	Behavior				= SpecialPowerModule ModuleTag_09
		SpecialPowerTemplate		= SpecialAbilityGiveUpgrade
		UpdateModuleStartsAttack	= Yes
		InitiateSound			= PorterForgedBladesVoiceDeliver
	End

	Behavior = GiveUpgradeUpdate GiveUpgradeUpdateModuleTag_11
		SpecialPowerTemplate	= SpecialAbilityGiveUpgrade
		StartAbilityRange	= 15.0
		UnpackTime		= 700
		PreparationTime		= 100
		PersistentPrepTime	= 500
		PackTime		= 233
		ApproachRequiresLOS	= No
		FadeOutSpeed		= 0.1
		SpawnOutFX		= FX_PorterDeliverForgedBlades
	End

	Behavior = GiveUpgradeUpdate ModuleTag_UpgradeNearestUpdate
		SpecialPowerTemplate	= SpecialAbilityGiveUpgradeNearest
		StartAbilityRange	= 15.0
		UnpackTime		= 700
		PreparationTime		= 100
		PersistentPrepTime	= 500
		PackTime		= 233
		ApproachRequiresLOS	= No
		DeliverUpgrade		= Yes
		FadeOutSpeed		= 0.1
		SpawnOutFX		= FX_PorterDeliverForgedBlades
	End
End	


;------------------------------------------------------------------------------
; Rohan Banner Carrier
; Used with Rohan Peasants, Yeoman Archers, Elves, Rohirrim

Object RohanBanner
	; *** ART Parameters ***

	SelectPortrait         = UPRohan_BannerCarrier

	Draw = W3DScriptedModelDraw ModuleTag_01

	  OkToChangeModelColor = Yes

		StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD
		
		DefaultModelConditionState
			Model               = RUYeoBnr_SKN
		End

		; morph for Rohan Peasants, Yeoman Archers ( see BannerCarrierUpdate below for reference )
		ModelConditionState = USER_1
			Model = RUYeoBnr_SKN
		End
		
		; morph for Rohan Elves ( see BannerCarrierUpdate below for reference )
		ModelConditionState = USER_2
			Model = RUElvnBanr_SKN
		End
								
		; morph for Rohan Rohirrim ( see BannerCarrierUpdate below for reference )
		ModelConditionState = USER_3
			Model = RURrmBnr_SKN			
		End
		
		ModelConditionState COMING_OUT_OF_FACTORY
			Model = RUYeoBnr_SKN
		End
		
		; these lines allow the adornment hide/show to work correctly
		; for reasons currently unknown to most
		ExtraPublicBone = Glow
		ExtraPublicBone = Adornment
		ExtraPublicBone = Streamers
		
		;-------------------------------BEGIN Cavalry Section--------------------------------------
		AnimationState				=	PASSENGER USER_3
			Animation				=	grabbed
				AnimationName		=	RURrmBnr_SKL.RURrmBnr_GBDA
				AnimationMode		=	LOOP
			End
		End
		
		; --- stunned anims
		AnimationState				=	FREEFALL USER_3
			Animation				=	free fall
				AnimationName		=	RURrmBnr_SKL.RURrmBnr_FLYB
				AnimationMode		=	LOOP
				AnimationBlendTime	=	10
			End
		End
	
		
		AnimationState				=	STUNNED_FLAILING USER_3
			Animation				=	JustDie
				AnimationName		=	RURrmBnr_SKL.RURrmBnr_FLYA
				AnimationMode		=	LOOP
			End
			Flags					=	RANDOMSTART
		End
		
		; This is the no-spawn-horse type of death
		AnimationState				=	DYING SPLATTED USER_3
			Animation				=	splatted
				AnimationName		=	RURrmBnr_SKL.RURrmBnr_LNDA
				AnimationMode		=	ONCE
				AnimationBlendTime  =   2
			End
			FXEvent	= Frame:2 Name:FX_SplatDust
		End
		
		AnimationState				=	DYING USER_3     ; DEATH_2 Normally has DEATH_2, but just as a backup don't insist
			Animation				=	JustDie
				AnimationName		=	RURrmBnr_SKL.RURrmBnr_DIEA
				AnimationMode		=	ONCE
			End
		End
		
		; When the rider is killed, we call this animation even though the unit hasn't officially died yet.
		AnimationState				=	DEATH_2 USER_3
			Animation				=	JustDie
				AnimationName       =	RURrmBnr_SKL.RURrmBnr_DIEB
				AnimationMode       =	ONCE
			End
		End

		

		AnimationState				=	STUNNED_STANDING_UP USER_3
			Animation				=	StandUp
				AnimationName		=	RURrmBnr_SKL.RURrmBnr_GTPA
				AnimationMode		=	ONCE
			End
		End
		
		AnimationState				=	STUNNED USER_3
			Animation				=	Land
				AnimationName		=	RURrmBnr_SKL.RURrmBnr_LNDA
				AnimationMode		=	ONCE
			End
		End
		
		AnimationState        = MOVING FIRING_OR_PREATTACK_A USER_3
			ShareAnimation		= Yes
			Animation           = RunAndFire
;				AnimationName       = RURrmBnr_SKL.RURrmBnr_ATRA	anim does not exist.
				AnimationName       = RURrmBnr_SKL.RURrmBnr_ATRB
				AnimationMode       = LOOP
			End
			Flags               = RANDOMSTART 
		End
		
		
;;======= TERROR
		AnimationState				= MOVING EMOTION_TERROR EMOTION_LOOK_TO_SKY USER_3
			Animation				= TerrorFromTheSky
				AnimationName		= RURrmBnr_SKL.RURrmBnr_RUNB
				AnimationMode		= LOOP
			End
		End
		AnimationState				= MOVING EMOTION_TERROR USER_3
			Animation				= Terror
				AnimationName		= RURrmBnr_SKL.RURrmBnr_RUNB
				AnimationMode		= LOOP
			End
		End
;;===== BACKUP
		AnimationState				= MOVING BACKING_UP USER_3
			Animation				= BACK UP
				AnimationName		= RURrmBnr_SKL.RURrmBnr_BAKA
				AnimationMode		= LOOP
			End
		End
		
		AnimationState = MOVING ENGAGED USER_3
			Animation = Moving_Engaged
				AnimationName = RURrmBnr_SKL.RURrmBnr_RUNC
				AnimationMode = LOOP
			End
			Flags               = RANDOMSTART
		End
		
		AnimationState				=	TURN_LEFT_HIGH_SPEED USER_3
			Animation				=	TurnLeft
				AnimationName		=	RURrmBnr_SKL.RURrmBnr_TNL1
				AnimationMode		=	LOOP
;				AnimationSpeedFactorRange= 1.8 1.8
				AnimationBlendTime	=	20
			End
		End
		
		AnimationState				=	TURN_RIGHT_HIGH_SPEED USER_3
			Animation				=	TurnLeft
				AnimationName		=	RURrmBnr_SKL.RURrmBnr_TNR1
				AnimationMode		=	LOOP
;				AnimationSpeedFactorRange= 1.8 1.8
				AnimationBlendTime	=	20
			End
		End
		
		AnimationState				= MOVING WANDER USER_3
			Animation				= WLKA
				AnimationName		= RURrmBnr_SKL.RURrmBnr_WLKA
				AnimationMode		= LOOP
			End
		End

		AnimationState				=	MOVING TURN_LEFT USER_3 
			Animation				=	TurnLeft
				AnimationName		=	RURrmBnr_SKL.RURrmBnr_TRNL
				AnimationMode		=	LOOP
			End
		End

		AnimationState				=	MOVING TURN_RIGHT USER_3 
			Animation				=	TurnRight
				AnimationName		=	RURrmBnr_SKL.RURrmBnr_TRNR
				AnimationMode		=	LOOP
			End
		End
	
		AnimationState				=	MOVING ACCELERATE USER_3
			Animation				=	Accelerate
				AnimationName		=	RURrmBnr_SKL.RURrmBnr_ACCL
				AnimationMode		=	LOOP
			End
		End

		AnimationState				=	MOVING DECELERATE USER_3
			Animation				=	Decelerate
				AnimationName		=	RURrmBnr_SKL.RURrmBnr_DECL
				AnimationMode		=	ONCE
			End
		End

		AnimationState				=	MOVING USER_3
			Animation				=	RunA
				AnimationName		=	RURrmBnr_SKL.RURrmBnr_RUNA
				AnimationMode		=	LOOP
			End
			Flags					=	RANDOMSTART
		End

		AnimationState				=	FIRING_OR_PREATTACK_A USER_3
			Animation				=	AttackA1
				AnimationName		=	RURrmBnr_SKL.RURrmBnr_ATKA
				AnimationMode		=	ONCE
			End
		End

; Hit Reaction
		AnimationState = HIT_REACTION HIT_LEVEL_1 USER_3
			Animation = Hit_Level_1_a
				AnimationName = RURrmBnr_SKL.RURrmBnr_HITA
				AnimationMode = ONCE
			End
		End
				
	;;------------- EMOTIONS ---------------------------------------------
		
		AnimationState					=	EMOTION_ALERT EMOTION_AFRAID USER_3
			Animation					=	Apprehensive
				AnimationName			=	RURrmBnr_SKL.RURrmBnr_APPA
				AnimationMode			=	LOOP	;Change this to ONCE if adding additional anims
			End
		End
		
		AnimationState					= EMOTION_AFRAID USER_3
			Animation					= FERA
				AnimationName			= RURrmBnr_SKL.RURrmBnr_FERA
				AnimationMode			= LOOP
			End
			Animation					= FERB
				AnimationName			= RURrmBnr_SKL.RURrmBnr_FERB
				AnimationMode			= LOOP
			End
		End
	
		AnimationState				= EMOTION_TAUNTING USER_3
			Animation					= Taunting
				AnimationName			= RURrmBnr_SKL.RURrmBnr_TNTA
				AnimationMode			= ONCE
			End
			Animation					= Taunting2
				AnimationName			= RURrmBnr_SKL.RURrmBnr_TNTB
				AnimationMode			= ONCE
			End
			Flags						= RANDOMSTART RESTART_ANIM_WHEN_COMPLETE
		End

		AnimationState				= EMOTION_POINTING USER_3
			Animation				= Pointing1
				AnimationName		= RURrmBnr_SKL.RURrmBnr_PNTA
				AnimationMode		= LOOP
                AnimationSpeedFactorRange = 0.75 1.25
			End
		End

		; This is what happens when Theo gives his rousing speech
		AnimationState				=	EMOTION_CELEBRATING USER_3
			Animation				=	CheerA
				AnimationName		=	RURrmBnr_SKL.RURrmBnr_CHRA
				AnimationMode		=	ONCE
				AnimationBlendTime	=	74
                AnimationMustCompleteBlend = yes
			End
			Animation				=	CheerB
				AnimationName		=	RURrmBnr_SKL.RURrmBnr_CHRB
				AnimationMode		=	ONCE
				AnimationBlendTime	=	74
                AnimationMustCompleteBlend = yes
			End
			Animation				=	CheerC
				AnimationName		=	RURrmBnr_SKL.RURrmBnr_CHRC
				AnimationMode		=	ONCE
				AnimationBlendTime	=	74
                AnimationMustCompleteBlend = yes
			End
			Animation				=	CheerD
				AnimationName		=	RURrmBnr_SKL.RURrmBnr_CHRD
				AnimationMode		=	ONCE
				AnimationBlendTime	=	74
                AnimationMustCompleteBlend = yes
			End
			Animation				=	Salute
				AnimationName		=	RURrmBnr_SKL.RURrmBnr_SLTA
				AnimationMode		=	ONCE
				AnimationBlendTime	=	74
                AnimationMustCompleteBlend = yes
			End
			Flags						= RESTART_ANIM_WHEN_COMPLETE
		End
		
		AnimationState				=	EMOTION_ALERT USER_3
			Animation				=	Ready
				AnimationName		=	RURrmBnr_SKL.RURrmBnr_IDLA
				AnimationMode		=	LOOP
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "State_User3" then CurDrawableSetTransitionAnimState("TRANS_Idle_To_Selected3") end
			EndScript
		End
		
		
		
		
		;-----------------------------------END Cavalry Section---------------------------------
		
	IdleAnimationState
			Animation				=	IdleB
				AnimationName		=	GUBanner_SKL.GUBanner_IDLB
				AnimationMode		=	ONCE
				AnimationBlendTime	=	15
				AnimationPriority = 1
			End
			StateName           = Idle	
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Selected" then CurDrawableSetTransitionAnimState("TRANS_Selected_To_Idle") end
			EndScript	
		End
		
		
		AnimationState        = MOVING FIRING_OR_PREATTACK_A
			ShareAnimation		= Yes
			Animation           = RunAndFire
				AnimationName       = GUBanner_SKL.GUBanner_ATRA
				AnimationMode       = LOOP
			End
			Flags               = RANDOMSTART 
		End
		
		
;;======= TERROR

		AnimationState				= MOVING EMOTION_TERROR BACKING_UP
			Animation				= BAKA
				AnimationName		= GUBanner_SKL.GUBanner_BAKA
				AnimationMode		= LOOP
				AnimationSpeedFactorRange 1.5 1.5
			End
		End		
		
		AnimationState				= MOVING EMOTION_TERROR EMOTION_LOOK_TO_SKY
			Animation				= TerrorFromTheSky
				AnimationName		= GUBanner_SKL.GUBanner_RUNB
				AnimationMode		= LOOP
			End
		End
		AnimationState				= MOVING EMOTION_TERROR
			Animation				= RUNB
				AnimationName		= GUBanner_SKL.GUBanner_RUNB
				AnimationMode		= LOOP
			End
		End
		
		AnimationState						= PASSENGER
			Animation						= Wiggle
				AnimationName				= GUBanner_FLLA
				AnimationMode				= LOOP
			End
		End
		
		AnimationState						= FREEFALL
			Animation						= Falling
				AnimationName				= GUBanner_FLYA
				AnimationMode				= LOOP
				AnimationBlendTime			= 10
				AnimationSpeedFactorRange	= 0.5	0.5
			End
		End
		
		AnimationState        = STUNNED_FLAILING
			Animation           = StunFlail
				AnimationName     = GUBanner_SKL.GUBanner_FLYA
				AnimationMode      = LOOP
			End
			Flags               = RANDOMSTART
		End
		
		
		AnimationState        = DYING SPLATTED
			Animation           = LNDA
				AnimationName     = GUBanner_SKL.GUBanner_LNDA
				AnimationMode     = ONCE
			End
		End
	

		AnimationState        = DYING
			Animation           = DIEA
				AnimationName     = GUBanner_SKL.GUBanner_DIEA
				AnimationMode     = ONCE
			End
		End
		
		AnimationState        = STUNNED_STANDING_UP
			Animation           = GTPA
				AnimationName     = GUBanner_SKL.GUBanner_GTPA
				AnimationMode     = ONCE
				AnimationSpeedFactorRange = 1.5 1.5
			End
		End
		
		
		AnimationState        = STUNNED
			Animation           = LNDA
				AnimationName     = GUBanner_SKL.GUBanner_LNDA
				AnimationMode     = ONCE
			End
		End

		AnimationState        = FIRING_OR_PREATTACK_A
			Animation           = ATKA
				AnimationName     = GUBanner_SKL.GUBanner_ATKA
				AnimationMode     = ONCE
				UseWeaponTiming	  = Yes
			End
			StateName           = Attack
		End
		
		AnimationState  = COMING_OUT_OF_FACTORY
			Animation = Being_Built
				AnimationName		= GUBanner_SKL.GUBanner_RUNC
				AnimationMode		= LOOP
				AnimationBlendTime	= 0
			End
		End	
		
		AnimationState				=	MOVING BACKING_UP
			Animation				=	BackingUp
				AnimationName		=	GUBanner_SKL.GUBanner_BAKA
				AnimationMode		=	LOOP
				AnimationBlendTime  = 15
			End
			Flags					=	RANDOMSTART
		End

		AnimationState        = MOVING
			Animation           = RUNA
				AnimationName     = GUBanner_SKL.GUBanner_RUNA
				AnimationMode     = LOOP
                                AnimationSpeedFactorRange = .8 .8 ;--- JGS
			End
			Flags               = RANDOMSTART
			;ParticleSysBone     = None InfantryDustTrails
		End
		
		

		AnimationState = HIT_REACTION HIT_LEVEL_1
			Animation = Hit_Level_1_a
				AnimationName = GUBanner_SKL.GUBanner_HITA
				AnimationMode = ONCE
			End
		End
		
;---emotion animations
		AnimationState					= EMOTION_ALERT EMOTION_AFRAID
			Animation					= Apprehensive
				AnimationName			= GUBanner_SKL.GUBanner_APPA
				AnimationMode			= LOOP	;Change this to ONCE if adding additional anims
			End
		End
		
		AnimationState					= EMOTION_AFRAID
			Animation					= FERA
				AnimationName			= GUBanner_SKL.GUBanner_FERA
				AnimationMode			= LOOP
			End
		End
		
		AnimationState					= EMOTION_CELEBRATING
			Animation					= CHRA
				AnimationName			= GUBanner_SKL.GUBanner_CHRA
				AnimationMode			= LOOP
			End
		End
		
		AnimationState					= EMOTION_TAUNTING
			Animation					= TNTA
				AnimationName			= GUBanner_SKL.GUBanner_TNTA
				AnimationMode			= LOOP
			End
		End

		AnimationState					= EMOTION_POINTING
			Animation					= &&POINT&&
				AnimationName			= GUBanner_SKL.GUBanner_IDLA
				AnimationMode			= LOOP
			End
		End

		AnimationState					= EMOTION_ALERT
			Animation					= IDLA
				AnimationName			= GUBanner_SKL.GUBanner_IDLA
				AnimationMode			= LOOP
			End
		End


;---selected and transitions

		AnimationState				=	SELECTED USER_3
			StateName				=	STATE_Selected_User_3
			Animation				=	AtAttention
				AnimationName		=	RURrmBnr_SKL.RURrmBnr_ATNB
				AnimationMode		=	LOOP
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "State_User3" then CurDrawableSetTransitionAnimState("TRANS_Idle_To_Selected3") end
			EndScript
		End
		
		
	
		 AnimationState        = SELECTED
			StateName           = STATE_Selected
			Animation = ATNB
				AnimationName = GUBanner_SKL.GUBanner_ATNB
				AnimationMode = LOOP
				AnimationBlendTime  = 15
			End
			Flags               = RESTART_ANIM_WHEN_COMPLETE
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_Idle_To_Selected") end
			EndScript
		End
		
		
	AnimationState = USER_3
			StateName				=	State_User3
			Animation				=	IdleB
				AnimationName		=	RURrmBnr_SKL.RURrmBnr_IDLB
				AnimationMode		=	LOOP
				AnimationBlendTime	=	15
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Selected_User_3" then CurDrawableSetTransitionAnimState("TRANS_Selected3_To_Idle") end
			EndScript
			
		End
		
		
		TransitionState					=	TRANS_Idle_to_Selected3
			Animation					=	ATNA
				AnimationName			=	RURrmBnr_SKL.RURrmBnr_ATNA
				AnimationMode			=	ONCE
			End
		End
		
		
		TransitionState					=	TRANS_Selected3_to_Idle
			Animation					=	ATNC
				AnimationName			=	RURrmBnr_SKL.RURrmBnr_ATNC
				AnimationMode			=	ONCE
			End
		End
		
		
		TransitionState					=	TRANS_Idle_to_Selected
			Animation					=	ATNA
				AnimationName			=	GUBanner_SKL.GUBanner_ATNA
				AnimationMode			=	ONCE
			End
		End
		
		TransitionState					=	TRANS_Selected_to_Idle
			Animation					=	ATNA
				AnimationName			=	GUBanner_SKL.GUBanner_ATNC
				AnimationMode			=	ONCE
			End
		End
	

	End
	
	; ***DESIGN parameters ***
	Side = Rohan
	EditorSorting = UNIT
	ThreatLevel = 1.0
	ThingClass = HORDE_UNIT
	CommandPoints = 0

	TransportSlotCount = 1
	WeaponSet
		Conditions = None 
		Weapon = PRIMARY    RohanFighterSword
		AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End
	ArmorSet
		Conditions      = None
		Armor           = NoArmor
		DamageFX        = NormalDamageFX
	End
;	ArmorSet
;		Conditions		= ALTERNATE_FORMATION
;		Armor			= ArcherSkirmishFormation
;		DamageFX		= NormalDamageFX
;	End
	
	VisionRange = VISION_STANDARD_MELEE
	ShroudClearingRange = SHROUD_CLEAR_STANDARD

	BountyValue = ROHAN_BANNER_BOUNTY_VALUE
	DisplayName = OBJECT:RohanBanner
	CrusherLevel = 0			;Can I crush anything?
	CrushableLevel = 0			;What am I?:        0 = for infantry, 1 = for trees, 2 = cavalry/heroes
	CrushRevengeWeapon = BasicInfantryCrushRevenge
	MountedCrusherLevel = 1		;Crush level when mounted.
	MountedCrushableLevel = 3	;Crusable level when mounted.
	
;	CommandSet = GondorFighterCommandSet
	CommandSet = RohanBannerCommandSet


	; *** AUDIO Parameters ***;

	VoiceCombineWithHorde 	= RohanBannerVoiceJoin
      VoiceCreated		= RohanBannerVoiceSalute
	VoiceMove			= RohanBannerVoiceMove
	VoicePriority		= 8
	VoiceSelect			= RohanBannerVoiceSelect
	VoiceSelect2		= RohanBannerVoiceSelect2

	SoundImpact 		= ImpactHorse
	
	;UnitSpecificSounds
	;End

	EvaEventDamagedOwner	= UnitUnderAttack			;Eva event to trigger when unit is damaged

	Behavior = LargeGroupAudioUpdate ModuleTag_LGAU		; Tie into LargeGroupAudio system
		Key = Human Unit Infantry Rohan_Banner
	End


	; *** ENGINEERING Parameters ***

	RadarPriority = UNIT
	KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE THROWN_OBJECT GRAB_AND_DROP BANNER IGNORES_SELECT_ALL
	
	BuildCost = ROHAN_BANNER_COST
	BuildTime = ROHAN_BANNER_BUILDTIME

	Body = ActiveBody ModuleTag_02
		MaxHealth         = ROHAN_BANNER_HEALTH				;BALANCE Man at Arms Health
		MaxHealthDamaged  = ROHAN_BANNER_HEALTH_DAMAGED			
		RecoveryTime      = ROHAN_BANNER_HEALTH_RECOVERY_TIME		
	End
	
	Behavior = AIUpdateInterface ModuleTag_03
		AutoAcquireEnemiesWhenIdle = Yes ATTACK_BUILDINGS
		MoodAttackCheckRate        = 500
		AttackPriority				= 	AttackPriority_Infantry
		AILuaEventsList				=	InfantryFunctions
	End

	Behavior = EmotionTrackerUpdate	Module_EmotionTracker
		TauntAndPointDistance		=	INFANTRY_TAUNT_POINT_RADIUS		; max distance to taunted/pointed objet
		TauntAndPointUpdateDelay	=	1000	; how often scan (milliseconds)
		TauntAndPointExcluded		=	NONE
		AfraidOf					=	NONE +RohanTreeBerd +GondorGwaihir +RohanEntFir +RohanEntAsh +RohanEntBirch +MordorCaveTroll +MordorMountainTroll +MordorDrummerTroll +MordorFellBeast +MordorWitchKing +MordorWitchKingOnFellBeast +MordorMumakil;Must be SCARY kindof as well.
		AlwaysAfraidOf				=	NONE +MordorBalrog +RohanOathbreaker +MordorSauron ;+MordorWitchKing +MordorWitchKingOnFellBeast 
		PointAt						=	NONE +MordorFellBeast +MordorWitchKingOnFellBeast

		HeroScanDistance			=	150
		FearScanDistance			=	INFANTRY_FEAR_SCAN_RADIUS

		AddEmotion	=	Terror_Base
		AddEmotion	=	Doom_Base
		AddEmotion	=	UncontrollableFear_Base_Evil
		AddEmotion	=	FearIdle_Base
		AddEmotion	=	FearBusy_Base
		AddEmotion	=	Point_Base
		AddEmotion	=	Taunt_Base	
		AddEmotion	=	CheerIdle_Base
		AddEmotion	=	CheerBusy_Base
		AddEmotion	=	HeroCheerIdle_Base
		AddEmotion	=	HeroCheerBusy_Base
		AddEmotion	=	Alert_Base
	End	
	
	LocomotorSet
		Locomotor = HumanLocomotor
		Condition = SET_NORMAL 
		Speed     = NORMAL_GOOD_INFANTRY_MEMBER_SPEED	
	End

	LocomotorSet
		Locomotor = HumanLocomotor
		Condition = SET_COMBO ; This is from the Elf combine in BannerCarrierUpdate
		Speed     = NORMAL_GOOD_FAST_MEMBER_SPEED	
	End

	LocomotorSet
		Locomotor = HumanWanderLocomotor
		Condition = SET_WANDER 
		Speed     = NORMAL_GOOD_INFANTRY_MEMBER_SPEED	
	End
	  
	LocomotorSet
		Locomotor = HorseLocomotor
		Condition = SET_MOUNTED 
		Speed     = 90
	End
	  
	Behavior = PhysicsBehavior ModuleTag_04
		GravityMult = 1.0
		ShockStunnedTimeLow		= 1400	;msec
		ShockStunnedTimeHigh	= 2400	;msec
		ShockStandingTime		= 666	;msec
	End 
	
	Behavior = SlowDeathBehavior ModuleTag_05
		DeathTypes = ALL -KNOCKBACK
		SinkDelay = 3000
		SinkRate = 0.40     ; in Dist/Sec
		DestructionDelay = 8000
		Sound = INITIAL RohanBannerVoiceDie
	End
	
	Behavior = SquishCollide ModuleTag_06
		;nothing
	End

	;/////////////////////////////////////////////////////////
	;// BannerCarrierUpdate module
	;/////////////////////////////////////////////////////////
	Behavior = BannerCarrierUpdate BannerCarrierUpdateModuleTag
		IdleSpawnRate			= 10000							; spawn a new member every n seconds when idle (in miliseconds)
		MeleeFreeUnitSpawnTime		= 20000							; n miliseconds units must not have been fighting to be able to spawn units when idle (in miliseconds)
		DiedRespawnTime			= 10000							; how much time must pass after Banner Carrier dies before horde can spawn another
		MeleeFreeBannerReSpawnTime	= 20000							; how much time since horde has been fighting before a new Banner Carrier can be respawned
		
		BannerMorphFX		= FX_HordeResurrection					; name of particle FX to use when the BannerCarrier morphs into the dest unit type
		UnitSpawnFX			= FX_HordeResurrection					; name of particle FX to use when the BannerCarrier spawns a new unit
		
		; Depending on the unit type selected, we will morph into one of the following 
		; unitTypes by setting the appropriate model condition state
		
		; Rohan Banner
		MorphCondition		= UnitType:RohanPeasant					ModelState:"USER_1"
		MorphCondition		= UnitType:RohanArcher					ModelState:"USER_1"
		
		; Elven Banner
		MorphCondition		= UnitType:RohanElvenWarrior		Locomotor:SET_COMBO	ModelState:"USER_2"		
		
		; Rohirrim Banner
		MorphCondition		= UnitType:RohanRohirrim			Locomotor:SET_MOUNTED	ModelState:"USER_3 MOUNTED"		
		MorphCondition		= UnitType:RohanRohirrimArcher		Locomotor:SET_MOUNTED	ModelState:"USER_3 MOUNTED"		
		
		; show/hide subobjects based on various experience levels
		;ExpLevelDraw		= Level:1		SubObject:Hide:Adornment		SubObject:Hide:Streamers			SubObject:Hide:Glow
		;ExpLevelDraw		= Level:2		SubObject:Hide:Adornment		SubObject:Hide:Streamers			SubObject:Hide:Glow
		;ExpLevelDraw		= Level:3		SubObject:Hide:Adornment		SubObject:Hide:Streamers			SubObject:Hide:Glow
		;ExpLevelDraw		= Level:4		SubObject:Hide:Adornment		SubObject:Hide:Streamers			SubObject:Hide:Glow
		
		;ExpLevelDraw		= Level:5		SubObject:Show:Adornment		SubObject:Show:Streamers			SubObject:Hide:Glow
		;ExpLevelDraw		= Level:6		SubObject:Show:Adornment		SubObject:Show:Streamers			SubObject:Hide:Glow	
		;ExpLevelDraw		= Level:7		SubObject:Show:Adornment		SubObject:Show:Streamers			SubObject:Hide:Glow	
		;ExpLevelDraw		= Level:8		SubObject:Show:Adornment		SubObject:Show:Streamers			SubObject:Hide:Glow	
		;ExpLevelDraw		= Level:9		SubObject:Show:Adornment		SubObject:Show:Streamers			SubObject:Hide:Glow
		
		;ExpLevelDraw		= Level:10		SubObject:Show:Adornment		SubObject:Show:Streamers			SubObject:Show:Glow
	End
	
	;Banner carriers can stealth if they are in a horde with elves.	
	Behavior = StealthUpdate StealthUpdateModuleTag
		StealthDelay						= 500         ; msec
		FriendlyOpacityMin					= 15.0%
		FriendlyOpacityMax					= 60.0%
		PulseFrequency						= 750   ; msec
		StealthForbiddenConditions			= HORDEBRAIN_NOT_STEALTHED
		OrderIdleEnemiesToAttackMeUponReveal= Yes
		DetectedByAnyoneRange				= 120
		RevealWeaponSets					= CLOSE_RANGE CONTESTING_BUILDING
		VoiceMoveToStealthyArea				= RangerVoiceMoveTrees
		VoiceEnterStateMoveToStealthyArea	= RangerVoiceEnterStateMoveTrees
	End

	;;; COMBINE WITH NEAREST HORDE SPECIAL POWER ;;;
	Behavior = CombineHordeSpecialPower ModuleTag_CombineWithNearest
		SpecialPowerTemplate    = SpecialAbilityCombineWithNearest
        InitiateSound = RohanBannerVoiceJoin
		ScanRange = 15000.0		;making it large enough to scan an entire map
	End
	
	Behavior = SlowDeathBehavior ModuleTag_07
		; Same as normal death, but no sound (sound already played by SoundImpact = ... )
		DeathTypes = NONE +KNOCKBACK
		SinkDelay = 3000
		SinkRate = 0.40     ; in Dist/Sec
		DestructionDelay = 8000
	End

	Behavior = BezierProjectileBehavior ModuleTag_08 ; Module starts asleep, and wakes up when thrown.
		FirstHeight = 24  ; Height of Bezier control points above highest intervening terrain
		SecondHeight = 24
		FirstPercentIndent = 30% ; Percentage of shot distance control points are placed
		SecondPercentIndent = 70%
		TumbleRandomly = Yes

		CrushStyle = Yes ; I don't detonate, I just hit
		DieOnImpact = Yes
		BounceCount = 1   ; When I hit the ground, I'll arc again
		BounceDistance = 40 ; this far
		BounceFirstHeight = 24  ; Height of Bezier control points above highest intervening terrain
		BounceSecondHeight = 24
		BounceFirstPercentIndent = 20% ; Percentage of shot distance control points are placed
		BounceSecondPercentIndent = 80%

		GroundHitFX       = FX_ThrownRockGroundHit
		GroundBounceFX    = FX_ThrownRockBounceHit
	End

	Behavior = HitReactionBehavior HitReactionBehaviorModuleTag
		HitReactionLifeTimer1 = 7 ; level 1 (light  damage)  hit reaction animations in frames (5 per sec)
		HitReactionLifeTimer2 = 15 ; level 2 (medium damage)  hit reaction animations in frames (5 per sec)
		HitReactionLifeTimer3 = 10 ; level 3 (heavy  damage)  hit reaction animations in frames (5 per sec)

		HitReactionThreshold1 = 5.0   ; level 1 (light  damage) threshold trigger
		HitReactionThreshold2 = 25.0  ; level 2 (medium damage) threshold trigger
		HitReactionThreshold3 = 50.0  ; level 3 (heavy  damage) threshold trigger
	End
	
	Geometry = CYLINDER
	GeometryMajorRadius = 8.0
	GeometryMinorRadius = 8.0
	GeometryHeight = 19.2
	GeometryIsSmall = Yes
  Shadow = SHADOW_DECAL
  ShadowSizeX = 19;
  ShadowSizeY = 19;
  ShadowTexture = ShadowI;
End

