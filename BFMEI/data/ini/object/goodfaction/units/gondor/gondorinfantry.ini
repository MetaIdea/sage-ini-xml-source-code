;------------------------------------------------------------------------------
;
;	GondorInfantry.ini
;
;------------------------------------------------------------------------------
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
; aka Man at Arms, GondorManatArms, FighterGondor GondorFighter GondorSoldier GondorSwordman
Object GondorFighter
	; *** ART Parameters ***

	SelectPortrait         = UPGondor_Soldier
;	SelectPortrait         = SP_Gondor_Swordman

	Draw = W3DHordeModelDraw ModuleTag_01
		OkToChangeModelColor = Yes	
		StaticModelLODMode = Yes
		
		; specify options for static LODs
		LodOptions							= LOW
			AllowMultipleModels				= ALLOW_MULTIPLE_MODELS_LOW
			MaxRandomTextures				= MAX_RANDOM_TEXTURES_LOW
			MaxRandomAnimations				= MAX_RANDOM_ANIMATIONS_LOW
			MaxAnimFrameDelta				= MAX_ANIM_FRAME_DELTA_LOW
		End
		
		LodOptions							= MEDIUM
			AllowMultipleModels				= ALLOW_MULTIPLE_MODELS_MED
			MaxRandomTextures				= MAX_RANDOM_TEXTURES_MED
			MaxRandomAnimations				= MAX_RANDOM_ANIMATIONS_MED
			MaxAnimFrameDelta				= MAX_ANIM_FRAME_DELTA_MED
		End
		
		LodOptions							= HIGH
			AllowMultipleModels				= ALLOW_MULTIPLE_MODELS_HIGH
			MaxRandomTextures				= MAX_RANDOM_TEXTURES_HIGH
			MaxRandomAnimations				= MAX_RANDOM_ANIMATIONS_HIGH
			MaxAnimFrameDelta				= MAX_ANIM_FRAME_DELTA_HIGH
		End

		WadingParticleSys = WaterRipplesTrail  ; used when the unit is wading in shallow water.
;;================ MODELS =================================================================
		DefaultModelConditionState
			Model							= GUMAArms_SKN
			Skeleton						= GUMAArms_SKL
		End

		ModelConditionState WEAPONSET_PLAYER_UPGRADE
			Model							= GUMAArms_SKN
			Skeleton						= GUMAArms_SKL
		End
		
		ModelConditionState = USER_4		; This state is used in cinematics to get the old style armor
			Model							= GUNumnrean_SKN	
			Skeleton						= GUMAArms_SKL
		End

;;=============== ANIMATIONS ===============================================================

;;======= FALLING & FLYING

		AnimationState						= PASSENGER
			Animation						= Grabbed
				AnimationName				= GUMAArms_FLLA
				AnimationMode				= LOOP
			End
		End
		
		AnimationState        				= THROWN_PROJECTILE
			Animation           			= FlyA
				AnimationName      	 		= GUMAARMS_FLYA
				AnimationMode       		= LOOP
			End
			Animation           			= FlyB
				AnimationName       		= GUMAARMS_FLYB
				AnimationMode       		= LOOP
			End
			Animation           			= FlyC
				AnimationName       		= GUMAARMS_FLYC
				AnimationMode       		= LOOP
			End
			Animation           			= FlyD
				AnimationName       		= GUMAARMS_FLYD
				AnimationMode       		= LOOP
			End
			Flags               			= RANDOMSTART
		End
		
		AnimationState						= FREEFALL
			Animation						= Falling
				AnimationName				= GUMAArms_FLYD
				AnimationMode				= LOOP
				AnimationBlendTime			= 10
			End
			Animation						= Falling
				AnimationName				= GUMAArms_FLYC
				AnimationMode				= LOOP
				AnimationBlendTime			= 10
				AnimationSpeedFactorRange	= 0.5	0.5
			End
		End

		
		
		AnimationState        				= STUNNED_FLAILING 
			Animation           			= FlyA
				AnimationName       		= GUMAARMS_FLYA
				AnimationMode       		= LOOP
			End
			Animation           			= FlyB
				AnimationName       		= GUMAARMS_FLYB
				AnimationMode       		= LOOP
			End
			Animation           			= FlyC
				AnimationName       		= GUMAARMS_FLYC
				AnimationMode       		= LOOP
			End
			Animation           			= FlyD
				AnimationName      		 	= GUMAARMS_FLYD
				AnimationMode       		= LOOP
			End
			Flags               			= RANDOMSTART
		End

		AnimationState 						= DYING SPLATTED
			Animation 						= Splatted_On_Ground
				AnimationName 				= GUMAARMS_LNDA
				AnimationMode 				= ONCE
			End
			EnteringStateFX					= FX_OrcHitGround
		End
		AnimationState						= DYING AFLAME
			Animation						= MFDA
				AnimationName				= GUManMocap_MFDA
				AnimationMode				= LOOP
			End
		End
		AnimationState						= DYING
			;Animation						= DIEA
			
			;	AnimationName				= GUManMocap_DIEA
			;	AnimationMode				= ONCE
			;End
			Animation						= DIEB
				AnimationName				= GUManMocap_DIEB
				AnimationMode				= ONCE
			End
			Animation						= DIEC
				AnimationName				= GUManMocap_DIEC
				AnimationMode				= ONCE
			End
			Animation						= DIED
				AnimationName				= GUManMocap_DIED
				AnimationMode				= ONCE
			End
			Animation						= DIEE
				AnimationName				= GUManMocap_DIEE
				AnimationMode				= ONCE
			End
		End

;;======= LANDING & STANDING

		AnimationState						= STUNNED_STANDING_UP
			Animation						= GTPA
				AnimationName				= GUManMocap_GTPA
				AnimationMode				= ONCE
				AnimationSpeedFactorRange = 1.5 1.5
			End
			Animation						= GTPB
				AnimationName				= GUManMocap_GTPB
				AnimationMode				= ONCE
				AnimationSpeedFactorRange = 1.5 1.5
			End
			Animation						= GTPC
				AnimationName				= GUManMocap_GTPC
				AnimationMode				= ONCE
				AnimationSpeedFactorRange = 1.5 1.5
			End
		End


	
		AnimationState			=	 STUNNED
			Animation			=	 Slatted_On_Ground
			AnimationName 				= GUMAARMS_LNDA
				AnimationMode 				= ONCE
			End
			EnteringStateFX					= FX_OrcHitGround

       End 
		
		
		AnimationState        = MOVING FIRING_OR_PREATTACK_A
			ShareAnimation		= Yes
			Animation           = RunAndFire
				AnimationName       = GUManMocap_ATRA
				AnimationMode       = LOOP
			End
			Flags               = RANDOMSTART  
		End
		
;;====== TERROR
		
		AnimationState						= MOVING EMOTION_TERROR EMOTION_LOOK_TO_SKY
			;@@@KM Add distance
			Animation					= TerrorFromTheSky
				AnimationName			= GUManMocap_RUND
				AnimationMode			= LOOP
			End
			Animation					= TerrorFromTheSky
				AnimationName			= GUManMocap_RUNE
				AnimationMode			= LOOP
			End
			Flags = RANDOMSTART
		End
		AnimationState						= MOVING EMOTION_TERROR
			;@@@KM Add distance
			Animation						= TerrorFromTheSky
				AnimationName				= GUManMocap_RUND
				AnimationMode				= ONCE
			End
			Animation						= TerrorFromTheSky
				AnimationName				= GUManMocap_RUNE
				AnimationMode				= ONCE
			End
			Flags							= RESTART_ANIM_WHEN_COMPLETE
		End
		
;;======= BACK UP
		
		AnimationState						= MOVING BACKING_UP
			;@@@KM Add distance
			Animation						= BAKA
				AnimationName				= GUManMocap_BAKA
				AnimationMode				= LOOP
			End
			Animation						= BAKB
				AnimationName				= GUManMocap_BAKB
				AnimationMode				= LOOP
			End
			Animation						= BAKC
				AnimationName				= GUManMocap_BAKC
				AnimationMode				= LOOP
			End
			Flags = RANDOMSTART
		End

		AnimationState						= MOVING PANICKING
			;@@@KM - Add Distance
			Animation						= MFDA
				AnimationName				= GUManMocap_MFDA
				AnimationMode				= LOOP
			End
			Flags							= RANDOMSTART
			;ParticleSysBone				= None InfantryDustTrails
		End
		
		AnimationState						= MOVING ATTACKING
			ShareAnimation					= Yes;
			Animation						= RUNA
				AnimationName				= GUManMocap_RUNA
				AnimationMode				= LOOP
				Distance					= 25
			End
			Flags							= RANDOMSTART
			;ParticleSysBone				= None InfantryDustTrails
		End
		
		AnimationState						= MOVING
			;@@@KM - Add Distance
			ShareAnimation					= Yes;
			Animation						= RUNB
				AnimationName				= GUManMocap_RUNB
				AnimationMode				= LOOP
				Distance					= 30
			End
			Animation						= RUNC
				AnimationName				= GUManMocap_RUNC
				AnimationMode				= LOOP
				Distance					= 30
			End
			Flags							= RANDOMSTART
			;ParticleSysBone				= None InfantryDustTrails
		End
;;======= UNCONTROLLABLY AFRAID
	; This is before Attacking so it overrides it.  Normal fear is below so you don't go to little-fear in between swings.
		AnimationState						= EMOTION_UNCONTROLLABLY_AFRAID
			Animation						= FERA
				AnimationName				= GUManMocap_FERA
				AnimationMode				= LOOP
			End 
			Animation						= FERB
				AnimationName				= GUManMocap_FERB
				AnimationMode				= LOOP
			End
			Animation						= FERC
				AnimationName				= GUManMocap_FERC
				AnimationMode				= LOOP
			End
			Animation						= FERD
				AnimationName				= GUManMocap_FERD
				AnimationMode				= LOOP
			End
			Animation						= FERE
				AnimationName				= GUManMocap_FERE
				AnimationMode				= LOOP
			End
			Animation						= FERF
				AnimationName				= GUManMocap_FERF
				AnimationMode				= LOOP
			End
		End
;;---------------------- ATTACKING ----------------------------------------------------------------
		AnimationState						= FIRING_OR_PREATTACK_A
			Animation						= ATA1
				AnimationName				= GUManMocap_ATKA
				AnimationMode				= ONCE
				UseWeaponTiming				= Yes
			End
			;ParticleSysBone				= None MeleeDust
		End
		
		AnimationState						= ATTACKING
			Animation						= ALERT_1
				AnimationName				= GUManMocap_IDLA
				AnimationMode				= LOOP
			End
		End
;;----------------- HIT REACTIONS -------------------------------------------------------------------------

		AnimationState						= HIT_REACTION
			;Animation						= HITA
			;	AnimationName				= GUManMocap_HITA
			;	AnimationMode				= ONCE
			;End
			Animation						= HITB
				AnimationName				= GUManMocap_HITB
				AnimationMode				= ONCE
			End
		End

;;----------------- EMOTIONS ----------------------------------------------------------------
;;======= APPREHENSIVE

		AnimationState						= EMOTION_ALERT EMOTION_AFRAID
			Animation						= APPA
				AnimationName				= GUManMocap_APPA
				AnimationMode				= ONCE
			End
			Animation						= APPB
				AnimationName				= GUManMocap_APPB
				AnimationMode				= ONCE
			End
			Flags							= RANDOMSTART RESTART_ANIM_WHEN_COMPLETE
		End
		
;;======= AFRAID

		AnimationState						= EMOTION_AFRAID
			Animation						= FERA
				AnimationName				= GUManMocap_FERA
				AnimationMode				= LOOP
			End 
			Animation						= FERB
				AnimationName				= GUManMocap_FERB
				AnimationMode				= LOOP
			End
			Animation						= FERC
				AnimationName				= GUManMocap_FERC
				AnimationMode				= LOOP
			End
			Animation						= FERD
				AnimationName				= GUManMocap_FERD
				AnimationMode				= LOOP
			End
			Animation						= FERE
				AnimationName				= GUManMocap_FERE
				AnimationMode				= LOOP
			End
			Animation						= FERF
				AnimationName				= GUManMocap_FERF
				AnimationMode				= LOOP
			End
		End

;;======== POINTING

		AnimationState						= EMOTION_POINTING
			Animation						= Pointing1
				AnimationName				= GUManMocap_RCTA
				AnimationMode				= LOOP
			End
		End

;;======= TAUNTING

		AnimationState						= EMOTION_TAUNTING
			Animation						= Taunting1
				AnimationName				= GUManMocap_TNTA
				AnimationMode				= ONCE
			End
			Animation						= Taunting2
				AnimationName				= GUManMocap_TNTB
				AnimationMode				= ONCE
			End
			Animation						= Taunting3
				AnimationName				= GUManMocap_TNTC
				AnimationMode				= ONCE
			End
			Animation						= Taunting4
				AnimationName				= GUManMocap_IDLC
				AnimationMode				= ONCE
			End
			Animation						= Taunting5
				AnimationName				= GUManMocap_IDLA
				AnimationMode				= ONCE
			End
			Animation						= Taunting6
				AnimationName				= GUManMocap_IDLH
				AnimationMode				= ONCE
			End
			Flags							= RANDOMSTART RESTART_ANIM_WHEN_COMPLETE
		End

;;======= CELEBRATING

		AnimationState						= EMOTION_CELEBRATING
			Animation						= CHRB
				AnimationName				= GUManMocap_CHRB
				AnimationMode				= ONCE
			End
			Animation						= CHRC
				AnimationName				= GUManMocap_CHRC
				AnimationMode				= ONCE
			End
			Animation						= IDLD
				AnimationName				= GUManMocap_IDLD
				AnimationMode				= ONCE
			End
			Flags							=	RESTART_ANIM_WHEN_COMPLETE
		End
		
;;----------------- ALERT STATE ---------------------------------------------------------------------------

		AnimationState						= EMOTION_ALERT
			Animation						= ALERT_1
				AnimationName				= GUManMocap_IDLA
				AnimationMode				= LOOP;ONCE
				AnimationPriority			= 10
			End
			Flags							= RESTART_ANIM_WHEN_COMPLETE ; acts like an idle animation & keeps running the animations.
		End
		
;;----------------- SELECTED STATES -----------------------------------------------------------------------
		AnimationState        = SELECTED
			StateName           = STATE_Selected
			Animation           = ATNB
				AnimationName     = GUManMocap_ATNB
				AnimationMode     = LOOP
			End
			
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Idle" 
				then 
					CurDrawableSetTransitionAnimState("TRANS_IdleToSelected") 
				end
				if CurDrawableModelcondition("ATTACKING")
				then
					return "IDLA"
				else
					return "ATNA"
				end
			EndScript
			
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Idle" then CurDrawableSetTransitionAnimState("TRANS_IdleToSelected") end
			EndScript
		End
		
;;----------------- IDLE STATES ---------------------------------------------------------------------------
		AnimationState				= WEAPONSET_PLAYER_UPGRADE
			StateName				= STATE_Idle
			Animation				= IDLI
				AnimationName       = GUManMocap_IDLH
				AnimationMode       = ONCE
				AnimationSpeedFactorRange = 0.9 1.1
			End
			Animation				= IDLD
				AnimationName       = GUManMocap_IDLD
				AnimationMode       = ONCE
				AnimationSpeedFactorRange = 0.9 1.1
			End
			Animation				= IDLH
				AnimationName       = GUManMocap_IDLH
				AnimationMode       = ONCE
				AnimationSpeedFactorRange = 0.9 1.1
			End
			Animation				= CHRB
				AnimationName       = GUManMocap_CHRB
				AnimationMode       = ONCE
				AnimationSpeedFactorRange = 0.9 1.1
			End
			Animation				= CHRC
				AnimationName       = GUManMocap_CHRC
				AnimationMode       = ONCE
				AnimationSpeedFactorRange = 0.9 1.1
			End
			Flags					= RESTART_ANIM_WHEN_COMPLETE			
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Selected" then CurDrawableSetTransitionAnimState("TRANS_SelectedToIdle") end
			EndScript
		End		
		AnimationState				= USER_3
			StateName				= STATE_User_3
			Animation				= GUARD_STANCE
				AnimationName		= GUManMocap_IDLA
				AnimationMode		= LOOP
			End
		End
		IdleAnimationState
			StateName				= STATE_Idle
			Animation				= IDLB
				AnimationName       = GUManMocap_IDLB
				AnimationMode       = ONCE
				AnimationPriority   = 20
				AnimationSpeedFactorRange = 0.9 1.1
				AnimationBlendTime	= 15
			End
			Animation				= IDLF
				AnimationName       = GUManMocap_IDLF
				AnimationMode       = ONCE
				AnimationPriority   = 1
				AnimationSpeedFactorRange = 0.9 1.1
				AnimationBlendTime	= 15
			End
			Animation				= IDLG
				AnimationName       = GUManMocap_IDLG
				AnimationMode       = ONCE
				AnimationPriority   = 1
				AnimationSpeedFactorRange = 0.9 1.1
				AnimationBlendTime	= 15
			End
			Animation				= IDLJ
				AnimationName       = GUManMocap_IDLJ
				AnimationMode       = ONCE
				AnimationPriority   = 1
				AnimationSpeedFactorRange = 0.9 1.1
				AnimationBlendTime	= 15
			End
			Animation				= IDLK
				AnimationName       = GUManMocap_IDLK
				AnimationMode       = ONCE
				AnimationPriority   = 1
				AnimationSpeedFactorRange = 0.9 1.1
				AnimationBlendTime	= 15
			End
			Animation				= IDLL
				AnimationName       = GUManMocap_IDLL
				AnimationMode       = ONCE
				AnimationPriority   = 1
				AnimationSpeedFactorRange = 0.9 1.1
				AnimationBlendTime	= 15
			End
			Animation				= IDLN
				AnimationName       = GUManMocap_IDLN
				AnimationMode       = ONCE
				AnimationPriority   = 1
				AnimationSpeedFactorRange = 0.9 1.1
				AnimationBlendTime	= 15
			End
			Animation				= IDLO
				AnimationName       = GUManMocap_IDLO
				AnimationMode       = ONCE
				AnimationPriority   = 1
				AnimationSpeedFactorRange = 0.9 1.1
				AnimationBlendTime	= 15
			End
			Animation				= IDLP
				AnimationName       = GUManMocap_IDLP
				AnimationMode       = ONCE
				AnimationPriority   = 1
				AnimationSpeedFactorRange = 0.9 1.1
				AnimationBlendTime	= 15
			End		
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Selected" then CurDrawableSetTransitionAnimState("TRANS_SelectedToIdle") end
			EndScript
		End
;;--------------- TRANSITIONS ---------------------------------------------------------------------------
		TransitionState       = TRANS_TO_USER_1
			Animation
				AnimationName     = GUManMocap_RCTA
				AnimationMode     = ONCE
			End
		End
		TransitionState       = TRANS_IdleToSelected
			Animation           = ATNA
				AnimationName     = GUManMocap_ATNA
				AnimationMode     = ONCE
				AnimationSpeedFactorRange = 0.9 1.0
				
			End
		End
		TransitionState		= TRANS_SelectedToIdle
			Animation			= ATND
				AnimationName	= GUManMocap_ATND
				AnimationMode	= ONCE
				AnimationSpeedFactorRange = 0.9 1.0
			End
		End
;;-----------------------------------------------------------------------------------------------------------
	End
	
	; ***DESIGN parameters ***
	Side = Gondor
	EditorSorting = UNIT
	ThreatLevel = 1.0
	ThingClass = HORDE_UNIT
	CommandPoints = 2
	BountyValue = GONDOR_SOLDIER_BOUNTY_VALUE
	
	EmotionRange = 240 ; Make sure this value is greater than the fear distribution range. 

	TransportSlotCount = 1
	
	;;; WEAPON SETS ;;;
	WeaponSet
		Conditions			= None 
		Weapon				= PRIMARY    GondorSword
		AutoChooseSources	= PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End
	WeaponSet
		Conditions			= PLAYER_UPGRADE
		Weapon				= PRIMARY	GondorSwordUpgraded
		AutoChooseSources	= PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End

	;;; ARMOUR SETS ;;;
	ArmorSet
		Conditions      = None
		Armor           = SoldierArmor
		DamageFX        = NormalDamageFX
	End
	ArmorSet
		Conditions      = PLAYER_UPGRADE
		Armor           = SoldierHeavyArmor
		DamageFX        = NormalDamageFX
	End
	
	VisionRange = VISION_STANDARD_MELEE
	ShroudClearingRange = SHROUD_CLEAR_STANDARD				

	DisplayName = OBJECT:GondorFighter
	CrushableLevel = 0  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
	CrushRevengeWeapon = BasicInfantryCrushRevenge
	
	CommandSet = GondorFighterCommandSet


	; *** AUDIO Parameters ***;

	VoiceAmbushed				= GondorSoldierVoiceAmbushed	
	VoiceAttack					= GondorSoldierVoiceAttack
	VoiceAttackCharge				= GondorSoldierVoiceAttackCharge
	VoiceAttackMachine			= GondorSoldierVoiceAttack
	VoiceAttackStructure			= GondorSoldierVoiceAttackBuilding
	VoiceEnterStateAttack			= GondorSoldierVoiceEnterStateAttack
	VoiceEnterStateAttackCharge		= GondorSoldierVoiceEnterStateAttackCharge
	VoiceEnterStateAttackMachine		= GondorSoldierVoiceEnterStateAttackBuilding
	VoiceEnterStateAttackStructure	= GondorSoldierVoiceEnterStateAttackBuilding
	VoiceCreated				= GondorSoldierVoiceSalute
	VoiceFullyCreated 			= GondorSoldierVoiceSalute				;GondorSoldierVoiceCreated
	VoiceGuard					= GondorSoldierVoiceMove
	VoiceMove					= GondorSoldierVoiceMove
	VoiceMoveToCamp				= GondorSoldierVoiceMoveCamp
	VoiceMoveWhileAttacking			= GondorSoldierVoiceDisengage				;TEMP_GondorSoldierVoiceMoveWhileAttacking_TEMP
	VoicePriority				= 49
	VoiceRetreatToCastle			= GondorSoldierVoiceRetreat
	VoiceSelect					= GondorSoldierVoiceSelect
	VoiceSelect2				= GondorSwordmanVoiceSelect2
	VoiceSelectBattle 			= GondorSoldierVoiceSelectBattle
	VoiceEnterStateMove			= GondorSoldierVoiceEnterStateMove
	VoiceEnterStateMoveToCamp		= GondorSoldierVoiceEnterStateMoveCamp
	VoiceEnterStateMoveWhileAttacking	= GondorSoldierVoiceEnterStateDisengage
	VoiceEnterStateRetreatToCastle	= GondorSoldierVoiceEnterStateRetreat

	SoundImpact					= ImpactHorse

	UnitSpecificSounds
		VoiceGarrison							= GondorSoldierVoiceGarrison              
		VoiceDesperateAttack						= GondorSoldierVoiceDesperateCharge 
		VoiceAttackUnitWebbedHumanoidWithGondorFighterInside	= GondorSoldierVoiceAttackWebbedSoldier
		VoiceAttackUnitWebbedHumanoidWithGondorArcherInside	= GondorSoldierVoiceAttackWebbedSoldier
	End

	EvaEventDamagedOwner 							= UnitUnderAttack	;Eva event to trigger when unit is damaged

	Behavior = LargeGroupAudioUpdate ModuleTag_LGAU
		Key = Human Unit Infantry Gondor_Soldier
	End
	
	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		MaxUpdateRangeCap = 800
		AnimationSound = Sound: TauntHumanHitShield	Animation:GUMAArms_SKL.GUManMocap_IDLC	Frames: 17 27
		AnimationSound = Sound: TauntHumanHitShield	Animation:GUMAArms_SKL.GUManMocap_TNTC	Frames: 74 82 94 125 139

		AnimationSound = Sound:BodyFallGeneric1		Animation:GUMAArms_SKL.GUManMocap_DIEB	Frames:89
		AnimationSound = Sound:BodyFallGeneric1		Animation:GUMAArms_SKL.GUManMocap_DIEC	Frames:71
		AnimationSound = Sound:BodyFallGeneric1		Animation:GUMAArms_SKL.GUManMocap_DIED	Frames:29
		AnimationSound = Sound:BodyFallGeneric1		Animation:GUMAArms_SKL.GUManMocap_DIEE	Frames:28
		AnimationSound = Sound:BodyFallGeneric1		Animation:GUMAArms_SKL.GUMAARMS_LNDA	Frames:0
	End


	; *** ENGINEERING Parameters ***

	RadarPriority = UNIT
	KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE THROWN_OBJECT ATTACK_NEEDS_LINE_OF_SIGHT NOTIFY_OF_PREATTACK GRAB_AND_DROP
	
	Body = ActiveBody ModuleTag_02
		CheerRadius 	  = EMOTION_CHEER_RADIUS
		MaxHealth         = GONDOR_SOLDIER_HEALTH
		MaxHealthDamaged  = GONDOR_SOLDIER_HEALTH_DAMAGED
		;RecoveryTime      = GONDOR_SOLDIER_HEALTH_RECOVERY_TIME
	End
	
	Behavior = WeaponSetUpgrade WeaponSetUpgradeModuleTag
		TriggeredBy = Upgrade_GondorForgedBlades Upgrade_TechnologyGondorForgedBlades
		RequiresAllTriggers = Yes
	End

	Behavior = ArmorUpgrade ArmorUpgradeModuleTag
		TriggeredBy = Upgrade_GondorHeavyArmor
		ArmorSetFlag			= PLAYER_UPGRADE
	    ;KillArmorUpgrade = Yes ;This cancels any previous armor upgrade.
	End
	
	;-------------------------------------------------------------------------
	;
	;	Sub object upgrading.
	;
	Behavior = SubObjectsUpgrade Armor_Upgrade
		TriggeredBy		= Upgrade_GondorHeavyArmor
		UpgradeTexture	= GUManAtArms.tga 0 GUManAtArms_HA.tga
		RecolorHouse	= Yes
		ExcludeSubobjects = Forged_Blade
	End
	
	Behavior = SubObjectsUpgrade ForgedBlade_Upgrade
		TriggeredBy		= Upgrade_GondorForgedBlades
		ShowSubObjects	= Forged_Blade
	End	
	;-------------------------------------------------------------------------
		
	Behavior = AIUpdateInterface ModuleTag_03
		AutoAcquireEnemiesWhenIdle	=	Yes ATTACK_BUILDINGS
		MoodAttackCheckRate			=	500
		AILuaEventsList				=	GondorFighterFunctions
		MinCowerTime				=	3000
		MaxCowerTime				=	5000
		AttackPriority				= 	AttackPriority_Infantry
	End

	LocomotorSet
		Locomotor = HumanLocomotor
		Condition = SET_NORMAL 
		Speed     = NORMAL_GOOD_INFANTRY_MEMBER_SPEED
	End

	Behavior = PhysicsBehavior ModuleTag_04
		GravityMult = 1.0
		ShockStunnedTimeLow		= 1400	;msec
		ShockStunnedTimeHigh	= 2400	;msec
		ShockStandingTime		= 666	;msec
	End 

	Behavior = AttributeModifierUpgrade ModuleTag_AMU
		TriggeredBy = Upgrade_GondorFighterFearless
		AttributeModifier = FearlessForever
	End
	 
	Behavior = SquishCollide ModuleTag_06
		;nothing
	End
	
	Behavior = HordeMemberCollide ModuleTag_HMC
		;nothing
	End
	
	Behavior = HitReactionBehavior HitReactionBehaviorModuleTag
		HitReactionLifeTimer1 = 2500 ; level 1 (light  damage)  hit reaction animations in ms
		HitReactionLifeTimer2 = 2500 ; level 2 (medium damage)  hit reaction animations in ms
		HitReactionLifeTimer3 = 2500 ; level 3 (heavy  damage)  hit reaction animations in ms

		HitReactionThreshold1 = 5.0   ; level 1 (light  damage) threshold trigger
		HitReactionThreshold2 = 25.0  ; level 2 (medium damage) threshold trigger
		HitReactionThreshold3 = 50.0  ; level 3 (heavy  damage) threshold trigger
		
		FastHitsResetReaction = Yes    If set -- when hits occur faster than the reaction animations, it will reset the animation. (like getting riddled with machine gun bullets)
	End

	Behavior = SlowDeathBehavior ModuleTag_05
		DeathTypes = ALL -KNOCKBACK
		SinkDelay = 3000
		SinkRate = 0.60     ; in Dist/Sec
		DestructionDelay = 10000
		Sound = INITIAL HumanVoiceDie ;GondorSoldierVoiceDie
	End
	
	Behavior = SlowDeathBehavior ModuleTag_07
		; Same as normal death, but no sound (sound already played by SoundImpact = ... )
		DeathTypes = NONE +KNOCKBACK
		SinkDelay = 3000
		SinkRate = 0.60     ; in Dist/Sec
		DestructionDelay = 10000
	End

	Behavior = BezierProjectileBehavior ModuleTag_08 ; Module starts asleep, and wakes up when thrown.
		; To tweak a Bezier path
		FirstHeight = 24  ; Height of Bezier control points above highest intervening terrain
		SecondHeight = 24
		FirstPercentIndent = 30% ; Percentage of shot distance control points are placed
		SecondPercentIndent = 70%
		TumbleRandomly = Yes

		CrushStyle = Yes ; I don't detonate, I just hit
		DieOnImpact = Yes
		BounceCount = 1   ; When I hit the ground, I'll arc again
		BounceDistance = 40 ; this far
		BounceFirstHeight = 24  ; Height of Bezier control points above highest intervening terrain
		BounceSecondHeight = 24
		BounceFirstPercentIndent = 20% ; Percentage of shot distance control points are placed
		BounceSecondPercentIndent = 80%

		GroundHitFX       = FX_ThrownRockGroundHit
		GroundBounceFX    = FX_ThrownRockBounceHit
	End

	Geometry = CYLINDER
	GeometryMajorRadius = 8.0
	GeometryMinorRadius = 8.0
	GeometryHeight = 19.2
	GeometryIsSmall = No

    Shadow = SHADOW_DECAL
    ShadowSizeX = 19;
    ShadowSizeY = 19;
    ShadowTexture = ShadowI;
End

;------------------------------------------------------------------------------
; Gondor Banner Carrier
; Used with Gondor soliders, Gondor Tower Guards, and Gondor Archers

Object GondorBanner
	; *** ART Parameters ***

	SelectPortrait         = UPGondor_Banner

	Draw = W3DScriptedModelDraw ModuleTag_01
	
	
		ExtraPublicBone = Glow
		ExtraPublicBone = Adornment
		ExtraPublicBone = Streamers
	
	
	  OkToChangeModelColor = Yes
   StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD

		DefaultModelConditionState
			Model               = GUBanner_SKN
			Skeleton			= GUBanner_SKL
		End

		; morph for Gondor Solders, Archers, and Tower Guards( see BannerCarrierUpdate below for reference )
		ModelConditionState = USER_1
			Model = GUBanner_SKN
			Skeleton = GUBanner_SKL
		End
		
		; morph for Rangers( see BannerCarrierUpdate below for reference )
		ModelConditionState = USER_2
			Model = GURngrBnr_SKN
			Skeleton = GUBanner_SKL
		End
								
		; morph for Knights ( see BannerCarrierUpdate below for reference )
		ModelConditionState = USER_3
			Model = GUBnrCav_SKN
			Skeleton = RURrmBnr_SKL				
		End
		
		ModelConditionState COMING_OUT_OF_FACTORY
			Model = GUBanner_SKN
			Skeleton = GUBanner_SKL
		End
		
		;-------------------------------BEGIN Cavalry Section--------------------------------------
		AnimationState				=	PASSENGER USER_3
			Animation				=	grabbed
				AnimationName		=	RURrmBnr_GBDA
				AnimationMode		=	LOOP
			End
		End
		
		; --- stunned anims
		AnimationState				=	FREEFALL USER_3
			Animation				=	free fall
				AnimationName		=	RURrmBnr_FLYB
				AnimationMode		=	LOOP
			End
		End
		
		; This is the no-spawn-horse type of death
		AnimationState				=	STUNNED_FLAILING USER_3
			Animation				=	JustDie
				AnimationName		=	RURrmBnr_FLYC
				AnimationMode		=	LOOP
			End
			Flags					=	RANDOMSTART
		End
		
		
		AnimationState				=	DYING SPLATTED USER_3
			Animation				=	splatted
				AnimationName		=	RURrmBnr_LNDA
				AnimationMode		=	ONCE
				AnimationBlendTime  =   2
			End
			FXEvent	= Frame:2 Name:FX_SplatDust
		End
		
		AnimationState				=	DYING USER_3     ; DEATH_2 Normally has DEATH_2, but just as a backup don't insist
			Animation				=	JustDie
				AnimationName		=	RURrmBnr_DIEA
				AnimationMode		=	ONCE
			End
		End
		
		AnimationState				=	STUNNED_STANDING_UP USER_3
			Animation				=	StandUp
				AnimationName		=	RURrmBnr_GTPA
				AnimationMode		=	ONCE
				AnimationSpeedFactorRange = 1.5 1.5
			End
		End
			
		AnimationState				=	STUNNED USER_3
			Animation				=	Land
				AnimationName		=	RURrmBnr_LNDA
				AnimationMode		=	ONCE
			End
		End

		
		
		
		
		;  When the rider is killed, we call this animation even though the unit hasn't officially died yet.
		AnimationState				=	DEATH_2 USER_3
			Animation				=	JustDie
				AnimationName       =	RURrmBnr_DIEB
				AnimationMode       =	ONCE
			End
		End


		AnimationState        = MOVING FIRING_OR_PREATTACK_A USER_3
			ShareAnimation		= Yes
			Animation           = TrotAndFire
;				AnimationName       = RURrmBnr_ATRA		anim does not exist
				AnimationName       = RURrmBnr_ATRB
				AnimationMode       = LOOP
				Distance			= 70; 35
			End
			Flags               = RANDOMSTART
			ParticleSysBone     = None CalvaryDustTrails  
		End

;;======= TERROR
		AnimationState					= MOVING EMOTION_TERROR EMOTION_LOOK_TO_SKY USER_3
			Animation					= TerrorFromTheSky
				AnimationName			= RURrmBnr_RUNB
				AnimationMode			= LOOP
			End
		End
		AnimationState					= MOVING EMOTION_TERROR USER_3
			Animation					= TerrorFromTheSky
				AnimationName			= RURrmBnr_RUNB
				AnimationMode			= LOOP
			End
		End
;;---------------
;;======= BACKING UP
		AnimationState					= MOVING BACKING_UP USER_3
			Animation					= BACKING UP
				AnimationName			= RURrmBnr_BAKA
				AnimationMode			= LOOP
			End
		End
;;-------------------
		
		AnimationState = MOVING ENGAGED USER_3
			Animation = Moving_Engaged
				AnimationName = RURrmBnr_RUNC
				AnimationMode = LOOP
			End
			Flags               = RANDOMSTART
		End
		
		AnimationState				=	TURN_LEFT_HIGH_SPEED USER_3
			Animation				=	TurnLeft
				AnimationName		=	RURrmBnr_TNL1
				AnimationMode		=	LOOP
;				AnimationSpeedFactorRange= 1.8 1.8
				AnimationBlendTime	=	20
			End
		End
		
		AnimationState				=	TURN_RIGHT_HIGH_SPEED USER_3
			Animation				=	TurnLeft
				AnimationName		=	RURrmBnr_TNR1
				AnimationMode		=	LOOP
;				AnimationSpeedFactorRange= 1.8 1.8
				AnimationBlendTime	=	20
			End
		End
		
		AnimationState				= MOVING WANDER USER_3
			Animation				= WLKA
				AnimationName		= RURrmBnr_WLKA
				AnimationMode		= LOOP
			End
		End

		AnimationState				=	MOVING TURN_LEFT USER_3 
			Animation				=	TurnLeft
				AnimationName		=	RURrmBnr_TRNL
				AnimationMode		=	LOOP
			End
		End

		AnimationState				=	MOVING TURN_RIGHT USER_3 
			Animation				=	TurnRight
				AnimationName		=	RURrmBnr_TRNR
				AnimationMode		=	LOOP
			End
		End
	
		AnimationState				=	MOVING ACCELERATE USER_3
			Animation				=	Accelerate
				AnimationName		=	RURrmBnr_ACCL
				AnimationMode		=	LOOP
			End
		End

		AnimationState				=	MOVING DECELERATE USER_3
			Animation				=	Decelerate
				AnimationName		=	RURrmBnr_DECL
				AnimationMode		=	ONCE
			End
		End

		AnimationState				=	MOVING USER_3
			Animation				=	RunA
				AnimationName		=	RURrmBnr_RUNA
				AnimationMode		=	LOOP
			End
			Flags					=	RANDOMSTART
		End

		AnimationState				=	FIRING_OR_PREATTACK_A USER_3
			Animation				=	AttackA1
				AnimationName		=	RURrmBnr_ATKA
				AnimationMode		=	ONCE
			End
		End
		
		
		;-----------------------------------END Cavalry Section---------------------------------
		
		AnimationState						= PASSENGER
			Animation						= Wiggle
				AnimationName				= GUBanner_FLLA
				AnimationMode				= LOOP
			End
		End
		
		AnimationState						= FREEFALL
			Animation						= Falling
				AnimationName				= GUBanner_FLYA
				AnimationMode				= LOOP
				AnimationBlendTime			= 10
				AnimationSpeedFactorRange	= 0.5	0.5
			End
		End
		
		IdleAnimationState
			;Animation           = IDLA
			;	AnimationName     = GUBanner_IDLA
			;	AnimationMode     = ONCE
			;	AnimationBlendTime  = 15
			;	AnimationPriority = 20
			;End
			Animation				=	IdleB
				AnimationName		=	GUBanner_IDLB
				AnimationMode		=	ONCE
				AnimationBlendTime	=	15
				AnimationPriority = 1
			End
			StateName           = Idle		
		End

		AnimationState        = MOVING FIRING_OR_PREATTACK_A
			ShareAnimation		= Yes
			Animation           = RunAndFire
				AnimationName       = GUBanner_ATRA
				AnimationMode       = LOOP
				;Distance			= 70; 35
			End
			Flags               = RANDOMSTART
		End
	
		


;;======TERROR		
		AnimationState					= MOVING EMOTION_TERROR BACKING_UP
			Animation					= Terror
				AnimationName			= GUBanner_BAKA
				AnimationMode			= LOOP
				AnimationSpeedFactorRange 1.5 1.5
			End
		End
		AnimationState					= MOVING EMOTION_TERROR EMOTION_LOOK_TO_SKY
			Animation					= TerrorFromTheSky
				AnimationName			= GUBanner_RUNB
				AnimationMode			= LOOP
			End
		End
		AnimationState					= MOVING EMOTION_TERROR
			Animation					= Terror
				AnimationName			= GUBanner_RUNB
				AnimationMode			= LOOP
			End
		End
;;-----------------------------
		
		AnimationState        = STUNNED_FLAILING
			Animation           = StunFlail
				AnimationName     = GUBanner_FLYA
				AnimationMode      = LOOP
			End
			Flags               = RANDOMSTART
		End

		AnimationState        = DYING SPLATTED
			Animation           = LNDA
				AnimationName     = GUBanner_LNDA
				AnimationMode     = ONCE
			End
		End

		AnimationState        = DYING
			Animation           = DIEA
				AnimationName     = GUBanner_DIEA
				AnimationMode     = ONCE
			End
		End
                
                AnimationState        = STUNNED_STANDING_UP
			Animation           = GTPA
				AnimationName     = GUBanner_GTPA
				AnimationMode     = ONCE
			End
		End
				
		AnimationState        = STUNNED
			Animation           = LNDA
				AnimationName     = GUBanner_LNDA
				AnimationMode     = ONCE
			End
		End
	
		AnimationState        = FIRING_OR_PREATTACK_A
			Animation           = ATKA
				AnimationName     = GUBanner_ATKA
				AnimationMode     = ONCE
				UseWeaponTiming	  = Yes
			End
			StateName           = Attack
		End
		
		AnimationState  = COMING_OUT_OF_FACTORY
			Animation = Being_Built
				AnimationName		= GUBanner_RUNC
				AnimationMode		= LOOP
				AnimationBlendTime	= 0
			End
		End	
				
		AnimationState					= MOVING BACKING_UP
			Animation					= BackingUp
				AnimationName			= GUBanner_BAKA
				AnimationMode			= LOOP
				AnimationBlendTime		= 15
			End
			Flags						= RANDOMSTART
		End
		
		AnimationState				= MOVING ALTERNATE_FORMATION PASSENGER_VARIATION_3
			Animation				= WalkingInASlowShieldGuardFormation
				AnimationName		= GUBanner_WLKA
				AnimationMode		= LOOP
               AnimationSpeedFactorRange = .9 .9
			End
			Flags					= RANDOMSTART
			;ParticleSysBone			= None InfantryDustTrails
		End
	
		AnimationState				= MOVING ALTERNATE_FORMATION PASSENGER_VARIATION_1
			Animation				= RunningSlowerInAFighterAlternateFormation
				AnimationName		= GUBanner_RUNA
				AnimationMode		= LOOP
                AnimationSpeedFactorRange = .5 .5
			End
			Flags					= RANDOMSTART
			;ParticleSysBone			= None InfantryDustTrails
		End
		
		AnimationState				= MOVING
			Animation				= RUNA
				AnimationName		= GUBanner_RUNA
				AnimationMode		= LOOP
                AnimationSpeedFactorRange = .8 .8 ;
			End
			Flags					= RANDOMSTART
			;ParticleSysBone			= None InfantryDustTrails
		End
		
;;----------------- HIT REACTION -----------------------------------
		
		AnimationState = HIT_REACTION
			Animation = Hit_Level_1_a
				AnimationName = GUBanner_HITA
				AnimationMode = ONCE
			End
		End
		
;;-------------------------------- EMOTIONS ------------------------------------------
;;======== APPREHENSIVE
		
		AnimationState					=	EMOTION_ALERT EMOTION_AFRAID USER_3
			Animation					=	Apprehensive
				AnimationName			=	RURrmBnr_APPA
				AnimationMode			=	LOOP	;Change this to ONCE if adding additional anims
			End
		End				
		AnimationState					=	EMOTION_ALERT EMOTION_AFRAID
			Animation					=	Apprehensive
				AnimationName			=	GUBanner_APPA
				AnimationMode			=	LOOP	;Change this to ONCE if adding additional anims
			End
		End
		
;;======== AFRAID

		AnimationState					= EMOTION_AFRAID USER_3
			Animation					= FERA
				AnimationName			= RURrmBnr_FERA
				AnimationMode			= LOOP
			End
			Animation					= FERB
				AnimationName			= RURrmBnr_FERB
				AnimationMode			= LOOP
			End
		End
		AnimationState					= EMOTION_AFRAID
			Animation					= FERA
				AnimationName			= GUBanner_FERA
				AnimationMode			= LOOP
			End
		End
		
;;======= TAUNTING

		AnimationState					= EMOTION_TAUNTING USER_3
			Animation					= Taunting
				AnimationName			= RURrmBnr_TNTA
				AnimationMode			= ONCE
			End
			Animation					= Taunting2
				AnimationName			= RURrmBnr_TNTB
				AnimationMode			= ONCE
			End
			Flags						= RESTART_ANIM_WHEN_COMPLETE
		End
		AnimationState					= EMOTION_TAUNTING
			Animation					= Taunting
				AnimationName			= GUBanner_TNTA
				AnimationMode			= LOOP
			End
		End
		
;;====== POINTING

		AnimationState					= EMOTION_POINTING USER_3
			Animation					= &&POINT&&
				AnimationName			= RURrmBnr_IDLA
				AnimationMode			= LOOP
			End
		End
		AnimationState					= EMOTION_POINTING
			Animation					= &&POINT&&
				AnimationName			= GUBanner_IDLA
				AnimationMode			= LOOP
			End
		End
		
;;======== CELEBRATING

		AnimationState					= EMOTION_CELEBRATING USER_3
			Animation					= CheerA
				AnimationName			= RURrmBnr_CHRA
				AnimationMode			= ONCE
				AnimationBlendTime		= 74
                AnimationMustCompleteBlend = yes
			End
			Animation					= CheerB
				AnimationName			= RURrmBnr_CHRB
				AnimationMode			= ONCE
				AnimationBlendTime		= 74
                AnimationMustCompleteBlend = yes
			End
			Animation					= CheerC
				AnimationName			= RURrmBnr_CHRC
				AnimationMode			= ONCE
				AnimationBlendTime		= 74
                AnimationMustCompleteBlend = yes
			End
			Animation					= CheerD
				AnimationName			= RURrmBnr_CHRD
				AnimationMode			= ONCE
				AnimationBlendTime		= 74
                AnimationMustCompleteBlend = yes
			End
			Animation					= Salute
				AnimationName			= RURrmBnr_SLTA
				AnimationMode			= ONCE
				AnimationBlendTime		= 74
                AnimationMustCompleteBlend = yes
			End
			Flags						= RESTART_ANIM_WHEN_COMPLETE
		End
		
		AnimationState					= EMOTION_CELEBRATING
			Animation					= CHRA
				AnimationName			= GUBanner_CHRA
				AnimationMode			= LOOP
			End
		End

	;;----------------- ALERT STATE ------------------------------------
	
		AnimationState					= EMOTION_ALERT USER_3
			Animation					= IDLA
				AnimationName			= RURrmBnr_IDLA
				AnimationMode			= LOOP
			End
			;Flags						= RESTART_ANIM_WHEN_COMPLETE
		End
		AnimationState					= EMOTION_ALERT
			Animation					= IDLA
				AnimationName			= GUBanner_IDLA
				AnimationMode			= LOOP
			End
			;Flags						= RESTART_ANIM_WHEN_COMPLETE
			;BeginScript
			;	Prev = CurDrawablePrevAnimationState()
			;	if Prev == "STATE_Selected" then CurDrawableSetTransitionAnimState("TRANS_Selected_To_Ready") end
			;EndScript
		End
		
;--------- selected and transitions ------------------------------------
		AnimationState					=	SELECTED USER_3
			StateName					=	STATE_Selected_User_3
			Animation					=	AtAttention
				AnimationName			=	RURrmBnr_ATNB
				AnimationMode			=	LOOP
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "State_User3" then CurDrawableSetTransitionAnimState("TRANS_Idle_To_Selected3") end
			EndScript
		End	
		
		
		
		AnimationState					= SELECTED
			StateName					= STATE_Selected
			Animation					= ATNB
				AnimationName			= GUBanner_ATNB
				AnimationMode			= LOOP
				AnimationBlendTime		= 15
			End
			;Flags						= RESTART_ANIM_WHEN_COMPLETE
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_Idle_To_Selected") end
			EndScript
		End
;;=======IDLE STATE
		AnimationState					=	USER_3
			StateName					=	State_User3
			;Animation					=	IdleA
			;	AnimationName			=	RURrmBnr_IDLA
			;	AnimationPriority		=	20
			;	AnimationMode			=	ONCE
			;	AnimationBlendTime		=	15
			;End
			Animation					=	IdleB
				AnimationName			=	RURrmBnr_IDLB
				AnimationMode			=	LOOP
				AnimationBlendTime		=	15
			End
			;Flags						= RESTART_ANIM_WHEN_COMPLETE
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Selected_User_3" then CurDrawableSetTransitionAnimState("TRANS_Selected3_To_Idle") end
			EndScript
		End
		

		
		TransitionState					=	TRANS_Idle_to_Selected
			Animation					=	ATNA
				AnimationName			=	GUBanner_ATNA
				AnimationMode			=	ONCE
			End
		End
		
		
		TransitionState					=	TRANS_Idle_to_Selected3
			Animation					=	ATNA
				AnimationName			=	RURrmBnr_ATNA
				AnimationMode			=	ONCE
			End
		End
		
		
		TransitionState					=	TRANS_Selected3_to_Idle
			Animation					=	ATNC
				AnimationName			=	RURrmBnr_ATNC
				AnimationMode			=	ONCE
			End
		End
		
		;TransitionState					=	TRANS_Selected_To_Ready
		;	Animation					=	ATNB
		;		AnimationName			=	GUBanner_ATNB
		;		AnimationMode			=	ONCE
		;	End
		;End
;;-------------------------------------------------------------------------------------
	End
	
	; ***DESIGN parameters ***
	Side = Gondor
	EditorSorting = UNIT
	ThreatLevel = 1.0
	ThingClass = HORDE_UNIT
	CommandPoints = 0

	TransportSlotCount = 1
	WeaponSet
		Conditions = None 
		Weapon = PRIMARY    GondorSword
		AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End
	ArmorSet
		Conditions      = None
		Armor           = NoArmor
		DamageFX        = NormalDamageFX
	End

	VisionRange = VISION_STANDARD_MELEE
	ShroudClearingRange = SHROUD_CLEAR_STANDARD

	DisplayName = OBJECT:GondorBanner
	
	CrusherLevel = 0			;Can I crush anything?
	CrushableLevel = 0			;What am I?:        0 = for infantry, 1 = for trees, 2 = cavalry/heroes
	MountedCrusherLevel = 1		;Crush level when mounted.
	MountedCrushableLevel = 3	;Crusable level when mounted.
	CrushRevengeWeapon = BasicInfantryCrushRevenge

	BuildCost 		= GONDOR_BANNER_BUILDCOST
	BuildTime 		= GONDOR_BANNER_BUILDTIME
	BountyValue     = GONDOR_BANNER_BOUNTY_VALUE
	CommandSet      = GondorBannerCommandSet


	; *** AUDIO Parameters ***;

	VoiceAmbushed				= GondorSoldierVoiceAmbushed
	VoiceAttack					= GondorSoldierVoiceAttack				;GondorBannerCarrierVoiceAttack
	VoiceAttackCharge				= GondorSoldierVoiceAttackCharge
	VoiceAttackMachine			= GondorSoldierVoiceAttack
	VoiceAttackStructure			= GondorSoldierVoiceAttackBuilding
	VoiceCombineWithHorde   		= GondorBannerVoiceJoin
	VoiceCreated				= GondorBannerVoiceSalute
	VoiceEnterStateAttack			= GondorSoldierVoiceEnterStateAttack		;GondorBannerCarrierVoiceAttack
	VoiceEnterStateAttackCharge		= GondorSoldierVoiceEnterStateAttackCharge
	VoiceEnterStateAttackMachine		= GondorSoldierVoiceEnterStateAttackBuilding
	VoiceEnterStateAttackStructure	= GondorSoldierVoiceEnterStateAttackBuilding
	VoiceEnterStateMove			= GondorBannerVoiceEnterStateMove
	VoiceEnterStateMoveToCamp		= GondorBannerVoiceEnterStateMove
	VoiceEnterStateMoveWhileAttacking	= GondorSoldierVoiceEnterStateDisengage
	VoiceEnterStateRetreatToCastle	= GondorSoldierVoiceEnterStateRetreat
	VoiceFullyCreated 			= GondorBannerVoiceSalute
	VoiceMove					= GondorBannerVoiceMove					;GondorBannerCarrierVoiceMove
	VoiceMoveToCamp				= GondorBannerVoiceMove
	VoiceMoveWhileAttacking			= GondorSoldierVoiceDisengage
	VoicePriority				= 10
	VoiceRetreatToCastle			= GondorSoldierVoiceRetreat
	VoiceSelect					= GondorBannerVoiceSelect				;GondorBannerCarrierVoiceSelect
	VoiceSelect2				= GondorBannerVoiceSelect2
	VoiceSelectBattle 			= GondorBannerVoiceSelect

	SoundImpact					= ImpactHorse

	EvaEventDamagedOwner			= UnitUnderAttack						;Eva event to trigger when unit is damaged

	Behavior = LargeGroupAudioUpdate ModuleTag_LGAU							; Tie into LargeGroupAudio system
		Key = Human Unit Infantry Gondor_Soldier
	End


	; *** ENGINEERING Parameters ***

	RadarPriority = UNIT
	KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE THROWN_OBJECT GRAB_AND_DROP BANNER IGNORES_SELECT_ALL
	
	Body = ActiveBody ModuleTag_02
	    CheerRadius 	  = EMOTION_CHEER_RADIUS
		MaxHealth         = GONDOR_BANNER_HEALTH
		MaxHealthDamaged  = GONDOR_BANNER_HEALTH_DAMAGED
		;RecoveryTime      = GONDOR_BANNER_HEALTH_RECOVERY_TIME
	End
	
	Behavior = AIUpdateInterface ModuleTag_03
		AutoAcquireEnemiesWhenIdle = Yes ATTACK_BUILDINGS STEALTHED
		MoodAttackCheckRate        = 500
		AttackPriority				= 	AttackPriority_Infantry
		AILuaEventsList				=	GondorFighterFunctions
	End

	Behavior = EmotionTrackerUpdate	Module_EmotionTracker
		TauntAndPointDistance		=	INFANTRY_TAUNT_POINT_RADIUS		; max distance to taunted/pointed objet
		TauntAndPointUpdateDelay	=	1000	; how often scan (milliseconds)
		TauntAndPointExcluded		=	NONE
		AfraidOf					=	NONE +RohanTreeBerd +GondorGwaihir +RohanEntFir +RohanEntAsh +RohanEntBirch +MordorCaveTroll +MordorMountainTroll +MordorDrummerTroll +MordorFellBeast +MordorMumakil;Must be SCARY kindof as well.
		AlwaysAfraidOf				=	NONE +MordorBalrog +RohanOathbreaker +MordorSauron ;+MordorWitchKing +MordorWitchKingOnFellBeast 
		PointAt						=	NONE +MordorFellBeast +MordorWitchKingOnFellBeast

		HeroScanDistance			=	150
		FearScanDistance			=	INFANTRY_FEAR_SCAN_RADIUS

		AddEmotion	=	Terror_Base
		AddEmotion	=	Doom_Base
		AddEmotion	=	UncontrollableFear_Base_Evil
		AddEmotion	=	FearIdle_Base
		AddEmotion	=	FearBusy_Base
		AddEmotion	=	Point_Base
		AddEmotion	=	Taunt_Base	
		AddEmotion	=	CheerIdle_Base
		AddEmotion	=	CheerBusy_Base
		AddEmotion	=	HeroCheerIdle_Base
		AddEmotion	=	HeroCheerBusy_Base
		AddEmotion	=	Alert_Base
	End	

	LocomotorSet
		Locomotor = HumanLocomotor
		Condition = SET_NORMAL 
		Speed     = NORMAL_GOOD_INFANTRY_MEMBER_SPEED	
	End

	LocomotorSet
		Locomotor = HumanWanderLocomotor
		Condition = SET_WANDER 
		Speed     = NORMAL_GOOD_INFANTRY_MEMBER_SPEED	
	End
	
	LocomotorSet
		Locomotor = HorseLocomotor
		Condition = SET_MOUNTED 
		Speed     = 90
	End
	  
	Behavior = PhysicsBehavior ModuleTag_04
		GravityMult = 1.0
		ShockStunnedTimeLow		= 1400	;msec
		ShockStunnedTimeHigh	= 2400	;msec
		ShockStandingTime		= 666	;msec
	End
	
	Behavior = SlowDeathBehavior ModuleTag_05
		DeathTypes = ALL -KNOCKBACK
		SinkDelay = 3000
		SinkRate = 0.40     ; in Dist/Sec
		DestructionDelay = 8000
		Sound = INITIAL GondorBannerVoiceDie	
	End
	
	Behavior = SquishCollide ModuleTag_06
		;nothing
	End

	;;; COMBINE WITH NEAREST HORDE SPECIAL POWER ;;;
	Behavior = CombineHordeSpecialPower ModuleTag_CombineWithNearest
		SpecialPowerTemplate    = SpecialAbilityCombineWithNearest
		InitiateSound = GondorBannerVoiceJoin
		ScanRange = 15000.0 		; making it large enough to scan pretty much an entire map
	End

	;/////////////////////////////////////////////////////////
	;// BannerCarrierUpdate module
	;/////////////////////////////////////////////////////////
	Behavior = BannerCarrierUpdate BannerCarrierUpdateModuleTag
		IdleSpawnRate			= 10000							; spawn a new member every n seconds when idle (in miliseconds)
		MeleeFreeUnitSpawnTime		= 20000							; n miliseconds units must not have been fighting to be able to spawn units when idle (in miliseconds)
		DiedRespawnTime			= 10000							; how much time must pass after Banner Carrier dies before horde can spawn another
		MeleeFreeBannerReSpawnTime	= 20000							; how much time since horde has been fighting before a new Banner Carrier can be respawned
		
		BannerMorphFX		= FX_HordeResurrection					; name of particle FX to use when the BannerCarrier morphs into the dest unit type
		UnitSpawnFX			= FX_HordeResurrection					; name of particle FX to use when the BannerCarrier spawns a new unit
		
		; Depending on the unit type selected, we will morph into one of the following 
		; unitTypes by setting the appropriate model condition state
		
		; Silver Tree Banner
		MorphCondition		= UnitType:GondorFighter				ModelState:"USER_1 PASSENGER_VARIATION_1"
		MorphCondition		= UnitType:GondorArcher					ModelState:"USER_1 PASSENGER_VARIATION_2"
		MorphCondition		= UnitType:GondorTowerShieldGuard		ModelState:"USER_1 PASSENGER_VARIATION_3"
		
		; Ranger Banner
		MorphCondition		= UnitType:GondorRanger					ModelState:"USER_2"
		
		; Knight Banner
		MorphCondition		= UnitType:GondorCavalry			Locomotor:SET_MOUNTED	ModelState:"USER_3 MOUNTED"		
		
		; show/hide subobjects based on various experience levels
		;ExpLevelDraw		= Level:1		SubObject:Hide:Adornment		SubObject:Hide:Streamers			SubObject:Hide:Glow
		;ExpLevelDraw		= Level:2		SubObject:Hide:Adornment		SubObject:Hide:Streamers			SubObject:Hide:Glow
		;ExpLevelDraw		= Level:3		SubObject:Hide:Adornment		SubObject:Hide:Streamers			SubObject:Hide:Glow
		;ExpLevelDraw		= Level:4		SubObject:Hide:Adornment		SubObject:Hide:Streamers			SubObject:Hide:Glow
		
		;ExpLevelDraw		= Level:5		SubObject:Show:Adornment		SubObject:Show:Streamers			SubObject:Hide:Glow
		;ExpLevelDraw		= Level:6		SubObject:Show:Adornment		SubObject:Show:Streamers			SubObject:Hide:Glow	
		;ExpLevelDraw		= Level:7		SubObject:Show:Adornment		SubObject:Show:Streamers			SubObject:Hide:Glow	
		;ExpLevelDraw		= Level:8		SubObject:Show:Adornment		SubObject:Show:Streamers			SubObject:Hide:Glow	
		;ExpLevelDraw		= Level:9		SubObject:Show:Adornment		SubObject:Show:Streamers			SubObject:Hide:Glow
		
		;ExpLevelDraw		= Level:10		SubObject:Show:Adornment		SubObject:Show:Streamers			SubObject:Show:Glow
	End

	;Banner carriers can stealth if they are in a horde with rangers.	
	Behavior = StealthUpdate StealthUpdateModuleTag
		StealthDelay						= 2500         ; msec
		FriendlyOpacityMin					= STEALTH_FRIENDLY_OPACITY_MIN
		FriendlyOpacityMax					= STEALTH_FRIENDLY_OPACITY_MAX
		PulseFrequency						= 750   ; msec
		StealthForbiddenConditions			= HORDEBRAIN_NOT_STEALTHED
		OrderIdleEnemiesToAttackMeUponReveal= Yes
		DetectedByAnyoneRange				= 120
		RevealWeaponSets					= CLOSE_RANGE CONTESTING_BUILDING
		VoiceMoveToStealthyArea				= RangerVoiceMoveTrees
		VoiceEnterStateMoveToStealthyArea	= RangerVoiceEnterStateMoveTrees
	End

	Behavior = SlowDeathBehavior ModuleTag_07
		; Same as normal death, but no sound (sound already played by SoundImpact = ... )
		DeathTypes = NONE +KNOCKBACK
		SinkDelay = 3000
		SinkRate = 0.40     ; in Dist/Sec
		DestructionDelay = 8000
	End

	Behavior = BezierProjectileBehavior ModuleTag_08 ; Module starts asleep, and wakes up when thrown.
		; To tweak a Bezier path
		FirstHeight = 24  ; Height of Bezier control points above highest intervening terrain
		SecondHeight = 24
		FirstPercentIndent = 30% ; Percentage of shot distance control points are placed
		SecondPercentIndent = 70%
		TumbleRandomly = Yes

		CrushStyle = Yes ; I don't detonate, I just hit
		DieOnImpact = Yes
		BounceCount = 1   ; When I hit the ground, I'll arc again
		BounceDistance = 40 ; this far
		BounceFirstHeight = 24  ; Height of Bezier control points above highest intervening terrain
		BounceSecondHeight = 24
		BounceFirstPercentIndent = 20% ; Percentage of shot distance control points are placed
		BounceSecondPercentIndent = 80%

		GroundHitFX       = FX_ThrownRockGroundHit
		GroundBounceFX    = FX_ThrownRockBounceHit
	End

	Behavior = HitReactionBehavior HitReactionBehaviorModuleTag
		HitReactionLifeTimer1 = 7 ; level 1 (light  damage)  hit reaction animations in frames (5 per sec)
		HitReactionLifeTimer2 = 15 ; level 2 (medium damage)  hit reaction animations in frames (5 per sec)
		HitReactionLifeTimer3 = 10 ; level 3 (heavy  damage)  hit reaction animations in frames (5 per sec)

		HitReactionThreshold1 = 0.0   ; level 1 (light  damage) threshold trigger
		HitReactionThreshold2 = 25.0  ; level 2 (medium damage) threshold trigger
		HitReactionThreshold3 = 50.0  ; level 3 (heavy  damage) threshold trigger
	End
	
	Geometry = CYLINDER
	GeometryMajorRadius = 8.0
	GeometryMinorRadius = 8.0
	GeometryHeight = 19.2
	GeometryIsSmall = Yes
  Shadow = SHADOW_DECAL
  ShadowSizeX = 19;
  ShadowSizeY = 19;
  ShadowTexture = ShadowI;
End

;------------------------------------------------------------------------------
; aka GondorTowerGuard TowerShieldGuard GuardTowerShield
Object GondorTowerShieldGuard
	; *** ART Parameters ***

	SelectPortrait         = UPGondor_TowerGuard
;	SelectPortrait         = SP_Gondor_Swordman

	Draw = W3DHordeModelDraw ModuleTag_01
		OkToChangeModelColor = Yes

		StaticModelLODMode = Yes
		
		; specify options for static LODs
		LodOptions	= LOW
			AllowMultipleModels		=	ALLOW_MULTIPLE_MODELS_LOW
			MaxRandomTextures		=	MAX_RANDOM_TEXTURES_LOW
			MaxRandomAnimations		=	MAX_RANDOM_ANIMATIONS_LOW
			MaxAnimFrameDelta		=	MAX_ANIM_FRAME_DELTA_LOW
		End
		
		LodOptions	= MEDIUM
			AllowMultipleModels		=	ALLOW_MULTIPLE_MODELS_MED
			MaxRandomTextures		=	MAX_RANDOM_TEXTURES_MED
			MaxRandomAnimations		=	MAX_RANDOM_ANIMATIONS_MED
			MaxAnimFrameDelta		=	MAX_ANIM_FRAME_DELTA_MED
		End
		
		LodOptions	= HIGH
			AllowMultipleModels		=	ALLOW_MULTIPLE_MODELS_HIGH
			MaxRandomTextures		=	MAX_RANDOM_TEXTURES_HIGH
			MaxRandomAnimations		=	MAX_RANDOM_ANIMATIONS_HIGH
			MaxAnimFrameDelta		=	MAX_ANIM_FRAME_DELTA_HIGH
		End

		DefaultModelConditionState
			Model               = GUTowerGrd_SKN
			Skeleton            = GUTowerGrd_SKL
		End

		ModelConditionState WEAPONSET_PLAYER_UPGRADE
			Model               = GUTowerGrd_SKN
			Skeleton            = GUTowerGrd_SKL
		End
		
		AnimationState        = THROWN_PROJECTILE
			Animation           = FLYA
				AnimationName     = GUTowerGrd_FLYA
				AnimationMode     = LOOP
			End
		End

		AnimationState							= PASSENGER FREEFALL
			Animation							= Grabbed
				AnimationName					= GUTowerGrd_FLLA
				AnimationMode					= LOOP
			End
		End
		
		AnimationState							= FREEFALL
			Animation							= Falling
				AnimationName					= GUTowerGrd_FLYA
				AnimationMode					= LOOP
				AnimationBlendTime				= 10
			End
		End

		
		
		
		AnimationState        = MOVING FIRING_OR_PREATTACK_A
			ShareAnimation		= Yes
			Animation           = RunAndFire
				AnimationName       = GUTowerGrd_ATRA
				AnimationMode       = LOOP
			End
			Flags               = RANDOMSTART  
		End

;;=======TERROR
		AnimationState					= MOVING EMOTION_TERROR EMOTION_LOOK_TO_SKY
			ShareAnimation				= Yes
			Animation					= TerrorFromTheSky
				AnimationName			= GUTowerGrd_RUNB
				AnimationMode			= LOOP
			End
		End
		AnimationState					= MOVING EMOTION_TERROR
			ShareAnimation				= Yes
			Animation					= Terror
				AnimationName			= GUTowerGrd_RUNB
				AnimationMode			= LOOP
			End
		End
;;----------------
;;=======BACK UP
		AnimationState				=	MOVING BACKING_UP
			ShareAnimation = Yes
			Animation				=	BackingUp
				AnimationName		=	GUTowerGrd_BAKA
				AnimationMode		=	LOOP
			End
			Flags					=	RANDOMSTART 
		End
;;--------------------
		
		AnimationState        = MOVING ALTERNATE_FORMATION
			ShareAnimation = Yes
			Animation           = RUNA
				AnimationName     = GUTowerGrd_PSHA
				AnimationMode     = LOOP
			End
			Flags               = RANDOMSTART
			;ParticleSysBone     = None InfantryDustTrails
		End

		AnimationState        = MOVING USING_COMBO_LOCOMOTOR
			ShareAnimation		= Yes
			Animation           = RUNA
				AnimationName     = GUTowerGrd_WLKA
				AnimationMode     = LOOP
				Distance		  = 40
			End
			Flags               = RANDOMSTART
			;ParticleSysBone     = None InfantryDustTrails
		End

		AnimationState        = MOVING
			ShareAnimation = Yes
			Animation           = RUNA
				AnimationName     = GUTowerGrd_RUNA
				AnimationMode     = LOOP
			End
			Flags               = RANDOMSTART
			;ParticleSysBone     = None InfantryDustTrails
		End

		AnimationState        =  FIRING_OR_PREATTACK_A
			Animation           = ATKA
				AnimationName     = GUTowerGrd_ATKA
				AnimationMode     = ONCE
				UseWeaponTiming		= Yes
			End
			;ParticleSysBone     = None MeleeDust
		End


		AnimationState        = STUNNED_FLAILING
			Animation           = FLYA
				AnimationName     = GUTowerGrd_FLYA
				AnimationMode     = LOOP
			End
			Flags               = RANDOMSTART
		End

		AnimationState        = DYING SPLATTED
			Animation           = LNDA
				AnimationName     = GUTowerGrd_LNDB
				AnimationMode     = ONCE
			End
		End
		
		
		AnimationState        = DYING
			Animation           = DIEA
				AnimationName     = GUTowerGrd_DIEA
				AnimationMode     = ONCE
				AnimationSpeedFactorRange = 0.8 1.2
			End
		End
		
		AnimationState        = STUNNED_STANDING_UP
			Animation           = GTPA
				AnimationName     = GUTowerGrd_GTPA
				AnimationMode     = ONCE
				AnimationSpeedFactorRange = 1.5 1.5
			End
		End

		AnimationState        = STUNNED
			Animation           = LNDA
				AnimationName     = GUTowerGrd_LNDB
				AnimationMode     = ONCE
			End
		End

		TransitionState       = TRANS_Plant
			Animation           = PLTA
				AnimationName     = GUTowerGrd_PLTA
				AnimationMode     = ONCE
				AnimationSpeedFactorRange = 0.8 1.2
			End
		End

		TransitionState       = TRANS_Unplant
			Animation           = PLTB
				AnimationName     = GUTowerGrd_PLTB
				AnimationMode     = ONCE
				AnimationSpeedFactorRange = 0.5 1.2
			End
		End
;;------------------ Hit Reaction ---------------------------------------
		AnimationState						= HIT_REACTION
			Animation						= HIT REACTION
				AnimationName				= GUTowerGrd_HITA
				AnimationMode				= ONCE
			End
		End
;;------------------ EMOTIONS -------------------------------------------
;;======= APPREHENSIVE
		AnimationState					= EMOTION_ALERT EMOTION_AFRAID
			ShareAnimation				= Yes
			Animation					= Apprehensive
				AnimationName			= GUTowerGrd_APPA
				AnimationMode			= LOOP	;Change this to ONCE if adding additional anims
			End
		End

;;======= AFRAID

		AnimationState					= EMOTION_AFRAID
			ShareAnimation				= Yes
			Animation					= FERA
				AnimationName			= GUTowerGrd_FERA
				AnimationMode			= LOOP
			End
			Animation					= FERB
				AnimationName			= GUTowerGrd_FERB
				AnimationMode			= LOOP
			End
		End

;;======= TAUNTING

		AnimationState					= EMOTION_TAUNTING ALTERNATE_FORMATION
			Animation					= TNTA
				AnimationName			= GUTowerGrd_TNTA
				AnimationMode			= LOOP
			End
		End
		AnimationState					= EMOTION_TAUNTING
			Animation					= Taunting
				AnimationName			= GUTowerGrd_TNTA
				AnimationMode			= ONCE
			End
			Animation					= Taunting2
				AnimationName			= GUTowerGrd_TNTB
				AnimationMode			= ONCE
			End
			Flags						= RESTART_ANIM_WHEN_COMPLETE
		End

;;======= POINTING

		AnimationState					= EMOTION_POINTING
			Animation					= Pointing1
				AnimationName			= GUTowerGrd_PNTA
				AnimationMode			= LOOP
			End
			Flags						= RANDOMSTART
		End

;;======= CELEBRATING

		AnimationState					= EMOTION_CELEBRATING
			Animation					= CHRA
				AnimationName			= GUTowerGrd_CHRA
				AnimationMode			= LOOP
			End
		End
;;-------------- ALERT STATE ------------------------------------------------------------

		AnimationState					= EMOTION_ALERT
			Animation					= CHRA
				AnimationName			= GUTowerGrd_IDLA
				AnimationMode			= LOOP
			End
		End
		
;;-------------- SELECTED & IDLE --------------------------------------------------------
;;======== SELECTED

		AnimationState					= SELECTED ALTERNATE_FORMATION
			ShareAnimation				= Yes
			StateName					= STATE_SelectedAlternateFormation
			Animation					= IDLB
				AnimationName			= GUTowerGrd_IDLB
				AnimationMode			= LOOP
			End
		End
		AnimationState					= SELECTED
			StateName					= STATE_Selected
			
			ShareAnimation				= Yes
			Animation					= ATNB
				AnimationName			= GUTowerGrd_ATNB
				AnimationMode			= LOOP
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Planted" then CurDrawableSetTransitionAnimState("TRANS_Unplant") end
			EndScript
		End

;;======== IDLE

		AnimationState					= ALTERNATE_FORMATION
			StateName					= STATE_SelectedAlternateFormation
			
			ShareAnimation				= Yes
			Animation					= IDLB
				AnimationName			= GUTowerGrd_IDLB
				AnimationMode			= LOOP
			End
		End
		IdleAnimationState
			StateName					= STATE_Idle
			Animation					= IDLA
				AnimationName			= GUTowerGrd_IDLA
				AnimationMode			= ONCE
				AnimationBlendTime		= 15
				AnimationSpeedFactorRange = 0.8 1.2
			End
			Animation					= IDLA
				AnimationName			= GUTowerGrd_IDLA
				AnimationMode			= ONCE_BACKWARDS
				AnimationBlendTime		= 9
				AnimationSpeedFactorRange = 0.8 1.2
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Planted" then CurDrawableSetTransitionAnimState("TRANS_Unplant") end
			EndScript
		End
		
;;-------------------------------------------------------------------------------------------------------------
	End
	
	; ***DESIGN parameters ***
	Side = Gondor
	EditorSorting = UNIT
	ThreatLevel = 1.0
	ThingClass = HORDE_UNIT
	CommandPoints = 3
	BountyValue = GONDOR_TOWERGUARD_BOUNTY_VALUE

	TransportSlotCount = 1
	WeaponSet
		Conditions = None 
		Weapon = PRIMARY    GondorTowerShieldGuardSword
		AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End
;	WeaponSet
;		Conditions = PLAYER_UPGRADE
;		Weapon = PRIMARY	GondorTowerShieldGuardSwordUpgraded
;		AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
;	End
	
	
	ArmorSet
		Conditions      = None
		Armor           = TowerGuardArmor
		DamageFX        = NormalDamageFX
	End
	
	ArmorSet
		Conditions		= PLAYER_UPGRADE
		Armor			= TowerGuardHeavyArmor
		DamageFX		= NormalDamageFX
	End
	
	VisionRange = VISION_STANDARD_MELEE
	ShroudClearingRange = SHROUD_CLEAR_STANDARD

	DisplayName = OBJECT:GondorTowerShieldGuard
	CrushableLevel = 0  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles

	CrushRevengeWeapon = SuperInfantryCrushRevenge
	
	CommandSet = GondorTowerShieldGuardCommandSet


	; *** AUDIO Parameters ***;

	VoiceAmbushed				=	TowerGuardVoiceAmbushed
	VoiceAttack				=	TowerGuardVoiceAttack
	VoiceAttackCharge			=	TowerGuardVoiceAttackCharge
	VoiceAttackMachine			=	TowerGuardVoiceAttack
	VoiceAttackStructure			=	TowerGuardVoiceAttackBuilding
	VoiceEnterStateAttack			=	TowerGuardVoiceEnterStateAttack
	VoiceEnterStateAttackCharge		=	TowerGuardVoiceEnterStateAttackCharge
	VoiceEnterStateAttackMachine		=	TowerGuardVoiceEnterStateAttackBuilding
	VoiceEnterStateAttackStructure		=	TowerGuardVoiceEnterStateAttackBuilding
	VoiceCreated				=	TowerGuardVoiceSalute		;GondorSoldierVoiceCreated
	VoiceFullyCreated			=	TowerGuardVoiceSalute
	VoiceMove				=	TowerGuardVoiceMove
	VoiceMoveToCamp				=	TowerGuardVoiceMoveCamp
	VoiceMoveWhileAttacking			=	TowerGuardVoiceDisengage
	VoiceEnterStateMove			=	TowerGuardVoiceEnterStateMove
	VoiceEnterStateMoveToCamp		=	TowerGuardVoiceEnterStateMoveCamp
	VoiceEnterStateMoveWhileAttacking	=	TowerGuardVoiceEnterStateDisengage
	VoicePriority				= 	56
	VoiceRetreatToCastle			=	TowerGuardVoiceRetreat
	VoiceEnterStateRetreatToCastle		=	TowerGuardVoiceEnterStateRetreat
	VoiceSelect				=	TowerGuardVoiceSelect
	VoiceSelect2				=	GondorTowerGuardVoiceSelect2
	VoiceSelectBattle			=	TowerGuardVoiceSelectBattle	;GondorSoldierVoiceSelect 	;GondorSoldierVoiceSelectBattle
	VoiceGuard			= TowerGuardVoiceMove

	SoundImpact				=	ImpactHorse

	UnitSpecificSounds
		VoiceGarrison			= 	TowerGuardVoiceGarrison
	End

	EvaEventDamagedOwner			= UnitUnderAttack		;Eva event to trigger when unit is damaged

	; Tie into LargeGroupAudio system
	Behavior = LargeGroupAudioUpdate ModuleTag_LGAU
		Key = Human Unit Infantry Gondor_Guard
	End

	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		MaxUpdateRangeCap = 800
		AnimationSound = Sound:TauntHitShieldPitchShifted	Animation:GUTowerGrd_SKL.GUTowerGrd_TNTB	Frames: 23 43
		AnimationSound = Sound:BodyFallGeneric1			Animation:GUTowerGrd_SKL.GUTowerGrd_DIEA	Frames:36
		AnimationSound = Sound:BodyFallGeneric1			Animation:GUTowerGrd_SKL.GUTowerGrd_LNDB	Frames:2
	End


	; *** ENGINEERING Parameters ***
	RadarPriority = UNIT
	KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE THROWN_OBJECT GRAB_AND_DROP
	
	Body = ActiveBody ModuleTag_02
		CheerRadius 	  = EMOTION_CHEER_RADIUS
		MaxHealth         = GONDOR_TOWERGUARD_HEALTH             
		MaxHealthDamaged  = GONDOR_TOWERGUARD_HEALTH_DAMAGED
		;RecoveryTime      = GONDOR_TOWERGUARD_HEALTH_RECOVERY_TIME
	End

	Behavior = WeaponSetUpgrade WeaponSetUpgradeModuleTag
		TriggeredBy = Upgrade_GondorForgedBlades
	End

	Behavior = ArmorUpgrade ArmorUpgradeModuleTag
		TriggeredBy = Upgrade_GondorHeavyArmor
	    ;KillArmorUpgrade = Yes ;This cancels any previous armor upgrade.
	    ArmorSetFlag			= PLAYER_UPGRADE
	End
	
	;-----------------------------------------------------------------------
	;
	;	Sub objects
	;
	Behavior = SubObjectsUpgrade Armor_Upgrade
		TriggeredBy		= Upgrade_GondorHeavyArmor
		UpgradeTexture	= GUTowrGrd.tga 0 GUTowrGrd_HA.tga
		UpgradeTexture	= GUTowrGrd_L.tga 0 GUTowrGrd_HA.tga
		RecolorHouse	= Yes
		ExcludeSubobjects = Forged_Blade
	End
	
	Behavior = SubObjectsUpgrade ForgedBlade_Upgrade
		TriggeredBy		= Upgrade_GondorForgedBlades
		ShowSubObjects	= Forged_Blade
	End		
	;-----------------------------------------------------------------------
	
	Behavior = AIUpdateInterface ModuleTag_03
		AutoAcquireEnemiesWhenIdle	= Yes ATTACK_BUILDINGS
		MoodAttackCheckRate			= 500
		AILuaEventsList				= GondorFighterFunctions
		AttackPriority				= 	AttackPriority_Spearman
	End

	LocomotorSet
		Locomotor = GondorTowerShieldGuardLocomotor
		Condition = SET_NORMAL 
		Speed     = NORMAL_GOOD_INFANTRY_MEMBER_SPEED	
	End

	LocomotorSet
		Locomotor = GondorTowerShieldGuardDeployedLocomotor
		Condition = SET_NORMAL_UPGRADED
		Speed     = NORMAL_GOOD_INFANTRY_MEMBER_SPEED	
	End
	
	LocomotorSet
		Locomotor = GondorTowerShieldGuardLocomotor
		Condition = SET_COMBO
		Speed     = NORMAL_GOOD_INFANTRY_MEMBER_SPEED
	End
	
	Behavior = PhysicsBehavior ModuleTag_04
		GravityMult = 1.0
		ShockStunnedTimeLow		= 1400	;msec
		ShockStunnedTimeHigh	= 2400	;msec
		ShockStandingTime		= 1333	;msec
	End
	
	Behavior = SlowDeathBehavior ModuleTag_05
		DeathTypes = ALL -KNOCKBACK
		SinkDelay = 3000
		SinkRate = 0.40     ; in Dist/Sec
		DestructionDelay = 8000
		Sound = INITIAL HumanVoiceDie; TowerGuardVoiceDie
	End
	
	Behavior = SquishCollide ModuleTag_06
		;nothing
	End
	
	Behavior = HordeMemberCollide ModuleTag_HMC
		;nothing
	End
	
	Behavior = SlowDeathBehavior ModuleTag_07
		; Same as normal death, but no sound (sound already played by SoundImpact = ... )
		DeathTypes = NONE +KNOCKBACK
		SinkDelay = 3000
		SinkRate = 0.40     ; in Dist/Sec
		DestructionDelay = 8000
	End

	Behavior = BezierProjectileBehavior ModuleTag_08 ; Module starts asleep, and wakes up when thrown.
		; To tweak a Bezier path
		FirstHeight = 24  ; Height of Bezier control points above highest intervening terrain
		SecondHeight = 24
		FirstPercentIndent = 30% ; Percentage of shot distance control points are placed
		SecondPercentIndent = 70%
		TumbleRandomly = Yes

		CrushStyle = Yes ; I don't detonate, I just hit
		DieOnImpact = Yes
		BounceCount = 1   ; When I hit the ground, I'll arc again
		BounceDistance = 40 ; this far
		BounceFirstHeight = 24  ; Height of Bezier control points above highest intervening terrain
		BounceSecondHeight = 24
		BounceFirstPercentIndent = 20% ; Percentage of shot distance control points are placed
		BounceSecondPercentIndent = 80%

		GroundHitFX       = FX_ThrownRockGroundHit
		GroundBounceFX    = FX_ThrownRockBounceHit
	End

	; The below is a good start to the actual implementation of the unit, 
	; if someone wants to revert back to the exact state
	
	;Normal mode (shield is raised and unit is able to move normally)
;  Behavior = GrantUpgradeCreate ModuleTag_09
;    UpgradeToGrant = Upgrade_RaiseShield
;  End
;  Behavior = ModelConditionUpgrade ModuleTag_10
;    TriggeredBy = Upgrade_RaiseShield
;    RemovesUpgrades = Upgrade_PlantShield
;    RemoveConditionFlags = DEPLOYED
;  End
;  Behavior = LocomotorSetUpgrade ModuleTag_11
;    TriggeredBy = Upgrade_RaiseShield
;    RemovesUpgrades = Upgrade_PlantShield
;    KillLocomotorUpgrade = Yes ;Removes the PlantShield locomotor.
;  End
;  Behavior = ArmorUpgrade ModuleTag_12
;    TriggeredBy = Upgrade_RaiseShield
;    RemovesUpgrades = Upgrade_PlantShield
;    KillArmorUpgrade = Yes ;This cancels any previous armor upgrade.
;  End
;
;  ;Defensive mode (shield is planted -- the unit can move but much more slowly)
;  Behavior = ModelConditionUpgrade ModuleTag_13
;    TriggeredBy = Upgrade_PlantShield
;    RemovesUpgrades = Upgrade_RaiseShield
;    AddConditionFlags = DEPLOYED
;  End
;  Behavior = LocomotorSetUpgrade ModuleTag_14
;    TriggeredBy = Upgrade_PlantShield
;    RemovesUpgrades = Upgrade_RaiseShield
;  End
;  Behavior = ArmorUpgrade ModuleTag_15
;    TriggeredBy = Upgrade_PlantShield
;    RemovesUpgrades = Upgrade_RaiseShield
;  End

	Geometry = CYLINDER
	GeometryMajorRadius = 8.0
	GeometryMinorRadius = 8.0
	GeometryHeight = 9.6
	GeometryIsSmall = Yes

    Shadow = SHADOW_DECAL
    ShadowSizeX = 19;
    ShadowSizeY = 19;
    ShadowTexture = ShadowI;
End

;------------------------------------------------------------------------------
; aka Gondor Ranger
Object GondorRanger
	; *** ART Parameters ***

	SelectPortrait         = UPGondor_Ranger
;	SelectPortrait         = SP_Gondor_Swordman

	Draw = W3DHordeModelDraw ModuleTag_01
		OkToChangeModelColor = Yes	
		StaticModelLODMode = Yes
		ParticlesAttachedToAnimatedBones = Yes
		
		; specify options for static LODs
		LodOptions	= LOW
			AllowMultipleModels		=	ALLOW_MULTIPLE_MODELS_LOW
			MaxRandomTextures		=	MAX_RANDOM_TEXTURES_LOW
			MaxRandomAnimations		=	MAX_RANDOM_ANIMATIONS_LOW
			MaxAnimFrameDelta		=	MAX_ANIM_FRAME_DELTA_LOW
		End
		
		LodOptions	= MEDIUM
			AllowMultipleModels		=	ALLOW_MULTIPLE_MODELS_MED
			MaxRandomTextures		=	MAX_RANDOM_TEXTURES_MED
			MaxRandomAnimations		=	MAX_RANDOM_ANIMATIONS_MED
			MaxAnimFrameDelta		=	MAX_ANIM_FRAME_DELTA_MED
		End
		
		LodOptions	= HIGH
			AllowMultipleModels		=	ALLOW_MULTIPLE_MODELS_HIGH
			MaxRandomTextures		=	MAX_RANDOM_TEXTURES_HIGH
			MaxRandomAnimations		=	MAX_RANDOM_ANIMATIONS_HIGH
			MaxAnimFrameDelta		=	MAX_ANIM_FRAME_DELTA_HIGH
		End

;;=================== MODELS ============================================================
; --------- With Bow ------------
; Bah, must come first even though all the other bow stuff is below the sword stuff
		DefaultModelConditionState
			Model							= GURanger_SKN
			Skeleton						= GURanger_SKL
			WeaponLaunchBone				= PRIMARY ARROW
		End

		ModelConditionState				WEAPONSET_PLAYER_UPGRADE
			Model							= GURanger_SKN
			WeaponLaunchBone				= PRIMARY ARROW
			WeaponLaunchBone				= SECONDARY ARROWNOCK	; when upgraded to flaming arrow
			; ParticleSysBone					= FireArowTip arrowFire FollowBone:Yes
			; ParticleSysBone					= FireArowTip arrowFire FollowBone:Yes
		End

;;================== ANIMATIONS ==============================================================		
;----------- Flying through air -------
		
		AnimationState						= THROWN_PROJECTILE WEAPONSTATE_CLOSE_RANGE
			Animation						= FLYA
				AnimationName				= GURanger_FLYB
				AnimationMode				= LOOP
			End
		End

		AnimationState						= THROWN_PROJECTILE
			Animation						= FLYA
				AnimationName				= GURanger_FLYA
				AnimationMode				= LOOP
			End
		End
		
		AnimationState						= PASSENGER FREEFALL WEAPONSTATE_CLOSE_RANGE
			Animation						= FLLB
				AnimationName				= GURanger_FLLB
				AnimationMode				= LOOP
			End
			StateName						= Sword
		End
		
		AnimationState						= PASSENGER FREEFALL	;;;;GIANT BIRDS GIVE BOTH WHILE CARRYING VICTIMS
			Animation						= FLLA
				AnimationName				= GURanger_FLLA
				AnimationMode				= LOOP
			End
			StateName						= Bow
		End
		
		AnimationState						= FREEFALL WEAPONSTATE_CLOSE_RANGE
			StateName						= STATE_Freefall
			Animation						= FLYB
				AnimationName				= GURanger_FLYB
				AnimationMode				= LOOP
				AnimationBlendTime			= 10
				AnimationSpeedFactorRange	= 0.7	0.7
			End
		End
		
		AnimationState						= FREEFALL
			SimilarRestart					= Yes
			StateName						= STATE_Freefall
			Animation						= FLYA
				AnimationName				= GURanger_FLYA
				AnimationMode				= LOOP
				AnimationBlendTime			= 10
				AnimationSpeedFactorRange	= 0.65	0.65
			End
		End
		

		AnimationState					=	STUNNED_FLAILING 
			Animation					=	StunFlail
				AnimationName			=	GURanger_FLYA 
				AnimationMode			=	LOOP
			End
			Flags						=	RANDOMSTART
		End

;----------- Dying -------

		AnimationState						= DYING SPLATTED WEAPONSTATE_CLOSE_RANGE
			Animation						= Splattered
				AnimationName				= GURanger_LNDB
				AnimationMode				= ONCE
			End
		End

		AnimationState						= DYING SPLATTED
			Animation						= Splattered
				AnimationName				= GURanger_LNDA
				AnimationMode				= ONCE
			End
		End

		AnimationState						= DYING WEAPONSTATE_CLOSE_RANGE
			Animation						= Die
				AnimationName				= GURanger_DIEB
				AnimationMode				= ONCE
			End
		End

		AnimationState						= DYING
			Animation						= Die
				AnimationName				= GURanger_DIEA
				AnimationMode				= ONCE
			End
		End

;------ Stunned anims -----------
		AnimationState						= STUNNED_STANDING_UP WEAPONSTATE_CLOSE_RANGE
			Animation						= GTPA
				AnimationName				= GURanger_GTPB
				AnimationMode				= ONCE
				AnimationSpeedFactorRange	= 0.7 1.1
			End
		End

		AnimationState						= STUNNED_STANDING_UP 
			Animation						= GTPA
				AnimationName				= GURanger_GTPA
				AnimationMode				= ONCE
				AnimationSpeedFactorRange	= 0.7 1.1
			End
		End

		AnimationState						= STUNNED WEAPONSTATE_CLOSE_RANGE
			Animation						= Stun
				AnimationName				= GURanger_LNDB
				AnimationMode				= ONCE
			End
		End

		AnimationState						= STUNNED 
			Animation						= Stun
				AnimationName				= GURanger_LNDA
				AnimationMode				= ONCE
			End
		End
				
; --------- Attacking With Sword ------------
	
		AnimationState        =  FIRING_OR_PREATTACK_B 
			Animation           = ATKD
				AnimationName     = GURanger_ATKA
				AnimationMode     = ONCE
				UseWeaponTiming		= Yes
			End
			Animation           = ATKE
				AnimationName     = GURanger_ATKB
				AnimationMode     = ONCE
				UseWeaponTiming		= Yes
			End
            ;FXEvent	= Frame:21 Name: FX_WhatHitEffectDoesTheRangerWantToUse???
    		StateName           = STATE_Sword
			BeginScript
				CurDrawableHideSubObject("arrow")
				CurDrawableHideSubObject("arrownock")
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Bow" then CurDrawableSetTransitionAnimState("TRANS_SwitchToSwords") end
			EndScript
		End

;---------------------------------------------------
		;New style firing
		AnimationState						= PREATTACK_A 
			StateName						= STATE_Firing
			Animation						= ReadyToDrawn
				AnimationName				= GURanger_ATKD1
				AnimationMode				= ONCE
;				UseWeaponTiming				= Yes			; UseWeaponTiming plus random weapon field equals desync.  Leaving as warning
				AnimationSpeedFactorRange	= 1.5 1.5		; Therefore, this is all you get.  A slight speed up so that the animation can always finish before any possible random value Design sets the range for
				AnimationBlendTime			= 10			
			End
			BeginScript
				CurDrawableShowSubObject("arrow")
				CurDrawableShowSubObject("arrownock")
			EndScript
		End

		AnimationState						= FIRING_OR_RELOADING_A
			StateName						= STATE_Firing
			Animation						= OneFrameOfShooting
				AnimationName				= GURanger_ATKD2
				AnimationMode				= ONCE
;				UseWeaponTiming				= Yes			; UseWeaponTiming plus random weapon field equals desync.  Leaving as warning
				AnimationSpeedFactorRange	= 1.0 1.0		; Therefore, this is all you get.  A slight speed up so that the animation can always finish before any possible random value Design sets the range for
				AnimationBlendTime			= 0				; Must be 0 blend time otherwise the arrow will linger for the duration of the blend!
			End
			BeginScript
				CurDrawableShowSubObject("arrow")
				CurDrawableShowSubObject("arrownock")
			EndScript
		End
		;End New style firing
;---------------------------------------------------


; --------- MOVING ------------	

		AnimationState					= MOVING EMOTION_TERROR
			Animation					= Terror
				AnimationName			= GURanger_RUNC
				AnimationMode			= LOOP
				Distance				= 26
			End
			BeginScript
				CurDrawableShowSubObject("arrow")
				CurDrawableShowSubObject("arrownock")
			EndScript
		End

		AnimationState						= MOVING WEAPONSTATE_CLOSE_RANGE
			StateName						= STATE_Sword
			Animation						= RunWithSword
				AnimationName				= GURanger_RUNB
				AnimationMode				= LOOP
				Distance					= 28
			End
			BeginScript
				CurDrawableHideSubObject("arrow")
				CurDrawableHideSubObject("arrownock")
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Bow" then CurDrawableSetTransitionAnimState("TRANS_Bow_To_Sword") end
			EndScript
		End

		AnimationState						= MOVING
			StateName						= STATE_Bow
			Animation						= RunWithSword
				AnimationName				= GURanger_RUNA
				AnimationMode				= LOOP
				Distance					= 28
			End
			BeginScript
				CurDrawableShowSubObject("arrow")
				CurDrawableShowSubObject("arrownock")
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Sword" then CurDrawableSetTransitionAnimState("TRANS_Sword_To_Bow") end
			EndScript
		End

;-------- Persistant firing (keep bow drawn ) ------------
		AnimationState					= CONTINUOUS_FIRE_MEAN
			StateName					=	STATE_Firing
			Animation					=	HangFrameWhileCoasting
				AnimationName			=	GURanger_ATKD2
				AnimationMode			=	MANUAL
			End
			BeginScript
				CurDrawableShowSubObject("arrow")
				CurDrawableShowSubObject("arrownock")
			EndScript
		End
		
		AnimationState						= CONTINUOUS_FIRE_SLOW
			StateName						= STATE_Idle
			Animation						= PutAwayArrow
				AnimationName				= GURanger_ATKD3
				AnimationMode				= ONCE
			End
			BeginScript
				CurDrawableShowSubObject("arrow")
				CurDrawableShowSubObject("arrownock")
			EndScript
		End


; --------- Click and Hit Reactions ------------	
		AnimationState						= HIT_REACTION
			Animation						= Hit_Level_1_a
				AnimationName				= GURanger_HITA
				AnimationMode				= ONCE
			End
			BeginScript
				CurDrawableShowSubObject("arrow")
				CurDrawableShowSubObject("arrownock")
			EndScript
		End


;;------------- EMOTIONS ------------------------------------------------
		AnimationState						= EMOTION_AFRAID WEAPONSTATE_CLOSE_RANGE
			ShareAnimation					= Yes
			StateName						= STATE_Sword
			Animation						= FearWithSword
				AnimationName				= GURanger_FERB
				AnimationMode				= LOOP
			End
			BeginScript
				CurDrawableHideSubObject("arrow")
				CurDrawableHideSubObject("arrownock")
			EndScript
		End
		AnimationState						= EMOTION_AFRAID
			ShareAnimation					= Yes
			StateName						= STATE_Bow
			Animation						= FERA
				AnimationName				= GURanger_FERA
				AnimationMode				= LOOP
			End
			BeginScript
				CurDrawableShowSubObject("arrow")
				CurDrawableShowSubObject("arrownock")
			EndScript
		End
		
		AnimationState						= EMOTION_TAUNTING
			ShareAnimation					= Yes
			Animation						= Taunting
				AnimationName				= GURanger_TNTA
				AnimationMode				= ONCE
			End
			Animation						= Taunting2
				AnimationName				= GURanger_TNTB
				AnimationMode				= ONCE
			End
			Flags							= RANDOMSTART RESTART_ANIM_WHEN_COMPLETE
			BeginScript
				CurDrawableShowSubObject("arrow")
				CurDrawableShowSubObject("arrownock")
			EndScript
		End

		AnimationState						= EMOTION_POINTING WEAPONSTATE_CLOSE_RANGE
			Animation						= Point
				AnimationName				= GURanger_PNTA
				AnimationMode				= LOOP
			End
			Flags				= RANDOMSTART
			BeginScript
				CurDrawableHideSubObject("arrow")
				CurDrawableHideSubObject("arrownock")
			EndScript
		End
		AnimationState						= EMOTION_POINTING
			Animation						= Pointing1
				AnimationName				= GURanger_PNTA
				AnimationMode				= LOOP
			End
			Flags						= RANDOMSTART
			BeginScript
				CurDrawableShowSubObject("arrow")
				CurDrawableShowSubObject("arrownock")
			EndScript
		End

		AnimationState						= EMOTION_CELEBRATING WEAPONSTATE_CLOSE_RANGE
			Animation						= &&CHEER WITH SWORD&&
				AnimationName				= GURanger_IDLA
				AnimationMode				= LOOP
			End
			BeginScript
				CurDrawableHideSubObject("arrow")
				CurDrawableHideSubObject("arrownock")
			EndScript
		End
		AnimationState						= EMOTION_CELEBRATING
			ShareAnimation					= Yes
			Animation						= CHRA
				AnimationName				= GURanger_CHRA
				AnimationMode				= Once
			End
			Animation						= CHRB
				AnimationName				= GURanger_CHRB
				AnimationMode				= Once
			End
			Flags							= RESTART_ANIM_WHEN_COMPLETE
			BeginScript
				CurDrawableShowSubObject("arrow")
				CurDrawableShowSubObject("arrownock")
			EndScript
		End
		
		AnimationState						= EMOTION_ALERT
			StateName						= STATE_Alert
			Animation						= Alert
				AnimationName				= GURanger_IDLA 
				AnimationMode				= ONCE
			End
			BeginScript
				CurDrawableShowSubObject("arrow")
				CurDrawableShowSubObject("arrownock")
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Selected" then CurDrawableSetTransitionAnimState("TRANS_SelectedToAlert") end
			EndScript
		End
	;--------- selected animation -----------------------------
	
		AnimationState						= SELECTED
			StateName						= STATE_Selected
			Animation						= Selected
				AnimationName				= GURanger_IDLD 
				AnimationMode				= LOOP
			End
			BeginScript
				CurDrawableShowSubObject("arrow")
				CurDrawableShowSubObject("arrownock")
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Bow_Idle" then CurDrawableSetTransitionAnimState("TRANS_IdleToSelected") end
			EndScript
		End

	;;---- Idle Animation State ---------------------------------------

		IdleAnimationState
			StateName						= STATE_Bow_Idle

			Animation						= IdleBowG
				AnimationName				= GURanger_IDLC
				AnimationMode				= ONCE
				AnimationPriority			= 6
			End
			Animation						= IdleBowG ;Double up because animations never choose the same one twice in a row.
				AnimationName				= GURanger_IDLC
				AnimationMode				= ONCE
				AnimationPriority			= 6
			End
			Animation						= IdleBowG
				AnimationName				= GURanger_IDLF
				AnimationMode				= ONCE
			End
			Animation						= IdleBowF
				AnimationName				= GURanger_IDLG 
				AnimationMode				= ONCE
			End
			
			Flags							= RESTART_ANIM_WHEN_COMPLETE
			
			BeginScript
				CurDrawableShowSubObject("arrow")
				CurDrawableShowSubObject("arrownock")
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Sword" then CurDrawableSetTransitionAnimState("TRANS_Sword_To_Bow") end
				if Prev == "STATE_Selected" then CurDrawableSetTransitionAnimState("TRANS_AttentionToIdle") end
			EndScript
		End

;---transitions--------------------------------------------
		TransitionState						= TRANS_Bow_To_Sword
			Animation						= DrawSwords
				AnimationName				= GURanger_STHA
				AnimationMode				= ONCE
				AnimationSpeedFactorRange	= 0.9 1.1
			End
		End

		TransitionState						= TRANS_Sword_To_Bow
			Animation						= DrawBow
				AnimationName				= GURanger_STHB
				AnimationMode				= ONCE
				AnimationSpeedFactorRange	= 0.9 1.1
			End
		End
		
		TransitionState       = TRANS_IdleToAttention
			Animation           = ATNA
				AnimationName     = GURanger_ATNA
				AnimationMode     = ONCE
			End
		End
		
		TransitionState       = TRANS_AttentionToIdle
			Animation           = ATND
				AnimationName     = GURanger_ATNA
				AnimationMode     = ONCE_BACKWARDS
			End
			Flags				= START_FRAME_LAST
		End

		TransitionState       = TRANS_IdleToAttention
			Animation           = ATNA
				AnimationName     = GURanger_ATNC
				AnimationMode     = ONCE
			End
		End
		
		TransitionState       = TRANS_AttentionToIdle
			Animation           = ATND
				AnimationName     = GURanger_ATNC
				AnimationMode     = ONCE_BACKWARDS
			End
			Flags				= START_FRAME_LAST
		End
	End
	
	
	; ***DESIGN parameters ***
	Side = Gondor
	EditorSorting = UNIT
	ThreatLevel = 1.0
	ThingClass = HORDE_UNIT
	CommandPoints = 3
	BountyValue = GONDOR_RANGER_BOUNTY_VALUE

	TransportSlotCount = 1
	WeaponSet
		Conditions = None 
		Weapon = PRIMARY    GondorRangerBow
	End
	WeaponSet
		Conditions = CLOSE_RANGE CONTESTING_BUILDING
		Weapon = PRIMARY    GondorRangerBow
		Weapon = SECONDARY   GondorRangerSword
		OnlyAgainst = PRIMARY STRUCTURE
	End

	ArmorSet
		Conditions      = None
		Armor           = RangerArmor
		DamageFX        = NormalDamageFX
	End
	
	; Gondor Ranger is no longer eligible for this upgrade.
	;ArmorSet
	;	Conditions      = PLAYER_UPGRADE
	;	Armor           = HeavyArmor
	;	DamageFX        = NormalDamageFX
	;End
	
	VisionRange = VISION_STANDARD_MELEE
	ShroudClearingRange = SHROUD_CLEAR_STANDARD

	DisplayName = OBJECT:GondorRanger
	CrushableLevel = 0  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
	CrushRevengeWeapon = RangedInfantryCrushRevenge
	
	CommandSet = GondorRangerCommandSet


  ; *** AUDIO Parameters ***;

	VoiceAttack					= RangerVoiceAttack
	VoiceAttackAir				= RangerVoiceAttack				
	VoiceAttackCharge				= RangerVoiceAttack
	VoiceAttackMachine			= RangerVoiceAttack
	VoiceAttackStructure			= RangerVoiceAttackBuilding
	VoiceEnterStateAttack			= RangerVoiceEnterStateAttack	
	VoiceEnterStateAttackCharge		= RangerVoiceEnterStateAttack
	VoiceEnterStateAttackMachine		= RangerVoiceEnterStateAttackBuilding
	VoiceEnterStateAttackStructure	= RangerVoiceEnterStateAttackBuilding
	VoiceCreated				= RangerVoiceSalute
	VoiceFullyCreated 			= RangerVoiceSalute		
	VoiceGuard					= RangerVoiceMove
	VoiceMove					= RangerVoiceMove		
	VoiceMoveToCamp				= RangerVoiceMoveCamp
	VoiceMoveWhileAttacking			= RangerVoiceDisengage
	VoiceEnterStateMove			= RangerVoiceEnterStateMove
	VoiceEnterStateMoveToCamp		= RangerVoiceEnterStateMoveCamp
	VoiceEnterStateMoveWhileAttacking	= RangerVoiceEnterStateDisengage
	VoicePriority				= 43
	VoiceRetreatToCastle			= RangerVoiceRetreat
	VoiceEnterStateRetreatToCastle	= RangerVoiceEnterStateRetreat
	VoiceSelect					= RangerVoiceSelect				;GondorArcherVoiceSelect
	VoiceSelect2				= YeomanArcherVoiceSelect2
	VoiceSelectBattle 			= RangerVoiceSelectBattle			;GondorArcherVoiceSelect ;GondorArcherVoiceSelectBattle

	SoundImpact					= ImpactHorse

	UnitSpecificSounds
		VoiceGarrison			= RangerVoiceGarrison              
	End

	EvaEventDamagedOwner = UnitUnderAttack		;Eva event to trigger when unit is damaged

	Behavior = LargeGroupAudioUpdate ModuleTag_LGAU			; Tie into LargeGroupAudio system
		Key = Human Unit Infantry Ranger
	End

	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		MaxUpdateRangeCap = 800
		AnimationSound = Sound:ArrowDrawBow					Animation:GURanger_SKL.GURanger_ATKD1	Frames:7
		AnimationSound = Sound:ArrowDrawBow					Animation:GURanger_SKL.GURanger_ATKD2	Frames:17

		AnimationSound = Sound:SwordShingClean1ForHordes 		Animation:GURanger_SKL.GURanger_STHA 	Frames:10
		AnimationSound = Sound:SwordIntoScabbard1ForHordes		Animation:GURanger_SKL.GURanger_STHB 	Frames:6

		AnimationSound = Sound:BodyFallGenericNoArmor			Animation:GURanger_SKL.GURanger_LNDA	Frames:4
		AnimationSound = Sound:BodyFallGenericNoArmor			Animation:GURanger_SKL.GURanger_LNDB	Frames:5

		AnimationSound = Sound:BodyFallGenericNoArmor			Animation:GURanger_SKL.GURanger_DIEA	Frames:50
		AnimationSound = Sound:BodyFallGenericNoArmor			Animation:GURanger_SKL.GURanger_DIEB	Frames:51
	End


	; *** ENGINEERING Parameters ***
	RadarPriority = UNIT
	KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE THROWN_OBJECT GRAB_AND_DROP ATTACK_NEEDS_LINE_OF_SIGHT ARCHER
	
	Body = ActiveBody ModuleTag_02
		CheerRadius 	  = EMOTION_CHEER_RADIUS
		MaxHealth         = GONDOR_RANGER_HEALTH                  ;BALANCE Ranger Health
		MaxHealthDamaged  = GONDOR_RANGER_HEALTH_DAMAGED
		;RecoveryTime      = GONDOR_RANGER_HEALTH_RECOVERY_TIME
	End
	
	; Fire arrow upgrade
	Behavior = WeaponSetUpgrade ModuleTag_WeaponSetUpgradeTag
		TriggeredBy = Upgrade_GondorFireArrows
	End
	
	Behavior = SubObjectsUpgrade FireArrows_Upgrade
  		TriggeredBy		= Upgrade_GondorFireArrows
  		ShowSubObjects	= FireArowTip ArrowNock	
  		HideSubObjects	= arrow
  	End
  	
	Behavior = AIUpdateInterface ModuleTag_03
		AutoAcquireEnemiesWhenIdle = Yes ATTACK_BUILDINGS STEALTHED
		StopChaseDistance = 562
		MoodAttackCheckRate        = 500
		HoldGroundCloseRangeDistance = 40
		CanAttackWhileContained    = Yes
		AILuaEventsList				=	RangerFunctions
		MinCowerTime				=	4000
		MaxCowerTime				=	6000
		AttackPriority				= 	AttackPriority_Archer
	End
	
	Behavior = HitReactionBehavior HitReactionBehaviorModuleTag
		HitReactionLifeTimer1 = 1667 ; level 1 (light  damage)  hit reaction animations in ms
		HitReactionLifeTimer2 = 1667 ; level 2 (medium damage)  hit reaction animations in ms
		HitReactionLifeTimer3 = 1667 ; level 3 (heavy  damage)  hit reaction animations in ms

		HitReactionThreshold1 = 0.0   ; level 1 (light  damage) threshold trigger
		HitReactionThreshold2 = 25.0  ; level 2 (medium damage) threshold trigger
		HitReactionThreshold3 = 50.0  ; level 3 (heavy  damage) threshold trigger

		FastHitsResetReaction = Yes    ;If set -- when hits occur faster than the reaction animations, it will reset the animation. (like getting riddled with machine gun bullets)
	End

	Behavior = StealthUpdate StealthUpdateModuleTag
		StealthDelay						= 2500         ; msec
		FriendlyOpacityMin					= STEALTH_FRIENDLY_OPACITY_MIN
		FriendlyOpacityMax					= STEALTH_FRIENDLY_OPACITY_MAX
		PulseFrequency						= 750   ; msec
		StealthForbiddenConditions			= HORDEBRAIN_NOT_STEALTHED
		OrderIdleEnemiesToAttackMeUponReveal= Yes
		DetectedByAnyoneRange				= 120
		RevealWeaponSets					= CLOSE_RANGE CONTESTING_BUILDING
		VoiceMoveToStealthyArea				= RangerVoiceMoveTrees
		VoiceEnterStateMoveToStealthyArea	= RangerVoiceEnterStateMoveTrees
	End
	
	LocomotorSet
		Locomotor = HumanLocomotor
		Condition = SET_NORMAL 
		Speed     = NORMAL_GOOD_INFANTRY_MEMBER_SPEED	
	End

	LocomotorSet
		Locomotor = HumanWanderLocomotor
		Condition = SET_WANDER
		Speed     = NORMAL_GOOD_INFANTRY_MEMBER_SPEED	
	End

	Behavior = DualWeaponBehavior ModuleTag_13
		SwitchWeaponOnCloseRangeDistance = 24
	End

	Behavior = PhysicsBehavior ModuleTag_04
		GravityMult = 1.0
	End
	
	Behavior = SlowDeathBehavior ModuleTag_05
		DeathTypes = ALL -KNOCKBACK
		SinkDelay = 3000
		SinkRate = 0.40     ; in Dist/Sec
		DestructionDelay = 15000
		Sound = INITIAL HumanVoiceDie ;RangerVoiceDie
	End
	
	Behavior = SquishCollide ModuleTag_06
		;nothing
	End
	
	; GondorRanger
	Behavior = HordeMemberCollide ModuleTag_HMC
		;nothing
	End
	
	Behavior = SlowDeathBehavior ModuleTag_07
		; Same as normal death, but no sound (sound already played by SoundImpact = ... )
		DeathTypes = NONE +KNOCKBACK
		SinkDelay = 3000
		SinkRate = 0.40     ; in Dist/Sec
		DestructionDelay = 15000
	End

	Behavior = BezierProjectileBehavior ModuleTag_08 ; Module starts asleep, and wakes up when thrown.
		; To tweak a Bezier path
		FirstHeight = 24  ; Height of Bezier control points above highest intervening terrain
		SecondHeight = 24
		FirstPercentIndent = 30% ; Percentage of shot distance control points are placed
		SecondPercentIndent = 70%
		TumbleRandomly = Yes

		CrushStyle = Yes ; I don't detonate, I just hit
		DieOnImpact = Yes
		BounceCount = 1   ; When I hit the ground, I'll arc again
		BounceDistance = 40 ; this far
		BounceFirstHeight = 24  ; Height of Bezier control points above highest intervening terrain
		BounceSecondHeight = 24
		BounceFirstPercentIndent = 20% ; Percentage of shot distance control points are placed
		BounceSecondPercentIndent = 80%

		GroundHitFX       = FX_ThrownRockGroundHit
		GroundBounceFX    = FX_ThrownRockBounceHit
	End

	Geometry = CYLINDER
	GeometryMajorRadius = 8.0
	GeometryMinorRadius = 8.0
	GeometryHeight = 19.2
	GeometryIsSmall = Yes

    Shadow = SHADOW_DECAL
    ShadowSizeX = 19;
    ShadowSizeY = 19;
    ShadowTexture = ShadowI;
End

;------------------------------------------------------------------------------
; Gondor Captain
Object GondorCaptain
	; *** ART Parameters ***

	Draw = W3DScriptedModelDraw ModuleTag_01
		DefaultModelConditionState
			Model               = GUCaptain_SKN
		End

		IdleAnimationState
			Animation       = Idle
				AnimationName   = GUCaptain_SKL.GUCaptain_IDLB
				AnimationMode   = ONCE
			End
		End
	
		; --- stunned anims
		AnimationState      = STUNNED_FLAILING 
			Animation         = FlyNDie
				AnimationName     = GUCaptain_SKL.GUCaptain_FLYA
				AnimationMode     = LOOP
			End
			Flags             = RANDOMSTART
		End

		

		AnimationState        = MOVING WANDER
			Animation           = WanderWalk
				AnimationName       = GUCaptain_SKL.GUCaptain_WALK 
				AnimationMode       = LOOP
			End
			;ParticleSysBone     = None InfantryDustTrails
		End

		AnimationState        = MOVING DAMAGED
			Animation           = DamagedWalk
				AnimationName       = GUCaptain_SKL.GUCaptain_WALK 
				AnimationMode       = LOOP
			End
			Flags               = RANDOMSTART
			;ParticleSysBone     = None InfantryDustTrails
		End

		AnimationState        = MOVING
			Animation           = Run
				AnimationName       = GUCaptain_SKL.GUCaptain_RUN 
				AnimationMode       = LOOP
			End
			Flags               = RANDOMSTART
			;ParticleSysBone     = None InfantryDustTrails
		End

		AnimationState        = ATTACKING
			Animation           = Attack
				AnimationName       = GUCaptain_SKL.GUCaptain_ATKA
				AnimationMode       = LOOP
			End
		End
	

		AnimationState      = DYING SPLATTED
			Animation         = Splattered
				AnimationName     = GUCaptain_SKL.GUCaptain_SPLTA
				AnimationMode     = ONCE
			End
		End

		AnimationState      = DYING
			Animation         = Die
				AnimationName     = GUCaptain_SKL.GUCaptain_DIEA
				AnimationMode     = ONCE
			End
		End
		
		AnimationState      = STUNNED 
			Animation         = Stun
				AnimationName     = GUCaptain_SKL.GUCaptain_SPLTA
				AnimationMode     = ONCE
			End
		End
	
;;---------- EMOTIONS -------------------------------------------------

		AnimationState				= EMOTION_TAUNTING
			Animation				= TNTA
				AnimationName		= GUCaptain_SKL.GUCaptain_TNTA
				AnimationMode		= LOOP
			End
		End

		AnimationState				= EMOTION_POINTING
			Animation				= Pointing1
				AnimationName		= GUCaptain_SKL.GUCaptain_PNTA
				AnimationMode		= LOOP
			End
		End

		AnimationState				= EMOTION_CELEBRATING
			Animation				= CHRA
				AnimationName	    = GUCaptain_SKL.GUCaptain_CHRA
				AnimationMode		= LOOP
			End
		End
		
;;------------ Selection ----------------------------------------------

;;---------------------------------------------------------------------
	End

	; ***DESIGN parameters ***
	Side = Gondor
	EditorSorting = UNIT
	ThreatLevel = 1.0
	TransportSlotCount = 1
	WeaponSet
		Conditions = None 
		Weapon = PRIMARY    GondorSword
		AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End
	ArmorSet
		Conditions      = None
		Armor           = NoArmor
		DamageFX        = NormalDamageFX
	End
	VisionRange = 120.0
	DisplayName = OBJECT:GondorFighter
	CrushableLevel = 0  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
	CrushRevengeWeapon = BasicInfantryCrushRevenge
	CommandPoints = 1
	
	CommandSet = GondorCaptainCommandSet
	

	; *** AUDIO Parameters ***;

	VoiceAmbushed			= GondorSoldierVoiceAmbushed
	VoiceAttack			= GondorSoldierVoiceAttack
	VoiceAttackCharge		= GondorSoldierVoiceAttackCharge
	VoiceAttackMachine		= GondorSoldierVoiceAttack
	VoiceAttackStructure		= GondorSoldierVoiceAttackBuilding
	VoiceEnterStateAttack			= GondorSoldierVoiceEnterStateAttack
	VoiceEnterStateAttackCharge		= GondorSoldierVoiceEnterStateAttackCharge
	VoiceEnterStateAttackMachine	= GondorSoldierVoiceEnterStateAttackBuilding
	VoiceEnterStateAttackStructure	= GondorSoldierVoiceEnterStateAttackBuilding
	VoiceCreated			= GondorSoldierVoiceSalute
	VoiceFullyCreated 		= GondorSoldierVoiceSalute
	VoiceMove			= GondorSoldierVoiceMove
	VoiceMoveToCamp			= GondorSoldierVoiceMoveCamp
	VoiceMoveWhileAttacking		= GondorSoldierVoiceDisengage
	VoiceEnterStateMove					= GondorSoldierVoiceEnterStateMove
	VoiceEnterStateMoveToCamp			= GondorSoldierVoiceEnterStateMoveCamp
	VoiceEnterStateMoveWhileAttacking	= GondorSoldierVoiceEnterStateDisengage
	VoicePriority			= 49
	VoiceRetreatToCastle		= GondorSoldierVoiceRetreat
	VoiceEnterStateRetreatToCastle		= GondorSoldierVoiceEnterStateRetreat
	VoiceSelect			= GondorSoldierVoiceSelect
	VoiceSelectBattle 		= GondorSoldierVoiceSelectBattle
	VoiceGuard			= GondorSoldierVoiceMove

	SoundImpact			= ImpactHorse

	UnitSpecificSounds
		VoiceGarrison		= GondorSoldierVoiceGarrison              
	End

	EvaEventDamagedOwner = UnitUnderAttack		;Eva event to trigger when unit is damaged


	; *** ENGINEERING Parameters ***
	RadarPriority = UNIT
	KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE GRAB_AND_DROP
	
	Body = ActiveBody ModuleTag_02
		MaxHealth         = 10                  ;BALANCE Man at Arms Health
		MaxHealthDamaged  = 5
		;RecoveryTime      = 5000
	End
	
	Behavior = AIUpdateInterface ModuleTag_03
	End

	LocomotorSet
		Locomotor = HumanLocomotor
		Condition = SET_NORMAL 
		Speed     = 32
	End

	LocomotorSet
		Locomotor = HumanWanderLocomotor
		Condition = SET_WANDER 
		Speed     = 32
	End
	  
	Behavior = PhysicsBehavior ModuleTag_04
		GravityMult = 1.0
	End
	
	Behavior = SlowDeathBehavior ModuleTag_05
		DeathTypes = ALL 
		SinkDelay = 3000
		SinkRate = 0.40     ; in Dist/Sec
		DestructionDelay = 8000
	End
	
	Behavior = SquishCollide ModuleTag_06
		;nothing
	End
	
	; Tie into LargeGroupAudio system
	Behavior = LargeGroupAudioUpdate ModuleTag_LGAU
		Key = Human Unit Infantry
	End
	
	Geometry = CYLINDER
	GeometryMajorRadius = 8.0
	GeometryMinorRadius = 8.0
	GeometryHeight = 19.2
	GeometryIsSmall = Yes
  Shadow = SHADOW_DECAL
  ShadowSizeX = 19;
  ShadowSizeY = 19;
  ShadowTexture = ShadowI;
End

;------------------------------------------------------------------------------
; aka Gondor Archer
Object GondorArcher
	; *** ART Parameters ***
	UpgradeCameo1						=	Upgrade_GondorFireArrows
	SelectPortrait						=	UPGondor_Archer
	Draw = W3DHordeModelDraw ModuleTag_01
		OkToChangeModelColor = Yes

		StaticModelLODMode = Yes
		
		; specify options for static LODs
		LodOptions	= LOW
			AllowMultipleModels		=	ALLOW_MULTIPLE_MODELS_LOW
			MaxRandomTextures		=	MAX_RANDOM_TEXTURES_LOW
			MaxRandomAnimations		=	MAX_RANDOM_ANIMATIONS_LOW
			MaxAnimFrameDelta		=	MAX_ANIM_FRAME_DELTA_LOW
		End
		
		LodOptions	= MEDIUM
			AllowMultipleModels		=	ALLOW_MULTIPLE_MODELS_MED
			MaxRandomTextures		=	MAX_RANDOM_TEXTURES_MED
			MaxRandomAnimations		=	MAX_RANDOM_ANIMATIONS_MED
			MaxAnimFrameDelta		=	MAX_ANIM_FRAME_DELTA_MED
		End
		
		LodOptions	= HIGH
			AllowMultipleModels		=	ALLOW_MULTIPLE_MODELS_HIGH
			MaxRandomTextures		=	MAX_RANDOM_TEXTURES_HIGH
			MaxRandomAnimations		=	MAX_RANDOM_ANIMATIONS_HIGH
			MaxAnimFrameDelta		=	MAX_ANIM_FRAME_DELTA_HIGH
		End
		
		ParticlesAttachedToAnimatedBones = yes

		; --------- With Bow ------------
		DefaultModelConditionState
			Model						=	GUArcher_SKN
			Skeleton					=   GUArcher_SKL
			WeaponLaunchBone			=	PRIMARY ARROW
		End

		; --------- With Bow Upgrade  ------------
		ModelConditionState = WEAPONSET_PLAYER_UPGRADE
			Model						=	GUArcher_SKN
			Skeleton					=   GUArcher_SKL
			WeaponLaunchBone			=	PRIMARY ARROW
;			ParticleSysBone				=   FireArowTip arrowFire FollowBone:Yes
;			ParticleSysBone				=   FireArowTip arrowFire FollowBone:Yes
		End
	
		ModelConditionState = USER_4		; This state is used in cinematics to get the old style armor
			Model							= GUNumnArch_SKN	
			Skeleton						= GUMAArms_SKL
		End

		;-----------------
		IdleAnimationState
			StateName					=   STATE_Idle
			Animation = IdleA
				AnimationName			=	GUArcher_IDLA 
				AnimationPriority		=	6
				AnimationSpeedFactorRange = 0.7 1.3
			End
			;*** Repeat IDLA because animation priorities will not choose same animation twice so it can alternate between first two mostly.
			Animation = IdleA	
				AnimationName			=	GUArcher_IDLA 
				AnimationPriority		=	6
				AnimationSpeedFactorRange = 0.7 1.3
			End
			Animation = IdleH
				AnimationName			=	GUArcher_IDLH
				AnimationPriority		=	1
				AnimationSpeedFactorRange = 0.7 1.3
				AnimationBlendTime		= 8
			End
			Animation = IdleI
				AnimationName			=	GUArcher_IDLI
				AnimationPriority		=	1
				AnimationSpeedFactorRange = 0.7 1.3
				AnimationBlendTime		= 8
			End
			Animation = IdleJ
				AnimationName			=	GUArcher_IDLJ
				AnimationPriority		=	1
				AnimationSpeedFactorRange = 0.7 1.3
				AnimationBlendTime		= 8
			End
			
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Selected" then CurDrawableSetTransitionAnimState("TRANS_Selected_To_Idle") end
				CurDrawableShowSubObject("arrow") ;Circumvents blend issues when the arrow is being shown...
			EndScript
		End
		
		AnimationState        = THROWN_PROJECTILE
			Animation           = FLYA
				AnimationName     = GUArcher_FLYA
				AnimationMode     = LOOP
			End
			BeginScript
				CurDrawableHideSubObject("arrow") ;Circumvents blend issues when the arrow is being shown...
			EndScript
		End
		
		AnimationState        = PASSENGER FREEFALL
			Animation           = FLLA
				AnimationName     = GUArcher_FLLA
				AnimationMode     = LOOP
			End
			BeginScript
				CurDrawableHideSubObject("arrow") ;Circumvents blend issues when the arrow is being shown...
			EndScript
		End

		AnimationState			= FREEFALL
			Animation			= Flying_1
				AnimationName	= GUARCHER_FLYA
				AnimationMode	= LOOP
				AnimationSpeedFactorRange = 0.35 0.35 ;Very slow
				AnimationBlendTime		  = 10		;Very slow
			End
			BeginScript
				CurDrawableHideSubObject("arrow") ;Circumvents blend issues when the arrow is being shown...
			EndScript
		End

		; --- stunned anims
		AnimationState					=	STUNNED_FLAILING 
			Animation					=	StunFlail
				AnimationName			=	GUArcher_FLYA 
				AnimationMode			=	LOOP
			End
			Flags						=	RANDOMSTART
			BeginScript
				CurDrawableHideSubObject("arrow") ;Circumvents blend issues when the arrow is being shown...
			EndScript
		End

		AnimationState					=	DYING SPLATTED
			Animation					=	Fire
				AnimationName			=	GUArcher_LNDA 
				AnimationMode			=	ONCE
				AnimationSpeedFactorRange = 0.7 1.3
			End
            EnteringStateFX = FX_SoldierHitGround
			BeginScript
				CurDrawableHideSubObject("arrow") ;Circumvents blend issues when the arrow is being shown...
			EndScript
		End

		AnimationState					=	DYING AFLAME
			Animation					=	Fire
				AnimationName			=	GUArcher_MFDA 
				AnimationSpeedFactorRange = 0.9 1.1
			End
			BeginScript
				CurDrawableHideSubObject("arrow") ;Circumvents blend issues when the arrow is being shown...
			EndScript
		End

		AnimationState					=	DYING
			Animation					=	Die1
				AnimationName			=	GUArcher_DIEA 
				AnimationMode			=	ONCE
				AnimationSpeedFactorRange = 0.7 1.3
			End
			Animation					=	Die2
				AnimationName			=	GUArcher_DIEB 
				AnimationMode			=	ONCE
				AnimationSpeedFactorRange = 0.7 1.3
			End
			BeginScript
				CurDrawableHideSubObject("arrow") ;Circumvents blend issues when the arrow is being shown...
			EndScript
		End

		AnimationState					=	STUNNED_STANDING_UP 
			Animation					=	GTPA
				AnimationName			=	GUArcher_GTPA
				AnimationMode			=	ONCE
				AnimationSpeedFactorRange = 0.7 1.1
			End
			BeginScript
				CurDrawableHideSubObject("arrow") ;Circumvents blend issues when the arrow is being shown...
			EndScript
		End

		AnimationState					=	STUNNED 
			Animation					=	StunFlail
				AnimationName			=	GUArcher_LNDA 
				AnimationMode			=	ONCE
			End
            EnteringStateFX = FX_SoldierHitGround
			BeginScript
				CurDrawableHideSubObject("arrow") ;Circumvents blend issues when the arrow is being shown...
			EndScript
		End
		
		AnimationState						= EMOTION_UNCONTROLLABLY_AFRAID
			ShareAnimation = Yes
			Animation						= FERA
				AnimationName				= GUArcher_FERA
				AnimationMode				= LOOP
				AnimationSpeedFactorRange	=	0.7 1.3								
			End
			Animation						= FERB
				AnimationName				= GUArcher_FERB
				AnimationMode				= LOOP
				AnimationSpeedFactorRange	=	0.7 1.3								
			End
			Animation						= FERC
				AnimationName				= GUArcher_FERC
				AnimationMode				= LOOP
				AnimationSpeedFactorRange	=	0.7 1.3								
			End
			Animation						= FERD
				AnimationName				= GUArcher_FERD
				AnimationMode				= LOOP
				AnimationSpeedFactorRange	=	0.7 1.3								
			End
			Flags							= RANDOMSTART			
			BeginScript
				CurDrawableHideSubObject("arrow") ;Circumvents blend issues when the arrow is being shown...
			EndScript
		End
		
  		AnimationState					=	FIRING_OR_PREATTACK_B
  			Animation					=	BowPunchWhenClose
  				AnimationName			=	GUArcher_ATKD 
  				AnimationMode			=	ONCE
  				UseWeaponTiming			=	Yes
  			End
 			BeginScript
				CurDrawableHideSubObject("arrow") ;Circumvents blend issues when the arrow is being shown...
			EndScript
 		End

		;---------------------------------------------------
		;New style firing
		AnimationState					=	PREATTACK_A 
			StateName					=	STATE_PreFiring
			Animation					=	ReadyToDrawn
				AnimationName			=	GUArcher_ATKF1
				AnimationMode			=	ONCE
;				UseWeaponTiming			=	Yes			; UseWeaponTiming plus random weapon field equals desync.  Leaving as warning
				AnimationBlendTime		=	10
			End
			BeginScript
				CurDrawableShowSubObject("arrow") ;Circumvents blend issues when the arrow is being shown...
			EndScript
		End

		AnimationState					=	FIRING_OR_RELOADING_A 
			StateName					=	STATE_Firing
			Animation					=	LooseReloadDraw
				AnimationName			=	GUArcher_ATKF2
				AnimationMode			=	ONCE
;				UseWeaponTiming			=	Yes			; UseWeaponTiming plus random weapon field equals desync.  Leaving as warning
				AnimationSpeedFactorRange = 1.2 1.3		; Therefore, this is all you get.  A slight speed up so that the animation can always finish before any possible random value Design sets the range for
				AnimationBlendTime		=	0
			End
			Flags = START_FRAME_FIRST
			BeginScript
				CurDrawableShowSubObject("arrow") ;Circumvents blend issues when the arrow is being shown...
			EndScript
		End
		
		;End New style firing
		;---------------------------------------------------

		AnimationState					=	MOVING WANDER
			ShareAnimation = Yes
			Animation					=	Wander1
				AnimationName			=	GUArcher_WLKA 
			End
			Animation					=	Wander2
				AnimationName			=	GUArcher_WLKB ;20
			End
			Flags						=	RANDOMSTART
			BeginScript
				CurDrawableHideSubObject("arrow") ;Circumvents blend issues when the arrow is being shown...
			EndScript
		End
		
		AnimationState					= MOVING EMOTION_LOOK_TO_SKY
			ShareAnimation = Yes
			Animation					= TerrorFromTheSky
				AnimationName			= GUArcher_RUNC
				AnimationMode			= LOOP
			End
			BeginScript
				CurDrawableHideSubObject("arrow") ;Circumvents blend issues when the arrow is being shown...
			EndScript
		End

		AnimationState				=	MOVING BACKING_UP
			ShareAnimation = Yes
			Animation				=	BackingUp
				AnimationName		=	GUArcher_BAKA
				AnimationMode		=	LOOP
			End
			Flags					=	RANDOMSTART
			BeginScript
				CurDrawableHideSubObject("arrow") ;Circumvents blend issues when the arrow is being shown...
			EndScript
		End
		
		AnimationState					=	ATTACKING MOVING
			ShareAnimation = Yes
			Animation					=	Move2
				AnimationName			=	GUArcher_RUNB
				Distance				=	28
			End
			Flags						=	RANDOMSTART
			BeginScript
				CurDrawableHideSubObject("arrow") ;Circumvents blend issues when the arrow is being shown...
			EndScript
		End

		AnimationState					=	MOVING
			ShareAnimation = Yes
			Animation					=	Move1
				AnimationName			=	GUArcher_RUNA 
				Distance				=	28
			End
			Flags						=	RANDOMSTART
			BeginScript
				CurDrawableHideSubObject("arrow") ;Circumvents blend issues when the arrow is being shown...
			EndScript
		End

		AnimationState					= CONTINUOUS_FIRE_MEAN
			StateName					=	STATE_Coasting
			Animation					=	HangFrameWhileCoasting
				AnimationName			=	GUArcher_ATKF2
				AnimationMode			=	MANUAL
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Firing" then CurDrawableAllowToContinue() return end
				CurDrawableShowSubObject("arrow") ;Circumvents blend issues when the arrow is being shown...
			EndScript
		End
		
		AnimationState						= CONTINUOUS_FIRE_SLOW
			StateName						= STATE_Idle
			Animation						= PutAwayArrow
				AnimationName				= GUArcher_ATKF3
				AnimationMode				= ONCE
			End
			BeginScript
				CurDrawableShowSubObject("arrow") ;Circumvents blend issues when the arrow is being shown...
			EndScript
		End

;;------------ HIT REACTION -----------------------------------------------------

; --------- Click and Hit Reactions ------------	
		AnimationState = HIT_REACTION
			Animation = Hit_Level_1_a
				AnimationName = GUArcher_HITA
				AnimationMode = ONCE
			End
			BeginScript
				CurDrawableHideSubObject("arrow") ;Circumvents blend issues when the arrow is being shown...
			EndScript
		End

;;------------ EMOTIONS ---------------------------------------------------------

;;======= AFRAID

		AnimationState						= EMOTION_AFRAID
			ShareAnimation = Yes
			Animation						= FERA
				AnimationName				= GUArcher_FERA
				AnimationMode				= LOOP
				AnimationSpeedFactorRange	=	0.7 1.3								
			End
			Animation						= FERB
				AnimationName				= GUArcher_FERB
				AnimationMode				= LOOP
				AnimationSpeedFactorRange	=	0.7 1.3								
			End
			Animation						= FERC
				AnimationName				= GUArcher_FERC
				AnimationMode				= LOOP
				AnimationSpeedFactorRange	=	0.7 1.3								
			End
			Animation						= FERD
				AnimationName				= GUArcher_FERD
				AnimationMode				= LOOP
				AnimationSpeedFactorRange	=	0.7 1.3								
			End
			Flags							= RANDOMSTART			
			BeginScript
				CurDrawableHideSubObject("arrow") ;Circumvents blend issues when the arrow is being shown...
			EndScript
		End
		
;;======= CELEBRATING
		
		AnimationState					= EMOTION_CELEBRATING
			Animation					= CHRB
				AnimationName			= GUArcher_CHRB
				AnimationMode			= Once
				AnimationBlendTime		= 15
				AnimationPriority		= 2
			End
			Animation					= SLTA
				AnimationName			= GUArcher_SLTA
				AnimationMode			= Once
				AnimationBlendTime		= 15
				AnimationPriority		= 2
			End
			Animation					= CHRA
				AnimationName			= GUArcher_CHRA
				AnimationMode			= Once
				AnimationBlendTime		= 15		
				AnimationPriority		= 1;Use least often of cheers (Eugene)
			End
			Flags						=	RESTART_ANIM_WHEN_COMPLETE
			BeginScript
				CurDrawableHideSubObject("arrow") ;Circumvents blend issues when the arrow is being shown...
			EndScript
		End

;;======== TAUNTING

		AnimationState					= EMOTION_TAUNTING
			Animation					= Taunting2
				AnimationName			= GUArcher_IDLE
				AnimationMode			= ONCE
				AnimationBlendTime		= 15
			End
			Animation					= Taunting3
				AnimationName			= GUArcher_IDLF
				AnimationMode			= ONCE
				AnimationBlendTime		= 15
			End
			Animation					= Taunting4
				AnimationName			= GUArcher_IDLG
				AnimationMode			= ONCE
				AnimationBlendTime		= 15
			End

			Flags						= RESTART_ANIM_WHEN_COMPLETE
			BeginScript
				CurDrawableHideSubObject("arrow") ;Circumvents blend issues when the arrow is being shown...
			EndScript
		End

;;======== POINTING

		AnimationState						= EMOTION_POINTING
			ShareAnimation					= Yes
			Animation						= pointing
				AnimationName				= GUArcher_PNTA
				AnimationPriority			= 2
				AnimationSpeedFactorRange	= 0.9 1.1
				AnimationMode				= LOOP
			End
			BeginScript
				CurDrawableHideSubObject("arrow") ;Circumvents blend issues when the arrow is being shown...
			EndScript
		End
		
;;======= ALERT

		AnimationState					= EMOTION_ALERT
			Animation					= Ready
				AnimationName			= GUArcher_IDLA
				AnimationMode			= LOOP
				AnimationPriority		= 3
				AnimationBlendTime		= 15
			End
			Animation					= Ready
				AnimationName			= GUArcher_IDLA
				AnimationMode			= LOOP
				AnimationPriority		= 3
				AnimationBlendTime		= 15
			End
			Animation					= Point
				AnimationName			= GUArcher_PNTA
				AnimationMode			= LOOP
				AnimationPriority		= 1
				AnimationBlendTime		= 15
			End
			BeginScript
				CurDrawableHideSubObject("arrow") ;Circumvents blend issues when the arrow is being shown...
			EndScript
		End
			
;;----------------- SELECTED --------------------------------------------
		AnimationState					=	SELECTED
			ShareAnimation = Yes
			StateName					=	STATE_Selected
			Animation					=	ATNB
				AnimationName			=	GUArcher_ATNB
				AnimationMode			=	LOOP
				AnimationSpeedFactorRange = 0.9 1.1
			End
			Animation					=	IDLA
				AnimationName			=	GUArcher_IDLA 
				AnimationPriority		=	10
				AnimationSpeedFactorRange = 0.7 1.3
			End

			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Idle" 
				then 
					CurDrawableSetTransitionAnimState("TRANS_Idle_to_Selected")
				end
				if CurDrawableModelcondition("ATTACKING")
				then
					return "IDLA"
				else
					return "ATNB"
				end
				CurDrawableHideSubObject("arrow") ;Circumvents blend issues when the arrow is being shown...
			EndScript
		End

;;----------------- Transitions ------------------------------------------------------

		TransitionState					=	TRANS_Idle_to_Selected
			Animation					=	ATNA
				AnimationName			=	GUArcher_ATNA
				AnimationMode			=	ONCE
				AnimationSpeedFactorRange = 0.8 1.2
				AnimationPriority		=   8
			End
			Animation					=	SLTA
				AnimationName			=	GUArcher_SLTA
				AnimationMode			=	ONCE
				AnimationSpeedFactorRange = 1.0 1.5
				AnimationPriority		=   1
			End
			BeginScript
				CurDrawableHideSubObject("arrow") ;Circumvents blend issues when the arrow is being shown...
			EndScript
		End
		TransitionState					=	TRANS_Selected_To_Idle
			Animation					=	ATNC
				AnimationName			=	GUArcher_ATNC
				AnimationMode			=	ONCE
				AnimationSpeedFactorRange = 0.5 2.0
			End
			BeginScript
				CurDrawableHideSubObject("arrow") ;Circumvents blend issues when the arrow is being shown...
			EndScript
		End
	End
		
	; ***DESIGN parameters ***
	Side = Gondor
	EditorSorting = UNIT
	ThreatLevel = 1.0
	ThingClass = HORDE_UNIT
	CommandPoints = 3
	BountyValue = GONDOR_ARCHER_BOUNTY_VALUE

	TransportSlotCount = 1
	WeaponSet
		Conditions = None 
		Weapon = PRIMARY    GondorArcherBow
	End
  	WeaponSet
  		Conditions = CLOSE_RANGE CONTESTING_BUILDING
		Weapon = PRIMARY    GondorArcherBow
  		Weapon = SECONDARY   GondorArcherBowMelee
  		OnlyAgainst = PRIMARY STRUCTURE
  	End
	
	ArmorSet
		Conditions      = None
		Armor           = GondorArcherArmor
		DamageFX        = NormalDamageFX
	End
	ArmorSet
		Conditions		= PLAYER_UPGRADE
		Armor			= GondorArcherHeavyArmor
		DamageFX		= NormalDamageFX
	End
	
	VisionRange = GONDOR_ARCHER_VISION_RANGE
	ShroudClearingRange = SHROUD_CLEAR_STANDARD

	DisplayName = OBJECT:GondorArcher
	CrushableLevel = 0  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
	CrushRevengeWeapon = RangedInfantryCrushRevenge
	CommandSet = GondorArcherCommandSet
	

	; *** AUDIO Parameters ***;

	VoiceAmbushed				= GondorArcherVoiceAmbushed		
	VoiceAttack				= GondorArcherVoiceAttack
	VoiceAttackAir				= GondorArcherVoiceAttack
	VoiceAttackCharge			= GondorArcherVoiceAttackCharge
	VoiceAttackMachine			= GondorArcherVoiceAttack	
	VoiceAttackStructure			= GondorArcherVoiceAttackBuilding
	VoiceEnterStateAttack			= GondorArcherVoiceEnterStateAttack
	VoiceEnterStateAttackCharge		= GondorArcherVoiceEnterStateAttackCharge
	VoiceEnterStateAttackMachine		= GondorArcherVoiceEnterStateAttackBuilding
	VoiceEnterStateAttackStructure		= GondorArcherVoiceEnterStateAttackBuilding
	VoiceCreated				= GondorArcherVoiceSalute			
	VoiceFullyCreated 			= GondorArcherVoiceSalute			
	VoiceMove				= GondorArcherVoiceMove
	VoiceMoveToCamp				= GondorArcherVoiceMoveCamp
	VoiceMoveWhileAttacking			= GondorArcherVoiceDisengage			
	VoiceEnterStateMove			= GondorArcherVoiceEnterStateMove
	VoiceEnterStateMoveToCamp		= GondorArcherVoiceEnterStateMoveCamp
	VoiceEnterStateMoveWhileAttacking	= GondorArcherVoiceEnterStateDisengage	
	VoicePriority				= 47
	VoiceRetreatToCastle			= GondorArcherVoiceRetreat
	VoiceEnterStateRetreatToCastle		= GondorArcherVoiceEnterStateRetreat
	VoiceSelect				= GondorArcherVoiceSelect
	VoiceSelect2				= GondorTowerGuardVoiceSelect2
	VoiceSelectBattle 			= GondorArcherVoiceSelectBattle
	VoiceGuard			= GondorArcherVoiceMove
	

	SoundImpact				= ImpactHorse

	UnitSpecificSounds
		VoiceGarrison						= GondorArcherVoiceGarrison      
		VoiceAttackUnitWebbedHumanoidWithGondorFighterInside	= GondorArcherVoiceAttackWebbedSoldier
		VoiceAttackUnitWebbedHumanoidWithGondorArcherInside	= GondorArcherVoiceAttackWebbedSoldier        
	End

	EvaEventDamagedOwner = UnitUnderAttack		;Eva event to trigger when unit is damaged

	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		MaxUpdateRangeCap = 800
		AnimationSound = Sound:BodyFallGeneric1		Animation:GUArcher_SKL.GUArcher_DIEA	Frames:40
		AnimationSound = Sound:BodyFallGeneric1		Animation:GUArcher_SKL.GUArcher_DIEB	Frames:19
		;AnimationSound = Sound:BodyFallGeneric1		Animation:GUArcher_SKL.GUArcher_DIED	Frames:53
		AnimationSound = Sound:BodyFallGeneric1		Animation:GUArcher_SKL.GUArcher_LNDA	Frames:1
		AnimationSound = Sound:BodyFallGenericNoArmor	Animation:GUArcher_SKL.GUArcher_LNDA	Frames:14
	End


	; *** ENGINEERING Parameters ***
	RadarPriority = UNIT
	KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE THROWN_OBJECT ATTACK_NEEDS_LINE_OF_SIGHT ARCHER GRAB_AND_DROP ;GRAB_AND_KILL
	
	Body = ActiveBody ModuleTag_02

		CheerRadius 	  = EMOTION_CHEER_RADIUS
		MaxHealth         = GONDOR_ARCHER_HEALTH
		MaxHealthDamaged  = GONDOR_ARCHER_HEALTH_DAMAGED
		;RecoveryTime      = GONDOR_ARCHER_HEALTH_RECOVERY_TIME
	End
	
	Behavior = AIUpdateInterface ModuleTag_03
		AutoAcquireEnemiesWhenIdle	= Yes ATTACK_BUILDINGS
		StopChaseDistance			= 642
		CanAttackWhileContained		= Yes
		AILuaEventsList				= GondorArcherFunctions		 ;; temp, Archers not afraid of trolls
		MinCowerTime				= 8000
		MaxCowerTime				= 10000
		AttackPriority				= 	AttackPriority_Archer
	End
	
	LocomotorSet
		Locomotor = HumanLocomotor
		Condition = SET_NORMAL
		Speed     = NORMAL_GOOD_INFANTRY_MEMBER_SPEED	
	End

	LocomotorSet
		Locomotor = HumanWanderLocomotor
		Condition = SET_WANDER 
		Speed     = NORMAL_GOOD_INFANTRY_MEMBER_SPEED	
	End

	Behavior = PhysicsBehavior ModuleTag_04
		GravityMult = 1.0
	End

	Behavior = SlowDeathBehavior ModuleTag_05
		DeathTypes = ALL 
		SinkDelay = 3000
		SinkRate = 0.600     ; in Dist/Sec
		DestructionDelay = 12000
            	Sound = INITIAL HumanVoiceDie; GondorArcherVoiceDie
	End
	
	Behavior = SquishCollide ModuleTag_06
		;nothing
	End
	
	; GondorArcher
	Behavior = HordeMemberCollide ModuleTag_HMC
		;nothing
	End
	
	Behavior = BezierProjectileBehavior ModuleTag_07 ; Module starts asleep, and wakes up when thrown.
		; To tweak a Bezier path
		FirstHeight = 24  ; Height of Bezier control points above highest intervening terrain
		SecondHeight = 24
		FirstPercentIndent = 30% ; Percentage of shot distance control points are placed
		SecondPercentIndent = 70%
		TumbleRandomly = Yes

		CrushStyle = Yes ; I don't detonate, I just hit
		DieOnImpact = Yes
		BounceCount = 1   ; When I hit the ground, I'll arc again
		BounceDistance = 40 ; this far
		BounceFirstHeight = 24  ; Height of Bezier control points above highest intervening terrain
		BounceSecondHeight = 24
		BounceFirstPercentIndent = 20% ; Percentage of shot distance control points are placed
		BounceSecondPercentIndent = 80%

		GroundHitFX       = FX_ThrownRockGroundHit
		GroundBounceFX    = FX_ThrownRockBounceHit
	End

	
	Behavior = ArmorUpgrade ModuleTag_ArmorUpgrade
		TriggeredBy = Upgrade_GondorHeavyArmor
	End

	; Switch arrows being displayed.
	Behavior = SubObjectsUpgrade ModuleTag_FireArrowSwapUpgrade
		TriggeredBy		= Upgrade_GondorFireArrows
		ShowSubObjects	= FireArowTip
	End	
	
	Behavior = SubObjectsUpgrade ModuleTag_HeavyArmorUpgrade
		TriggeredBy = Upgrade_GondorHeavyArmor
		UpgradeTexture	= GUArcher.tga 0 GUArcher_HA.tga
		RecolorHouse	= Yes
		ExcludeSubobjects = FireArowTip
	End
	
	; Fire arrow upgrade
	Behavior = WeaponSetUpgrade ModuleTag_FireArrowParticlesAndLegalityUpgrade
		TriggeredBy		= Upgrade_GondorFireArrows
	End	
	
	; Tie into LargeGroupAudio system
	Behavior = LargeGroupAudioUpdate ModuleTag_LGAU
		Key = Human Unit Infantry Gondor_Archer
	End
	
  	Behavior = DualWeaponBehavior ModuleTag_09
  		SwitchWeaponOnCloseRangeDistance = 40
  	End

	Behavior = HitReactionBehavior HitReactionBehaviorModuleTag
		HitReactionLifeTimer1 = 1993 ; level 1 (light  damage)  hit reaction animations in ms
		HitReactionLifeTimer2 = 1993 ; level 2 (medium damage)  hit reaction animations in ms
		HitReactionLifeTimer3 = 1993 ; level 3 (heavy  damage)  hit reaction animations in ms

		HitReactionThreshold1 = 0.0   ; level 1 (light  damage) threshold trigger
		HitReactionThreshold2 = 25.0  ; level 2 (medium damage) threshold trigger
		HitReactionThreshold3 = 50.0  ; level 3 (heavy  damage) threshold trigger

		FastHitsResetReaction = No    ;If set -- when hits occur faster than the reaction animations, it will reset the animation. (like getting riddled with machine gun bullets)
	End
	
	Geometry = CYLINDER
	GeometryMajorRadius = 8.0
	GeometryMinorRadius = 8.0
	GeometryHeight = 19.2
	GeometryIsSmall = Yes

    Shadow = SHADOW_DECAL
    ShadowSizeX = 19;
    ShadowSizeY = 19;
    ShadowTexture = ShadowI;
End

;------------------------------------------------------------------------------


;------------------------------------------------------------------------------
; aka WorkerGondor, Peasant, Laborer
Object GondorWorker
	; *** ART Parameters ***

SelectPortrait	= UPGondor_Builder
	Draw = W3DScriptedModelDraw ModuleTag_01
	  
	  OkToChangeModelColor = Yes
	  
		DefaultModelConditionState
			Model               = GUWorker_SKN
			Skeleton            = GUWorker_SKL
		End

		IdleAnimationState
			Animation           = IDLA
				AnimationName     = GUWorker_IDLA
				AnimationMode     = ONCE
			End
		End

		AnimationState          = DYING DEATH_1
			Animation
				AnimationName   = GUWorker_DIEA
				AnimationMode   = ONCE
			End
		End
	
		AnimationState          = DYING DEATH_2
			Animation
				AnimationName   = GUWorker_IDLA
				AnimationMode   = LOOP
			End
		End
	
		AnimationState        = MOVING
			Animation           = WLKA
				AnimationName     = GUWorker_WLKA
				AnimationMode     = LOOP
				AnimationSpeedFactorRange = 1.4 1.4
			End
			Flags               = RANDOMSTART
			;ParticleSysBone     = None InfantryDustTrails
		End


		AnimationState = ACTIVELY_CONSTRUCTING DEPLOYED ; building from too far to smack his hammer
			Animation				=	Stand
				AnimationName		=	GUWorker_IDLA
				AnimationMode		=	LOOP
			End
		End


		AnimationState        = ACTIVELY_CONSTRUCTING
			Animation           = WRKA
				AnimationName     = GUWorker_WRKA
				AnimationMode     = ONCE
				AnimationPriority	=	30
				AnimationSpeedFactorRange = 0.9 1.1
			End
			Animation           = WRKA						; In twice so that we can play it twice in a row.
				AnimationName     = GUWorker_WRKA
				AnimationMode     = ONCE
				AnimationPriority	=	30
				AnimationSpeedFactorRange = 0.9 1.1
			End
			Animation           = WRKA2
				AnimationName     = GUWorker_WRKA
				AnimationMode     = ONCE
				AnimationPriority	=	5
				AnimationSpeedFactorRange = 0.9 1.1
			End
			Animation           = WRKB
				AnimationName     = GUWorker_WRKB
				AnimationMode     = ONCE
				AnimationPriority	=	5
				AnimationSpeedFactorRange = 0.9 1.1
			End
			Flags					=	RESTART_ANIM_WHEN_COMPLETE
		End
		
;;------------- EMOTIONS ---------------------------------------------
		
;;======= SHOW NO EMOTION.

;;------------- SELECTED ---------------------------------------------

;;--------------------------------------------------------------------
	End	

	; ***DESIGN parameters ***
	Side = Gondor
	EditorSorting = UNIT
	ThreatLevel = 1.0
	TransportSlotCount = 1
	ArmorSet
		Conditions      = None
		Armor           = SoldierArmor
		DamageFX        = NormalDamageFX
	End
	BuildCost   = GONDOR_PEASANT_BUILDCOST
	BuildTime   = GONDOR_PEASANT_BUILDTIME
	BountyValue = GONDOR_PEASANT_BOUNTY_VALUE
	VisionRange = GONDOR_PEASANT_VISION_RANGE
	DisplayName = OBJECT:GondorWorker
	CrushableLevel = 0  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
	CommandPoints = 0
	
;	CommandSet = GondorWorkerCommandSet
	CommandSet = EmptyCommandSet


	; *** AUDIO Parameters ***;

	VoicePriority				= 12

	SoundImpact = ImpactHorse

	EvaEventDamagedOwner = UnitUnderAttack		;Eva event to trigger when unit is damaged
	;EvaEventDieOwner = WorkerDie 			;Eva event to trigger on unit's death.
	;EvaEventDamagedOwner = WorkerDamaged 		;Eva event to trigger when unit is damaged

	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		MaxUpdateRangeCap = 800
		AnimationSound = Sound: GondorMasonHammering Animation:GUWorker_SKL.GUWorker_WRKA Frames: 4 
	End


	; *** ENGINEERING Parameters ***

	RadarPriority = UNIT
	KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE THROWN_OBJECT DOZER GRAB_AND_DROP SWARM_DOZER
	
	Body = ActiveBody ModuleTag_02
		MaxHealth         = 999999                  ;BALANCE Townsman Health huge so they can't be killed.
		MaxHealthDamaged  = 999999
		;RecoveryTime      = GONDOR_PEASANT_HEALTH_RECOVERY_TIME
	End
	
	Behavior = WorkerAIUpdate ModuleTag_10
		RepairHealthPercentPerSecond  = 0.3%    ; % of max health to repair each second
		BoredTime                     = 1000  ; in milliseconds
		BoredRange                    = 120   ; when bored, we look this far away to do something 
		SpecialContactPoints		   = Repair
	End

	LocomotorSet
		Locomotor = HumanLocomotor
		Condition = SET_NORMAL 
		Speed     = NORMAL_GOOD_INFANTRY_MEMBER_SPEED	
	End

	LocomotorSet
		Locomotor = HumanWanderLocomotor
		Condition = SET_WANDER
		Speed     = NORMAL_GOOD_INFANTRY_MEMBER_SPEED	
	End
	
	Behavior = PhysicsBehavior ModuleTag_04
		GravityMult = 1.0
	End
	
	Behavior = SlowDeathBehavior ModuleTag_05
		DeathTypes = ALL -FADED
		DeathFlags = DEATH_1
		SinkDelay = 3000
		SinkRate = 1.20     ; in Dist/Sec
		DestructionDelay = 6000
	End
	
	Behavior = SlowDeathBehavior ModuleTag_ConstructionDeath
		DeathTypes = NONE +FADED
		DeathFlags = DEATH_2
		FadeDelay = 500
		FadeTime = 3500
		DestructionDelay = 4000
	End
	
	Behavior = SquishCollide ModuleTag_06
		;nothing
	End
	
	Behavior = BezierProjectileBehavior ModuleTag_08 ; Module starts asleep, and wakes up when thrown.
		; To tweak a Bezier path
		FirstHeight = 24  ; Height of Bezier control points above highest intervening terrain
		SecondHeight = 24
		FirstPercentIndent = 30% ; Percentage of shot distance control points are placed
		SecondPercentIndent = 70%
		TumbleRandomly = Yes

		CrushStyle = Yes ; I don't detonate, I just hit
		DieOnImpact = Yes
		BounceCount = 1   ; When I hit the ground, I'll arc again
		BounceDistance = 40 ; this far
		BounceFirstHeight = 16  ; Height of Bezier control points above highest intervening terrain
		BounceSecondHeight = 16
		BounceFirstPercentIndent = 20% ; Percentage of shot distance control points are placed
		BounceSecondPercentIndent = 80%

		GroundHitFX       = FX_ThrownRockGroundHit
		GroundBounceFX    = FX_ThrownRockBounceHit
	End

	Geometry = CYLINDER
	GeometryMajorRadius = 8.0
	GeometryMinorRadius = 8.0
	GeometryHeight = 19.2
	GeometryIsSmall = Yes
	Shadow = SHADOW_DECAL
  Shadow = SHADOW_DECAL
  ShadowSizeX = 19;
  ShadowSizeY = 19;
  ShadowTexture = ShadowI;
End

ChildObject GondorWorkerNoSelect GondorWorker
	KindOf = PRELOAD CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER THROWN_OBJECT DOZER GRAB_AND_DROP SWARM_DOZER NOT_AUTOACQUIRABLE
	ImmuneToShockwave = Yes
End

;------------------------------------------------------------------------------
; aka Wood Cutter
Object GondorWoodCutter
	; *** ART Parameters ***

	Draw = W3DScriptedModelDraw ModuleTag_01

		DefaultModelConditionState
			Model               = GUWorker_SKN
			Skeleton            = GUWorker_SKL
		End

		IdleAnimationState
			Animation           = IDLA
				AnimationName     = GUWorker_IDLA
				AnimationMode     = ONCE
			End
		End
	
		AnimationState        = MOVING
			Animation           = WLKA
				AnimationName     = GUWorker_WLKA
				AnimationMode     = LOOP
				AnimationSpeedFactorRange = 1.4 1.4
			End
			Flags               = RANDOMSTART
			;ParticleSysBone     = None InfantryDustTrails
		End

		AnimationState        = ACTIVELY_CONSTRUCTING
			Animation           = WRKA
				AnimationName     = GUWorker_WRKA
				AnimationMode     = LOOP
			End
		End
;;------------- EMOTIONS ---------------------------------------------

;;======= SHOW NO EMOTION.

;;------------- SELECTED ---------------------------------------------

;;--------------------------------------------------------------------
	End
	

	; ***DESIGN parameters ***
	Side = Gondor
	EditorSorting = UNIT
	ThreatLevel = 1.0
	TransportSlotCount = 1
	ArmorSet
		Conditions      = None
		Armor           = NoArmor
		DamageFX        = NormalDamageFX
	End
	VisionRange = 120.0
	DisplayName = OBJECT:GondorWoodCutter
	CrushableLevel = 0  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
	CommandPoints = 1
	
	CommandSet = EmptyCommandSet


	; *** AUDIO Parameters ***;

	SoundImpact		= ImpactHorse
	
	EvaEventDamagedOwner = UnitUnderAttack		;Eva event to trigger when unit is damaged


	; *** ENGINEERING Parameters ***

	RadarPriority = UNIT
	KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE THROWN_OBJECT DOZER GRAB_AND_DROP
	
	Body = ActiveBody ModuleTag_02
		MaxHealth         = 10                  ;BALANCE WoodCutter Health
		MaxHealthDamaged  = 5
		;RecoveryTime      = 5000
	End
	
	Behavior = WorkerAIUpdate ModuleTag_10
		RepairHealthPercentPerSecond  = 0.3%    ; % of max health to repair each second
		BoredTime                     = 5000  ; in milliseconds
		BoredRange                    = 120   ; when bored, we look this far away to do something 
		SpecialContactPoints		   = Repair
	End

	LocomotorSet
		Locomotor = HumanLocomotor
		Condition = SET_NORMAL 
		Speed     = 32
	End

	LocomotorSet
		Locomotor = HumanWanderLocomotor
		Condition = SET_WANDER
		Speed     = 32
	End
	
	Behavior = PhysicsBehavior ModuleTag_04
		GravityMult = 1.0
	End
	
	Behavior = SlowDeathBehavior ModuleTag_05
		DeathTypes = ALL 
		SinkDelay = 3000
		SinkRate = 0.40     ; in Dist/Sec
		DestructionDelay = 8000
	End
	
	Behavior = SquishCollide ModuleTag_06
		;nothing
	End
	
	Behavior = BezierProjectileBehavior ModuleTag_08 ; Module starts asleep, and wakes up when thrown.
		; To tweak a Bezier path
		FirstHeight = 24  ; Height of Bezier control points above highest intervening terrain
		SecondHeight = 24
		FirstPercentIndent = 30% ; Percentage of shot distance control points are placed
		SecondPercentIndent = 70%
		TumbleRandomly = Yes

		CrushStyle = Yes ; I don't detonate, I just hit
		DieOnImpact = Yes
		BounceCount = 1   ; When I hit the ground, I'll arc again
		BounceDistance = 40 ; this far
		BounceFirstHeight = 16  ; Height of Bezier control points above highest intervening terrain
		BounceSecondHeight = 16
		BounceFirstPercentIndent = 20% ; Percentage of shot distance control points are placed
		BounceSecondPercentIndent = 80%

		GroundHitFX       = FX_ThrownRockGroundHit
		GroundBounceFX    = FX_ThrownRockBounceHit
	End

    ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		MaxUpdateRangeCap = 800
		AnimationSound = Sound: GondorMasonHammering Animation:GUWoodCutter_SKL.GUWoodCutter_WRKA Frames: 4 
    End
	Geometry = CYLINDER
	GeometryMajorRadius = 8.0
	GeometryMinorRadius = 8.0
	GeometryHeight = 19.2
	GeometryIsSmall = Yes
	Shadow = SHADOW_DECAL
  Shadow = SHADOW_DECAL
  ShadowSizeX = 19;
  ShadowSizeY = 19;
  ShadowTexture = ShadowI;
End


;-----------------------------------------------------------------------------------------
; Webbed humanoid that does nothing except wait until the player comes along to kill them.
; Once killed, the collapse death will play and at the end, will spawn a fresh GondorFighter
;-----------------------------------------------------------------------------------------
Object WebbedHumanoidWithGondorFighterInside
	; *** ART Parameters ***

	SelectPortrait         = SP_Gondor_Swordman

	Draw = W3DScriptedModelDraw ModuleTag_01
		OkToChangeModelColor = Yes
		
		DefaultModelConditionState
			Model               = CUWebdVctm_SKN
			Skeleton            = CUWebdVctm_SKL
			ParticleSysBone     = None WitchKingPoison
		End
   
		IdleAnimationState
			StateName				= STATE_Idle
			Animation				= WIGA	;Medium wiggle
				AnimationName       = CUWebdVctm_WIGA
				AnimationMode       = ONCE
			End
			Animation				= WIGB	;Subtle wiggle
				AnimationName       = CUWebdVctm_WIGB
				AnimationMode       = ONCE
			End
			Animation				= WIGC	;Violent wiggle
				AnimationName       = CUWebdVctm_WIGC
				AnimationMode       = ONCE
			End
			Flags               = RESTART_ANIM_WHEN_COMPLETE
			;ParticleSysBone     = ROOTTRANSFORM PLACEHOLDER_SpiderWeb FollowBone:no
		End
		
		ModelConditionState DYING
			Model               = GUMAArms_SKN
			Skeleton            = GUMAArms_SKL
		End
				
		TransitionState       = TRANS_IdleToDying
			Animation           = LNDA
				AnimationName     = GUMAArms_LNDA
				AnimationMode     = ONCE
			End
		End

		AnimationState        = DYING
			Animation           = GTPD
				AnimationName     = GUMAArms_GTPD
				AnimationMode     = ONCE
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Idle" then CurDrawableSetTransitionAnimState("TRANS_IdleToDying") end
			EndScript
		End
	End


	;------------- AUDIO ----------------

	SoundAmbient = HumanWebbedAmbientLoop

	
	; ***DESIGN parameters ***
	Side = Gondor
	EditorSorting = UNIT
	ThreatLevel = 0.0
	CommandPoints = 0
	CrushableLevel = 2 ;What am I?: 0 = for infantry, 1 = for trees, 2 = general vehicles
	DisplayName = OBJECT:GondorFighter

	ArmorSet
		Conditions      = None
		Armor           = WebbedUnitArmor
		DamageFX        = NormalDamageFX
	End
	
	; *** ENGINEERING Parameters ***
	RadarPriority = UNIT
	KindOf = PRELOAD CAN_CAST_REFLECTIONS INFANTRY NOT_AUTOACQUIRABLE WEBBED
	
	;Total hack to get unit to work. STRUCTURE units still have problems getting targeted.	
	Behavior = AIUpdateInterface ModuleTag_03
			AILuaEventsList				=	GondorFighterFunctions
	End
	
	Behavior = PhysicsBehavior ModuleTag_04
		GravityMult = 1.0
	End
	LocomotorSet
		Locomotor     = WebbedLocomotor
		Condition     = SET_NORMAL
		Speed         = 0
	End
	;End hack

	Body = ActiveBody ModuleTag_02
		MaxHealth         = 200                  ;BALANCE Man at Arms Health
		MaxHealthDamaged  = 100
		;RecoveryTime      = 5000
	End
	
	Behavior = SlowDeathBehavior ModuleTag_05
		DeathTypes = ALL
		DestructionDelay = 3433 ;Matches length of animations of TRANS_IdleToDying + DYING states
		OCL = FINAL OCL_CreateGondorFighter
	End

	Behavior = FXListDie ModuleTag_06
   		DeathTypes = ALL
   		DeathFX = FX_WebBreak
	End

	Geometry = CYLINDER
	GeometryMajorRadius = 8.0
	GeometryMinorRadius = 8.0
	GeometryHeight = 19.2
	GeometryIsSmall = No

    Shadow = SHADOW_DECAL
    ShadowSizeX = 19;
    ShadowSizeY = 19;
    ShadowTexture = ShadowI;

End

;-----------------------------------------------------------------------------------------
; Webbed humanoid that does nothing except wait until the player comes along to kill them.
; Once killed, the collapse death will play and at the end, will spawn a fresh GondorArcher
;-----------------------------------------------------------------------------------------
Object WebbedHumanoidWithGondorArcherInside
	; *** ART Parameters ***

	SelectPortrait         = SP_Gondor_Swordman

	Draw = W3DScriptedModelDraw ModuleTag_01
		OkToChangeModelColor = Yes
		
		DefaultModelConditionState
			Model               = CUWebdVctm_SKN
			Skeleton            = CUWebdVctm_SKL
			ParticleSysBone     = None WitchKingPoison
		End
   
		IdleAnimationState
			StateName				= STATE_Idle
			Animation				= WIGA	;Medium wiggle
				AnimationName       = CUWebdVctm_WIGA
				AnimationMode       = ONCE
			End
			Animation				= WIGB	;Subtle wiggle
				AnimationName       = CUWebdVctm_WIGB
				AnimationMode       = ONCE
			End
			Animation				= WIGC	;Violent wiggle
				AnimationName       = CUWebdVctm_WIGC
				AnimationMode       = ONCE
			End
			Flags               = RESTART_ANIM_WHEN_COMPLETE
		End
		
		ModelConditionState DYING
			Model               = GUArcher_SKN
			Skeleton            = GUArcher_SKL
		End

		TransitionState       = TRANS_IdleToDying
			Animation           = LNDA
				AnimationName     = GUArcher_LNDA
				AnimationMode     = ONCE
			End
		End

		AnimationState        = DYING
			Animation           = GTPA
				AnimationName     = GUArcher_GTPA
				AnimationMode     = ONCE
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Idle" then CurDrawableSetTransitionAnimState("TRANS_IdleToDying") end
			EndScript
		End
	End


	;------------- AUDIO ----------------

	SoundAmbient = HumanWebbedAmbientLoop

	
	; ***DESIGN parameters ***
	Side = Gondor
	EditorSorting = UNIT
	ThreatLevel = 0.0
	CommandPoints = 0
	CrushableLevel = 2 ;What am I?: 0 = for infantry, 1 = for trees, 2 = general vehicles

	DisplayName = OBJECT:GondorArcher

	ArmorSet
		Conditions      = None
		Armor           = WebbedUnitArmor
		DamageFX        = NormalDamageFX
	End
	
	; *** ENGINEERING Parameters ***
	RadarPriority = UNIT
	KindOf = PRELOAD CAN_CAST_REFLECTIONS INFANTRY NOT_AUTOACQUIRABLE WEBBED
	
	;Total hack to get unit to work. STRUCTURE units still have problems getting targeted.	
	Behavior = AIUpdateInterface ModuleTag_03
	AILuaEventsList				= GondorArcherFunctions
	End
	
	Behavior = PhysicsBehavior ModuleTag_04
		GravityMult = 1.0
	End
	LocomotorSet
		Locomotor     = WebbedLocomotor
		Condition     = SET_NORMAL
		Speed         = 0
	End
	;End hack

	Body = ActiveBody ModuleTag_02
		MaxHealth         = 200                  ;BALANCE Health
		MaxHealthDamaged  = 100
		;RecoveryTime      = 5000
	End
	
	Behavior = SlowDeathBehavior ModuleTag_05
		DeathTypes = ALL
		DestructionDelay = 5700 ;Matches length of animations of TRANS_IdleToDying + DYING states
		OCL = FINAL OCL_CreateGondorArcher
	End

	Behavior = FXListDie ModuleTag_06
   		DeathTypes = ALL
   		DeathFX = FX_WebBreak
	End

	Geometry = CYLINDER
	GeometryMajorRadius = 8.0
	GeometryMinorRadius = 8.0
	GeometryHeight = 19.2
	GeometryIsSmall = No

    Shadow = SHADOW_DECAL
    ShadowSizeX = 19;
    ShadowSizeY = 19;
    ShadowTexture = ShadowI;

End


;------------------------------------------------------------------------------
; aka Ranger NoStealth
Object GondorRangerNoStealth

	; *** ART Parameters ***

	SelectPortrait         = UPGondor_Ranger
;	SelectPortrait         = SP_Gondor_Swordman

	Draw = W3DHordeModelDraw ModuleTag_01
		OkToChangeModelColor = Yes	
		StaticModelLODMode = Yes
		
		; specify options for static LODs
		LodOptions	= LOW
			AllowMultipleModels		=	ALLOW_MULTIPLE_MODELS_LOW
			MaxRandomTextures		=	MAX_RANDOM_TEXTURES_LOW
			MaxRandomAnimations		=	MAX_RANDOM_ANIMATIONS_LOW
			MaxAnimFrameDelta		=	MAX_ANIM_FRAME_DELTA_LOW
		End
		
		LodOptions	= MEDIUM
			AllowMultipleModels		=	ALLOW_MULTIPLE_MODELS_MED
			MaxRandomTextures		=	MAX_RANDOM_TEXTURES_MED
			MaxRandomAnimations		=	MAX_RANDOM_ANIMATIONS_MED
			MaxAnimFrameDelta		=	MAX_ANIM_FRAME_DELTA_MED
		End
		
		LodOptions	= HIGH
			AllowMultipleModels		=	ALLOW_MULTIPLE_MODELS_HIGH
			MaxRandomTextures		=	MAX_RANDOM_TEXTURES_HIGH
			MaxRandomAnimations		=	MAX_RANDOM_ANIMATIONS_HIGH
			MaxAnimFrameDelta		=	MAX_ANIM_FRAME_DELTA_HIGH
		End

;;=================== MODELS ============================================================
; --------- With Bow ------------
; Bah, must come first even though all the other bow stuff is below the sword stuff
		DefaultModelConditionState
			Model							= GURanger_SKNM
			WeaponLaunchBone				= PRIMARY ARROW
		End

		ModelConditionState				WEAPONSET_PLAYER_UPGRADE
			Model							= GURanger_SKNM
			WeaponLaunchBone				= PRIMARY ARROW
			WeaponLaunchBone				= SECONDARY ARROWNOCK	; when upgraded to flaming arrow
			ParticleSysBone					= FireArowTip arrowFire FollowBone:Yes
			ParticleSysBone					= FireArowTip arrowFire FollowBone:Yes
		End
		
; -------- With Sword ------------

		ModelConditionState				WEAPONSET_TOGGLE_1
			Model							= GURanger_SKNM
		End

;;================== ANIMATIONS ==============================================================		
; -------- Falling and flying and dying ----------
		
		AnimationState						= STUNNED_STANDING_UP 
			Animation						= GTPA
				AnimationName				= GURanger_SKL.GURanger_GTPA
				AnimationMode				= ONCE
				AnimationSpeedFactorRange	= 0.7 1.1
			End
		End
		
		AnimationState						= PASSENGER
			Animation						= FLLA
				AnimationName				= GURanger_SKL.GURanger_FLLA
				AnimationMode				= LOOP
			End
			Flags							= RANDOMSTART
			StateName						= Bow
		End
		
		AnimationState						= THROWN_PROJECTILE
			Animation						= FLYA
				AnimationName				= GURanger_SKL.GURanger_FLYA
				AnimationMode				= LOOP
			End
		End

		AnimationState						= DYING SPLATTED
			Animation						= Splattered
				AnimationName				= GURanger_SKL.GURanger_LNDA
				AnimationMode				= ONCE
			End
		End

		AnimationState						= STUNNED 
			Animation						= Stun
				AnimationName				= GURanger_SKL.GURanger_LNDA
				AnimationMode				= ONCE
			End
		End

		AnimationState						= DYING
			Animation						= Die
				AnimationName				= GURanger_SKL.GURanger_DIEA
				AnimationMode				= ONCE
			End
		End
		
		
		
; --------- With Sword ------------
	
;		AnimationState						= MOVING DAMAGED WEAPONSET_TOGGLE_1
;			Animation						= STATE_Damaged_Walk_Sword
;				AnimationName				= GURanger_SKL.GURanger_IWKA
;				AnimationMode				= LOOP
;			End
;			Flags							= RANDOMSTART
;			StateName						= Sword
;			;ParticleSysBone				= None InfantryDustTrails
;			BeginScript
;				CurDrawableHideSubObject("arrow")
;				CurDrawableHideSubObject("arrownock")
;				Prev = CurDrawablePrevAnimationState()
;				if Prev == "Bow" then CurDrawableSetTransitionAnimState("TransBowToSword") end
;			EndScript
;		End
		
;		AnimationState						= MOVING ATTACKING WEAPONSET_TOGGLE_1
;			
;			StateName						= STATE_Run_Sword
;			
;			Animation						= RunWithSword
;				AnimationName				= GURanger_SKL.GURanger_RUNB
;				AnimationMode				= LOOP
;			End
;			
;			Flags							= RANDOMSTART
;			;ParticleSysBone				= None InfantryDustTrails
;			
;			BeginScript
;				CurDrawableHideSubObject("arrow")
;				CurDrawableHideSubObject("arrownock")
;				Prev = CurDrawablePrevAnimationState()
;				if Prev == "Bow" then CurDrawableSetTransitionAnimState("TransBowToSword") end
;			EndScript
;		End
		
		AnimationState						= MOVING WEAPONSET_TOGGLE_1
		
			StateName						= STATE_Run_Sword
		
			Animation						= RunWithSword
				AnimationName				= GURanger_SKL.GURanger_RUNB
				AnimationMode				= LOOP
			End

			BeginScript
				CurDrawableHideSubObject("arrow")
				CurDrawableHideSubObject("arrownock")
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Run_Bow" then CurDrawableSetTransitionAnimState("TRANS_Bow_To_Sword") end
				if Prev == "STATE_Idle_Bow" then CurDrawableSetTransitionAnimState("TRANS_Bow_To_Sword") end
			EndScript
		End

		AnimationState						= FIRING_OR_PREATTACK_A WEAPONSET_TOGGLE_1
		
			StateName						= STATE_Idle_Sword ;;this is what they look like at the end of the animation
		
			Animation						= AttackWithSwordA
				AnimationName				= GURanger_SKL.GURanger_ATKA
				AnimationMode				= ONCE
				UseWeaponTiming				= Yes
			End
			Animation						= AttackWithSwordB
				AnimationName				= GURanger_SKL.GURanger_ATKB
				AnimationMode				= ONCE
				UseWeaponTiming				= Yes
			End

			BeginScript
				CurDrawableHideSubObject("arrow")
				CurDrawableHideSubObject("arrownock")
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Run_Bow" then CurDrawableSetTransitionAnimState("TRANS_Bow_To_Sword") end
				if Prev == "STATE_Idle_Bow" then CurDrawableSetTransitionAnimState("TRANS_Bow_To_Sword") end
			EndScript
		End

		AnimationState						= DYING WEAPONSET_TOGGLE_1
		
			StateName						= STATE_Dead_Sword
			
			Animation						= DieWithSword
				AnimationName				= GURanger_SKL.GURanger_DIEB
				AnimationMode				= ONCE
			End

			BeginScript
				CurDrawableHideSubObject("arrow")
				CurDrawableHideSubObject("arrownock")
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Run_Bow" then CurDrawableSetTransitionAnimState("TRANS_Bow_To_Sword") end
				if Prev == "STATE_Idle_Bow" then CurDrawableSetTransitionAnimState("TRANS_Bow_To_Sword") end
			EndScript
		End
		
	

;---- Bow --------------------------------

		;;---- Bow Idle Animation State
		
		
		AnimationState						= MOVING BACKING_UP WEAPONSET_PLAYER_UPGRADE
			
			StateName						= STATE_Run_Bow
		
			ShareAnimation					= Yes
			Animation						= BackingUp
				AnimationName				= GURanger_SKL.GURanger_RUNC
				AnimationMode				= LOOP
			End
			
			Flags							= RANDOMSTART
			
			BeginScript
				CurDrawableHideSubObject("arrow")
				CurDrawableShowSubObject("arrownock")
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Run_Sword" then CurDrawableSetTransitionAnimState("TRANS_Sword_To_Bow") end
				if Prev == "STATE_Idle_Sword" then CurDrawableSetTransitionAnimState("TRANS_Sword_To_Bow") end
			EndScript
		End

		AnimationState						= MOVING DAMAGED WEAPONSET_PLAYER_UPGRADE
			
			StateName						= STATE_Damaged_Walk_Bow
		
			ShareAnimation					= Yes
			Animation						= InjuredWalk
				AnimationName				= GURanger_SKL.GURanger_IWKA
				AnimationMode				= LOOP
			End
			
			Flags							= RANDOMSTART
			
			BeginScript
				CurDrawableHideSubObject("arrow")
				CurDrawableShowSubObject("arrownock")
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Run_Sword" then CurDrawableSetTransitionAnimState("TRANS_Sword_To_Bow") end
				if Prev == "STATE_Idle_Sword" then CurDrawableSetTransitionAnimState("TRANS_Sword_To_Bow") end
			EndScript
		End
		
		AnimationState						= MOVING PANICKING WEAPONSET_PLAYER_UPGRADE
		
			StateName						= STATE_Run_Bow
		
			ShareAnimation					= Yes
			Animation						= RUNM
				AnimationName				= GURanger_SKL.GURanger_MFDA
				AnimationMode				= LOOP
			End
			
			Flags							= RANDOMSTART
			
			BeginScript
				CurDrawableHideSubObject("arrow")
				CurDrawableShowSubObject("arrownock")
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Run_Sword" then CurDrawableSetTransitionAnimState("TRANS_Sword_To_Bow") end
				if Prev == "STATE_Idle_Sword" then CurDrawableSetTransitionAnimState("TRANS_Sword_To_Bow") end
			EndScript
		End
		
		AnimationState						= MOVING WEAPONSET_PLAYER_UPGRADE
			
			StateName						= STATE_Run_Bow
		
			ShareAnimation					= Yes
			Animation						= Run
				AnimationName				= GURanger_SKL.GURanger_RUNA
				AnimationMode				= LOOP
                AnimationSpeedFactorRange	= .7 .7 ;
			End
			
			Flags							= RANDOMSTART
			
			BeginScript
				CurDrawableHideSubObject("arrow")
				CurDrawableShowSubObject("arrownock")
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Run_Sword" then CurDrawableSetTransitionAnimState("TRANS_Sword_To_Bow") end
				if Prev == "STATE_Idle_Sword" then CurDrawableSetTransitionAnimState("TRANS_Sword_To_Bow") end
			EndScript
		End
		
		AnimationState						= MOVING BACKING_UP
			
			StateName						= STATE_Run_Bow
		
			ShareAnimation					= Yes
			Animation						= BackingUp
				AnimationName				= GURanger_SKL.GURanger_RUNC
				AnimationMode				= LOOP
			End
			
			Flags							= RANDOMSTART  
			
			BeginScript
				CurDrawableShowSubObject("arrow")
				CurDrawableHideSubObject("arrownock")
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Run_Sword" then CurDrawableSetTransitionAnimState("TRANS_Sword_To_Bow") end
				if Prev == "STATE_Idle_Sword" then CurDrawableSetTransitionAnimState("TRANS_Sword_To_Bow") end
			EndScript
		End

;		AnimationState						= MOVING DAMAGED
;			
;			StateName						= STATE_Damaged_Walk_Bow
;		
;			ShareAnimation					= Yes
;			Animation						= InjuredWalk
;				AnimationName				= GURanger_SKL.GURanger_IWKA
;				AnimationMode				= LOOP
;			End
;			
;			Flags							= RANDOMSTART
;			
;			BeginScript
;				CurDrawableShowSubObject("arrow")
;				CurDrawableHideSubObject("arrownock")
;				Prev = CurDrawablePrevAnimationState()
;				if Prev == "STATE_Run_Sword" then CurDrawableSetTransitionAnimState("TRANS_Sword_To_Bow") end
;				if Prev == "STATE_Idle_Sword" then CurDrawableSetTransitionAnimState("TRANS_Sword_To_Bow") end
;			EndScript
;		End
		
		AnimationState						= MOVING PANICKING
		
			StateName						= STATE_Run_Bow
		
			ShareAnimation					= Yes
			Animation						= RUNM
				AnimationName				= GURanger_SKL.GURanger_MFDA
				AnimationMode				= LOOP
			End
			
			Flags							= RANDOMSTART
			
			BeginScript
				CurDrawableShowSubObject("arrow")
				CurDrawableHideSubObject("arrownock")
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Run_Sword" then CurDrawableSetTransitionAnimState("TRANS_Sword_To_Bow") end
				if Prev == "STATE_Idle_Sword" then CurDrawableSetTransitionAnimState("TRANS_Sword_To_Bow") end
			EndScript
		End
		
		AnimationState						= MOVING
			
			StateName						= STATE_Run_Bow
		
			ShareAnimation					= Yes
			Animation						= Run
				AnimationName				= GURanger_SKL.GURanger_RUNA
				AnimationMode				= LOOP
                AnimationSpeedFactorRange	= .7 .7 ;
			End
			
			Flags							= RANDOMSTART
			
			BeginScript
				CurDrawableShowSubObject("arrow")
				CurDrawableHideSubObject("arrownock")
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Run_Sword" then CurDrawableSetTransitionAnimState("TRANS_Sword_To_Bow") end
				if Prev == "STATE_Idle_Sword" then CurDrawableSetTransitionAnimState("TRANS_Sword_To_Bow") end
			EndScript
		End

;---------------------------------------------------
		;New style firing
		AnimationState						= PREATTACK_A 
		
			StateName						= STATE_Firing
			
			Animation						= ReadyToDrawn
				AnimationName				= GURanger_SKL.GURanger_ATKD1
				AnimationMode				= ONCE
;				UseWeaponTiming				= Yes
				AnimationBlendTime			= 0
			End
		End

		AnimationState						= FIRING_A
		
			StateName						= STATE_Firing
			
			Animation						= OneFrameOfShooting
				AnimationName				= GURanger_SKL.GURanger_ATKD2
				AnimationMode				= MANUAL
			End
		End

		AnimationState						= RELOADING_A 
		
			StateName						= STATE_Firing
			
			Animation						= LooseReloadDraw
				AnimationName				= GURanger_SKL.GURanger_ATKD2
				AnimationMode				= ONCE
;				UseWeaponTiming				= Yes
			End
		End
		
		AnimationState						= CONTINUOUS_FIRE_MEAN
		
			StateName						= STATE_Firing
			
			Animation						= HangFrameWhileCoasting
				AnimationName				= GURanger_SKL.GURanger_ATKD2
				AnimationMode				= MANUAL
			End
		End
		
		AnimationState						= CONTINUOUS_FIRE_SLOW
		
			StateName						= STATE_Idle_Bow
			
			Animation						= PutAwayArrow
				AnimationName				= GURanger_SKL.GURanger_ATKD3
				AnimationMode				= ONCE
			End
		End
		
		;End New style firing
;---------------------------------------------------


; --------- Click and Hit Reactions ------------	
		AnimationState						= HIT_REACTION
			Animation						= Hit_Level_1_a
				AnimationName				= GURanger_SKL.GURanger_HITA
				AnimationMode				= ONCE
			End
		End


;;------------- EMOTIONS ------------------------------------------------
		AnimationState						= EMOTION_AFRAID WEAPONSET_TOGGLE_1
			ShareAnimation					= Yes
			Animation						= &&FEAR WITH SWORD&&
				AnimationName				= GURanger_SKL.GURanger_IDLA
				AnimationMode				= LOOP
			End
		End
		AnimationState						= EMOTION_AFRAID
			ShareAnimation					= Yes
			StateName						= STATE_Afraid
			Animation						= FERA
				AnimationName				= GURanger_SKL.GURanger_FERA
				AnimationMode				= LOOP
			End
			Animation						= FERB
				AnimationName				= GURanger_SKL.GURanger_FERB
				AnimationMode				= LOOP
			End
		End
		
		AnimationState						= EMOTION_TAUNTING WEAPONSET_TOGGLE_1
			Animation						= &&TAUNT WITH SWORD&&
				AnimationName				= GURanger_SKL.GURanger_IDLA
				AnimationMode				= LOOP
			End
		End
		AnimationState						= EMOTION_TAUNTING
			ShareAnimation					= Yes
			Animation						= Taunting
				AnimationName				= GURanger_SKL.GURanger_TNTA
				AnimationMode				= ONCE
			End
			Animation						= Taunting2
				AnimationName				= GURanger_SKL.GURanger_TNTB
				AnimationMode				= ONCE
			End
			Flags							= RANDOMSTART RESTART_ANIM_WHEN_COMPLETE
		End

		AnimationState						= EMOTION_POINTING WEAPONSET_TOGGLE_1
			Animation						= &&POINT WITH SWORD&&
				AnimationName				= GURanger_SKL.GURanger_IDLA
				AnimationMode				= LOOP
			End
		End
		AnimationState						= EMOTION_POINTING
			Animation						= Pointing1
				AnimationName				= GURanger_SKL.GURanger_PNTA
				AnimationMode				= LOOP
			End
		End

		AnimationState						= EMOTION_CELEBRATING WEAPONSET_TOGGLE_1
			Animation						= &&CHEER WITH SWORD&&
				AnimationName				= GURanger_SKL.GURanger_IDLA
				AnimationMode				= LOOP
			End
		End
		AnimationState						= EMOTION_CELEBRATING
			ShareAnimation					= Yes
			Animation						= CHRA
				AnimationName				= GURanger_SKL.GURanger_CHRA
				AnimationMode				= Once
			End
			Animation						= CHRB
				AnimationName				= GURanger_SKL.GURanger_CHRB
				AnimationMode				= Once
			End
			Flags							= RESTART_ANIM_WHEN_COMPLETE
		End
		
		AnimationState						= EMOTION_ALERT
			Animation						= IdleBowA
				AnimationName				= GURanger_SKL.GURanger_IDLA 
				AnimationMode				= ONCE
			End
		End
	;--------- selected animation -----------------------------
	
		AnimationState						= SELECTED WEAPONSET_TOGGLE_1
			StateName						= STATE_Idle_Sword
			
			Animation						= SwordIdle
				AnimationName				= GURanger_SKL.GURanger_IDLB
				AnimationMode				= LOOP
			End
		End
		AnimationState						= SELECTED
			StateName						= STATE_Idle_Bow
			
			Animation						= selected
				AnimationName				= GURanger_SKL.GURanger_IDLA 
				AnimationMode				= ONCE
			End
		End

	;;---- Idle Animation State ---------------------------------------
		AnimationState						= WEAPONSET_TOGGLE_1
		
			StateName						= STATE_Idle_Sword
			
			Animation						= SwordIdle
				AnimationName				= GURanger_SKL.GURanger_IDLB
				AnimationMode				= LOOP
			End

			BeginScript
				CurDrawableHideSubObject("arrow")
				CurDrawableHideSubObject("arrownock")
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Run_Bow" then CurDrawableSetTransitionAnimState("TRANS_Bow_To_Sword") end
				if Prev == "STATE_Idle_Bow" then CurDrawableSetTransitionAnimState("TRANS_Bow_To_Sword") end
			EndScript
		End
		AnimationState						= WEAPONSET_PLAYER_UPGRADE
			
			StateName						= STATE_Idle_Bow
		
			Animation						= IdleBow
				AnimationName				= GURanger_SKL.GURanger_IDLA 
				AnimationMode				= LOOP
			End

			BeginScript
				CurDrawableHideSubObject("arrow")
				CurDrawableShowSubObject("arrownock")
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Run_Sword" then CurDrawableSetTransitionAnimState("TRANS_Sword_To_Bow") end
				if Prev == "STATE_Idle_Sword" then CurDrawableSetTransitionAnimState("TRANS_Sword_To_Bow") end
			EndScript
		End
		IdleAnimationState
			StateName						= STATE_Idle_Bow

			Animation						= IdleBowG
				AnimationName				= GURanger_SKL.GURanger_IDLG
				AnimationMode				= ONCE
			End

			Animation						= IdleBowF
				AnimationName				= GURanger_SKL.GURanger_IDLF 
				AnimationMode				= ONCE
			End
			
			Flags							= RESTART_ANIM_WHEN_COMPLETE
			
			BeginScript
				CurDrawableShowSubObject("arrow")
				CurDrawableHideSubObject("arrownock")
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Run_Sword" then CurDrawableSetTransitionAnimState("TRANS_Sword_To_Bow") end
				if Prev == "STATE_Idle_Sword" then CurDrawableSetTransitionAnimState("TRANS_Sword_To_Bow") end	
			EndScript
		End

;---transitions--------------------------------------------
		TransitionState						= TRANS_Bow_To_Sword
			Animation						= DrawSwords
				AnimationName				= GURanger_SKL.GURanger_STHA
				AnimationMode				= ONCE
				AnimationSpeedFactorRange	= 0.9 1.1
			End
		End

		TransitionState						= TRANS_Sword_To_Bow
			Animation						= DrawBow
				AnimationName				= GURanger_SKL.GURanger_STHB
				AnimationMode				= ONCE
				AnimationSpeedFactorRange	= 0.9 1.1
			End
		End
	End
	
	
	; ***DESIGN parameters ***
	Side = Gondor
	EditorSorting = UNIT
	ThreatLevel = 1.0
	ThingClass = HORDE_UNIT
	CommandPoints = 1
	BountyValue = GONDOR_RANGER_BOUNTY_VALUE

	TransportSlotCount = 1
	WeaponSet
		Conditions = None 
		Weapon = PRIMARY    GondorRangerBow
		AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End
	WeaponSet
		Conditions = WEAPONSET_TOGGLE_1
		Weapon = PRIMARY    GondorRangerSword
		AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End

	ArmorSet
		Conditions      = None
		Armor           = ArcherArmor
		DamageFX        = NormalDamageFX
	End
	
	ArmorSet
		Conditions      = PLAYER_UPGRADE
		Armor           = HeavyArmor
		DamageFX        = NormalDamageFX
	End
	
	VisionRange = VISION_STANDARD_MELEE
	ShroudClearingRange = SHROUD_CLEAR_STANDARD

	DisplayName = OBJECT:GondorRanger
	CrushableLevel = 0  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
	CrushRevengeWeapon = RangedInfantryCrushRevenge
	
	CommandSet = GondorRangerCommandSet


  ; *** AUDIO Parameters ***;

	VoiceAttack					= RangerVoiceAttack
	VoiceAttackAir				= RangerVoiceAttack				
	VoiceAttackCharge				= RangerVoiceAttack
	VoiceAttackMachine			= RangerVoiceAttack
	VoiceAttackStructure			= RangerVoiceAttackBuilding
	VoiceEnterStateAttack			= RangerVoiceEnterStateAttack	
	VoiceEnterStateAttackCharge		= RangerVoiceEnterStateAttack
	VoiceEnterStateAttackMachine		= RangerVoiceEnterStateAttackBuilding
	VoiceEnterStateAttackStructure	= RangerVoiceEnterStateAttackBuilding
	VoiceCreated				= RangerVoiceSalute
	VoiceFullyCreated 			= RangerVoiceSalute		
	VoiceGuard					= RangerVoiceMove
	VoiceMove					= RangerVoiceMove		
	VoiceMoveToCamp				= RangerVoiceMoveCamp
	VoiceMoveWhileAttacking			= RangerVoiceDisengage
	VoiceEnterStateMove			= RangerVoiceEnterStateMove
	VoiceEnterStateMoveToCamp		= RangerVoiceEnterStateMoveCamp
	VoiceEnterStateMoveWhileAttacking	= RangerVoiceEnterStateDisengage
	VoicePriority				= 43
	VoiceRetreatToCastle			= RangerVoiceRetreat
	VoiceEnterStateRetreatToCastle	= RangerVoiceEnterStateRetreat
	VoiceSelect					= RangerVoiceSelect		;GondorArcherVoiceSelect
	VoiceSelect2				= YeomanArcherVoiceSelect2
	VoiceSelectBattle 			= RangerVoiceSelectBattle	;GondorArcherVoiceSelect ;GondorArcherVoiceSelectBattle

	SoundImpact					= ImpactHorse

	UnitSpecificSounds
		VoiceGarrison			= RangerVoiceGarrison              
	End

	EvaEventDamagedOwner = UnitUnderAttack		;Eva event to trigger when unit is damaged

	Behavior = LargeGroupAudioUpdate ModuleTag_LGAU			; Tie into LargeGroupAudio system
		Key = Human Unit Infantry Ranger
	End

	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		MaxUpdateRangeCap = 800
		AnimationSound = Sound:ArrowDrawBow					Animation:GURanger_SKL.GURanger_ATKD1	Frames:7
		AnimationSound = Sound:ArrowDrawBow					Animation:GURanger_SKL.GURanger_ATKD2	Frames:17

		AnimationSound = Sound:SwordShingClean1ForHordes 		Animation:GURanger_SKL.GURanger_STHA 	Frames:10
		AnimationSound = Sound:SwordIntoScabbard1ForHordes		Animation:GURanger_SKL.GURanger_STHB 	Frames:6

		AnimationSound = Sound:BodyFallGenericNoArmor			Animation:GURanger_SKL.GURanger_LNDA	Frames:4
		AnimationSound = Sound:BodyFallGenericNoArmor			Animation:GURanger_SKL.GURanger_LNDB	Frames:5

		AnimationSound = Sound:BodyFallGenericNoArmor			Animation:GURanger_SKL.GURanger_DIEA	Frames:50
		AnimationSound = Sound:BodyFallGenericNoArmor			Animation:GURanger_SKL.GURanger_DIEB	Frames:51
	End

	; *** ENGINEERING Parameters ***
	RadarPriority = UNIT
	KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE THROWN_OBJECT GRAB_AND_DROP
	
	Body = ActiveBody ModuleTag_02
		MaxHealth         = GONDOR_RANGER_HEALTH                  ;BALANCE Ranger Health
		MaxHealthDamaged  = GONDOR_RANGER_HEALTH_DAMAGED
		;RecoveryTime      = GONDOR_RANGER_HEALTH_RECOVERY_TIME
	End
	
	; Fire arrow upgrade
	Behavior = WeaponSetUpgrade ModuleTag_WeaponSetUpgradeTag
		TriggeredBy = Upgrade_GondorFireArrows
	End
	
	Behavior = AIUpdateInterface ModuleTag_03
		AutoAcquireEnemiesWhenIdle = Yes ATTACK_BUILDINGS
		StopChaseDistance = 562
		MoodAttackCheckRate        = 500
		HoldGroundCloseRangeDistance = 40
		CanAttackWhileContained    = Yes
		AILuaEventsList				=	RangerFunctions
		MinCowerTime				=	4000
		MaxCowerTime				=	6000
		AttackPriority				= 	AttackPriority_Archer
	End
	
;	Behavior = StealthUpdate StealthUpdateModuleTag
;	  StealthDelay                = 30         ; msec
;	  FriendlyOpacityMin          = 10.0%
;	  FriendlyOpacityMax          = 60.0%
;	  PulseFrequency              = 750   ; msec
;	  StealthForbiddenConditions = AWAY_FROM_TREES
;	  OrderIdleEnemiesToAttackMeUponReveal  = Yes
;	  DetectedByAnyoneRange		  = 120
;	  RevealWeaponSets			  = CLOSE_RANGE CONTESTING_BUILDING
;	  ; VoiceMoveToStealthyArea     = TEMP_GondorRangerVoiceMoveToStealth_TEMP
;	End
	
	LocomotorSet
		Locomotor = HumanLocomotor
		Condition = SET_NORMAL 
		Speed     = NORMAL_GOOD_INFANTRY_MEMBER_SPEED	
	End

	LocomotorSet
		Locomotor = HumanWanderLocomotor
		Condition = SET_WANDER
		Speed     = NORMAL_GOOD_INFANTRY_MEMBER_SPEED	
	End

	Behavior = DualWeaponBehavior ModuleTag_13
		SwitchWeaponOnCloseRangeDistance = 24
	End

	Behavior = PhysicsBehavior ModuleTag_04
		GravityMult = 1.0
	End
	
	Behavior = SlowDeathBehavior ModuleTag_05
		DeathTypes = ALL -KNOCKBACK
		SinkDelay = 3000
		SinkRate = 0.40     ; in Dist/Sec
		DestructionDelay = 15000
		Sound = INITIAL HumanVoiceDie ;RangerVoiceDie
	End
	
	Behavior = SquishCollide ModuleTag_06
		;nothing
	End
	
	Behavior = SlowDeathBehavior ModuleTag_07
		; Same as normal death, but no sound (sound already played by SoundImpact = ... )
		DeathTypes = NONE +KNOCKBACK
		SinkDelay = 3000
		SinkRate = 0.40     ; in Dist/Sec
		DestructionDelay = 15000
	End

	Behavior = BezierProjectileBehavior ModuleTag_08 ; Module starts asleep, and wakes up when thrown.
		; To tweak a Bezier path
		FirstHeight = 24  ; Height of Bezier control points above highest intervening terrain
		SecondHeight = 24
		FirstPercentIndent = 30% ; Percentage of shot distance control points are placed
		SecondPercentIndent = 70%
		TumbleRandomly = Yes

		CrushStyle = Yes ; I don't detonate, I just hit
		DieOnImpact = Yes
		BounceCount = 1   ; When I hit the ground, I'll arc again
		BounceDistance = 40 ; this far
		BounceFirstHeight = 24  ; Height of Bezier control points above highest intervening terrain
		BounceSecondHeight = 24
		BounceFirstPercentIndent = 20% ; Percentage of shot distance control points are placed
		BounceSecondPercentIndent = 80%

		GroundHitFX       = FX_ThrownRockGroundHit
		GroundBounceFX    = FX_ThrownRockBounceHit
	End

	Geometry = CYLINDER
	GeometryMajorRadius = 8.0
	GeometryMinorRadius = 8.0
	GeometryHeight = 19.2
	GeometryIsSmall = Yes

    Shadow = SHADOW_DECAL
    ShadowSizeX = 19;
    ShadowSizeY = 19;
    ShadowTexture = ShadowI;
End


;=====================================================================================================

; aka Last Alliance Fighter
Object LAGondorFighter
	; *** ART Parameters ***

	SelectPortrait         = HPNumenorean

	Draw = W3DHordeModelDraw ModuleTag_01
		OkToChangeModelColor = Yes	
		StaticModelLODMode = Yes
		
		; specify options for static LODs
		LodOptions							= LOW
			AllowMultipleModels				= ALLOW_MULTIPLE_MODELS_LOW
			MaxRandomTextures				= MAX_RANDOM_TEXTURES_LOW
			MaxRandomAnimations				= MAX_RANDOM_ANIMATIONS_LOW
			MaxAnimFrameDelta				= MAX_ANIM_FRAME_DELTA_LOW
		End
		
		LodOptions							= MEDIUM
			AllowMultipleModels				= ALLOW_MULTIPLE_MODELS_MED
			MaxRandomTextures				= MAX_RANDOM_TEXTURES_MED
			MaxRandomAnimations				= MAX_RANDOM_ANIMATIONS_MED
			MaxAnimFrameDelta				= MAX_ANIM_FRAME_DELTA_MED
		End
		
		LodOptions							= HIGH
			AllowMultipleModels				= ALLOW_MULTIPLE_MODELS_HIGH
			MaxRandomTextures				= MAX_RANDOM_TEXTURES_HIGH
			MaxRandomAnimations				= MAX_RANDOM_ANIMATIONS_HIGH
			MaxAnimFrameDelta				= MAX_ANIM_FRAME_DELTA_HIGH
		End

		WadingParticleSys = WaterRipplesTrail  ; used when the unit is wading in shallow water.
;;================ MODELS =================================================================
		DefaultModelConditionState
			Model							= GUNumnrean_SKN
			Skeleton						= GUMAArms_SKL
		End

		ModelConditionState WEAPONSET_PLAYER_UPGRADE
			Model							= GUNumnrean_SKN
			Skeleton						= GUMAArms_SKL
		End
		
		ModelConditionState = USER_4		; This state is used in cinematics to get the old style armor
			Model							= GUNumnrean_SKN	
			Skeleton						= GUMAArms_SKL
		End

;;=============== ANIMATIONS ===============================================================

;;======= FALLING & FLYING

		AnimationState						= PASSENGER
			Animation						= Grabbed
				AnimationName				= GUMAArms_FLLA
				AnimationMode				= LOOP
			End
		End
		
		AnimationState						= FREEFALL
			Animation						= Falling
				AnimationName				= GUMAArms_FLYD
				AnimationMode				= LOOP
				AnimationBlendTime			= 10
			End
			Animation						= Falling
				AnimationName				= GUMAArms_FLYC
				AnimationMode				= LOOP
				AnimationBlendTime			= 10
				AnimationSpeedFactorRange	= 0.5	0.5
			End
		End

		AnimationState        				= THROWN_PROJECTILE
			Animation           			= FlyA
				AnimationName      	 		= GUMAARMS_FLYA
				AnimationMode       		= LOOP
			End
			Animation           			= FlyB
				AnimationName       		= GUMAARMS_FLYB
				AnimationMode       		= LOOP
			End
			Animation           			= FlyC
				AnimationName       		= GUMAARMS_FLYC
				AnimationMode       		= LOOP
			End
			Animation           			= FlyD
				AnimationName       		= GUMAARMS_FLYD
				AnimationMode       		= LOOP
			End
			Flags               			= RANDOMSTART
		End
		
		AnimationState        				= STUNNED_FLAILING 
			Animation           			= FlyA
				AnimationName       		= GUMAARMS_FLYA
				AnimationMode       		= LOOP
			End
			Animation           			= FlyB
				AnimationName       		= GUMAARMS_FLYB
				AnimationMode       		= LOOP
			End
			Animation           			= FlyC
				AnimationName       		= GUMAARMS_FLYC
				AnimationMode       		= LOOP
			End
			Animation           			= FlyD
				AnimationName      		 	= GUMAARMS_FLYD
				AnimationMode       		= LOOP
			End
			Flags               			= RANDOMSTART
		End

		AnimationState 						= DYING SPLATTED
			Animation 						= Splatted_On_Ground
				AnimationName 				= GUMAARMS_LNDA
				AnimationMode 				= ONCE
			End
			EnteringStateFX					= FX_OrcHitGround
		End
		AnimationState						= DYING AFLAME
			Animation						= MFDA
				AnimationName				= GUManMocap_MFDA
				AnimationMode				= LOOP
			End
		End
		AnimationState						= DYING
			;Animation						= DIEA
			;	AnimationName				= GUManMocap_DIEA
			;	AnimationMode				= ONCE
			;End
			Animation						= DIEB
				AnimationName				= GUManMocap_DIEB
				AnimationMode				= ONCE
			End
			Animation						= DIEC
				AnimationName				= GUManMocap_DIEC
				AnimationMode				= ONCE
			End
			Animation						= DIED
				AnimationName				= GUManMocap_DIED
				AnimationMode				= ONCE
			End
			Animation						= DIEE
				AnimationName				= GUManMocap_DIEE
				AnimationMode				= ONCE
			End
		End

;;======= LANDING & STANDING

		AnimationState						= STUNNED_STANDING_UP
			Animation						= GTPA
				AnimationName				= GUManMocap_GTPA
				AnimationMode				= ONCE
			End
			Animation						= GTPB
				AnimationName				= GUManMocap_GTPB
				AnimationMode				= ONCE
			End
			Animation						= GTPC
				AnimationName				= GUManMocap_GTPC
				AnimationMode				= ONCE
			End
		End
		
;;====== TERROR
		
		AnimationState						= MOVING EMOTION_TERROR EMOTION_LOOK_TO_SKY
			;@@@KM Add distance
			Animation					= TerrorFromTheSky
				AnimationName			= GUManMocap_RUND
				AnimationMode			= LOOP
			End
			Animation					= TerrorFromTheSky
				AnimationName			= GUManMocap_RUNE
				AnimationMode			= LOOP
			End
			Flags = RANDOMSTART
		End
		AnimationState						= MOVING EMOTION_TERROR
			;@@@KM Add distance
			Animation						= TerrorFromTheSky
				AnimationName				= GUManMocap_RUND
				AnimationMode				= ONCE
			End
			Animation						= TerrorFromTheSky
				AnimationName				= GUManMocap_RUNE
				AnimationMode				= ONCE
			End
			Flags							= RESTART_ANIM_WHEN_COMPLETE
		End
		
;;======= BACK UP
		
		AnimationState						= MOVING BACKING_UP
			;@@@KM Add distance
			Animation						= BAKA
				AnimationName				= GUManMocap_BAKA
				AnimationMode				= LOOP
			End
			Animation						= BAKB
				AnimationName				= GUManMocap_BAKB
				AnimationMode				= LOOP
			End
			Animation						= BAKC
				AnimationName				= GUManMocap_BAKC
				AnimationMode				= LOOP
			End
			Flags = RANDOMSTART
		End

		AnimationState						= MOVING PANICKING
			;@@@KM - Add Distance
			Animation						= MFDA
				AnimationName				= GUManMocap_MFDA
				AnimationMode				= LOOP
			End
			Flags							= RANDOMSTART
			;ParticleSysBone				= None InfantryDustTrails
		End
		
		AnimationState						= MOVING ATTACKING
			ShareAnimation					= Yes;
			Animation						= RUNA
				AnimationName				= GUManMocap_RUNA
				AnimationMode				= LOOP
				Distance					= 25
			End
			Flags							= RANDOMSTART
			;ParticleSysBone				= None InfantryDustTrails
		End
		
		AnimationState						= MOVING
			;@@@KM - Add Distance
			ShareAnimation					= Yes;
			Animation						= RUNB
				AnimationName				= GUManMocap_RUNB
				AnimationMode				= LOOP
				Distance					= 30
			End
			Animation						= RUNC
				AnimationName				= GUManMocap_RUNC
				AnimationMode				= LOOP
				Distance					= 30
			End
			Flags							= RANDOMSTART
			;ParticleSysBone				= None InfantryDustTrails
		End
		
		AnimationState						= EMOTION_UNCONTROLLABLY_AFRAID
			Animation						= FERA
				AnimationName				= GUManMocap_FERA
				AnimationMode				= LOOP
			End 
			Animation						= FERB
				AnimationName				= GUManMocap_FERB
				AnimationMode				= LOOP
			End
			Animation						= FERC
				AnimationName				= GUManMocap_FERC
				AnimationMode				= LOOP
			End
			Animation						= FERD
				AnimationName				= GUManMocap_FERD
				AnimationMode				= LOOP
			End
			Animation						= FERE
				AnimationName				= GUManMocap_FERE
				AnimationMode				= LOOP
			End
			Animation						= FERF
				AnimationName				= GUManMocap_FERF
				AnimationMode				= LOOP
			End
		End

;;---------------------- ATTACKING ----------------------------------------------------------------
		AnimationState						= FIRING_OR_PREATTACK_A
			Animation						= ATA1
				AnimationName				= GUManMocap_ATKA
				AnimationMode				= ONCE
				UseWeaponTiming				= Yes
			End
			;ParticleSysBone				= None MeleeDust
		End
		
		AnimationState						= ATTACKING
			Animation						= ALERT_1
				AnimationName				= GUManMocap_IDLA
				AnimationMode				= ONCE
			End
		End
;;----------------- HIT REACTIONS -------------------------------------------------------------------------

		AnimationState						= HIT_REACTION
			;Animation						= HITA
			;	AnimationName				= GUManMocap_HITA
			;	AnimationMode				= ONCE
			;End
			Animation						= HITB
				AnimationName				= GUManMocap_HITB
				AnimationMode				= ONCE
			End
		End

;;----------------- EMOTIONS ----------------------------------------------------------------
;;======= APPREHENSIVE

		AnimationState						= EMOTION_ALERT EMOTION_AFRAID
			Animation						= APPA
				AnimationName				= GUManMocap_APPA
				AnimationMode				= ONCE
			End
			Animation						= APPB
				AnimationName				= GUManMocap_APPB
				AnimationMode				= ONCE
			End
			Flags							= RANDOMSTART RESTART_ANIM_WHEN_COMPLETE
		End
		
;;======= AFRAID

		AnimationState						= EMOTION_AFRAID
			Animation						= FERA
				AnimationName				= GUManMocap_FERA
				AnimationMode				= LOOP
			End 
			Animation						= FERB
				AnimationName				= GUManMocap_FERB
				AnimationMode				= LOOP
			End
			Animation						= FERC
				AnimationName				= GUManMocap_FERC
				AnimationMode				= LOOP
			End
			Animation						= FERD
				AnimationName				= GUManMocap_FERD
				AnimationMode				= LOOP
			End
			Animation						= FERE
				AnimationName				= GUManMocap_FERE
				AnimationMode				= LOOP
			End
			Animation						= FERF
				AnimationName				= GUManMocap_FERF
				AnimationMode				= LOOP
			End
		End

;;======== POINTING

		AnimationState						= EMOTION_POINTING
			Animation						= Pointing1
				AnimationName				= GUManMocap_RCTA
				AnimationMode				= LOOP
			End
		End

;;======= TAUNTING

		AnimationState						= EMOTION_TAUNTING
			Animation						= Taunting1
				AnimationName				= GUManMocap_TNTA
				AnimationMode				= ONCE
			End
			Animation						= Taunting2
				AnimationName				= GUManMocap_TNTB
				AnimationMode				= ONCE
			End
			Animation						= Taunting3
				AnimationName				= GUManMocap_TNTC
				AnimationMode				= ONCE
			End
			Animation						= Taunting4
				AnimationName				= GUManMocap_IDLC
				AnimationMode				= ONCE
			End
			Animation						= Taunting5
				AnimationName				= GUManMocap_IDLA
				AnimationMode				= ONCE
			End
			Animation						= Taunting6
				AnimationName				= GUManMocap_IDLH
				AnimationMode				= ONCE
			End
			Flags							= RANDOMSTART RESTART_ANIM_WHEN_COMPLETE
		End

;;======= CELEBRATING

		AnimationState						= EMOTION_CELEBRATING
			Animation						= CHRB
				AnimationName				= GUManMocap_CHRB
				AnimationMode				= ONCE
			End
			Animation						= CHRC
				AnimationName				= GUManMocap_CHRC
				AnimationMode				= ONCE
			End
			Animation						= IDLD
				AnimationName				= GUManMocap_IDLD
				AnimationMode				= ONCE
			End
			Flags							=	RESTART_ANIM_WHEN_COMPLETE
		End
		
;;----------------- ALERT STATE ---------------------------------------------------------------------------

		AnimationState						= EMOTION_ALERT
			Animation						= ALERT_1
				AnimationName				= GUManMocap_IDLA
				AnimationMode				= LOOP;ONCE
				AnimationPriority			= 10
			End
			Flags							= RESTART_ANIM_WHEN_COMPLETE ; acts like an idle animation & keeps running the animations.
		End
		
;;----------------- SELECTED STATES -----------------------------------------------------------------------
		AnimationState        = SELECTED
			StateName           = STATE_Selected
			Animation           = ATNB
				AnimationName     = GUManMocap_ATNB
				AnimationMode     = LOOP
			End
			
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Idle" 
				then 
					CurDrawableSetTransitionAnimState("TRANS_IdleToSelected") 
				end
				if CurDrawableModelcondition("ATTACKING")
				then
					return "IDLA"
				else
					return "ATNA"
				end
			EndScript
			
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Idle" then CurDrawableSetTransitionAnimState("TRANS_IdleToSelected") end
			EndScript
		End
		
;;----------------- IDLE STATES ---------------------------------------------------------------------------
		AnimationState				= WEAPONSET_PLAYER_UPGRADE
			StateName				= STATE_Idle
			Animation				= IDLI
				AnimationName       = GUManMocap_IDLH
				AnimationMode       = ONCE
				AnimationSpeedFactorRange = 0.9 1.1
			End
			Animation				= IDLD
				AnimationName       = GUManMocap_IDLD
				AnimationMode       = ONCE
				AnimationSpeedFactorRange = 0.9 1.1
			End
			Animation				= IDLH
				AnimationName       = GUManMocap_IDLH
				AnimationMode       = ONCE
				AnimationSpeedFactorRange = 0.9 1.1
			End
			Animation				= CHRB
				AnimationName       = GUManMocap_CHRB
				AnimationMode       = ONCE
				AnimationSpeedFactorRange = 0.9 1.1
			End
			Animation				= CHRC
				AnimationName       = GUManMocap_CHRC
				AnimationMode       = ONCE
				AnimationSpeedFactorRange = 0.9 1.1
			End
			Flags					= RESTART_ANIM_WHEN_COMPLETE			
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Selected" then CurDrawableSetTransitionAnimState("TRANS_SelectedToIdle") end
			EndScript
		End		
		AnimationState				= USER_3
			StateName				= STATE_User_3
			Animation				= GUARD_STANCE
				AnimationName		= GUManMocap_IDLA
				AnimationMode		= LOOP
			End
		End
		IdleAnimationState
			StateName				= STATE_Idle
			Animation				= IDLB
				AnimationName       = GUManMocap_IDLB
				AnimationMode       = ONCE
				AnimationPriority   = 20
				AnimationSpeedFactorRange = 0.9 1.1
				AnimationBlendTime	= 15
			End
			Animation				= IDLF
				AnimationName       = GUManMocap_IDLF
				AnimationMode       = ONCE
				AnimationPriority   = 1
				AnimationSpeedFactorRange = 0.9 1.1
				AnimationBlendTime	= 15
			End
			Animation				= IDLG
				AnimationName       = GUManMocap_IDLG
				AnimationMode       = ONCE
				AnimationPriority   = 1
				AnimationSpeedFactorRange = 0.9 1.1
				AnimationBlendTime	= 15
			End
			Animation				= IDLJ
				AnimationName       = GUManMocap_IDLJ
				AnimationMode       = ONCE
				AnimationPriority   = 1
				AnimationSpeedFactorRange = 0.9 1.1
				AnimationBlendTime	= 15
			End
			Animation				= IDLK
				AnimationName       = GUManMocap_IDLK
				AnimationMode       = ONCE
				AnimationPriority   = 1
				AnimationSpeedFactorRange = 0.9 1.1
				AnimationBlendTime	= 15
			End
			Animation				= IDLL
				AnimationName       = GUManMocap_IDLL
				AnimationMode       = ONCE
				AnimationPriority   = 1
				AnimationSpeedFactorRange = 0.9 1.1
				AnimationBlendTime	= 15
			End
			Animation				= IDLN
				AnimationName       = GUManMocap_IDLN
				AnimationMode       = ONCE
				AnimationPriority   = 1
				AnimationSpeedFactorRange = 0.9 1.1
				AnimationBlendTime	= 15
			End
			Animation				= IDLO
				AnimationName       = GUManMocap_IDLO
				AnimationMode       = ONCE
				AnimationPriority   = 1
				AnimationSpeedFactorRange = 0.9 1.1
				AnimationBlendTime	= 15
			End
			Animation				= IDLP
				AnimationName       = GUManMocap_IDLP
				AnimationMode       = ONCE
				AnimationPriority   = 1
				AnimationSpeedFactorRange = 0.9 1.1
				AnimationBlendTime	= 15
			End		
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Selected" then CurDrawableSetTransitionAnimState("TRANS_SelectedToIdle") end
			EndScript
		End
;;--------------- TRANSITIONS ---------------------------------------------------------------------------
		TransitionState       = TRANS_TO_USER_1
			Animation
				AnimationName     = GUManMocap_RCTA
				AnimationMode     = ONCE
			End
		End
		TransitionState       = TRANS_IdleToSelected
			Animation           = ATNA
				AnimationName     = GUManMocap_ATNA
				AnimationMode     = ONCE
				AnimationSpeedFactorRange = 0.9 1.0
				
			End
		End
		TransitionState		= TRANS_SelectedToIdle
			Animation			= ATND
				AnimationName	= GUManMocap_ATND
				AnimationMode	= ONCE
				AnimationSpeedFactorRange = 0.9 1.0
			End
		End
;;-----------------------------------------------------------------------------------------------------------
	End
	
	; ***DESIGN parameters ***
	Side = Gondor
	EditorSorting = UNIT
	ThreatLevel = 1.0
	ThingClass = HORDE_UNIT
	CommandPoints = 2
	BountyValue = GONDOR_SOLDIER_BOUNTY_VALUE
	
	EmotionRange = 240 ; Make sure this value is greater than the fear distribution range. 

	TransportSlotCount = 1
	
	;;; WEAPON SETS ;;;
	WeaponSet
		Conditions			= None 
		Weapon				= PRIMARY    GondorSword
		AutoChooseSources	= PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End
	WeaponSet
		Conditions			= PLAYER_UPGRADE
		Weapon				= PRIMARY	GondorSwordUpgraded
		AutoChooseSources	= PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End

	;;; ARMOUR SETS ;;;
	ArmorSet
		Conditions      = None
		Armor           = SoldierArmor
		DamageFX        = NormalDamageFX
	End
	ArmorSet
		Conditions      = PLAYER_UPGRADE
		Armor           = SoldierHeavyArmor
		DamageFX        = NormalDamageFX
	End
	
	VisionRange = VISION_STANDARD_MELEE
	ShroudClearingRange = SHROUD_CLEAR_STANDARD				

	DisplayName = OBJECT:GondorFighter
	CrushableLevel = 0  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
	CrushRevengeWeapon = BasicInfantryCrushRevenge
	
	CommandSet = GondorFighterCommandSet


	; *** AUDIO Parameters ***;

	VoiceAmbushed			= GondorSoldierVoiceAmbushed	
	VoiceAttack			= GondorSoldierVoiceAttack
	VoiceAttackCharge		= GondorSoldierVoiceAttackCharge
	VoiceAttackMachine		= GondorSoldierVoiceAttack
	VoiceAttackStructure		= GondorSoldierVoiceAttackBuilding
	VoiceEnterStateAttack			= GondorSoldierVoiceEnterStateAttack
	VoiceEnterStateAttackCharge		= GondorSoldierVoiceEnterStateAttackCharge
	VoiceEnterStateAttackMachine	= GondorSoldierVoiceEnterStateAttackBuilding
	VoiceEnterStateAttackStructure	= GondorSoldierVoiceEnterStateAttackBuilding
	VoiceCreated			= GondorSoldierVoiceSalute
	VoiceFullyCreated 		= GondorSoldierVoiceSalute		;GondorSoldierVoiceCreated
	VoiceMove			= GondorSoldierVoiceMove
	VoiceMoveToCamp			= GondorSoldierVoiceMoveCamp
	VoiceMoveWhileAttacking		= GondorSoldierVoiceDisengage		;TEMP_GondorSoldierVoiceMoveWhileAttacking_TEMP
	VoicePriority			= 49
	VoiceRetreatToCastle		= GondorSoldierVoiceRetreat
	VoiceSelect			= GondorSoldierVoiceSelect
	VoiceSelectBattle 		= GondorSoldierVoiceSelectBattle
	VoiceEnterStateMove					= GondorSoldierVoiceEnterStateMove
	VoiceEnterStateMoveToCamp			= GondorSoldierVoiceEnterStateMoveCamp
	VoiceEnterStateMoveWhileAttacking	= GondorSoldierVoiceEnterStateDisengage
	VoiceEnterStateRetreatToCastle		= GondorSoldierVoiceEnterStateRetreat
	VoiceGuard			= GondorSoldierVoiceMove

	SoundImpact = ImpactHorse


	UnitSpecificSounds
		VoiceGarrison		= GondorSoldierVoiceGarrison              
		VoiceDesperateAttack	= GondorSoldierVoiceDesperateCharge 
	End

	EvaEventDamagedOwner = UnitUnderAttack		;Eva event to trigger when unit is damaged


	; *** ENGINEERING Parameters ***

	RadarPriority = UNIT
	KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE THROWN_OBJECT ATTACK_NEEDS_LINE_OF_SIGHT NOTIFY_OF_PREATTACK GRAB_AND_DROP
	
	Body = ActiveBody ModuleTag_02
		CheerRadius 	  = EMOTION_CHEER_RADIUS
		MaxHealth         = GONDOR_SOLDIER_HEALTH
		MaxHealthDamaged  = GONDOR_SOLDIER_HEALTH_DAMAGED
		;RecoveryTime      = GONDOR_SOLDIER_HEALTH_RECOVERY_TIME
	End
	
	Behavior = WeaponSetUpgrade WeaponSetUpgradeModuleTag
		TriggeredBy = Upgrade_GondorForgedBlades
	End

	Behavior = ArmorUpgrade ArmorUpgradeModuleTag
		TriggeredBy = Upgrade_GondorHeavyArmor
		ArmorSetFlag			= PLAYER_UPGRADE
	    ;KillArmorUpgrade = Yes ;This cancels any previous armor upgrade.
	End
	
	;-------------------------------------------------------------------------
	;
	;	Sub object upgrading.
	;
	Behavior = SubObjectsUpgrade Armor_Upgrade
		TriggeredBy		= Upgrade_GondorHeavyArmor
		UpgradeTexture	= GUManAtArms.tga 0 GUManAtArms_HA.tga
		RecolorHouse	= Yes
		ExcludeSubobjects = Forged_Blade
	End
	
	Behavior = SubObjectsUpgrade ForgedBlade_Upgrade
		TriggeredBy		= Upgrade_GondorForgedBlades
		ShowSubObjects	= Forged_Blade
	End	
	;-------------------------------------------------------------------------
		
	Behavior = AIUpdateInterface ModuleTag_03
		AutoAcquireEnemiesWhenIdle	=	Yes ATTACK_BUILDINGS
		MoodAttackCheckRate			=	500
		AILuaEventsList				=	GondorFighterFunctions
		MinCowerTime				=	3000
		MaxCowerTime				=	5000
		AttackPriority				= 	AttackPriority_Infantry
	End

	LocomotorSet
		Locomotor = HumanLocomotor
		Condition = SET_NORMAL 
		Speed     = NORMAL_GOOD_INFANTRY_MEMBER_SPEED
	End

	Behavior = PhysicsBehavior ModuleTag_04
		GravityMult = 1.0
		ShockStunnedTimeLow		= 1400	;msec
		ShockStunnedTimeHigh	= 2400	;msec
		ShockStandingTime		= 1000	;msec
	End 

	Behavior = AttributeModifierUpgrade ModuleTag_AMU
		TriggeredBy = Upgrade_GondorFighterFearless
		AttributeModifier = FearlessForever
	End
	 
	Behavior = SquishCollide ModuleTag_06
		;nothing
	End
	
	Behavior = HordeMemberCollide ModuleTag_HMC
		;nothing
	End
	
	Behavior = HitReactionBehavior HitReactionBehaviorModuleTag
		HitReactionLifeTimer1 = 2500 ; level 1 (light  damage)  hit reaction animations in ms
		HitReactionLifeTimer2 = 2500 ; level 2 (medium damage)  hit reaction animations in ms
		HitReactionLifeTimer3 = 2500 ; level 3 (heavy  damage)  hit reaction animations in ms

		HitReactionThreshold1 = 5.0   ; level 1 (light  damage) threshold trigger
		HitReactionThreshold2 = 25.0  ; level 2 (medium damage) threshold trigger
		HitReactionThreshold3 = 50.0  ; level 3 (heavy  damage) threshold trigger
		
		FastHitsResetReaction = Yes    If set -- when hits occur faster than the reaction animations, it will reset the animation. (like getting riddled with machine gun bullets)
	End

	Behavior = SlowDeathBehavior ModuleTag_05
		DeathTypes = ALL -KNOCKBACK
		SinkDelay = 3000
		SinkRate = 0.60     ; in Dist/Sec
		DestructionDelay = 10000
		Sound = INITIAL HumanVoiceDie ;GondorSoldierVoiceDie
	End
	
	Behavior = SlowDeathBehavior ModuleTag_07
		; Same as normal death, but no sound (sound already played by SoundImpact = ... )
		DeathTypes = NONE +KNOCKBACK
		SinkDelay = 3000
		SinkRate = 0.60     ; in Dist/Sec
		DestructionDelay = 10000
	End

	Behavior = BezierProjectileBehavior ModuleTag_08 ; Module starts asleep, and wakes up when thrown.
		; To tweak a Bezier path
		FirstHeight = 24  ; Height of Bezier control points above highest intervening terrain
		SecondHeight = 24
		FirstPercentIndent = 30% ; Percentage of shot distance control points are placed
		SecondPercentIndent = 70%
		TumbleRandomly = Yes

		CrushStyle = Yes ; I don't detonate, I just hit
		DieOnImpact = Yes
		BounceCount = 1   ; When I hit the ground, I'll arc again
		BounceDistance = 40 ; this far
		BounceFirstHeight = 24  ; Height of Bezier control points above highest intervening terrain
		BounceSecondHeight = 24
		BounceFirstPercentIndent = 20% ; Percentage of shot distance control points are placed
		BounceSecondPercentIndent = 80%

		GroundHitFX       = FX_ThrownRockGroundHit
		GroundBounceFX    = FX_ThrownRockBounceHit
	End

	; Tie into LargeGroupAudio system
	Behavior = LargeGroupAudioUpdate ModuleTag_LGAU
		Key = Human Unit Infantry Gondor_Soldier
	End
	
	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		MaxUpdateRangeCap = 800
		AnimationSound = Sound: TauntHumanHitShield Animation:GUMAArms_SKL.GUManMocap_IDLC Frames: 17 27
		AnimationSound = Sound: TauntHumanHitShield Animation:GUMAArms_SKL.GUManMocap_TNTC Frames: 74 82 94 125 139
	End

	Geometry = CYLINDER
	GeometryMajorRadius = 8.0
	GeometryMinorRadius = 8.0
	GeometryHeight = 19.2
	GeometryIsSmall = No

    Shadow = SHADOW_DECAL
    ShadowSizeX = 19;
    ShadowSizeY = 19;
    ShadowTexture = ShadowI;
End


;------------------------------------------------------------------------------
; Last Alliance Gondor Banner Carrier
; Used with Gondor soliders, Gondor Tower Guards, and Gondor Archers

Object LAGondorBanner
	; *** ART Parameters ***

	SelectPortrait         = UPGondor_Banner

	Draw = W3DScriptedModelDraw ModuleTag_01
	
	
		ExtraPublicBone = Glow
		ExtraPublicBone = Adornment
		ExtraPublicBone = Streamers
	
	
	  OkToChangeModelColor = Yes
   StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD

		DefaultModelConditionState
			Model               = GUNumnBnnr_SKN
			Skeleton			= GUBanner_SKL
		End

		; morph for Gondor Solders, Archers, and Tower Guards( see BannerCarrierUpdate below for reference )
		ModelConditionState = USER_1
			Model = GUNumnBnnr_SKN
			Skeleton = GUBanner_SKL
		End
		
		; morph for Rangers( see BannerCarrierUpdate below for reference )
		ModelConditionState = USER_2
			Model = GURngrBnr_SKN
			Skeleton = GUBanner_SKL
		End
								
		; morph for Knights ( see BannerCarrierUpdate below for reference )
		ModelConditionState = USER_3
			Model = GUBnrCav_SKN
			Skeleton = RURrmBnr_SKL				
		End
		
		;-------------------------------BEGIN Cavalry Section--------------------------------------
		AnimationState				=	PASSENGER USER_3
			Animation				=	grabbed
				AnimationName		=	RURrmBnr_GBDA
				AnimationMode		=	LOOP
			End
		End
		
		; --- stunned anims
		AnimationState				=	FREEFALL USER_3
			Animation				=	free fall
				AnimationName		=	RURrmBnr_FLYB
				AnimationMode		=	LOOP
			End
		End
		
		; This is the no-spawn-horse type of death
		AnimationState				=	DYING SPLATTED USER_3
			Animation				=	splatted
				AnimationName		=	RURrmBnr_LNDA
				AnimationMode		=	ONCE
				AnimationBlendTime  =   2
			End
			FXEvent	= Frame:2 Name:FX_SplatDust
		End
		
		AnimationState				=	STUNNED_FLAILING USER_3
			Animation				=	JustDie
				AnimationName		=	RURrmBnr_FLYC
				AnimationMode		=	LOOP
			End
			Flags					=	RANDOMSTART
		End

		AnimationState				=	STUNNED USER_3
			Animation				=	Land
				AnimationName		=	RURrmBnr_LNDA
				AnimationMode		=	ONCE
			End
		End

		AnimationState				=	STUNNED_STANDING_UP USER_3
			Animation				=	StandUp
				AnimationName		=	RURrmBnr_GTPA
				AnimationMode		=	ONCE
			End
		End
		
		AnimationState				=	DYING USER_3     ; DEATH_2 Normally has DEATH_2, but just as a backup don't insist
			Animation				=	JustDie
				AnimationName		=	RURrmBnr_DIEA
				AnimationMode		=	ONCE
			End
		End
		
		; When the rider is killed, we call this animation even though the unit hasn't officially died yet.
		AnimationState				=	DEATH_2 USER_3
			Animation				=	JustDie
				AnimationName       =	RURrmBnr_DIEB
				AnimationMode       =	ONCE
			End
		End

;;======= TERROR
		AnimationState					= MOVING EMOTION_TERROR EMOTION_LOOK_TO_SKY USER_3
			Animation					= TerrorFromTheSky
				AnimationName			= RURrmBnr_RUNB
				AnimationMode			= LOOP
			End
		End
		AnimationState					= MOVING EMOTION_TERROR USER_3
			Animation					= TerrorFromTheSky
				AnimationName			= RURrmBnr_RUNB
				AnimationMode			= LOOP
			End
		End
;;---------------
;;======= BACKING UP
		AnimationState					= MOVING BACKING_UP USER_3
			Animation					= BACKING UP
				AnimationName			= RURrmBnr_BAKA
				AnimationMode			= LOOP
			End
		End
;;-------------------
		
		AnimationState = MOVING ENGAGED USER_3
			Animation = Moving_Engaged
				AnimationName = RURrmBnr_RUNC
				AnimationMode = LOOP
			End
			Flags               = RANDOMSTART
		End
		
		AnimationState				=	TURN_LEFT_HIGH_SPEED USER_3
			Animation				=	TurnLeft
				AnimationName		=	RURrmBnr_TNL1
				AnimationMode		=	LOOP
;				AnimationSpeedFactorRange= 1.8 1.8
				AnimationBlendTime	=	20
			End
		End
		
		AnimationState				=	TURN_RIGHT_HIGH_SPEED USER_3
			Animation				=	TurnLeft
				AnimationName		=	RURrmBnr_TNR1
				AnimationMode		=	LOOP
;				AnimationSpeedFactorRange= 1.8 1.8
				AnimationBlendTime	=	20
			End
		End
		
		AnimationState				= MOVING WANDER USER_3
			Animation				= WLKA
				AnimationName		= RURrmBnr_WLKA
				AnimationMode		= LOOP
			End
		End

		AnimationState				=	MOVING TURN_LEFT USER_3 
			Animation				=	TurnLeft
				AnimationName		=	RURrmBnr_TRNL
				AnimationMode		=	LOOP
			End
		End

		AnimationState				=	MOVING TURN_RIGHT USER_3 
			Animation				=	TurnRight
				AnimationName		=	RURrmBnr_TRNR
				AnimationMode		=	LOOP
			End
		End
	
		AnimationState				=	MOVING ACCELERATE USER_3
			Animation				=	Accelerate
				AnimationName		=	RURrmBnr_ACCL
				AnimationMode		=	LOOP
			End
		End

		AnimationState				=	MOVING DECELERATE USER_3
			Animation				=	Decelerate
				AnimationName		=	RURrmBnr_DECL
				AnimationMode		=	ONCE
			End
		End

		AnimationState				=	MOVING USER_3
			Animation				=	RunA
				AnimationName		=	RURrmBnr_RUNA
				AnimationMode		=	LOOP
			End
			Flags					=	RANDOMSTART
		End

		AnimationState				=	FIRING_OR_PREATTACK_A USER_3
			Animation				=	AttackA1
				AnimationName		=	RURrmBnr_ATKA
				AnimationMode		=	ONCE
			End
		End
		
		
		;-----------------------------------END Cavalry Section---------------------------------
		
		AnimationState						= PASSENGER
			Animation						= Wiggle
				AnimationName				= GUBanner_FLLA
				AnimationMode				= LOOP
			End
		End
		
		AnimationState						= FREEFALL
			Animation						= Falling
				AnimationName				= GUBanner_FLYA
				AnimationMode				= LOOP
				AnimationBlendTime			= 10
				AnimationSpeedFactorRange	= 0.5	0.5
			End
		End
		
	IdleAnimationState
			;Animation           = IDLA
			;	AnimationName     = GUBanner_IDLA
			;	AnimationMode     = ONCE
			;	AnimationBlendTime  = 15
			;	AnimationPriority = 20
			;End
			Animation				=	IdleB
				AnimationName		=	GUBanner_IDLB
				AnimationMode		=	ONCE
				AnimationBlendTime	=	15
				AnimationPriority = 1
			End
			StateName           = Idle		
		End

;;======TERROR		
		AnimationState					= MOVING EMOTION_TERROR EMOTION_LOOK_TO_SKY
			Animation					= TerrorFromTheSky
				AnimationName			= GUBanner_RUNB
				AnimationMode			= LOOP
			End
		End
		AnimationState					= MOVING EMOTION_TERROR
			Animation					= Terror
				AnimationName			= GUBanner_RUNB
				AnimationMode			= LOOP
			End
		End
;;-----------------------------
		
		AnimationState        = STUNNED_FLAILING
			Animation           = StunFlail
				AnimationName     = GUBanner_FLYA
				AnimationMode      = LOOP
			End
			Flags               = RANDOMSTART
		End

		AnimationState        = DYING SPLATTED
			Animation           = LNDA
				AnimationName     = GUBanner_LNDA
				AnimationMode     = ONCE
			End
		End

		AnimationState        = DYING
			Animation           = DIEA
				AnimationName     = GUBanner_DIEA
				AnimationMode     = ONCE
			End
		End
		
		AnimationState        = STUNNED
			Animation           = LNDA
				AnimationName     = GUBanner_LNDA
				AnimationMode     = ONCE
			End
		End

		AnimationState        = STUNNED_STANDING_UP
			Animation           = GTPA
				AnimationName     = GUBanner_GTPA
				AnimationMode     = ONCE
			End
		End
		
		AnimationState        = FIRING_OR_PREATTACK_A
			Animation           = ATKA
				AnimationName     = GUBanner_ATKA
				AnimationMode     = ONCE
				UseWeaponTiming	  = Yes
			End
			StateName           = Attack
		End
		
		AnimationState					= MOVING BACKING_UP
			Animation					= BackingUp
				AnimationName			= GUBanner_BAKA
				AnimationMode			= LOOP
				AnimationBlendTime		= 15
			End
			Flags						= RANDOMSTART
		End
		
		AnimationState				= MOVING ALTERNATE_FORMATION PASSENGER_VARIATION_3
			Animation				= WalkingInASlowShieldGuardFormation
				AnimationName		= GUBanner_WLKA
				AnimationMode		= LOOP
               AnimationSpeedFactorRange = .9 .9
			End
			Flags					= RANDOMSTART
			;ParticleSysBone			= None InfantryDustTrails
		End
	
		AnimationState				= MOVING ALTERNATE_FORMATION PASSENGER_VARIATION_1
			Animation				= RunningSlowerInAFighterAlternateFormation
				AnimationName		= GUBanner_RUNA
				AnimationMode		= LOOP
                AnimationSpeedFactorRange = .5 .5
			End
			Flags					= RANDOMSTART
			;ParticleSysBone			= None InfantryDustTrails
		End
		
		AnimationState				= MOVING
			Animation				= RUNA
				AnimationName		= GUBanner_RUNA
				AnimationMode		= LOOP
                AnimationSpeedFactorRange = .8 .8 ;
			End
			Flags					= RANDOMSTART
			;ParticleSysBone			= None InfantryDustTrails
		End
		
;;----------------- HIT REACTION -----------------------------------
		
		AnimationState = HIT_REACTION
			Animation = Hit_Level_1_a
				AnimationName = GUBanner_HITA
				AnimationMode = ONCE
			End
		End
		
;;-------------------------------- EMOTIONS ------------------------------------------
;;======== APPREHENSIVE
		
		AnimationState					=	EMOTION_ALERT EMOTION_AFRAID USER_3
			Animation					=	Apprehensive
				AnimationName			=	RURrmBnr_APPA
				AnimationMode			=	LOOP	;Change this to ONCE if adding additional anims
			End
		End				
		AnimationState					=	EMOTION_ALERT EMOTION_AFRAID
			Animation					=	Apprehensive
				AnimationName			=	GUBanner_APPA
				AnimationMode			=	LOOP	;Change this to ONCE if adding additional anims
			End
		End
		
;;======== AFRAID

		AnimationState					= EMOTION_AFRAID USER_3
			Animation					= FERA
				AnimationName			= RURrmBnr_FERA
				AnimationMode			= LOOP
			End
			Animation					= FERB
				AnimationName			= RURrmBnr_FERB
				AnimationMode			= LOOP
			End
		End
		AnimationState					= EMOTION_AFRAID
			Animation					= FERA
				AnimationName			= GUBanner_FERA
				AnimationMode			= LOOP
			End
		End
		
;;======= TAUNTING

		AnimationState					= EMOTION_TAUNTING USER_3
			Animation					= Taunting
				AnimationName			= RURrmBnr_TNTA
				AnimationMode			= ONCE
			End
			Animation					= Taunting2
				AnimationName			= RURrmBnr_TNTB
				AnimationMode			= ONCE
			End
			Flags						= RESTART_ANIM_WHEN_COMPLETE
		End
		AnimationState					= EMOTION_TAUNTING
			Animation					= Taunting
				AnimationName			= GUBanner_TNTA
				AnimationMode			= LOOP
			End
		End
		
;;====== POINTING

		AnimationState					= EMOTION_POINTING USER_3
			Animation					= &&POINT&&
				AnimationName			= RURrmBnr_IDLA
				AnimationMode			= LOOP
			End
		End
		AnimationState					= EMOTION_POINTING
			Animation					= &&POINT&&
				AnimationName			= GUBanner_IDLA
				AnimationMode			= LOOP
			End
		End
		
;;======== CELEBRATING

		AnimationState					= EMOTION_CELEBRATING USER_3
			Animation					= CheerA
				AnimationName			= RURrmBnr_CHRA
				AnimationMode			= ONCE
				AnimationBlendTime		= 74
                AnimationMustCompleteBlend = yes
			End
			Animation					= CheerB
				AnimationName			= RURrmBnr_CHRB
				AnimationMode			= ONCE
				AnimationBlendTime		= 74
                AnimationMustCompleteBlend = yes
			End
			Animation					= CheerC
				AnimationName			= RURrmBnr_CHRC
				AnimationMode			= ONCE
				AnimationBlendTime		= 74
                AnimationMustCompleteBlend = yes
			End
			Animation					= CheerD
				AnimationName			= RURrmBnr_CHRD
				AnimationMode			= ONCE
				AnimationBlendTime		= 74
                AnimationMustCompleteBlend = yes
			End
			Animation					= Salute
				AnimationName			= RURrmBnr_SLTA
				AnimationMode			= ONCE
				AnimationBlendTime		= 74
                AnimationMustCompleteBlend = yes
			End
			
			Flags						= RESTART_ANIM_WHEN_COMPLETE
		End
		AnimationState					= EMOTION_CELEBRATING
			Animation					= CHRA
				AnimationName			= GUBanner_CHRA
				AnimationMode			= ONCE
			End
			Flags						= RESTART_ANIM_WHEN_COMPLETE
		End

	;;----------------- ALERT STATE ------------------------------------
	
		AnimationState					= EMOTION_ALERT USER_3
			Animation					= IDLA
				AnimationName			= RURrmBnr_IDLA
				AnimationMode			= LOOP
			End
			;Flags						= RESTART_ANIM_WHEN_COMPLETE
		End
		AnimationState					= EMOTION_ALERT
			Animation					= IDLA
				AnimationName			= GUBanner_IDLA
				AnimationMode			= LOOP
			End
			;Flags						= RESTART_ANIM_WHEN_COMPLETE
			;BeginScript
			;	Prev = CurDrawablePrevAnimationState()
			;	if Prev == "STATE_Selected" then CurDrawableSetTransitionAnimState("TRANS_Selected_To_Ready") end
			;EndScript
		End
		
;--------- selected and transitions ------------------------------------
		AnimationState					=	SELECTED USER_3
			StateName					=	STATE_Selected_User_3
			Animation					=	AtAttention
				AnimationName			=	RURrmBnr_ATNB
				AnimationMode			=	LOOP
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "State_User3" then CurDrawableSetTransitionAnimState("TRANS_Idle_To_Selected3") end
			EndScript
		End	
		
		
		
		AnimationState					= SELECTED
			StateName					= STATE_Selected
			Animation					= ATNB
				AnimationName			= GUBanner_ATNB
				AnimationMode			= LOOP
				AnimationBlendTime		= 15
			End
			;Flags						= RESTART_ANIM_WHEN_COMPLETE
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_Idle_To_Selected") end
			EndScript
		End
;;=======IDLE STATE
		AnimationState					=	USER_3
			StateName					=	State_User3
			;Animation					=	IdleA
			;	AnimationName			=	RURrmBnr_IDLA
			;	AnimationPriority		=	20
			;	AnimationMode			=	ONCE
			;	AnimationBlendTime		=	15
			;End
			Animation					=	IdleB
				AnimationName			=	RURrmBnr_IDLB
				AnimationMode			=	LOOP
				AnimationBlendTime		=	15
			End
			;Flags						= RESTART_ANIM_WHEN_COMPLETE
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Selected_User_3" then CurDrawableSetTransitionAnimState("TRANS_Selected3_To_Idle") end
			EndScript
		End
		
		
		
		
		TransitionState					=	TRANS_Idle_to_Selected
			Animation					=	ATNA
				AnimationName			=	GUBanner_ATNA
				AnimationMode			=	ONCE
			End
		End
		
		
		TransitionState					=	TRANS_Idle_to_Selected3
			Animation					=	ATNA
				AnimationName			=	RURrmBnr_ATNA
				AnimationMode			=	ONCE
			End
		End
		
		
		TransitionState					=	TRANS_Selected3_to_Idle
			Animation					=	ATNC
				AnimationName			=	RURrmBnr_ATNC
				AnimationMode			=	ONCE
			End
		End
		
		;TransitionState					=	TRANS_Selected_To_Ready
		;	Animation					=	ATNB
		;		AnimationName			=	GUBanner_ATNB
		;		AnimationMode			=	ONCE
		;	End
		;End
;;-------------------------------------------------------------------------------------
	End
	
	; ***DESIGN parameters ***
	Side = Gondor
	EditorSorting = UNIT
	ThreatLevel = 1.0
	ThingClass = HORDE_UNIT
	CommandPoints = 0

	TransportSlotCount = 1
	WeaponSet
		Conditions = None 
		Weapon = PRIMARY    GondorSword
		AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End
	ArmorSet
		Conditions      = None
		Armor           = NoArmor
		DamageFX        = NormalDamageFX
	End

	VisionRange = VISION_STANDARD_MELEE
	ShroudClearingRange = SHROUD_CLEAR_STANDARD

	DisplayName = OBJECT:GondorBanner
	CrusherLevel = 0			;Can I crush anything?
	CrushableLevel = 0			;What am I?:        0 = for infantry, 1 = for trees, 2 = cavalry/heroes
	MountedCrusherLevel = 1		;Crush level when mounted.
	MountedCrushableLevel = 3	;Crusable level when mounted.
	CrushRevengeWeapon = BasicInfantryCrushRevenge
	BuildCost 		= GONDOR_BANNER_BUILDCOST
	BuildTime 		= GONDOR_BANNER_BUILDTIME
	BountyValue     = GONDOR_BANNER_BOUNTY_VALUE
	CommandSet      = GondorBannerCommandSet


	; *** AUDIO Parameters ***;

	VoiceAmbushed			= GondorSoldierVoiceAmbushed
	VoiceAttack			= GondorSoldierVoiceAttack		;GondorBannerCarrierVoiceAttack
	VoiceAttackCharge		= GondorSoldierVoiceAttackCharge
	VoiceAttackMachine		= GondorSoldierVoiceAttack
	VoiceAttackStructure		= GondorSoldierVoiceAttackBuilding
	VoiceEnterStateAttack			= GondorSoldierVoiceEnterStateAttack		;GondorBannerCarrierVoiceAttack
	VoiceEnterStateAttackCharge		= GondorSoldierVoiceEnterStateAttackCharge
	VoiceEnterStateAttackMachine		= GondorSoldierVoiceEnterStateAttackBuilding
	VoiceEnterStateAttackStructure		= GondorSoldierVoiceEnterStateAttackBuilding
	VoiceCreated			= GondorBannerVoiceSalute
	VoiceFullyCreated 		= GondorBannerVoiceSalute
	;VoiceFear 			= 					
	VoiceMove			= GondorBannerVoiceMove			;GondorBannerCarrierVoiceMove
	VoiceMoveToCamp			= GondorBannerVoiceMove
	VoiceMoveWhileAttacking		= GondorSoldierVoiceDisengage
	VoiceEnterStateMove			= GondorBannerVoiceEnterStateMove
	VoiceEnterStateMoveToCamp			= GondorBannerVoiceEnterStateMove
	VoiceEnterStateMoveWhileAttacking		= GondorSoldierVoiceEnterStateDisengage
	VoiceEnterStateRetreatToCastle		= GondorSoldierVoiceEnterStateRetreat
	VoicePriority			= 10
	VoiceRetreatToCastle		= GondorSoldierVoiceRetreat
	VoiceSelect			= GondorBannerVoiceSelect		;GondorBannerCarrierVoiceSelect
	VoiceSelectBattle 		= GondorBannerVoiceSelect
	VoiceCombineWithHorde    = GondorBannerVoiceJoin
	VoiceGuard			= GondorSoldierVoiceMove
	

	SoundImpact			= ImpactHorse

	EvaEventDamagedOwner = UnitUnderAttack		;Eva event to trigger when unit is damaged


	; *** ENGINEERING Parameters ***
	RadarPriority = UNIT
	KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE THROWN_OBJECT GRAB_AND_DROP BANNER IGNORES_SELECT_ALL
	
	Body = ActiveBody ModuleTag_02
		MaxHealth         = GONDOR_BANNER_HEALTH
		MaxHealthDamaged  = GONDOR_BANNER_HEALTH_DAMAGED
		;RecoveryTime      = GONDOR_BANNER_HEALTH_RECOVERY_TIME
	End
	
	Behavior = AIUpdateInterface ModuleTag_03
		AutoAcquireEnemiesWhenIdle = Yes ATTACK_BUILDINGS STEALTHED
		MoodAttackCheckRate        = 500
		AttackPriority				= 	AttackPriority_Infantry
	End

	LocomotorSet
		Locomotor = HumanLocomotor
		Condition = SET_NORMAL 
		Speed     = NORMAL_GOOD_INFANTRY_MEMBER_SPEED	
	End

	LocomotorSet
		Locomotor = HumanWanderLocomotor
		Condition = SET_WANDER 
		Speed     = NORMAL_GOOD_INFANTRY_MEMBER_SPEED	
	End
	
	LocomotorSet
		Locomotor = HorseLocomotor
		Condition = SET_MOUNTED 
		Speed     = 90
	End
	  
	Behavior = PhysicsBehavior ModuleTag_04
		GravityMult = 1.0
		ShockStunnedTimeLow		= 1400	;msec
		ShockStunnedTimeHigh	= 2400	;msec
		ShockStandingTime		= 1000	;msec
	End
	
	Behavior = SlowDeathBehavior ModuleTag_05
		DeathTypes = ALL -KNOCKBACK
		SinkDelay = 3000
		SinkRate = 0.40     ; in Dist/Sec
		DestructionDelay = 8000
		Sound = INITIAL GondorBannerVoiceDie	
	End
	
	Behavior = SquishCollide ModuleTag_06
		;nothing
	End

	;;; COMBINE WITH NEAREST HORDE SPECIAL POWER ;;;
	Behavior = CombineHordeSpecialPower ModuleTag_CombineWithNearest
		SpecialPowerTemplate    = SpecialAbilityCombineWithNearest
		InitiateSound = GondorBannerVoiceJoin
		ScanRange = 400.0
	End

	;/////////////////////////////////////////////////////////
	;// BannerCarrierUpdate module
	;/////////////////////////////////////////////////////////
	Behavior = BannerCarrierUpdate BannerCarrierUpdateModuleTag
		IdleSpawnRate			= 10000							; spawn a new member every n seconds when idle (in miliseconds)
		MeleeFreeUnitSpawnTime		= 20000							; n miliseconds units must not have been fighting to be able to spawn units when idle (in miliseconds)
		DiedRespawnTime			= 10000							; how much time must pass after Banner Carrier dies before horde can spawn another
		MeleeFreeBannerReSpawnTime	= 20000							; how much time since horde has been fighting before a new Banner Carrier can be respawned
		
		BannerMorphFX		= FX_HordeResurrection					; name of particle FX to use when the BannerCarrier morphs into the dest unit type
		UnitSpawnFX			= FX_HordeResurrection					; name of particle FX to use when the BannerCarrier spawns a new unit
		
		; Depending on the unit type selected, we will morph into one of the following 
		; unitTypes by setting the appropriate model condition state
		
		; Silver Tree Banner
		MorphCondition		= UnitType:GondorFighter				ModelState:"USER_1 PASSENGER_VARIATION_1"
		MorphCondition		= UnitType:GondorArcher					ModelState:"USER_1 PASSENGER_VARIATION_2"
		MorphCondition		= UnitType:GondorTowerShieldGuard		ModelState:"USER_1 PASSENGER_VARIATION_3"
		
		; Ranger Banner
		MorphCondition		= UnitType:GondorRanger					ModelState:"USER_2"
		
		; Knight Banner
		MorphCondition		= UnitType:GondorCavalry			Locomotor:SET_MOUNTED	ModelState:"USER_3 MOUNTED"		
		
		; show/hide subobjects based on various experience levels
		;ExpLevelDraw		= Level:1		SubObject:Hide:Adornment		SubObject:Hide:Streamers			SubObject:Hide:Glow
		;ExpLevelDraw		= Level:2		SubObject:Hide:Adornment		SubObject:Hide:Streamers			SubObject:Hide:Glow
		;ExpLevelDraw		= Level:3		SubObject:Hide:Adornment		SubObject:Hide:Streamers			SubObject:Hide:Glow
		;ExpLevelDraw		= Level:4		SubObject:Hide:Adornment		SubObject:Hide:Streamers			SubObject:Hide:Glow
		
		;ExpLevelDraw		= Level:5		SubObject:Show:Adornment		SubObject:Show:Streamers			SubObject:Hide:Glow
		;ExpLevelDraw		= Level:6		SubObject:Show:Adornment		SubObject:Show:Streamers			SubObject:Hide:Glow	
		;ExpLevelDraw		= Level:7		SubObject:Show:Adornment		SubObject:Show:Streamers			SubObject:Hide:Glow	
		;ExpLevelDraw		= Level:8		SubObject:Show:Adornment		SubObject:Show:Streamers			SubObject:Hide:Glow	
		;ExpLevelDraw		= Level:9		SubObject:Show:Adornment		SubObject:Show:Streamers			SubObject:Hide:Glow
		
		;ExpLevelDraw		= Level:10		SubObject:Show:Adornment		SubObject:Show:Streamers			SubObject:Show:Glow
	End

	;Banner carriers can stealth if they are in a horde with rangers.	
	Behavior = StealthUpdate StealthUpdateModuleTag
		StealthDelay						= 2500         ; msec
		FriendlyOpacityMin					= STEALTH_FRIENDLY_OPACITY_MIN
		FriendlyOpacityMax					= STEALTH_FRIENDLY_OPACITY_MAX
		PulseFrequency						= 750   ; msec
		StealthForbiddenConditions			= HORDEBRAIN_NOT_STEALTHED
		OrderIdleEnemiesToAttackMeUponReveal= Yes
		DetectedByAnyoneRange				= 120
		RevealWeaponSets					= CLOSE_RANGE CONTESTING_BUILDING
		VoiceMoveToStealthyArea				= RangerVoiceMoveTrees
		VoiceEnterStateMoveToStealthyArea	= RangerVoiceEnterStateMoveTrees
	End

	Behavior = SlowDeathBehavior ModuleTag_07
		; Same as normal death, but no sound (sound already played by SoundImpact = ... )
		DeathTypes = NONE +KNOCKBACK
		SinkDelay = 3000
		SinkRate = 0.40     ; in Dist/Sec
		DestructionDelay = 8000
	End

	Behavior = BezierProjectileBehavior ModuleTag_08 ; Module starts asleep, and wakes up when thrown.
		; To tweak a Bezier path
		FirstHeight = 24  ; Height of Bezier control points above highest intervening terrain
		SecondHeight = 24
		FirstPercentIndent = 30% ; Percentage of shot distance control points are placed
		SecondPercentIndent = 70%
		TumbleRandomly = Yes

		CrushStyle = Yes ; I don't detonate, I just hit
		DieOnImpact = Yes
		BounceCount = 1   ; When I hit the ground, I'll arc again
		BounceDistance = 40 ; this far
		BounceFirstHeight = 24  ; Height of Bezier control points above highest intervening terrain
		BounceSecondHeight = 24
		BounceFirstPercentIndent = 20% ; Percentage of shot distance control points are placed
		BounceSecondPercentIndent = 80%

		GroundHitFX       = FX_ThrownRockGroundHit
		GroundBounceFX    = FX_ThrownRockBounceHit
	End

	; Tie into LargeGroupAudio system
	Behavior = LargeGroupAudioUpdate ModuleTag_LGAU
		Key = Human Unit Infantry
	End
	
	Behavior = HitReactionBehavior HitReactionBehaviorModuleTag
		HitReactionLifeTimer1 = 7 ; level 1 (light  damage)  hit reaction animations in frames (5 per sec)
		HitReactionLifeTimer2 = 15 ; level 2 (medium damage)  hit reaction animations in frames (5 per sec)
		HitReactionLifeTimer3 = 10 ; level 3 (heavy  damage)  hit reaction animations in frames (5 per sec)

		HitReactionThreshold1 = 0.0   ; level 1 (light  damage) threshold trigger
		HitReactionThreshold2 = 25.0  ; level 2 (medium damage) threshold trigger
		HitReactionThreshold3 = 50.0  ; level 3 (heavy  damage) threshold trigger
	End
	
	Geometry = CYLINDER
	GeometryMajorRadius = 8.0
	GeometryMinorRadius = 8.0
	GeometryHeight = 19.2
	GeometryIsSmall = Yes
  Shadow = SHADOW_DECAL
  ShadowSizeX = 19;
  ShadowSizeY = 19;
  ShadowTexture = ShadowI;
End

;------------------------------------------------------------------------------
; aka Last Alliance Gondor Archer
Object LAGondorArcher
	; *** ART Parameters ***
	UpgradeCameo1						=	Upgrade_GondorFireArrows
	SelectPortrait						=	UPNumenorean_Archer
	Draw = W3DHordeModelDraw ModuleTag_01
		OkToChangeModelColor = Yes

		StaticModelLODMode = Yes
		
		; specify options for static LODs
		LodOptions	= LOW
			AllowMultipleModels		=	ALLOW_MULTIPLE_MODELS_LOW
			MaxRandomTextures		=	MAX_RANDOM_TEXTURES_LOW
			MaxRandomAnimations		=	MAX_RANDOM_ANIMATIONS_LOW
			MaxAnimFrameDelta		=	MAX_ANIM_FRAME_DELTA_LOW
		End
		
		LodOptions	= MEDIUM
			AllowMultipleModels		=	ALLOW_MULTIPLE_MODELS_MED
			MaxRandomTextures		=	MAX_RANDOM_TEXTURES_MED
			MaxRandomAnimations		=	MAX_RANDOM_ANIMATIONS_MED
			MaxAnimFrameDelta		=	MAX_ANIM_FRAME_DELTA_MED
		End
		
		LodOptions	= HIGH
			AllowMultipleModels		=	ALLOW_MULTIPLE_MODELS_HIGH
			MaxRandomTextures		=	MAX_RANDOM_TEXTURES_HIGH
			MaxRandomAnimations		=	MAX_RANDOM_ANIMATIONS_HIGH
			MaxAnimFrameDelta		=	MAX_ANIM_FRAME_DELTA_HIGH
		End
		
		ParticlesAttachedToAnimatedBones = yes

		; --------- With Bow ------------
		DefaultModelConditionState
			Model						=	GUNumnArch_SKN
			Skeleton					=   GUArcher_SKL
			WeaponLaunchBone			=	PRIMARY ARROW
		End

		; --------- With Bow Upgrade  ------------
		ModelConditionState = WEAPONSET_PLAYER_UPGRADE
			Model						=	GUNumnArch_SKN
			Skeleton					=   GUArcher_SKL
			WeaponLaunchBone			=	PRIMARY ARROW
;			ParticleSysBone				=   FireArowTip arrowFire FollowBone:Yes
;			ParticleSysBone				=   FireArowTip arrowFire FollowBone:Yes
		End
	
		ModelConditionState = USER_4		; This state is used in cinematics to get the old style armor
			Model							= GUNumnArch_SKN	
			Skeleton						= GUMAArms_SKL
		End

		;-----------------
		IdleAnimationState
			StateName					=   STATE_Idle
			Animation = IdleA
				AnimationName			=	GUArcher_IDLA 
				AnimationPriority		=	6
				AnimationSpeedFactorRange = 0.7 1.3
			End
			;*** Repeat IDLA because animation priorities will not choose same animation twice so it can alternate between first two mostly.
			Animation = IdleA	
				AnimationName			=	GUArcher_IDLA 
				AnimationPriority		=	6
				AnimationSpeedFactorRange = 0.7 1.3
			End
			Animation = IdleH
				AnimationName			=	GUArcher_IDLH
				AnimationPriority		=	1
				AnimationSpeedFactorRange = 0.7 1.3
				AnimationBlendTime		= 8
			End
			Animation = IdleI
				AnimationName			=	GUArcher_IDLI
				AnimationPriority		=	1
				AnimationSpeedFactorRange = 0.7 1.3
				AnimationBlendTime		= 8
			End
			Animation = IdleJ
				AnimationName			=	GUArcher_IDLJ
				AnimationPriority		=	1
				AnimationSpeedFactorRange = 0.7 1.3
				AnimationBlendTime		= 8
			End
			
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Selected" then CurDrawableSetTransitionAnimState("TRANS_Selected_To_Idle") end
				CurDrawableShowSubObject("arrow") ;Circumvents blend issues when the arrow is being shown...
			EndScript
		End
		
		AnimationState        = PASSENGER FREEFALL
			Animation           = FLLA
				AnimationName     = GUArcher_FLLA
				AnimationMode     = LOOP
			End
			BeginScript
				CurDrawableHideSubObject("arrow") ;Circumvents blend issues when the arrow is being shown...
			EndScript
		End

		AnimationState			= FREEFALL
			Animation			= Flying_1
				AnimationName	= GUARCHER_FLYA
				AnimationMode	= LOOP
				AnimationSpeedFactorRange = 0.35 0.35 ;Very slow
				AnimationBlendTime		  = 10		;Very slow
			End
			BeginScript
				CurDrawableHideSubObject("arrow") ;Circumvents blend issues when the arrow is being shown...
			EndScript
		End
	    
		AnimationState        = THROWN_PROJECTILE
			Animation           = FLYA
				AnimationName     = GUArcher_FLYA
				AnimationMode     = LOOP
			End
			BeginScript
				CurDrawableHideSubObject("arrow") ;Circumvents blend issues when the arrow is being shown...
			EndScript
		End

		; --- stunned anims
		AnimationState					=	STUNNED_FLAILING 
			Animation					=	StunFlail
				AnimationName			=	GUArcher_FLYA 
				AnimationMode			=	LOOP
			End
			Flags						=	RANDOMSTART
			BeginScript
				CurDrawableHideSubObject("arrow") ;Circumvents blend issues when the arrow is being shown...
			EndScript
		End

		AnimationState					=	DYING SPLATTED
			Animation					=	Fire
				AnimationName			=	GUArcher_LNDA 
				AnimationMode			=	ONCE
				AnimationSpeedFactorRange = 0.7 1.3
			End
            EnteringStateFX = FX_SoldierHitGround
			BeginScript
				CurDrawableHideSubObject("arrow") ;Circumvents blend issues when the arrow is being shown...
			EndScript
		End

		AnimationState					=	DYING AFLAME
			Animation					=	Fire
				AnimationName			=	GUArcher_MFDA 
				AnimationSpeedFactorRange = 0.9 1.1
			End
			BeginScript
				CurDrawableHideSubObject("arrow") ;Circumvents blend issues when the arrow is being shown...
			EndScript
		End

		AnimationState					=	DYING
			Animation					=	Die1
				AnimationName			=	GUArcher_DIEA 
				AnimationMode			=	ONCE
				AnimationSpeedFactorRange = 0.7 1.3
			End
			Animation					=	Die2
				AnimationName			=	GUArcher_DIEB 
				AnimationMode			=	ONCE
				AnimationSpeedFactorRange = 0.7 1.3
			End
			BeginScript
				CurDrawableHideSubObject("arrow") ;Circumvents blend issues when the arrow is being shown...
			EndScript
		End

		AnimationState					=	STUNNED_STANDING_UP 
			Animation					=	GTPA
				AnimationName			=	GUArcher_GTPA
				AnimationMode			=	ONCE
				AnimationSpeedFactorRange = 0.7 1.1
			End
			BeginScript
				CurDrawableHideSubObject("arrow") ;Circumvents blend issues when the arrow is being shown...
			EndScript
		End

		AnimationState					=	STUNNED 
			Animation					=	StunFlail
				AnimationName			=	GUArcher_LNDA 
				AnimationMode			=	ONCE
			End
            EnteringStateFX = FX_SoldierHitGround
			BeginScript
				CurDrawableHideSubObject("arrow") ;Circumvents blend issues when the arrow is being shown...
			EndScript
		End
		
  		AnimationState					=	FIRING_OR_PREATTACK_B
  			Animation					=	BowPunchWhenClose
  				AnimationName			=	GUArcher_ATKD 
  				AnimationMode			=	ONCE
  				UseWeaponTiming			=	Yes
  			End
 			BeginScript
				CurDrawableHideSubObject("arrow") ;Circumvents blend issues when the arrow is being shown...
			EndScript
 		End

		;---------------------------------------------------
		;New style firing
		AnimationState					=	PREATTACK_A 
			StateName					=	STATE_PreFiring
			Animation					=	ReadyToDrawn
				AnimationName			=	GUArcher_ATKF1
				AnimationMode			=	ONCE
;				UseWeaponTiming			=	Yes			; UseWeaponTiming plus random weapon field equals desync.  Leaving as warning
				AnimationBlendTime		=	10
			End
			BeginScript
				CurDrawableShowSubObject("arrow") ;Circumvents blend issues when the arrow is being shown...
			EndScript
		End

		AnimationState					=	FIRING_OR_RELOADING_A 
			StateName					=	STATE_Firing
			Animation					=	LooseReloadDraw
				AnimationName			=	GUArcher_ATKF2
				AnimationMode			=	ONCE
;				UseWeaponTiming			=	Yes			; UseWeaponTiming plus random weapon field equals desync.  Leaving as warning
				AnimationSpeedFactorRange = 1.2 1.3		; Therefore, this is all you get.  A slight speed up so that the animation can always finish before any possible random value Design sets the range for
				AnimationBlendTime		=	0
			End
			Flags = START_FRAME_FIRST
			BeginScript
				CurDrawableShowSubObject("arrow") ;Circumvents blend issues when the arrow is being shown...
			EndScript
		End
		
		;End New style firing
		;---------------------------------------------------

		AnimationState					=	MOVING WANDER
			ShareAnimation = Yes
			Animation					=	Wander1
				AnimationName			=	GUArcher_WLKA 
			End
			Animation					=	Wander2
				AnimationName			=	GUArcher_WLKB ;20
			End
			Flags						=	RANDOMSTART
			BeginScript
				CurDrawableHideSubObject("arrow") ;Circumvents blend issues when the arrow is being shown...
			EndScript
		End
		
		AnimationState					= MOVING EMOTION_LOOK_TO_SKY
			ShareAnimation = Yes
			Animation					= TerrorFromTheSky
				AnimationName			= GUArcher_RUNC
				AnimationMode			= LOOP
			End
			BeginScript
				CurDrawableHideSubObject("arrow") ;Circumvents blend issues when the arrow is being shown...
			EndScript
		End

		AnimationState				=	MOVING BACKING_UP
			ShareAnimation = Yes
			Animation				=	BackingUp
				AnimationName		=	GUArcher_BAKA
				AnimationMode		=	LOOP
			End
			Flags					=	RANDOMSTART
			BeginScript
				CurDrawableHideSubObject("arrow") ;Circumvents blend issues when the arrow is being shown...
			EndScript
		End
		
		AnimationState					=	ATTACKING MOVING
			ShareAnimation = Yes
			Animation					=	Move2
				AnimationName			=	GUArcher_RUNB
				Distance				=	28
			End
			Flags						=	RANDOMSTART
			BeginScript
				CurDrawableHideSubObject("arrow") ;Circumvents blend issues when the arrow is being shown...
			EndScript
		End

		AnimationState					=	MOVING
			ShareAnimation = Yes
			Animation					=	Move1
				AnimationName			=	GUArcher_RUNA 
				Distance				=	28
			End
			Flags						=	RANDOMSTART
			BeginScript
				CurDrawableHideSubObject("arrow") ;Circumvents blend issues when the arrow is being shown...
			EndScript
		End

		AnimationState					= CONTINUOUS_FIRE_MEAN
			StateName					=	STATE_Coasting
			Animation					=	HangFrameWhileCoasting
				AnimationName			=	GUArcher_ATKF2
				AnimationMode			=	MANUAL
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Firing" then CurDrawableAllowToContinue() return end
				CurDrawableShowSubObject("arrow") ;Circumvents blend issues when the arrow is being shown...
			EndScript
		End
		
		AnimationState						= CONTINUOUS_FIRE_SLOW
			StateName						= STATE_Idle
			Animation						= PutAwayArrow
				AnimationName				= GUArcher_ATKF3
				AnimationMode				= ONCE
			End
			BeginScript
				CurDrawableShowSubObject("arrow") ;Circumvents blend issues when the arrow is being shown...
			EndScript
		End

;;------------ HIT REACTION -----------------------------------------------------

; --------- Click and Hit Reactions ------------	
		AnimationState = HIT_REACTION
			Animation = Hit_Level_1_a
				AnimationName = GUArcher_HITA
				AnimationMode = ONCE
			End
			BeginScript
				CurDrawableHideSubObject("arrow") ;Circumvents blend issues when the arrow is being shown...
			EndScript
		End

;;------------ EMOTIONS ---------------------------------------------------------

;;======= AFRAID

		AnimationState						= EMOTION_AFRAID
			ShareAnimation = Yes
			Animation						= FERA
				AnimationName				= GUArcher_FERA
				AnimationMode				= LOOP
				AnimationSpeedFactorRange	=	0.7 1.3								
			End
			Animation						= FERB
				AnimationName				= GUArcher_FERB
				AnimationMode				= LOOP
				AnimationSpeedFactorRange	=	0.7 1.3								
			End
			Animation						= FERC
				AnimationName				= GUArcher_FERC
				AnimationMode				= LOOP
				AnimationSpeedFactorRange	=	0.7 1.3								
			End
			Animation						= FERD
				AnimationName				= GUArcher_FERD
				AnimationMode				= LOOP
				AnimationSpeedFactorRange	=	0.7 1.3								
			End
			Flags							= RANDOMSTART			
			BeginScript
				CurDrawableHideSubObject("arrow") ;Circumvents blend issues when the arrow is being shown...
			EndScript
		End
		
;;======= CELEBRATING
		
		AnimationState					= EMOTION_CELEBRATING
			Animation					= CHRB
				AnimationName			= GUArcher_CHRB
				AnimationMode			= Once
				AnimationBlendTime		= 15
				AnimationPriority		= 2
			End
			Animation					= SLTA
				AnimationName			= GUArcher_SLTA
				AnimationMode			= Once
				AnimationBlendTime		= 15
				AnimationPriority		= 2
			End
			Animation					= CHRA
				AnimationName			= GUArcher_CHRA
				AnimationMode			= Once
				AnimationBlendTime		= 15		
				AnimationPriority		= 1;Use least often of cheers (Eugene)
			End
			Flags						=	RESTART_ANIM_WHEN_COMPLETE
			BeginScript
				CurDrawableHideSubObject("arrow") ;Circumvents blend issues when the arrow is being shown...
			EndScript
		End

;;======== TAUNTING

		AnimationState					= EMOTION_TAUNTING
			Animation					= Taunting2
				AnimationName			= GUArcher_IDLE
				AnimationMode			= ONCE
				AnimationBlendTime		= 15
			End
			Animation					= Taunting3
				AnimationName			= GUArcher_IDLF
				AnimationMode			= ONCE
				AnimationBlendTime		= 15
			End
			Animation					= Taunting4
				AnimationName			= GUArcher_IDLG
				AnimationMode			= ONCE
				AnimationBlendTime		= 15
			End

			Flags						= RESTART_ANIM_WHEN_COMPLETE
			BeginScript
				CurDrawableHideSubObject("arrow") ;Circumvents blend issues when the arrow is being shown...
			EndScript
		End

;;======== POINTING

		AnimationState						= EMOTION_POINTING
			ShareAnimation					= Yes
			Animation						= pointing
				AnimationName				= GUArcher_PNTA
				AnimationPriority			= 2
				AnimationSpeedFactorRange	= 0.9 1.1
				AnimationMode				= LOOP
			End
			BeginScript
				CurDrawableHideSubObject("arrow") ;Circumvents blend issues when the arrow is being shown...
			EndScript
		End
		
;;======= ALERT

		AnimationState					= EMOTION_ALERT
			Animation					= Ready
				AnimationName			= GUArcher_IDLA
				AnimationMode			= LOOP
				AnimationPriority		= 3
				AnimationBlendTime		= 15
			End
			Animation					= Ready
				AnimationName			= GUArcher_IDLA
				AnimationMode			= LOOP
				AnimationPriority		= 3
				AnimationBlendTime		= 15
			End
			Animation					= Point
				AnimationName			= GUArcher_PNTA
				AnimationMode			= LOOP
				AnimationPriority		= 1
				AnimationBlendTime		= 15
			End
			BeginScript
				CurDrawableHideSubObject("arrow") ;Circumvents blend issues when the arrow is being shown...
			EndScript
		End
			
;;----------------- SELECTED --------------------------------------------
		AnimationState					=	SELECTED
			ShareAnimation = Yes
			StateName					=	STATE_Selected
			Animation					=	ATNB
				AnimationName			=	GUArcher_ATNB
				AnimationMode			=	LOOP
				AnimationSpeedFactorRange = 0.9 1.1
			End
			Animation					=	IDLA
				AnimationName			=	GUArcher_IDLA 
				AnimationPriority		=	10
				AnimationSpeedFactorRange = 0.7 1.3
			End

			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Idle" 
				then 
					CurDrawableSetTransitionAnimState("TRANS_Idle_to_Selected")
				end
				if CurDrawableModelcondition("ATTACKING")
				then
					return "IDLA"
				else
					return "ATNB"
				end
				CurDrawableHideSubObject("arrow") ;Circumvents blend issues when the arrow is being shown...
			EndScript
		End

;;----------------- Transitions ------------------------------------------------------

		TransitionState					=	TRANS_Idle_to_Selected
			Animation					=	ATNA
				AnimationName			=	GUArcher_ATNA
				AnimationMode			=	ONCE
				AnimationSpeedFactorRange = 0.8 1.2
				AnimationPriority		=   8
			End
			Animation					=	SLTA
				AnimationName			=	GUArcher_SLTA
				AnimationMode			=	ONCE
				AnimationSpeedFactorRange = 1.0 1.5
				AnimationPriority		=   1
			End
			BeginScript
				CurDrawableHideSubObject("arrow") ;Circumvents blend issues when the arrow is being shown...
			EndScript
		End
		TransitionState					=	TRANS_Selected_To_Idle
			Animation					=	ATNC
				AnimationName			=	GUArcher_ATNC
				AnimationMode			=	ONCE
				AnimationSpeedFactorRange = 0.5 2.0
			End
			BeginScript
				CurDrawableHideSubObject("arrow") ;Circumvents blend issues when the arrow is being shown...
			EndScript
		End
	End
		
	; ***DESIGN parameters ***
	Side = Gondor
	EditorSorting = UNIT
	ThreatLevel = 1.0
	ThingClass = HORDE_UNIT
	CommandPoints = 2
	BountyValue = GONDOR_ARCHER_BOUNTY_VALUE

	TransportSlotCount = 1
	WeaponSet
		Conditions = None 
		Weapon = PRIMARY    GondorArcherBow
	End
  	WeaponSet
  		Conditions = CLOSE_RANGE CONTESTING_BUILDING
		Weapon = PRIMARY    GondorArcherBow
  		Weapon = SECONDARY   GondorArcherBowMelee
  		OnlyAgainst = PRIMARY STRUCTURE
  	End
	
	ArmorSet
		Conditions      = None
		Armor           = ArcherArmor
		DamageFX        = NormalDamageFX
	End
	ArmorSet
		Conditions		= PLAYER_UPGRADE
		Armor			= ArcherHeavyArmor
		DamageFX		= NormalDamageFX
	End
	
	VisionRange = GONDOR_ARCHER_VISION_RANGE
	ShroudClearingRange = SHROUD_CLEAR_STANDARD

	DisplayName = OBJECT:GondorArcher
	CrushableLevel = 0  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
	CrushRevengeWeapon = RangedInfantryCrushRevenge
	CommandSet = GondorArcherCommandSet
	

	; *** AUDIO Parameters ***;

	VoiceAmbushed			= GondorArcherVoiceAmbushed		;TEMP_GondorArcherVoiceAmbushed_TEMP
	VoiceAttack			= GondorArcherVoiceAttack
	VoiceAttackCharge		= GondorArcherVoiceAttackCharge
	VoiceAttackMachine		= GondorArcherVoiceAttack	;TEMP_GondorArcherVoiceAttackMachine_TEMP
	VoiceAttackStructure		= GondorArcherVoiceAttackBuilding	;TEMP_GondorArcherVoiceAttackStructure_TEMP
	VoiceEnterStateAttack			= GondorArcherVoiceEnterStateAttack
	VoiceEnterStateAttackCharge		= GondorArcherVoiceEnterStateAttackCharge
	VoiceEnterStateAttackMachine		= GondorArcherVoiceEnterStateAttackBuilding
	VoiceEnterStateAttackStructure		= GondorArcherVoiceEnterStateAttackBuilding
	VoiceCreated			= GondorArcherVoiceSalute		;GondorArcherVoiceCreated
	VoiceFullyCreated 		= GondorArcherVoiceSalute		;GondorArcherVoiceCreated
	;VoiceFear 			= 
	VoiceMove			= GondorArcherVoiceMove
	VoiceMoveToCamp			= GondorArcherVoiceMoveCamp
	VoiceMoveWhileAttacking		= GondorArcherVoiceDisengage		;TEMP_GondorArcherVoiceMoveWhileAttacking_TEMP
	VoiceEnterStateMove					= GondorArcherVoiceEnterStateMove
	VoiceEnterStateMoveToCamp			= GondorArcherVoiceEnterStateMoveCamp
	VoiceEnterStateMoveWhileAttacking	= GondorArcherVoiceEnterStateDisengage	
	VoicePriority			= 47
	VoiceRetreatToCastle		= GondorArcherVoiceRetreat
	VoiceEnterStateRetreatToCastle		= GondorArcherVoiceEnterStateRetreat
	VoiceSelect			= GondorArcherVoiceSelect
	VoiceSelectBattle 		= GondorArcherVoiceSelectBattle
	VoiceGuard			= GondorArcherVoiceMove
	
	SoundImpact			= ImpactHorse

	UnitSpecificSounds
		VoiceGarrison		= GondorArcherVoiceGarrison              
	End

	EvaEventDamagedOwner = UnitUnderAttack		;Eva event to trigger when unit is damaged


	; *** ENGINEERING Parameters ***
	RadarPriority = UNIT
	KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE THROWN_OBJECT ATTACK_NEEDS_LINE_OF_SIGHT ARCHER GRAB_AND_DROP ;GRAB_AND_KILL
	
	Body = ActiveBody ModuleTag_02

		CheerRadius 	  = EMOTION_CHEER_RADIUS
		MaxHealth         = GONDOR_ARCHER_HEALTH
		MaxHealthDamaged  = GONDOR_ARCHER_HEALTH_DAMAGED
		RecoveryTime      = GONDOR_ARCHER_HEALTH_RECOVERY_TIME
	End
	
	Behavior = AIUpdateInterface ModuleTag_03
		AutoAcquireEnemiesWhenIdle	= Yes ATTACK_BUILDINGS
		StopChaseDistance			= 642
		CanAttackWhileContained		= Yes
		AILuaEventsList				= GondorArcherFunctions		 ;; temp, Archers not afraid of trolls
		MinCowerTime				= 8000
		MaxCowerTime				= 10000
		AttackPriority				= 	AttackPriority_Archer
	End
	
	LocomotorSet
		Locomotor = HumanLocomotor
		Condition = SET_NORMAL
		Speed     = NORMAL_GOOD_INFANTRY_MEMBER_SPEED	
	End

	LocomotorSet
		Locomotor = HumanWanderLocomotor
		Condition = SET_WANDER 
		Speed     = NORMAL_GOOD_INFANTRY_MEMBER_SPEED	
	End

	Behavior = PhysicsBehavior ModuleTag_04
		GravityMult = 1.0
	End

	Behavior = SlowDeathBehavior ModuleTag_05
		DeathTypes = ALL 
		SinkDelay = 3000
		SinkRate = 0.600     ; in Dist/Sec
		DestructionDelay = 12000
            	Sound = INITIAL HumanVoiceDie; GondorArcherVoiceDie
	End
	
	Behavior = SquishCollide ModuleTag_06
		;nothing
	End
	
	; LAGondorArcher
	Behavior = HordeMemberCollide ModuleTag_HMC
		;nothing
	End
	
	Behavior = BezierProjectileBehavior ModuleTag_07 ; Module starts asleep, and wakes up when thrown.
		; To tweak a Bezier path
		FirstHeight = 24  ; Height of Bezier control points above highest intervening terrain
		SecondHeight = 24
		FirstPercentIndent = 30% ; Percentage of shot distance control points are placed
		SecondPercentIndent = 70%
		TumbleRandomly = Yes

		CrushStyle = Yes ; I don't detonate, I just hit
		DieOnImpact = Yes
		BounceCount = 1   ; When I hit the ground, I'll arc again
		BounceDistance = 40 ; this far
		BounceFirstHeight = 24  ; Height of Bezier control points above highest intervening terrain
		BounceSecondHeight = 24
		BounceFirstPercentIndent = 20% ; Percentage of shot distance control points are placed
		BounceSecondPercentIndent = 80%

		GroundHitFX       = FX_ThrownRockGroundHit
		GroundBounceFX    = FX_ThrownRockBounceHit
	End

	
	Behavior = ArmorUpgrade ModuleTag_ArmorUpgrade
		TriggeredBy = Upgrade_GondorHeavyArmor
	End

	; Switch arrows being displayed.
	Behavior = SubObjectsUpgrade ModuleTag_FireArrowSwapUpgrade
		TriggeredBy		= Upgrade_GondorFireArrows
		ShowSubObjects	= FireArowTip
	End	
	
	Behavior = SubObjectsUpgrade ModuleTag_HeavyArmorUpgrade
		TriggeredBy = Upgrade_GondorHeavyArmor
		UpgradeTexture	= GUArcher.tga 0 GUArcher_HA.tga
		RecolorHouse	= Yes
		ExcludeSubobjects = FireArowTip
	End
	
	; Fire arrow upgrade
	Behavior = WeaponSetUpgrade ModuleTag_FireArrowParticlesAndLegalityUpgrade
		TriggeredBy		= Upgrade_GondorFireArrows
	End	
	
	; Tie into LargeGroupAudio system
	Behavior = LargeGroupAudioUpdate ModuleTag_LGAU
		Key = Human Unit Infantry Gondor_Archer
	End
	
  	Behavior = DualWeaponBehavior ModuleTag_09
  		SwitchWeaponOnCloseRangeDistance = 40
  	End

	Behavior = HitReactionBehavior HitReactionBehaviorModuleTag
		HitReactionLifeTimer1 = 1993 ; level 1 (light  damage)  hit reaction animations in ms
		HitReactionLifeTimer2 = 1993 ; level 2 (medium damage)  hit reaction animations in ms
		HitReactionLifeTimer3 = 1993 ; level 3 (heavy  damage)  hit reaction animations in ms

		HitReactionThreshold1 = 0.0   ; level 1 (light  damage) threshold trigger
		HitReactionThreshold2 = 25.0  ; level 2 (medium damage) threshold trigger
		HitReactionThreshold3 = 50.0  ; level 3 (heavy  damage) threshold trigger

		FastHitsResetReaction = No    ;If set -- when hits occur faster than the reaction animations, it will reset the animation. (like getting riddled with machine gun bullets)
	End
	
	Geometry = CYLINDER
	GeometryMajorRadius = 8.0
	GeometryMinorRadius = 8.0
	GeometryHeight = 19.2
	GeometryIsSmall = Yes

    Shadow = SHADOW_DECAL
    ShadowSizeX = 19;
    ShadowSizeY = 19;
    ShadowTexture = ShadowI;
End
